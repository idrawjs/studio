import{r as I,R as r}from"./react.D016eMnP.js";import{c as fe,C as kl,t as Za,S as lr,D as eo,B as Oe,T as he,I as Kt,a as cr,F as q,R as me,b as K,d as _l,e as jl,f as Vl,g as st,P as dr,h as et,s as To,E as Qt,i as Na,j as Bl,k as fn,l as ur,A as Fl,M as hr,m as Wl,n as fr,o as Hl,p as Gl}from"./antd.Bw8FNF3J.js";let Bi="idraw-studio";function Qa(e){Bi=e}function Ja(){return Bi}function mr(e){return(...t)=>[Bi,e,...t].join("-")}function H(...e){return[Bi,...e].join("-")}const Yl={locale:"en-US",Header:{},LayoutDetail:{layout:"Layout",groupLayout:"Group Layout",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible"},ElementDesign:{element:"Element",layout:"Layout",global:"Global"},ElementDetail:{basicAttributes:"Basic",borderAttribute:"Border",contentAttribute:"Content",shadowAttribute:"Shadow",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible",deepResizeInGroup:"Deep resize in group",fill:"Fill",stroke:"Stroke"},Menu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio"}},$l={locale:"zh-CN",Header:{},LayoutDetail:{layout:"布局",groupLayout:"组布局",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视"},ElementDesign:{element:"元素",layout:"布局",global:"全局"},ElementDetail:{basicAttributes:"基础",borderAttribute:"边框",contentAttribute:"内容",shadowAttribute:"阴影",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视",deepResizeInGroup:"组内尺寸关联调整",fill:"填充",stroke:"描边"},Menu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例"}},Ka={"en-US":Yl,"zh-CN":$l},va="en-US",La=e=>{const{localeCode:t}=I.useContext(bn);return[I.useMemo(()=>{const i=(Ka[t||va]||Ka[va])[e];return Object.assign({},i)},[t,e])]},Xl=e=>{const{themeMode:t}=e,n="theme",o=H(n),i=H(n,"dark"),a=fe({[o]:!0,[i]:t==="dark"});return{themeMode:t,className:a}},gr=e=>(e!=null&&e.topPrefix&&typeof(e==null?void 0:e.topPrefix)=="string"&&Qa(e.topPrefix),Object.assign({topPrefix:Ja(),createPrefixName:mr,generateClassName:H,getClassNameTopPrefix:Ja,setClassNameTopPrefix:Qa,localeCode:va,getContainer:()=>(e==null?void 0:e.container)||document.body},e||{})),bn=I.createContext(gr()),Ul=e=>{const{children:t,topPrefix:n,localeCode:o,container:i,themeMode:a,getContainer:s}=e,c=gr({topPrefix:n,localeCode:o,getContainer:s}),[d,l]=I.useState(c),{className:h}=Xl({themeMode:a});return I.useEffect(()=>{l(Object.assign(Object.assign({},d),{localeCode:o,container:i}))},[o,i]),r.createElement(bn.Provider,{value:Object.assign({},d)},r.createElement(kl,{theme:{algorithm:a==="dark"?Za.darkAlgorithm:Za.defaultAlgorithm}},r.createElement("div",{className:h},t)))};class qa extends r.PureComponent{render(){const{children:t,className:n,split:o,style:i,size:a,eleRef:s}=this.props,c=["Pane",o,n];let d={flex:1,position:"relative",outline:"none"};return a!==void 0&&(o==="vertical"?d.width=a:(d.height=a,d.display="flex"),d.flex="none"),d=Object.assign({},d,i||{}),r.createElement("div",{ref:s,className:c.join(" "),style:d},t)}}const Zl="base-split-pane",Ql=()=>{const{generateClassName:e}=I.useContext(bn);return{modClassName:e(Zl)}};function Jl(e){const{modClassName:t}=Ql(),{className:n,onClick:o,onDoubleClick:i,onMouseDown:a,onTouchEnd:s,onTouchStart:c,resizerClassName:d=t,split:l,style:h}=e,u=[d,l,n];return I.useMemo(()=>r.createElement("span",{role:"presentation",className:u.join(" "),style:h,onMouseDown:f=>a(f),onTouchStart:f=>{f.preventDefault(),c(f)},onTouchEnd:f=>{f.preventDefault(),s(f)},onClick:f=>{o&&(f.preventDefault(),o(f))},onDoubleClick:f=>{i&&(f.preventDefault(),i(f))}}),[])}const Kl="xxxxx";function es(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch{}}function ts(e,t,n,o){if(typeof o=="number"){const i=typeof t=="number"?t:0,a=typeof n=="number"&&n>=0?n:1/0;return Math.max(i,Math.min(a,o))}return e!==void 0?e:t}function ql(e){return r.Children.toArray(e).filter(t=>t)}class Ii extends r.Component{constructor(t){super(t),this.onMouseDown=this.onMouseDown.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this);const{size:n,defaultSize:o,minSize:i,maxSize:a,primary:s}=t,c=n!==void 0?n:ts(o,i,a,null);this.state={active:!1,resized:!1,pane1Size:s==="first"?c:void 0,pane2Size:s==="second"?c:void 0,instanceProps:{size:n}}}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(Ii.getSizeUpdate(this.props,this.state))}static getDerivedStateFromProps(t,n){return Ii.getSizeUpdate(t,n)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}onMouseDown(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchStart(n)}onTouchStart(t){const{allowResize:n,onDragStarted:o,split:i}=this.props;if(n){es(document,window);const a=i==="vertical"?t.touches[0].clientX:t.touches[0].clientY;typeof o=="function"&&o(),this.setState({active:!0,position:a})}}onMouseMove(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchMove(n)}onTouchMove(t){const{allowResize:n,maxSize:o,minSize:i,onChange:a,split:s,step:c}=this.props,{active:d,position:l}=this.state;if(n&&d){es(document,window);const h=this.props.primary==="first",u=h?this.pane1:this.pane2,f=h?this.pane2:this.pane1;if(u){const m=u,v=f;if(m.getBoundingClientRect){const g=m.getBoundingClientRect().width,p=m.getBoundingClientRect().height,w=s==="vertical"?t.touches[0].clientX:t.touches[0].clientY,C=s==="vertical"?g:p;let M=l-w;if(c){if(Math.abs(M)<c)return;M=~~(M/c)*c}let y=h?M:-M;const k=parseInt(window.getComputedStyle(m).order),S=parseInt(window.getComputedStyle(v).order);k>S&&(y=-y);let E=o;if(o!==void 0&&o<=0){const b=this.splitPane;s==="vertical"?E=b.getBoundingClientRect().width+o:E=b.getBoundingClientRect().height+o}let L=C-y;const N=l-M;L<i?L=i:o!==void 0&&L>E?L=E:this.setState({position:N,resized:!0}),a&&a(L),this.setState({draggedSize:L,[h?"pane1Size":"pane2Size"]:L})}}}}onMouseUp(){const{allowResize:t,onDragFinished:n}=this.props,{active:o,draggedSize:i}=this.state;t&&o&&(typeof n=="function"&&n(i),this.setState({active:!1}))}static getSizeUpdate(t,n){const o={},{instanceProps:i}=n;if(i.size===t.size&&t.size!==void 0)return{};const a=t.size!==void 0?t.size:ts(t.defaultSize,t.minSize,t.maxSize,n.draggedSize);t.size!==void 0&&(o.draggedSize=a);const s=t.primary==="first";return o[s?"pane1Size":"pane2Size"]=a,o[s?"pane2Size":"pane1Size"]=void 0,o.instanceProps={size:t.size},o}render(){const{allowResize:t,children:n,className:o,onResizerClick:i,onResizerDoubleClick:a,paneClassName:s,pane1ClassName:c,pane2ClassName:d,paneStyle:l,pane1Style:h,pane2Style:u,resizerClassName:f,resizerStyle:m,split:v,style:g}=this.props,{pane1Size:p,pane2Size:w}=this.state,C=t?"":"disabled",M=f&&`${f} ${Kl}`,y=ql(n),k=Object.assign({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},g);v==="vertical"?Object.assign(k,{flexDirection:"row",left:0,right:0}):Object.assign(k,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});const S=["SplitPane",o,v,C],E=Object.assign(Object.assign({},l),h),L=Object.assign(Object.assign({},l),u),N=["Pane1",s,c].join(" "),b=["Pane2",s,d].join(" ");return r.createElement("div",{className:S.join(" "),ref:j=>{this.splitPane=j},style:k},r.createElement(qa,{className:N,key:"pane1",eleRef:j=>{this.pane1=j},size:p,split:v,style:E},y[0]),r.createElement(Jl,{className:C,onClick:i,onDoubleClick:a,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:M,split:v,style:m||{}}),r.createElement(qa,{className:b,key:"pane2",eleRef:j=>{this.pane2=j},size:w,split:v,style:L},y[1]))}}var ec=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const tc="icon",nc=()=>({iconClassName:H(tc)}),ie=e=>{const{className:t,style:n,children:o}=e,i=ec(e,["className","style","children"]),{iconClassName:a}=nc();return I.useMemo(()=>r.createElement("span",Object.assign({className:fe([a,t]),style:n},i),o),[a,n,t])},oc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M516.266667 938.666667h-38.4c-234.666667-21.333333-405.333333-230.4-384-465.066667 17.066667-204.8 179.2-366.933333 384-384 17.066667 0 34.133333 8.533333 42.666666 21.333333 8.533333 12.8 8.533333 34.133333-4.266666 46.933334-85.333333 115.2-59.733333 273.066667 55.466666 358.4 89.6 68.266667 213.333333 68.266667 302.933334 0 12.8-8.533333 29.866667-12.8 46.933333-4.266667 12.8 8.533333 21.333333 25.6 21.333333 42.666667-8.533333 115.2-64 217.6-153.6 290.133333-81.066667 59.733333-174.933333 93.866667-273.066666 93.866667zM396.8 187.733333c-123.733333 42.666667-213.333333 153.6-221.866667 290.133334-17.066667 187.733333 119.466667 354.133333 307.2 371.2 89.6 8.533333 179.2-17.066667 247.466667-76.8 46.933333-38.4 81.066667-89.6 102.4-145.066667-106.666667 38.4-226.133333 21.333333-320-46.933333-119.466667-93.866667-166.4-251.733333-115.2-392.533334z"}))),ic=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 768c-141.376 0-256-114.624-256-256s114.624-256 256-256 256 114.624 256 256-114.624 256-256 256z m0-85.333333a170.666667 170.666667 0 1 0 0-341.333334 170.666667 170.666667 0 0 0 0 341.333334zM469.333333 85.333333a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0V85.333333z m0 768a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0v-85.333334zM85.333333 554.666667a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334H85.333333z m768 0a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334h-85.333334zM161.834667 222.165333a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m576 576a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m-515.669334 64a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z m576-576a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z"}))),ac="base-theme-switch",sc=mr(ac),ns=e=>{if(!(typeof e>"u"))return e==="light"};function rc(e){return e===!0?"light":"dark"}const lc=e=>{const{className:t,style:n,onChange:o,theme:i,defaultTheme:a}=e;return r.createElement(lr,{className:fe([sc(),t]),style:n,checkedChildren:r.createElement(ic,{style:{height:"100%"}}),unCheckedChildren:r.createElement(oc,{style:{height:"100%"}}),checked:ns(a),defaultChecked:ns(i),onChange:s=>{const c=rc(s);o==null||o({theme:c})}})},cc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}),r.createElement("path",{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8C574.1 404.4 544.1 392 512 392z"}))),dc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),uc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),hc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),fc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-0.7 5.2-2L869 536.2c14.7-12.8 14.7-35.6 0-48.4z"}))),mc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}))),gc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H212V612h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200z"}))),vc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333zM128 469.333333v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM128 640v85.333333h85.333333v-85.333333z m0-341.333333v85.333333h85.333333v-85.333333z m341.333333 341.333333v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128zM128 810.666667v85.333333h768v-85.333333z"}))),pc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M592 928H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96zM976 0H784a48 48 0 1 0 0 96h144v144.016a48 48 0 1 0 96 0V48a48 48 0 0 0-48-48zM240 928H96v-144a48 48 0 1 0-96 0v192a48 48 0 0 0 48 48h192a48 48 0 1 0 0-96zM48 640a48 48 0 0 0 48-48V432a48 48 0 1 0-96 0v160a48 48 0 0 0 48 48zM240 0H48a48 48 0 0 0-48 48v192a48 48 0 1 0 96 0V96h144a48 48 0 1 0 0-96z m784 592V432a48 48 0 1 0-96 0v160a48 48 0 1 0 96 0zM592 0H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96z m384 736a48 48 0 0 0-48 48v144h-144a48 48 0 1 0 0 96h192a48 48 0 0 0 48-48V784a48 48 0 0 0-48-48z"}))),yc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333z m-512-170.666667v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM469.333333 640v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v768h85.333333V128z m170.666667 0v85.333333h85.333333V128z m170.666666 682.666667v85.333333h85.333334v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m-512 0v85.333333h85.333333v-85.333333z"}))),wc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333zM128 213.333333h85.333333V128H128v85.333333z m170.666667 0h85.333333V128h-85.333333v85.333333z m0 341.333334h85.333333v-85.333334h-85.333333v85.333334zM128 896h85.333333v-85.333333H128v85.333333z m341.333333 0h85.333334v-85.333333h-85.333334v85.333333zM128 554.666667h85.333333v-85.333334H128v85.333334z m0 170.666666h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m170.666667-170.666666h85.333333v-85.333334h-85.333333v85.333334z m170.666667-426.666667v768h85.333333V128h-85.333333z m-170.666667 768h85.333333v-85.333333h-85.333333v85.333333z m0-682.666667h85.333333V128h-85.333333v85.333333z m-170.666667 341.333334h85.333334v-85.333334h-85.333334v85.333334z m0-341.333334h85.333334V128h-85.333334v85.333333z m0 170.666667h85.333334v-85.333333h-85.333334v85.333333z"}))),bc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333z m0-341.333333h85.333333v-85.333334h-85.333333v85.333334z m170.666666 0h85.333334v-85.333334h-85.333334v85.333334z m0 341.333333h85.333334v-85.333333h-85.333334v85.333333zM128 725.333333h85.333333v-85.333333H128v85.333333z m0 170.666667h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333334H128v85.333334z m0-170.666667h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m341.333334-341.333333h85.333333v-85.333333h-85.333333v85.333333z m0 170.666667h85.333333v-85.333334h-85.333333v85.333334zM128 128v85.333333h768V128H128z m682.666667 597.333333h85.333333v-85.333333h-85.333333v85.333333z m-170.666667 170.666667h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-512h85.333334v-85.333333h-85.333334v85.333333z m341.333334 512h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-341.333333h85.333333v-85.333334h-85.333333v85.333334z"}))),Ec=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8c12.7 17.7 39 17.7 51.7 0l210.6-292c3.9-5.3 0.1-12.7-6.4-12.7z"}),r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),vr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),pr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 0.3L512 465.6l-99.3-118.4-66.1-0.3c-4.4 0-8 3.5-8 8 0 1.9 0.7 3.7 1.9 5.2l130.1 155L340.5 670c-1.2 1.5-1.9 3.3-1.9 5.2 0 4.4 3.6 8 8 8l66.1-0.3L512 564.4l99.3 118.4 66 0.3c4.4 0 8-3.5 8-8 0-1.9-0.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}),r.createElement("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),Sc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M341.333333 512a42.666667 42.666667 0 0 0 42.666667 42.666667h256a42.666667 42.666667 0 0 0 0-85.333334H384a42.666667 42.666667 0 0 0-42.666667 42.666667z"}),r.createElement("path",{d:"M384 682.666667H307.626667A176.213333 176.213333 0 0 1 128 527.786667 170.666667 170.666667 0 0 1 298.666667 341.333333h85.333333a42.666667 42.666667 0 0 0 0-85.333333H307.626667a262.4 262.4 0 0 0-262.826667 222.293333A256 256 0 0 0 298.666667 768h85.333333a42.666667 42.666667 0 0 0 0-85.333333zM981.333333 479.573333A262.826667 262.826667 0 0 0 715.093333 256h-64.426666C616.106667 256 597.333333 275.2 597.333333 298.666667a42.666667 42.666667 0 0 0 42.666667 42.666666h76.373333A176.213333 176.213333 0 0 1 896 496.213333 170.666667 170.666667 0 0 1 725.333333 682.666667h-85.333333a42.666667 42.666667 0 0 0 0 85.333333h85.333333a256 256 0 0 0 256-288.426667z"}))),Cc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M712 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM136 374h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM136 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM540 824H358c-87.3 0-158-70.7-158-158V484c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v182c0 127 103 230 230 230h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),xc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M368 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM484 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM658 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 476h-56c-4.4 0-8 3.6-8 8v182c0 87.3-70.7 158-158 158H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c127 0 230-103 230-230V484c0-4.4-3.6-8-8-8z"}))),Mc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M656 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128H358c-127 0-230 103-230 230v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-87.3 70.7-158 158-158h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),zc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M368 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM666 128H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c87.3 0 158 70.7 158 158v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-127-103-230-230-230z"}))),os=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M896 810.666667v85.333333h-85.333333v-85.333333h85.333333z m-170.666667 0v85.333333h-85.333333v-85.333333h85.333333z m-170.666666 0v85.333333h-85.333334v-85.333333h85.333334z m-170.666667 0v85.333333H298.666667v-85.333333h85.333333z m-170.666667 0v85.333333H128v-85.333333h85.333333z m682.666667-170.666667v85.333333h-85.333333v-85.333333h85.333333zM213.333333 640v85.333333H128v-85.333333h85.333333z m0-170.666667v85.333334H128v-85.333334h85.333333z m469.333334-341.333333a213.418667 213.418667 0 0 1 213.12 204.074667L896 341.333333v213.333334h-85.333333V341.333333a128.426667 128.426667 0 0 0-120.490667-127.786666L682.666667 213.333333h-213.333334V128h213.333334zM213.333333 298.666667v85.333333H128V298.666667h85.333333z m0-170.666667v85.333333H128V128h85.333333z m170.666667 0v85.333333H298.666667V128h85.333333z"}))),Ic=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72z"}),r.createElement("path",{d:"M864 256H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}))),Ac=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M510.762667 970.666667A458.666667 458.666667 0 1 1 969.429333 512a459.178667 459.178667 0 0 1-458.666666 458.666667z m0-853.333334a394.666667 394.666667 0 1 0 394.666666 394.666667 395.093333 395.093333 0 0 0-394.666666-394.666667z"}),r.createElement("path",{d:"M512 724.48A212.48 212.48 0 1 1 724.48 512 212.736 212.736 0 0 1 512 724.48z m0-360.96A148.48 148.48 0 1 0 660.48 512 148.608 148.608 0 0 0 512 363.52z"}))),yr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M272.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512z"}),r.createElement("path",{d:"M576.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}))),Da=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3 0.1-12.7-6.4-12.7z"}))),Tc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M841.065412 337.317647v352.015059c0 46.802824-23.070118 74.752-39.936 95.111529-14.095059 17.106824-21.443765 26.684235-21.443765 41.803294V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-107.39953c0-37.526588 19.576471-61.199059 35.297882-80.173176 14.576941-17.648941 26.142118-31.563294 26.142118-56.681412V337.317647c0-18.793412-16.143059-36.502588-33.189647-36.502588-19.817412 0-24.033882 3.072-24.214588 3.19247-3.975529 5.360941-3.855059 34.273882-3.794824 57.584942 0.060235 11.384471 0.120471 24.094118-0.12047 38.068705-0.240941 16.504471-12.830118 28.792471-30.358589 29.696a30.117647 30.117647 0 0 1-29.876706-30.117647v-127.698823c0-18.492235-13.372235-32.406588-31.081411-32.406588-16.263529 0-28.190118 12.107294-29.635765 29.394823v120.651294a30.117647 30.117647 0 0 1-60.235294 0V268.047059l-0.120471-0.602353v-46.561882c0-3.975529-0.843294-38.671059-28.551529-38.671059-27.105882 0-31.201882 24.214588-31.201883 38.671059v42.345411c0 1.686588-0.662588 3.252706-0.963764 4.879059v156.250353a30.117647 30.117647 0 0 1-60.235294 0V262.686118c-2.891294-11.685647-11.324235-23.491765-28.069647-23.491765-17.227294 0-31.744 15.721412-31.744 34.334118v201.788235c0 0.421647-0.361412 0.783059-0.361412 1.204706v66.319059a30.117647 30.117647 0 0 1-60.235294 0v-50.236236c-10.601412-3.855059-25.961412-6.987294-34.755765-4.999529-7.107765 1.385412-14.275765 7.649882-18.733176 16.323765a43.309176 43.309176 0 0 0-0.542118 38.369882L345.148235 766.192941a31.563294 31.563294 0 0 1 2.108236 6.505412 32.888471 32.888471 0 0 0 35.418353 25.961412 30.238118 30.238118 0 0 1 33.310117 29.936941V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-77.462588a92.521412 92.521412 0 0 1-66.680471-67.764706L187.934118 567.055059a104.448 104.448 0 0 1 1.927529-90.774588c12.890353-24.877176 35.418353-42.706824 60.295529-47.766589 12.649412-2.590118 29.756235-1.867294 46.682353 1.566118v-43.369412c0-0.602353 0.301176-1.144471 0.361412-1.746823v-111.435294c0-52.163765 41.321412-94.569412 91.979294-94.569412 12.047059 0 23.612235 2.409412 34.093177 6.746353 11.986824-38.791529 44.152471-63.668706 86.317176-63.668706 40.237176 0 71.800471 25.419294 83.666824 63.909647 10.721882-4.517647 22.467765-6.987294 34.876235-6.987294 41.502118 0 75.776 26.744471 87.160471 64.572235 11.023059-2.409412 22.226824-2.951529 32.286117-2.951529 50.718118 0 93.485176 44.272941 93.485177 96.737882z"}))),Nc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}))),Lc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}),r.createElement("path",{d:"M544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}))),Dc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M170.666667 298.666667a42.666667 42.666667 0 1 1-85.333334 0V256a170.666667 170.666667 0 0 1 170.666667-170.666667h42.666667a42.666667 42.666667 0 1 1 0 85.333334H256a85.333333 85.333333 0 0 0-85.333333 85.333333v42.666667z m554.666666-128a42.666667 42.666667 0 0 1 0-85.333334h42.666667a170.666667 170.666667 0 0 1 170.666667 170.666667v42.666667a42.666667 42.666667 0 0 1-85.333334 0V256a85.333333 85.333333 0 0 0-85.333333-85.333333h-42.666667z m128 554.666666a42.666667 42.666667 0 0 1 85.333334 0v42.666667a170.666667 170.666667 0 0 1-170.666667 170.666667h-42.666667a42.666667 42.666667 0 0 1 0-85.333334h42.666667a85.333333 85.333333 0 0 0 85.333333-85.333333v-42.666667zM298.666667 853.333333a42.666667 42.666667 0 0 1 0 85.333334H256a170.666667 170.666667 0 0 1-170.666667-170.666667v-42.666667a42.666667 42.666667 0 0 1 85.333334 0v42.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h42.666667z"}))),wr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M0.00592 521.157814v-103.646801l430.267025 235.101281c36.191582 13.567843 70.207188 15.615819 111.870706 0.191998l440.986902-258.365013v103.614802l-435.386966 258.877007c-42.175512 18.303788-91.326944 18.303788-126.398539 0L0.00592 521.157814z"}),r.createElement("path",{d:"M0.00592 743.651242v-104.798789l406.427301 221.43744c17.2798 9.439891 40.511532 17.599797 65.119247 20.383764h27.999676c32.511624-5.023942 47.103455-10.207882 67.615218-22.943735l415.931191-258.173014v98.974855l-430.875018 268.95689c-42.111513 17.439798-95.806892 18.079791-130.878487 0.575994L0.00592 743.619242zM20.069688 246.024995L399.073306 20.971598c41.279523-26.303696 90.430954-27.967677 133.342458-4.35195l421.083131 198.621703c35.743587 17.599797 37.18357 61.311291 2.655969 81.151062l-414.043212 226.205384a165.758083 165.758083 0 0 1-133.374458 4.415949L22.725657 327.208057C9.157814 318.664155 0.90191 303.56033 0.229917 285.000545c-0.607993-18.911781 10.719876-32.159628 19.807771-38.94355z"})," ")),br=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M145 96l66 746.6L511.8 928l299.6-85.4L878.7 96H145z m610.9 700.6l-244.1 69.6-245.2-69.6-56.7-641.2h603.8l-57.8 641.2z"}),r.createElement("path",{d:"M281 249l1.7 24.3 22.7 253.5h206.5v-0.1h112.9l-11.4 118.5L511 672.9v0.2h-0.8l-102.4-27.7-6.5-73.2h-91l11.3 144.7 188.6 52h1.7v-0.4l187.7-51.7 1.7-16.3 21.2-242.2 3.2-24.3H511v0.2H389.9l-8.2-94.2h352.1l1.7-19.5 4.8-47.2L742 249H511z"}))),Rc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M540.245333 645.888L426.410667 522.069333l1.365333-1.536a889.770667 889.770667 0 0 0 166.314667-322.048h131.413333V99.669333H411.562667V1.109333h-89.6v98.645334H7.850667v98.730666h500.906666a797.696 797.696 0 0 1-142.165333 263.936 778.581333 778.581333 0 0 1-103.594667-165.290666h-89.6c33.621333 82.176 78.677333 158.037333 133.546667 224.938666L78.848 769.706667l63.658667 69.973333 224.170666-246.613333 139.52 153.429333 34.133334-100.608z m252.501334-250.026667H703.061333l-201.813333 591.872h89.685333l50.261334-147.968h212.992l50.688 147.968h89.685333L792.746667 395.776zM675.242667 741.034667l72.618666-213.674667 72.704 213.674667H675.242667z"}))),Er=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792z m0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z"}),r.createElement("path",{d:"M304 456c48.6 0 88-39.4 88-88s-39.4-88-88-88-88 39.4-88 88 39.4 88 88 88z m0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}))),Sr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M942.3 486.4l-0.1-0.1-0.1-0.1c-36.4-76.7-80-138.7-130.7-186L760.7 351c43.7 40.2 81.5 93.7 114.1 160.9C791.5 684.2 673.4 766 512 766c-51.3 0-98.3-8.3-141.2-25.1l-54.7 54.7C374.6 823.8 439.8 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0.1-51.3zM878.3 154.2l-42.4-42.4c-3.1-3.1-8.2-3.1-11.3 0L707.8 228.5C649.4 200.2 584.2 186 512 186c-192.2 0-335.4 100.5-430.2 300.3v0.1c-7.7 16.2-7.7 35.2 0 51.5 36.4 76.7 80 138.7 130.7 186.1L111.8 824.5c-3.1 3.1-3.1 8.2 0 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0l712.8-712.8c3.1-3 3.1-8.1 0-11.2zM398.9 537.4c-1.9-8.2-2.9-16.7-2.9-25.4 0-61.9 50.1-112 112-112 8.7 0 17.3 1 25.4 2.9L398.9 537.4z m184.5-184.5C560.5 342.1 535 336 508 336c-97.2 0-176 78.8-176 176 0 27 6.1 52.5 16.9 75.4L263.3 673c-43.7-40.2-81.5-93.7-114.1-160.9C232.6 339.8 350.7 258 512 258c51.3 0 98.3 8.3 141.2 25.1l-69.8 69.8z"}),r.createElement("path",{d:"M508 624c-6.4 0-12.7-0.5-18.8-1.6l-51.1 51.1c21.4 9.3 45.1 14.4 69.9 14.4 97.2 0 176-78.8 176-176 0-24.8-5.1-48.5-14.4-69.9l-51.1 51.1c1 6.1 1.6 12.4 1.6 18.8C620 573.9 569.9 624 508 624z"}))),Pc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M118.979048 637.074286l137.99619 66.243047 255.171048 123.587048 246.076952-119.222857 147.163429-70.485334a73.142857 73.142857 0 0 1-34.230857 97.109334l-327.119239 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 734.305524A73.142857 73.142857 0 0 1 118.979048 637.074286z m786.090666-153.063619a73.142857 73.142857 0 0 1-33.913904 97.767619L544.01219 740.205714a73.142857 73.142857 0 0 1-63.780571 0L153.136762 581.778286A73.142857 73.142857 0 0 1 117.51619 487.862857l362.300953 170.886095 32.329143 15.652572 327.119238-158.427429 65.80419-31.939047zM544.036571 139.190857l327.094858 158.403048a73.142857 73.142857 0 0 1 0 131.657143l-327.094858 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 429.251048a73.142857 73.142857 0 0 1 0-131.657143L480.256 139.215238a73.142857 73.142857 0 0 1 63.780571 0z m-31.890285 65.828572L185.027048 363.422476l327.119238 158.427429 327.119238-158.427429L512.146286 205.04381z"}))),Oc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-696 72h136v656H184V184z m656 656H384V384h456v456zM384 320V184h456v136H384z"}))),Cr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8c-16.4 12.8-16.4 37.5 0 50.3l450.8 352.1c5.3 4.1 12.9 0.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}))),kc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53c-12.1-8.7-20-22.9-20-39 0-26.5 21.5-48 48-48s48 21.5 48 48c0 16.1-7.9 30.3-20 39z m152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z"}))),_c=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 42.666667a469.333333 469.333333 0 1 0 469.333333 469.333333A469.333333 469.333333 0 0 0 512 42.666667z m0 864a394.666667 394.666667 0 1 1 394.666667-394.666667 395.146667 395.146667 0 0 1-394.666667 394.666667z"}),r.createElement("path",{d:"M304.906667 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}),r.createElement("path",{d:"M512 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333334 0 66.666667 66.666667 0 1 0-133.333334 0Z"}),r.createElement("path",{d:"M719.093333 512m-66.666666 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}))),jc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M256 682.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0zM768 170.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0z"}),r.createElement("path",{d:"M707.84 316.16a42.666667 42.666667 0 0 1 0 60.330667l-331.178667 331.178666a42.666667 42.666667 0 0 1-60.330666-60.330666l331.178666-331.178667a42.666667 42.666667 0 0 1 60.330667 0z"}))),Vc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M1000.65998 0.00002h-94.819998a24 24 0 0 0-23.999999 25.14l8 165.519996A494.83999 494.83999 0 0 0 511.99999 16.00002C238.679995 16.00002 15.8 239.060015 16 512.38001 16.2 786.140005 238.199995 1008 511.99999 1008a494.19999 494.19999 0 0 0 332.359994-127.819997 24 24 0 0 0 0.959999-34.86l-67.999998-67.999998a24 24 0 0 0-32.76-1.1A351.999993 351.999993 0 1 1 804.199984 315.600014l-203.059996-9.74a24 24 0 0 0-25.139999 24v94.819998a24 24 0 0 0 23.999999 23.999999h400.659992a24 24 0 0 0 24-23.999999V24.00002a24 24 0 0 0-24-24z"}))),xr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"}))),Bc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M935.253333 111.786667a42.666667 42.666667 0 0 0-23.04-23.04A42.666667 42.666667 0 0 0 896 85.333333h-256a42.666667 42.666667 0 0 0 0 85.333334h153.173333L170.666667 793.173333V640a42.666667 42.666667 0 0 0-85.333334 0v256a42.666667 42.666667 0 0 0 3.413334 16.213333 42.666667 42.666667 0 0 0 23.04 23.04A42.666667 42.666667 0 0 0 128 938.666667h256a42.666667 42.666667 0 0 0 0-85.333334H230.826667L853.333333 230.826667V384a42.666667 42.666667 0 0 0 85.333334 0V128a42.666667 42.666667 0 0 0-3.413334-16.213333z"}))),Fc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M128 128h64v389.312A384.32 384.32 0 0 1 506.688 832H896v64H192a64 64 0 0 1-64-64V128z m313.6 704A320.384 320.384 0 0 0 192 582.4V832h249.6z"}))),Wc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M929.19 352.19c3.12 3.12 3.12 8.19 0 11.31L363.51 929.19c-3.12 3.12-8.19 3.12-11.31 0L94.81 671.81c-3.12-3.12-3.12-8.19 0-11.31L660.49 94.81c3.12-3.12 8.19-3.12 11.31 0l257.39 257.38z m-424.26 5.66l108.89 108.89c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0L456.85 405.93l-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-62.23 62.23 161.22 161.22 469.52-469.52-161.23-161.21-62.23 62.23 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91z"}))),Hc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}),r.createElement("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}))),Gc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M725.333333 341.333333a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666666a42.666667 42.666667 0 1 0 42.666667 42.666666 42.666667 42.666667 0 0 0-42.666667-42.666666z"}),r.createElement("path",{d:"M640 256H85.333333a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM938.666667 256h-128a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333zM512 640a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666667 42.666667 42.666667 42.666667 0 0 0-42.666667-42.666667z"}),r.createElement("path",{d:"M426.666667 554.666667H85.333333a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM938.666667 554.666667h-341.333334a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM298.666667 938.666667a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666666 42.666667 42.666667 42.666667 0 0 0-42.666666-42.666667z"}),r.createElement("path",{d:"M938.666667 853.333333H384a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM213.333333 853.333333H85.333333a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333z"}))),Yc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M802.742857 777.485714c49.942857 0 90.742857-41.371429 90.742857-92 0-61.142857-90.742857-160.914286-90.742857-160.914285S712 624.342857 712 685.485714c0 50.628571 40.8 92 90.742857 92z m-430.971428-50.4c8.114286 8.114286 21.257143 8.114286 29.257142 0l292.685715-292.571428c8.114286-8.114286 8.114286-21.257143 0-29.257143l-292.571429-292.571429c-0.685714-0.685714-1.485714-1.371429-2.285714-1.942857l-89.371429-89.371428a10.411429 10.411429 0 0 0-14.628571 0l-54.857143 54.857142a10.411429 10.411429 0 0 0 0 14.628572l76.8 76.8-237.485714 237.6c-8.114286 8.114286-8.114286 21.257143 0 29.257143l292.457143 292.571428z m14.742857-512.685714l204.457143 204.457143H182.171429l204.342857-204.457143zM960 859.428571H64c-5.028571 0-9.142857 4.114286-9.142857 9.142858v91.428571c0 5.028571 4.114286 9.142857 9.142857 9.142857h896c5.028571 0 9.142857-4.114286 9.142857-9.142857v-91.428571c0-5.028571-4.114286-9.142857-9.142857-9.142858z"}))),Mr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}))),zr=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M853.333333 170.666667H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v128a42.666667 42.666667 0 0 0 85.333333 0V256h256v554.666667H384a42.666667 42.666667 0 0 0 0 85.333333h256a42.666667 42.666667 0 0 0 0-85.333333h-85.333333V256h256v85.333333a42.666667 42.666667 0 0 0 85.333333 0V213.333333a42.666667 42.666667 0 0 0-42.666667-42.666666z"}))),$c=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M424.666 448.666H24c-13.254 0-24-10.746-24-24V24C0 10.746 10.746 0 24 0h96c13.254 0 24 10.746 24 24v156.224C235.546 78.558 368.52 14.94 516.35 16.014c273.812 1.988 492.896 223.246 492.314 497.064C1008.082 786.516 786.24 1008 512.666 1008c-128.178 0-244.992-48.626-333.02-128.43-10.198-9.244-10.668-25.108-0.934-34.84l67.934-67.934c8.948-8.948 23.324-9.434 32.802-1.05C341.52 830.672 423.16 864 512.666 864c194.536 0 352-157.432 352-352 0-194.534-157.432-352-352-352-116.992 0-220.56 56.952-284.548 144.666h196.548c13.254 0 24 10.746 24 24v96c0 13.254-10.746 24-24 24z"}))),Xc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32z m-40 376H232V536h560v304z"}),r.createElement("path",{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53c12.1-8.7 20-22.9 20-39 0-26.5-21.5-48-48-48s-48 21.5-48 48c0 16.1 7.9 30.3 20 39z"}))),Uc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}))),Zc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM506.3 399.3c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zM517.7 624.7c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"}))),Qc=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355c-3.2-4.1-9.4-4.1-12.6 0l-112 141.7c-4.1 5.2-0.4 12.9 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}))),Ra=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M508 512m-112 0a112 112 0 1 0 224 0 112 112 0 1 0-224 0Z"}),r.createElement("path",{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3-7.7 16.2-7.7 35.2 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}))),Jc="base-locale-selector",Kc=e=>{var t;const{className:n,style:o,defaultValue:i,value:a,onChange:s}=e,c=[{label:"English",key:"en-US"},{label:"中文",key:"zh-CN"}],d={items:c,selectedKeys:[i||a||((t=c[0])===null||t===void 0?void 0:t.key)],onClick:({key:l})=>{s==null||s(l)}};return I.useMemo(()=>r.createElement(eo,{menu:d,placement:"bottom"},r.createElement(Oe,{style:o,className:fe(H(Jc),n),size:"small",type:"text"},r.createElement(Rc,null))),[n,o,i,a,s,d])};function Pa(e){const{accept:t,success:n,error:o}=e;let i=document.createElement("input");i.type="file",t&&(i.accept=t),i.addEventListener("change",function(){var a;const s=(a=i.files)===null||a===void 0?void 0:a[0];n({file:s}),i=null}),i.addEventListener("error",function(a){typeof o=="function"&&o(a),i=null}),i.click()}function qc(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsDataURL(e)})}function e0(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsText(e)})}function t0(e){const t=new TextEncoder().encode(e),n=new Blob([t],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(n)}function n0(e,t){const{fileName:n}=t,o=t0(e);let i=document.createElement("a");i.href=o,i.download=n,i.click(),i=null}function Ai(e){return typeof e=="string"&&(/^\#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(e)||/^[a-z]{1,}$/i.test(e))}function o0(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="linear-gradient"){const n=[];typeof e.angle=="number"?n.push(`${e.angle}deg`):n.push("180deg"),Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(${n.join(", ")})`}else if((e==null?void 0:e.type)==="radial-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`radial-gradient(circle, ${n.join(", ")})`}return t}function Ti(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="radial-gradient"||(e==null?void 0:e.type)==="linear-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.length>0&&(e.stops.forEach((o,i)=>{n.push(`${o.color} ${o.offset*100}%`),i===e.stops.length-1&&o.offset<1&&n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(90deg, ${n.join(", ")})`)}return t}function is(e,t){if(t===1)return e;let n=1;const o=/^\#[0-9a-f]{6,6}$/i,i=/^\#[0-9a-f]{8,8}$/i;let a=e;if(o.test(e)?n=parseInt(e.substring(5,7).replace(/^\#/,"0x")):i.test(e)&&(n=parseInt(e.substring(7,9).replace(/^\#/,"0x")),a=e.substring(0,7)),n=n*t,o.test(a)&&n>0&&n<1){const s=Math.max(0,Math.min(255,Math.ceil(n*256)));a=`${a.toUpperCase()}${s.toString(16).toUpperCase()}`}return a}function Dt(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}function _t(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)*e.charCodeAt(n)*n*n;return t.toString(16).substring(0,4)}function qn(e){const t=e.length,n=Math.floor(t/2),o=e.substring(0,4).padEnd(4,"0"),i=e.substring(0,4).padEnd(4,"0"),a=_t(t.toString(16).padEnd(4,o)),s=_t(e.substring(n-4,n).padEnd(4,o)).padEnd(4,"f"),c=_t(e.substring(n-8,n-4).padEnd(4,o)).padEnd(4,"f"),d=_t(e.substring(n-12,n-8).padEnd(4,o)).padEnd(4,"f"),l=_t(e.substring(n-16,n-12).padEnd(4,i)).padEnd(4,"f"),h=_t(e.substring(n,n+4).padEnd(4,i)).padEnd(4,"f"),u=_t(e.substring(n+4,n+8).padEnd(4,i)).padEnd(4,"f"),f=_t(i.padEnd(4,o).padEnd(4,i));return`@assets/${a}${s}-${c}-${d}-${l}-${h}${u}${f}`}function mn(e){return/^@assets\/[0-9a-z]{8,8}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{12,12}$/.test(`${e}`)}function yt(e){function t(n){const o=i0(n);if(["Null","Number","String","Boolean","Undefined"].indexOf(o)>=0)return n;if(o==="Array"){const i=[];return n.forEach(a=>{i.push(t(a))}),i}else if(o==="Object"){const i={};return Object.keys(n).forEach(c=>{i[c]=t(n[c])}),Object.getOwnPropertySymbols(n).forEach(c=>{i[c]=t(n[c])}),i}}return t(e)}function xo(e){const t=yt(e),n=o=>{o.uuid=Dt(),o.type==="group"&&o.detail.children&&o.detail.children.forEach(i=>{n(i)})};return n(t),t}function i0(e){return Object.prototype.toString.call(e).replace(/[\]|\[]{1,1}/gi,"").split(" ")[1]}function a0(e,t){const n=e.assets||{},o=yt(e),i=(t==null?void 0:t.loadItemMap)||{},a=s=>{s.forEach(c=>{var d,l,h;if(c.type==="image"&&c.detail.src){const u=c.detail.src;if(mn(u)&&!n[u]&&i[u]&&typeof((d=i[u])===null||d===void 0?void 0:d.source)=="string")n[u]={type:"image",value:i[u].source};else if(!n[u]){const f=qn(u);n[f]||(n[f]={type:"image",value:u}),c.detail.src=f}}else if(c.type==="svg"){const u=c.detail.svg;if(mn(u)&&!n[u]&&i[u]&&typeof((l=i[u])===null||l===void 0?void 0:l.source)=="string")n[u]={type:"svg",value:i[u].source};else if(!n[u]){const f=qn(u);n[f]||(n[f]={type:"svg",value:u}),c.detail.svg=f}}else if(c.type==="html"){const u=c.detail.html;if(mn(u)&&!n[u]&&i[u]&&typeof((h=i[u])===null||h===void 0?void 0:h.source)=="string")n[u]={type:"html",value:i[u].source};else if(!n[u]){const f=qn(u);n[f]||(n[f]={type:"html",value:u}),c.detail.html=f}}else if(c.type==="group"&&Array.isArray(c.detail.children)){const u=c.detail.assets||{};Object.keys(u).forEach(f=>{n[f]||(n[f]=u[f])}),delete c.detail.assets,a(c.detail.children)}})};return a(o.elements),o.assets=n,o}function ut(e){return(Object.prototype.toString.call(e)||"").replace(/(\[object|\])/gi,"").trim()}const Ie={type(e,t){const n=ut(e);return t===!0?n.toLocaleLowerCase():n},array(e){return ut(e)==="Array"},json(e){return ut(e)==="Object"},function(e){return ut(e)==="Function"},asyncFunction(e){return ut(e)==="AsyncFunction"},boolean(e){return ut(e)==="Boolean"},string(e){return ut(e)==="String"},number(e){return ut(e)==="Number"},undefined(e){return ut(e)==="Undefined"},null(e){return ut(e)==="Null"},promise(e){return ut(e)==="Promise"}};function s0(e,t){const{width:n,height:o}=t;return new Promise((i,a)=>{const s=`
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      width="${n||""}" 
      height = "${o||""}">
      <foreignObject width="100%" height="100%">
        <div xmlns = "http://www.w3.org/1999/xhtml">
          ${e}
        </div>
      </foreignObject>
    </svg>
    `,c=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),d=new FileReader;d.readAsDataURL(c),d.onload=function(l){var h;const u=(h=l==null?void 0:l.target)===null||h===void 0?void 0:h.result;i(u)},d.onerror=function(l){a(l)}})}function r0(e){return new Promise((t,n)=>{const o=e,i=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=new FileReader;a.readAsDataURL(i),a.onload=function(s){var c;const d=(c=s==null?void 0:s.target)===null||c===void 0?void 0:c.result;t(d)},a.onerror=function(s){n(s)}})}var Ir=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{Image:l0}=window;function Fi(e){return new Promise((t,n)=>{const o=new l0;o.crossOrigin="anonymous",o.onload=function(){t(o)},o.onabort=n,o.onerror=n,o.src=e})}function c0(e){return Ir(this,void 0,void 0,function*(){const t=yield r0(e);return yield Fi(t)})}function d0(e){return e.replace(/\&/gi,"&amp;")}function u0(e,t){return Ir(this,void 0,void 0,function*(){e=d0(e);const n=yield s0(e,t);return yield Fi(n)})}function En(e){return typeof e=="number"&&(e>0||e<=0)}function h0(e){return En(e)}function f0(e){return En(e)}function Ar(e){return typeof e=="number"&&e>=0}function m0(e){return typeof e=="number"&&e>=0}function g0(e){return typeof e=="number"&&e>=-360&&e<=360}function v0(e){return Ar(e)}function p0(e){return En(e)&&e>=0}function y0(e){return Ai(e)}function Tr(e){return typeof e=="string"&&/^(http:\/\/|https:\/\/|\.\/|\/)/.test(`${e}`)}function Nr(e){return typeof e=="string"&&/^(data:image\/)/.test(`${e}`)}function w0(e){return Nr(e)||Tr(e)}function b0(e){return typeof e=="string"&&/^(<svg[\s]{1,}|<svg>)/i.test(`${e}`.trim())&&/<\/[\s]{0,}svg>$/i.test(`${e}`.trim())}function E0(e){let t=!1;if(typeof e=="string"){let n=document.createElement("div");n.innerHTML=e,n.children.length>0&&(t=!0),n=null}return t}function S0(e){return typeof e=="string"}function C0(e){return En(e)&&e>0}function x0(e){return En(e)&&e>0}function M0(e){return En(e)&&e>0}function z0(e){return["center","left","right"].includes(e)}function I0(e){return typeof e=="string"&&e.length>0}function A0(e){return["bold"].includes(e)}function T0(e){return/^(-?\d+(?:\.\d+)?)$/.test(`${e}`)}const ze={x:h0,y:f0,w:Ar,h:m0,angle:g0,number:En,numberStr:T0,borderWidth:v0,borderRadius:p0,color:y0,imageSrc:w0,imageURL:Tr,imageBase64:Nr,svg:b0,html:E0,text:S0,fontSize:C0,lineHeight:x0,textAlign:z0,fontFamily:I0,fontWeight:A0,strokeWidth:M0};var jo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},te=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ne,Et;const N0=12,L0="400",D0="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'";class Lr{constructor(t,n){ne.set(this,void 0),Et.set(this,void 0),jo(this,ne,t,"f"),jo(this,Et,Object.assign({devicePixelRatio:1,offscreenCanvas:null},n),"f"),this.$resetFont()}$undoPixelRatio(t){return t/te(this,Et,"f").devicePixelRatio}$doPixelRatio(t){return te(this,Et,"f").devicePixelRatio*t}$getContext(){return te(this,ne,"f")}$setContext(t){jo(this,ne,t,"f")}$setFont(t){const n=[];t.fontWeight&&n.push(`${t.fontWeight}`),n.push(`${this.$doPixelRatio(t.fontSize||12)}px`),n.push(`${t.fontFamily||"sans-serif"}`),te(this,ne,"f").font=`${n.join(" ")}`}$resetFont(){this.$setFont({fontSize:N0,fontFamily:D0,fontWeight:L0})}$getOffscreenCanvas(){return te(this,Et,"f").offscreenCanvas}$resize(t){const{width:n,height:o,devicePixelRatio:i,resetStyle:a}=t,{canvas:s}=te(this,ne,"f");s.width=n*i,s.height=o*i,jo(this,Et,Object.assign(Object.assign({},te(this,Et,"f")),{devicePixelRatio:i}),"f"),a===!0&&(s.style.width=`${n}px`,s.style.height=`${o}px`)}$getSize(){const{devicePixelRatio:t}=te(this,Et,"f"),{width:n,height:o}=te(this,ne,"f").canvas;return{width:n/t,height:o/t,devicePixelRatio:t}}get canvas(){return te(this,ne,"f").canvas}get fillStyle(){return te(this,ne,"f").fillStyle}set fillStyle(t){te(this,ne,"f").fillStyle=t}get strokeStyle(){return te(this,ne,"f").strokeStyle}set strokeStyle(t){te(this,ne,"f").strokeStyle=t}get lineWidth(){return this.$undoPixelRatio(te(this,ne,"f").lineWidth)}set lineWidth(t){te(this,ne,"f").lineWidth=this.$doPixelRatio(t)}get textAlign(){return te(this,ne,"f").textAlign}set textAlign(t){te(this,ne,"f").textAlign=t}get textBaseline(){return te(this,ne,"f").textBaseline}set textBaseline(t){te(this,ne,"f").textBaseline=t}get globalAlpha(){return te(this,ne,"f").globalAlpha}set globalAlpha(t){te(this,ne,"f").globalAlpha=t}get shadowColor(){return te(this,ne,"f").shadowColor}set shadowColor(t){te(this,ne,"f").shadowColor=t}get shadowOffsetX(){return this.$undoPixelRatio(te(this,ne,"f").shadowOffsetX)}set shadowOffsetX(t){te(this,ne,"f").shadowOffsetX=this.$doPixelRatio(t)}get shadowOffsetY(){return this.$undoPixelRatio(te(this,ne,"f").shadowOffsetY)}set shadowOffsetY(t){te(this,ne,"f").shadowOffsetY=this.$doPixelRatio(t)}get shadowBlur(){return this.$undoPixelRatio(te(this,ne,"f").shadowBlur)}set shadowBlur(t){te(this,ne,"f").shadowBlur=this.$doPixelRatio(t)}get lineCap(){return te(this,ne,"f").lineCap}set lineCap(t){te(this,ne,"f").lineCap=t}get globalCompositeOperation(){return te(this,ne,"f").globalCompositeOperation}set globalCompositeOperation(t){te(this,ne,"f").globalCompositeOperation=t}fill(...t){return te(this,ne,"f").fill(...t)}arc(t,n,o,i,a,s){return te(this,ne,"f").arc(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),i,a,s)}rect(t,n,o,i){return te(this,ne,"f").rect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}fillRect(t,n,o,i){return te(this,ne,"f").fillRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}clearRect(t,n,o,i){return te(this,ne,"f").clearRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}beginPath(){return te(this,ne,"f").beginPath()}closePath(){return te(this,ne,"f").closePath()}lineTo(t,n){return te(this,ne,"f").lineTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}moveTo(t,n){return te(this,ne,"f").moveTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}arcTo(t,n,o,i,a){return te(this,ne,"f").arcTo(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a))}getLineDash(){return te(this,ne,"f").getLineDash()}setLineDash(t){const n=t.map(o=>this.$doPixelRatio(o));return te(this,ne,"f").setLineDash(n)}stroke(t){return t?te(this,ne,"f").stroke(t):te(this,ne,"f").stroke()}translate(t,n){return te(this,ne,"f").translate(this.$doPixelRatio(t),this.$doPixelRatio(n))}rotate(t){return te(this,ne,"f").rotate(t)}drawImage(...t){const n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[t.length-4],d=t[t.length-3],l=t[t.length-2],h=t[t.length-1];return t.length===9?te(this,ne,"f").drawImage(n,this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s),this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h)):te(this,ne,"f").drawImage(n,this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h))}createPattern(t,n){return te(this,ne,"f").createPattern(t,n)}measureText(t){return te(this,ne,"f").measureText(t)}fillText(t,n,o,i){return i!==void 0?te(this,ne,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):te(this,ne,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}strokeText(t,n,o,i){return i!==void 0?te(this,ne,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):te(this,ne,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}save(){te(this,ne,"f").save()}restore(){te(this,ne,"f").restore()}scale(t,n){te(this,ne,"f").scale(t,n)}circle(t,n,o,i,a,s,c,d){te(this,ne,"f").ellipse(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),a,s,c,d)}isPointInPath(t,n){return te(this,ne,"f").isPointInPath(this.$doPixelRatio(t),this.$doPixelRatio(n))}clip(...t){return te(this,ne,"f").clip(...t)}setTransform(t,n,o,i,a,s){return te(this,ne,"f").setTransform(t,n,o,i,a,s)}getTransform(){return te(this,ne,"f").getTransform()}createLinearGradient(t,n,o,i){return te(this,ne,"f").createLinearGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}createRadialGradient(t,n,o,i,a,s){return te(this,ne,"f").createRadialGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s))}createConicGradient(t,n,o){return te(this,ne,"f").createConicGradient(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}}ne=new WeakMap,Et=new WeakMap;function zn(e){const{width:t,height:n,ctx:o,devicePixelRatio:i}=e;let a=o;if(!a){const c=document.createElement("canvas");c.width=t*i,c.height=n*i,a=c.getContext("2d")}return new Lr(a,e)}function Mo(e){const{width:t,height:n,devicePixelRatio:o}=e,i=new OffscreenCanvas(t*o,n*o),s=i.getContext("2d").canvas.getContext("2d");return new Lr(s,{devicePixelRatio:o,offscreenCanvas:i})}function R0(e,t){const{width:n,height:o,devicePixelRatio:i,offscreen:a,createCustomContext2D:s}=t,c={width:n,height:o,devicePixelRatio:i},d=e.getContext("2d");if(s){const l=s(c),h=s(c),u=s(c),f=zn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:f,drawView:()=>{const{width:g,height:p}=l.$getSize();f.clearRect(0,0,g,p),f.drawImage(u.canvas,0,0,g,p),f.drawImage(l.canvas,0,0,g,p),f.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}if(a===!0){const l=Mo(c),h=Mo(c),u=Mo(c),f=zn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:f,drawView:()=>{const{width:g,height:p}=l.$getSize();f.clearRect(0,0,g,p),f.drawImage(u.canvas,0,0,g,p),f.drawImage(l.canvas,0,0,g,p),f.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}else{const l=zn(c),h=zn(c),u=zn(c),f=zn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:f,drawView:()=>{f.clearRect(0,0,n,o),f.drawImage(u.canvas,0,0,n,o),f.drawImage(l.canvas,0,0,n,o),f.drawImage(h.canvas,0,0,n,o),u.clearRect(0,0,n,o),l.clearRect(0,0,n,o),h.clearRect(0,0,n,o)}}}}var P0=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ht=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ke;let gn=class{constructor(){Ke.set(this,void 0),P0(this,Ke,new Map,"f")}on(t,n){if(ht(this,Ke,"f").has(t)){const o=ht(this,Ke,"f").get(t)||[];o==null||o.push(n),ht(this,Ke,"f").set(t,o)}else ht(this,Ke,"f").set(t,[n])}off(t,n){if(ht(this,Ke,"f").has(t)){const o=ht(this,Ke,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}ht(this,Ke,"f").set(t,o||[])}}trigger(t,n){const o=ht(this,Ke,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(ht(this,Ke,"f").has(t)){const n=ht(this,Ke,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){ht(this,Ke,"f").clear()}};Ke=new WeakMap;function O0(e,t){const n=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);return n===0?n:Math.sqrt(n)}function ot(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var In=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},St=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ri,Ct,Ni,Bn,pa;class vn{constructor(t){ri.add(this),Ct.set(this,void 0),Ni.set(this,void 0),Bn.set(this,void 0),In(this,Ni,yt(t.defaultStorage),"f"),In(this,Ct,St(this,ri,"m",pa).call(this),"f"),In(this,Bn,t.defaultStatic||{},"f")}set(t,n){St(this,Ct,"f")[t]=n}get(t){return St(this,Ct,"f")[t]}setStatic(t,n){St(this,Bn,"f")[t]=n}getStatic(t){return St(this,Bn,"f")[t]}getSnapshot(t){return(t==null?void 0:t.deepClone)===!0?yt(St(this,Ct,"f")):Object.assign({},St(this,Ct,"f"))}clear(){In(this,Ct,St(this,ri,"m",pa).call(this),"f")}destroy(){In(this,Ct,null,"f"),In(this,Bn,null,"f")}}Ct=new WeakMap,Ni=new WeakMap,Bn=new WeakMap,ri=new WeakSet,pa=function(){return yt(St(this,Ni,"f"))};function Do(e){const{activeStore:t}=e;return{scale:t==null?void 0:t.scale,offsetTop:t==null?void 0:t.offsetTop,offsetBottom:t==null?void 0:t.offsetBottom,offsetLeft:t==null?void 0:t.offsetLeft,offsetRight:t==null?void 0:t.offsetRight}}function Wi(e){const{activeStore:t}=e;return{devicePixelRatio:t.devicePixelRatio,width:t==null?void 0:t.width,height:t==null?void 0:t.height,contextWidth:t==null?void 0:t.contextWidth,contextHeight:t==null?void 0:t.contextHeight}}function k0(e){return e/Math.PI*180}function Rt(e){return e/180*Math.PI}function Ro(e,t,n,o){const i=Rt(t||0);n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(i),e.translate(-n.x,-n.y)),o(e),n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(-i),e.translate(-n.x,-n.y))}function bt(e,t,n){const o=dt(t);Ro(e,t.angle||0,o,()=>{n(e)})}function dt(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function Dr(e){const t=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),n=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),o=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),i=Math.max(e[0].y,e[1].y,e[2].y,e[3].y),a={x:t,y:n,w:o-t,h:i-n};return dt(a)}function _0(e,t,n){const o=ya(e,t),i=ya(e,n);return i!==null&&o!==null?i-o:0}function ya(e,t){const n=t.x-e.x,o=t.y-e.y;if(n===0){if(o<0)return 0;if(o>0)return Math.PI}else if(o===0){if(n<0)return Math.PI*3/2;if(n>0)return Math.PI/2}return n>0&&o<0?Math.atan(Math.abs(n)/Math.abs(o)):n>0&&o>0?Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o>0?Math.PI+Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o<0?2*Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):0}function Ne(e,t,n){let a=ya(e,t)+n;a>Math.PI*2?a=a-Math.PI*2:a<0-Math.PI*2&&(a=a+Math.PI*2),a<0&&(a=a+Math.PI*2);const s=O0(e,t);let c=0,d=0;return a===0?(c=0,d=0-s):a>0&&a<Math.PI/2?(c=Math.sin(a)*s,d=0-Math.cos(a)*s):a===Math.PI/2?(c=s,d=0):a>Math.PI/2&&a<Math.PI?(c=Math.sin(Math.PI-a)*s,d=Math.cos(Math.PI-a)*s):a===Math.PI?(c=0,d=s):a>Math.PI&&a<3/2*Math.PI?(c=0-Math.sin(a-Math.PI)*s,d=Math.cos(a-Math.PI)*s):a===3/2*Math.PI?(c=0-s,d=0):a>3/2*Math.PI&&a<2*Math.PI?(c=0-Math.sin(2*Math.PI-a)*s,d=0-Math.cos(2*Math.PI-a)*s):a===2*Math.PI&&(c=0,d=0-s),c+=e.x,d+=e.y,{x:c,y:d}}function Li(e,t){if((t==null?void 0:t.length)>0){let n=e.x,o=e.y;return t.forEach(i=>{const{x:a,y:s,w:c,h:d,angle:l=0}=i,h=dt({x:a,y:s,w:c,h:d,angle:l}),u=Ne(h,{x:n,y:o},Rt(l));n=u.x,o=u.y}),{x:n,y:o}}return e}function Rr(e,t,n){const{x:o,y:i,w:a,h:s}=e;let c={x:o,y:i},d={x:o+a,y:i},l={x:o+a,y:i+s},h={x:o,y:i+s};if(n&&(n>0||n<0)){const u=Rt(ct(n));c=Ne(t,c,u),d=Ne(t,d,u),l=Ne(t,l,u),h=Ne(t,h,u)}return[c,d,l,h]}function to(e){const{angle:t=0}=e,n=dt(e);return Rr(e,n,t)}function as(e,t,n){return[Ne(e,{x:t[0].x,y:t[0].y},n),Ne(e,{x:t[1].x,y:t[1].y},n),Ne(e,{x:t[2].x,y:t[2].y},n),Ne(e,{x:t[3].x,y:t[3].y},n)]}function ct(e){if(!(e>0||e<0)||e===0||e===360)return 0;let t=e%360;return t<0?t+=360:e===360&&(t=0),t}function Pr(e){let t=!0;if(Array.isArray(e)){const n=[];e.forEach(o=>{var i;typeof o.uuid=="string"&&o.uuid?n.includes(o.uuid)?(t=!1,console.warn(`Duplicate uuids: ${o.uuid}`)):n.push(o.uuid):(t=!1,console.warn("Element missing uuid",o)),o.type==="group"&&(t=Pr((i=o==null?void 0:o.detail)===null||i===void 0?void 0:i.children))})}return t}function Oa(e){var t;const n={x:0,y:0,w:0,h:0};let o=null;for(let a=0;a<e.length;a++){const s=e[a];if(!((t=s==null?void 0:s.operations)===null||t===void 0)&&t.invisible)continue;const c={x:s.x,y:s.y,w:s.w,h:s.h,angle:s.angle||0};if(c.angle&&(c.angle>0||c.angle<0)){const d=to(c);if(d.length===4){const l=[d[0].x,d[1].x,d[2].x,d[3].x],h=[d[0].y,d[1].y,d[2].y,d[3].y];c.x=Math.min(...l),c.y=Math.min(...h),c.w=Math.abs(Math.max(...l)-Math.min(...l)),c.h=Math.abs(Math.max(...h)-Math.min(...h))}}if(o){const d=Math.min(c.x,n.x),l=Math.min(c.y,n.y),h=Math.max(c.x+c.w,n.x+n.w),u=Math.max(c.y+c.h,n.y+n.h);n.x=d,n.y=l,n.w=Math.abs(h-d),n.h=Math.abs(u-l)}else n.x=c.x,n.y=c.y,n.w=c.w,n.h=c.h;o=c}return{x:Math.floor(n.x),y:Math.floor(n.y),w:Math.ceil(n.w),h:Math.ceil(n.h)}}function Or(e,t){const n={x:0,y:0,w:0,h:0};e.forEach(i=>{const a={x:i.x,y:i.y,w:i.w,h:i.h,angle:i.angle};if(a.angle&&(a.angle>0||a.angle<0)){const h=to(a);if(h.length===4){const u=[h[0].x,h[1].x,h[2].x,h[3].x],f=[h[0].y,h[1].y,h[2].y,h[3].y];a.x=Math.min(...u),a.y=Math.min(...f),a.w=Math.abs(Math.max(...u)-Math.min(...u)),a.h=Math.abs(Math.max(...f)-Math.min(...f))}}const s=Math.min(a.x,n.x),c=Math.min(a.y,n.y),d=Math.max(a.x+a.w,n.x+n.w),l=Math.max(a.y+a.h,n.y+n.h);n.x=s,n.y=c,n.w=Math.abs(d-s),n.h=Math.abs(l-c)}),t!=null&&t.extend&&(n.x=Math.min(n.x,0),n.y=Math.min(n.y,0));const o={contextWidth:n.w,contextHeight:n.h};return t!=null&&t.viewWidth&&(t!=null&&t.viewHeight)&&(t==null?void 0:t.viewWidth)>0&&(t==null?void 0:t.viewHeight)>0&&(t.viewWidth>n.x+n.w&&(o.contextWidth=t.viewWidth-n.x),t.viewHeight>n.y+n.h&&(o.contextHeight=t.viewHeight-n.y)),o}function j0(e,t,n){const o=Or(e,{viewWidth:t.width,viewHeight:t.height,extend:n==null?void 0:n.extend});return(n==null?void 0:n.extend)===!0&&(o.contextWidth=Math.max(o.contextWidth,t.contextWidth),o.contextHeight=Math.max(o.contextHeight,t.contextHeight)),{contextSize:o}}function kr(e,t){var n;let o=null;for(let i=0;i<t.length;i++){const a=t[i];if(a.uuid===e){o=a;break}else if(!o&&a.type==="group"){const s=kr(e,((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.children)||[]);if((s==null?void 0:s.uuid)===e){o=s;break}}}return o}function li(e,t){const n=[];function o(i){var a;for(let s=0;s<i.length;s++){const c=i[s];e.includes(c.uuid)?n.push(c):c.type==="group"&&o(((a=c==null?void 0:c.detail)===null||a===void 0?void 0:a.children)||[])}}return o(t),n}function ka(e,t){const n=[];function o(i,a){var s;let c=null;for(let d=0;d<a.length;d++){const l=a[d];if(l.uuid===i){c=l;break}else if(!c&&l.type==="group"){n.push(l);const h=o(i,((s=l==null?void 0:l.detail)===null||s===void 0?void 0:s.children)||[]);if((h==null?void 0:h.uuid)===i){c=h;break}n.pop()}}return c}return o(e,t),n}function _r(e,t){var n;const o=[];let i=e;if(t.length>1)for(let a=0;a<t.length-1;a++){const s=t[a],c=i[s];if((c==null?void 0:c.type)==="group"&&Array.isArray((n=c==null?void 0:c.detail)===null||n===void 0?void 0:n.children))o.push(c),i=c.detail.children;else return null}return o}function pn(e){const{x:t,y:n,w:o,h:i,angle:a}=e;return{x:t,y:n,w:o,h:i,angle:a}}function jr(e,t){const n=[];return e.forEach(o=>{const i=Be(o,t);i&&n.push(i)}),n}function Be(e,t){let n=null,o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i<e.length-1&&s.type==="group")o=s.detail.children;else if(i===e.length-1)n=s;else break}return n}function wt(e,t){const n=[];let o=!1;const i=a=>{var s;for(let c=0;c<a.length&&o!==!0;c++){n.push(c);const d=a[c];if(d.uuid===e){o=!0;break}else d.type==="group"&&i(((s=d==null?void 0:d.detail)===null||s===void 0?void 0:s.children)||[]);if(o)break;n.pop()}};return i(t),n}function V0(e,t){const n=[],o={};let i=!1;const a=s=>{var c;for(let d=0;d<s.length&&i!==!0;d++){n.push(d);const l=s[d];if(e.includes(l.uuid)){if(o[l.uuid]=[...n],Object.keys(o).length===e.length){i=!0;break}}else l.type==="group"&&a(((c=l==null?void 0:l.detail)===null||c===void 0?void 0:c.children)||[]);if(i)break;n.pop()}};return a(t),o}function Vr(e){const{x:t,y:n,h:o,w:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]}function _e(e){const{x:t,y:n,w:o,h:i,angle:a=0}=e;return a===0?Vr(e):Rr(e,dt({x:t,y:n,w:o,h:i,angle:a}),a)}function _a(e){const t=[];let n=0,o=0;const i=[],a=[...e];for(let s=0;s<a.length;s++){const{x:c,y:d,w:l,h,angle:u=0}=a[s];n+=c,o+=d;let f;if(s===0){const m={x:n,y:o,w:l,h,angle:u};f=_e({x:c,y:d,w:l,h,angle:u}),i.push({center:dt(m),angle:u,radian:Rt(u)})}else{f=Vr({x:n,y:o,w:l,h,angle:u});for(let g=0;g<i.length;g++){const{center:p,radian:w}=i[g];f=as(p,f,w)}const v=Dr(f);if(u>0||u<0){const g=Rt(u);f=as(v,f,g)}i.push({center:v,angle:u,radian:Rt(u)})}t.push(f)}return t}function B0(e,t){const{groupQueue:n}=t;if(!(n.length>0))return[_e(e)];const o=[...n,e];return _a(o)}function No(e,t){return B0(e,t).pop()||null}function F0(e,t){const{scale:n,offsetX:o,offsetY:i}=e,{viewSizeInfo:a}=t,{width:s,height:c,contextWidth:d,contextHeight:l}=a,h=d*n,u=l*n,f=0-o*n,m=0-i*n,v=s-(h+f/n),g=c-(u+m/n);return{scale:n,offsetLeft:f,offsetTop:m,offsetRight:v,offsetBottom:g}}function W0(e){const{scale:t,point:n,viewScaleInfo:o}=e,{offsetLeft:i,offsetTop:a}=o,s=t/o.scale,c=n.x,d=n.y,l=c-c*s+(i*s-i),h=d-d*s+(a*s-a);return{moveX:l,moveY:h}}function H0(e){const{moveX:t=0,moveY:n=0,viewScaleInfo:o,viewSizeInfo:i}=e,{scale:a}=o,{width:s,height:c,contextWidth:d,contextHeight:l}=i;let h=o.offsetLeft,u=o.offsetRight,f=o.offsetTop,m=o.offsetBottom;h+=t,f+=n;const v=d*a,g=l*a;return u=s-(v+h),m=c-(g+f),{scale:a,offsetTop:f,offsetLeft:h,offsetRight:u,offsetBottom:m}}function Xe(e,t){const{viewScaleInfo:n}=t,{x:o,y:i,w:a,h:s,angle:c}=e,{scale:d,offsetTop:l,offsetLeft:h}=n;return{x:o*d+h,y:i*d+l,w:a*d,h:s*d,angle:c}}function Ee(e,t){const{viewScaleInfo:n}=t,{x:o,y:i}=e,{scale:a,offsetTop:s,offsetLeft:c}=n;return{x:o*a+c,y:i*a+s}}function Ye(e,t){return[Ee(e[0],t),Ee(e[1],t),Ee(e[2],t),Ee(e[3],t)]}function wa(e,t){const{context2d:n,element:o,viewScaleInfo:i}=t,{angle:a=0}=o,{x:s,y:c,w:d,h:l}=Xe(o,{viewScaleInfo:i}),h=to({x:s,y:c,w:d,h:l,angle:a});if(h.length>=2){n.beginPath(),n.moveTo(h[0].x,h[0].y);for(let u=1;u<h.length;u++)n.lineTo(h[u].x,h[u].y);n.closePath()}return!!n.isPointInPath(e.x,e.y)}function G0(e,t,n){const o=_e(t);return Br(e,o)}function Br(e,t,n){const o=[t[0].x,t[1].x,t[2].x,t[3].x],i=[t[0].y,t[1].y,t[2].y,t[3].y],a=Math.min(...o),s=Math.max(...o),c=Math.min(...i),d=Math.max(...i);return e.x>a&&e.x<s&&e.y>c&&e.y<d}function Y0(e,t){var n,o,i;const{context2d:a,data:s,viewScaleInfo:c,viewSizeInfo:d,groupQueue:l}=t,h={index:-1,element:null,groupQueueIndex:-1};if(l&&Array.isArray(l)&&(l==null?void 0:l.length)>0)for(let u=l.length-1;u>=0;u--){let f=0,m=0,v=0;for(let p=0;p<=u;p++)f+=l[p].x,m+=l[p].y,v+=l[p].angle||0;const g=l[u];if(g&&g.type==="group"&&Array.isArray((n=g.detail)===null||n===void 0?void 0:n.children))for(let p=0;p<g.detail.children.length;p++){const w=g.detail.children[p];if(((o=w==null?void 0:w.operations)===null||o===void 0?void 0:o.invisible)!==!0)if(w){const C={x:f+w.x,y:m+w.y,w:w.w,h:w.h,angle:v+(w.angle||0)};if(wa(e,{context2d:a,element:C,viewScaleInfo:c,viewSizeInfo:d})){h.element=w,(u<l.length-1||w.type!=="group")&&(h.groupQueueIndex=u);break}}else break}if(h.element)break}if(h.element)return h;for(let u=s.elements.length-1;u>=0;u--){const f=s.elements[u];if(((i=f==null?void 0:f.operations)===null||i===void 0?void 0:i.invisible)!==!0&&wa(e,{context2d:a,element:f,viewScaleInfo:c,viewSizeInfo:d})){h.index=u,h.element=f;break}}return h}function Fr(e,t){const{groupQueue:n}=t,o=No(e,{groupQueue:n}),i=ot(o[0],o[1]),a=ot(o[1],o[2]),s=ot(o[2],o[3]),c=ot(o[3],o[0]),d=o[0],l=o[1],h=o[2],u=o[3],f=Math.max(d.x,l.x,h.x,u.x),m=Math.max(d.y,l.y,h.y,u.y),v=Math.min(d.x,l.x,h.x,u.x),g=Math.min(d.y,l.y,h.y,u.y);return{center:{x:(f+v)/2,y:(m+g)/2},topLeft:d,topRight:l,bottomLeft:u,bottomRight:h,top:i,right:a,left:c,bottom:s}}function Wr(e){const t=Math.max(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),n=Math.max(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),o=Math.min(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),a={x:e.center.x,y:e.center.y},s={x:o,y:i},c={x:t,y:i},d={x:t,y:n},l={x:o,y:n},h=ot(s,c),u=ot(l,d),f=ot(s,l),m=ot(c,d);return{center:a,topLeft:s,topRight:c,bottomLeft:l,bottomRight:d,top:h,right:m,left:f,bottom:u}}function $0(e,t){const n={},o=[],i=a=>{const s={isVisibleInView:!0,isGroup:a.type==="group",position:[...o]};let c=null;const d=_r(e,o);c=Fr(a,{groupQueue:d||[]}),n[a.uuid]=Object.assign(Object.assign({},s),{originRectInfo:c,rangeRectInfo:ze.angle(a.angle)?Wr(c):c}),a.type==="group"&&a.detail.children.forEach((l,h)=>{o.push(h),i(l),o.pop()})};return e.forEach((a,s)=>{o.push(s),i(a),o.pop()}),Hr(n,t)}function X0(e,t){const n=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),o=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),a=Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),s=Math.min(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),c=Math.max(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),d=Math.min(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y),l=Math.max(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y);return n<=c&&o>=s&&i<=l&&a>=d||c<=a&&c>=a&&c<=a&&c>=a}function Hr(e,t){const n=U0(t);let o=0,i=0;return Object.keys(e).forEach(a=>{const s=e[a];s.isVisibleInView=X0(s.rangeRectInfo,n),s.isVisibleInView?o++:i++}),{viewVisibleInfoMap:e,visibleCount:o,invisibleCount:i}}function U0(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i,offsetLeft:a}=t,{width:s,height:c}=n,d=0-a/o,l=0-i/o,h=s/o,u=c/o,f=dt({x:d,y:l,w:h,h:u}),m={x:d,y:l},v={x:d+h,y:l},g={x:d,y:l+u},p={x:d+h,y:l+u},w={x:d,y:f.y},C={x:f.x,y:l},M={x:d+h,y:f.y},y={x:f.x,y:l+u};return{center:f,topLeft:m,topRight:v,bottomLeft:g,bottomRight:p,left:w,top:C,right:M,bottom:y}}function Fe(e,t){const{x:n,y:o}=e,{size:i,angle:a}=t;return{x:n-i/2,y:o-i/2,w:i,h:i,angle:a}}function Z0(e,t){const{groupQueue:n,controllerSize:o,viewScaleInfo:i,rotateControllerSize:a,rotateControllerPosition:s}=t,c=(o&&o>0?o:8)/i.scale,{x:d,y:l,w:h,h:u,angle:f=0}=e,m=a,v=s,g=[{uuid:Dt(),x:d,y:l,w:h,h:u,angle:f,type:"group",detail:{children:[]}},...n];let p=0;g.forEach(({angle:re=0})=>{p+=re});const w=No(e,{groupQueue:n}),C=No({x:d,y:l-(v+m/2)/i.scale,h:u+(v*2+m)/i.scale,w:h,angle:f},{groupQueue:[...n]}),M=ot(w[0],w[1]),y=ot(w[1],w[2]),k=ot(w[2],w[3]),S=ot(w[3],w[0]),E=w[0],L=w[1],N=w[2],b=w[3],j=Fe(M,{size:c,angle:p}),_=Fe(y,{size:c,angle:p}),V=Fe(k,{size:c,angle:p}),X=Fe(S,{size:c,angle:p}),B=Fe(E,{size:c,angle:p}),R=Fe(L,{size:c,angle:p}),O=Fe(b,{size:c,angle:p}),P=Fe(N,{size:c,angle:p}),z=_e(B),G=_e(R),F=_e(O),A=_e(P),Z=[z[1],G[0],G[3],z[2]],Y=[G[3],G[2],A[1],A[0]],x=[F[1],A[0],A[3],F[2]],T=[z[3],z[2],F[1],F[0]],D=_e(j),W=_e(_),U=_e(V),se=_e(X),ee=ot(C[0],C[1]),$=Fe(ee,{size:a*1.1/i.scale,angle:p}),J=_e($);return{elementWrapper:w,left:{type:"left",vertexes:T,center:S,size:c},right:{type:"right",vertexes:Y,center:y,size:c},top:{type:"top",vertexes:Z,center:M,size:c},bottom:{type:"bottom",vertexes:x,center:k,size:c},topLeft:{type:"top-left",vertexes:z,center:E,size:c},topRight:{type:"top-right",vertexes:G,center:L,size:c},bottomLeft:{type:"bottom-left",vertexes:F,center:b,size:c},bottomRight:{type:"bottom-right",vertexes:A,center:N,size:c},leftMiddle:{type:"left-middle",vertexes:se,center:S,size:c},rightMiddle:{type:"right-middle",vertexes:W,center:y,size:c},topMiddle:{type:"top-middle",vertexes:D,center:M,size:c},bottomMiddle:{type:"bottom-middle",vertexes:U,center:k,size:c},rotate:{type:"rotate",vertexes:J,center:ee,size:a}}}function ss(e,t){const{controllerSize:n,viewScaleInfo:o}=t,i=n&&n>0?n:8,{x:a,y:s,w:c,h:d}=Xe(e,{viewScaleInfo:o}),l=dt({x:a,y:s,w:c,h:d}),h={x:l.x,y:s},u={x:a+c,y:l.y},f={x:l.x,y:s+d},m={x:a,y:l.y},v={x:a,y:s},g={x:a+c,y:s},p={x:a+c,y:s+d},w={x:a,y:s+d},C=Fe(h,{size:i,angle:0}),M=Fe(u,{size:i,angle:0}),y=Fe(f,{size:i,angle:0}),k=Fe(m,{size:i,angle:0}),S=Fe(v,{size:i,angle:0}),E=Fe(g,{size:i,angle:0}),L=Fe(w,{size:i,angle:0}),N=Fe(p,{size:i,angle:0}),b=_e(S),j=_e(E),_=_e(L),V=_e(N),X=[b[1],j[0],j[3],b[2]],B=[j[3],j[2],V[1],V[0]],R=[_[1],V[0],V[3],_[2]],O=[b[3],b[2],_[1],_[0]],P=_e(C),z=_e(M),G=_e(y),F=_e(k);return{left:{type:"left",vertexes:O,center:m,size:i},right:{type:"right",vertexes:B,center:u,size:i},top:{type:"top",vertexes:X,center:h,size:i},bottom:{type:"bottom",vertexes:R,center:f,size:i},topLeft:{type:"top-left",vertexes:b,center:v,size:i},topRight:{type:"top-right",vertexes:j,center:g,size:i},bottomLeft:{type:"bottom-left",vertexes:_,center:w,size:i},bottomRight:{type:"bottom-right",vertexes:V,center:p,size:i},leftMiddle:{type:"left-middle",vertexes:F,center:m,size:i},rightMiddle:{type:"right-middle",vertexes:z,center:u,size:i},topMiddle:{type:"top-middle",vertexes:P,center:h,size:i},bottomMiddle:{type:"bottom-middle",vertexes:G,center:f,size:i}}}function ja(e){let t="";return e.forEach(n=>{t+=n.type+n.params.join(" ")}),t}function we(e,t){let n=2;return typeof(t==null?void 0:t.decimalPlaces)<"u"&&(t==null?void 0:t.decimalPlaces)>=0&&(n=t.decimalPlaces),parseFloat(e.toFixed(n))}const ci="Text Element";function Sn(){return{boxSizing:"border-box",borderWidth:0,borderColor:"#000000",shadowColor:"#000000",borderRadius:0,borderDash:[],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,opacity:1,color:"#000000",textAlign:"left",verticalAlign:"top",fontSize:16,fontFamily:"sans-serif",fontWeight:400,minInlineSize:"auto",wordBreak:"break-all",overflow:"hidden"}}function Q0(){return{background:"#D9D9D9"}}function J0(){return{background:"#D9D9D9",radius:0}}function K0(e){const t=Sn();return{text:ci,color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,lineHeight:e.w/ci.length,fontSize:e.w/ci.length,textAlign:"center",verticalAlign:"middle"}}function q0(){return{svg:'<svg t="1701004189871" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"   width="200" height="200"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"   fill="#2c2c2c"></path></svg>'}}function ed(){return{src:"data:image/svg+xml;base64,PHN2ZyAgIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxwYXRoIGQ9Ik05MjggMTYwSDk2Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY2NDBjMCAxNy43IDE0LjMgMzIgMzIgMzJoODMyYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE5MmMwLTE3LjctMTQuMy0zMi0zMi0zMnogbS00MCA2MzJIMTM2di0zOS45bDEzOC41LTE2NC4zIDE1MC4xIDE3OEw2NTguMSA0ODkgODg4IDc2MS42Vjc5MnogbTAtMTI5LjhMNjY0LjIgMzk2LjhjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDQyNC42IDY2Ni40bC0xNDQtMTcwLjdjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDEzNiA2NTIuN1YyMzJoNzUydjQzMC4yeiIgIGZpbGw9IiM1MTUxNTEiPjwvcGF0aD48cGF0aCBkPSJNMzA0IDQ1NmM0OC42IDAgODgtMzkuNCA4OC04OHMtMzkuNC04OC04OC04OC04OCAzOS40LTg4IDg4IDM5LjQgODggODggODh6IG0wLTExNmMxNS41IDAgMjggMTIuNSAyOCAyOHMtMTIuNSAyOC0yOCAyOC0yOC0xMi41LTI4LTI4IDEyLjUtMjggMjgtMjh6IiAgZmlsbD0iIzUxNTE1MSI+PC9wYXRoPjwvc3ZnPg=="}}function td(){return{children:[],background:"#D9D9D9",overflow:"hidden"}}const nd=Sn();function Hi(e,t){const{viewScaleInfo:n}=t,{scale:o}=n;let{borderRadius:i,borderDash:a}=e.detail;const s=Array.isArray(a)&&a.length>0,{boxSizing:c=nd.boxSizing,borderWidth:d}=e.detail;Array.isArray(d)&&(i=0);let{x:l,y:h,w:u,h:f}=e,m=[0,0,0,0];if(typeof i=="number"){const g=i*o;m=[g,g,g,g]}else Array.isArray(i)&&(i==null?void 0:i.length)===4&&(m=[i[0]*o,i[1]*o,i[2]*o,i[3]*o]);let v=0;return typeof d=="number"&&(v=(d||0)*o),c==="border-box"&&!s?(l=e.x+v/2,h=e.y+v/2,u=e.w-v,f=e.h-v):c==="content-box"?(l=e.x-v/2,h=e.y-v/2,u=e.w+v,f=e.h+v):(l=e.x,h=e.y,u=e.w,f=e.h),u=Math.max(u,1),f=Math.max(f,1),m=m.map(g=>Math.min(g,u/2,f/2)),{x:l,y:h,w:u,h:f,radiusList:m}}const Ge=e=>we(e,{decimalPlaces:4});function Gr(e,t){const{detail:n}=e,{xRatio:o,yRatio:i,maxRatio:a}=t,s=(o+i)/2,{borderWidth:c,borderRadius:d,borderDash:l,shadowOffsetX:h,shadowOffsetY:u,shadowBlur:f}=n;if(typeof c=="number")n.borderWidth=Ge(c*s);else if(Array.isArray(n.borderWidth)){const m=c;n.borderWidth=[Ge(m[0]*i),Ge(m[1]*o),Ge(m[2]*i),Ge(m[3]*o)]}if(typeof d=="number")n.borderRadius=Ge(d*s);else if(Array.isArray(n.borderRadius)){const m=d;n.borderRadius=[m[0]*o,m[1]*o,m[2]*i,m[3]*i]}Array.isArray(l)&&l.forEach((m,v)=>{n.borderDash[v]=Ge(m*a)}),typeof h=="number"&&(n.shadowOffsetX=Ge(h*a)),typeof u=="number"&&(n.shadowOffsetX=Ge(u*a)),typeof f=="number"&&(n.shadowOffsetX=Ge(f*a))}function od(e,t){const{xRatio:n,yRatio:o}=t,{x:i,y:a,w:s,h:c}=e;e.x=Ge(i*n),e.y=Ge(a*o),e.w=Ge(s*n),e.h=Ge(c*o),Gr(e,t)}function id(e,t){const{minRatio:n,maxRatio:o}=t,{fontSize:i,lineHeight:a}=e.detail,s=(n+o)/2;i&&i>0&&(e.detail.fontSize=Ge(i*s)),a&&a>0&&(e.detail.lineHeight=Ge(a*s))}function Yr(e,t){const{type:n}=e;od(e,t),n==="circle"||(n==="text"?id(e,t):n==="image"||n==="svg"||n==="html"||n==="path"||n==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(o=>{Yr(o,t)}))}function $r(e,t){const n=t.w&&t.w>0?t.w:e.w,o=t.h&&t.h>0?t.h:e.h,i=n/e.w,a=o/e.h;if(i===a&&i===1)return e;const s=Math.min(i,a),c=Math.max(i,a);e.w=n,e.h=o;const d={xRatio:i,yRatio:a,minRatio:s,maxRatio:c};return e.type==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(l=>{Yr(l,d)}),Gr(e,d),e}const Qi=200,Ji=200;function ad(e,t){let n=0,o=0,i=Qi,a=Ji;if(t){const{viewScaleInfo:c,viewSizeInfo:d}=t,{scale:l,offsetLeft:h,offsetTop:u}=c,{width:f,height:m}=d,v=f/4,g=m/4;Qi>=v?i=v/l:i=Qi/l,Ji>=g?a=g/l:a=Ji/l,["circle","svg","image"].includes(e)?i=a=Math.max(i,a):e==="text"&&(a=i/ci.length*2),n=(0-h+f/2-i*l/2)/l,o=(0-u+m/2-a*l/2)/l}return{x:n,y:o,w:i,h:a}}function sd(e,t,n){const o=ad(e,n);let i={};return e==="rect"?i=Q0():e==="circle"?i=J0():e==="text"?i=K0(o):e==="svg"?i=q0():e==="image"?i=ed():e==="group"&&(i=td()),Object.assign(Object.assign(Object.assign({},o),t),{uuid:Dt(),type:e,detail:Object.assign(Object.assign({},i),t.detail||{})})}function Xr(e,t,n){let o=!1;if(t.length===1){const i=t[0];n.splice(i,0,e),o=!0}else if(t.length>1){let i=n;for(let a=0;a<t.length;a++){const s=t[a],c=i[s];if(a===t.length-1){const d=t[a];i.splice(d,0,e),o=!0}else if(a<t.length-1&&c.type==="group")i=c.detail.children;else break}}return o}function Ur(e,t){let n=!1;if(e.length===1){const o=e[0];t.splice(o,1),n=!0}else if(e.length>1){let o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i===e.length-1){const c=e[i];o.splice(c,1),n=!0}else if(i<e.length-1&&s.type==="group")o=s.detail.children;else break}}return n}function rd(e,t){const n=wt(e,t);return Ur(n,t)}function Di(e,t){const n=[...t.from],o=[...t.to];if(n.length===0||o.length===0)return{elements:e,from:n,to:o};if(n.length<=o.length){for(let a=0;a<n.length;a++)if(o[a]===n[a]){if(a===n.length-1)return{elements:e,from:n,to:o};continue}}const i=Be(n,e);if(i){if(!Xr(i,o,e))return{elements:e,from:n,to:o};let s=-1,c=!1;if(n.length>=1&&o.length>=1){if(n.length<=o.length){if(n.length===1)n[0]<o[0]&&(c=!0);else for(let d=0;d<n.length&&n[d]===o[d];d++)if(n.length===n.length-1){c=!0;break}}if(n.length>=o.length)if(o.length===1)o[0]<n[0]&&(c=!0);else for(let d=0;d<o.length&&(d===o.length-1&&o[d]<n[d]&&(c=!0),n[d]===o[d]);d++);}if(c===!0)for(let d=0;d<n.length&&o[d]>=0;d++)o[d]!==n[d]&&o[d]<n[d]&&d==o.length-1&&(s=d);s>=0&&(n[s]=n[s]+1),Ur(n,e)}return{elements:e,from:n,to:o}}function ld(e,t){var n;const o=Object.keys(t);for(let i=0;i<o.length;i++){const a=o[i];["x","y","w","h","angle","name"].includes(a)?e[a]=t[a]:["detail","operations"].includes(a)&&(Ie.json(t[a])?(e!=null&&e.hasOwnProperty(a)||(e[a]={}),Ie.json(e[a])&&(e[a]=Object.assign(Object.assign({},e[a]),t[a]))):Ie.array(t[a])&&(e!=null&&e.hasOwnProperty(a)||(e[a]=[]),Ie.array(e[a])&&((n=t==null?void 0:t[a])===null||n===void 0||n.forEach((s,c)=>{e[a][c]=s}),e[a]=[...e[a],...t[a]])))}return e}function Jt(e,t,n){var o,i;let a=null;for(let s=0;s<n.length;s++){const c=n[s];if(c.uuid===e){c.type==="group"&&((o=c.operations)===null||o===void 0?void 0:o.deepResize)===!0&&(t.w&&t.w>0||t.h&&t.h>0)&&$r(c,{w:t.w,h:t.h}),ld(c,t),a=c;break}else c.type==="group"&&(a=Jt(e,t,((i=c==null?void 0:c.detail)===null||i===void 0?void 0:i.children)||[]))}return a}function cd(e,t){var n,o,i,a,s,c,d,l,h,u;let f=0,m=0,v=1,g=((o=(n=e==null?void 0:e.elements)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.x)||0,p=((a=(i=e==null?void 0:e.elements)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.y)||0,w=((c=(s=e==null?void 0:e.elements)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.w)||0,C=((l=(d=e==null?void 0:e.elements)===null||d===void 0?void 0:d[0])===null||l===void 0?void 0:l.h)||0;const{width:M,height:y}=t.viewSizeInfo;if(e.layout&&((u=(h=e.layout)===null||h===void 0?void 0:h.detail)===null||u===void 0?void 0:u.overflow)==="hidden"?(g=0,p=0,w=e.layout.w||0,C=e.layout.h||0):e.elements.forEach(S=>{const E={x:S.x,y:S.y,w:S.w,h:S.h,angle:S.angle};if(E.angle&&(E.angle>0||E.angle<0)){const _=to(E);if(_.length===4){const V=[_[0].x,_[1].x,_[2].x,_[3].x],X=[_[0].y,_[1].y,_[2].y,_[3].y];E.x=Math.min(...V),E.y=Math.min(...X),E.w=Math.abs(Math.max(...V)-Math.min(...V)),E.h=Math.abs(Math.max(...X)-Math.min(...X))}}const L=Math.min(E.x,g),N=Math.min(E.y,p),b=Math.max(E.x+E.w,g+w),j=Math.max(E.y+E.h,p+C);g=L,p=N,w=Math.abs(b-L),C=Math.abs(j-N)}),e.layout){const{x:S,y:E,w:L,h:N}=e.layout;ze.x(S)&&ze.y(E)&&ze.w(L)&&ze.h(N)&&(g=Math.min(g,S),p=Math.min(p,E),w=Math.max(w,L),C=Math.max(C,N))}if(w>0&&C>0){const S=we(M/w,{decimalPlaces:4}),E=we(y/C,{decimalPlaces:4});v=Math.min(S,E,1),f=(w*v-M)/2/v+g,m=(C*v-y)/2/v+p}return{offsetX:we(f,{decimalPlaces:0}),offsetY:we(m,{decimalPlaces:0}),scale:v}}function dd(e){let t=0,n=0;if(e){const{viewScaleInfo:i,viewSizeInfo:a}=e,{offsetLeft:s,offsetTop:c,scale:d}=i,{width:l,height:h}=a;t=0-s+l/d/2,n=0-c+h/d/2}return{x:t,y:n}}const ud=["-apple-system",'"system-ui"',' "Segoe UI"'," Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"'," sans-serif"];function Zr(e){return[e,...ud].join(", ")}function ba(e,t,n){if(typeof t=="string")return t;const{viewElementSize:o,viewScaleInfo:i,opacity:a=1}=n,{x:s,y:c}=o,{scale:d}=i;if((t==null?void 0:t.type)==="linear-gradient"){const{start:l,end:h,stops:u}=t,f={x:s+l.x*d,y:c+l.y*d},m={x:s+h.x*d,y:c+h.y*d},v=e.createLinearGradient(f.x,f.y,m.x,m.y);return u.forEach(g=>{v.addColorStop(g.offset,is(g.color,a))}),v}if((t==null?void 0:t.type)==="radial-gradient"){const{inner:l,outer:h,stops:u}=t,f={x:s+l.x*d,y:c+l.y*d,radius:l.radius*d},m={x:s+h.x*d,y:c+h.y*d,radius:h.radius*d},v=e.createRadialGradient(f.x,f.y,f.radius,m.x,m.y,m.radius);return u.forEach(g=>{v.addColorStop(g.offset,is(g.color,a))}),v}return"#000000"}const Ea=Sn();function yn(e){var t,n,o,i;let a=1;return((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.opacity)!==void 0&&((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.opacity)>=0&&((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.opacity)<=1&&(a=(i=e==null?void 0:e.detail)===null||i===void 0?void 0:i.opacity),a}function Po(e,t,n){const{pattern:o,renderContent:i,originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d}=n||{},{parentOpacity:l}=n,h=yn(a)*l,{clipPath:u,clipPathStrokeColor:f,clipPathStrokeWidth:m}=a.detail,v=()=>{e.globalAlpha=h,Qr(e,t,{pattern:o,viewScaleInfo:c,viewSizeInfo:d}),i==null||i(),Jr(e,t,{viewScaleInfo:c,viewSizeInfo:d}),e.globalAlpha=l};u?(hd(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,renderContent:()=>{v()}}),typeof m=="number"&&m>0&&f&&fd(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,parentOpacity:l})):v()}function hd(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s}=n,c=s.devicePixelRatio,{clipPath:d}=(i==null?void 0:i.detail)||{};if(d&&a&&d.commands){const{x:l,y:h,w:u,h:f}=a,{originW:m,originH:v,originX:g,originY:p}=d,w=u/m,C=f/v,M=g*w,y=p*C,k=l-M,S=h-y;e.save(),e.translate(k,S),e.scale(c*w,c*C);const E=ja(d.commands||[]),L=new Path2D(E);e.clip(L),e.translate(0-k,0-S),e.setTransform(1,0,0,1,0,0),bt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function fd(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s,parentOpacity:c}=n,d=s.devicePixelRatio,{clipPath:l,clipPathStrokeColor:h,clipPathStrokeWidth:u}=(i==null?void 0:i.detail)||{};if(l&&a&&l.commands&&typeof u=="number"&&u>0&&h){const{x:f,y:m,w:v,h:g}=a,{originW:p,originH:w,originX:C,originY:M}=l,y=v/p,k=g/w,S=C*y,E=M*k,L=f-S,N=m-E;e.save(),e.globalAlpha=c,e.translate(L,N),e.scale(d*y,d*k);const b=ja(l.commands||[]),j=new Path2D(b);e.strokeStyle=h,e.lineWidth=u,e.stroke(j),e.translate(0-L,0-N),e.setTransform(1,0,0,1,0,0),bt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function Qr(e,t,n){var o,i;const{pattern:a,viewScaleInfo:s,viewSizeInfo:c}=n,d=[];if(t.detail.background||a){const{x:l,y:h,w:u,h:f,radiusList:m}=Hi(t,{viewScaleInfo:s,viewSizeInfo:c});if(e.beginPath(),e.moveTo(l+m[0],h),e.arcTo(l+u,h,l+u,h+f,m[1]),e.arcTo(l+u,h+f,l,h+f,m[2]),e.arcTo(l,h+f,l,h,m[3]),e.arcTo(l,h,l+u,h,m[0]),e.closePath(),typeof a=="string")e.fillStyle=a;else if(["CanvasPattern"].includes(Ie.type(a)))e.fillStyle=a;else if(typeof t.detail.background=="string")e.fillStyle=t.detail.background;else if(((o=t.detail.background)===null||o===void 0?void 0:o.type)==="linear-gradient"){const v=ba(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:f},viewScaleInfo:s,opacity:e.globalAlpha});e.fillStyle=v}else if(((i=t.detail.background)===null||i===void 0?void 0:i.type)==="radial-gradient"){const v=ba(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:f},viewScaleInfo:s,opacity:e.globalAlpha});if(e.fillStyle=v,d&&d.length>0)for(let g=0;g<(d==null?void 0:d.length);g++){const p=d[g];p.method==="translate"?e.translate(p.args[0]+l,p.args[1]+h):p.method==="rotate"?e.rotate(...p.args):p.method==="scale"&&e.scale(...p.args)}}e.fill(),d&&d.length>0&&e.setTransform(1,0,0,1,0,0)}}function Jr(e,t,n){if(t.detail.borderWidth===0||!Ai(t.detail.borderColor))return;const{viewScaleInfo:o}=n,{scale:i}=o;let a=Ea.borderColor;Ai(t.detail.borderColor)===!0&&(a=t.detail.borderColor);const{borderWidth:s,borderRadius:c,borderDash:d,boxSizing:l=Ea.boxSizing}=t.detail;let h=0;typeof s=="number"&&(h=s||1),h=h*i;let u=[0,0,0,0];if(typeof c=="number"){const w=c*i;u=[w,w,w,w]}else Array.isArray(c)&&(c==null?void 0:c.length)===4&&(u=[c[0]*i,c[1]*i,c[2]*i,c[3]*i]);e.strokeStyle=a;let f=[];Array.isArray(d)&&d.length>0&&(f=d.map(w=>Math.ceil(w*i)));let m=0,v=0,g=0,p=0;if(Array.isArray(s)&&(m=(s[0]||0)*i,v=(s[1]||0)*i,g=(s[2]||0)*i,p=(s[3]||0)*i),p||v||m||g){e.lineCap="butt";let{x:w,y:C,w:M,h:y}=t;l==="border-box"?(w=w+p/2,C=C+m/2,M=M-p/2-v/2,y=y-m/2-g/2):l==="content-box"?(w=w-p/2,C=C-m/2,M=M+p/2+v/2,y=y+m/2+g/2):(w=t.x,C=t.y,M=t.w,y=t.h),m&&(e.beginPath(),e.lineWidth=m,e.moveTo(w-p/2,C),e.lineTo(w+M+v/2,C),e.closePath(),e.stroke()),v&&(e.beginPath(),e.lineWidth=v,e.moveTo(w+M,C-m/2),e.lineTo(w+M,C+y+g/2),e.closePath(),e.stroke()),g&&(e.beginPath(),e.lineWidth=g,e.moveTo(w-p/2,C+y),e.lineTo(w+M+v/2,C+y),e.closePath(),e.stroke()),p&&(e.beginPath(),e.lineWidth=p,e.moveTo(w,C-m/2),e.lineTo(w,C+y+g/2),e.closePath(),e.stroke())}else{let{x:w,y:C,w:M,h:y}=t;l==="border-box"?(w=t.x+h/2,C=t.y+h/2,M=t.w-h,y=t.h-h):l==="content-box"?(w=t.x-h/2,C=t.y-h/2,M=t.w+h,y=t.h+h):(w=t.x,C=t.y,M=t.w,y=t.h),f.length>0?e.lineCap="butt":e.lineCap="square",M=Math.max(M,1),y=Math.max(y,1),u=u.map(k=>Math.min(k,M/2,y/2)),e.setLineDash(f),e.lineWidth=h,e.beginPath(),e.moveTo(w+u[0],C),e.arcTo(w+M,C,w+M,C+y,u[1]),e.arcTo(w+M,C+y,w,C+y,u[2]),e.arcTo(w,C+y,w,C,u[3]),e.arcTo(w,C,w+M,C,u[0]),e.closePath(),e.stroke()}e.setLineDash([])}function Cn(e,t,n){const{detail:o}=t,{viewScaleInfo:i,renderContent:a}=n,{shadowColor:s,shadowOffsetX:c,shadowOffsetY:d,shadowBlur:l}=o;ze.number(l)?(e.save(),e.shadowColor=s||Ea.shadowColor,e.shadowOffsetX=(c||0)*i.scale,e.shadowOffsetY=(d||0)*i.scale,e.shadowBlur=(l||0)*i.scale,a(),e.restore()):(e.save(),e.shadowColor="transparent",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,a(),e.restore())}function md(e,t,n){const{detail:o,angle:i}=t,{viewScaleInfo:a,viewSizeInfo:s,parentOpacity:c}=n,{background:d="#000000",borderColor:l="#000000",boxSizing:h,borderWidth:u=0,borderDash:f}=o;let m=0;typeof u=="number"&&u>0?m=u:Array.isArray(u)&&typeof u[0]=="number"&&u[0]>0&&(m=u[0]),m=m*a.scale;const{x:v,y:g,w:p,h:w}=Xe({x:t.x,y:t.y,w:t.w,h:t.h},{viewScaleInfo:a})||t,C=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:w,angle:i});bt(e,{x:v,y:g,w:p,h:w,angle:i},()=>{Cn(e,C,{viewScaleInfo:a,viewSizeInfo:s,renderContent:()=>{let M=p/2,y=w/2;const k=v+M,S=g+y,E=M,L=y;if(m>0&&(h==="content-box"?(M=M,y=y):h==="center-line"?(M=M-m/2,y=y-m/2):(M=M-m,y=y-m)),M>=0&&y>=0){const N=yn(C)*c;e.globalAlpha=N,e.beginPath();const b=ba(e,d,{viewElementSize:{x:v,y:g,w:p,h:w},viewScaleInfo:a,opacity:e.globalAlpha});if(e.fillStyle=b,e.circle(k,S,E,L,0,0,2*Math.PI),e.closePath(),e.fill(),e.globalAlpha=c,typeof m=="number"&&m>0){const j=m/2+M,_=m/2+y;if(e.beginPath(),f){const V=f.map(X=>X*a.scale);e.setLineDash(V)}e.strokeStyle=l,e.lineWidth=m,e.circle(k,S,j,_,0,0,2*Math.PI),e.closePath(),e.stroke(),e.setLineDash([])}}}})})}function gd(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Xe(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});bt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{Cn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{Po(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{}})}})})}function vd(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Xe(t,{viewScaleInfo:i})||t,f=Object.assign(Object.assign({},t),{x:c,y:d,w:l,h,angle:u});bt(e,{x:c,y:d,w:l,h,angle:u},()=>{Cn(e,f,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{Po(e,f,{originElem:t,calcElemSize:{x:c,y:d,w:l,h,angle:u},viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s,renderContent:()=>{if(!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="image"&&o){e.globalAlpha=yn(t)*s;const{x:m,y:v,w:g,h:p,radiusList:w}=Hi(f,{viewScaleInfo:i,viewSizeInfo:a}),{detail:C}=t,{scaleMode:M,originW:y=0,originH:k=0}=C,S=e.$undoPixelRatio(y),E=e.$undoPixelRatio(k);if(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(m+w[0],v),e.arcTo(m+g,v,m+g,v+p,w[1]),e.arcTo(m+g,v+p,m,v+p,w[2]),e.arcTo(m,v+p,m,v,w[3]),e.arcTo(m,v,m+g,v,w[0]),e.closePath(),e.fill(),e.clip(),M&&k&&y){let L=0,N=0,b=S,j=E;const _=m,V=v,X=g,B=p;if(S>t.w||E>t.h){if(M==="fill"){const R=Math.max(t.w/S,t.h/E),O=S*R,P=E*R;L=(O-t.w)/2/R,N=(P-t.h)/2/R,b=t.w/R,j=t.h/R}else if(M==="tile")L=0,N=0,b=t.w,j=t.h;else if(M==="fit"){const R=Math.min(t.w/S,t.h/E);L=(S-t.w/R)/2,N=(E-t.h/R)/2,b=t.w/R,j=t.h/R}}e.drawImage(o,L,N,b,j,_,V,X,B)}else e.drawImage(o,m,v,g,p);e.globalAlpha=s,e.restore()}}})}})})}function pd(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Xe(t,{viewScaleInfo:i,viewSizeInfo:a})||t;bt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="svg"&&o&&(e.globalAlpha=yn(t)*s,e.drawImage(o,c,d,l,h),e.globalAlpha=s)})}function yd(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Xe(t,{viewScaleInfo:i,viewSizeInfo:a})||t;bt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="html"&&o&&(e.globalAlpha=yn(t)*s,e.drawImage(o,c,d,l,h),e.globalAlpha=s)})}const Ki=Sn();function wd(e,t,n){return n<.5&&e<t&&(e-t)/e>-.15?!0:e>=t}function bd(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Xe(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});bt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{Cn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{Po(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a})}});{const f=Object.assign(Object.assign({},Ki),t.detail),m=f.fontSize||Ki.fontSize,v=m*o.scale;if(v<2)return;const p=(f.lineHeight||m)*o.scale;e.fillStyle=t.detail.color||Ki.color,e.textBaseline="top",e.$setFont({fontWeight:f.fontWeight,fontSize:v,fontFamily:Zr(f.fontFamily)});let w=f.text.replace(/\r\n/gi,`
`);f.textTransform==="lowercase"?w=w.toLowerCase():f.textTransform==="uppercase"&&(w=w.toUpperCase());const C=p,M=w.split(`
`),y=[];let k=0;M.forEach((L,N)=>{if(f.minInlineSize==="maxContent")y.push({text:L,width:e.$undoPixelRatio(e.measureText(L).width)});else{let b="",_=L.split("");if(f.wordBreak==="normal"){const V=" ",X=L.split(V);_=[],X.forEach((B,R)=>{_.push(B),R<X.length-1&&_.push(V)})}if(_.length===1&&f.overflow==="visible")y.push({text:_[0],width:e.$undoPixelRatio(e.measureText(_[0]).width)});else if(_.length>0){for(let V=0;V<_.length&&(wd(e.$doPixelRatio(d),e.measureText(b+_[V]).width,o.scale)?b+=_[V]||"":(y.push({text:b,width:e.$undoPixelRatio(e.measureText(b).width)}),b=_[V]||"",k++),!((k+1)*C>l&&f.overflow==="hidden"));V++)if(_.length-1===V&&(k+1)*C<=l){y.push({text:b,width:e.$undoPixelRatio(e.measureText(b).width)}),N<M.length-1&&k++;break}}else y.push({text:"",width:0})}});let S=0,E=0;C>v&&(E=(C-v)/2),y.length*C<l&&(t.detail.verticalAlign==="top"?S=0:t.detail.verticalAlign==="bottom"?S+=l-y.length*C:S+=(l-y.length*C)/2);{const L=c+S;f.textShadowColor!==void 0&&Ai(f.textShadowColor)&&(e.shadowColor=f.textShadowColor),f.textShadowOffsetX!==void 0&&ze.number(f.textShadowOffsetX)&&(e.shadowOffsetX=f.textShadowOffsetX),f.textShadowOffsetY!==void 0&&ze.number(f.textShadowOffsetY)&&(e.shadowOffsetY=f.textShadowOffsetY),f.textShadowBlur!==void 0&&ze.number(f.textShadowBlur)&&(e.shadowBlur=f.textShadowBlur),y.forEach((N,b)=>{let j=s;f.textAlign==="center"?j=s+(d-N.width)/2:f.textAlign==="right"&&(j=s+(d-N.width)),e.fillText(N.text,j,L+C*b+E)})}}})}var Ed=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function Sd(e,t,n){var o,i;const{detail:a}=t,{originX:s,originY:c,originW:d,originH:l,fillRule:h}=a,{viewScaleInfo:u,viewSizeInfo:f,parentOpacity:m}=n,{x:v,y:g,w:p,h:w,angle:C}=Xe(t,{viewScaleInfo:u})||t,M=p/d,y=w/l,k=s*M,S=c*y,E=v-k,L=g-S,N=t.detail,b=Ed(N,["clipPath","clipPathStrokeColor","clipPathStrokeWidth"]),j=u.scale*f.devicePixelRatio,_=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:w,angle:C});let V=Object.assign({},_);V.detail=b;let X=Object.assign({},t);X.detail=b,a.fill&&a.fill!=="string"&&(!((i=(o=a.fill)===null||o===void 0?void 0:o.type)===null||i===void 0)&&i.includes("gradient"))&&(V=Object.assign(Object.assign({},_),{detail:Object.assign(Object.assign({},_.detail),{background:a.fill,clipPath:{commands:a.commands,originX:s,originY:c,originW:d,originH:l}})}),X.detail=Object.assign({},V.detail)),bt(e,{x:v,y:g,w:p,h:w,angle:C},()=>{Po(e,V,{originElem:X,calcElemSize:{x:v,y:g,w:p,h:w,angle:C},viewScaleInfo:u,viewSizeInfo:f,parentOpacity:m,renderContent:()=>{Cn(e,_,{viewScaleInfo:u,viewSizeInfo:f,renderContent:()=>{e.save(),e.translate(E,L),e.scale(j*M/u.scale,j*y/u.scale);const B=ja(a.commands||[]),R=new Path2D(B);a.fill&&(typeof a.fill=="string"?e.fillStyle=a.fill:e.fillStyle="transparent"),a.fill&&e.fill(R,h),a.stroke&&a.strokeWidth!==0&&(e.strokeStyle=a.stroke,e.lineWidth=(a.strokeWidth||1)/f.devicePixelRatio,e.lineCap=a.strokeLineCap||"square",e.stroke(R)),e.translate(-E,-L),e.restore()}})}})})}const rs=.4;function Va(e,t,n){var o,i,a;if(((o=t==null?void 0:t.operations)===null||o===void 0?void 0:o.invisible)===!0)return;const{w:s,h:c}=t,{scale:d}=n.viewScaleInfo;if(d<1&&(s*d<rs||c*d<rs)||n.parentOpacity===0)return;const{overrideElementMap:l}=n;if(!(!((a=(i=l==null?void 0:l[t.uuid])===null||i===void 0?void 0:i.operations)===null||a===void 0)&&a.invisible))try{switch(t.type){case"rect":{gd(e,t,n);break}case"circle":{md(e,t,n);break}case"text":{bd(e,t,n);break}case"image":{vd(e,t,n);break}case"svg":{pd(e,t,n);break}case"html":{yd(e,t,n);break}case"path":{Sd(e,t,n);break}case"group":{const h=Object.assign(Object.assign({},n.elementAssets||{}),t.detail.assets||{});Cd(e,t,Object.assign(Object.assign({},n),{elementAssets:h}));break}default:break}}catch(h){console.error(h)}}function Cd(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Xe({x:t.x,y:t.y,w:t.w,h:t.h,angle:t.angle},{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});bt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{e.globalAlpha=yn(t)*a,Cn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{Po(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{const{x:f,y:m,w:v,h:g,radiusList:p}=Hi(u,{viewScaleInfo:o,viewSizeInfo:i});if(t.detail.overflow==="hidden"&&(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(f+p[0],m),e.arcTo(f+v,m,f+v,m+g,p[1]),e.arcTo(f+v,m+g,f,m+g,p[2]),e.arcTo(f,m+g,f,m,p[3]),e.arcTo(f,m,f+v,m,p[0]),e.closePath(),e.fill(),e.clip()),Array.isArray(t.detail.children)){const{parentElementSize:w}=n,C={x:w.x+t.x,y:w.y+t.y,w:t.w||w.w,h:t.h||w.h,angle:t.angle},{calculator:M}=n;for(let y=0;y<t.detail.children.length;y++){let k=t.detail.children[y];if(k=Object.assign(Object.assign({},k),{x:C.x+k.x,y:C.y+k.y}),!(n.forceDrawAll!==!0&&!(M!=null&&M.needRender(k))))try{Va(e,k,Object.assign(Object.assign({},n),{parentOpacity:a*yn(t)}))}catch(S){console.error(S)}}}t.detail.overflow==="hidden"&&e.restore()}})}}),e.globalAlpha=a})}const xd=Sn();function ls(e,t,n){var o;const{elements:i=[]}=t,{parentOpacity:a}=n;for(let s=0;s<i.length;s++){const c=i[s],d=Object.assign(Object.assign({},c),{detail:Object.assign(Object.assign({},xd),c==null?void 0:c.detail)});if(!(n.forceDrawAll!==!0&&!(!((o=n.calculator)===null||o===void 0)&&o.needRender(d))))try{Va(e,d,Object.assign(Object.assign({},n),{parentOpacity:a}))}catch(l){console.error(l)}}}function Md(e,t,n,o){const{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,c=Object.assign({uuid:"layout",type:"group"},t),{x:d,y:l,w:h,h:u}=Xe(c,{viewScaleInfo:i})||c,m=Object.assign(Object.assign({},c),{x:d,y:l,w:h,h:u,angle:0});if(e.globalAlpha=1,Cn(e,m,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{Qr(e,m,{viewScaleInfo:i,viewSizeInfo:a})}}),t.detail.overflow==="hidden"){const{viewScaleInfo:v,viewSizeInfo:g}=n,p=Object.assign({uuid:"layout",type:"group"},t),w=Xe(p,{viewScaleInfo:v})||p,C=Object.assign(Object.assign({},p),w),{x:M,y,w:k,h:S,radiusList:E}=Hi(C,{viewScaleInfo:v,viewSizeInfo:g});e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(M+E[0],y),e.arcTo(M+k,y,M+k,y+S,E[1]),e.arcTo(M+k,y+S,M,y+S,E[2]),e.arcTo(M,y+S,M,y,E[3]),e.arcTo(M,y,M+k,y,E[0]),e.closePath(),e.fill(),e.clip()}o(e),t.detail.overflow==="hidden"&&e.restore(),Jr(e,m,{viewScaleInfo:i,viewSizeInfo:a}),e.globalAlpha=s}function zd(e,t,n){if(typeof(t==null?void 0:t.background)=="string"){const{viewSizeInfo:o}=n,{width:i,height:a}=o;e.globalAlpha=1,e.fillStyle=t.background,e.fillRect(0,0,i,a)}}var qi=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},be=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},no=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},lt,zo,Un,rt,Lt,di,ea,cs,ds,us,Kr,qr;const Id=["image","svg","html"],vo=e=>{var t,n,o;let i=null;return e.type==="image"?i=((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.src)||null:e.type==="svg"?i=((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.svg)||null:e.type==="html"&&(i=((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.html)||null),typeof i=="string"&&i?mn(i)?i:qn(i):qn(`${Dt()}-${e.uuid}-${Dt()}-${Dt()}`)};class Ad extends gn{constructor(){super(),lt.add(this),zo.set(this,{}),Un.set(this,{}),rt.set(this,{}),Lt.set(this,!1),be(this,lt,"m",di).call(this,"image",(t,n)=>qi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.src])===null||o===void 0?void 0:o.value)||t.detail.src,a=yield Fi(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}})),be(this,lt,"m",di).call(this,"html",(t,n)=>qi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.html])===null||o===void 0?void 0:o.value)||t.detail.html,a=yield u0(i,{width:t.detail.originW||t.w,height:t.detail.originH||t.h});return{uuid:t.uuid,lastModified:Date.now(),content:a}})),be(this,lt,"m",di).call(this,"svg",(t,n)=>qi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.svg])===null||o===void 0?void 0:o.value)||t.detail.svg,a=yield c0(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}}))}isDestroyed(){return be(this,Lt,"f")}destroy(){no(this,Lt,!0,"f"),this.clear(),no(this,zo,null,"f"),no(this,Un,null,"f"),no(this,rt,null,"f")}load(t,n){be(this,Lt,"f")!==!0&&(be(this,lt,"m",qr).call(this,t)||Id.includes(t.type)&&be(this,lt,"m",Kr).call(this,t,n))}getContent(t){var n,o;const i=vo(t);return((o=(n=be(this,rt,"f"))===null||n===void 0?void 0:n[i])===null||o===void 0?void 0:o.content)||null}getLoadItemMap(){return be(this,rt,"f")}setLoadItemMap(t){no(this,rt,t,"f")}}zo=new WeakMap,Un=new WeakMap,rt=new WeakMap,Lt=new WeakMap,lt=new WeakSet,di=function(t,n){be(this,zo,"f")[t]=n},ea=function(t){var n,o,i;let a=null;return t.type==="image"?a=((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.src)||null:t.type==="svg"?a=((o=t==null?void 0:t.detail)===null||o===void 0?void 0:o.svg)||null:t.type==="html"&&(a=((i=t==null?void 0:t.detail)===null||i===void 0?void 0:i.html)||null),a},cs=function(t){return{element:t,status:"null",content:null,error:null,startTime:-1,endTime:-1,source:be(this,lt,"m",ea).call(this,t)}},ds=function(t){const n=vo(t.element),o=be(this,rt,"f")[n];be(this,Lt,"f")||(o?o.startTime<t.startTime&&(be(this,rt,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(be(this,rt,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},us=function(t){var n;const o=vo(t.element),i=(n=be(this,rt,"f"))===null||n===void 0?void 0:n[o];be(this,Lt,"f")||(i?i.startTime<t.startTime&&(be(this,rt,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(be(this,rt,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},Kr=function(t,n){const o=be(this,lt,"m",cs).call(this,t),i=vo(t);if(be(this,Un,"f")[i])return;be(this,Un,"f")[i]=o;const a=be(this,zo,"f")[t.type];typeof a=="function"&&!be(this,Lt,"f")&&(o.startTime=Date.now(),a(t,n).then(s=>{be(this,Lt,"f")||(o.content=s.content,o.endTime=Date.now(),o.status="load",be(this,lt,"m",ds).call(this,o))}).catch(s=>{console.warn(`Load element source "${o.source}" fail`,s,t),o.endTime=Date.now(),o.status="error",o.error=s,be(this,lt,"m",us).call(this,o)}))},qr=function(t){var n;const o=vo(t),i=(n=be(this,Un,"f"))===null||n===void 0?void 0:n[o];return!!(i&&i.status==="error"&&i.source&&i.source===be(this,lt,"m",ea).call(this,t))};var oo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ft=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Sa,Wt,Tt,ui,el;class tl extends gn{constructor(t){super(),Sa.add(this),Wt.set(this,void 0),Tt.set(this,new Ad),ui.set(this,!1),oo(this,Wt,t,"f"),ft(this,Sa,"m",el).call(this)}isDestroyed(){return ft(this,ui,"f")}destroy(){this.clear(),oo(this,Wt,null,"f"),ft(this,Tt,"f").destroy(),oo(this,Tt,null,"f"),oo(this,ui,!0,"f")}updateOptions(t){oo(this,Wt,t,"f")}drawData(t,n){const o=ft(this,Tt,"f"),{calculator:i,sharer:a}=ft(this,Wt,"f"),s=ft(this,Wt,"f").viewContext;s.clearRect(0,0,s.canvas.width,s.canvas.height);const c={x:0,y:0,w:n.viewSizeInfo.width,h:n.viewSizeInfo.height},d=Object.assign({loader:o,calculator:i,parentElementSize:c,elementAssets:t.assets,parentOpacity:1,overrideElementMap:a==null?void 0:a.getActiveOverrideElemenentMap()},n);zd(s,t.global,d),t.layout?Md(s,t.layout,d,()=>{ls(s,t,d)}):ls(s,t,d)}scale(t){const{sharer:n}=ft(this,Wt,"f");if(!n)return;const{data:o,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c,width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:f}=n.getActiveStoreSnapshot();o&&this.drawData(o,{viewScaleInfo:{scale:t,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c},viewSizeInfo:{width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:f}})}setLoadItemMap(t){ft(this,Tt,"f").setLoadItemMap(t)}getLoadItemMap(){return ft(this,Tt,"f").getLoadItemMap()}getLoader(){return ft(this,Tt,"f")}}Wt=new WeakMap,Tt=new WeakMap,ui=new WeakMap,Sa=new WeakSet,el=function(){const t=ft(this,Tt,"f");t.on("load",n=>{this.trigger("load",n)}),t.on("error",n=>{console.error(n)})};var ta=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ue=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Fn,We;class nl{constructor(t){Fn.set(this,void 0),We.set(this,void 0),ta(this,Fn,t,"f"),ta(this,We,new vn({defaultStorage:{viewVisibleInfoMap:{},visibleCount:0,invisibleCount:0}}),"f")}toGridNum(t,n){return(n==null?void 0:n.ignore)===!0?t:Math.round(t)}destroy(){ta(this,Fn,null,"f")}needRender(t){const o=Ue(this,We,"f").get("viewVisibleInfoMap")[t.uuid];return o?o.isVisibleInView:!0}isPointInElement(t,n,o,i){const a=Ue(this,Fn,"f").viewContext;return wa(t,{context2d:a,element:n,viewScaleInfo:o,viewSizeInfo:i})}getPointElement(t,n){const o=Ue(this,Fn,"f").viewContext;return Y0(t,Object.assign(Object.assign({},n),{context2d:o}))}resetViewVisibleInfoMap(t,n){if(t){const{viewVisibleInfoMap:o,invisibleCount:i,visibleCount:a}=$0(t.elements,n);Ue(this,We,"f").set("viewVisibleInfoMap",o),Ue(this,We,"f").set("invisibleCount",i),Ue(this,We,"f").set("visibleCount",a)}}updateVisiableStatus(t){const{viewVisibleInfoMap:n,invisibleCount:o,visibleCount:i}=Hr(Ue(this,We,"f").get("viewVisibleInfoMap"),t);Ue(this,We,"f").set("viewVisibleInfoMap",n),Ue(this,We,"f").set("invisibleCount",o),Ue(this,We,"f").set("visibleCount",i)}calcViewRectInfoFromOrigin(t,n){const o=Ue(this,We,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:f,topRight:m,bottomLeft:v,bottomRight:g}=o.originRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:Ee(c,p),left:Ee(d,p),right:Ee(l,p),bottom:Ee(h,p),top:Ee(u,p),topLeft:Ee(f,p),topRight:Ee(m,p),bottomLeft:Ee(v,p),bottomRight:Ee(g,p)}}calcViewRectInfoFromRange(t,n){const o=Ue(this,We,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:f,topRight:m,bottomLeft:v,bottomRight:g}=o.rangeRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:Ee(c,p),left:Ee(d,p),right:Ee(l,p),bottom:Ee(h,p),top:Ee(u,p),topLeft:Ee(f,p),topRight:Ee(m,p),bottomLeft:Ee(v,p),bottomRight:Ee(g,p)}}modifyViewVisibleInfoMap(t,n){const{modifyOptions:o,viewScaleInfo:i,viewSizeInfo:a}=n,{type:s,content:c}=o,d=t.elements,l=Ue(this,We,"f").get("viewVisibleInfoMap");if(s==="deleteElement"){const{element:h}=c,u=[],f=m=>{u.push(m.uuid),m.type==="group"&&Array.isArray(m.detail.children)&&m.detail.children.forEach(v=>{f(v)})};f(h),u.forEach(m=>{delete l[m]}),Ue(this,We,"f").set("viewVisibleInfoMap",l)}else if(s==="addElement"||s==="updateElement"){const{position:h}=c,u=Be(h,t.elements),f=_r(d,h);if(u)if(s==="updateElement"&&u.type==="group")this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a});else{const m=Fr(u,{groupQueue:f||[]}),v={originRectInfo:m,rangeRectInfo:ze.angle(u.angle)?Wr(m):m,isVisibleInView:!0,isGroup:(u==null?void 0:u.type)==="group",position:[...h]};l[u.uuid]=v,Ue(this,We,"f").set("viewVisibleInfoMap",l),s==="updateElement"&&this.updateVisiableStatus({viewScaleInfo:i,viewSizeInfo:a})}}else s==="moveElement"&&this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a})}}Fn=new WeakMap,We=new WeakMap;var na=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ae=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ae,Zn,Ze,hi,ol,fi,mi,gi,vi,pi,yi,wi,bi,Ht,xt,un;function hs(e){return e>0||e<0||e===0}class Td extends gn{constructor(t){super(),Ae.add(this),Zn.set(this,void 0),Ze.set(this,void 0),hi.set(this,!1),fi.set(this,o=>{if(!ae(this,Ae,"m",Ht).call(this,o))return;const i=ae(this,Ae,"m",xt).call(this,o);if(!ae(this,Ae,"m",un).call(this,i))return;o.preventDefault(),o.stopPropagation();const a=o.deltaX>0||o.deltaX<0?o.deltaX:0,s=o.deltaY>0||o.deltaY<0?o.deltaY:0;o.ctrlKey===!0&&this.has("wheelScale")?this.trigger("wheelScale",{deltaX:a,deltaY:s,point:i}):this.has("wheel")&&this.trigger("wheel",{deltaX:a,deltaY:s,point:i})}),mi.set(this,o=>{if(o.button!==2||!ae(this,Ae,"m",Ht).call(this,o))return;o.preventDefault();const i=ae(this,Ae,"m",xt).call(this,o);ae(this,Ae,"m",un).call(this,i)&&this.trigger("contextMenu",{point:i})}),gi.set(this,o=>{if(!ae(this,Ae,"m",Ht).call(this,o))return;o.preventDefault();const i=ae(this,Ae,"m",xt).call(this,o);if(!ae(this,Ae,"m",un).call(this,i))return;const a=500,s=Date.now(),c=ae(this,Ze,"f").get("prevClickPoint");c&&s-c.t<=a&&Math.abs(c.x-i.x)<=5&&Math.abs(c.y-i.y)<=5?this.trigger("doubleClick",{point:i}):ae(this,Ze,"f").set("prevClickPoint",i)}),vi.set(this,o=>{ae(this,Ze,"f").set("hasPointDown",!1),o.preventDefault();const i=ae(this,Ae,"m",xt).call(this,o);this.trigger("pointLeave",{point:i})}),pi.set(this,o=>{if(ae(this,Ze,"f").set("hasPointDown",!1),!ae(this,Ae,"m",Ht).call(this,o))return;o.preventDefault();const i=ae(this,Ae,"m",xt).call(this,o);this.trigger("pointEnd",{point:i})}),yi.set(this,o=>{if(!ae(this,Ae,"m",Ht).call(this,o))return;o.preventDefault(),o.stopPropagation();const i=ae(this,Ae,"m",xt).call(this,o);if(!ae(this,Ae,"m",un).call(this,i)){ae(this,Ze,"f").get("hasPointDown")&&(this.trigger("pointLeave",{point:i}),ae(this,Ze,"f").set("hasPointDown",!1));return}ae(this,Ze,"f").get("hasPointDown")===!0&&this.trigger("pointMove",{point:i})}),wi.set(this,o=>{if(o.button!==0||!ae(this,Ae,"m",Ht).call(this,o))return;o.preventDefault();const i=ae(this,Ae,"m",xt).call(this,o);ae(this,Ae,"m",un).call(this,i)&&(ae(this,Ze,"f").set("hasPointDown",!0),this.trigger("pointStart",{point:i}))}),bi.set(this,o=>{if(!ae(this,Ae,"m",Ht).call(this,o)){ae(this,Ze,"f").get("inCanvas")===!0&&(ae(this,Ze,"f").set("inCanvas",!1),ae(this,vi,"f").call(this,o));return}ae(this,Ze,"f").set("inCanvas",!0),o.preventDefault();const i=ae(this,Ae,"m",xt).call(this,o);ae(this,Ae,"m",un).call(this,i)&&this.trigger("hover",{point:i})});const n=new vn({defaultStorage:{hasPointDown:!1,prevClickPoint:null,inCanvas:!0}});na(this,Ze,n,"f"),na(this,Zn,t,"f"),ae(this,Ae,"m",ol).call(this)}onEvents(){if(ae(this,hi,"f"))return;const t=window;t.addEventListener("mousemove",ae(this,bi,"f")),t.addEventListener("mousedown",ae(this,wi,"f")),t.addEventListener("mousemove",ae(this,yi,"f")),t.addEventListener("mouseup",ae(this,pi,"f")),t.addEventListener("wheel",ae(this,fi,"f"),{passive:!1}),t.addEventListener("click",ae(this,gi,"f")),t.addEventListener("contextmenu",ae(this,mi,"f"))}offEvents(){const t=window;t.removeEventListener("mousemove",ae(this,bi,"f")),t.removeEventListener("mousedown",ae(this,wi,"f")),t.removeEventListener("mousemove",ae(this,yi,"f")),t.removeEventListener("mouseup",ae(this,pi,"f")),t.removeEventListener("mouseleave",ae(this,vi,"f")),t.removeEventListener("wheel",ae(this,fi,"f")),t.removeEventListener("click",ae(this,gi,"f")),t.removeEventListener("contextmenu",ae(this,mi,"f"))}destroy(){this.offEvents(),ae(this,Ze,"f").destroy(),na(this,hi,!0,"f")}}Zn=new WeakMap,Ze=new WeakMap,hi=new WeakMap,fi=new WeakMap,mi=new WeakMap,gi=new WeakMap,vi=new WeakMap,pi=new WeakMap,yi=new WeakMap,wi=new WeakMap,bi=new WeakMap,Ae=new WeakSet,ol=function(){this.onEvents()},Ht=function(t){return t.target===ae(this,Zn,"f").boardContent.boardContext.canvas},xt=function(t){const o=ae(this,Zn,"f").boardContent.boardContext.canvas.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top,t:Date.now()}},un=function(t){const n=ae(this,Zn,"f").sharer.getActiveViewSizeInfo(),{width:o,height:i}=n;return!!(hs(t.x)&&hs(t.y)&&t.x<=o&&t.y<=i)};var fs=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Se=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ce,Wn;const Nd={width:0,height:0,devicePixelRatio:1,contextWidth:0,contextHeight:0,data:null,scale:1,offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0,overrideElementMap:null};class Ld{constructor(){Ce.set(this,void 0),Wn.set(this,void 0);const t=new vn({defaultStorage:Nd}),n=new vn({defaultStorage:{}});fs(this,Ce,t,"f"),fs(this,Wn,n,"f")}getActiveStorage(t){return Se(this,Ce,"f").get(t)}setActiveStorage(t,n){return Se(this,Ce,"f").set(t,n)}getActiveStoreSnapshot(t){return Se(this,Ce,"f").getSnapshot(t)}getSharedStorage(t){return Se(this,Wn,"f").get(t)}setSharedStorage(t,n){return Se(this,Wn,"f").set(t,n)}getSharedStoreSnapshot(t){return Se(this,Wn,"f").getSnapshot(t)}getActiveViewScaleInfo(){return{scale:Se(this,Ce,"f").get("scale"),offsetTop:Se(this,Ce,"f").get("offsetTop"),offsetBottom:Se(this,Ce,"f").get("offsetBottom"),offsetLeft:Se(this,Ce,"f").get("offsetLeft"),offsetRight:Se(this,Ce,"f").get("offsetRight")}}setActiveViewScaleInfo(t){const{scale:n,offsetTop:o,offsetBottom:i,offsetLeft:a,offsetRight:s}=t;Se(this,Ce,"f").set("scale",n),Se(this,Ce,"f").set("offsetTop",o),Se(this,Ce,"f").set("offsetBottom",i),Se(this,Ce,"f").set("offsetLeft",a),Se(this,Ce,"f").set("offsetRight",s)}setActiveViewSizeInfo(t){Se(this,Ce,"f").set("width",t.width),Se(this,Ce,"f").set("height",t.height),Se(this,Ce,"f").set("devicePixelRatio",t.devicePixelRatio),Se(this,Ce,"f").set("contextWidth",t.contextWidth),Se(this,Ce,"f").set("contextHeight",t.contextHeight)}getActiveViewSizeInfo(){return{width:Se(this,Ce,"f").get("width"),height:Se(this,Ce,"f").get("height"),devicePixelRatio:Se(this,Ce,"f").get("devicePixelRatio"),contextWidth:Se(this,Ce,"f").get("contextWidth"),contextHeight:Se(this,Ce,"f").get("contextHeight")}}getActiveOverrideElemenentMap(){return Se(this,Ce,"f").get("overrideElementMap")}setActiveOverrideElemenentMap(t){Se(this,Ce,"f").set("overrideElementMap",t)}}Ce=new WeakMap,Wn=new WeakMap;var Ei=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ke=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Io,He,Qn,Hn,il,al;const{requestAnimationFrame:Dd}=window;class Rd extends gn{constructor(t){super(),Io.add(this),He.set(this,void 0),Qn.set(this,[]),Hn.set(this,"FREE"),Ei(this,He,t,"f"),ke(this,Io,"m",il).call(this)}resetViewVisibleInfoMap(t,n){t&&ke(this,He,"f").calculator.resetViewVisibleInfoMap(t,n)}drawFrame(){const{sharer:t}=ke(this,He,"f"),n=t.getActiveStoreSnapshot(),o=t.getSharedStoreSnapshot();ke(this,Qn,"f").push({activeStore:n,sharedStore:o}),ke(this,Io,"m",al).call(this)}scale(t){const{scale:n,point:o,ignoreUpdateVisibleStatus:i}=t,{sharer:a}=ke(this,He,"f"),{moveX:s,moveY:c}=W0({scale:n,point:o,viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()});return a.setActiveStorage("scale",n),i||ke(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()}),{moveX:s,moveY:c}}scroll(t){const{sharer:n}=ke(this,He,"f"),o=n.getActiveViewScaleInfo(),{moveX:i,moveY:a,ignoreUpdateVisibleStatus:s}=t,c=n.getActiveViewSizeInfo(),d=H0({moveX:i,moveY:a,viewScaleInfo:o,viewSizeInfo:c});return n.setActiveViewScaleInfo(d),s||ke(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),d}updateViewScaleInfo(t){const{sharer:n}=ke(this,He,"f"),o=F0(t,{viewSizeInfo:n.getActiveViewSizeInfo()});return n.setActiveViewScaleInfo(o),ke(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),o}resize(t={},n){const{sharer:o}=ke(this,He,"f"),i=o.getActiveViewSizeInfo(),a=Object.assign(Object.assign({},i),t),{width:s,height:c,devicePixelRatio:d}=a,{underlayContext:l,boardContext:h,overlayContext:u,viewContext:f}=ke(this,He,"f").boardContent;return h.canvas.width=s*d,h.canvas.height=c*d,h.canvas.style.width=`${s}px`,h.canvas.style.height=`${c}px`,l.canvas.width=s*d,l.canvas.height=c*d,u.canvas.width=s*d,u.canvas.height=c*d,f.canvas.width=s*d,f.canvas.height=c*d,o.setActiveViewSizeInfo(a),n!=null&&n.ignoreUpdateVisibleStatus||ke(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:o.getActiveViewScaleInfo(),viewSizeInfo:o.getActiveViewSizeInfo()}),a}}He=new WeakMap,Qn=new WeakMap,Hn=new WeakMap,Io=new WeakSet,il=function(){const{renderer:t}=ke(this,He,"f");t.on("load",()=>{this.drawFrame()})},al=function e(){if(ke(this,Hn,"f")==="DRAWING"||ke(this,Qn,"f").length===0)return;Ei(this,Hn,"DRAWING","f");const t=ke(this,Qn,"f").shift(),{renderer:n,boardContent:o,beforeDrawFrame:i,afterDrawFrame:a}=ke(this,He,"f");if(t){const{scale:s,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h,width:u,height:f,contextHeight:m,contextWidth:v,devicePixelRatio:g}=t.activeStore,p={scale:s,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h},w={width:u,height:f,contextHeight:m,contextWidth:v,devicePixelRatio:g};t!=null&&t.activeStore.data&&n.drawData(t.activeStore.data,{viewScaleInfo:p,viewSizeInfo:w}),i({snapshot:t}),o.drawView(),a({snapshot:t})}if(ke(this,Qn,"f").length===0){Ei(this,Hn,"COMPLETE","f");return}Ei(this,Hn,"DRAWING","f")&&Dd(()=>{ke(this,Io,"m",e).call(this)})};var Gt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Q=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Pe,Gn,Nt,Ri,ge,Ve,Jn,gt,tt,Yn,Kn,Si,sl,ms,gs,vs,ps,ys,ws,bs,Es,Ss,Cs,xs,Ms,rl,ll,cl,po;class Pd{constructor(t){Pe.add(this),Gn.set(this,void 0),Nt.set(this,new WeakMap),Ri.set(this,[]),ge.set(this,[]),Ve.set(this,void 0),Jn.set(this,void 0),gt.set(this,void 0),tt.set(this,void 0),Yn.set(this,void 0),Kn.set(this,new gn),Si.set(this,!1);const{boardContent:n}=t,o=new Ld,i=new nl({viewContext:n.viewContext}),a=new Td({boardContent:n,sharer:o}),s=new tl({viewContext:n.viewContext,sharer:o,calculator:i});Gt(this,Gn,t,"f"),Gt(this,gt,o,"f"),Gt(this,Ve,a,"f"),Gt(this,Jn,s,"f"),Gt(this,Yn,i,"f"),Gt(this,tt,new Rd({boardContent:t.boardContent,sharer:o,renderer:s,calculator:Q(this,Yn,"f"),beforeDrawFrame:c=>{Q(this,Pe,"m",ll).call(this,c)},afterDrawFrame:c=>{Q(this,Pe,"m",cl).call(this,c)}}),"f"),Q(this,Pe,"m",sl).call(this),Q(this,Pe,"m",po).call(this)}isDestroyed(){return Q(this,Si,"f")}destroy(){Q(this,Ve,"f").destroy(),Q(this,Jn,"f").destroy(),Q(this,Yn,"f").destroy(),Q(this,Kn,"f").destroy(),Gt(this,Si,!0,"f")}getSharer(){return Q(this,gt,"f")}getViewer(){return Q(this,tt,"f")}getRenderer(){return Q(this,Jn,"f")}setData(t,n){const{modifiedOptions:o}=n||{},i=Q(this,gt,"f");Q(this,gt,"f").setActiveStorage("data",t);const a=i.getActiveViewSizeInfo(),s=i.getActiveViewScaleInfo(),c=Or(t.elements,{viewWidth:a.width,viewHeight:a.height,extend:!0});o?Q(this,tt,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}):Q(this,tt,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}),Q(this,tt,"f").drawFrame();const d=Object.assign(Object.assign({},a),c);return Q(this,gt,"f").setActiveViewSizeInfo(d),{viewSizeInfo:d}}getData(){const{data:t}=Q(this,gt,"f").getActiveStoreSnapshot();return t}use(t,n){var o,i,a;if(Q(this,Nt,"f").has(t)){const m=Q(this,Nt,"f").get(t);if(m){(i=(o=m.middlewareObject).use)===null||i===void 0||i.call(o),m.status="enable",Q(this,Nt,"f").set(t,m),Q(this,Pe,"m",po).call(this);return}}const{boardContent:s,container:c}=Q(this,Gn,"f"),d=Q(this,gt,"f"),l=Q(this,tt,"f"),h=Q(this,Yn,"f"),u=Q(this,Kn,"f"),f=t({boardContent:s,sharer:d,viewer:l,calculator:h,eventHub:u,container:c},n);(a=f.use)===null||a===void 0||a.call(f),Q(this,Ri,"f").push(t),Q(this,ge,"f").push(f),Q(this,Nt,"f").set(t,{status:"enable",middlewareObject:f,config:n}),Q(this,Pe,"m",po).call(this)}disuse(t){var n,o;const i=Q(this,Nt,"f").get(t);i&&((o=(n=i.middlewareObject).disuse)===null||o===void 0||o.call(n),i.status="disable",Q(this,Nt,"f").set(t,i),Q(this,Pe,"m",po).call(this))}scale(t){const n=Q(this,tt,"f"),{ignoreUpdateVisibleStatus:o}=t,{moveX:i,moveY:a}=n.scale(Object.assign(Object.assign({},t),{ignoreUpdateVisibleStatus:!0}));n.scroll({moveX:i,moveY:a,ignoreUpdateVisibleStatus:o})}scroll(t){return Q(this,tt,"f").scroll(t)}updateViewScaleInfo(t){return Q(this,tt,"f").updateViewScaleInfo(t)}resize(t,n){const o=Q(this,tt,"f").resize(t,n),{width:i,height:a,devicePixelRatio:s}=t,{boardContent:c}=Q(this,Gn,"f");c.viewContext.$resize({width:i,height:a,devicePixelRatio:s}),c.overlayContext.$resize({width:i,height:a,devicePixelRatio:s}),c.boardContext.$resize({width:i,height:a,devicePixelRatio:s}),c.underlayContext.$resize({width:i,height:a,devicePixelRatio:s}),Q(this,tt,"f").drawFrame(),Q(this,Ve,"f").trigger("resize",o),Q(this,gt,"f").setActiveViewSizeInfo(t)}clear(){const{boardContent:t}=Q(this,Gn,"f"),{underlayContext:n,overlayContext:o,viewContext:i,boardContext:a}=t;n.clearRect(0,0,n.canvas.width,n.canvas.height),o.clearRect(0,0,o.canvas.width,o.canvas.height),i.clearRect(0,0,i.canvas.width,i.canvas.height),a.clearRect(0,0,a.canvas.width,a.canvas.height),Q(this,Pe,"m",rl).call(this)}getEventHub(){return Q(this,Kn,"f")}onWatcherEvents(){Q(this,Ve,"f").onEvents()}offWatcherEvents(){Q(this,Ve,"f").offEvents()}}Gn=new WeakMap,Nt=new WeakMap,Ri=new WeakMap,ge=new WeakMap,Ve=new WeakMap,Jn=new WeakMap,gt=new WeakMap,tt=new WeakMap,Yn=new WeakMap,Kn=new WeakMap,Si=new WeakMap,Pe=new WeakSet,sl=function(){Q(this,Ve,"f").on("pointStart",Q(this,Pe,"m",ms).bind(this)),Q(this,Ve,"f").on("pointEnd",Q(this,Pe,"m",gs).bind(this)),Q(this,Ve,"f").on("pointMove",Q(this,Pe,"m",vs).bind(this)),Q(this,Ve,"f").on("pointLeave",Q(this,Pe,"m",ps).bind(this)),Q(this,Ve,"f").on("hover",Q(this,Pe,"m",ys).bind(this)),Q(this,Ve,"f").on("wheel",Q(this,Pe,"m",Es).bind(this)),Q(this,Ve,"f").on("wheelScale",Q(this,Pe,"m",Ss).bind(this)),Q(this,Ve,"f").on("scrollX",Q(this,Pe,"m",Cs).bind(this)),Q(this,Ve,"f").on("scrollY",Q(this,Pe,"m",xs).bind(this)),Q(this,Ve,"f").on("resize",Q(this,Pe,"m",Ms).bind(this)),Q(this,Ve,"f").on("doubleClick",Q(this,Pe,"m",ws).bind(this)),Q(this,Ve,"f").on("contextMenu",Q(this,Pe,"m",bs).bind(this)),Q(this,Jn,"f").on("load",()=>{Q(this,Kn,"f").trigger("loadResource")})},ms=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.pointStart)===null||n===void 0?void 0:n.call(i,t))===!1)return}},gs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.pointEnd)===null||n===void 0?void 0:n.call(i,t))===!1)return}},vs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.pointMove)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ps=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.pointLeave)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ys=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.hover)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ws=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.doubleClick)===null||n===void 0?void 0:n.call(i,t))===!1)return}},bs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.contextMenu)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Es=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.wheel)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Ss=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.wheelScale)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Cs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollX)===null||n===void 0?void 0:n.call(i,t))===!1)return}},xs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollY)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Ms=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.resize)===null||n===void 0?void 0:n.call(i,t))===!1)return}},rl=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.clear)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ll=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.beforeDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},cl=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.afterDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},po=function(){const t=[],n=Q(this,Nt,"f");Q(this,Ri,"f").forEach(o=>{const i=n.get(o);(i==null?void 0:i.status)==="enable"&&(i!=null&&i.middlewareObject)&&t.push(i.middlewareObject)}),Gt(this,ge,t,"f")};const Od="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MDc6MjYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjliMGM0MzI2LWU4ZTQtNDlkNy04MmUzLTgxODkwYTE2ZmU1YSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjMzOGFhZDBmLWZkZjMtODE0MS1iMTZmLWNiZWIzNTQyYTJhMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUwODAxNzc1LWZlNGEtNDQyMy05NDQ3LThkYWRhNzZhYTllOSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTA4MDE3NzUtZmU0YS00NDIzLTk0NDctOGRhZGE3NmFhOWU5IiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjA3OjI2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWIwYzQzMjYtZThlNC00OWQ3LTgyZTMtODE4OTBhMTZmZTVhIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7W6XrzAAAGLklEQVRYhb2Xf2iUdRzHX/txtfXLplZ6Wblm6fzRmG6r7Uou1AxKRjQKYUqgaLBACFogppcK1h8aLRkMSYaJIA5hYMomZpskEfPOufCaDpZ6t7rbre263U3vzn3643meu+eu3XNzvz7w4bbdc/e89nl/Pu/v50HUCAQCx1tbW0uAx4CHgSwggxkKERkziUQif2mQ0WjU53a7vwSeBB4BTEDmTICmBBwYGDivVlDjlFAo9KvT6dwIPAHkANkq6MwDXr169bCISENDg9TX14s+BgcHf2hubi5mBmRPCXj06NFPREQ6OjoEkPLycrl06VIMMhKJeFwu1xdMs+wpAYuLi9eIiIyOjkpeXp4AAsj27dvF7/fHQIPB4C9dXV0fME2ypwQEXvX7/bdFRNauXRsDBMRkMsnhw4cTZB8YGGhsamp6hSmW3Qhw1Y0bN86LiNTW1iYAallWViZtbW162ftcLtdO/i/7tAAWtba2ficicvLkyTEBtdy6dasMDg7GQIeHh9s7OzvfBx5nkrIbAS7du3fvxyIiPT09hoBa1tXVJcv+fWNj4zLgUeAhJiC7EeDLwOsiMioisnDhwnFBrlixQi5evKiX/c6tW7c+R5E9lweU3QjwReDV/v7+bhGRqqqqcQFquWnTJvH5fHrZLzocjkoSZU9bTSPA54GV165daxYROXDgwAMBannw4MFk2RsaGhqWME7ZjQDNwIrTp09/JSLS0tIyIUBACgoK5MKFCzHIcDj85+3btz8FZpFGdiPAZ4DCmpqaTSIiPp9vwoBaVlVVidfr1ct+/sqVK+9iILsR4FzgJcASDoeHRUSKioomDQnI/v37E2T3+Xz1hw4dWjSW7EaAeUA+UNbX12cXEdmyZcuUAAJiNpvlzJkzetl73G53rVrN2EmUCjATuA9EgYjL5eoGKCkpGatNHijmz5/Pxo0b2blzJ2azOfZ3k8lUYDabv45Go/Y7d+6sIY0VZQOjGqDT6bxeWlrKqlWrJgRlsVhYv349FRUVWCwWcnJyEt4PBoOuoaEhu9frvdzR0fHTtm3buolvRpLqe3OBp4EllZWV74mIRKNRyc3NTSvf7Nmzpbq6Wk6cOCFut1uSY2RkJOB0Ou3Nzc3Ha2trPwPWAGXAEuBZFFPPAbKMevBhYA6wCKgIBoP9IiKrV682hLPZbP8DEpH7vb29N1paWn602WwHFyxYsAX4EKgE3gIsQBFQgOIeT6j3z0wFqEkc60OPx9Odn58/t6SkhPb29jFLbrVa2bNnDwBer7fv5s2bPQ6Ho7upqcnZ1tbmASJq3gPC6utdYESXYfWeo6mkBaUHRQ/odrv/yM/Pt5SWlqb8kAbncDh+W7lyZYN683u6DOvAwipsOOnniA4wZf9lqhdoVYzY7fbrQMpBsdlsWK1WRkZGAtXV1d8D/wA+wKNLr5o+YEC9ZggIAEHiFbyfDhCUCcoFngIWFxYWrtMaat68eQl9V15eHmu2+vr6OuAd4A2gGFgMLERp/mdQ+noWyuadi9Jr2aQ4k42GBPXDs1Ga97WhoaFbIiIbNmxIANTWq87Ozp9VuApgGfACihPkoRjwI+p3mlSgtA9ZRkYNYwwKJBr2rl27sFqthEKhwZqamqOAX5f/AsPE5btLvM/GJWO6yFb/82eBonPnztWJiJw9e1YAWb58eUzaI0eOfAO8CbwCPIfiZZN+eEoncSaKLPOApbt3794uIuL1ehOktdvtF4C3gRKURXcOSn9lTRRsvIAZKI4+l/gjQFREZMeOHSIiEggE+tetW/cRitkuRhmERxnnxjxZQFDWnzzURwCv1+vUHxHHjh37lri0C1Am9KGpgDMC1G8SQnxxCHs8Hqf2RldX10+bN28+i+JjwyT62KSaP13oAfWTHO7t7f0dIBQK/b1v375GlEnVjPYuyoQaHlNTDahVMALca29vdwBcvnz5+KlTp26OATft1UuODBS7yEOxj0K/329HOSWWopjxlE1tchhtM7FriPfgXSDDbrfXo0gbJr4QzIi0WiRPYBbKZJrUV23b0dYn7XSYcsBkS9EiO/k6lApq1cwiPjzaAM1Y9cYC1G6uAWrPCtrvMwoHqU02Q5caIEzj1KaS+D+vIjxtLug31gAAAABJRU5ErkJggg==",dl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MzE6MjMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0MTBhYjUzLWM0ZjEtNDVhNS04MjhkLTIxOTczOWFjOTk3MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBkMDNmNjM5LTE5MzctY2Y0MC1hMTg0LTIyMjg0NzczNWNmYSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjgyYjQwZGRmLWE0ZGEtNDY3MC1iYzc2LTBhYjY3ZmI5M2I0ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODJiNDBkZGYtYTRkYS00NjcwLWJjNzYtMGFiNjdmYjkzYjRlIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjMxOjIzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjQxMGFiNTMtYzRmMS00NWE1LTgyOGQtMjE5NzM5YWM5OTcxIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz57vRudAAAEk0lEQVRYhe3ZW0jbVxzA8e8/MX+NYnG9uI4xE3bvoLt0FzradRfGBtsYo32YdAhb6WQyBqV7KOylpYjzZShDGfjmyxgbgjjwyRm16SYMhgiNKDhbL3VtNF4xJOnf3x7+59i/Wf4aTbInf3AwJMdzPjnnf/n9/jFEhGzDMIxMb3uAIsDs6ek5urS05Dtz5syE+uwekAQS6u89YD19gC0NIpJ1c8GZQHlXV9fJRCIxGo/HxxoaGj4CngWOAEGgEihXfT07MeQC3MB1dna+lkgkRkXF6urq3xcuXPgUOAE8DzwGPOiGLARwEy4ej4+JiITD4elr167NiIgsLi7eqq2trQPeBI4Bj7sh8w10xZmmeds0zdn+/v5/RERisdjUuXPnvgLeAl50Q+YTaAA+oKy7u/uE3laNAwSQ4uLiu6FQ6G4G5DG13YeAMjWWkU+gBygJhULHNe769etTTpwDGXUiz58//yXwujp5qoAHgBLAk0+gNxKJHEulUiMKN2ma5gwgPp/vjhOXjlxYWJisq6urBV5RW30IKAW8eQPGYrGjlmXdEBEZHBy8aZrmFCCmac729fVtAHt7e6MO5N2+vr47IiJLS0s3L126dBZ4Sh2LZUBRwVdwYGBgVuwOYh/zsoF0bnPBVzDTMRgOh6dFhROokSIi8/Pz0+pEeaPQx+DGWdzV1XVSX2LcgCIic3NzMzU1NV8D7wIvq9WrLNRZvOk62NHRccqJTAdGo9Hb1dXV3wAfYt9VjgAPFfI66EQWAxU9PT0fuwEvXrzYBJwF3gFeAAJAhfrfrO4k/7lxZxnr2JlJqry8POnWyePx6H4JR0vhktVkHGOXQI20SkpKLLcOhmGsA5YCaZiVLS5XoADi9XpdkznDMERhnE0fCgUHZhvOW+CO4/8A5hR7wFxjD5hr7AFzjZyBlmVlrOYdYaS1HUUuQA/gWV9fd51URDyqn1c1j6MVFGjoidfW1oq2ABrYj0V82OmVzwHNajVdB88C5wOKTdM87NaxsrKyQsFKHC2BnTDo+/TWt8Bd5INeVC44NDT0xXYZdXNz8w/AaeyS8yjwCPdzQu92ht2m/OUjIyOfS1pkAoqItLS0fA+8D7wKPA0cxs6qC1O4T0xMfKYnb21tnXEDNjc3z+nXbW1t3wFvYz9dCAL7KUThHovFPtGTNjU1jQFSX18/lg68cuXKLUAaGxs3vkB7e/u3wHHgCQpUdnpTqdQvesJgMDisUVevXh3Xry9fvnxTv66qqprQ/cfHx/vVNj/J/couv0DAv7q6+pMDeYPNSalkwkUikX7s4ukl4FHgAODPN1CXnPsWFxd/dCAjW+GGhoZCwAfYpeczwMPAPjVW3gv3IvXN98disZ8dyBGNCwQC4/r94eHhfuy6+JS6zATUCeJXY+W9cNfIUuDAwsLCr05kIBDYeBQ8Ojr6h8Lpx25BtbWlGpfv62BG5PLy8m+SFpOTk38C76mVe84NVyhgOvLgysrK7xoXjUb/Uqt2XG1rEDiYCbcd0MgwsWtk+J1EI03An0wmw5Zlefx+/2n1eRKIO5r+rWTTpFsZ/gWFrGMmeObuqwAAAABJRU5ErkJggg==",kd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAEvUlEQVRYhc2Y20/cVRDHP8v+uKzAWkpDCtZq8BYhJkq8PBoJxgj7I2m0ryaSyFN9IT74pI8+8WJiggRj/APApFkSTGRJ+qKGUiyxbGPEWsUSuVhYC12Wy8+HmeMeYPe3d3WSye/k/M7le+bMzJkZ+J9ToEJreGVYN+vihcytstjQocUlAw0WCSoIVCv3Ae8CXwIt+u8XHVeOG8qLqgAHqAFCQCNwGugCthBJGd7S/tM6LqTzHI5KuqzgaoAHgEvAtwrkG2AG8FzXvep5nue67lX9N6P/PR1/SefXlBtkFXKNDUA/RyX1D9uUbYzOb9D1ygbSQU7eDMxhSSsSiVz3AxiJRK57nuf19/fPad8coqONFCBJPyUOIKc1OvcbgiY9ICDT8+0DHge2gR0gBeyTtviM5HeKAGlrrfMZVwhdAVaAr4F3KNF4gkA9cBbowOc68+3LwDn1Mhdy4/OcYk54nPr6+m54nofruvPa9SFQ6wfQTweNgTwInAGuQWk6mEUvHwb+Au4Dexx7ffK9+0q+CHWIBIOZ9skHYKWfK9tQ8gZoLDjIyWCg3ORY+2T8aYOyg4EaRIFrkCs4QU1NTSvabC20zyIDzuyfkYzEahHX8jHwE/LwXwHeJ4P7KIVIu5ouxFDC+HgLAy4MfEF2v1UpgOezATSiNVf6EvAWsD01NXVtdnb2bk9Pz81sp/q3KIi8t83Ae4DX0tJy0z7t8PDwD4FAYIX/WILVwKMAzc3Nu/agoaGhzmg0ugcsV0hIvlSNoH8IuIiebHJycrls4sotwaxGYvueAPAjEg3jum79yMjIr5WUjFLOxMpBIopWoBN4GfhOJ+4NDg4ulVt6i4uLm7r+BvAscA4fCXrAAfJQJ5Fg8gPgMuCMjo62d3V1LW1sbKRKlpXSxMTEmjZ/5qQrOwHwUAGmkIjiHhJdfKrM/Pz8Y+3t7RvT09Ob5QAYi8X2tbmke2cEZwAaCdoAt5QvIzEbiUSitbe3tyoej++UCnBhYSGkzdu6d1aQxkgOkfwgieQMCeCu8iwSnpNKpcIdHR3BZDJ5UCy4SCSyvL6+/giiSou67wE+eYmhAKKkIaAJUdynkdflNcQF3dFTpooxjmg0aozDAz4DXkB8bxPy1OYM7QzIOuAU0AY8pQu9CrwJ3AK8UCj0RyHgZmZmli1w3wOvAM/oHo1kiZiygbSDh7PAE8DzQA/wBqKnnuM4a2NjY7dygbtw4cICRy31deBFJA09o7eWsU7kJ1KTLJmyRyOSn5zS70fAkwBtbW2/DwwMHHR3d9d3dnY2rK6u7o2Pj2/GYrH9eDzurK2tndM1vwI+QXT7T2BTD5skQz6SCyAcLRoZkGEFGQbeRqpbubK+BPA5MI14h00L3I6Cy2h4+eQbJsKuRa6iQcGFFfB5oBt4DpFsI+Ky7iDBxW3gBhBH/GtC+R7i1lKk3UxRAG2QpvxWr0AbtB3SA5jkx36djH/dVlDbyibN3M8GDvJPyI2PSulixm/u6kZ1OQCaJ/S+tndJX6tvsFBIxcCUdA3vW5ubxMrObc0hDMhd/Rqp5QQHxeW8dubnHGM7tzVv/IECMlxQ/bpcRfRMqaNRheNcUGG9XFWDACfzWs/6Fl3t/xtO//8gpbCORQAAAABJRU5ErkJggg==",_d="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAER0lEQVRYhe2YT2hjRRjAf8lL22xsNsm6EWKrSKvuIkIh+O9QRFxEW18KUsoe7FHoRaWCN1FPetOrIHgVKS0q9P5OxaJbodkalgVrtVZjS7Ntd02z6abPw3yzmaT585q+elj2g2HmvZn35jffN/PNNwP35R6XgM/fuif4n+dO2klQvgsaZRc4NJJvoJbHdhrIAkJAN2ADHwFfAw9J3ZoB/b9I0AA6A0SBc0Aa2EVpSqddeZ+QdmfkO+u0gIPSQQR4HfhRQH4AHMDNZDJXXNd1M5nMFalzdB3wJTAOPAD0yEB9066G6wXepVZTd5MpTdporZ6jVqsatmMJoTR3HvgJQ1u2bS+3ArRte9l1XXdsbGyJo1pdBN6Wf3d3ChlAmSQO9LeC8fquQRpDWaerHWSjSr1iu4BkJyOsF9u2s67rkslkluTVxygltAVsJBZqdCngEj5osIlW+4EYytRNF04jeu3vulCT+7QkLH20dEOhumft97pQI4s3+iiRSPwtxVSbd39J8eEGvzFXc1NAs8KSFAZeBt4AHgNeBFDWObkEAne7HAK2gT2gCFQatdca1GbtBj4E3veFprVYVLXXcg4GqM6588BbAMlkcm1qamqzr6/v6ikBet5RgiizJoDPAXdgYGDZXHkzMzPrrk9CdRWngUeAsxxdCzVwpgZ/BigWiz1mo4mJif7jqMajeJrU5hywgGvAej6fvzA0NLThN1Eul9uT4g5VTbYFNKUIfAbsZ7PZvuHh4Wt+As7Ozu5IcY2j219TQB0NV4A7qODgO4CFhYWLg4ODOb8AHccpG4A68m6pRQ1YAQ6A28A+8BXwBcDq6upTqVTquh+AuVyuW4q/opRRaQdZD1gCbgE3ge+BT4HdfD7/ZDwe/z2bzRY6hRsfH1/e3Nx8FDX/sgbgoZfvg6jo4ixqW7oIPA+8CrwHrAJuJBLJd+JaHMf5k6qmPgGeQe1SCenXk0/U21xcIC8AzwGvAJPAEuAmEon1xcXFba9w8/Pz5oqdB14CnpY+oij35km0qwmjwqAU8ISM9hIwBeQA17KsG9PT07+1gxsZGdmgdqW+BjwLDAAPoo4ALU+W9arVwWoIpXp9kouKZpPAO8AwQCwW+2d0dLQ0OTkZSafT0UKhUJ6bm9t2HKeysrIS3tra0g7+KvABUJC0g5rrJdRcbLpImtleRzYashc1P2OSXwbebDVykX3gW+Ab1AHqhuQ3pe6AJlFMO0CoPROHDcio5I8DL1A9C8dQbmod+APYAK4DvwjQnsDdErgyVTfTEaCG1GFYGHXG7TVSo2OkdvhlAflXoHSuNdfStFqaRhEi2kfdprrj6M5LAt0I8EDaaMdflPal48CB95hMr3Bt8h4jD0kyL5E0pN6dysZzW7N2AqjbmhdIZjJvufTOpE19x3g+9s1XJ/ck5tVbfdhu+rxDfLiSO+lFToCjZwrXyH2/0Lwv95z8B1jAqXmDnj4YAAAAAElFTkSuQmCC",jd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAIiklEQVRYhe2YW2yUxxmGn7W96zXGNnZsr2FJHQyYBHNIU1ttAqVUVjlJUAtxQyUXhKgQktUDdSUkuEDtBVJ9UQXRC0RJRblrq/SCIARpFImWQ8VBIZQinJpQYozNyWaxiw/rfXsx3+z+6xNOe9tPGv2nOTzzffPPvDMhSXwJC1nKAXIDV/9ellLAqF1T9o5A2Ry7J5A/Fbh3mUMh8qYJ5kHCQATID6QIkBcAHAVGgKFAStq33EB53/ao5Rm064i9g0CmqcDyrNICYCZQBJTYdaa9j1jelDUwCAwAz4F+ex61DhZauXzr1CDwDHhq1wFg2Do1KWAo0NsCAyoDKoGYXcuBWdZY1PKnzAsDQB/wBOg1yKTVN8vqmoHz6nOgC7gHdFrbCasrNRFgyMCj5qVXgDlANfAaMA/4ir2rMI+MtSHgEdAN9BjsiNVZYR0sNq8+AtqB69Z2MuDBcYA+pAXW0yoDWgTUWXrd8k1l+cBcSxjIIBlPB63G8uUB/8Z57znwAkgGAX1YC4BSK7QIWA7UWwoDJJNJzp49y4ULF2hvb6e7u5tEIkFhYSGVlZXMmzePhoYGNmzYQElJCVZv2tPt7e3s2bOHvr4+9u3bx/r16+PWjg/zQ9x4BEk+5UkqklQt6ZuSdkn6jaRbMhsYGFBbW5uWLVvmp5MpU3V1tVpbW9XV1aWgbdy4MZ2npqbGvx6W9DtJ35e0RFJREDBX0gxJcUnfkPQDScck3fGlz549q7q6ummBjU2xWEzvvfdeGvCtt95Kf6uoqAiyfyBpt6SvSZrlAUOSIpLKJS2X9D1Jv5Z025d69913FQqFJmy8rKxMS5YsUUNDg5YvX67Zs2dPCrpjxw6NjIxoxYoV6XdVVVVBwI8l/UTS1yWVesBcC+18SRsk/ULS33yJtra2CRtramrSiRMn1NXVpWQyKUlKpVJ6+vSpTp48qZ07dyo/P39cua1bt6q+vn4ywL9IapX0tqQyDxiRFDPq3ZL+JCklSadOnRrXwMKFC3X69GlNx65du6aVK1eOqyMYjTGAf50IsNC8t1FSm6TPJOn+/fuKxWJZFb/zzjvjBvx0bO/evQqHwxNG4mUe9MtYMZk5bwHA4cOH6enpSc9BixYt4uTJk5SVlflXfcBN4DFuapoHLPQfz58/z9WrVwmFQsTjceLxOHfv3uUlNlZcpFeMEtzsXg2QSCQ4duxYulQoFOLQoUNBuE7gvAE+x82b/VZHyblz52hsbCSZTL4MCGWrqUECq0gQsBi3ts4B+PDDD3n48GG61OrVq1mzZo1/fGZw54HbVmGV1bMAWPbRRx9NC24CwD7cajLiAXNwIS7ELW3lAGfOnMmqZPv27cHHvwM3gH8AnwH/wnn0C+AuwLZt25g/f/5L4cLhMNu2bfOPnbh1+xkZ9UMebvmKGmQEoLOzM11JQUEBK1eu9I/JAFAPTqnk4hTNY9xS1V5TU1N7+fJlOjo6SKXS+jPLJFFUVMTixYsxmJtW/inOi2nAXDI/C0BWeMvKyojFYv6xz1LCKhnCRSEBPMCFfBaQKi0tfb2+vn5qFzp7AnwCXAM+t45mAUJGfgMwOpoWtIRCWZ/89BB8TuJ+lG5cNEatkXYgjtN+BYG2ktaxBE4U3AP+iRsud3EeHCTwk6Ss0IhvtaKiIk3Q19dHb28vhYWF4H6mYtxwiBrQIE4aPTHgIVzoO3E/TzlOV4YD3/stj9eMPj2xzg4HAYMSPQnkxePxNGB/fz+XLl1iy5Yt4HTeq+aZTtyA9h18Yb33G6aRQBqyDiUNLihmH1q54LAZ9ZHKISPRn1loaGxsJGjHjx8PPi6xtAgnNufgVHcRmf1J2DpTiJsjvYout3c5gQ49Ns89s3fpOdB70I+Hx7iBXrV27VqKi4tJJBKAm3auXLmCDfpy4G3rZSHur/aSPg83BCpx24MFuNUlbnkHcGMubEDdxpG0lBn8AcBBsgfsVysqKti6dStHjhwBYGRkhJaWFs6dO0ckEgGYj9v0xIA71rkha7jUgBYCb5hHGRoaIj8/f4Z5s8jafUpmN/diLBwAkmZKWiipSdKvJN2VpI6ODhUVFWUt7Js2bdLAwMBYLdAt6VNJlyV9IumLsRkOHjyo2tparVixQrdvp2Xmn00YrJI0R05VBRV+GjAiqcoUxA8lnfI1HD16dJz6WLVqla5fvz4tFdPZ2anm5uas8s3Nzf7zp5J+LmmNpFcl5U8GmCupWFKtpO9K+qWkG76W3bt3j4OMRqNqaWnRhQsXNDQ0lAWVTCZ169YtHThwQFVVVePKtrS0+Kw3pgsYso+Vkuol7ZD0W0ldvsHW1tZJZXxtba0aGxvV1NSkdevWaenSpYpGoxPmXb9+vXp6ejzgx5J+ZiGeLSk8GaD34ky5Hd23JP1I0h8kPQmGu7y8/L/aNEUiEe3fv1/Dw8Pp6Es6KqlZ0puSXpHbVU4KiPVglqQFkr4j6aeSfi/pvq/13r172rVrlyorK6cFFo1GtXnzZl25ciU4Ch5J+qOkH0v6tqTXzDk5EwGGlNFjOWQOd8px4vUN4E3cpn2pz/jgwQPef/99Ll68yJ07d+jt7WVwcJBIJEJJSQlz586loaGBTZs2UVdXF5w0OoDLwFWcbPsct6r04+bRLHEYCoWyAD1kBDfHleHmsxrccccS3NFHNV/eenBy6iZwCycMOnHz5wBuDh2nyyY6H0zhFmoF7vtxk+l9q3ieQfrDo8msF7cy3cN56g7ZWnKcep7IxnrQmz+wHKu2K3EKJWbPpWSUTQ4ZtRJc23sC6ZGB9ZM52JwcboIQjzUvZvNxYfeHlyVkZFcBbux6wKA6ShjoM5yM8uH0Xpuy8ekAQuZc2W8P8nEei9p9mMmPgAfJHO0O27e0lHppw9MEDJo//A4eoE91iB48SJ80lFMB/t/+V/sPGZfTmtMFR4EAAAAASUVORK5CYII=",Vd="change",Bd="cursor",Fd="ruler",Wd="scale",Hd="select",Gd="clearSelect",Yd="textEdit",$d="textChange",Xd="contextMenu",zs="selectInGroup",Is={CURSOR:Bd,CHANGE:Vd,RULER:Fd,SCALE:Wd,SELECT:Hd,CLEAR_SELECT:Gd,TEXT_EDIT:Yd,TEXT_CHANGE:$d,CONTEXT_MENU:Xd,SELECT_IN_GROUP:zs,SNAP_TO_GRID:zs},de={};Object.keys(Is).forEach(e=>{Object.defineProperty(de,e,{value:Is[e],writable:!1})});var Pi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Le=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},nt,Oi,Ao,$n,Ci,hn,ul,hl,jt,As,Ts;class Ud{constructor(t,n){nt.add(this),Oi.set(this,void 0),Ao.set(this,void 0),$n.set(this,null),Ci.set(this,null),hn.set(this,{auto:Od,"drag-default":kd,"drag-active":_d,"rotate-0":dl,rotate:jd}),Pi(this,Ao,t,"f"),Pi(this,Oi,n.eventHub,"f"),Le(this,nt,"m",ul).call(this),Le(this,nt,"m",hl).call(this)}}Oi=new WeakMap,Ao=new WeakMap,$n=new WeakMap,Ci=new WeakMap,hn=new WeakMap,nt=new WeakSet,ul=function(){const t=Le(this,Oi,"f");Le(this,nt,"m",jt).call(this,"default"),t.on(de.CURSOR,n=>{var o;n.type==="over-element"||!n.type?Le(this,nt,"m",jt).call(this,"auto"):n.type==="resize-rotate"?Le(this,nt,"m",jt).call(this,"rotate"):typeof n.type=="string"&&(!((o=n.type)===null||o===void 0)&&o.startsWith("resize-"))?Le(this,nt,"m",As).call(this,n):n.type==="drag-default"?Le(this,nt,"m",jt).call(this,"drag-default"):n.type==="drag-active"?Le(this,nt,"m",jt).call(this,"drag-active"):Le(this,nt,"m",jt).call(this,"auto")})},hl=function(){Fi(dl).then(t=>{Pi(this,Ci,t,"f")}).catch(t=>{console.error(t)})},jt=function(t){if(Le(this,$n,"f")===t)return;Pi(this,$n,t,"f");const n=Le(this,hn,"f")[Le(this,$n,"f")]||Le(this,hn,"f").auto;let o=0,i=0;(t.startsWith("rotate-")&&Le(this,hn,"f")[Le(this,$n,"f")]||t==="rotate")&&(o=10,i=10),t==="default"?Le(this,Ao,"f").style.cursor="default":Le(this,Ao,"f").style.cursor=`image-set(url(${n})2x) ${o} ${i}, auto`},As=function(t){var n;let o=0;t.type==="resize-top"?o+=0:t.type==="resize-top-right"?o+=45:t.type==="resize-right"?o+=90:t.type==="resize-bottom-right"?o+=135:t.type==="resize-bottom"?o+=180:t.type==="resize-bottom-left"?o+=225:t.type==="resize-left"?o+=270:t.type==="resize-top-left"&&(o+=315),o+=ct(((n=t==null?void 0:t.element)===null||n===void 0?void 0:n.angle)||0),Array.isArray(t.groupQueue)&&t.groupQueue.length>0&&t.groupQueue.forEach(a=>{o+=ct(a.angle||0)}),o=ct(o);const i=Le(this,nt,"m",Ts).call(this,o);Le(this,nt,"m",jt).call(this,i)},Ts=function(t){const n=`rotate-${t}`;if(!Le(this,hn,"f")[n]){const o=Le(this,Ci,"f");if(o){const i=document.createElement("canvas"),a=o.width,s=o.height,c={x:a/2,y:s/2};i.width=a,i.height=s;const d=i.getContext("2d"),l=Rt(t);d.translate(c.x,c.y),d.rotate(l),d.translate(-c.x,-c.y),d.drawImage(o,0,0,a,s),d.translate(c.x,c.y),d.rotate(-l),d.translate(-c.x,-c.y);const h=i.toDataURL("image/png");Le(this,hn,"f")[n]=h}}return n};const Je="SELECT",xe=Symbol(`${Je}_actionType`),Vt=Symbol(`${Je}_resizeType`),io=Symbol(`${Je}_areaStart`),Vo=Symbol(`${Je}_areaEnd`),Mt=Symbol(`${Je}_hoverElement`),ao=Symbol(`${Je}_hoverElementVertexes`),pt=Symbol(`${Je}_selectedElementList`),Zd=Symbol(`${Je}_selectedElementListVertexes`),nn=Symbol(`${Je}_selectedElementController`),An=Symbol(`${Je}_selectedElementPosition`),Qe=Symbol(`${Je}_groupQueue`),oa=Symbol(`${Je}_groupQueueVertexesList`),Bo=Symbol(`${Je}_isMoving`),Ns=Symbol(`${Je}_enableSelectInGroup`),Fo=Symbol(`${Je}_enableSnapToGrid`),fl=2,Qd=4,ml=1,Jd=10,Kd=20,qd=22,e3="#1973ba",t3="#1976d21c",n3="#5b5959b5",o3="#f7276e",i3={activeColor:e3,activeAreaColor:t3,lockedColor:n3,referenceColor:o3};function Ut(e,t,n){const{borderColor:o,borderWidth:i,background:a,lineDash:s}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.fillStyle=a,e.setLineDash(s),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.lineTo(t[0].x,t[0].y),e.closePath(),e.stroke(),e.fill()}function Ls(e,t,n,o){const{borderColor:i,borderWidth:a,lineDash:s}=o;e.setLineDash([]),e.lineWidth=a,e.strokeStyle=i,e.setLineDash(s),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath(),e.stroke()}function a3(e,t,n){const{size:o,borderColor:i,borderWidth:a,background:s}=n,c=t,d=o/2,l=d,h=d;if(l>=0&&h>=0){if(typeof a=="number"&&a>0){const u=a/2+l,f=a/2+h;e.beginPath(),e.strokeStyle=i,e.lineWidth=a,e.circle(c.x,c.y,u,f,0,0,2*Math.PI),e.closePath(),e.stroke()}e.beginPath(),e.fillStyle=s,e.circle(c.x,c.y,l,h,0,0,2*Math.PI),e.closePath(),e.fill()}}function zt(e,t,n){const{borderColor:o,borderWidth:i,lineDash:a}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.setLineDash(a),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[2].x,t[2].y),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(t[1].x,t[1].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Ds(e,t,n){const{size:o,borderColor:i,borderWidth:a,lineDash:s}=n,c=t.x-o/2,d=t.x+o/2,l=t.y-o/2,h=t.y+o/2;zt(e,[{x:c,y:l},{x:d,y:l},{x:d,y:h},{x:c,y:h}],{borderColor:i,borderWidth:a,lineDash:s})}function Rs(e,t,n){if(!t)return;const{style:o}=n,{activeColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Ut(e,Ye(t,n),a)}function Ps(e,t,n){if(!t)return;const{style:o}=n,{lockedColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Ut(e,Ye(t,n),a);const{controller:s}=n;if(s){const{topLeft:c,topRight:d,bottomLeft:l,bottomRight:h,topMiddle:u,bottomMiddle:f,leftMiddle:m,rightMiddle:v}=s,g=Object.assign(Object.assign({},a),{borderWidth:1,background:i});zt(e,Ye(u.vertexes,n),g),zt(e,Ye(f.vertexes,n),g),zt(e,Ye(m.vertexes,n),g),zt(e,Ye(v.vertexes,n),g),zt(e,Ye(c.vertexes,n),g),zt(e,Ye(d.vertexes,n),g),zt(e,Ye(l.vertexes,n),g),zt(e,Ye(h.vertexes,n),g)}}function Os(e,t,n){if(!t)return;const{hideControllers:o,style:i,rotateControllerPattern:a,viewSizeInfo:s}=n,{devicePixelRatio:c=1}=s,{activeColor:d}=i,{elementWrapper:l,topLeft:h,topRight:u,bottomLeft:f,bottomRight:m,rotate:v}=t,g={borderColor:d,borderWidth:fl,background:"transparent",lineDash:[]},p=Object.assign(Object.assign({},g),{borderWidth:Qd,background:"#FFFFFF"});if(Ut(e,Ye(l,n),g),!o){Ut(e,Ye(h.vertexes,n),p),Ut(e,Ye(u.vertexes,n),p),Ut(e,Ye(f.vertexes,n),p),Ut(e,Ye(m.vertexes,n),p),a3(e,Ee(v.center,n),Object.assign(Object.assign({},p),{size:v.size,borderWidth:0}));const w=Ee(v.center,n);e.drawImage(a.canvas,0,0,a.canvas.width/c,a.canvas.height/c,w.x-v.size/2,w.y-v.size/2,v.size,v.size)}}function s3(e,t){const{start:n,end:o,style:i}=t,{activeColor:a,activeAreaColor:s}=i;e.setLineDash([]),e.lineWidth=ml,e.strokeStyle=a,e.fillStyle=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,n.y),e.lineTo(o.x,o.y),e.lineTo(n.x,o.y),e.closePath(),e.stroke(),e.fill()}function r3(e,t){const{areaSize:n,style:o}=t,{activeColor:i,activeAreaColor:a}=o,{x:s,y:c,w:d,h:l}=n;e.setLineDash([]),e.lineWidth=ml,e.strokeStyle=i,e.fillStyle=a,e.beginPath(),e.moveTo(s,c),e.lineTo(s+d,c),e.lineTo(s+d,c+l),e.lineTo(s,c+l),e.closePath(),e.stroke(),e.fill()}function l3(e,t,n){const{style:o}=n,{activeColor:i}=o;for(let a=0;a<t.length;a++){const s=t[a],c={borderColor:i,borderWidth:fl,background:"transparent",lineDash:[4,4]};Ut(e,Ye(s,n),c)}}function ks(e,t){const{xLines:n,yLines:o,style:i}=t,{referenceColor:a}=i,s={borderColor:a,borderWidth:1,lineDash:[]},c=Object.assign(Object.assign({},s),{size:6});n&&n.forEach(d=>{d.forEach((l,h)=>{Ds(e,l,c),d[h+1]&&Ls(e,d[h],d[h+1],s)})}),o&&o.forEach(d=>{d.forEach((l,h)=>{Ds(e,l,c),d[h+1]&&Ls(e,d[h],d[h+1],s)})})}function ve(e){return e*Math.PI/180}function Wo(e,t){return Math.sqrt(e*e+t*t)}function le(e,t){return t>0?Math.abs(e):0-Math.abs(e)}function Ca(e,t){const{ctx:n,viewScaleInfo:o,vertexes:i}=t,a=Ee(i[0],{viewScaleInfo:o}),s=Ee(i[1],{viewScaleInfo:o}),c=Ee(i[2],{viewScaleInfo:o}),d=Ee(i[3],{viewScaleInfo:o});return n.beginPath(),n.moveTo(a.x,a.y),n.lineTo(s.x,s.y),n.lineTo(c.x,c.y),n.lineTo(d.x,d.y),n.lineTo(a.x,a.y),n.closePath(),!!n.isPointInPath(e.x,e.y)}function ia(e,t){const{ctx:n,viewScaleInfo:o,viewSizeInfo:i,groupQueue:a}=t;if(!a||!((a==null?void 0:a.length)>0))return!1;const s=_a(a),c=s[s.length-1];return c?Ca(e,{ctx:n,vertexes:c,viewScaleInfo:o,viewSizeInfo:i}):!1}function on(e,t){var n,o,i;const a={type:null,elements:[],elementVertexesList:[],groupQueue:[],groupQueueVertexesList:[]},{ctx:s,data:c,calculator:d,selectedElements:l,viewScaleInfo:h,viewSizeInfo:u,areaSize:f,groupQueue:m,selectedElementController:v}=t;if(v){const{left:g,right:p,top:w,bottom:C,topLeft:M,topRight:y,bottomLeft:k,bottomRight:S,rotate:E}=v,L=[g,p,w,C,M,y,k,S,E];for(let N=0;N<L.length;N++){const b=L[N];if(Ca(e,{ctx:s,vertexes:b.vertexes,viewSizeInfo:u,viewScaleInfo:h})){a.type=`resize-${b.type}`,l&&(l==null?void 0:l.length)>0&&(a.groupQueue=m||[],a.elements=[l[0]]);break}}}if(m&&Array.isArray(m)&&m.length>0){const g=m[m.length-1];if(!((n=g==null?void 0:g.detail)===null||n===void 0)&&n.children&&Array.isArray((o=g==null?void 0:g.detail)===null||o===void 0?void 0:o.children))for(let p=g.detail.children.length-1;p>=0;p--){const w=g.detail.children[p],C=No(w,{groupQueue:m});if(C&&Ca(e,{ctx:s,vertexes:C,viewScaleInfo:h,viewSizeInfo:u}))return a.type||(a.type="over-element"),a.groupQueue=m,a.elements=[w],a}return a}if(a.type!==null)return a;if(f&&Array.isArray(l)&&(l==null?void 0:l.length)>1){const{x:g,y:p,w,h:C}=f;if(e.x>=g&&e.x<=g+w&&e.y>=p&&e.y<=p+C)return a.type="list-area",a.elements=l,a}if(c){const{index:g,element:p}=d.getPointElement(e,{data:c,viewScaleInfo:h,viewSizeInfo:u});if(g>=0&&p&&((i=p==null?void 0:p.operations)===null||i===void 0?void 0:i.invisible)!==!0)return a.elements=[p],a.type="over-element",a}return a}function c3(e,t){var n,o,i,a,s,c,d,l,h;let{x:u,y:f,w:m,h:v,angle:g=0}=e;const p=dt({x:u,y:f,w:m,h:v,angle:g});g=ct(g);const w=Rt(g),C=!!(!((n=e==null?void 0:e.operations)===null||n===void 0)&&n.limitRatio),{start:M,end:y,resizeType:k,scale:S}=t;let E=Object.assign({},M),L=Object.assign({},y),N={x:E.x,y:p.y},b={x:L.x,y:p.y},j=Object.assign({},N),_=Object.assign({},b),V={x:p.x,y:E.y},X={x:p.x,y:L.y},B=Object.assign({},V),R=Object.assign({},X),O=(_.x-j.x)/S,P=(_.y-j.y)/S,z=Wo(O,P),G=(R.x-B.x)/S,F=(R.y-B.y)/S,A=Wo(G,F);(g>0||g<0)&&(E=Ne(p,M,0-w),L=Ne(p,y,0-w),N={x:E.x,y:p.y},b={x:L.x,y:p.y},j=Ne(p,N,w),_=Ne(p,b,w),V={x:p.x,y:E.y},X={x:p.x,y:L.y},B=Ne(p,V,w),R=Ne(p,X,w),O=(_.x-j.x)/S,P=(_.y-j.y)/S,z=Wo(O,P),z=le(z,P),G=(R.x-B.x)/S,F=(R.y-B.y)/S,A=Wo(G,F),A=le(A,F));let Z=(y.x-M.x)/S,Y=(y.y-M.y)/S;if(C===!0){if(["resize-top","resize-bottom","resize-left","resize-right"].includes(k)){const x=Math.max(Math.abs(Z),Math.abs(Y));Z=(Z>=0?1:-1)*x,Y=(Y>=0?1:-1)*x/e.w*e.h;const T=Math.max(Math.abs(G),Math.abs(F));G=(G>=0?1:-1)*T,F=(F>=0?1:-1)*T/e.w*e.h;const D=Math.max(Math.abs(O),Math.abs(P));O=(O>=0?1:-1)*D,P=(P>=0?1:-1)*D/e.w*e.h}else if(["resize-top-left","resize-top-right","resize-bottom-left","resize-bottom-right"].includes(k)){{const x=Math.abs(Z);Z=(Z>=0?1:-1)*x;const T=x/e.w*e.h;k==="resize-top-left"||k==="resize-bottom-right"?Y=Z>0?T:-T:(k==="resize-top-right"||k==="resize-bottom-left")&&(Y=Z>0?-T:T)}z=Math.abs(z),A=z/e.w*e.h}}switch(k){case"resize-top":{if(g===0)v-Y>0&&(f+=Y,v-=Y,((o=e.operations)===null||o===void 0?void 0:o.limitRatio)===!0&&(u+=Y/e.h*e.w/2,m-=Y/e.h*e.w));else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){A=0-le(A,F);const D=ve(g),W=A/2;x=x+W*Math.sin(D),T=T-W*Math.cos(D)}else if(g<180){A=le(A,G);const D=ve(g-90),W=A/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D)}else if(g<270){A=le(A,F);const D=ve(g-180),W=A/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D)}else if(g<360){A=0-le(A,G);const D=ve(g-270),W=A/2;x=x-W*Math.cos(D),T=T-W*Math.sin(D)}v+A>0&&(((i=e.operations)===null||i===void 0?void 0:i.limitRatio)===!0&&(m=m+A/e.h*e.w),v=v+A,u=x-m/2,f=T-v/2)}break}case"resize-bottom":{if(g===0)e.h+Y>0&&(v+=Y,((a=e.operations)===null||a===void 0?void 0:a.limitRatio)===!0&&(u-=Y/e.h*e.w/2,m+=Y/e.h*e.w));else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){A=le(A,F);const D=ve(g),W=A/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D)}else if(g<180){A=0-le(A,G);const D=ve(g-90),W=A/2;x=x-W*Math.cos(D),T=T-W*Math.sin(D)}else if(g<270){A=le(A,G);const D=ve(g-180),W=A/2;x=x+W*Math.sin(D),T=T-W*Math.cos(D)}else if(g<360){A=le(A,G);const D=ve(g-270),W=A/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D)}v+A>0&&(((s=e.operations)===null||s===void 0?void 0:s.limitRatio)===!0&&(m=m+A/e.h*e.w),v=v+A,u=x-m/2,f=T-v/2)}break}case"resize-left":{if(g===0)e.w-Z>0&&(u+=Z,m-=Z,((c=e.operations)===null||c===void 0?void 0:c.limitRatio)===!0&&(v-=Z/e.w*e.h,f+=Z/e.w*e.h/2));else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){z=0-le(z,O);const D=ve(g),W=z/2;x=x-W*Math.cos(D),T=T-W*Math.sin(D)}else if(g<180){z=le(z,O);const D=ve(g-90),W=z/2;x=x+W*Math.sin(D),T=T-W*Math.cos(D)}else if(g<270){z=le(z,P);const D=ve(g-180),W=z/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D)}else if(g<360){z=le(z,P);const D=ve(g-270),W=z/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D)}m+z>0&&(((d=e.operations)===null||d===void 0?void 0:d.limitRatio)===!0&&(v=v+z/e.w*e.h),m=m+z,u=x-m/2,f=T-v/2)}break}case"resize-right":{if(g===0)e.w+Z>0&&(m+=Z,((l=e.operations)===null||l===void 0?void 0:l.limitRatio)===!0&&(f-=Z*e.h/e.w/2,v+=Z*e.h/e.w));else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){z=le(z,P);const D=ve(g),W=z/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D)}else if(g<180){z=le(z,Y);const D=ve(g-90),W=z/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D)}else if(g<270){z=le(z,Y);const D=ve(g-180),W=z/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D),z=0-z}else if(g<360){z=le(z,Z);const D=ve(g-270),W=z/2;x=x+W*Math.sin(D),T=T-W*Math.cos(D)}m+z>0&&(((h=e.operations)===null||h===void 0?void 0:h.limitRatio)===!0&&(v=v+z/e.w*e.h),m=m+z,u=x-m/2,f=T-v/2)}break}case"resize-top-left":{if(g===0)m-Z>0&&(u+=Z,m-=Z),v-Y>0&&(f+=Y,v-=Y);else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){A=0-le(A,F),z=0-le(z,C?0-A:O);const D=A/2;x=x+D*Math.sin(w),T=T-D*Math.cos(w);const W=z/2;x=x-W*Math.cos(w),T=T-W*Math.sin(w)}else if(g<180){A=le(A,G),z=le(z,C?A:O);const D=ve(g-90),W=A/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D);const U=z/2;x=x+U*Math.sin(D),T=T-U*Math.cos(D)}else if(g<270){A=le(A,F),z=le(z,C?A:P);const D=ve(g-180),W=A/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D);const U=z/2;x=x+U*Math.cos(D),T=T+U*Math.sin(D)}else if(g<360){A=0-le(A,G),z=le(z,C?A:P);const D=ve(g-270),W=A/2;x=x-W*Math.cos(D),T=T-W*Math.sin(D);const U=z/2;x=x-U*Math.sin(D),T=T+U*Math.cos(D)}v+A>0&&(v=v+A),m+z>0&&(m=m+z),u=x-m/2,f=T-v/2}break}case"resize-top-right":{if(g===0)m+Z>0&&(m+=Z),v-Y>0&&(f+=Y,v-=Y);else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){A=0-le(A,F),z=le(z,C?A:P);const D=ve(g),W=A/2;x=x+W*Math.sin(D),T=T-W*Math.cos(D);const U=z/2;x=x+U*Math.cos(D),T=T+U*Math.sin(D)}else if(g<180){A=le(A,G),z=le(z,C?A:P);const D=ve(g-90),W=A/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D);const U=z/2;x=x-U*Math.sin(D),T=T+U*Math.cos(D)}else if(g<270){const D=ve(g-180);A=le(A,F),z=le(z,C?A:0-O);const W=A/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D);const U=z/2;x=x-U*Math.cos(D),T=T-U*Math.sin(D)}else if(g<360){A=0-le(A,G),z=le(z,C?A:O);const D=ve(g-270),W=A/2;x=x-W*Math.cos(D),T=T-W*Math.sin(D);const U=z/2;x=x+U*Math.sin(D),T=T-U*Math.cos(D)}v+A>0&&(v=v+A),m+z>0&&(m=m+z),u=x-m/2,f=T-v/2}break}case"resize-bottom-left":{if(g===0)e.h+Y>0&&(v+=Y),e.w-Z>0&&(u+=Z,m-=Z);else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){A=le(A,F),z=0-le(z,C?0-A:O);const D=ve(g),W=A/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D);const U=z/2;x=x-U*Math.cos(D),T=T-U*Math.sin(D)}else if(g<180){A=0-le(A,G),z=le(z,C?A:O);const D=ve(g-90),W=A/2;x=x-W*Math.cos(D),T=T-W*Math.sin(D);const U=z/2;x=x+U*Math.sin(D),T=T-U*Math.cos(D)}else if(g<270){A=le(A,G),z=le(z,C?A:P);const D=ve(g-180),W=A/2;x=x+W*Math.sin(D),T=T-W*Math.cos(D);const U=z/2;x=x+U*Math.cos(D),T=T+U*Math.sin(D)}else if(g<360){A=le(A,G),z=le(z,C?A:P);const D=ve(g-270),W=A/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D);const U=z/2;x=x-U*Math.sin(D),T=T+U*Math.cos(D)}v+A>0&&(v=v+A),m+z>0&&(m=m+z),u=x-m/2,f=T-v/2}break}case"resize-bottom-right":{if(g===0)e.h+Y>0&&(v+=Y),e.w+Z>0&&(m+=Z);else if(g>0||g<0){let x=p.x,T=p.y;if(g<90){A=le(A,F),z=le(z,C?A:P);const D=ve(g),W=A/2;x=x-W*Math.sin(D),T=T+W*Math.cos(D);const U=z/2;x=x+U*Math.cos(D),T=T+U*Math.sin(D)}else if(g<180){A=0-le(A,G),z=le(z,C?A:Y);const D=ve(g-90),W=A/2;x=x-W*Math.cos(D),T=T-W*Math.sin(D);const U=z/2;x=x-U*Math.sin(D),T=T+U*Math.cos(D)}else if(g<270){A=le(A,G),z=le(z,C?A:0-P);const D=ve(g-180),W=A/2;x=x+W*Math.sin(D),T=T-W*Math.cos(D);const U=z/2;x=x-U*Math.cos(D),T=T-U*Math.sin(D)}else if(g<360){A=le(A,G),z=le(z,C?A:O);const D=ve(g-270),W=A/2;x=x+W*Math.cos(D),T=T+W*Math.sin(D);const U=z/2;x=x+U*Math.sin(D),T=T-U*Math.cos(D)}v+A>0&&(v=v+A),m+z>0&&(m=m+z),u=x-m/2,f=T-v/2}break}}return{x:u,y:f,w:m,h:v,angle:e.angle}}function d3(e,t){const{x:n,y:o,w:i,h:a,angle:s=0}=e,{center:c,start:d,end:l,viewScaleInfo:h}=t,u=Ee(c,{viewScaleInfo:h}),f=ct(s),m=_0(u,d,l),v=ct(f+k0(m));return{x:n,y:o,w:i,h:a,angle:v}}function u3(e,t){var n;const o=[],i=[],a=[],{viewScaleInfo:s,viewSizeInfo:c,start:d,end:l}=t;if(!(Array.isArray(e.elements)&&d&&l))return{indexes:o,uuids:i,elements:a};const h=Math.min(d.x,l.x),u=Math.max(d.x,l.x),f=Math.min(d.y,l.y),m=Math.max(d.y,l.y);for(let v=0;v<e.elements.length;v++){const g=e.elements[v];if(((n=g==null?void 0:g.operations)===null||n===void 0?void 0:n.locked)===!0)continue;const p=Xe(g,{viewScaleInfo:s}),w=dt(p);if(w.x>=h&&w.x<=u&&w.y>=f&&w.y<=m&&(o.push(v),i.push(g.uuid),a.push(g),p.angle&&(p.angle>0||p.angle<0))){const C=to(p);if(C.length===4){const M=[C[0].x,C[1].x,C[2].x,C[3].x],y=[C[0].y,C[1].y,C[2].y,C[3].y];p.x=Math.min(...M),p.y=Math.min(...y),p.w=Math.abs(Math.max(...M)-Math.min(...M)),p.h=Math.abs(Math.max(...y)-Math.min(...y))}}}return{indexes:o,uuids:i,elements:a}}function Ho(e,t){var n;if(!Array.isArray(e))return null;const o={x:0,y:0,w:0,h:0},{viewScaleInfo:i}=t;let a=null;for(let s=0;s<e.length;s++){const c=e[s];if(!((n=c==null?void 0:c.operations)===null||n===void 0)&&n.invisible)continue;const d=Xe(c,{viewScaleInfo:i});if(d.angle&&(d.angle>0||d.angle<0)){const l=to(d);if(l.length===4){const h=[l[0].x,l[1].x,l[2].x,l[3].x],u=[l[0].y,l[1].y,l[2].y,l[3].y];d.x=Math.min(...h),d.y=Math.min(...u),d.w=Math.abs(Math.max(...h)-Math.min(...h)),d.h=Math.abs(Math.max(...u)-Math.min(...u))}}if(a){const l=Math.min(d.x,o.x),h=Math.min(d.y,o.y),u=Math.max(d.x+d.w,o.x+o.w),f=Math.max(d.y+d.h,o.y+o.h);o.x=l,o.y=h,o.w=Math.abs(u-l),o.h=Math.abs(f-h)}else o.x=d.x,o.y=d.y,o.w=d.w,o.h=d.h;a=d}return o}function h3(e,t){var n;if((t==null?void 0:t.type)==="group"&&Array.isArray((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.children))for(let o=0;o<t.detail.children.length;o++){const i=t.detail.children[o];if(e.uuid===i.uuid)return!0}return!1}function f3(e,t,n){let o=t.x-e.x,i=t.y-e.y;const a=[];if(n.forEach(s=>{const{x:c,y:d,w:l,h,angle:u=0}=s;a.push({x:c,y:d,w:l,h,angle:0-u})}),(n==null?void 0:n.length)>0){const s=Li(e,a),c=Li(t,a);o=c.x-s.x,i=c.y-s.y}return{moveX:o,moveY:i}}const _s=2;function js(e){return{minX:e.topLeft.x,minY:e.topLeft.y,maxX:e.bottomRight.x,maxY:e.bottomRight.y,midX:e.center.x,midY:e.center.y}}const Tn=(e,t)=>{if(e.length===0)throw null;if(e.length===1)return e[0];let n=0,o=e.length-1;for(;n<=o;){const i=Math.floor((n+o)/2);if(e[i]===t)return e[i];e[i]<t?n=i+1:o=i-1}return n>=e.length?e[o]:o<0?e[n]:Math.abs(e[o]-t)<=Math.abs(e[n]-t)?e[o]:e[n]},it=(e,t)=>Math.abs(e-t)<1e-5;function aa(e,t){var n,o;const{data:i,groupQueue:a,calculator:s,viewScaleInfo:c,viewSizeInfo:d}=t;let l=i.elements||[];(a==null?void 0:a.length)>0&&(l=((o=(n=a[a.length-1])===null||n===void 0?void 0:n.detail)===null||o===void 0?void 0:o.children)||[]);const h=[];l.forEach(R=>{if(R.uuid!==e){const O=s.calcViewRectInfoFromRange(R.uuid,{checkVisible:!0,viewScaleInfo:c,viewSizeInfo:d});O&&h.push(O)}});const u=s.calcViewRectInfoFromRange(e,{viewScaleInfo:c,viewSizeInfo:d});if(!u)return null;const f={},m={},v={},g={},p=[],w=[];let C=[],M=[];const y=js(u);f[y.minX]=[y.minY,y.midY,y.maxY],f[y.midX]=[y.minY,y.midY,y.maxY],f[y.maxX]=[y.minY,y.midY,y.maxY],m[y.minY]=[y.minX,y.midX,y.maxX],m[y.midY]=[y.minX,y.midX,y.maxX],m[y.maxY]=[y.minX,y.midX,y.maxX],h.forEach(R=>{const O=js(R);v[O.minX]||(v[O.minX]=[]),v[O.midX]||(v[O.midX]=[]),v[O.maxX]||(v[O.maxX]=[]),g[O.minY]||(g[O.minY]=[]),g[O.midY]||(g[O.midY]=[]),g[O.maxY]||(g[O.maxY]=[]),v[O.minX]=[O.minY,O.midY,O.maxY],v[O.midX]=[O.minY,O.midY,O.maxY],v[O.maxX]=[O.minY,O.midY,O.maxY],C.push(O.minX),C.push(O.midX),C.push(O.maxX),g[O.minY]=[O.minX,O.midX,O.maxX],g[O.midY]=[O.minX,O.midX,O.maxX],g[O.maxY]=[O.minX,O.midX,O.maxX],M.push(O.minY),M.push(O.midY),M.push(O.maxY)}),C=C.sort((R,O)=>R-O),M=M.sort((R,O)=>R-O);let k=null,S=null,E=null,L=null,N=null,b=null,j=null,_=null;if(C.length>0){E=Tn(C,y.minX),L=Tn(C,y.midX),N=Tn(C,y.maxX);const R=Math.abs(E-y.minX),O=Math.abs(L-y.midX),P=Math.abs(N-y.maxX),z=Math.min(R,O,P);z<=_s/c.scale&&(it(z,R)?k=E-y.minX:it(z,O)?k=L-y.midX:it(z,P)&&(k=N-y.maxX))}if(M.length>0){b=Tn(M,y.minY),j=Tn(M,y.midY),_=Tn(M,y.maxY);const R=Math.abs(b-y.minY),O=Math.abs(j-y.midY),P=Math.abs(_-y.maxY),z=Math.min(R,O,P);z<=_s/c.scale&&(it(z,R)?S=b-y.minY:it(z,O)?S=j-y.midY:it(z,P)&&(S=_-y.maxY))}const V=Object.assign({},y);if(k!==null&&(V.minX+=k,V.midX+=k,V.maxX+=k),S!==null&&(V.minY+=S,V.midY+=S,V.maxY+=S),ze.x(k)&&k!==null&&E!==null&&L!==null&&N!==null){if(it(k,E-y.minX)){const R={x:E,yList:[]};R.yList.push(V.minY),R.yList.push(V.maxY),R.yList.push(...(g==null?void 0:g[E])||[]),p.push(R)}if(it(k,L-y.minX)){const R={x:L,yList:[]};R.yList.push(V.minY),R.yList.push(V.maxY),R.yList.push(...(g==null?void 0:g[L])||[]),p.push(R)}if(it(k,N-y.minX)){const R={x:N,yList:[]};R.yList.push(V.minY),R.yList.push(V.maxY),R.yList.push(...(g==null?void 0:g[N])||[]),p.push(R)}}if(ze.y(S)&&S!==null&&b!==null&&j!==null&&_!==null){if(it(S,b-y.minY)){const R={y:b,xList:[]};R.xList.push(V.minX),R.xList.push(V.maxX),R.xList.push(...(v==null?void 0:v[b])||[]),w.push(R)}if(it(S,j-y.midY)){const R={y:j,xList:[]};R.xList.push(V.minX),R.xList.push(V.maxX),R.xList.push(...(v==null?void 0:v[b])||[]),w.push(R)}if(it(S,_-y.maxY)){const R={y:_,xList:[]};R.xList.push(V.minX),R.xList.push(V.maxX),R.xList.push(...(v==null?void 0:v[_])||[]),w.push(R)}}const X=[];(p==null?void 0:p.length)>0&&p.forEach((R,O)=>{X.push([]),R.yList.forEach(P=>{X[O].push({x:R.x,y:P})})});const B=[];return(w==null?void 0:w.length)>0&&w.forEach((R,O)=>{B.push([]),R.xList.forEach(P=>{B[O].push({x:P,y:R.y})})}),{offsetX:k,offsetY:S,yLines:X,xLines:B}}const Oo="LAYOUT_SELECT",an=Symbol(`${Oo}_layoutActionType`),Go=Symbol(`${Oo}_layoutControlType`),Yo=Symbol(`${Oo}_layoutController`),Nn=Symbol(`${Oo}_layoutIsHover`),It=Symbol(`${Oo}_layoutIsSelected`),so=10,m3={activeColor:"#b331c9"};function $o(e,t,n){const{activeColor:o}=n;e.setLineDash([]),e.fillStyle="#FFFFFF",e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.fill(),e.strokeStyle=o,e.lineWidth=2,e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Xo(e,t){const{start:n,end:o,style:i}=t,{activeColor:a}=i,s=2,c=a;e.setLineDash([]),e.strokeStyle=c,e.lineWidth=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,o.y),e.closePath(),e.stroke()}function g3(e,t){const{controller:n,style:o}=t,{topLeft:i,topRight:a,bottomLeft:s,bottomRight:c,topMiddle:d,rightMiddle:l,bottomMiddle:h,leftMiddle:u}=n;Xo(e,{start:i.center,end:a.center,centerVertexes:d.vertexes,style:o}),Xo(e,{start:a.center,end:c.center,centerVertexes:l.vertexes,style:o}),Xo(e,{start:c.center,end:s.center,centerVertexes:h.vertexes,style:o}),Xo(e,{start:s.center,end:i.center,centerVertexes:u.vertexes,style:o}),$o(e,i.vertexes,o),$o(e,a.vertexes,o),$o(e,c.vertexes,o),$o(e,s.vertexes,o)}function v3(e,t){const{layoutSize:n,style:o}=t,{activeColor:i}=o,{x:a,y:s,w:c,h:d}=n;e.setLineDash([]),e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.moveTo(a,s),e.lineTo(a+c,s),e.lineTo(a+c,s+d),e.lineTo(a,s+d),e.lineTo(a,s),e.closePath(),e.stroke()}const Vs=(e,t)=>{const{sharer:n,boardContent:o,calculator:i,viewer:a,eventHub:s}=e,{overlayContext:c}=o,d=Object.assign(Object.assign({},m3),t),{activeColor:l}=d,h={activeColor:l};let u=null,f=null,m=null,v=null;const g=()=>{u=null,n.setSharedStorage(an,null),n.setSharedStorage(Go,null),n.setSharedStorage(Yo,null),n.setSharedStorage(Nn,null),n.setSharedStorage(It,null),f=null,m=null,v=null},p=()=>n.getSharedStorage(Mt)?(g(),!0):!1,w=()=>{const E=n.getSharedStorage(xe);return E&&E!=="area"?(g(),!0):!1},C=()=>{const E=n.getActiveStorage("data");if(E!=null&&E.layout){const{x:L,y:N,w:b,h:j}=E.layout;return{x:L,y:N,w:b,h:j}}return null},M=E=>{const L=C();if(L){const{x:N,y:b,w:j,h:_}=L,V=n.getActiveViewScaleInfo(),X=Xe({x:N-so/2,y:b-so/2,w:j+so,h:_+so},{viewScaleInfo:V});return G0(E,X)}return!1},y=()=>{const E=n.getActiveViewScaleInfo(),L=C();if(L){const N=ss(L,{viewScaleInfo:E,controllerSize:10});n.setSharedStorage(Yo,N)}else n.setSharedStorage(Yo,null)},k=E=>{const L=n.getActiveStorage("data"),N=n.getSharedStorage(Yo);if(N&&(L!=null&&L.layout)&&(E!=null&&E.point)){let b=null;if(N){const{topLeft:j,top:_,topRight:V,right:X,bottomRight:B,bottom:R,bottomLeft:O,left:P}=N,z=[j,_,V,X,B,R,O,P];for(let G=0;G<z.length;G++){const F=z[G];if(Br(E.point,F.vertexes)){b=`${F.type}`;break}}if(b)return n.setSharedStorage(Go,b),s.trigger(de.CLEAR_SELECT),b}}return null},S=E=>{v!==!0&&s.trigger(de.CURSOR,{type:E&&`resize-${E}`,groupQueue:[],element:C()})};return{name:"@middleware/layout-selector",use:()=>{g(),y()},hover:E=>{if(v!==!0&&!w()&&!p()){if(M(E.point)?n.setSharedStorage(Nn,!0):(n.setSharedStorage(Nn,!1),f===!0&&(a.drawFrame(),f=!1)),n.getSharedStorage(It)===!0){const L=n.getSharedStorage(an),N=n.getActiveStorage("data");if(N!=null&&N.layout)if(L!=="resize"){y();const b=k(E);b?S(b):(S(),n.setSharedStorage(an,null))}else{const b=k(E);S(b)}return}n.getSharedStorage(Nn)&&!f&&a.drawFrame(),f=n.getSharedStorage(Nn)}},pointStart:E=>{if(w())return;M(E.point)?n.setSharedStorage(It,!0):(m===!0&&(g(),a.drawFrame()),n.setSharedStorage(It,!1)),y();const L=k(E);u=E.point,L&&n.setSharedStorage(an,"resize"),n.getSharedStorage(It)===!0&&!m&&a.drawFrame(),m=n.getSharedStorage(It)},pointMove:E=>{if(!n.getSharedStorage(It)&&w())return;const L=n.getSharedStorage(an),N=n.getSharedStorage(Go),b=n.getActiveStorage("data");if(L==="resize"&&N&&(b!=null&&b.layout)){if(u){v=!0;const j=n.getActiveStorage("scale"),_=E.point.x-u.x,V=E.point.y-u.y,X=_/j,B=V/j,{x:R,y:O,w:P,h:z,operations:G={}}=b.layout,{position:F="absolute"}=G;N==="top"?F==="relative"?(b.layout.h=i.toGridNum(z-B),a.scroll({moveY:V})):(b.layout.y=i.toGridNum(O+B),b.layout.h=i.toGridNum(z-B)):N==="right"?b.layout.w=i.toGridNum(P+X):N==="bottom"?b.layout.h=i.toGridNum(z+B):N==="left"?F==="relative"?(b.layout.w=i.toGridNum(P-X),a.scroll({moveX:_})):(b.layout.x=i.toGridNum(R+X),b.layout.w=i.toGridNum(P-X)):N==="top-left"?F==="relative"?(b.layout.w=i.toGridNum(P-X),b.layout.h=i.toGridNum(z-B),a.scroll({moveX:_,moveY:V})):(b.layout.x=i.toGridNum(R+X),b.layout.y=i.toGridNum(O+B),b.layout.w=i.toGridNum(P-X),b.layout.h=i.toGridNum(z-B)):N==="top-right"?F==="relative"?(a.scroll({moveY:V}),b.layout.w=i.toGridNum(P+X),b.layout.h=i.toGridNum(z-B)):(b.layout.y=i.toGridNum(O+B),b.layout.w=i.toGridNum(P+X),b.layout.h=i.toGridNum(z-B)):N==="bottom-right"?(b.layout.w=i.toGridNum(P+X),b.layout.h=i.toGridNum(z+B)):N==="bottom-left"&&(F==="relative"?(a.scroll({moveX:_}),b.layout.w=i.toGridNum(P-X),b.layout.h=i.toGridNum(z+B)):(b.layout.x=i.toGridNum(R+X),b.layout.w=i.toGridNum(P-X),b.layout.h=i.toGridNum(z+B)))}return u=E.point,y(),a.drawFrame(),!1}if(["resize"].includes(L))return!1},pointEnd:()=>{v=!1;const E=n.getSharedStorage(an),L=n.getSharedStorage(Go),N=n.getActiveStorage("data");N&&E==="resize"&&L&&s.trigger(de.CHANGE,{type:"changeLayout",data:N})},beforeDrawFrame:({snapshot:E})=>{var L;if(w())return;const{sharedStore:N,activeStore:b}=E,j=N[an],_=N[Nn],V=N[It];if(!((L=b.data)===null||L===void 0)&&L.layout){const{x:X,y:B,w:R,h:O}=b.data.layout,P=Do(E),z={x:X,y:B,w:R,h:O},G=ss(z,{viewScaleInfo:P,controllerSize:so});if(_===!0){const F=Xe(z,{viewScaleInfo:P});v3(c,{layoutSize:F,style:h})}(j&&["resize"].includes(j)||V===!0)&&g3(c,{controller:G,style:h})}},scrollX:()=>{g()},scrollY:()=>{g()},wheelScale:()=>{g()}}},p3=e=>({uuid:Dt(),type:"path",x:0,y:0,w:200,h:200,detail:Object.assign({commands:[{type:"M",params:[512,0]},{type:"c",params:[282.8,0,512,229.2,512,512]},{type:"s",params:[-229.2,512,-512,512]},{type:"S",params:[0,794.8,0,512,229.2,0,512,0]},{type:"z",params:[]},{type:"m",params:[309.8,253.8]},{type:"c",params:[0,-10.5,-6.5,-19.8,-15.7,-23.8,-9.7,-4,-21,-2,-28.2,5.6]},{type:"l",params:[-52.5,52]},{type:"c",params:[-56.9,-53.7,-133.9,-85.5,-213.4,-85.5,-170.7,0,-309.8,139.2,-309.8,309.8,0,170.6,139.2,309.8,309.8,309.8,92.4,0,179.5,-40.8,238.4,-111.8,4,-5.2,4,-12.9,-.8,-17.3]},{type:"L",params:[694.3,637]},{type:"c",params:[-2.8,-2.4,-6.5,-3.6,-10.1,-3.6,-3.6,.4,-7.3,2,-9.3,4.8,-39.5,51.2,-98.8,80.3,-163,80.3,-113.8,0,-206.5,-92.8,-206.5,-206.5,0,-113.8,92.8,-206.5,206.5,-206.5,52.8,0,102.9,20.2,140.8,55.3]},{type:"L",params:[597,416.5]},{type:"c",params:[-7.7,7.3,-9.7,18.6,-5.6,27.9,4,9.7,13.3,16.1,23.8,16.1]},{type:"H",params:[796]},{type:"c",params:[14.1,0,25.8,-11.7,25.8,-25.8]},{type:"V",params:[253.8]},{type:"z",params:[]}],fill:"#2c2c2c",stroke:"transparent",strokeWidth:0,originX:0,originY:0,originW:1024,originH:1024,opacity:1},e)});function y3(e){const{fill:t,devicePixelRatio:n}=e,o=p3({fill:t}),{w:i,h:a}=o,s=Mo({width:i,height:a,devicePixelRatio:n});return Va(s,o,{loader:void 0,viewScaleInfo:{scale:1,offsetTop:0,offsetBottom:0,offsetLeft:0,offsetRight:0},viewSizeInfo:{width:i,height:a,devicePixelRatio:n,contextWidth:i,contextHeight:a},parentElementSize:{x:0,y:0,w:i,h:a},parentOpacity:1}),s}const Ba="monospace";function w3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textColor:l,textBackground:h}=s;Ro(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ba});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x-f/2-u,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x-f/2,y:n.y};e.setLineDash([]),e.fillStyle=h,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=l,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function b3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=s;Ro(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ba});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function E3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=s;Ro(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ba});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}const S3="#1973bac6",C3="#ffffff",ki="@middleware/internal-event/show-info-angle",x3={textBackground:S3,textColor:C3},sn=10,sa=16,Bs=(e,t)=>{const{boardContent:n,calculator:o,eventHub:i}=e,{overlayContext:a}=n,s=Object.assign(Object.assign({},x3),t),{textBackground:c,textColor:d}=s,l={textBackground:c,textColor:d};let h=!0;const u=({show:f})=>{h=f};return{name:"@middleware/info",use(){i.on(ki,u)},disuse(){i.off(ki,u)},beforeDrawFrame({snapshot:f}){const{sharedStore:m}=f,v=m[pt],g=m[xe],p=m[Qe]||[];if(v.length===1){const w=v[0];if(w&&["select","drag","resize"].includes(g)){const C=Do(f),M=Wi(f),{x:y,y:k,w:S,h:E,angle:L}=w,N=[...p,{uuid:Dt(),x:y,y:k,w:S,h:E,angle:L,type:"group",detail:{children:[]}}],b={viewScaleInfo:C,viewSizeInfo:M},j=o.calcViewRectInfoFromOrigin(w.uuid,b);let _=0;N.forEach(X=>{_+=X.angle||0});const V=Rt(ct(0-_));if(j){const X=j==null?void 0:j.center,B={topLeft:Ne(X,j.topLeft,V),topRight:Ne(X,j.topRight,V),bottomRight:Ne(X,j.bottomRight,V),bottomLeft:Ne(X,j.bottomLeft,V),center:Ne(X,j.center,V),top:Ne(X,j.top,V),right:Ne(X,j.right,V),bottom:Ne(X,j.bottom,V),left:Ne(X,j.left,V)},R=we(w.x,{decimalPlaces:2}),O=we(w.y,{decimalPlaces:2}),P=we(w.w,{decimalPlaces:2}),z=we(w.h,{decimalPlaces:2}),G=`${we(R,{decimalPlaces:0})},${we(O,{decimalPlaces:0})}`,F=`${we(P,{decimalPlaces:0})}x${we(z,{decimalPlaces:0})}`,A=`${we(w.angle||0,{decimalPlaces:0})}°`;w3(a,{point:{x:B.bottom.x,y:B.bottom.y+sn},rotateCenter:B.center,angle:_,text:F,fontSize:sn,lineHeight:sa,style:l}),b3(a,{point:{x:B.topLeft.x,y:B.topLeft.y-sn*2},rotateCenter:B.center,angle:_,text:G,fontSize:sn,lineHeight:sa,style:l}),h&&E3(a,{point:{x:B.top.x+sn+4,y:B.top.y-sn*2-18},rotateCenter:B.center,angle:_,text:A,fontSize:sn,lineHeight:sa,style:l})}}}}}},Fs=(e,t)=>{const n=Object.assign(Object.assign({},i3),t),{activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s}=n,c={activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s},{viewer:d,sharer:l,boardContent:h,calculator:u,eventHub:f}=e,{overlayContext:m}=h;let v=null,g=null,p=null,w=null,C=null;const M=y3({fill:c.activeColor,devicePixelRatio:l.getActiveViewSizeInfo().devicePixelRatio});l.setSharedStorage(xe,null),l.setSharedStorage(Fo,!0);const y=()=>l.getSharedStorage(pt),k=B=>{let R=l.getSharedStorage(Qe);Array.isArray(R)||(R=[]),R.length>0?h3(B,R[R.length-1])?R.push(B):R=[]:R.length===0&&R.push(B);const O=_a(R);return l.setSharedStorage(Qe,R),l.setSharedStorage(oa,O),R.length>0},S=B=>{l.setSharedStorage(Mt,B);let R=null;B&&(R=No(B,{groupQueue:l.getSharedStorage(Qe)})),l.setSharedStorage(ao,R)},E=()=>{const B=l.getSharedStorage(pt);if(B.length===1){const R=Z0(B[0],{groupQueue:l.getSharedStorage(Qe),controllerSize:Jd,viewScaleInfo:l.getActiveViewScaleInfo(),rotateControllerPosition:qd,rotateControllerSize:Kd});l.setSharedStorage(nn,R)}},L=(B,R)=>{var O;if(l.setSharedStorage(pt,B),B.length===1?(E(),l.setSharedStorage(An,wt(B[0].uuid,((O=l.getActiveStorage("data"))===null||O===void 0?void 0:O.elements)||[]))):(l.setSharedStorage(nn,null),l.setSharedStorage(An,[])),(R==null?void 0:R.triggerEvent)===!0){const P=B.map(F=>F.uuid),z=l.getActiveStorage("data"),G=V0(P,(z==null?void 0:z.elements)||[]);f.trigger(de.SELECT,{uuids:P,positions:B.map(F=>[...G[F.uuid]])})}},N=()=>({ctx:m,calculator:u,data:l.getActiveStorage("data"),selectedElements:y(),viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Qe),areaSize:null,selectedElementController:l.getSharedStorage(nn),selectedElementPosition:l.getSharedStorage(An)}),b=()=>{l.setSharedStorage(xe,null),l.setSharedStorage(Vt,null),l.setSharedStorage(io,null),l.setSharedStorage(Vo,null),l.setSharedStorage(Qe,[]),l.setSharedStorage(oa,[]),l.setSharedStorage(Mt,null),l.setSharedStorage(ao,null),l.setSharedStorage(pt,[]),l.setSharedStorage(Zd,null),l.setSharedStorage(nn,null),l.setSharedStorage(An,[]),l.setSharedStorage(Bo,null)};b();const j=({uuids:B=[],positions:R})=>{let O=[];const P=l.getSharedStorage(xe),z=l.getActiveStorage("data");R&&Array.isArray(R)?O=jr(R,(z==null?void 0:z.elements)||[]):O=li(B,(z==null?void 0:z.elements)||[]);let G=!1;if(!P&&O.length===1?(l.setSharedStorage(xe,"select"),G=!0):P==="select"&&O.length===1&&(G=!0),G){const F=O[0],A=ka(F.uuid,(z==null?void 0:z.elements)||[]);l.setSharedStorage(Qe,A),L(O),d.drawFrame()}},_=()=>{b(),d.drawFrame()},V=B=>{l.setSharedStorage(Fo,!!B.enable)},X=B=>{l.setSharedStorage(Ns,!!B.enable)};return{name:"@middleware/selector",use(){f.on(de.SELECT,j),f.on(de.CLEAR_SELECT,_),f.on(de.SELECT_IN_GROUP,X),f.on(de.SNAP_TO_GRID,V)},disuse(){f.off(de.SELECT,j),f.off(de.CLEAR_SELECT,_),f.off(de.SELECT_IN_GROUP,X),f.off(de.SNAP_TO_GRID,V)},hover:B=>{var R,O,P,z,G;const F=l.getSharedStorage(It),A=l.getSharedStorage(Vt),Z=l.getSharedStorage(xe),Y=l.getSharedStorage(Qe),x=se=>{if(F===!0)return;const ee=se.type;w===null&&f.trigger(de.CURSOR,{type:ee,groupQueue:se.groupQueue,element:se.elements[0]})};if((Y==null?void 0:Y.length)>0){if(!ia(B.point,{ctx:m,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Qe)})){S(null),d.drawFrame();return}const ee=on(B.point,N());if(x(ee),A||["area","drag","drag-list"].includes(Z)){S(null),d.drawFrame();return}if(((R=ee==null?void 0:ee.elements)===null||R===void 0?void 0:R.length)===1){S(ee.elements[0]),d.drawFrame();return}S(null),d.drawFrame();return}if(A||["area","drag","drag-list"].includes(Z)){S(null);return}if(Z==="drag"){S(null);return}const T=y(),D=l.getActiveViewScaleInfo(),W=l.getActiveViewSizeInfo(),U=on(B.point,Object.assign(Object.assign({},N()),{areaSize:Ho(T,{viewScaleInfo:D,viewSizeInfo:W,calculator:u})}));if(x(U),U.type===null){(l.getSharedStorage(Mt)||l.getSharedStorage(ao))&&(l.setSharedStorage(Mt,null),l.setSharedStorage(ao,null),d.drawFrame());return}if(!(U.type==="over-element"&&l.getSharedStorage(xe)==="select"&&U.elements.length===1&&U.elements[0].uuid===((P=(O=y())===null||O===void 0?void 0:O[0])===null||P===void 0?void 0:P.uuid))&&!(U.type==="over-element"&&l.getSharedStorage(xe)===null&&U.elements.length===1&&U.elements[0].uuid===((z=l.getSharedStorage(Mt))===null||z===void 0?void 0:z.uuid))){if(U.type==="over-element"&&((G=U==null?void 0:U.elements)===null||G===void 0?void 0:G.length)===1){S(U.elements[0]),d.drawFrame();return}if(l.getSharedStorage(Mt)){S(null),d.drawFrame();return}}},pointStart:B=>{var R,O,P,z,G,F,A,Z,Y,x,T,D;v=B.point,g=B.point;const W=l.getSharedStorage(Qe);if((W==null?void 0:W.length)>0){if(ia(B.point,{ctx:m,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:W})){const ce=on(B.point,N()),$=((R=ce==null?void 0:ce.elements)===null||R===void 0?void 0:R.length)===1&&((P=(O=ce.elements[0])===null||O===void 0?void 0:O.operations)===null||P===void 0?void 0:P.locked)===!0;S(null),((z=ce==null?void 0:ce.elements)===null||z===void 0?void 0:z.length)===1&&(p=pn(ce==null?void 0:ce.elements[0])),$===!0?b():ce.type==="over-element"&&((G=ce==null?void 0:ce.elements)===null||G===void 0?void 0:G.length)===1?(L([ce.elements[0]],{triggerEvent:!0}),l.setSharedStorage(xe,"drag")):!((F=ce.type)===null||F===void 0)&&F.startsWith("resize-")?(l.setSharedStorage(Vt,ce.type),l.setSharedStorage(xe,"resize")):L([],{triggerEvent:!0})}else b();d.drawFrame();return}const U=Ho(y(),{viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),calculator:u}),se=on(B.point,Object.assign(Object.assign({},N()),{areaSize:U,groupQueue:[]})),ee=((A=se==null?void 0:se.elements)===null||A===void 0?void 0:A.length)===1&&((Y=(Z=se.elements[0])===null||Z===void 0?void 0:Z.operations)===null||Y===void 0?void 0:Y.locked)===!0;S(null),((x=se==null?void 0:se.elements)===null||x===void 0?void 0:x.length)===1&&(p=pn(se==null?void 0:se.elements[0])),ee===!0?(b(),l.setSharedStorage(xe,"area"),l.setSharedStorage(io,B.point),L([],{triggerEvent:!0})):se.type==="list-area"?l.setSharedStorage(xe,"drag-list"):se.type==="over-element"&&((T=se==null?void 0:se.elements)===null||T===void 0?void 0:T.length)===1?(L([se.elements[0]],{triggerEvent:!0}),l.setSharedStorage(xe,"drag")):!((D=se.type)===null||D===void 0)&&D.startsWith("resize-")?(l.setSharedStorage(Vt,se.type),l.setSharedStorage(xe,"resize")):(b(),l.setSharedStorage(xe,"area"),l.setSharedStorage(io,B.point),L([],{triggerEvent:!0})),d.drawFrame()},pointMove:B=>{var R,O,P;l.setSharedStorage(Bo,!0);const z=l.getActiveStorage("data"),G=y(),F=l.getActiveStorage("scale")||1,A=l.getActiveViewScaleInfo(),Z=l.getActiveViewSizeInfo(),Y=v,x=g,T=B.point,D=l.getSharedStorage(Vt),W=l.getSharedStorage(xe),U=l.getSharedStorage(Qe),se=l.getSharedStorage(Fo);if(W==="drag"){if(C=!0,w="drag",f.trigger(ki,{show:!1}),z&&(G==null?void 0:G.length)===1&&p&&x&&T&&((O=(R=G[0])===null||R===void 0?void 0:R.operations)===null||O===void 0?void 0:O.locked)!==!0){const{moveX:ee,moveY:ce}=f3(x,T,U);let $=u.toGridNum(ee/F),J=u.toGridNum(ce/F);if(se===!0){const oe=aa(G[0].uuid,{calculator:u,data:z,groupQueue:U,viewScaleInfo:A,viewSizeInfo:Z});try{oe&&(ze.x(oe.offsetX)&&oe.offsetX!==null&&($=u.toGridNum($+oe.offsetX)),ze.y(oe.offsetY)&&oe.offsetY!==null&&(J=u.toGridNum(J+oe.offsetY)))}catch(re){console.error(re)}}G[0].x=u.toGridNum(p.x+$),G[0].y=u.toGridNum(p.y+J),L([G[0]]),u.modifyViewVisibleInfoMap(z,{modifyOptions:{type:"updateElement",content:{element:G[0],position:l.getSharedStorage(An)||[]}},viewSizeInfo:Z,viewScaleInfo:A})}d.drawFrame()}else if(W==="drag-list"){if(C=!0,w="drag-list",z&&x&&Y&&T&&(G==null?void 0:G.length)>1){const ee=(T.x-Y.x)/F,ce=(T.y-Y.y)/F;G.forEach($=>{var J;$&&((J=$==null?void 0:$.operations)===null||J===void 0?void 0:J.locked)!==!0&&($.x=u.toGridNum($.x+ee),$.y=u.toGridNum($.y+ce),u.modifyViewVisibleInfoMap(z,{modifyOptions:{type:"updateElement",content:{element:$,position:wt($.uuid,z.elements)||[]}},viewSizeInfo:Z,viewScaleInfo:A}))}),l.setActiveStorage("data",z)}d.drawFrame()}else if(W==="resize"){if(z&&(G==null?void 0:G.length)===1&&x&&p&&(D!=null&&D.startsWith("resize-"))){C=!0,w="resize";const ee=[];U.forEach(J=>{const{x:oe,y:re,w:mt,h:ko,angle:en=0}=J;ee.push({x:oe,y:re,w:mt,h:ko,angle:0-en})});let ce=x,$=T;if(U.length>0&&(ce=Li(x,ee),$=Li(T,ee)),D==="resize-rotate"){const J=l.getSharedStorage(nn),oe=[J.topLeft.center,J.topRight.center,J.bottomLeft.center,J.bottomRight.center],re=Dr(oe),mt=d3(p,{center:re,viewScaleInfo:A,viewSizeInfo:Z,start:x,end:T,resizeType:D,sharer:l});G[0].angle=u.toGridNum(mt.angle||0)}else{const J=c3(p,{scale:F,start:ce,end:$,resizeType:D,sharer:l}),oe={ignore:!!p.angle};G[0].x=u.toGridNum(J.x,oe),G[0].y=u.toGridNum(J.y,oe),G[0].type==="group"&&((P=G[0].operations)===null||P===void 0?void 0:P.deepResize)===!0?$r(G[0],{w:u.toGridNum(J.w,oe),h:u.toGridNum(J.h,oe)}):(G[0].w=u.toGridNum(J.w,oe),G[0].h=u.toGridNum(J.h,oe))}L([G[0]]),u.modifyViewVisibleInfoMap(z,{modifyOptions:{type:"updateElement",content:{element:G[0],position:l.getSharedStorage(An)||[]}},viewSizeInfo:Z,viewScaleInfo:A}),d.drawFrame()}}else W==="area"&&(w="area",l.setSharedStorage(Vo,B.point),d.drawFrame());v=B.point},pointEnd(B){w=null,l.setSharedStorage(Bo,!1);const R=l.getActiveStorage("data"),O=l.getSharedStorage(pt),P=l.getSharedStorage(Mt),z=l.getSharedStorage(Vt),G=l.getSharedStorage(xe),F=l.getActiveViewSizeInfo();let A=!1;if(v=null,g=null,p=null,G==="drag"&&f.trigger(ki,{show:!0}),G==="resize"&&z)l.setSharedStorage(Vt,null),A=!0;else if(G==="area"){if(l.setSharedStorage(xe,null),R){const Y=l.getSharedStorage(io),x=l.getSharedStorage(Vo);if(Y&&x){const{elements:T}=u3(R,{start:Y,end:x,calculator:u,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()});T.length>0&&(l.setSharedStorage(xe,"drag-list"),L(T,{triggerEvent:!0}),A=!0)}}}else G==="drag-list"?(l.setSharedStorage(xe,"drag-list-end"),A=!0):R&&(u.getPointElement(B.point,{data:R,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()}).element?(l.setSharedStorage(xe,"select"),A=!0):l.setSharedStorage(xe,null));l.getSharedStorage(xe)===null&&(b(),A=!0),(()=>{if(A){if(R&&Array.isArray(R==null?void 0:R.elements)&&["drag","drag-list"].includes(G)){const Y=j0(R.elements,F,{extend:!0});l.setActiveStorage("contextHeight",Y.contextSize.contextHeight),l.setActiveStorage("contextWidth",Y.contextSize.contextWidth)}R&&["drag","drag-list","drag-list-end","resize"].includes(G)&&C&&(f.trigger(de.CHANGE,{data:R,type:"dragElement",selectedElements:O,hoverElement:P}),C=!1),d.drawFrame()}})()},pointLeave(){w=null,l.setSharedStorage(Vt,null),f.trigger(de.CURSOR,{type:"default"})},doubleClick(B){var R,O,P,z,G,F,A,Z;if(l.getSharedStorage(Ns)===!1)return;const Y=on(B.point,N());if(l.setSharedStorage(nn,null),l.setSharedStorage(pt,[]),!(Y.elements.length===1&&((O=(R=Y.elements[0])===null||R===void 0?void 0:R.operations)===null||O===void 0?void 0:O.locked)===!0)){if(Y.elements.length===1&&((P=Y.elements[0])===null||P===void 0?void 0:P.type)==="group"){if(k(Y.elements[0])===!0){l.setSharedStorage(xe,null),d.drawFrame();return}}else Y.elements.length===1&&((z=Y.elements[0])===null||z===void 0?void 0:z.type)==="text"&&!(!((F=(G=Y.elements[0])===null||G===void 0?void 0:G.operations)===null||F===void 0)&&F.invisible)&&f.trigger(de.TEXT_EDIT,{element:Y.elements[0],groupQueue:l.getSharedStorage(Qe)||[],position:wt((A=Y.elements[0])===null||A===void 0?void 0:A.uuid,((Z=l.getActiveStorage("data"))===null||Z===void 0?void 0:Z.elements)||[]),viewScaleInfo:l.getActiveViewScaleInfo()});l.setSharedStorage(xe,null)}},wheel(){E()},wheelScale(){E()},contextMenu:B=>{var R,O,P,z,G,F,A,Z;const Y=l.getSharedStorage(Qe);if((Y==null?void 0:Y.length)>0){if(ia(B.point,{ctx:m,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:Y})){const D=on(B.point,N());((R=D==null?void 0:D.elements)===null||R===void 0?void 0:R.length)===1&&((P=(O=D.elements[0])===null||O===void 0?void 0:O.operations)===null||P===void 0?void 0:P.locked)!==!0?(b(),L([D.elements[0]],{triggerEvent:!0}),d.drawFrame()):!((z=D==null?void 0:D.elements)===null||z===void 0)&&z.length||b()}return}const x=Ho(y(),{viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),calculator:u}),T=on(B.point,Object.assign(Object.assign({},N()),{areaSize:x,groupQueue:[]}));if(((G=T==null?void 0:T.elements)===null||G===void 0?void 0:G.length)===1&&((A=(F=T.elements[0])===null||F===void 0?void 0:F.operations)===null||A===void 0?void 0:A.locked)!==!0){b(),L([T.elements[0]],{triggerEvent:!0}),d.drawFrame();return}else!((Z=T==null?void 0:T.elements)===null||Z===void 0)&&Z.length||b()},beforeDrawFrame({snapshot:B}){var R;const{activeStore:O,sharedStore:P}=B,{scale:z,offsetLeft:G,offsetTop:F,offsetRight:A,offsetBottom:Z,width:Y,height:x,contextHeight:T,contextWidth:D,devicePixelRatio:W}=O,U=e.sharer,se={scale:z,offsetLeft:G,offsetTop:F,offsetRight:A,offsetBottom:Z},ee={width:Y,height:x,contextHeight:T,contextWidth:D,devicePixelRatio:W},$=P[pt][0],J=P[Mt],oe=P[ao],re=P[xe],mt=P[io],ko=P[Vo],en=P[Qe],Ol=P[oa],$a=P[Bo],Xa=P[Fo],tn={calculator:u,viewScaleInfo:se,viewSizeInfo:ee,style:c},_o=P[nn],Ua=!!(!((R=J==null?void 0:J.operations)===null||R===void 0)&&R.locked);if((en==null?void 0:en.length)>0){if(l3(m,Ol,tn),J&&re!=="drag"&&(Ua?Ps(m,oe,Object.assign(Object.assign({},tn),{controller:_o,style:c})):Rs(m,oe,tn)),$&&["select","drag","resize"].includes(re)&&(Os(m,_o,Object.assign(Object.assign({},tn),{element:$,calculator:u,hideControllers:!!$a&&re==="drag",rotateControllerPattern:M,style:c})),re==="drag"&&Xa===!0)){const kt=aa($.uuid,{calculator:u,data:O.data,groupQueue:en,viewScaleInfo:se,viewSizeInfo:ee});if(kt){const{offsetX:$i,offsetY:Xi,xLines:Ui,yLines:Zi}=kt;($i===0||Xi===0)&&ks(m,{xLines:Ui,yLines:Zi,style:c})}}}else if(J&&re!=="drag"&&(Ua?Ps(m,oe,Object.assign(Object.assign({},tn),{controller:_o,style:c})):Rs(m,oe,tn)),$&&["select","drag","resize"].includes(re)){if(Os(m,_o,Object.assign(Object.assign({},tn),{element:$,calculator:u,hideControllers:!!$a&&re==="drag",rotateControllerPattern:M,style:c})),re==="drag"&&Xa===!0){const kt=aa($.uuid,{calculator:u,data:O.data,groupQueue:en,viewScaleInfo:se,viewSizeInfo:ee});if(kt){const{offsetX:$i,offsetY:Xi,xLines:Ui,yLines:Zi}=kt;($i===0||Xi===0)&&ks(m,{xLines:Ui,yLines:Zi,style:c})}}}else if(re==="area"&&mt&&ko)s3(m,{start:mt,end:ko,style:c});else if(["drag-list","drag-list-end"].includes(re)){const kt=Ho(y(),{viewScaleInfo:U.getActiveViewScaleInfo(),viewSizeInfo:U.getActiveViewSizeInfo(),calculator:u});kt&&r3(m,{areaSize:kt,style:c})}}}},xn="SCROLL",xi=Symbol(`${xn}_xThumbRect`),Mi=Symbol(`${xn}_yThumbRect`),yo=Symbol(`${xn}_hoverXThumbRect`),wo=Symbol(`${xn}_hoverYThumbRect`),Xn=Symbol(`${xn}_prevPoint`),xa=Symbol(`${xn}_activePoint`),bo=Symbol(`${xn}_activeThumbType`),M3={thumbBackground:"#0000003A",thumbBorderColor:"#0000008A",hoverThumbBackground:"#0000005F",hoverThumbBorderColor:"#000000EE",activeThumbBackground:"#0000005E",activeThumbBorderColor:"#000000F0"},gl=16,z3=gl*2.5;function Ws(e,t,n){const o=e,{x:i,y:a,w:s,h:c}=n;return o.beginPath(),o.rect(i,a,s,c),o.closePath(),!!o.isPointInPath(t.x,t.y)}function I3(e,t,n){let o=null;const{xThumbRect:i,yThumbRect:a}=n;return i&&Ws(e,t,i)?o="X":a&&Ws(e,t,a)&&(o="Y"),o}function A3(e){const{sharedStore:t}=e;return{activePoint:t[xa]||null,prevPoint:t[Xn]||null,activeThumbType:t[bo]||null,xThumbRect:t[xi]||null,yThumbRect:t[Mi]||null,hoverXThumb:t[yo],hoverYThumb:t[wo]}}function T3(e){const{viewScaleInfo:t,viewSizeInfo:n,hoverXThumb:o,hoverYThumb:i,style:a}=e,{width:s,height:c}=n,{offsetTop:d,offsetBottom:l,offsetLeft:h,offsetRight:u}=t,f=z3,m=gl,{thumbBackground:v,thumbBorderColor:g,hoverThumbBackground:p,hoverThumbBorderColor:w}=a;let C=0,M=0;C=Math.max(f,s-m*2-(Math.abs(h)+Math.abs(u))),C>=s&&(C=s),M=Math.max(f,c-m*2-(Math.abs(d)+Math.abs(l))),M>=c&&(M=c);const y=m,k=s-C-m;let S=y;h>0?S=y:u>0?S=k:h<=0&&C>0&&!(h===0&&u===0)&&(S=y+(s-C)*Math.abs(h)/(Math.abs(h)+Math.abs(u)),S=Math.min(Math.max(0,S-y),s-C));const E=m,L=c-M-m;let N=E;d>0?N=E:l>0?N=L:d<=0&&M>0&&!(d===0&&l===0)&&(N=E+(c-M)*Math.abs(d)/(Math.abs(d)+Math.abs(l)),N=Math.min(Math.max(0,N-E),c-M));const b={x:S,y:c-m,w:C,h:m},j={x:s-m,y:N,w:m,h:M};return{lineSize:m,xSize:C,ySize:M,translateY:N,translateX:S,xThumbBackground:o?p:v,yThumbBackground:i?p:v,xThumbBorderColor:o?w:g,yThumbBorderColor:i?w:g,xThumbRect:b,yThumbRect:j}}function Hs(e,t){let{x:n,y:o,h:i,w:a,background:s,borderColor:c}=t;e.save(),e.shadowColor="#FFFFFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=1;{const{axis:d}=t;d==="X"?(o=o+i/4+0,i=i/2):d==="Y"&&(n=n+a/4+0,a=a/2);let l=t.r;l=Math.min(l,a/2,i/2),(a<l*2||i<l*2)&&(l=0),e.globalAlpha=1,e.beginPath(),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.fillStyle=s,e.fill(),e.beginPath(),e.lineWidth=1,e.strokeStyle=c,e.setLineDash([]),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.stroke()}e.restore()}function N3(e,t){const n=e,{viewScaleInfo:o,viewSizeInfo:i,scrollInfo:a,style:s}=t,{activeThumbType:c,prevPoint:d,activePoint:l,hoverXThumb:h,hoverYThumb:u}=a,f=T3({viewScaleInfo:o,viewSizeInfo:i,hoverXThumb:h,hoverYThumb:u,style:s});let m=Object.assign({},f.xThumbRect),v=Object.assign({},f.yThumbRect);return c&&d&&l&&(c==="X"&&a.xThumbRect?(m=Object.assign({},a.xThumbRect),m.x=m.x+(l.x-d.x)):c==="Y"&&a.yThumbRect&&(v=Object.assign({},a.yThumbRect),v.y=v.y+(l.y-d.y))),Hs(n,Object.assign(Object.assign({axis:"X"},m),{r:f.lineSize/2,background:f.xThumbBackground,borderColor:f.xThumbBorderColor})),Hs(n,Object.assign(Object.assign({axis:"Y"},v),{r:f.lineSize/2,background:f.yThumbBackground,borderColor:f.yThumbBorderColor})),{xThumbRect:m,yThumbRect:v}}function L3(e,t){const{snapshot:n,style:o}=t,i=Wi(n),a=Do(n),s=A3(n),{xThumbRect:c,yThumbRect:d}=N3(e,{viewSizeInfo:i,viewScaleInfo:a,scrollInfo:s,style:o});return{xThumbRect:c,yThumbRect:d}}const Gs=(e,t)=>{const{viewer:n,boardContent:o,sharer:i,eventHub:a}=e,{overlayContext:s}=o;i.setSharedStorage(xi,null),i.setSharedStorage(Mi,null);let c=!1;const d=Object.assign(Object.assign({},M3),t),{thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:f,activeThumbBackground:m,activeThumbBorderColor:v}=d,g={thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:f,activeThumbBackground:m,activeThumbBorderColor:v},p=()=>{i.setSharedStorage(Xn,null),i.setSharedStorage(xa,null),i.setSharedStorage(bo,null),i.setSharedStorage(yo,null),i.setSharedStorage(wo,null),c=!1};p();const w=y=>{const k=i.getSharedStorage(Xn);if(k){const{offsetLeft:S,offsetRight:E}=i.getActiveViewScaleInfo(),{width:L}=i.getActiveViewSizeInfo(),N=-(y.x-k.x),b=L+Math.abs(S)+Math.abs(E),j=N*b/L;n.scroll({moveX:j}),n.drawFrame()}},C=y=>{const k=i.getSharedStorage(Xn);if(k){const{offsetTop:S,offsetBottom:E}=i.getActiveViewScaleInfo(),{height:L}=i.getActiveViewSizeInfo(),N=-(y.y-k.y),b=L+Math.abs(S)+Math.abs(E),j=N*b/L;n.scroll({moveY:j}),n.drawFrame()}},M=y=>I3(s,y,{xThumbRect:i.getSharedStorage(xi),yThumbRect:i.getSharedStorage(Mi)});return{name:"@middleware/scroller",wheel:y=>{n.scroll({moveX:0-y.deltaX,moveY:0-y.deltaY}),n.drawFrame()},hover:y=>{if(c===!0)return!1;const{point:k}=y,S=M(k);if(S==="X"||S==="Y")return S==="X"?(i.setSharedStorage(yo,!0),i.setSharedStorage(wo,!1)):(i.setSharedStorage(yo,!1),i.setSharedStorage(wo,!0)),a.trigger(de.CURSOR,{type:"default"}),!1;i.setSharedStorage(yo,!1),i.setSharedStorage(wo,!1)},pointStart:y=>{const{point:k}=y,S=M(k);if(S==="X"||S==="Y")return c=!0,i.setSharedStorage(bo,S),i.setSharedStorage(Xn,k),!1},pointMove:y=>{const{point:k}=y,S=i.getSharedStorage(bo);if(S==="X"||S==="Y")return i.setSharedStorage(xa,k),S==="X"?w(k):S==="Y"&&C(k),i.setSharedStorage(Xn,k),!1},pointEnd:()=>{c=!1;const y=i.getSharedStorage(bo);if(p(),y==="X"||y==="Y")return n.scroll({moveX:0,moveY:0}),n.drawFrame(),!1},beforeDrawFrame({snapshot:y}){const{xThumbRect:k,yThumbRect:S}=L3(s,{snapshot:y,style:g});i.setSharedStorage(xi,k),i.setSharedStorage(Mi,S)}}},Ys=e=>{const{viewer:t,sharer:n,eventHub:o}=e,i=50,a=.05;return{name:"@middleware/scaler",wheelScale(s){const{deltaY:c,point:d}=s,{scale:l}=n.getActiveViewScaleInfo();let h=l;if(c<0?h=l*1.1:c>0&&(h=l*.9),h<a||h>i)return;const{moveX:u,moveY:f}=t.scale({scale:h,point:d});t.scroll({moveX:u,moveY:f}),t.drawFrame();const m=we(l);o.trigger(de.SCALE,{scale:m})}}},je=16,Ma=10,vl=100,Gi=1,pl="monospace",D3="#FFFFFFA8",R3="#00000080",P3="#000000",O3="#00000080",k3="#AAAAAA20",_3="#AAAAAA40",j3="#196097",V3={background:D3,borderColor:R3,scaleColor:P3,textColor:O3,gridColor:k3,gridPrimaryColor:_3,selectedAreaColor:j3},Ln=[1,2,5,10,20,50,100,200,500];function B3(e){e=Math.max(Ln[0],Math.min(e,Ln[Ln.length-1]));for(let t=0;t<Ln.length-1;t++){const n=Ln[t],o=Ln[t+1];if(e>o)continue;if(e===n||e===o)return e;const i=(n+o)/2;return e<=i?n:o}return e}function yl(e){const{scale:t,viewLength:n,viewOffset:o}=e,i=[];let a=10;a=we(a/t,{decimalPlaces:0}),a=B3(a);const s=a*10,c=a*5;let d=0;const l=a*t,h=0-o,u=0,f=h%l,m=(h-f+l)/t,v=u+(l-f);for(;v+d*l<n;){const g=we(m+d*a,{decimalPlaces:0}),p=we(v+d*l,{decimalPlaces:0}),w={num:g,position:p,showNum:g%s===0,isKeyNum:g%s===0,isSubKeyNum:g%c===0};i.push(w),d++}return{list:i,rulerUnit:a}}function F3(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetLeft:i}=t,{width:a}=n;return yl({axis:"X",scale:o,viewLength:a,viewOffset:i})}function W3(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i}=t,{height:a}=n;return yl({axis:"Y",scale:o,viewLength:a,viewOffset:i})}function H3(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=je,c=je*4/5,d=je*2/5,l=je*1/5,h=je/5;for(let u=0;u<n.length;u++){const f=n[u];f.position<je||(e.beginPath(),e.moveTo(f.position,s),e.lineTo(f.position,f.isKeyNum?l:f.isSubKeyNum?d:c),e.closePath(),e.lineWidth=Gi,e.setLineDash([]),e.fillStyle=i,e.stroke(),f.isKeyNum&&(e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:vl,fontSize:Ma,fontFamily:pl}),e.fillText(`${f.num}`,f.position+h,h)))}}function G3(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=je,c=je*4/5,d=je*2/5,l=je*1/5,h=je/5;for(let u=0;u<n.length;u++){const f=n[u];if(!(f.position<je)&&(e.beginPath(),e.moveTo(s,f.position),e.lineTo(f.isKeyNum?l:f.isSubKeyNum?d:c,f.position),e.closePath(),e.fillStyle=i,e.lineWidth=Gi,e.setLineDash([]),e.stroke(),f.showNum===!0)){const m=h,v=f.position+h,g=`${f.num}`;Ro(e,-90,{x:m,y:v},()=>{e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:vl,fontSize:Ma,fontFamily:pl}),e.fillText(g,h+Ma,f.position+h)})}}}function Y3(e,t){const{viewSizeInfo:n,style:o}=t,{width:i,height:a}=n,{background:s,borderColor:c}=o;e.beginPath(),e.moveTo(0,0),e.lineTo(i+1,0),e.lineTo(i+1,je),e.lineTo(je,je),e.lineTo(je,a+1),e.lineTo(0,a+1),e.lineTo(0,0),e.closePath(),e.fillStyle=s,e.fill(),e.lineWidth=Gi,e.setLineDash([]),e.strokeStyle=c,e.stroke()}function $3(e,t){const{xList:n,yList:o,viewSizeInfo:i,style:a}=t,{width:s,height:c}=i,{gridColor:d,gridPrimaryColor:l}=a;for(let h=0;h<n.length;h++){const u=n[h];e.beginPath(),e.moveTo(u.position,0),e.lineTo(u.position,c),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.closePath(),e.lineWidth=Gi,e.setLineDash([]),e.stroke()}for(let h=0;h<o.length;h++){const u=o[h];e.beginPath(),e.moveTo(0,u.position),e.lineTo(s,u.position),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.lineWidth=1,e.closePath(),e.stroke()}}function X3(e,t){const{snapshot:n,calculator:o,style:i}=t,{sharedStore:a}=n,{selectedAreaColor:s}=i,c=a[pt],d=a[xe];if(["select","drag","drag-list","drag-list-end"].includes(d)&&c.length>0){const l=Do(n),h=Wi(n),u=[],f=[],m=[],v=[],g=[];if(c.forEach(y=>{const k=o.calcViewRectInfoFromRange(y.uuid,{viewScaleInfo:l,viewSizeInfo:h});k&&(u.push(k),f.push(k.left.x),m.push(k.right.x),v.push(k.top.y),g.push(k.bottom.y))}),!(u.length>0))return;const p=Math.min(...f),w=Math.max(...m),C=Math.min(...v),M=Math.max(...g);e.globalAlpha=1,e.beginPath(),e.moveTo(p,0),e.lineTo(w,0),e.lineTo(w,je),e.lineTo(p,je),e.fillStyle=s,e.closePath(),e.fill(),e.beginPath(),e.moveTo(0,C),e.lineTo(je,C),e.lineTo(je,M),e.lineTo(0,M),e.fillStyle=s,e.closePath(),e.fill()}}const $s=(e,t)=>{const{boardContent:n,viewer:o,eventHub:i,calculator:a}=e,{overlayContext:s,underlayContext:c}=n,d=Object.assign(Object.assign({},V3),t),{background:l,borderColor:h,scaleColor:u,textColor:f,gridColor:m,gridPrimaryColor:v,selectedAreaColor:g}=d,p={background:l,borderColor:h,scaleColor:u,textColor:f,gridColor:m,gridPrimaryColor:v,selectedAreaColor:g};let w=!0,C=!0;const M=y=>{typeof(y==null?void 0:y.show)=="boolean"&&(w=y.show),typeof(y==null?void 0:y.showGrid)=="boolean"&&(C=y.showGrid),(typeof(y==null?void 0:y.show)=="boolean"||typeof(y==null?void 0:y.showGrid)=="boolean")&&o.drawFrame()};return{name:"@middleware/ruler",use(){i.on(de.RULER,M)},disuse(){i.off(de.RULER,M)},beforeDrawFrame:({snapshot:y})=>{if(w===!0){const k=Do(y),S=Wi(y);X3(s,{snapshot:y,calculator:a,style:p}),Y3(s,{viewScaleInfo:k,viewSizeInfo:S,style:p});const{list:E,rulerUnit:L}=F3({viewScaleInfo:k,viewSizeInfo:S});H3(s,{scaleList:E,style:p});const{list:N}=W3({viewScaleInfo:k,viewSizeInfo:S});G3(s,{scaleList:N,style:p}),C===!0&&$3(L===1?s:c,{xList:E,yList:N,viewScaleInfo:k,viewSizeInfo:S,style:p})}}}},U3=Sn(),Xs=e=>{const{eventHub:t,boardContent:n,viewer:o,sharer:i}=e,a=n.boardContext.canvas,s=document.createElement("div");s.setAttribute("contenteditable","true");const c=document.createElement("div"),d=e.container||document.body,l=document.createElement("div");let h=null,u=[];const f=`idraw-middleware-text-editor-${Math.random().toString(26).substring(2)}`;l.setAttribute("id",f),c.appendChild(s),c.style.position="absolute",l.appendChild(c),l.style.position="fixed",l.style.top="0",l.style.bottom="0",l.style.left="0",l.style.right="0",l.style.display="none",d.appendChild(l);const m=y=>{C(),w(y),l.style.display="block",h!=null&&h.uuid&&(i.setActiveOverrideElemenentMap({[h.uuid]:{operations:{invisible:!0}}}),o.drawFrame())},v=()=>{if(h!=null&&h.uuid){const y=i.getActiveOverrideElemenentMap();y&&delete y[h.uuid],i.setActiveOverrideElemenentMap(y),o.drawFrame()}l.style.display="none",h=null,u=[]},g=()=>{const y=a.getBoundingClientRect(),{left:k,top:S,width:E,height:L}=y;return{left:k,top:S,width:E,height:L}},p=y=>{const{size:k,parent:S}=y,E=document.createElement("div"),{x:L,y:N,w:b,h:j}=k,_=ct(k.angle||0);return E.style.position="absolute",E.style.left=`${L}px`,E.style.top=`${N}px`,E.style.width=`${b}px`,E.style.height=`${j}px`,E.style.transform=`rotate(${_}deg)`,S.appendChild(E),E},w=y=>{const{viewScaleInfo:k,element:S,groupQueue:E}=y,{scale:L,offsetTop:N,offsetLeft:b}=k;c.children&&Array.from(c.children).forEach(z=>{z.remove()});let j=c;for(let z=0;z<E.length;z++){const G=E[z],{x:F,y:A,w:Z,h:Y}=G,x=ct(G.angle||0),T={x:F*L,y:A*L,w:Z*L,h:Y*L,angle:x};z===0&&(T.x+=b,T.y+=N),j=p({size:T,parent:j})}const _=Object.assign(Object.assign({},U3),S.detail);let V=S.x*L+b,X=S.y*L+N,B=S.w*L,R=S.h*L;E.length>0&&(V=S.x*L,X=S.y*L,B=S.w*L,R=S.h*L);let O="center",P="center";_.textAlign==="left"?O="start":_.textAlign==="right"&&(O="end"),_.verticalAlign==="top"?P="start":_.verticalAlign==="bottom"&&(P="end"),s.style.display="inline-flex",s.style.justifyContent=O,s.style.alignItems=P,s.style.position="absolute",s.style.left=`${V-1}px`,s.style.top=`${X-1}px`,s.style.width=`${B+2}px`,s.style.height=`${R+2}px`,s.style.transform=`rotate(${ct(S.angle||0)}deg)`,s.style.boxSizing="border-box",s.style.border="1px solid #1973ba",s.style.resize="none",s.style.overflow="hidden",s.style.wordBreak="break-all",s.style.borderRadius=`${(typeof _.borderRadius=="number"?_.borderRadius:0)*L}px`,s.style.background=`${_.background||"transparent"}`,s.style.color=`${_.color||"#333333"}`,s.style.fontSize=`${_.fontSize*L}px`,s.style.lineHeight=`${(_.lineHeight||_.fontSize)*L}px`,s.style.fontFamily=Zr(_.fontFamily),s.style.fontWeight=`${_.fontWeight}`,s.style.padding="0",s.style.margin="0",s.style.outline="none",s.innerText=_.text||"",j.appendChild(s)},C=()=>{const{left:y,top:k,width:S,height:E}=g();c.style.position="absolute",c.style.overflow="hidden",c.style.top=`${k}px`,c.style.left=`${y}px`,c.style.width=`${S}px`,c.style.height=`${E}px`};l.addEventListener("click",()=>{v()}),s.addEventListener("click",y=>{y.stopPropagation()}),s.addEventListener("input",()=>{h&&u&&(h.detail.text=s.innerText||"",t.trigger(de.TEXT_CHANGE,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u||[]]}),o.drawFrame())}),s.addEventListener("blur",()=>{h&&u&&t.trigger(de.TEXT_CHANGE,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u]}),v()}),s.addEventListener("keydown",y=>{y.stopPropagation()}),s.addEventListener("keypress",y=>{y.stopPropagation()}),s.addEventListener("keyup",y=>{y.stopPropagation()}),s.addEventListener("wheel",y=>{y.stopPropagation(),y.preventDefault()});const M=y=>{var k;y!=null&&y.position&&(y!=null&&y.element)&&((k=y==null?void 0:y.element)===null||k===void 0?void 0:k.type)==="text"&&(h=y.element,u=y.position),m(y)};return{name:"@middleware/text-editor",use(){t.on(de.TEXT_EDIT,M)},disuse(){t.off(de.TEXT_EDIT,M)}}},Z3="DRAG",Uo=Symbol(`${Z3}_prevPoint`),Us=e=>{const{eventHub:t,sharer:n,viewer:o}=e;let i=!1;return{name:"@middleware/dragger",hover(){i!==!0&&t.trigger(de.CURSOR,{type:"drag-default"})},pointStart(a){const{point:s}=a;n.setSharedStorage(Uo,s),i=!0,t.trigger(de.CURSOR,{type:"drag-active"})},pointMove(a){const{point:s}=a,c=n.getSharedStorage(Uo);if(s&&c){const d=s.x-c.x,l=s.y-c.y;o.scroll({moveX:d,moveY:l}),o.drawFrame()}n.setSharedStorage(Uo,s)},pointEnd(){i=!1,n.setSharedStorage(Uo,null),t.trigger(de.CURSOR,{type:"drag-default"})}}},Q3=e=>{const{boardContent:t,eventHub:n,sharer:o}=e,i=t.boardContext.canvas,a=e.container||document.body,s=`idraw-middleware-pointer-${Math.random().toString(26).substring(2)}`,c=()=>{const l=i.getBoundingClientRect(),{left:h,top:u,width:f,height:m}=l;return{left:h,top:u,width:f,height:m}},d=document.createElement("div");return d.setAttribute("id",s),d.style.position="fixed",d.style.top="0",d.style.bottom="unset",d.style.left="0",d.style.right="unset",a.appendChild(d),{name:"@middleware/pointer",use(){},disuse(){},pointStart(l){},pointEnd(){},contextMenu(l){const{point:h}=l,{left:u,top:f}=c();d.style.left=`${u+h.x}px`,d.style.top=`${f+h.y}px`;const m=o.getSharedStorage(pt);n.trigger(de.CONTEXT_MENU,{pointerContainer:d,selectedElements:m||[]})}}};var ra=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},De=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},za,Re,zi,_i,wl;class J3{constructor(t,n){za.add(this),Re.set(this,void 0),zi.set(this,void 0),_i.set(this,void 0);const{devicePixelRatio:o=1,width:i,height:a,createCustomContext2D:s}=n;ra(this,_i,t,"f");const c=document.createElement("canvas");ra(this,zi,c,"f"),De(this,za,"m",wl).call(this),t.appendChild(c);const d=R0(c,{width:i,height:a,devicePixelRatio:o,offscreen:!0,createCustomContext2D:s}),l=new Pd({boardContent:d,container:t}),h=l.getSharer();h.setActiveViewSizeInfo({width:i,height:a,devicePixelRatio:o,contextWidth:i,contextHeight:a}),ra(this,Re,l,"f"),this.resize(h.getActiveViewSizeInfo());const u=l.getEventHub();new Ud(t,{eventHub:u})}isDestroyed(){return De(this,Re,"f").isDestroyed()}destroy(){De(this,Re,"f").destroy(),De(this,zi,"f").remove()}use(t,n){De(this,Re,"f").use(t,n)}disuse(t){De(this,Re,"f").disuse(t)}setData(t,n){Pr((t==null?void 0:t.elements)||[]),De(this,Re,"f").setData(t,n)}getData(){return De(this,Re,"f").getData()}scale(t){De(this,Re,"f").scale(t),De(this,Re,"f").getViewer().drawFrame()}resize(t){const n=De(this,Re,"f"),i=n.getSharer().getActiveViewSizeInfo();n.resize(Object.assign(Object.assign({},i),t))}clear(){De(this,Re,"f").clear()}on(t,n){De(this,Re,"f").getEventHub().on(t,n)}off(t,n){De(this,Re,"f").getEventHub().off(t,n)}trigger(t,n){De(this,Re,"f").getEventHub().trigger(t,n)}getViewInfo(){const n=De(this,Re,"f").getSharer(),o=n.getActiveViewSizeInfo(),i=n.getActiveViewScaleInfo();return{viewSizeInfo:o,viewScaleInfo:i}}refresh(){De(this,Re,"f").getViewer().drawFrame()}setViewScale(t){De(this,Re,"f").updateViewScaleInfo(t)}getLoadItemMap(){return De(this,Re,"f").getRenderer().getLoadItemMap()}onBoardWatcherEvents(){De(this,Re,"f").onWatcherEvents()}offBoardWatcherEvents(){De(this,Re,"f").offWatcherEvents()}}Re=new WeakMap,zi=new WeakMap,_i=new WeakMap,za=new WeakSet,wl=function(){const t=De(this,_i,"f");t.style.position="relative"};const ji="select",K3={mode:ji};function q3(){return{mode:ji,enableRuler:!1,enableScale:!1,enableScroll:!1,enableSelect:!1,enableTextEdit:!1,enableDrag:!1,enableInfo:!1,middlewareStyles:{selector:{},info:{},ruler:{},scroller:{},layoutSelector:{}}}}function e6(e){const t={selector:{},ruler:{},info:{},scroller:{},layoutSelector:{}};if(e.styles){const{selector:n,info:o,ruler:i,scroller:a,layoutSelector:s}=e.styles;Ie.string(n==null?void 0:n.activeColor)&&(t.selector.activeColor=n==null?void 0:n.activeColor),Ie.string(n==null?void 0:n.activeAreaColor)&&(t.selector.activeAreaColor=n==null?void 0:n.activeAreaColor),Ie.string(n==null?void 0:n.lockedColor)&&(t.selector.lockedColor=n==null?void 0:n.lockedColor),Ie.string(n==null?void 0:n.referenceColor)&&(t.selector.referenceColor=n==null?void 0:n.referenceColor),Ie.string(o==null?void 0:o.textBackground)&&(t.info.textBackground=o==null?void 0:o.textBackground),Ie.string(o==null?void 0:o.textColor)&&(t.info.textColor=o==null?void 0:o.textColor),Ie.string(i==null?void 0:i.background)&&(t.ruler.background=i==null?void 0:i.background),Ie.string(i==null?void 0:i.borderColor)&&(t.ruler.borderColor=i==null?void 0:i.borderColor),Ie.string(i==null?void 0:i.scaleColor)&&(t.ruler.scaleColor=i==null?void 0:i.scaleColor),Ie.string(i==null?void 0:i.textColor)&&(t.ruler.textColor=i==null?void 0:i.textColor),Ie.string(i==null?void 0:i.gridColor)&&(t.ruler.gridColor=i==null?void 0:i.gridColor),Ie.string(i==null?void 0:i.gridPrimaryColor)&&(t.ruler.gridPrimaryColor=i==null?void 0:i.gridPrimaryColor),Ie.string(i==null?void 0:i.selectedAreaColor)&&(t.ruler.selectedAreaColor=i==null?void 0:i.selectedAreaColor),Ie.string(a==null?void 0:a.thumbBackground)&&(t.scroller.thumbBackground=a==null?void 0:a.thumbBackground),Ie.string(a==null?void 0:a.thumbBorderColor)&&(t.scroller.thumbBorderColor=a==null?void 0:a.thumbBorderColor),Ie.string(a==null?void 0:a.hoverThumbBackground)&&(t.scroller.hoverThumbBackground=a==null?void 0:a.hoverThumbBackground),Ie.string(a==null?void 0:a.hoverThumbBorderColor)&&(t.scroller.hoverThumbBorderColor=a==null?void 0:a.hoverThumbBorderColor),Ie.string(a==null?void 0:a.activeThumbBackground)&&(t.scroller.activeThumbBackground=a==null?void 0:a.activeThumbBackground),Ie.string(a==null?void 0:a.activeThumbBorderColor)&&(t.scroller.activeThumbBorderColor=a==null?void 0:a.activeThumbBorderColor),Ie.string(s==null?void 0:s.activeColor)&&(t.layoutSelector.activeColor=s==null?void 0:s.activeColor)}return t}var t6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function n6(e){return t6(this,void 0,void 0,function*(){const{data:t,width:n,height:o,devicePixelRatio:i,viewScaleInfo:a,viewSizeInfo:s,loadItemMap:c}=e;let d=Mo({width:n,height:o,devicePixelRatio:i}),l=new nl({viewContext:d}),h=new tl({viewContext:d,calculator:l});h.setLoadItemMap(c),h.drawData(t,{viewScaleInfo:a,viewSizeInfo:s,forceDrawAll:!0});let u=null,f=d.$getOffscreenCanvas();if(f){const m=yield f.convertToBlob();u=window.URL.createObjectURL(m)}return f=null,d=null,l=null,h=null,{blobURL:u,width:n,height:o,devicePixelRatio:i}})}function o6(e){return["select","drag","readOnly"].includes(e)}function bl(e,t){const{enableRuler:n,enableScale:o,enableScroll:i,enableSelect:a,enableTextEdit:s,enableDrag:c,enableInfo:d}=t.getSnapshot(),l=t.get("middlewareStyles");i===!0?e.use(Gs,l==null?void 0:l.scroller):i===!1&&e.disuse(Gs),a===!0?(e.use(Vs,l==null?void 0:l.layoutSelector),e.use(Fs,l==null?void 0:l.selector)):a===!1&&(e.disuse(Vs),e.disuse(Fs)),o===!0?e.use(Ys):o===!1&&e.disuse(Ys),n===!0?e.use($s,l==null?void 0:l.ruler):n===!1&&e.disuse($s),s===!0?e.use(Xs):s===!1&&e.disuse(Xs),c===!0?e.use(Us):c===!1&&e.disuse(Us),d===!0?e.use(Bs,l==null?void 0:l.info):d===!1&&e.disuse(Bs),e.use(Q3)}function Ia(e,t,n){let o=!1,i=!1,a=!1,s=!1,c=!1,d=!1,l=!1,h="select";n.set("mode",h),o6(e)?h=e:console.warn(`${e} is invalid mode of iDraw.js`),h==="select"?(o=!0,i=!0,a=!0,l=!0,s=!0,c=!1,d=!0):h==="drag"?(o=!0,i=!0,a=!1,s=!1,c=!0,d=!0):h==="readOnly"&&(o=!1,i=!1,a=!1,s=!1,c=!1,d=!1),n.set("enableScale",o),n.set("enableScroll",i),n.set("enableSelect",a),n.set("enableTextEdit",s),n.set("enableDrag",c),n.set("enableRuler",d),n.set("enableInfo",l),bl(t,n)}var i6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},ue=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},la=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Eo,pe,So,Zt,El,Aa;class Fa{constructor(t,n){Eo.add(this),pe.set(this,void 0),So.set(this,void 0),Zt.set(this,new vn({defaultStorage:q3()}));const o=Object.assign(Object.assign({},K3),n);ue(this,Zt,"f").set("middlewareStyles",e6(o));const{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c}=o,d=new J3(t,{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c});la(this,pe,d,"f"),la(this,So,o,"f"),ue(this,Eo,"m",El).call(this)}reset(t){const n=ue(this,pe,"f"),o=ue(this,Zt,"f");o.clear(),Ia(t.mode||ji,n,o),n.refresh(),la(this,So,Object.assign(Object.assign({},ue(this,So,"f")),t),"f")}setMode(t){const n=ue(this,pe,"f"),o=ue(this,Zt,"f");Ia(t||ji,n,o),n.refresh()}enable(t){ue(this,Eo,"m",Aa).call(this,t,!0)}disable(t){ue(this,Eo,"m",Aa).call(this,t,!1)}setData(t){const n=ue(this,pe,"f");n.setData(t),n.trigger(de.CHANGE,{data:t,type:"setData"})}getData(t){const n=ue(this,pe,"f").getData();return n&&(t==null?void 0:t.compact)===!0?a0(n,{loadItemMap:ue(this,pe,"f").getLoadItemMap()}):n}getViewInfo(){return ue(this,pe,"f").getViewInfo()}scale(t){ue(this,pe,"f").scale(t)}setViewScale(t){const n=ue(this,pe,"f");n.setViewScale(t),n.refresh()}centerContent(t){const n=(t==null?void 0:t.data)||ue(this,pe,"f").getData(),{viewSizeInfo:o}=this.getViewInfo();if(n!=null&&n.layout||Array.isArray(n==null?void 0:n.elements)&&(n==null?void 0:n.elements.length)>0){const i=cd(n,{viewSizeInfo:o});this.setViewScale(i)}}resize(t){ue(this,pe,"f").resize(t)}on(t,n){ue(this,pe,"f").on(t,n)}off(t,n){ue(this,pe,"f").off(t,n)}trigger(t,n){ue(this,pe,"f").trigger(t,n)}selectElement(t){this.selectElements([t])}selectElements(t){this.trigger(de.SELECT,{uuids:t})}selectElementByPosition(t){this.selectElementsByPositions([t])}selectElementsByPositions(t){this.trigger(de.SELECT,{positions:t})}cancelElements(){this.trigger(de.CLEAR_SELECT,{uuids:[]})}createElement(t,n){const{viewScaleInfo:o,viewSizeInfo:i}=ue(this,pe,"f").getViewInfo();return sd(t,(n==null?void 0:n.element)||{},(n==null?void 0:n.viewCenter)===!0?{viewScaleInfo:o,viewSizeInfo:i}:void 0)}updateElement(t){const n=ue(this,pe,"f"),o=n.getData()||{elements:[]};Jt(t.uuid,t,o.elements),n.setData(o),n.refresh(),n.trigger(de.CHANGE,{data:o,type:"updateElement"})}addElement(t,n){var o;const i=ue(this,pe,"f"),a=i.getData()||{elements:[]};if(!n||!(!((o=n==null?void 0:n.position)===null||o===void 0)&&o.length))a.elements.push(t);else if(n!=null&&n.position){const s=[...n==null?void 0:n.position];Xr(t,s,a.elements)}return i.setData(a),i.refresh(),i.trigger(de.CHANGE,{data:a,type:"addElement"}),a}deleteElement(t){const n=ue(this,pe,"f"),o=n.getData()||{elements:[]};rd(t,o.elements),n.setData(o),n.refresh(),n.trigger(de.CHANGE,{data:o,type:"deleteElement"})}moveElement(t,n){const o=ue(this,pe,"f"),i=o.getData()||{elements:[]},a=wt(t,i.elements),{elements:s}=Di(i.elements,{from:a,to:n});i.elements=s,o.setData(i),o.refresh(),o.trigger(de.CHANGE,{data:i,type:"moveElement"})}getImageBlobURL(t){return i6(this,void 0,void 0,function*(){const n=this.getData()||{elements:[]},{devicePixelRatio:o}=t||{devicePixelRatio:1},i=Oa(n.elements),{viewSizeInfo:a}=this.getViewInfo();return yield n6({width:i.w,height:i.h,devicePixelRatio:o,data:n,viewScaleInfo:{scale:1,offsetLeft:-i.x,offsetTop:-i.y,offsetBottom:0,offsetRight:0},viewSizeInfo:Object.assign(Object.assign({},a),{devicePixelRatio:o}),loadItemMap:ue(this,pe,"f").getLoadItemMap()})})}isDestroyed(){return ue(this,pe,"f").isDestroyed()}destroy(){const t=ue(this,pe,"f"),n=ue(this,Zt,"f");t.destroy(),n.destroy()}getViewCenter(){const{viewScaleInfo:t,viewSizeInfo:n}=this.getViewInfo();return dd({viewScaleInfo:t,viewSizeInfo:n})}$onBoardWatcherEvents(){ue(this,pe,"f").onBoardWatcherEvents()}$offBoardWatcherEvents(){ue(this,pe,"f").offBoardWatcherEvents()}}pe=new WeakMap,So=new WeakMap,Zt=new WeakMap,Eo=new WeakSet,El=function(){const t=ue(this,pe,"f"),n=ue(this,Zt,"f");Ia("select",t,n)},Aa=function(t,n){const o=ue(this,Zt,"f");if(["ruler","scroll","scale","info"].includes(t)){const i={ruler:"enableRuler",scroll:"enableScroll",scale:"enableScale",info:"enableInfo"};o.set(i[t],!!n),bl(ue(this,pe,"f"),o),ue(this,pe,"f").refresh()}else t==="selectInGroup"?ue(this,pe,"f").trigger(de.SELECT_IN_GROUP,{enable:!!n}):t==="snapToGrid"&&ue(this,pe,"f").trigger(de.SNAP_TO_GRID,{enable:!!n})};const Te=de,ca="base-scale-selector",a6=e=>{const{className:t,style:n,defaultValue:o,value:i,onChange:a}=e,s=H(ca),c=H(ca,"menu-item"),d=H(ca,"input"),[l,h]=I.useState(100);I.useEffect(()=>{const g=we(parseFloat(i||"1")*100);h(g)},[i]);const u=g=>{const{key:p}=g;a==null||a(p)},f=g=>{g.stopPropagation()},v={items:[{label:r.createElement("span",{className:c},r.createElement(he,{className:d,size:"small",value:l,suffix:"%",onClick:f,step:1,min:10,max:1e4,controls:!1,onChange:g=>{if(g&&g>0){const p=we(g/100);a==null||a(`${p}`)}}})),key:"custom"},...[.5,1,2,3].map(g=>({key:`${g}`,label:r.createElement("span",{className:c},`${we(g*100)}%`)}))],onClick:u,selectedKeys:[`${i||o}`]};return I.useMemo(()=>r.createElement(eo,{className:fe(s,t),menu:v,placement:"bottom"},r.createElement(Oe,{icon:r.createElement(Hc,null),size:"small"},`${we(parseFloat(i||"1")*100)}%`)),[t,n,o,i,a,l])},rn="node",s6=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:f,onContextMenu:m,onGoToGroup:v,operations:g,isSelected:p}=e,[w,C]=I.useState(!1),[M,y]=I.useState(!1),k=I.useRef(s),S=l(d,rn),E=l(d,rn,"icon"),L=l(d,rn,"title"),N=l(d,rn,"title","input"),b=l(d,rn,"title","icon"),j=l(d,rn,"action"),_=l(d,rn,"selected"),V=I.useRef(0),X=I.useRef(null);I.useEffect(()=>{var x;w===!0&&((x=X.current)===null||x===void 0||x.focus())},[w]);const B=x=>{C(!1),h==null||h({uuid:a,value:x.target.value||""})},R=x=>{k.current=x.target.value||""},O=x=>{var T;x.code==="Enter"&&(C(!1),h==null||h({uuid:a,value:((T=x==null?void 0:x.target)===null||T===void 0?void 0:T.value)||""}))},P=x=>{x.stopPropagation(),x.preventDefault()},z=x=>{const T=Date.now(),D=T-V.current;V.current=T,D<=300&&D>0&&(x.stopPropagation(),x.preventDefault(),C(!0))},G=x=>{x.stopPropagation(),x.preventDefault(),f==null||f({uuid:a})},F=x=>{x.stopPropagation(),x.preventDefault(),u==null||u({uuid:a,operations:{invisible:!g.invisible}})},A=x=>{x.stopPropagation(),x.preventDefault(),v==null||v({uuid:i,position:c})},Z=x=>{x.stopPropagation(),x.preventDefault(),u==null||u({uuid:a,operations:{locked:!g.locked}})},Y=x=>{x.preventDefault(),m==null||m({uuids:[i],positions:[c]})};return I.useMemo(()=>{k.current=s;function x(T){return T==="rect"?r.createElement(xr,{className:b}):T==="circle"?r.createElement(vr,{className:b}):T==="text"?r.createElement(zr,{className:b}):T==="path"?r.createElement(jc,{className:b}):T==="image"?r.createElement(Er,{className:b}):T==="svg"?r.createElement(Mr,{className:b}):T==="group"?r.createElement(wr,{className:b}):T==="html"?r.createElement(br,{className:b}):r.createElement("span",{className:b})}return r.createElement("span",{key:a,style:n,className:fe(S,t,p?_:null),onClick:z,onContextMenu:Y},r.createElement("span",{className:L},x(o),r.createElement("span",null,s)),M&&r.createElement("span",{className:j},o==="group"&&r.createElement(fc,{className:E,onClick:A}),g.invisible?r.createElement(Sr,{className:E,onClick:F}):r.createElement(Ra,{className:E,onClick:F}),g.locked?r.createElement(kc,{className:E,onClick:Z}):r.createElement(Xc,{className:E,onClick:Z}),r.createElement(pr,{className:E,onClick:G})),w&&r.createElement("span",{className:N},r.createElement(Kt,{ref:X,size:"small",defaultValue:s,onBlur:B,onClick:P,onKeyDown:O,onChange:R,onContextMenu:T=>{T.stopPropagation(),T.preventDefault()}})))},[a,s,w,o,M,g,p])};function r6(e,t){const n=[],{position:o,reverse:i}=t;if(Array.isArray(e)){const a=[...o];if(i===!0)for(let s=e.length-1;s>=0;s--){const c=e[s];a.push(s),n.push(Vi(c,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()}else e.forEach((s,c)=>{a.push(c),n.push(Vi(s,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()})}return n}const Vi=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onContextMenu:c,onGoToGroup:d,position:l,selectedKeys:h}=t,u={key:e.key,title:r.createElement(s6,{parentModName:n,uuid:e.key,title:e.title,position:l,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onContextMenu:c,onGoToGroup:d,isSelected:h==null?void 0:h.includes(e.key)}),children:[]};if(Array.isArray(e.children)){const f=[...l];if(t.reverse===!0)for(let m=e.children.length-1;m>=0;m--){const v=e.children[m];f.push(m),u.children.push(Vi(v,Object.assign(Object.assign({},t),{position:[...f]}))),f.pop()}else e.children.forEach((m,v)=>{f.push(v),u.children.push(Vi(m,Object.assign(Object.assign({},t),{position:[...f]}))),f.pop()})}return u},{DirectoryTree:l6}=cr,Zs="base-element-tree";function da(e,t,n){var o;const i=[];let a=t;for(let s=0;s<e.length;s++){const c=e[s];let d=-1;c===0?d=a.length-1:c>=a.length-1?d=0:d=a.length-1-c,i.push(d),a=(o=a[d])===null||o===void 0?void 0:o.children}return(n==null?void 0:n.isToPosition)===!0&&i.length>0&&(i[i.length-1]+=1),i}const ua=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},Sl=r.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,onContextMenu:l,selectedKeys:h,onDrop:u,defaultExpandedKeys:f,onDelete:m,onExpand:v,onGoToGroup:g,reverse:p=!0}=e,w=(M,y)=>{const k=ua(y.node.pos);let S=[k];p===!0&&(S=[da(k,a||[])]);const E=[M[0]];d==null||d({uuids:E,positions:S})},C=({uuid:M})=>{m==null||m({uuid:M})};return I.useMemo(()=>{const M=r6(a||[],{parentModName:Zs,generateClassName:H,onSelect:y=>{d==null||d(y)},onContextMenu:l,onTitleChange:s,onOperationToggle:c,onDelete:C,onGoToGroup:g,position:[],selectedKeys:h||[],reverse:!!p});return r.createElement(l6,{ref:t,height:n,style:i,className:fe(H(Zs),o),showLine:!0,blockNode:!0,selectedKeys:h,switcherIcon:r.createElement(Da,null),icon:null,onSelect:w,treeData:M,defaultExpandedKeys:f,onExpand:v,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:y=>{const{dragNode:k,node:S,dropToGap:E,dropPosition:L}=y,N=ua(k.pos),b=ua(S.pos);E===!0&&L>=0?b[b.length-1]=L:S.dragOverGapBottom===!0?b[b.length-1]=b[b.length-1]+1:S.dragOverGapTop===!0?b[b.length-1]=Math.max(0,b[b.length-1]-1):S.dragOver===!0&&b.push(0);let j=N,_=b;p===!0&&(j=da(N,a||[]),_=da(b,a||[],{isToPosition:!0})),u==null||u({from:j,to:_})}})},[o,i,w,a,h])}),ln="node",c6=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:f,onSelect:m,operations:v,isSelected:g}=e,[p,w]=I.useState(!1),[C,M]=I.useState(!1),y=I.useRef(s),k=l(d,ln),S=l(d,ln,"icon"),E=l(d,ln,"title"),L=l(d,ln,"title","input"),N=l(d,ln,"title","icon"),b=l(d,ln,"action"),j=l(d,ln,"selected"),_=I.useRef(0),V=I.useRef(null);I.useEffect(()=>{var F;p===!0&&((F=V.current)===null||F===void 0||F.focus())},[p]);const X=F=>{w(!1),h==null||h({uuid:a,value:F.target.value||""})},B=F=>{y.current=F.target.value||""},R=F=>{var A;F.code==="Enter"&&(w(!1),h==null||h({uuid:a,value:((A=F==null?void 0:F.target)===null||A===void 0?void 0:A.value)||""}))},O=F=>{F.stopPropagation(),F.preventDefault()},P=F=>{const A=Date.now(),Z=A-_.current;_.current=A,m==null||m({uuids:[i],positions:[c]}),Z<=300&&Z>0&&(F.stopPropagation(),F.preventDefault(),w(!0))},z=F=>{F.stopPropagation(),F.preventDefault(),f==null||f({uuid:a})},G=F=>{F.stopPropagation(),F.preventDefault(),u==null||u({uuid:a,operations:{invisible:!v.invisible}})};return I.useMemo(()=>(y.current=s,r.createElement("span",{key:a,style:n,className:fe(k,t,g?j:null),onClick:P},r.createElement("span",{className:E},r.createElement(Nc,{className:N}),r.createElement("span",null,s)),C&&r.createElement("span",{className:b},v.invisible?r.createElement(Sr,{className:S,onClick:G}):r.createElement(Ra,{className:S,onClick:G}),r.createElement(pr,{className:S,onClick:z})),p&&r.createElement("span",{className:L},r.createElement(Kt,{ref:V,size:"small",defaultValue:s,onBlur:X,onClick:O,onKeyDown:R,onChange:B})))),[a,s,p,o,C,v,g])};function d6(e,t){const n=[],{position:o,reverse:i}=t;if(Array.isArray(e)){const a=[...o];if(i===!0)for(let s=e.length-1;s>=0;s--){const c=e[s];a.push(s),n.push(Qs(c,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()}else e.forEach((s,c)=>{a.push(c),n.push(Qs(s,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()})}return n}const Qs=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,position:c,selectedKeys:d}=t;return{key:e.key,title:r.createElement(c6,{parentModName:n,uuid:e.key,title:e.title,position:c,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,isSelected:d==null?void 0:d.includes(e.key)})}},{DirectoryTree:u6}=cr,Js="base-page-tree",ha=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t};function fa(e,t,n){const o=[];for(let i=0;i<e.length;i++){const a=e[i];let s=-1;a===0?s=t.length-1:a>=t.length-1?s=0:s=t.length-1-a,o.push(s)}return(n==null?void 0:n.isToPosition)===!0&&o.length>0&&(o[o.length-1]+=1),o}const h6=r.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,selectedKeys:l,onDrop:h,defaultExpandedKeys:u,expandedKeys:f,onDelete:m,reverse:v=!0}=e,g=(w,C)=>{const M=ha(C.node.pos);let y=[M];v===!0&&(y=[fa(M,a||[])]);const k=[w[0]];d==null||d({uuids:k,positions:y})},p=({uuid:w})=>{m==null||m({uuid:w})};return I.useMemo(()=>{const w=d6(a||[],{parentModName:Js,generateClassName:H,onTitleChange:s,onOperationToggle:c,onDelete:p,position:[],selectedKeys:l||[],reverse:!!v});return r.createElement(u6,{ref:t,height:n,style:i,className:fe(H(Js),o),showLine:!0,blockNode:!0,multiple:!0,selectedKeys:l,switcherIcon:r.createElement(Da,null),icon:null,onSelect:g,treeData:w,defaultExpandedKeys:u,expandedKeys:f,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:C=>{const{dragNode:M,node:y,dropToGap:k,dropPosition:S}=C,E=ha(M.pos),L=ha(y.pos);k===!0&&S>=0?L[L.length-1]=S:y.dragOverGapBottom===!0?L[L.length-1]=L[L.length-1]+1:y.dragOverGapTop===!0?L[L.length-1]=Math.max(0,L[L.length-1]-1):y.dragOver===!0&&L.push(0);let N=E,b=L;v===!0&&(N=fa(E,a||[]),b=fa(L,a||[],{isToPosition:!0})),h==null||h({from:N,to:b})}})},[o,i,g,a,l])});var f6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const m6=e=>{const{value:t,onChange:n}=e,o=f6(e,["value","onChange"]),i=s=>{n==null||n(s)},a=()=>{i(!t)};return r.createElement(Oe,Object.assign({},o,{type:t?"primary":"default",onClick:a}))},g6="ElementDetail",qt=()=>{const[e]=La(g6);return e},ro="base-element-basic-attribute",Bt=e=>ze.number(e*1)?we(e*1):e,Ks=e=>{if(ze.number(e*1)){const t=we(e*1);return ct(t)}return e},v6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=I.useRef(null),c=H(ro),d=H(ro,"row"),l=H(ro,"col"),h=H(ro,"input"),u=H(ro,"form-item"),f=qt(),m=v=>{var g;((g=o==null?void 0:o.operations)===null||g===void 0?void 0:g.limitRatio)===!0&&(v!=null&&v.hasOwnProperty("w")?v.h=we(v.w/o.w*o.h):v!=null&&v.hasOwnProperty("h")&&(v.w=we(v.h/o.h*o.w))),i==null||i(v)};return I.useEffect(()=>{var v;const{type:g,x:p,y:w,w:C,h:M,angle:y=0,operations:k={}}=o||{},S={x:p,y:w,w:C,h:M,angle:y,operations:{limitRatio:k.limitRatio}};g==="group"&&(S.operations.deepResize=k.deepResize),(v=s.current)===null||v===void 0||v.setFieldsValue(S)},[o]),I.useMemo(()=>r.createElement(q,{ref:s,style:n,className:fe(c,t),onValuesChange:m},r.createElement(me,{className:d},r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"x"},r.createElement(he,{className:h,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:Bt,parser:Bt}))),r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"y"},r.createElement(he,{className:h,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:Bt,parser:Bt})))),r.createElement(me,{className:d},r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"w"},r.createElement(he,{className:h,size:"small",placeholder:"Width",prefix:f.w,disabled:a,formatter:Bt,parser:Bt}))),r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"h"},r.createElement(he,{className:h,size:"small",placeholder:"Height",prefix:f.h,disabled:a,formatter:Bt,parser:Bt}))),r.createElement(K,{span:4,className:l},r.createElement(q.Item,{className:u,name:["operations","limitRatio"]},r.createElement(m6,{icon:r.createElement(Sc,null),size:"small",disabled:a})))),r.createElement(me,{className:d},r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"angle"},r.createElement(he,{className:h,size:"small",placeholder:"Angle",prefix:r.createElement(Fc,{style:{fontSize:14}}),disabled:a,formatter:Ks,parser:Ks,suffix:"°"})))),(o==null?void 0:o.type)==="group"&&r.createElement(me,{className:d},r.createElement(K,{span:18,className:l},f.deepResizeInGroup),r.createElement(K,{span:6,className:l},r.createElement(q.Item,{className:u,name:["operations","deepResize"]},r.createElement(lr,{size:"small"}))))),[f,a,o])},$e="base-element-field-multiple-color-picker",p6=["transparent","#FFFFFF","#000000","#AAAAAA","#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"],y6=({value:e="",onChange:t,className:n,diabledColorBlocks:o=!0})=>{const i=H($e,"color-block"),a=H($e,"color-block-active");return r.createElement(r.Fragment,null,!o&&r.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:10,paddingBottom:0}},p6.map(s=>r.createElement(_l,{className:fe(i,{[a]:s.toUpperCase()===(e==null?void 0:e.toUpperCase())}),key:s,color:s,prefixCls:"rc-color-picker",onClick:()=>{t==null||t(s)}}))),r.createElement(jl,{className:n,value:new Vl(e),onChange:s=>{const c=`${s.toHexString().toUpperCase()}`,d=c.length===9&&c.endsWith("FF")?`${s.toHexString().toUpperCase()}`:c;t==null||t(d)}}))},Cl=16,qs=e=>{var t,n;const o=(t=e.currentTarget.parentElement)===null||t===void 0?void 0:t.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),a=e.clientX-o.x-Cl/2;let s=parseFloat((n=a/i.width)===null||n===void 0?void 0:n.toFixed(2));return s=Math.min(Math.max(s,0),1),s};function w6(e){const{mode:t,value:n,internalColor:o,internalLinearGradient:i,internalRadialGradient:a,currentPickedColor:s,onChange:c,onSelectStop:d}=e,[l,h]=I.useState(Ti(n)),[u,f]=I.useState(null),m=I.useRef(!1),v=H($e,"gradient-root"),g=H($e,"gradient-delete"),p=H($e,"gradient"),w=H($e,"gradient-bar"),C=H($e,"gradient-point"),M=H($e,"gradient-point-active");I.useEffect(()=>{var b;const j=Ti(n);h(j),["linear-gradient","radial-gradient"].includes(n==null?void 0:n.type)&&(u||f((b=n==null?void 0:n.stops)===null||b===void 0?void 0:b[0]))},[n]),I.useEffect(()=>{u?d==null||d(Object.assign({},u)):d==null||d(u)},[u]);const y=b=>{b.stopPropagation(),m.current=!0;const j=qs(b);let _=null;if(t==="linear-gradient"?_=i:t==="radial-gradient"&&(_=a),_){const V=[..._.stops];for(let B=0;B<V.length;B++){const R=V[B],O=V[B+1],P={offset:j,color:s};if(R.offset===j)break;if(j<R.offset){V.unshift(P),f(P);break}else if(R.offset<j&&j<(O==null?void 0:O.offset)){V.splice(B+1,0,P),f(P);break}else if(j>R.offset&&!O){V.push(P),f(P);break}if(!O)break}const X=Object.assign(Object.assign({},_),{stops:V});c==null||c(X)}},k=b=>{if(m.current===!0&&u){const j=qs(b);let _=null;if(t==="linear-gradient"?_=i:t==="radial-gradient"&&(_=a),_){const V=[..._.stops];for(let R=0;R<V.length;R++){const O=V[R];if(O.offset===u.offset){O.offset=j,f(Object.assign({},O));break}}const X=V.sort((R,O)=>R.offset-O.offset),B=Object.assign(Object.assign({},_),{stops:X});c==null||c(B)}}},S=b=>{b.stopPropagation(),m.current=!1},E=(b,j)=>{b.stopPropagation(),f(j),m.current=!0},L=()=>{let b=null;t==="linear-gradient"?b=i:t==="radial-gradient"&&(b=a);let j=-1;if(b&&u){const _=[...b.stops];for(let V=0;V<_.length;V++)if(_[V].offset===u.offset){j=V;break}if(j>=0){_.splice(j,1);const V=Object.assign(Object.assign({},b),{stops:_});c==null||c(V)}}},N=()=>{m.current=!1};return I.useMemo(()=>{var b,j,_;return r.createElement(r.Fragment,null,(t==="linear-gradient"||t==="radial-gradient")&&r.createElement("div",{className:v},r.createElement("div",{className:p,"data-css":l,style:{background:l}},r.createElement("div",{className:w,onMouseDown:y,onMouseUp:S,onMouseMove:k,onMouseLeave:S},(_=(j=(b=t==="linear-gradient"?i:a)===null||b===void 0?void 0:b.stops)===null||j===void 0?void 0:j.map)===null||_===void 0?void 0:_.call(j,(V,X)=>r.createElement("span",{key:X,className:fe({[C]:!0,[M]:(u==null?void 0:u.offset)===V.offset}),style:{left:`calc(${V.offset*100}% - ${Cl/2}px)`,background:V.color},onMouseDown:B=>{E(B,V)},onMouseUp:N})))),r.createElement("div",{className:g,onClick:V=>{V.stopPropagation(),L()}},r.createElement(Ic,null))))},[t,l,s,o,i,a,u])}function er(e){let t="solid";return e&&(e!=null&&e.type)&&(t=e.type),t}function b6(e){const{className:t,value:n,onChange:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,[c,d]=I.useState(Ti(n)),[l,h]=I.useState(er(n)),[u,f]=I.useState("#000000"),[m,v]=I.useState(null),[g,p]=I.useState(null),[w,C]=I.useState(null),M=I.useRef(null),y=I.useRef(null),k=I.useRef(null),S=H($e),E=H($e,"header"),L=H($e,"internal-picker"),N=H($e,"radio-group"),b=H($e,"row"),j=H($e,"col"),_=H($e,"input"),V=H($e,"form-item");I.useEffect(()=>{d(Ti(n)),h(er(n)),typeof n=="string"?(v(n),f(n)):(n==null?void 0:n.type)==="linear-gradient"?p(n):(n==null?void 0:n.type)==="radial-gradient"&&C(n)},[n]),I.useEffect(()=>{var P,z;l==="linear-gradient"&&(n==null?void 0:n.type)===l?(P=y.current)===null||P===void 0||P.setFieldsValue(n):l==="radial-gradient"&&(n==null?void 0:n.type)===l&&((z=k.current)===null||z===void 0||z.setFieldsValue(n))},[l,n]);const X=P=>{var z,G,F,A,Z,Y;let x;P==="linear-gradient"?(x={type:"linear-gradient",start:{x:0,y:0},end:{x:0,y:(i==null?void 0:i.h)||0},stops:[]},typeof n=="string"?(x.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],p(x)):(n==null?void 0:n.type)==="radial-gradient"&&(x.stops=[...(n==null?void 0:n.stops)||[]],p(x)),(z=y.current)===null||z===void 0||z.setFieldsValue(x)):P==="radial-gradient"?(x={type:"radial-gradient",inner:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:0},outer:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:Math.min(((i==null?void 0:i.w)||0)/2,((i==null?void 0:i.h)||0)/2)},stops:[]},typeof n=="string"?(x.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],C(x)):(n==null?void 0:n.type)==="linear-gradient"&&(x.stops=[...(n==null?void 0:n.stops)||[]],C(x)),(G=k.current)===null||G===void 0||G.setFieldsValue(x)):P==="solid"&&(x=n,(n==null?void 0:n.type)==="linear-gradient"?(x=((A=(F=n==null?void 0:n.stops)===null||F===void 0?void 0:F[0])===null||A===void 0?void 0:A.color)||"#000000",v(x)):(n==null?void 0:n.type)==="radial-gradient"&&(x=((Y=(Z=n==null?void 0:n.stops)===null||Z===void 0?void 0:Z[0])===null||Y===void 0?void 0:Y.color)||"#000000",v(x))),x&&(o==null||o(x))},B=P=>{if(l==="solid")o==null||o(P.color);else if(M.current){if(l==="linear-gradient"&&g&&Array.isArray(g==null?void 0:g.stops)){const z=[...g.stops];for(let F=0;F<z.length;F++)if(z[F].offset===M.current.offset){z[F].color=P.color;break}const G=Object.assign(Object.assign({},g),{stops:z});p(G),o==null||o(G)}else if(l==="radial-gradient"&&w&&Array.isArray(w==null?void 0:w.stops)){const z=[...w.stops];for(let F=0;F<z.length;F++)if(z[F].offset===M.current.offset){z[F].color=P.color;break}const G=Object.assign(Object.assign({},w),{stops:z});C(G),o==null||o(G)}}},R=P=>{const z=Object.assign({},g);P!=null&&P.start&&(z.start=Object.assign(Object.assign({},z.start),P.start)),P!=null&&P.end&&(z.end=Object.assign(Object.assign({},z.end),P.end)),o==null||o(z)},O=P=>{const z=Object.assign({},w);P!=null&&P.inner&&(z.inner=Object.assign(Object.assign({},z.inner),P.inner)),P!=null&&P.outer&&(z.outer=Object.assign(Object.assign({},z.outer),P.outer)),o==null||o(z)};return I.useMemo(()=>r.createElement("div",{className:fe(S,t)},!a&&!s&&r.createElement("div",{className:E},r.createElement(st.Group,{className:N,size:"small",buttonStyle:"solid",value:l,onChange:({target:{value:P}})=>{X(P)}},r.createElement(st.Button,{value:"solid"},r.createElement(Yc,null)),!a&&r.createElement(st.Button,{value:"linear-gradient"},r.createElement(Bc,null)),!s&&r.createElement(st.Button,{value:"radial-gradient"},r.createElement(Ac,null)))),!a&&l==="linear-gradient"&&r.createElement("div",{style:{marginBottom:10}},r.createElement(q,{ref:y,onValuesChange:R},r.createElement(me,{className:b},r.createElement(K,{className:j,span:"4"},"Start"),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["start","x"]},r.createElement(he,{className:_,size:"small",prefix:"X"}))),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["start","y"]},r.createElement(he,{className:_,size:"small",prefix:"Y"})))),r.createElement(me,{className:b},r.createElement(K,{className:j,span:"4"},"End"),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["end","x"]},r.createElement(he,{className:_,size:"small",prefix:"X"}))),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["end","y"]},r.createElement(he,{className:_,size:"small",prefix:"Y"})))))),!s&&l==="radial-gradient"&&r.createElement("div",{style:{marginBottom:10}},r.createElement(q,{ref:k,onValuesChange:O},r.createElement(me,{className:b},r.createElement(K,{className:j,span:"4"},"Inner"),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["inner","x"]},r.createElement(he,{className:_,size:"small",prefix:"X"}))),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["inner","y"]},r.createElement(he,{className:_,size:"small",prefix:"Y"})))),r.createElement(me,{className:b},r.createElement(K,{className:j,span:"4"}),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["inner","radius"]},r.createElement(he,{className:_,size:"small",prefix:"R"})))),r.createElement(me,{className:b},r.createElement(K,{className:j,span:"4"},"Outer"),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["outer","x"]},r.createElement(he,{className:_,size:"small",prefix:"X"}))),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["outer","y"]},r.createElement(he,{className:_,size:"small",prefix:"Y"})))),r.createElement(me,{className:b},r.createElement(K,{className:j,span:"4"}),r.createElement(K,{className:j,span:"10"},r.createElement(q.Item,{className:V,name:["outer","radius"]},r.createElement(he,{className:_,size:"small",prefix:"R"})))))),(!a||!s)&&(l==="linear-gradient"||l==="radial-gradient")&&r.createElement(w6,{mode:l,value:n,currentPickedColor:u,internalColor:m,internalLinearGradient:g,internalRadialGradient:w,onChange:P=>{(P==null?void 0:P.type)==="linear-gradient"?(p(P),o==null||o(P)):(P==null?void 0:P.type)==="radial-gradient"&&(C(P),o==null||o(P))},onSelectStop:P=>{P!=null&&P.color&&f(P.color),M.current=P}}),r.createElement(y6,{diabledColorBlocks:["linear-gradient","radial-gradient"].includes(l),value:u,className:L,onChange:P=>{f(P),B({color:P})}})),[l,c,m,g,w,u,a,s])}const tr="base-element-field-multiple-color";function wn(e){const{value:t,onChange:n,disabled:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,c=qt(),l=(p=>{let w="";return typeof p=="string"?w=p:["linear-gradient","radial-gradient"].includes(p==null?void 0:p.type)&&(w=c.gradient),w})(t),h=typeof t=="string",{container:u,getContainer:f}=I.useContext(bn),m=H(tr),v=H(tr,"preview"),g=I.useRef(u);return I.useEffect(()=>{!g.current&&u&&(g.current=u)},[u]),I.useMemo(()=>{const p=o0(t||"transparent");return r.createElement(r.Fragment,null,r.createElement(Kt,{className:m,size:"small",disabled:o,prefix:o?r.createElement("span",null):r.createElement(dr,{placement:"left",getPopupContainer:f,style:{padding:0},content:r.createElement(b6,{value:t,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s,onChange:n}),trigger:"click"},r.createElement("span",{className:v,style:{background:p}})),readOnly:!h,value:l,onChange:w=>{n==null||n(w.target.value)}}))},[t,n,o,i])}const ma=e=>r.createElement(ie,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 384a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m0 170.666667a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m170.666667 0a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m-170.666667 170.666666a42.666667 42.666667 0 1 0-42.666667-42.666666 42.666667 42.666667 0 0 0 42.666667 42.666666z m341.333333-597.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v682.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h682.666666a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667z m-42.666666 682.666667H213.333333V213.333333h597.333334zM341.333333 554.666667a42.666667 42.666667 0 1 0-42.666666-42.666667 42.666667 42.666667 0 0 0 42.666666 42.666667z"}))),lo="base-element-border-attribute",Ta=4;function co(e){const{borderRadius:t,borderWidth:n,borderColor:o,boxSizing:i,borderDash:a}=(e==null?void 0:e.detail)||{};let s="solid",c=Ta;Array.isArray(a)&&(a==null?void 0:a.length)>0&&a[0]>=1&&typeof n=="number"&&(s="dash",c=Math.ceil(a[0]));const d={borderRadiusList:[0,0,0,0],borderWidthList:[0,0,0,0],borderColor:o,borderType:s,boxSizing:i,borderDashNum:c};return typeof t=="number"?(d.borderRadius=t,d.borderRadiusList=[t,t,t,t]):Array.isArray(t)?d.borderRadiusList=[t[0]||0,t[1]||0,t[2]||0,t[3]||0]:d.borderRadius=0,typeof n=="number"?(d.borderWidth=n,d.borderWidthList=[n,n,n,n]):Array.isArray(n)?d.borderWidthList=[n[0]||0,n[1]||0,n[2]||0,n[3]||0]:d.borderWidth=0,d}const E6=e=>{var t,n;const{className:o,style:i,element:a,disabled:s,onChange:c}=e,d=I.useRef(null),l=H(lo),h=H(lo,"row"),u=H(lo,"col"),f=H(lo,"input"),m=H(lo,"form-item"),[v,g]=I.useState(Array.isArray((t=a==null?void 0:a.detail)===null||t===void 0?void 0:t.borderRadius)),[p,w]=I.useState(Array.isArray((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.borderWidth)),[C,M]=I.useState(p),y=qt(),k=S=>{var E,L;const N=co(a),{borderColor:b,boxSizing:j,borderType:_,borderDashNum:V}=S,X={};if(b&&(X.borderColor=b),j&&(X.boxSizing=j),p===!0&&S.borderWidthList){const B=[0,0,0,0],R=Array.from((S==null?void 0:S.borderWidthList)||[null,null,null,null]);for(let O=0;O<4;O++){const P=R[O];typeof P=="number"?B[O]=P:B[O]=((E=N==null?void 0:N.borderWidthList)===null||E===void 0?void 0:E[O])||0,X.borderWidth=B}}else typeof S.borderWidth=="number"&&(X.borderWidth=S.borderWidth);if(v===!0&&S.borderRadiusList){const B=[0,0,0,0],R=Array.from((S==null?void 0:S.borderRadiusList)||[null,null,null,null]);for(let O=0;O<4;O++){const P=R[O];typeof P=="number"?B[O]=P:B[O]=((L=N==null?void 0:N.borderRadiusList)===null||L===void 0?void 0:L[O])||0,X.borderRadius=B}}else typeof S.borderRadius=="number"&&(X.borderRadius=S.borderRadius);p===!0?X.borderDash=[]:_==="solid"?X.borderDash=[]:_==="dash"?X.borderDash=[Ta,Ta]:V&&V>0&&(X.borderDash=[V,V]),c==null||c({detail:X})};return I.useEffect(()=>{var S,E,L;const N=Array.isArray((S=a==null?void 0:a.detail)===null||S===void 0?void 0:S.borderWidth),b=Array.isArray((E=a==null?void 0:a.detail)===null||E===void 0?void 0:E.borderRadius);w(N),g(b),M(N);const j=co(a);(L=d.current)===null||L===void 0||L.setFieldsValue(j)},[a]),I.useMemo(()=>{const S=co(a);return r.createElement(q,{ref:d,style:i,className:fe(l,o),onValuesChange:k},r.createElement(r.Fragment,null,r.createElement(me,{className:h},r.createElement(K,{span:16,className:u},p?r.createElement(Kt,{className:f,size:"small",prefix:r.createElement(ma,{style:{fontSize:14}}),disabled:!0,value:y.mixedBorderWidth}):r.createElement(q.Item,{className:m,name:"borderWidth"},r.createElement(he,{className:f,size:"small",min:0,placeholder:"Border Width",prefix:r.createElement(ma,{style:{fontSize:14}}),disabled:s||p}))),r.createElement(K,{span:4,className:u},r.createElement(Oe,{icon:r.createElement(ma,null),size:"small",disabled:s,type:p?"primary":"default",onClick:()=>{var E;const L=!p;if(w(L),M(L),!L){const N=co(a),b=N.borderWidth||((E=N.borderWidthList)===null||E===void 0?void 0:E[0])||0;k({borderWidth:b})}}}))),p&&r.createElement(r.Fragment,null,r.createElement(me,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderWidthList",0]},r.createElement(he,{className:f,size:"small",prefix:r.createElement(bc,null),disabled:s||!p,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderWidthList",1]},r.createElement(he,{className:f,size:"small",prefix:r.createElement(wc,null),disabled:s||!p,min:0})))),r.createElement(me,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderWidthList",2]},r.createElement(he,{className:f,size:"small",prefix:r.createElement(vc,null),disabled:s||!p,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderWidthList",3]},r.createElement(he,{className:f,size:"small",prefix:r.createElement(yc,null),disabled:s||!p,min:0})))))),!["circle"].includes(a==null?void 0:a.type)&&r.createElement(r.Fragment,null,r.createElement(me,{className:h},r.createElement(K,{span:16,className:u},v?r.createElement(Kt,{className:f,size:"small",prefix:r.createElement(os,{style:{fontSize:14}}),disabled:!0,value:y.mixedBorderRadius}):r.createElement(q.Item,{className:m,name:"borderRadius"},r.createElement(he,{className:f,size:"small",placeholder:"Radius",prefix:r.createElement(os,{style:{fontSize:14}}),disabled:s||v||C,min:0}))),r.createElement(K,{span:4,className:u},r.createElement(Oe,{icon:r.createElement(Dc,null),size:"small",disabled:s||C,type:v?"primary":"default",onClick:()=>{var E;const L=!v;if(g(L),!L){const N=co(a),b=N.borderRadius||((E=N.borderRadiusList)===null||E===void 0?void 0:E[0])||0;k({borderRadius:b})}}}))),v&&r.createElement(r.Fragment,null,r.createElement(me,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderRadiusList",0]},r.createElement(he,{className:f,size:"small",placeholder:"",prefix:r.createElement(Mc,null),disabled:s||!v||C,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderRadiusList",1]},r.createElement(he,{className:f,size:"small",placeholder:"",prefix:r.createElement(zc,null),disabled:s||!v||C,min:0})))),r.createElement(me,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderRadiusList",2]},r.createElement(he,{className:f,size:"small",placeholder:"",prefix:r.createElement(Cc,null),disabled:s||!v||C,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:m,name:["borderRadiusList",3]},r.createElement(he,{className:f,size:"small",placeholder:"",prefix:r.createElement(xc,null),disabled:s||!v||C,min:0})))))),r.createElement(me,{className:h},r.createElement(K,{className:u,span:"11"},r.createElement(q.Item,{className:m,name:"boxSizing"},r.createElement(et,{size:"small",disabled:s},r.createElement(et.Option,{value:"border-box"},y.inside),r.createElement(et.Option,{value:"content-box"},y.outside),r.createElement(et.Option,{value:"center-line"},y.centerLine)))),r.createElement(K,{className:u,span:"13"},r.createElement(q.Item,{className:m,name:"borderColor"},r.createElement(wn,{elementSize:a?pn(a):void 0,disabled:s,disabledLinearGradient:!0,disabledRadialGradient:!0})))),r.createElement(me,{className:h},r.createElement(K,{className:u,span:"11"},r.createElement(q.Item,{className:m,name:"borderType"},r.createElement(et,{size:"small",disabled:s||p},r.createElement(et.Option,{value:"solid"},y.solid),r.createElement(et.Option,{value:"dash"},y.dash)))),r.createElement(K,{className:u,span:"13"},S.borderType==="dash"&&r.createElement(q.Item,{className:m,name:"borderDashNum"},r.createElement(he,{disabled:s||p,className:f,size:"small",style:{width:"100%"},prefix:r.createElement(pc,{style:{fontSize:14}})})))))},[y,a,s,v,p,C])},S6="base-element-detail-circle",C6=e=>{const{className:t,style:n}=e,o=H(S6);return I.useMemo(()=>r.createElement("div",{style:n,className:fe(o,t)}),[n,t])};var x6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{TextArea:M6}=Kt,Dn="base-element-field-image-picker",{useCallback:nr}=r,z6=["image/png","image/jpeg","image/jpg","image/png"],I6=({value:e="",onChange:t})=>{const[n,o]=I.useState(e),[i,a]=I.useState("free"),s=H(Dn),c=H(Dn,"box"),d=H(Dn,"entity"),l=H(Dn,"action"),h=H(Dn,"action-text"),u=H(Dn,"action-upload"),f=nr(p=>{const w=p||"";let C=3;const M=300;return w.length>128&&(C=10),{rows:C,width:M}},[n]),m=p=>{t==null||t(p||e)},v=p=>{o(p),ze.imageSrc(p)&&m(p)},g=nr(()=>{i!=="picking"&&(Pa({success:p=>x6(void 0,void 0,void 0,function*(){if(z6.includes(p.file.type)!==!0){To.error(`File's type "${p.file.type}" is not supported!`);return}try{const w=yield qc(p.file);v(w.toString())}catch{To.error(`Failed to parse file ${p.file.name}`)}a("free")}),error:p=>{console.log(p),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return I.useMemo(()=>r.createElement("div",{className:s},r.createElement("div",{className:c},r.createElement("img",{className:d,src:e||n}),r.createElement("div",{className:l},r.createElement("div",{className:h},r.createElement(dr,{content:()=>r.createElement("div",null,r.createElement(M6,{value:e||n,style:{width:f(e||n).width},rows:f(e||n).rows,onChange:p=>{v(p.target.value||"")}})),trigger:"click"},r.createElement("span",{style:{display:"inline-block",width:"100%",height:"100%",lineHeight:"50px"}},"URL"))),r.createElement("div",{onClick:g,className:u},r.createElement("span",null,"Upload"))))),[e,n])},A6="base-element-detail-image",T6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=H(A6),l=I.useRef(null),h=f=>{const{src:m=""}=(f==null?void 0:f.detail)||{};return{src:m,imageResource:(a==null?void 0:a(m))||""}},u=f=>{const m={};if(f!=null&&f.imageResource){const{assetId:v}=s({type:"image",value:f.imageResource});v&&mn(v)&&(m.src=v)}i==null||i({detail:m})};return I.useEffect(()=>{var f;const m=h(o);(f=l.current)===null||f===void 0||f.setFieldsValue(m)},[o]),I.useMemo(()=>r.createElement("div",{style:n,className:fe(d,t)},r.createElement(q,{ref:l,onValuesChange:u},r.createElement(q.Item,{name:"imageResource"},r.createElement(I6,null)))),[o,c])},Zo="base-element-detail-path",N6=e=>{const{fill:t,stroke:n}=(e==null?void 0:e.detail)||{};return{fill:t,stroke:n}},L6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=I.useRef(null),c=H(Zo),d=H(Zo,"row"),l=H(Zo,"col"),h=H(Zo,"form-item"),u=qt(),f=m=>{const v=m;i==null||i({detail:v})};return I.useEffect(()=>{var m;const v=N6(o);(m=s.current)===null||m===void 0||m.setFieldsValue(v)},[o]),I.useMemo(()=>r.createElement("div",{style:n,className:fe(c,t)},r.createElement(q,{ref:s,onValuesChange:f},r.createElement(me,{className:d},r.createElement(K,{className:l,span:"10"},u.fill),r.createElement(K,{className:l,span:"14"},r.createElement(q.Item,{className:h,name:"fill"},r.createElement(wn,{disabled:a})))),r.createElement(me,{className:d},r.createElement(K,{className:l,span:"10"},u.stroke),r.createElement(K,{className:l,span:"14"},r.createElement(q.Item,{className:h,name:"stroke"},r.createElement(wn,{disabled:a})))))),[n,t])},D6="base-element-detail-rect",R6=e=>{const{className:t,style:n}=e,o=H(D6);return I.useMemo(()=>r.createElement("div",{style:n,className:fe(o,t)}),[n,t])};var P6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const uo="base-element-field-svg-picker",O6=["image/svg+xml"];function k6(e){const t=document.createElement("div");return t.innerHTML=e,document.querySelector("svg").setAttribute("_t",Date.now()+""),{__html:t.innerHTML}}const _6=({value:e="",onChange:t})=>{const[n,o]=I.useState(e),[i,a]=I.useState("free"),s=H(uo),c=H(uo,"box"),d=H(uo,"entity"),l=H(uo,"action"),h=H(uo,"action-upload"),u=v=>{t==null||t(v||e)},f=v=>{o(v),ze.svg(v)&&u(v)},m=I.useCallback(()=>{i!=="picking"&&(Pa({success:v=>P6(void 0,void 0,void 0,function*(){if(O6.includes(v.file.type)!==!0){To.error(`File's type "${v.file.type}" is not supported!`);return}try{let g=(yield e0(v.file)).toString();g=g.substring(g.indexOf("<svg")),f(g)}catch{To.error(`Failed to parse file ${v.file.name}`)}a("free")}),error:v=>{console.log(v),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return I.useMemo(()=>r.createElement("div",{className:s},r.createElement("div",{className:c},r.createElement("div",{className:d,dangerouslySetInnerHTML:k6(e||n)}),r.createElement("div",{className:l},r.createElement("div",{onClick:m,className:h},r.createElement("span",null,"Upload"))))),[e,n])},j6="base-element-detail-svg",V6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=H(j6),l=I.useRef(null),h=f=>{const{svg:m=""}=(f==null?void 0:f.detail)||{};return{svg:m,svgResource:(a==null?void 0:a(m))||""}},u=f=>{const m={};if(f!=null&&f.svgResource){const{assetId:v}=s({type:"svg",value:f.svgResource});v&&mn(v)&&(m.svg=v)}i==null||i({detail:m})};return I.useEffect(()=>{var f;const m=h(o);(f=l.current)===null||f===void 0||f.setFieldsValue(m)},[o]),I.useMemo(()=>r.createElement("div",{style:n,className:fe(d,t)},r.createElement(q,{ref:l,onValuesChange:u},r.createElement(q.Item,{name:"svgResource"},r.createElement(_6,null)))),[o,c])},ho="base-element-detail-text",Rn={fontSize:20},{TextArea:B6}=Kt,Pn=e=>ze.number(e*1)?we(e*1):e,F6=e=>{const{color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s,text:c=""}=(e==null?void 0:e.detail)||{};return{text:c,color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s}},W6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=H(ho),c=H(ho,"row"),d=H(ho,"col"),l=H(ho,"switch"),h=H(ho,"form-item"),u=I.useRef(null);I.useEffect(()=>{var m;const v=F6(o);(m=u.current)===null||m===void 0||m.setFieldsValue(v)},[o]);const f=m=>{i==null||i({detail:m})};return I.useMemo(()=>r.createElement("div",{style:n,className:fe(s,t)},r.createElement(q,{ref:u,style:n,className:s,onValuesChange:f},r.createElement(me,{className:c},r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:h,name:"verticalAlign"},r.createElement(st.Group,{disabled:a,className:l,size:"small"},r.createElement(st.Button,{value:"top"},r.createElement(Qc,{style:Rn})),r.createElement(st.Button,{value:"middle"},r.createElement(Zc,{style:Rn})),r.createElement(st.Button,{value:"bottom"},r.createElement(Uc,{style:Rn}))))),r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:h,name:"textAlign"},r.createElement(st.Group,{disabled:a,className:l,size:"small"},r.createElement(st.Button,{value:"left"},r.createElement(uc,{style:Rn})),r.createElement(st.Button,{value:"center"},r.createElement(dc,{style:Rn})),r.createElement(st.Button,{value:"right"},r.createElement(hc,{style:Rn})))))),r.createElement(me,{className:c},r.createElement(K,{span:"10",className:d},"Text Color"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"color"},r.createElement(wn,{elementSize:o?pn(o):void 0,disabled:a,disabledLinearGradient:!0,disabledRadialGradient:!0})))),r.createElement(me,{className:c},r.createElement(K,{span:"10",className:d},"Font Size"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"fontSize"},r.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:Pn,parser:Pn})))),r.createElement(me,{className:c},r.createElement(K,{span:"10",className:d},"Font Weight"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"fontWeight"},r.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:100,max:1e3,min:100,formatter:Pn,parser:Pn})))),r.createElement(me,{className:c},r.createElement(K,{span:"10",className:d},"Line Height"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"lineHeight"},r.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:Pn,parser:Pn})))),r.createElement(me,{className:c},r.createElement(K,{span:"24",className:d},r.createElement(q.Item,{className:h,name:"text",style:{width:"100%"}},r.createElement(B6,{disabled:a,style:{width:"100%"},rows:3})))))),[n,t])},Qo="base-element-detail-group",H6=e=>{const{overflow:t}=(e==null?void 0:e.detail)||{};return{overflow:t}},G6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=H(Qo),c=H(Qo,"row"),d=H(Qo,"col"),l=H(Qo,"form-item"),h=I.useRef(null),u=qt();I.useEffect(()=>{var m;const v=H6(o);(m=h.current)===null||m===void 0||m.setFieldsValue(v)},[o]);const f=m=>{i==null||i({detail:m})};return I.useMemo(()=>r.createElement("div",{style:n,className:fe(s,t)},r.createElement(q,{ref:h,style:n,className:s,onValuesChange:f},r.createElement(me,{className:c},r.createElement(K,{className:d,span:"10"},u.overflow),r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:l,name:"overflow"},r.createElement(et,{size:"small",disabled:a},r.createElement(et.Option,{value:"visible"},u.visible),r.createElement(et.Option,{value:"hidden"},u.hidden))))))),[n,t,u])},Y6="base-element-detail-attribute",$6=e=>{const{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}=e,s=H(Y6);return I.useMemo(()=>r.createElement("div",{className:s},(t==null?void 0:t.type)==="circle"&&r.createElement(C6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="image"&&r.createElement(T6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="svg"&&r.createElement(V6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="group"&&r.createElement(G6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="path"&&r.createElement(L6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="rect"&&r.createElement(R6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="text"&&r.createElement(W6,{element:t,onChange:n})),[o,t])},Jo="base-element-content-attribute",X6=e=>{let{opacity:t}=(e==null?void 0:e.detail)||{};const{background:n}=(e==null?void 0:e.detail)||{};return typeof t=="number"&&t>=0&&t<=1||(t=1),{background:n,opacity:t}},U6=e=>{const{style:t,element:n,disabled:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=I.useRef(null),d=H(Jo),l=H(Jo,"row"),h=H(Jo,"col"),u=H(Jo,"form-item"),f=g=>{const p=g;i==null||i({detail:p})},m=g=>{i==null||i(g)},v=qt();return I.useEffect(()=>{var g;const p=X6(n);(g=c.current)===null||g===void 0||g.setFieldsValue(p)},[n]),I.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(q,{ref:c,style:t,className:d,onValuesChange:f},["rect","circle","text","group"].includes(n==null?void 0:n.type)&&r.createElement(me,{className:l},r.createElement(K,{className:h,span:"10"},v.background),r.createElement(K,{className:h,span:"14"},r.createElement(q.Item,{className:u,name:"background"},r.createElement(wn,{elementSize:n?pn(n):void 0,disabled:o})))),r.createElement(me,{className:l},r.createElement(K,{className:h,span:"10"},v.opacity),r.createElement(K,{className:h,span:"14"},r.createElement(q.Item,{className:u,name:"opacity"},r.createElement(he,{disabled:o,size:"small",style:{width:"100%"},step:.1}))))),r.createElement($6,{element:n,disabled:o,onChange:m,getElementAsset:a,createElementAsset:s})),[v,n,o,i])},Ko="base-element-shadow-attribute",Z6=e=>{const{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}=(e==null?void 0:e.detail)||{};return{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}},Q6=e=>{const{style:t,element:n,disabled:o,onChange:i}=e,a=I.useRef(null),s=H(Ko),c=H(Ko,"row"),d=H(Ko,"col"),l=H(Ko,"form-item"),h=f=>{const m=f;i==null||i({detail:m})},u=qt();return I.useEffect(()=>{var f;const m=Z6(n);(f=a.current)===null||f===void 0||f.setFieldsValue(m)},[n]),I.useMemo(()=>r.createElement(q,{ref:a,style:t,className:s,onValuesChange:h},r.createElement(me,{className:c},r.createElement(K,{className:d,span:"14"},r.createElement(q.Item,{className:l,name:"shadowColor"},r.createElement(wn,{elementSize:n?pn(n):void 0,disabled:o,disabledLinearGradient:!0,disabledRadialGradient:!0}))),r.createElement(K,{className:d,span:"10"},r.createElement(q.Item,{className:l,name:"shadowBlur"},r.createElement(he,{disabled:o,size:"small",style:{width:"100%"}})))),r.createElement(me,null,r.createElement(K,{className:d,span:"12"},r.createElement(q.Item,{className:l,name:"shadowOffsetX"},r.createElement(he,{disabled:o,size:"small",style:{width:"100%"},prefix:"X"}))),r.createElement(K,{className:d,span:"12"},r.createElement(q.Item,{className:l,name:"shadowOffsetY"},r.createElement(he,{disabled:o,size:"small",style:{width:"100%"},prefix:"Y"}))))),[u,n,o])},J6="base-element-detail",K6=Sn(),q6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=qt(),d=H(J6);let l=o;o&&(l=Object.assign(Object.assign({},o||{}),{detail:Object.assign(Object.assign({},K6),o==null?void 0:o.detail)}));const h=[{key:"basic-attribute",label:c.basicAttributes,children:r.createElement(v6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}})},{key:"border-attribute",label:c.borderAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?r.createElement(E6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):r.createElement(Qt,{image:Qt.PRESENTED_IMAGE_SIMPLE,description:!1})},{key:"content-attribute",label:c.contentAttribute,children:r.createElement(U6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)},getElementAsset:a,createElementAsset:s})},{key:"shadow-attribute",label:c.shadowAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?r.createElement(Q6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):r.createElement(Qt,{image:Qt.PRESENTED_IMAGE_SIMPLE,description:!1})}];return I.useMemo(()=>r.createElement("div",{style:n,className:fe(d,t)},r.createElement(Na,{ghost:!0,items:h,size:"small",defaultActiveKey:h.map(u=>u.key)})),[l,c])},eu="LayoutDetail",Wa=()=>{const[e]=La(eu);return e},fo="base-element-basic-attribute",Ft=e=>ze.number(e*1)?we(e*1):e,tu=e=>{const{className:t,style:n,layout:o,onChange:i,disabled:a,isGroupLayout:s}=e,c=I.useRef(null),d=H(fo),l=H(fo,"row"),h=H(fo,"col"),u=H(fo,"input"),f=H(fo,"form-item"),m=Wa(),v=g=>{i==null||i(g)};return I.useEffect(()=>{var g;const{x:p,y:w,w:C,h:M}=o||{},y={x:p,y:w,w:C,h:M};(g=c.current)===null||g===void 0||g.setFieldsValue(y)},[o]),I.useMemo(()=>r.createElement(q,{ref:c,style:n,className:fe(d,t),onValuesChange:v},!s&&r.createElement(me,{className:l},r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:f,name:"x"},r.createElement(he,{className:u,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:Ft,parser:Ft}))),r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:f,name:"y"},r.createElement(he,{className:u,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:Ft,parser:Ft})))),r.createElement(me,{className:l},r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:f,name:"w"},r.createElement(he,{className:u,size:"small",placeholder:"Width",prefix:m.w,disabled:a,formatter:Ft,parser:Ft}))),r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:f,name:"h"},r.createElement(he,{className:u,size:"small",placeholder:"Height",prefix:m.h,disabled:a,formatter:Ft,parser:Ft}))))),[m,a,o])},qo="base-element-content-attribute",nu=e=>{const{background:t,overflow:n="visible"}=e||{};return{background:t,overflow:n}},ou=e=>{const{style:t,layout:n,disabled:o,onChange:i}=e,a=I.useRef(null),s=H(qo),c=H(qo,"row"),d=H(qo,"col"),l=H(qo,"form-item"),h=f=>{const m=f;i==null||i({detail:m})},u=Wa();return I.useEffect(()=>{var f;const m=nu(n==null?void 0:n.detail);(f=a.current)===null||f===void 0||f.setFieldsValue(m)},[n]),I.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(q,{ref:a,style:t,className:s,onValuesChange:h},r.createElement(me,{className:c},r.createElement(K,{className:d,span:"10"},u.background),r.createElement(K,{className:d,span:"14"},r.createElement(q.Item,{className:l,name:"background"},r.createElement(wn,{elementSize:n?pn(n):void 0,disabled:o})))),r.createElement(me,{className:c},r.createElement(K,{className:d,span:"10"},u.overflow),r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:l,name:"overflow"},r.createElement(et,{size:"small",disabled:o},r.createElement(et.Option,{value:"visible"},u.visible),r.createElement(et.Option,{value:"hidden"},u.hidden))))))),[u,n,o,i])},iu="base-layout-detail",au=e=>{const{className:t,style:n,layout:o,onChange:i,isGroupLayout:a}=e,s=Wa(),c=H(iu),d=[{key:"layout-attribute",label:s.layout,children:r.createElement(r.Fragment,null,r.createElement(tu,{isGroupLayout:a,layout:o,onChange:l=>{i==null||i(l)}}),r.createElement(ou,{layout:o,onChange:l=>{i==null||i(l)}}))}];return I.useMemo(()=>r.createElement("div",{style:n,className:fe(c,t)},r.createElement(Na,{ghost:!0,items:d,size:"small",defaultActiveKey:d.map(l=>l.key)})),[o,s])},su="ElementDesign",ru="base-element-design",lu=e=>{var t;const{className:n,style:o,element:i,onElementChange:a,getElementAsset:s,createElementAsset:c,layout:d,onLayoutChange:l}=e,[h]=La(su),u=[{key:"element-detail",label:h.element,children:r.createElement(q6,{element:i,onChange:a,getElementAsset:s,createElementAsset:c})},{key:"layout-detail",label:h.layout,children:r.createElement(au,{isGroupLayout:((t=d==null?void 0:d.operations)===null||t===void 0?void 0:t.position)==="relative",layout:d,onChange:l})},{key:"global",label:h.global,children:r.createElement("div",{style:{padding:20,textAlign:"center"}},"TODO")}];return I.useMemo(()=>r.createElement("div",{style:o,className:fe(H(ru),n)},r.createElement(Bl,{size:"small",defaultActiveKey:u[0].key,items:u})),[i,a,s,c,d,l,h])},xl=e=>{var t;const n={uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,children:[],operations:e.operations||{}};return e.type==="group"&&Array.isArray((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.children)&&e.detail.children.forEach(o=>{n.children.push(xl(o))}),n};function Me(e){const t=[];return e.elements.forEach(n=>{const o=xl(n);t.push(o)}),t}const cu=e=>({uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,operations:e.operations||{}});function Lo(e){const t=[];return e.elements.forEach(n=>{var o;if(n.type==="group"&&((o=n.extends)===null||o===void 0?void 0:o.isPage)===!0){const i=cu(n);t.push(i)}}),t}var du=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function Xt(e,t){if(e.length===0)return yt(t);const n=Be(e,t.elements),o={elements:[],assets:t.assets};if((n==null?void 0:n.type)==="group"){const{w:i,h:a,detail:s}=n,{children:c}=s,d=du(s,["children"]),l={x:0,y:0,w:i,h:a,detail:Object.assign({},d),operations:{position:"relative"}};o.elements=yt(c||[]),o.layout=l}return o}function uu(e,t,n){if(e.length>0){const o=Be(e,n.elements);(o==null?void 0:o.type)==="group"&&(o.detail.children=t.elements)}}function hu(e,t,n){if(t.length>0&&(e!=null&&e.layout)){const o=e.layout,a=Be(t,n.elements);(a==null?void 0:a.type)==="group"&&(ze.w(o.w)&&(a.w=o.w),ze.h(o.h)&&(a.h=o.h),a.detail=Object.assign(Object.assign({},a.detail),o.detail))}}function Ml(e){var t,n,o,i,a,s,c,d,l,h;let u=e;for(let w=0;w<e.elements.length;w++){const C=e.elements[w];if(C.type==="group"&&((t=C.extends)===null||t===void 0?void 0:t.isPage)===!0)return u}const f=Oa(e.elements);let{x:m,y:v,w:g,h:p}=f;return ze.x((n=e==null?void 0:e.layout)===null||n===void 0?void 0:n.x)&&(m=Math.min(m,(o=e.layout)===null||o===void 0?void 0:o.x)),ze.y((i=e==null?void 0:e.layout)===null||i===void 0?void 0:i.y)&&(v=Math.min(v,(a=e.layout)===null||a===void 0?void 0:a.y)),ze.w((s=e==null?void 0:e.layout)===null||s===void 0?void 0:s.w)&&(g=Math.max(g,(c=e.layout)===null||c===void 0?void 0:c.w)),ze.h((d=e==null?void 0:e.layout)===null||d===void 0?void 0:d.h)&&(p=Math.max(p,(l=e.layout)===null||l===void 0?void 0:l.h)),e.elements.forEach(w=>{w.x-=m,w.y-=v}),u={elements:[{uuid:Dt(),name:"Default page",type:"group",x:0,y:0,w:g,h:p,detail:Object.assign(Object.assign(Object.assign({},(h=e.layout)===null||h===void 0?void 0:h.detail),{children:e.elements}),g===0||p===0?{overflow:"visible"}:{}),extends:{isPage:!0}}],assets:e.assets},u}const zl="dark",Il="en-US",Al="data";function fu(e){let t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});(e==null?void 0:e.defaultEditMode)==="page"&&(t=Ml(t));let n=[],o=t;const i=Lo(t);e!=null&&e.defaultEditingGroupUUID&&(n=wt(e.defaultEditingGroupUUID,t.elements)),(e==null?void 0:e.defaultEditMode)==="page"&&n.length!==1&&i.length>0&&(n=[0]),o=Xt(n,t);const a=Me(o);return{localeCode:(e==null?void 0:e.defaultLocale)||Il,themeMode:(e==null?void 0:e.defaultThemeMode)||zl,editMode:(e==null?void 0:e.defaultEditMode)||Al,data:t,editingData:o,editingDataPosition:n,elementTree:a,pageTree:i,selectedUUIDs:(e==null?void 0:e.defaultSelectedElementUUIDs)||[],scaleInfo:Object.assign({scale:1,from:"init"},(e==null?void 0:e.defaultScaleInfo)||{})}}function mu(e){const t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});return{localeCode:Il,themeMode:(e==null?void 0:e.themeMode)||zl,editMode:(e==null?void 0:e.editMode)||Al,data:Object.assign({elements:[]},(e==null?void 0:e.data)||{}),editingData:Xt([],t),editingDataPosition:[],elementTree:[],pageTree:[],selectedUUIDs:[],scaleInfo:Object.assign({scale:1,from:"control"},(e==null?void 0:e.scaleInfo)||{})}}function gu(e,t){var n,o,i;switch(t.type){case"update":return t!=null&&t.payload?Object.assign(Object.assign({},e),t==null?void 0:t.payload):e;case"updateThemeMode":return!((n=t==null?void 0:t.payload)===null||n===void 0)&&n.themeMode?Object.assign(Object.assign({},e),{themeMode:(o=t==null?void 0:t.payload)===null||o===void 0?void 0:o.themeMode}):e;case"updateEditingDataLayoutToTargetGroup":{if(!(!((i=t==null?void 0:t.payload)===null||i===void 0)&&i.editingData))return e;const{editingData:a}=t.payload;if(a.layout){const{editingDataPosition:s,data:c}=e;return hu(a,s,c),Object.assign(Object.assign({},e),{data:c,editingData:a})}return e}default:return e}}const Pt=I.createContext({state:mu(),dispatch:()=>{}}),vu=Pt.Provider,pu={locale:"en-US",NavMenu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",material:"Material",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio",materialTempate:"Material templates"},Toolbar:{layers:"Layers",ruler:"Ruler",attributes:"Attributes",hand:"Hand tool",centerContent:"Center content",redo:"Redo",undo:"Undo"},PanelPage:{pages:"Pages",addPage:"Add page",overview:"Overview",pcPageTemplates:"PC page templates",mobilePageTemplates:"Mobile page templates"},TemplatePreview:{add:"Add",cancel:"Cancel"},contextMenu:{copy:"Copy",paste:"Paste",cut:"Cut",delete:"Delete"}},yu={locale:"zh-CN",NavMenu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",material:"物料",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例",materialTempate:"物料模板"},Toolbar:{layers:"图层",ruler:"标尺",attributes:"属性",hand:"拖拽工具",centerContent:"内容居中",redo:"重做",undo:"撤销"},PanelPage:{pages:"页面",addPage:"添加PC页面",overview:"预览",pcPageTemplates:"PC页面模板",mobilePageTemplates:"移动页面模板"},TemplatePreview:{add:"添加",cancel:"取消"},contextMenu:{copy:"复制",paste:"粘贴",cut:"剪切",delete:"删除"}},wu={"en-US":pu,"zh-CN":yu},Mn=e=>{const{state:t}=I.useContext(Pt),n=t.localeCode;return[I.useMemo(()=>{const a=wu[n][e];return Object.assign({},a)},[n,e])]},bu=()=>{const[e]=Mn("Toolbar");return e},Eu=e=>{const{style:t,sharedEvent:n,sharedStore:o}=e,i=bu(),[a,s]=I.useState(!1),[c,d]=I.useState(!1),l={size:"small",type:"text"};I.useEffect(()=>{const u=o.getStatic("snapshotRecorder"),f=p=>{s(p.canRedo),d(p.canUndo)},m=p=>{s(p.canRedo),d(p.canUndo)},v=p=>{s(p.canRedo),d(p.canUndo)},g=()=>{s(!1),d(!1)};return u&&(u.on("do",f),u.on("undo",m),u.on("redo",v),u.on("clear",g)),()=>{u&&(u.off("do",f),u.off("undo",m),u.off("redo",v),u.off("clear",g))}},[]);const h=[{key:"redo",title:i.redo,button:r.createElement(Vc,{style:{fontSize:14}}),disabled:!a,onClick:()=>{n.trigger("redo")}},{key:"undo",title:i.undo,button:r.createElement($c,{style:{fontSize:14}}),disabled:!c,onClick:()=>{n.trigger("undo")}}];return I.useMemo(()=>r.createElement("div",{style:Object.assign(Object.assign({},t),{width:100,display:"flex",flexDirection:"row"})},h.map((u,f)=>r.createElement(fn,{key:f,placement:"top",title:u.title},r.createElement(Oe,Object.assign({},l,{disabled:u.disabled,style:{width:28,textAlign:"center",justifyContent:"center",alignItems:"center",display:"inline-flex"},key:f,onClick:m=>{m.preventDefault(),u.onClick()}}),u.button)))),[i,a,c])},ei="mod-toolbar",Su=()=>{const[e]=Mn("Toolbar");return e},Cu=e=>{const{className:t,style:n,openLeftSider:o,openRightSider:i,onClickToggleLayer:a,onClickToggleSetting:s,sharedEvent:c,sharedStore:d}=e,l={fontSize:16},h=H(ei),u=H(ei,"left"),f=H(ei,"right"),m=H(ei,"btn"),[v,g]=I.useState(!1),[p,w]=I.useState(!0),C=Su();I.useEffect(()=>{const y=d.getStatic("idraw");p===!0?y==null||y.enable("ruler"):y==null||y.disable("ruler")},[p]),I.useEffect(()=>{const y=d.getStatic("idraw");y==null||y.setMode(v?"drag":"select")},[v]);const M={size:"small",className:m,shape:"default"};return I.useMemo(()=>r.createElement("div",{style:n,className:fe(h,t)},r.createElement("div",{className:u}),r.createElement("div",{className:f},r.createElement(fn,{title:C.layers},r.createElement(Oe,Object.assign({},M,{type:o?"primary":"default",icon:r.createElement(Pc,{style:l}),onClick:a}))),r.createElement(fn,{title:C.attributes},r.createElement(Oe,Object.assign({},M,{type:i?"primary":"default",icon:r.createElement(Gc,{style:l}),onClick:s}))),r.createElement(fn,{title:C.ruler},r.createElement(Oe,Object.assign({},M,{type:p?"primary":"default",icon:r.createElement(Wc,{style:Object.assign(Object.assign({},l),{fontSize:20})}),onClick:()=>{w(!p)}}))),r.createElement(fn,{title:C.hand},r.createElement(Oe,Object.assign({},M,{type:v?"primary":"default",icon:r.createElement(Tc,{style:Object.assign(Object.assign({},l),{fontSize:20})}),onClick:()=>{g(!v)}}))),r.createElement(fn,{title:C.centerContent},r.createElement(Oe,Object.assign({},M,{type:"text",icon:r.createElement(cc,{style:Object.assign(Object.assign({},l),{fontSize:20})}),onClick:()=>{const y=d.getStatic("idraw");y==null||y.centerContent()}}))),r.createElement(Eu,{sharedEvent:c,sharedStore:d}))),[o,i,a,s,v,p,C])},mo="mod-panel-layer",xu=e=>{const{className:t,style:n,height:o,sharedStore:i,sharedEvent:a,useContextMenuOptions:s}=e,{state:c,dispatch:d}=I.useContext(Pt),{elementTree:l,selectedUUIDs:h,editingData:u}=c,f=I.useRef(null),m=H(mo),v=H(mo,"content"),g=H(mo,"header"),p=H(mo,"header","title"),w=H(mo,"header","btn"),[C,M]=s({sharedEvent:a,sharedStore:i}),y=()=>{if(c.editingDataPosition.length===0)return"";const b=Be(c.editingDataPosition,c.data.elements);return(b==null?void 0:b.name)||(b==null?void 0:b.type)||""},k=b=>{const j=i.getStatic("idraw");j==null||j.selectElementsByPositions(b)};I.useEffect(()=>{a.on("scrollToLayer",({uuid:b})=>{var j;b&&((j=f.current)===null||j===void 0||j.scrollTo({key:b,align:"top"}))})},[]),I.useEffect(()=>{if(h[0]&&h.length===1){const j=ka(h[0],u.elements).map(_=>_.uuid);h[0]&&j.push(h[0])}},[h,u]);const S=()=>{a.trigger("resetEditingView",{type:"back-root",position:null})},E=()=>{a.trigger("resetEditingView",{type:"back-one",position:null})},L=32,N=o-L;return I.useMemo(()=>Array.isArray(l)&&l.length>0?r.createElement("div",{style:n,className:fe(m,t),onContextMenu:b=>{b.preventDefault()}},r.createElement("div",{className:g,style:{height:L}},r.createElement(Oe,{className:w,size:"small",icon:r.createElement(yr,null),disabled:!(c.editingDataPosition.length>0),onClick:S}),r.createElement(Oe,{className:w,size:"small",icon:r.createElement(Cr,null),disabled:!(c.editingDataPosition.length>0),onClick:E}),r.createElement("span",{className:p},y())),r.createElement(eo,{menu:{items:C},trigger:["contextMenu"]},r.createElement("div",{className:v},r.createElement(Sl,{ref:f,height:N,treeData:l,selectedKeys:h,onTitleChange:({uuid:b,value:j})=>{Jt(b,{name:j},c.editingData.elements);const _=Me(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:_}})},onOperationToggle:({uuid:b,operations:j})=>{Jt(b,{operations:j},c.editingData.elements);const _=Me(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:_}})},onSelect:b=>{h!=null&&h.includes(b.uuids[0])||k(b.positions)},onContextMenu:b=>{if(!(h!=null&&h.includes(b.uuids[0]))){k(b.positions);const j=Be(b.positions[0],u.elements);j&&M({selectedElements:[j]})}},onDrop:b=>{const{elements:j}=Di(u.elements,{from:b.from,to:b.to}),_=Be(b.to,u.elements);_&&(b.to.length===b.to.length||(_.x=0,_.y=0));const V=Me(u);d({type:"update",payload:{editingData:Object.assign(Object.assign({},u),{elements:[...j]}),elementTree:V}})},onDelete:({uuid:b})=>{a.trigger("deleteElement",{uuid:b})},onGoToGroup:b=>{a.trigger("resetEditingView",{type:"go-to-next-group",position:b.position})}})))):r.createElement("div",{style:n,className:fe(m,t),onContextMenu:b=>{b.preventDefault()}},r.createElement("div",{className:g},"..."),r.createElement("div",{className:v},r.createElement("div",{style:{padding:"20px 0",textAlign:"center"}},"Empty"))),[N,l,h,u.elements,c.editingDataPosition,C])};var Mu=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const ti="item",zu=e=>{const{parentModName:t,className:n,style:o,width:i,height:a,onMount:s,item:c,onSelect:d,onPreview:l}=e,h=Mu(e,["parentModName","className","style","width","height","onMount","item","onSelect","onPreview"]),u=I.useRef(null),f=I.useRef(null),m=I.useRef(c.element),v=H(t,ti),g=H(t,ti,"name"),p=H(t,ti,"action"),w=H(t,ti,"alert"),[C,M]=I.useState(!1),[y,k]=I.useState(null);return I.useEffect(()=>(i>0&&a>0&&u.current&&(f.current||(f.current=new Fa(u.current,{width:i,height:a,devicePixelRatio:1}))),()=>{const S=f.current;S==null||S.destroy(),f.current=null}),[]),I.useEffect(()=>{const S=f.current;if(S){S.setMode("readOnly"),S.$offBoardWatcherEvents();const{element:E,staticResource:L}=c;E?(S.setData({elements:[E]}),S.centerContent()):L&&(M(!0),k(null),window.fetch(L).then(N=>N.json()).then(N=>{m.current=N,S.setData({elements:[N]}),S.centerContent()}).catch(N=>{const b=[N.name,N.message].join(", ");k(b)}).finally(()=>{M(!1)})),s==null||s({idraw:S})}},[c]),I.useMemo(()=>r.createElement(ur,{spinning:C},r.createElement("div",Object.assign({style:Object.assign(Object.assign({},o),{width:i,minHeight:a}),className:fe(v,n)},h),r.createElement(fn,{placement:"top",title:c.name},r.createElement("div",{className:g},c.name)),r.createElement("div",{ref:u}),r.createElement("div",{className:p},r.createElement(Oe.Group,{size:"large"},r.createElement(Oe,{size:"large",type:"primary"},r.createElement(Ra,{style:{fontSize:20},onClick:()=>{const S=m.current;S&&(S.name=c.name),l({element:S})}})),r.createElement(Oe,{size:"large",type:"primary"},r.createElement(Ec,{style:{fontSize:20},onClick:()=>{const S=m.current;S&&(S.name=c.name),d({element:S})}})))),y&&r.createElement(Fl,{className:w,type:"error",message:y,banner:!0}))),[C,y,c,l])},or="detail",Iu=e=>{const{data:t,canvasWidth:n,canvasHeight:o,parentModName:i,handler:a}=e,s=I.useRef(null),c=I.useRef(null),d=H(i,or),l=H(i,or,"canvas");return I.useImperativeHandle(a,()=>({resetData:h=>{var u,f;(u=c.current)===null||u===void 0||u.setData(h),(f=c.current)===null||f===void 0||f.centerContent()}}),[]),I.useEffect(()=>{if(!c.current&&s.current){const h={width:n,height:o,devicePixelRatio:window.devicePixelRatio},u=new Fa(s.current,h);u.setData(t),u.centerContent(),c.current=u}return()=>{c.current&&(c.current.destroy(),c.current=null)}},[]),r.createElement("div",{className:d},r.createElement("div",{ref:s,className:l}))};var Au=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const go="mod-template-preview",Tl={content:{width:490},header:{padding:"10px 20px"},body:{padding:"0"}},Nl=e=>{const{className:t,style:n,getTemplates:o,onSelect:i,afterChangePagination:a}=e,s=H(go),c=H(go,"list"),d=H(go,"footer"),[l,h]=I.useState([]),[u,f]=I.useState(1),[m,v]=I.useState(8),[g,p]=I.useState(0),[w,C]=hr.useModal(),M=I.useRef(null),y=I.useRef(null),[k]=Mn("TemplatePreview"),S=L=>Au(void 0,void 0,void 0,function*(){var N;(N=M.current)===null||N===void 0||N.scrollTo(0,0);const b=yield o==null?void 0:o(L);Array.isArray(b==null?void 0:b.list)&&(h([...b.list]),f(b.current),v(b.pageSize),p(b.total))}),E=L=>{const{element:N}=L,b={elements:[]};N&&b.elements.push(N);const j=24,_=36,V=44,X=Math.min(720,window.innerWidth-j*2),B=Math.min(540,window.innerHeight-j*10-_-V),R=X+j*2,O=B+j*2+_+V,P=w.confirm({icon:null,width:R,styles:{content:{width:R,minHeight:O,padding:j}},closable:!0,title:(N==null?void 0:N.name)||"Unamed",content:r.createElement(Iu,{data:b,parentModName:go,handler:y,canvasWidth:X,canvasHeight:B}),okText:k.add,onOk:()=>{i({element:N})},cancelText:k.cancel,onCancel:()=>{P.destroy()}})};return I.useEffect(()=>{S({pageSize:m,current:u}).then(()=>{}).catch(()=>{})},[]),I.useMemo(()=>r.createElement("div",{ref:M,style:n,className:fe(s,t)},r.createElement("div",{className:c},l.map((L,N)=>r.createElement(zu,{key:N,width:200,height:150,parentModName:go,item:L,onSelect:i,onPreview:b=>{E(Object.assign(Object.assign({},b),{locale:k}))}}))),r.createElement("div",{className:d},r.createElement(Wl,{size:"small",pageSize:m,current:u,total:g,onChange:L=>{S({current:L,pageSize:m}),a==null||a()}})),C),[k,l,m,u,g,w,C,E])},Tu={uuid:"8227861e-9ffd-c90b-6fe3-1959958afd05",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"05fd9c0a-63dc-fb63-2d50-2d8ea9c70280",name:"Splash",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#0D6EFD",borderRadius:30,borderDash:[],boxSizing:"border-box",opacity:1,overflow:"hidden",children:[]},operations:{}},{uuid:"737b2596-c70c-d90c-70d4-55af24cb1d61",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#FFFFFF",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"b8cde2a5-c0f5-ecf1-8d6e-8fab7a12b85c",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#FFFFFF",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"acadb1ff-7274-ae5c-a71e-9d4e4c18ea80",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#FFFFFF",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"d8b651a8-dad9-cfbf-7a9b-abe5983742f6",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"bbea2aa2-38ac-70b0-1355-110a4fb61484",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"0c188e29-8a38-c84d-7286-b96508908fe5",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#FFFFFF",opacity:1},operations:{}},{uuid:"ecb52e4d-2ecb-b88d-de13-708870f0061f",name:"Loading...",x:121,y:385,w:133,h:42,angle:0,type:"text",detail:{text:"Loading...",fontFamily:"Geometr415 Blk BT",fontSize:34,textAlign:"left",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:42,color:"#FFFFFF",opacity:1},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},Nu={uuid:"3f827bd7-6a3a-e39c-7ec9-098895fc9f26",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#FFFFFF",borderRadius:30,borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"4c359376-7338-07dd-d533-fa43b329f948",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#1B1E28",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"baabee79-f1c0-f861-a3f0-3325d6d593c2",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#1B1E28",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"89b12005-beea-f2a6-a94b-7bfb9160bdc7",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"0abc02b1-addf-1816-5e57-cb0e3df44727",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"4335bf98-fdc8-1d55-2227-650d8e1866db",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"38d6aa8d-fd1a-963a-75b0-19645372ef26",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#1B1E28",opacity:1},operations:{}},{uuid:"5f97cb86-ef58-f353-9cb8-769f1b5aed90",name:"Home Indicator",x:121,y:799,w:134,h:5,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:100,borderDash:[],boxSizing:"center-line",borderColor:"transparent",borderWidth:0,opacity:1},operations:{}}],overflow:"hidden"},operations:{}},Lu=e=>({list:[{name:"Blank Page",element:Nu},{name:"Loading Page",element:Tu}],pageSize:8,current:1,total:2}),Du="add-page-button",Ru=e=>{const{className:t,style:n,parentModName:o,inPageOverview:i,sharedEvent:a,sharedStore:s,getPageTemplates:c}=e,d=H(o,Du),[l]=Mn("PanelPage"),{getContainer:h}=I.useContext(bn),[u,f]=I.useState(!1),[m,v]=To.useMessage();return I.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(Oe,{size:"small",type:"text",style:n,className:fe(d,t),onClick:g=>{g.preventDefault(),g.stopPropagation(),f(!0)}},r.createElement(Lc,{style:{fontSize:18}})),r.createElement(fr,{title:l.addPage,placement:"left",onClose:()=>{f(!1)},styles:Tl,open:u,getContainer:h},r.createElement(Nl,{getTemplates:c||Lu,onSelect:({element:g})=>{if(!g){m==null||m.error("Unexpected data");return}const p=xo(g),w=s.getStatic("idraw"),C=w==null?void 0:w.getData(),M={x:0,y:0};if(w&&Array.isArray(C==null?void 0:C.elements)){const y=Oa(C.elements);M.x=y.x,M.y=y.y}a.trigger("addPage",{element:Object.assign(Object.assign({},p),M),inPageOverview:i}),f(!1)}})),v),[n,t,i,l,u])},On="mod-panel-page",cn="page-tree",kn="element-tree",ir=1,ar=3,Pu=e=>{const{className:t,style:n,height:o,defaultSelectedElementUUIDs:i=[],sharedStore:a,sharedEvent:s,useContextMenuOptions:c,getPageTemplates:d}=e,{state:l,dispatch:h}=I.useContext(Pt),{pageTree:u,elementTree:f,selectedUUIDs:m,editingData:v,editingDataPosition:g,data:p}=l,w=I.useRef(null),C=I.useRef(null),M=32,[y,k]=I.useState([cn,kn]),[S,E]=I.useState(0),[L,N]=I.useState(0),[b,j]=I.useState(i),_=H(On),V=H(On,"content"),X=H(On,"header"),B=H(On,"header","title"),R=H(On,"header","btn"),[O,P]=c({sharedEvent:s,sharedStore:a}),[z]=Mn("PanelPage"),[G,F]=I.useState(!1),A=I.useRef(G),Z=I.useRef([]),Y=()=>{const $=[],J=Be([g[0]],l.data.elements);return J!=null&&J.uuid&&$.push(J.uuid),$},[x,T]=I.useState(Y());I.useEffect(()=>{const $=a.getStatic("idraw"),J=oe=>{if(A.current===!0){const{uuids:re=[]}=oe;T([...re])}};return $==null||$.on(Te.SELECT,J),()=>{$==null||$.off(Te.SELECT,J)}},[]),I.useEffect(()=>{var $;if(g.length===1&&u.length>0){const J=($=u[g[0]])===null||$===void 0?void 0:$.uuid;J&&!x.includes(J)&&T([J])}},[g]);const D=$=>{const J=ir+ar;if($.includes(cn)&&$.includes(kn)){const oe=o-M*2;E(oe*ir/J),N(oe*ar/J)}else if($.includes(cn)&&!$.includes(kn)){const oe=o-M*2;E(oe),N(0)}else if(!$.includes(cn)&&$.includes(kn)){const oe=o-M*2;E(0),N(oe)}else E(0),N(0)};I.useEffect(()=>{const $=a==null?void 0:a.getStatic("idraw");let J=[];if(G===!0)s.trigger("resetEditingView",{type:"back-root",position:null}),T([]),J=[cn],k(J),$==null||$.disable("selectInGroup");else{const oe=[];u.length>0&&(oe.push(u[0].uuid),s.trigger("resetEditingView",{type:"go-to-page",position:[0]})),T(oe),$==null||$.enable("selectInGroup"),J=[cn,kn],k(J)}D(J)},[o,G]),I.useEffect(()=>{A.current=G,s.trigger("switchPageOverview",{isPageOverview:!!G})},[G]);const W=()=>{if(g.length===0)return"";const $=Be(g,l.data.elements);return($==null?void 0:$.name)||($==null?void 0:$.type)||""},U=$=>{const J=a.getStatic("idraw");J==null||J.selectElementsByPositions($)};I.useEffect(()=>{const $=({uuid:J})=>{var oe;J&&((oe=w.current)===null||oe===void 0||oe.scrollTo({key:J,align:"top"}))};return s.on("scrollToLayer",$),()=>{s.off("scrollToLayer",$)}},[]),I.useEffect(()=>{var $;m.length===1&&Z.current[0]!==m[0]&&(($=w.current)===null||$===void 0||$.scrollTo({key:m[0],align:"auto"})),Z.current=[...m]},[m]),I.useEffect(()=>{if(m[0]&&m.length===1){const J=ka(m[0],v.elements).map(re=>re.uuid);m[0]&&J.push(m[0]);const oe=[...b];J.forEach(re=>{oe.includes(re)||oe.push(re)}),j(oe)}},[m,v]);const se=$=>{$.stopPropagation(),g.length>1&&s.trigger("resetEditingView",{type:"go-to-group",position:[g[0]]})},ee=$=>{$.stopPropagation(),s.trigger("resetEditingView",{type:"back-one",position:null})},ce=[{key:cn,collapsible:G?"disabled":void 0,label:r.createElement("div",{className:X,style:{height:M}},r.createElement("div",{style:{display:"flex"}},r.createElement("span",{style:{marginRight:10}},z.pages),r.createElement(Oe,{className:R,style:{marginLeft:"10px"},size:"small",icon:r.createElement(Oc,null),type:G?"primary":"default",onClick:$=>{$.stopPropagation(),F(!G)}})),r.createElement("div",{style:{display:"flex"}},r.createElement(Ru,{inPageOverview:G,parentModName:On,sharedEvent:s,sharedStore:a,getPageTemplates:d}))),children:r.createElement("div",{className:V,style:{height:S}},u.length>0?r.createElement(h6,{ref:C,height:S,treeData:u,selectedKeys:x,onTitleChange:({uuid:$,value:J})=>{Jt($,{name:J},p.elements);const re={pageTree:Lo(p),data:Object.assign({},p)};if(g.length===0){re.editingData=Object.assign({},p);const mt=Me(p);re.elementTree=mt}h({type:"update",payload:re})},onSelect:$=>{if(($==null?void 0:$.positions.length)===1){const J=a.getStatic("idraw");if(J==null||J.trigger(Te.SELECT,{uuids:[]}),J==null||J.trigger(Te.CLEAR_SELECT),G){x!=null&&x.includes($.uuids[0])||(U($.positions),T([$.uuids[0]]));return}s.trigger("resetEditingView",{type:"go-to-page",position:$.positions[0]});const oe=[],re=Be($.positions[0],l.data.elements);re!=null&&re.uuid&&(oe.push(re.uuid),T(oe))}},onDrop:$=>{if(!($.from.length===1&&$.to.length===1))return;const{elements:J}=Di(p.elements,{from:$.from,to:$.to}),re={pageTree:Lo(p),data:Object.assign(Object.assign({},p),{elements:J})};if(g.length===0){re.editingData=Object.assign(Object.assign({},p),{elements:J});const mt=Me(p);re.elementTree=mt}h({type:"update",payload:re})},onDelete:({uuid:$})=>{s.trigger("deletePage",{uuid:$})}}):r.createElement(Qt,{image:Qt.PRESENTED_IMAGE_SIMPLE,description:!1}))},{key:kn,collapsible:G?"disabled":void 0,label:r.createElement("div",{className:X,style:{height:M}},r.createElement("div",{style:{display:"inline-flex"}},r.createElement(Oe,{className:R,size:"small",icon:r.createElement(yr,null),disabled:!(g.length>1),onClick:se}),r.createElement(Oe,{className:R,size:"small",icon:r.createElement(Cr,null),disabled:!(g.length>1),onClick:ee})),r.createElement("span",{className:B},W())),children:r.createElement(eo,{menu:{items:O},trigger:["contextMenu"]},r.createElement("div",{className:V,style:{height:L}},f.length>0?r.createElement(Sl,{ref:w,height:L,treeData:f,selectedKeys:m,onTitleChange:({uuid:$,value:J})=>{Jt($,{name:J},l.editingData.elements);const oe=Me(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:oe}})},onOperationToggle:({uuid:$,operations:J})=>{Jt($,{operations:J},l.editingData.elements);const oe=Me(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:oe}});const re=a.getStatic("idraw");J.locked===!0&&(re==null||re.cancelElements())},onSelect:$=>{m!=null&&m.includes($.uuids[0])||U($.positions)},onContextMenu:$=>{if(!(m!=null&&m.includes($.uuids[0]))){U($.positions);const J=Be($.positions[0],v.elements);J&&P({selectedElements:[J]})}},onDrop:$=>{const{elements:J}=Di(v.elements,{from:$.from,to:$.to}),oe=Be($.to,v.elements);oe&&(oe.x=0,oe.y=0);const re=Me(v);h({type:"update",payload:{editingData:Object.assign(Object.assign({},v),{elements:[...J]}),elementTree:re}})},onDelete:({uuid:$})=>{s.trigger("deleteElement",{uuid:$})},onGoToGroup:$=>{s.trigger("resetEditingView",{type:"go-to-next-group",position:$.position})},onExpand:($,{node:J})=>{const oe=J.key;if(oe){let re=[...b];b.includes(oe)?re.splice(re.indexOf(oe),1):re=[...re,oe],j(re)}}}):r.createElement(Qt,{image:Qt.PRESENTED_IMAGE_SIMPLE,description:!1})))}];return I.useMemo(()=>r.createElement("div",{style:n,className:fe(_,t),onContextMenu:$=>{$.preventDefault()}},r.createElement(Na,{ghost:!0,collapsible:"icon",items:ce,size:"small",activeKey:y,onChange:$=>{if(Array.isArray($)){const J=[...$];k(J),D(J)}}})),[o,S,L,u,f,m,b,p.elements,v.elements,g,G,x,z])};var Ou=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const ku="mod-panel-detail",_u=e=>{const{className:t,style:n}=e,{state:o,dispatch:i}=I.useContext(Pt),{selectedUUIDs:a,editingData:s,editingDataPosition:c}=o,d=H(ku),l=I.useRef(s);I.useEffect(()=>{l.current=s},[s]);const h=()=>l.current,u=I.useCallback(p=>{if((a==null?void 0:a.length)===1&&a[0]){const w=a[0];Jt(w,p,s.elements),i({type:"update",payload:{editingData:Object.assign({},s)}})}},[s,a]),f=I.useCallback(p=>{var w;const{detail:C}=p,M=Ou(p,["detail"]);delete M.operations;const y=h();if(M||C){const k=Object.assign(Object.assign(Object.assign({x:0,y:0},y.layout),M),{detail:Object.assign(Object.assign({},(w=y.layout)===null||w===void 0?void 0:w.detail),C)}),S=Object.assign(Object.assign({},y),{layout:k});i({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:S}})}},[s,a]),m=I.useCallback(p=>(a==null?void 0:a.length)>1?null:kr(p,h().elements),[s,a[0]]),v=I.useCallback(p=>{var w,C;let M=null;return p&&mn(p)&&(M=((C=(w=h().assets)===null||w===void 0?void 0:w[p])===null||C===void 0?void 0:C.value)||null),M},[s,a[0]]),g=I.useCallback(p=>{const w=qn(p.value);return s.assets||(s.assets={}),s.assets[w]=p,{assetId:w,assetItem:p}},[s,a[0]]);return I.useMemo(()=>{const p=m(a[0]);return r.createElement("div",{style:n,className:fe(d,t),onContextMenu:w=>{w.preventDefault()}},r.createElement(lu,{element:p,onElementChange:u,getElementAsset:v,createElementAsset:g,layout:s.layout,onLayoutChange:f}))},[a[0],s.layout,c])},ni="mod-export-image-file",Ha=700,ju=Ha+48,Co=500,Vu=Ha-Co,oi={devicePixelRatio:1,fileName:"download.png"},Bu=e=>{const{className:t,style:n,sharedStore:o}=e,i=H(ni),a=H(ni,"preview"),s=H(ni,"options"),c=H(ni,"canvas"),[d,l]=I.useState(null),[h,u]=I.useState(!0),[f,m]=I.useState(null),[v]=q.useForm(),g=I.useCallback(w=>{const C=o.getStatic("idraw");C&&(u(!0),C.getImageBlobURL({devicePixelRatio:w}).then(({blobURL:M,width:y,height:k,devicePixelRatio:S})=>{M&&(m(M),l({width:y,height:k,devicePixelRatio:S}))}).catch(M=>{console.log(M)}).finally(()=>{u(!1)}))},[]);I.useEffect(()=>{v.setFieldsValue({devicePixelRatio:oi.devicePixelRatio,fileName:oi.fileName}),setTimeout(()=>{g(oi.devicePixelRatio)},10)},[]);const p=()=>{if(!f)return;const w=v.getFieldsValue(),C=document.createElement("a");C.href=f,C.download=w.fileName||oi.fileName,document.body.appendChild(C),C.click(),document.body.removeChild(C)};return I.useMemo(()=>r.createElement("div",{style:Object.assign(Object.assign({},n),{width:Ha}),className:fe(i,t)},r.createElement(ur,{tip:"Loading...",spinning:h},r.createElement("div",{className:a,style:{width:Co,height:Co*3/4}},f&&r.createElement("img",{className:c,style:{maxWidth:Co,maxHeight:Co*3/4},src:f}))),r.createElement("div",{className:s,style:{width:Vu}},r.createElement("div",{style:{marginBottom:6}},"Width: ",d==null?void 0:d.width),r.createElement("div",null,"Height: ",d==null?void 0:d.height),r.createElement(Hl,null),r.createElement("div",null,r.createElement(q,{form:v,layout:"vertical",onValuesChange:w=>{w.devicePixelRatio>0&&setTimeout(()=>{g(w.devicePixelRatio)},10)},disabled:h},r.createElement(q.Item,{label:"Device pixel ratio",name:"devicePixelRatio"},r.createElement(et,{size:"small",options:[1,2,3,4].map(w=>({label:`x${w}`,value:w}))})),r.createElement(q.Item,{label:"File name",name:"fileName"},r.createElement(Kt,{size:"small",placeholder:"File name"})),r.createElement(Oe,{type:"primary",onClick:p,disabled:h||!f,loading:h},"Download"))))),[d,h,f,g])};var Fu=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function Wu(e){return new Promise(function(t,n){const o=new FileReader;o.onload=function(){t(o)},o.onerror=n,e.type==="application/json"?o.readAsText(e):o.readAsArrayBuffer(e)})}function Hu(e){Pa({accept:"application/json",success:t=>Fu(this,void 0,void 0,function*(){var n,o,i;const s=(yield Wu(t.file)).result;if(typeof s=="string")try{const c=JSON.parse(s);(n=e==null?void 0:e.success)===null||n===void 0||n.call(e,{json:c})}catch(c){(o=e==null?void 0:e.error)===null||o===void 0||o.call(e,c)}else(i=e==null?void 0:e.error)===null||i===void 0||i.call(e,Error("ERROR_PICK_FILE_FAIL"))}),error:e==null?void 0:e.error})}const Gu={uuid:"b8b3fdea-d4ba-669b-803d-9aea7b86a5c8",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#0D6EFD",borderRadius:16,borderDash:[],boxSizing:"border-box",opacity:1,text:"Button",fontFamily:"SF UI Display",fontSize:20,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#FFFFFF"},operations:{}},Yu={uuid:"07ddd6e3-b6a5-f843-4229-35673c811253",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1,text:"      user@example.com",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#1B1E28"},operations:{}},$u={uuid:"2adb5b3e-9798-a4ea-2cbe-d85c8c24eeb6",name:"Link",x:245,y:630,w:42,h:16,angle:0,type:"text",detail:{text:"Link",fontFamily:"SF UI Display",fontSize:14,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:16,color:"#0D6EFD",opacity:1},operations:{}},Xu={uuid:"47186341-186f-0403-3f4e-3d467afe2016",name:"Password",x:0,y:0,w:335,h:56,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"9ff6159d-bede-8e89-baac-f91afa754a06",name:"Box",x:0,y:0,w:335,h:56,angle:0,type:"rect",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1},operations:{}},{uuid:"7a47c6df-cd8c-530f-f3b9-22b661f901eb",name:"Vector",x:297.00006103515625,y:20,w:20,h:16,angle:0,type:"path",detail:{commands:[{type:"M",params:[2.530330181121826,-.5303300619125366]},{type:"C",params:[2.2374367713928223,-.8232232928276062,1.7625631093978882,-.8232232928276062,1.4696699380874634,-.5303300619125366]},{type:"C",params:[1.176776647567749,-.23743686079978943,1.176776647567749,.23743686079978943,1.4696699380874634,.5303300619125366]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[17.469669342041016,16.530330657958984]},{type:"C",params:[17.762563705444336,16.823223114013672,18.237436294555664,16.823223114013672,18.530330657958984,16.530330657958984]},{type:"C",params:[18.823223114013672,16.237436294555664,18.823223114013672,15.76256275177002,18.530330657958984,15.469670295715332]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"Z",params:[]},{type:"M",params:[12.500185012817383,10.794958114624023]},{type:"C",params:[12.808830261230469,10.518712997436523,12.83509635925293,10.04456615447998,12.55885124206543,9.735921859741211]},{type:"C",params:[12.28260612487793,9.427276611328125,11.808459281921387,9.401010513305664,11.499814987182617,9.677255630493164]},{type:"L",params:[12.500185012817383,10.794958114624023]},{type:"Z",params:[]},{type:"M",params:[8.322744369506836,6.500185489654541]},{type:"C",params:[8.598989486694336,6.191540241241455,8.572724342346191,5.717393398284912,8.264079093933105,5.44114875793457]},{type:"C",params:[7.9554338455200195,5.1649041175842285,7.481287002563477,5.191169738769531,7.205042362213135,5.499814510345459]},{type:"L",params:[8.322744369506836,6.500185489654541]},{type:"Z",params:[]},{type:"M",params:[.8697054386138916,10.146900177001953]},{type:"L",params:[.3260757029056549,10.663588523864746]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"L",params:[.8697054386138916,10.146900177001953]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,5.8530988693237305]},{type:"L",params:[19.673925399780273,5.336410999298096]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"L",params:[19.130294799804688,5.8530988693237305]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,10.14690113067627]},{type:"L",params:[19.67392349243164,10.663589477539062]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"L",params:[19.130294799804688,10.14690113067627]},{type:"Z",params:[]},{type:"M",params:[.8697060346603394,5.853097915649414]},{type:"L",params:[.32607635855674744,5.336409568786621]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"L",params:[.8697060346603394,5.853097915649414]},{type:"Z",params:[]},{type:"M",params:[17.11528778076172,11.042052268981934]},{type:"C",params:[16.802886962890625,11.314040184020996,16.770124435424805,11.787782669067383,17.042112350463867,12.100184440612793]},{type:"C",params:[17.314102172851562,12.41258716583252,17.787843704223633,12.445348739624023,18.10024642944336,12.173359870910645]},{type:"L",params:[17.11528778076172,11.042052268981934]},{type:"Z",params:[]},{type:"M",params:[7.18831205368042,.6969932913780212]},{type:"C",params:[6.793071269989014,.8209197521209717,6.573127746582031,1.2417877912521362,6.697054386138916,1.6370283365249634]},{type:"C",params:[6.820981025695801,2.03226900100708,7.241848945617676,2.2522125244140625,7.637089252471924,2.1282858848571777]},{type:"L",params:[7.18831205368042,.6969932913780212]},{type:"Z",params:[]},{type:"M",params:[4.903543949127197,3.4355645179748535]},{type:"C",params:[5.252687454223633,3.212693214416504,5.355051517486572,2.74898362159729,5.132180690765381,2.3998398780822754]},{type:"C",params:[4.909309387207031,2.0506961345672607,4.4456000328063965,1.9483320713043213,4.096456050872803,2.171203136444092]},{type:"L",params:[4.903543949127197,3.4355645179748535]},{type:"Z",params:[]},{type:"M",params:[15.551521301269531,14.047059059143066]},{type:"C",params:[15.906437873840332,13.833499908447266,16.02103042602539,13.372659683227539,15.80747127532959,13.017744064331055]},{type:"C",params:[15.593912124633789,12.662827491760254,15.133071899414062,12.548234939575195,14.778156280517578,12.761794090270996]},{type:"L",params:[15.551521301269531,14.047059059143066]},{type:"Z",params:[]},{type:"M",params:[1.4696699380874634,.5303300619125366]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"L",params:[18.530330657958984,15.469670295715332]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"L",params:[1.4696699380874634,.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[6.25,8]},{type:"C",params:[6.25,10.071067810058594,7.928932189941406,11.75,10,11.75]},{type:"L",params:[10,10.25]},{type:"C",params:[8.757359504699707,10.25,7.75,9.242640495300293,7.75,8]},{type:"L",params:[6.25,8]},{type:"Z",params:[]},{type:"M",params:[10,11.75]},{type:"C",params:[10.959962844848633,11.75,11.837237358093262,11.388312339782715,12.500185012817383,10.794958114624023]},{type:"L",params:[11.499814987182617,9.677255630493164]},{type:"C",params:[11.101249694824219,10.033981323242188,10.576745986938477,10.25,10,10.25]},{type:"L",params:[10,11.75]},{type:"Z",params:[]},{type:"M",params:[7.205042362213135,5.499814510345459]},{type:"C",params:[6.611688137054443,6.16276216506958,6.25,7.040036678314209,6.25,8]},{type:"L",params:[7.75,8]},{type:"C",params:[7.75,7.423254489898682,7.966019153594971,6.8987507820129395,8.322744369506836,6.500185489654541]},{type:"L",params:[7.205042362213135,5.499814510345459]},{type:"Z",params:[]},{type:"M",params:[.32607579231262207,10.663588523864746]},{type:"C",params:[2.297703981399536,12.738021850585938,5.848983287811279,15.75,10,15.75]},{type:"L",params:[10,14.25]},{type:"C",params:[6.519985675811768,14.25,3.3532803058624268,11.671310424804688,1.4133350849151611,9.63021183013916]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,5.3364105224609375]},{type:"C",params:[17.70229721069336,3.261976718902588,14.151017189025879,.25,10,.25]},{type:"L",params:[10,1.75]},{type:"C",params:[13.480013847351074,1.75,16.64672088623047,4.328688621520996,18.5866641998291,6.369787216186523]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,10.663589477539062]},{type:"C",params:[21.108692169189453,9.154008865356445,21.108692169189453,6.845991611480713,19.673925399780273,5.336410999298096]},{type:"L",params:[18.5866641998291,6.369786739349365]},{type:"C",params:[19.471111297607422,7.300351619720459,19.471111297607422,8.699647903442383,18.5866641998291,9.630212783813477]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"Z",params:[]},{type:"M",params:[1.4133352041244507,9.63021183013916]},{type:"C",params:[.5288880467414856,8.699646949768066,.5288882851600647,7.300351142883301,1.4133358001708984,6.369786262512207]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"C",params:[-1.1086915731430054,6.845990180969238,-1.1086925268173218,9.154007911682129,.3260757029056549,10.663588523864746]},{type:"L",params:[1.4133352041244507,9.63021183013916]},{type:"Z",params:[]},{type:"M",params:[18.10024642944336,12.173359870910645]},{type:"C",params:[18.692087173461914,11.658082008361816,19.22022819519043,11.140942573547363,19.67392349243164,10.663589477539062]},{type:"L",params:[18.586666107177734,9.630212783813477]},{type:"C",params:[18.160234451293945,10.078877449035645,17.666166305541992,10.562438011169434,17.11528778076172,11.042052268981934]},{type:"L",params:[18.10024642944336,12.173359870910645]},{type:"Z",params:[]},{type:"M",params:[10,.25]},{type:"C",params:[9.022459983825684,.25,8.080134391784668,.4173649847507477,7.18831205368042,.6969932913780212]},{type:"L",params:[7.637089252471924,2.1282858848571777]},{type:"C",params:[8.404208183288574,1.8877582550048828,9.194794654846191,1.75,10,1.75]},{type:"L",params:[10,.25]},{type:"Z",params:[]},{type:"M",params:[4.096456050872803,2.171203136444092]},{type:"C",params:[2.570507526397705,3.1452717781066895,1.280151128768921,4.332587242126465,.32607635855674744,5.336409568786621]},{type:"L",params:[1.4133356809616089,6.369786262512207]},{type:"C",params:[2.3151214122772217,5.420979022979736,3.51236629486084,4.323603630065918,4.903543949127197,3.4355645179748535]},{type:"L",params:[4.096456050872803,2.171203136444092]},{type:"Z",params:[]},{type:"M",params:[10,15.75]},{type:"C",params:[12.047597885131836,15.75,13.940337181091309,15.016534805297852,15.551521301269531,14.047059059143066]},{type:"L",params:[14.778156280517578,12.761794090270996]},{type:"C",params:[13.313118934631348,13.643331527709961,11.688562393188477,14.25,10,14.25]},{type:"L",params:[10,15.75]},{type:"Z",params:[]}],fill:"#7D848D",originX:0,originY:0,originW:20,originH:16},operations:{}},{uuid:"f3fb01f1-c2a1-7c7b-2906-49271490ecec",name:"**********",x:16,y:20,w:97,h:20,angle:0,type:"text",detail:{text:"**********",color:"#7D848D",fontSize:16,lineHeight:20,textAlign:"left",verticalAlign:"top",wordBreak:"normal"},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},Uu={uuid:"af161d19-73ae-77e3-e54d-a88be90632ba",name:"Text",x:0,y:0,w:300,h:40,angle:0,type:"text",detail:{text:"  Please fill the description",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#7D848D",opacity:1},operations:{}},Zu={uuid:"81895177-c187-eefa-de59-4b9ad201343e",name:"Title",x:0,y:0,w:136,h:34,angle:0,type:"text",detail:{text:"Title",fontFamily:"SF UI Display",fontSize:26,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:34,color:"#1B1E28",opacity:1},operations:{}},Qu=e=>({list:[{name:"Button",element:Gu},{name:"Input",element:Yu},{name:"Password",element:Xu},{name:"Text",element:Uu},{name:"Title",element:Zu},{name:"Link",element:$u}],pageSize:8,current:1,total:8}),Ju=()=>{const[e]=Mn("NavMenu");return e},sr="mod-nav-menu",Ku=e=>{const{className:t,style:n,sharedStore:o,sharedEvent:i,getMaterialTemplates:a}=e,[s,c]=hr.useModal(),d=H(sr),l=H(sr,"dropdown"),[h,u]=I.useState([]),f=Ju(),m=({key:_,domEvent:V})=>{V.preventDefault(),i.trigger("createElement",{type:_,element:{name:_}})},{state:v}=I.useContext(Pt),{getContainer:g}=I.useContext(bn),{editMode:p,pageTree:w}=v,[C,M]=I.useState(!1),[y,k]=I.useState(!1);I.useEffect(()=>{const _=V=>{const{isPageOverview:X}=V;k(!!X)};return i.on("switchPageOverview",_),()=>{i.off("switchPageOverview",_)}},[]);const S=!!(p==="page"&&(w.length===0||y)),E=_=>{const V=o.getStatic("idraw");V==null||V.resize({devicePixelRatio:_})},L={more:[{key:"about-idraw-stuido",label:f.about,disabled:!0},{key:"line",type:"divider"},{key:"file",label:f.file,children:[{key:"import-json-file",label:f.importJSONFile,onClick:()=>{Hu({success:({json:_})=>{i.trigger("resetData",{data:_})},error:()=>{}})}},{key:"export-image",label:f.exportImage,onClick:()=>{s.info({icon:null,title:"Whole image file",width:ju,content:r.createElement(Bu,{sharedEvent:i,sharedStore:o}),footer:null,closable:!0})}},{key:"export-json-file",label:f.exportJSONFile,onClick:()=>{const _=o.getStatic("idraw"),V=_==null?void 0:_.getData({compact:!0});if(V){const X=JSON.stringify(V);n0(X,{fileName:"downdown.json"})}}}]},{key:"preferences",label:f.preferences,children:[{key:"device-pixel-ratio",label:f.devicePixelRatio,type:"group",children:[{key:"device-pixel-ratio-x1",label:"x1",onClick:()=>{E(1)}},{key:"device-pixel-ratio-x2",label:"x2",onClick:()=>{E(2)}},{key:"device-pixel-ratio-x3",label:"x3",onClick:()=>{E(3)}}]}]}],element:[{key:"material",label:f.material,icon:r.createElement(gc,null),disabled:S,onClick:()=>{M(!0)}},{key:"rect",label:f.rect,icon:r.createElement(xr,null),disabled:S,onClick:m},{key:"circle",label:f.circle,icon:r.createElement(vr,null),disabled:S,onClick:m},{key:"text",label:f.text,icon:r.createElement(zr,null),disabled:S,onClick:m},{key:"image",label:f.image,icon:r.createElement(Er,null),disabled:S,onClick:m},{key:"svg",label:f.svg,disabled:S,icon:r.createElement(Mr,null),onClick:m},{key:"html",label:f.html,disabled:!0,icon:r.createElement(br,null),onClick:m},{key:"group",label:f.group,icon:r.createElement(wr,null),disabled:S,onClick:m}]},N={size:"small",type:"text"},b=[{key:"more",button:r.createElement(_c,{style:{fontSize:20}})},{key:"element",button:r.createElement(mc,{style:{fontSize:20}})}],j=()=>{const _=o.getStatic("idraw"),V=[];if(_){const{viewSizeInfo:X}=_.getViewInfo(),{devicePixelRatio:B}=X;V.push(`device-pixel-ratio-x${B}`)}u(V)};return I.useMemo(()=>r.createElement("div",{style:n,className:fe(d,t)},b.map((_,V)=>r.createElement(eo,{key:V,trigger:["click","click"],menu:{items:L[_.key]||[],selectedKeys:h},placement:"bottom",overlayClassName:l,onOpenChange:X=>{X===!0&&j()}},r.createElement(Oe,Object.assign({},N,{onClick:X=>X.preventDefault()}),r.createElement(Gl.Compact,null,_.button,r.createElement(Da,{style:{fontSize:10,marginLeft:4}}))))),r.createElement(fr,{title:f.materialTempate,placement:"left",open:C,onClose:()=>{M(!1)},styles:Tl,getContainer:g},r.createElement(Nl,{onSelect:_=>{_.element&&i.trigger("addElement",{element:xo(_.element),position:[]}),M(!1)},getTemplates:a||Qu})),c),[h,f,C])},dn="mod-header",qu=e=>{const{logo:t,navigationMenu:n,navigationCenter:o,className:i,style:a,openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u,getMaterialTemplates:f}=e,{state:m,dispatch:v}=I.useContext(Pt),g=H(dn),p=H(dn,"left"),w=H(dn,"right"),C=H(dn,"center"),M=H(dn,"locale"),y=H(dn,"scale"),k=H(dn,"switch"),{localeCode:S,scaleInfo:E}=m;return I.useMemo(()=>r.createElement("div",{style:a,className:fe(g,i)},r.createElement("div",{className:p},t,n||r.createElement(Ku,{sharedStore:h,sharedEvent:u,getMaterialTemplates:f}),r.createElement(Cu,{openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u})),o&&r.createElement("div",{className:C},o),r.createElement("div",{className:w},r.createElement(a6,{className:y,value:`${we(E.scale)}`,onChange:L=>{const N=parseFloat(L);N>0&&(v==null||v({type:"update",payload:{scaleInfo:{scale:we(N),from:"control"}}}))}}),r.createElement(Kc,{className:M,value:S,onChange:L=>{v==null||v({type:"update",payload:{localeCode:L}})}}),r.createElement(lc,{className:k,theme:m==null?void 0:m.themeMode,onChange:({theme:L})=>{v==null||v({type:"updateThemeMode",payload:{themeMode:L}})}}))),[S,E,s,c,d,l])};var e1=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const t1="mod-sketch",n1=e=>{const t=I.useRef(null),n=I.useRef(null),o=I.useRef(!1),{className:i,style:a,width:s,height:c,sharedEvent:d,sharedStore:l,useContextMenuOptions:h}=e,{generateClassName:u}=I.useContext(bn),{state:f,dispatch:m}=I.useContext(Pt),{editingData:v}=f,g=u(t1),p=I.useRef([]),w=I.useRef(f.editingData),C=I.useRef(f.data),M=I.useRef([]),[y,k]=h({sharedEvent:d,sharedStore:l});return I.useEffect(()=>{p.current=[...f.editingDataPosition],C.current=f.data,w.current=f.editingData,M.current=[...f.selectedUUIDs]},[f.editingDataPosition,f.data,f.editingData,f.selectedUUIDs]),I.useEffect(()=>{if(!(t!=null&&t.current)||n!=null&&n.current)return;const S={width:s,height:c,devicePixelRatio:window.devicePixelRatio},E=new Fa(t.current,S);E.enable("ruler"),n.current=E;const L=F=>{var A;const Z=w.current;let{uuids:Y}=F;if((Y==null?void 0:Y.length)===1&&((A=M.current)===null||A===void 0?void 0:A.length)===1&&Y[0]===M.current[0])return;const{positions:x}=F;x&&Array.isArray(x)&&x.length>0&&(Y=jr(x,Z.elements).map(D=>D.uuid)),m({type:"update",payload:{selectedUUIDs:Y}})},N=F=>{const{data:A,type:Z}=F,Y=l.getStatic("snapshotRecorder");Y&&(Y.hasBeforeSnapshot()||Y.setBeforeData({elements:F.data.elements}),F.type!=="setData"&&Y.do({elements:F.data.elements}));const x=w.current;if(["addElement","updateElement","deleteElement","moveElement","dragElement","resizeElement"].includes(Z)){const T={editingData:Object.assign({},A)};["addElement","deleteElement","moveElement"].includes(Z)&&(T.elementTree=Me(x)),m({type:"update",payload:T})}else if(Z==="changeLayout"){if(A.layout){const T=Object.assign({},A.layout);T.detail&&(T.detail=Object.assign({},T.detail)),A.layout=Object.assign({},A.layout)}m({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:Object.assign({},A)}})}},b=F=>{const{scale:A}=F;m({type:"update",payload:{scaleInfo:{scale:A,from:"event"}}})},j=F=>{const{element:A}=F;E.updateElement(A);const Z=Object.assign({},E.getData()),Y=Me(Z);m({type:"update",payload:{editingData:Object.assign({},Z),elementTree:Y}})},_=F=>{k({selectedElements:F.selectedElements||[]})},V=F=>{const{type:A,element:Z}=F,Y=E.createElement(A,{element:Z,viewCenter:!0});let x=E.getViewCenter();const T=M.current;let D=[];const W=E.getData();if(Array.isArray(T)&&T.length===1){const ee=T[0],ce=wt(ee,W.elements);let $=Be(ce,W.elements);if(ce.length>1){D=[...ce];let J=D.pop();J+=1;const oe=[...D];D.push(J),$=Be(oe,W.elements),x=dt($),Y.x=x.x-Y.w/2,Y.y=x.y-Y.h/2}}const U=E.addElement(Y,{position:D}),se=Me(U);m({type:"update",payload:{editingData:Object.assign({},U),elementTree:se}}),E.selectElements([Y.uuid])},X=F=>{const{element:A,position:Z=[]}=F;let Y=E.getViewCenter();const x=M.current;let T=Z;const D=E.getData();if(Array.isArray(x)&&x.length===1){const se=x[0],ee=wt(se,D.elements),ce=Be(ee,D.elements);ee.length>0&&(ce==null?void 0:ce.type)==="group"&&Array.isArray(ce.detail.children)&&(T=[...ee],T.push(ce.detail.children.length),Y=dt(ce))}const W=E.addElement(Object.assign(Object.assign({},A),{x:Y.x-A.w/2,y:Y.y-A.h/2}),{position:T}),U=Me(W);m({type:"update",payload:{editingData:Object.assign({},W),elementTree:U}}),E.selectElements([A.uuid])},B=F=>{const{uuid:A}=F;E==null||E.deleteElement(A);const Z=E==null?void 0:E.getData();if(Z){const Y=Me(Z);m({type:"update",payload:{editingData:Object.assign({},Z),elementTree:Y}}),E.trigger(Te.CLEAR_SELECT,{})}},R=F=>{const{element:A,inPageOverview:Z}=F,{w:Y,h:x,detail:T}=A,D=C.current;D.elements=[...D.elements,A];const W=e1(T,["children"]);let U={elements:A.detail.children,layout:{x:0,y:0,w:Y,h:x,detail:W,operations:{position:"relative"}}};const se=Me(D);let ee=[se.length-1];Z===!0&&(U=D,ee=[]);const ce=Me(U);m({type:"update",payload:{data:Object.assign({},D),elementTree:ce,pageTree:se,editingDataPosition:ee}}),d.trigger("resetEditingView",{type:"go-to-page",position:[se.length-1]})},O=F=>{var A;const{uuid:Z}=F;if(!Z)return;const Y=C.current;let x=-1;const T={pageTree:[]};for(let U=0;U<Y.elements.length;U++)if(((A=Y.elements[U])===null||A===void 0?void 0:A.uuid)===Z){Y.elements.splice(U,1),Y.elements=[...Y.elements],x=U;break}const D=Me(Y);T.data=Object.assign({},Y),T.pageTree=D,m({type:"update",payload:T});let W=p.current[0]||0;W>=x&&(W-=1,d.trigger("resetEditingView",{type:"go-to-page",position:[W||0]}))},P=F=>{const{type:A,position:Z}=F,Y=n==null?void 0:n.current;if(!Y)return;const x=p.current,T=w.current;let D=C.current;if(x.length>0?uu(x,T,D):x.length===0&&(D=T),A==="go-to-page"&&Z){const W=[...Z],U=Xt(W,D),se=Me(U);m({type:"update",payload:{data:Object.assign({},D),editingData:Object.assign({},U),editingDataPosition:W,elementTree:se}}),Y.centerContent({data:U}),Y.trigger(Te.CLEAR_SELECT,{});const ee=l.getStatic("snapshotRecorder");ee==null||ee.clear(),ee==null||ee.setBeforeData(U)}else if(A==="go-to-group"&&Z){const W=[...Z],U=Xt(W,D),se=Me(U);m({type:"update",payload:{data:Object.assign({},D),editingData:Object.assign({},U),editingDataPosition:W,elementTree:se}}),Y.centerContent({data:U}),Y.trigger(Te.CLEAR_SELECT,{});const ee=l.getStatic("snapshotRecorder");ee==null||ee.clear(),ee==null||ee.setBeforeData(U)}else if(A==="go-to-next-group"&&Z){const W=[...x,...Z],U=Xt(W,D),se=Me(U);m({type:"update",payload:{data:Object.assign({},D),editingData:Object.assign({},U),editingDataPosition:W,elementTree:se}}),Y.centerContent({data:U}),Y.trigger(Te.CLEAR_SELECT,{});const ee=l.getStatic("snapshotRecorder");ee==null||ee.clear(),ee==null||ee.setBeforeData(U)}else if(A==="back-one"&&x.length>0){const W=[...x];W.pop();const U=Xt(W,D),se=Me(U);m({type:"update",payload:{data:Object.assign({},D),editingData:Object.assign({},U),editingDataPosition:[...W],elementTree:se}}),Y.centerContent({data:U}),Y.trigger(Te.CLEAR_SELECT,{});const ee=l.getStatic("snapshotRecorder");ee==null||ee.clear(),ee==null||ee.setBeforeData(U)}else if(A==="back-root"){const W=[],U=Xt(W,D),se=Me(U);m({type:"update",payload:{data:Object.assign({},D),editingData:U,editingDataPosition:W,elementTree:se}}),Y.centerContent({data:U}),Y.trigger(Te.CLEAR_SELECT,{});const ee=l.getStatic("snapshotRecorder");ee==null||ee.clear(),ee==null||ee.setBeforeData(U)}},z=F=>{let{data:A}=F,Z=[],Y=Lo(A);if(f.editMode==="page"&&(A=Ml(A),Y=Lo(A),Y.length>0)){const D=Y[0].uuid;Z=wt(D,A.elements)}let x=Xt(Z,A);const T=Me(x);m({type:"update",payload:{data:Object.assign({},A),editingData:Object.assign({},x),editingDataPosition:Z,elementTree:T,pageTree:Y}}),E.centerContent({data:x}),E.trigger(Te.CLEAR_SELECT,{})},G=F=>{const{editingData:A}=F,Z=Me(A);m({type:"update",payload:{editingData:Object.assign({},A),elementTree:Z}}),E.trigger(Te.CLEAR_SELECT,{})};if(E.on(Te.SELECT,L),E.on(Te.CHANGE,N),E.on(Te.SCALE,b),E.on(Te.TEXT_CHANGE,j),E.on(Te.CONTEXT_MENU,_),d.on("createElement",V),d.on("addElement",X),d.on("deleteElement",B),d.on("addPage",R),d.on("deletePage",O),d.on("resetEditingView",P),d.on("resetData",z),d.on("resetEditingData",G),d.on("dispatch",m),!o.current){if(f.scaleInfo){const{scale:F,offsetX:A,offsetY:Z}=f.scaleInfo;F&&A&&Z?E.setViewScale({scale:F,offsetX:A,offsetY:Z}):E.centerContent({data:f.editingData})}o.current=!0}return l.setStatic("idraw",E),()=>{o.current=!1,E.off(Te.SELECT,L),E.off(Te.CHANGE,N),E.off(Te.SCALE,b),E.off(Te.TEXT_CHANGE,j),E.off(Te.CONTEXT_MENU,_),l.setStatic("idraw",null),l.setStatic("snapshotRecorder",null)}},[]),I.useEffect(()=>{n!=null&&n.current&&n.current.setData(v)},[v]),I.useEffect(()=>{if(n!=null&&n.current){const S=n.current;f.scaleInfo.from==="control"&&S.scale({scale:f.scaleInfo.scale,point:{x:s/2,y:c/2}})}},[f.scaleInfo]),I.useEffect(()=>{const S=n.current,E=t.current;S&&S.resize({width:s,height:c}),E&&(E.style.width=`${s}px`,E.style.height=`${c}px`)},[s,c]),I.useMemo(()=>r.createElement(eo,{menu:{items:y},trigger:["contextMenu"]},r.createElement("div",{ref:t,className:fe(g,i),style:Object.assign(Object.assign({},a),{width:s,height:c,padding:0})})),[y])},_n="mod-dashboard",ii=240,ai=240,jn=36,o1=I.forwardRef((e,t)=>{const{className:n,style:o,width:i,height:a,logo:s,navigationMenu:c,navigationCenter:d,defaultSelectedElementUUIDs:l,sharedStore:h,sharedEvent:u,useContextMenuOptions:f,handleKeyboard:m,getPageTemplates:v,getMaterialTemplates:g}=e,{state:p}=I.useContext(Pt),{editMode:w}=p,[C,M]=I.useState(!0),[y,k]=I.useState(!0);I.useEffect(()=>{const X=B=>{["INPUT","TEXTAREA"].includes(B.target.nodeName)||m(B,{sharedEvent:u,sharedStore:h})};return window.addEventListener("keydown",X),()=>{window.removeEventListener("keydown",X)}},[]);const[S,E]=I.useState({leftWidth:C?ii:0,rightWidth:y?ai:0,centerWidth:i-(C?ii:0)-(y?ai:0)});I.useEffect(()=>{const X=C?ii:0,B=y?ai:0,R=i-X-B;E({leftWidth:X,rightWidth:B,centerWidth:R})},[a,i,C,y]);const L=H(_n),N=H(_n,"header"),b=H(_n,"content"),j=H(_n,"left"),_=H(_n,"right"),V=H(_n,"right");return I.useMemo(()=>{const{leftWidth:X,rightWidth:B,centerWidth:R}=S;return r.createElement("div",{ref:t,className:fe(L,n),style:Object.assign(Object.assign({},o),{width:i,height:a,padding:0})},r.createElement("div",{className:N,style:{height:jn}},r.createElement(qu,{sharedEvent:u,sharedStore:h,logo:s,navigationMenu:c,navigationCenter:d,openLeftSider:C,openRightSider:y,getMaterialTemplates:g,onClickToggleLayer:()=>{const O=!C;let P=X;O?P=ii:P=0,E({leftWidth:P,rightWidth:B,centerWidth:i-P-B}),M(O)},onClickToggleSetting:()=>{const O=!y;let P=B;O?P=ai:P=0,E({leftWidth:X,rightWidth:P,centerWidth:i-X-P}),k(O)}})),r.createElement("div",{className:b,style:{top:jn}},r.createElement(Ii,{split:"vertical",defaultSize:R+B,allowResize:!0,onChange:O=>{const P=i-O,z=O-B;z<100||E({leftWidth:P,rightWidth:B,centerWidth:z})},pane1Style:{width:X},pane2Style:{width:R+B}},r.createElement("div",null,C&&(w==="page"?r.createElement(Pu,{height:a-jn,className:j,defaultSelectedElementUUIDs:l,sharedEvent:u,sharedStore:h,useContextMenuOptions:f,getPageTemplates:v}):r.createElement(xu,{height:a-jn,className:j,sharedEvent:u,sharedStore:h,useContextMenuOptions:f}))),r.createElement("div",{style:{width:S.centerWidth+S.rightWidth,display:"flex",flexDirection:"row"}},r.createElement(n1,{className:V,width:R,height:a-jn,sharedStore:h,sharedEvent:u,useContextMenuOptions:f}),r.createElement("div",{className:_,style:{width:B,height:a-jn}},r.createElement(_u,null))))))},[n,w,C,y,S,a])});function rr(){return{clipboard:{type:"default",data:null},selectedUUIDs:[]}}function i1(e){const{sharedEvent:t,sharedStore:n}=e;t.on("copy",()=>{const o=n.getStatic("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const s=li(i,a.elements);s.length>0&&n.set("clipboard",{type:"copy-elements",data:s})}}),t.on("paste",()=>{const o=n.getStatic("idraw"),i=n.get("clipboard"),a=n.get("selectedUUIDs");if(o&&["copy-elements","cut-elements"].includes(i==null?void 0:i.type)&&Array.isArray(i.data)){const s=i.data,c=[];if(i.type==="copy-elements"){for(let f=0;f<s.length;f++)if(s[f]){const m=s[f],v=xo(m);v.name=`${v.name} copy`,c.push(v)}}else if(i.type==="cut-elements"){for(let f=0;f<s.length;f++)if(s[f]){const m=s[f],v=xo(m);v.name=`${v.name}`,c.push(v)}}const d=o==null?void 0:o.getData(),l=wt(a[0],(d==null?void 0:d.elements)||[]);l.length>0&&l[l.length-1]++,c.forEach(f=>{o.addElement(f,{position:l})});const h=o==null?void 0:o.getData(),u=Me(h);t.trigger("dispatch",{type:"update",payload:{editingData:h,elementTree:u}}),o.selectElement(c[0].uuid),setTimeout(()=>{t.trigger("scrollToLayer",{uuid:c[0].uuid})},100)}}),t.on("cut",()=>{const o=n.getStatic("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const d=li(i,a.elements);d.length>0&&n.set("clipboard",{type:"cut-elements",data:d.map(l=>xo(l))}),d.forEach(l=>{o==null||o.deleteElement(l.uuid)})}const s=o==null?void 0:o.getData(),c=Me(s);t.trigger("dispatch",{type:"update",payload:{editingData:s,elementTree:c}}),o==null||o.trigger(Te.CLEAR_SELECT)}),t.on("delete",()=>{const o=n.getStatic("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const s=li(i,a.elements);if(s.length>0){for(let l=0;l<s.length;l++)o==null||o.deleteElement(s[l].uuid);const c=o==null?void 0:o.getData(),d=Me(c);t.trigger("dispatch",{type:"update",payload:{editingData:c,elementTree:d}}),o==null||o.trigger(Te.CLEAR_SELECT)}}}),t.on("undo",()=>{const o=n==null?void 0:n.getStatic("idraw"),i=n.getStatic("snapshotRecorder"),a=i==null?void 0:i.undo(o==null?void 0:o.getData());a&&(t==null||t.trigger("resetEditingData",{editingData:Object.assign(Object.assign({},o==null?void 0:o.getData()),a)}),o==null||o.cancelElements())}),t.on("redo",()=>{const o=n==null?void 0:n.getStatic("idraw"),i=n.getStatic("snapshotRecorder"),a=i==null?void 0:i.redo(o==null?void 0:o.getData());a&&(t==null||t.trigger("resetEditingData",{editingData:Object.assign(Object.assign({},o==null?void 0:o.getData()),a)}),o==null||o.cancelElements())})}const a1=e=>{const{label:t,suffix:n}=e;return r.createElement("span",{style:{display:"inline-flex",width:180,flexDirection:"row",justifyContent:"space-between"}},r.createElement("span",{style:{display:"inline-flex"}},t),r.createElement("span",{style:{display:"inline-flex",opacity:.5}},n))},s1=e=>{const[t]=Mn("contextMenu"),{sharedEvent:n}=e,o=[{name:t.copy,hotKey:"Ctrl+C",key:"copy",disabled:!0,onClick:()=>{n.trigger("copy")}},{name:t.paste,hotKey:"Ctrl+V",key:"paste",disabled:!0,onClick:()=>{n.trigger("paste")}},{name:t.cut,hotKey:"Ctrl+X",key:"cut",disabled:!0,onClick:()=>{n.trigger("cut")}},{name:t.delete,hotKey:"Del",key:"delete",disabled:!0,onClick:()=>{n.trigger("delete")}}],i=h=>h.map(f=>{const m=t[f==null?void 0:f.key]||f.name;return{label:r.createElement(a1,{label:m,suffix:r.createElement("span",null,f.hotKey)}),key:f.key,disabled:f.disabled,onClick:f.onClick}}),[a,s]=I.useState(o),[c,d]=I.useState(i(a));return I.useEffect(()=>{d(i(a))},[a,t]),[c,h=>{const{selectedElements:u}=h;a==null||a.forEach(f=>{f&&["copy","paste","cut","delete"].includes(f==null?void 0:f.key)&&(f.disabled=!((u==null?void 0:u.length)>0))}),s([...a])}]};var Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});var r1=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ga={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Ll={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r1?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},Ga={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var si=1;si<20;si++)Ga["f"+si]=111+si;function Yi(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var o=e.map(function(s){return Dl(s,t)}),i=function(c){return o.some(function(d){return Rl(d,c)})},a=n==null?i:i(n);return a}function l1(e,t){return Yi(e,t)}function c1(e,t){return Yi(e,{byKey:!0},t)}function Dl(e,t){var n=t&&t.byKey,o={};e=e.replace("++","+add");var i=e.split("+"),a=i.length;for(var s in ga)o[ga[s]]=!1;var c=!0,d=!1,l=void 0;try{for(var h=i[Symbol.iterator](),u;!(c=(u=h.next()).done);c=!0){var f=u.value,m=f.endsWith("?")&&f.length>1;m&&(f=f.slice(0,-1));var v=Ya(f),g=ga[v];if(f.length>1&&!g&&!Ll[f]&&!Ga[v])throw new TypeError('Unknown modifier: "'+f+'"');(a===1||!g)&&(n?o.key=v:o.which=Pl(f)),g&&(o[g]=m?null:!0)}}catch(p){d=!0,l=p}finally{try{!c&&h.return&&h.return()}finally{if(d)throw l}}return o}function Rl(e,t){for(var n in e){var o=e[n],i=void 0;if(o!=null&&(n==="key"&&t.key!=null?i=t.key.toLowerCase():n==="which"?i=o===91&&t.which===93?91:t.which:i=t[n],!(i==null&&o===!1)&&i!==o))return!1}return!0}function Pl(e){e=Ya(e);var t=Ga[e]||e.toUpperCase().charCodeAt(0);return t}function Ya(e){return e=e.toLowerCase(),e=Ll[e]||e,e}var Vn=Ot.default=Yi;Ot.isHotkey=Yi;Ot.isCodeHotkey=l1;Ot.isKeyHotkey=c1;Ot.parseHotkey=Dl;Ot.compareHotkey=Rl;Ot.toKeyCode=Pl;Ot.toKeyName=Ya;const d1=(e,t)=>{const{sharedEvent:n}=t;Vn("mod+c",e)?n.trigger("copy",void 0):Vn("mod+v",e)?n.trigger("paste",void 0):Vn("mod+x",e)?n.trigger("cut",void 0):Vn("del",e)||Vn("backspace",e)?n.trigger("delete",void 0):Vn("mod+s",e)&&console.log("Save ... ")};var vt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ye=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},qe,At,Yt,$t,at;class u1{constructor(){qe.set(this,void 0),vt(this,qe,new Map,"f")}on(t,n){if(ye(this,qe,"f").has(t)){const o=ye(this,qe,"f").get(t)||[];o==null||o.push(n),ye(this,qe,"f").set(t,o)}else ye(this,qe,"f").set(t,[n])}off(t,n){if(ye(this,qe,"f").has(t)){const o=ye(this,qe,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}ye(this,qe,"f").set(t,o||[])}}trigger(t,n){const o=ye(this,qe,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(ye(this,qe,"f").has(t)){const n=ye(this,qe,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){ye(this,qe,"f").clear()}}qe=new WeakMap;class h1{constructor(){At.set(this,[]),Yt.set(this,[]),$t.set(this,null),at.set(this,void 0),vt(this,at,new u1,"f")}on(t,n){ye(this,at,"f").on(t,n)}off(t,n){ye(this,at,"f").off(t,n)}hasBeforeSnapshot(){return!!ye(this,$t,"f")}setBeforeData(t){if(t){const n={data:yt(t),time:Date.now()};vt(this,$t,n,"f")}}canUndo(){return ye(this,At,"f").length>0}canRedo(){return ye(this,Yt,"f").length>0}clear(){vt(this,At,[],"f"),vt(this,Yt,[],"f"),vt(this,$t,null,"f"),ye(this,at,"f").trigger("clear")}destroy(){this.clear(),vt(this,At,null,"f"),vt(this,Yt,null,"f"),vt(this,$t,null,"f"),ye(this,at,"f").clear(),ye(this,at,"f").destroy(),vt(this,at,null,"f")}do(t){if(ye(this,$t,"f")){const n=ye(this,$t,"f");ye(this,At,"f").push(n),this.setBeforeData(t)}ye(this,at,"f").trigger("do",{canRedo:this.canRedo(),canUndo:this.canUndo()})}undo(t){if(ye(this,At,"f").length===0)return null;const n=ye(this,At,"f").pop();return n?(t&&ye(this,Yt,"f").push({data:yt(t),time:Date.now()}),ye(this,at,"f").trigger("undo",{canRedo:this.canRedo(),canUndo:this.canUndo()}),n.data):null}redo(t){if(ye(this,Yt,"f").length===0)return null;const n=ye(this,Yt,"f").pop();return n?(t&&ye(this,At,"f").push({data:yt(t),time:Date.now()}),ye(this,at,"f").trigger("redo",{canRedo:this.canRedo(),canUndo:this.canUndo()}),n.data):null}}At=new WeakMap,Yt=new WeakMap,$t=new WeakMap,at=new WeakMap;const v1=r.forwardRef((e,t)=>{var n,o;const{width:i=1e3,height:a=600,style:s,className:c,logo:d,navigationMenu:l,navigationCenter:h,defaultSelectedElementUUIDs:u,defaultEditMode:f,prefiexName:m,onEditGroupElement:v,useContextMenuOptions:g=s1,handleKeyboard:p=d1,getPageTemplates:w,getMaterialTemplates:C}=e,[M,y]=I.useReducer(gu,fu(e)),k=I.useRef(null),S=I.useRef(new gn),E=I.useRef(new vn({defaultStorage:rr()})),L=I.useRef(new h1);return!((n=E.current)===null||n===void 0)&&n.getStatic("snapshotRecorder")||(o=E.current)===null||o===void 0||o.setStatic("snapshotRecorder",L.current),I.useEffect(()=>{if(f!=="page"){const N=Be(M.editingDataPosition,M.data.elements);v==null||v({uuid:N==null?void 0:N.uuid,position:[...M.editingDataPosition]})}},[M.editingDataPosition]),I.useImperativeHandle(t,()=>({getSharedEvent(){return S.current},getSharedStore(){return E.current},dispatch(b){const{type:j,payload:_}=b;y({type:j,payload:_})}}),[]),I.useEffect(()=>(S.current||(S.current=new gn),E.current||(E.current=new vn({defaultStorage:rr()})),i1({sharedEvent:S.current,sharedStore:E.current}),()=>{var N,b;(N=E.current)===null||N===void 0||N.clear(),(b=S.current)===null||b===void 0||b.destroy(),S.current=null,E.current=null}),[]),I.useEffect(()=>{const N=E.current;N&&N.set("selectedUUIDs",[...M.selectedUUIDs])},[M.selectedUUIDs]),I.useEffect(()=>{const N=S.current;N==null||N.trigger("switchTheme",{theme:M.themeMode})},[M.themeMode]),I.useEffect(()=>{const N=S.current;N==null||N.trigger("changeLocale",{locale:M.localeCode})},[M.localeCode]),I.useEffect(()=>{const N=S.current;N==null||N.trigger("trackDataChange",{data:M.data})},[M.data]),I.useEffect(()=>{const N=S.current;N==null||N.trigger("trackEditingDataChange",{editingData:M.editingData,editingDataPosition:M.editingDataPosition})},[M.editingData,M.editingDataPosition]),I.useMemo(()=>r.createElement(Ul,{localeCode:M.localeCode,topPrefix:m,themeMode:M.themeMode,getContainer:()=>k.current||document.body},r.createElement(vu,{value:{state:M,dispatch:y}},r.createElement(o1,{logo:d,navigationMenu:l,navigationCenter:h,ref:k,width:i,height:a,style:s,className:c,defaultSelectedElementUUIDs:u,sharedEvent:S.current,sharedStore:E.current,useContextMenuOptions:g,handleKeyboard:p,getPageTemplates:w,getMaterialTemplates:C}))),[m,i,a,M,y])});export{v1 as S};
