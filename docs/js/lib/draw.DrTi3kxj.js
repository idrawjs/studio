import{r as T,R as r}from"./react.D016eMnP.js";import{c as ce,C as zl,t as _a,S as Us,a as We,T as le,D as mo,B as Oe,I as _t,b as Zs,F as K,R as de,d as J,e as Il,f as Al,g as Tl,h as et,P as Qs,s as co,E as Rt,i as Sa,j as Nl,k as xn,l as Js,A as Dl,m as Pl,n as Ks,o as Ll,M as Ol,p as Rl}from"./antd.CZQqUoQG.js";let Ai="idraw-studio";function Va(e){Ai=e}function Ba(){return Ai}function qs(e){return(...t)=>[Ai,e,...t].join("-")}function G(...e){return[Ai,...e].join("-")}const kl={locale:"en-US",Header:{},LayoutDetail:{layout:"Layout",groupLayout:"Group Layout",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible"},ElementDesign:{element:"Element",layout:"Layout",global:"Global"},ElementDetail:{basicAttributes:"Basic",borderAttribute:"Border",contentAttribute:"Content",shadowAttribute:"Shadow",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible",deepResizeInGroup:"Deep resize in group",fill:"Fill",stroke:"Stroke"},Menu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio"}},jl={locale:"zh-CN",Header:{},LayoutDetail:{layout:"布局",groupLayout:"组布局",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视"},ElementDesign:{element:"元素",layout:"布局",global:"全局"},ElementDetail:{basicAttributes:"基础",borderAttribute:"边框",contentAttribute:"内容",shadowAttribute:"阴影",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视",deepResizeInGroup:"组内尺寸关联调整",fill:"填充",stroke:"描边"},Menu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例"}},Fa={"en-US":kl,"zh-CN":jl},na="en-US",Ea=e=>{const{localeCode:t}=T.useContext(an);return[T.useMemo(()=>{const i=(Fa[t||na]||Fa[na])[e];return Object.assign({},i)},[t,e])]},_l=e=>{const{themeMode:t}=e,n="theme",o=G(n),i=G(n,"dark"),a=ce({[o]:!0,[i]:t==="dark"});return{themeMode:t,className:a}},er=e=>(e!=null&&e.topPrefix&&typeof(e==null?void 0:e.topPrefix)=="string"&&Va(e.topPrefix),Object.assign({topPrefix:Ba(),createPrefixName:qs,generateClassName:G,getClassNameTopPrefix:Ba,setClassNameTopPrefix:Va,localeCode:na,getContainer:()=>(e==null?void 0:e.container)||document.body},e||{})),an=T.createContext(er()),Vl=e=>{const{children:t,topPrefix:n,localeCode:o,container:i,themeMode:a,getContainer:s}=e,c=er({topPrefix:n,localeCode:o,getContainer:s}),[d,l]=T.useState(c),{className:h}=_l({themeMode:a});return T.useEffect(()=>{l(Object.assign(Object.assign({},d),{localeCode:o,container:i}))},[o,i]),r.createElement(an.Provider,{value:Object.assign({},d)},r.createElement(zl,{theme:{algorithm:a==="dark"?_a.darkAlgorithm:_a.defaultAlgorithm}},r.createElement("div",{className:h},t)))};class Wa extends r.PureComponent{render(){const{children:t,className:n,split:o,style:i,size:a,eleRef:s}=this.props,c=["Pane",o,n];let d={flex:1,position:"relative",outline:"none"};return a!==void 0&&(o==="vertical"?d.width=a:(d.height=a,d.display="flex"),d.flex="none"),d=Object.assign({},d,i||{}),r.createElement("div",{ref:s,className:c.join(" "),style:d},t)}}const Bl="base-split-pane",Fl=()=>{const{generateClassName:e}=T.useContext(an);return{modClassName:e(Bl)}};function Wl(e){const{modClassName:t}=Fl(),{className:n,onClick:o,onDoubleClick:i,onMouseDown:a,onTouchEnd:s,onTouchStart:c,resizerClassName:d=t,split:l,style:h}=e,u=[d,l,n];return T.useMemo(()=>r.createElement("span",{role:"presentation",className:u.join(" "),style:h,onMouseDown:m=>a(m),onTouchStart:m=>{m.preventDefault(),c(m)},onTouchEnd:m=>{m.preventDefault(),s(m)},onClick:m=>{o&&(m.preventDefault(),o(m))},onDoubleClick:m=>{i&&(m.preventDefault(),i(m))}}),[])}const Hl="xxxxx";function Ha(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch{}}function Ga(e,t,n,o){if(typeof o=="number"){const i=typeof t=="number"?t:0,a=typeof n=="number"&&n>=0?n:1/0;return Math.max(i,Math.min(a,o))}return e!==void 0?e:t}function Gl(e){return r.Children.toArray(e).filter(t=>t)}class gi extends r.Component{constructor(t){super(t),this.onMouseDown=this.onMouseDown.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this);const{size:n,defaultSize:o,minSize:i,maxSize:a,primary:s}=t,c=n!==void 0?n:Ga(o,i,a,null);this.state={active:!1,resized:!1,pane1Size:s==="first"?c:void 0,pane2Size:s==="second"?c:void 0,instanceProps:{size:n}}}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(gi.getSizeUpdate(this.props,this.state))}static getDerivedStateFromProps(t,n){return gi.getSizeUpdate(t,n)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}onMouseDown(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchStart(n)}onTouchStart(t){const{allowResize:n,onDragStarted:o,split:i}=this.props;if(n){Ha(document,window);const a=i==="vertical"?t.touches[0].clientX:t.touches[0].clientY;typeof o=="function"&&o(),this.setState({active:!0,position:a})}}onMouseMove(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchMove(n)}onTouchMove(t){const{allowResize:n,maxSize:o,minSize:i,onChange:a,split:s,step:c}=this.props,{active:d,position:l}=this.state;if(n&&d){Ha(document,window);const h=this.props.primary==="first",u=h?this.pane1:this.pane2,m=h?this.pane2:this.pane1;if(u){const f=u,v=m;if(f.getBoundingClientRect){const g=f.getBoundingClientRect().width,p=f.getBoundingClientRect().height,y=s==="vertical"?t.touches[0].clientX:t.touches[0].clientY,E=s==="vertical"?g:p;let S=l-y;if(c){if(Math.abs(S)<c)return;S=~~(S/c)*c}let w=h?S:-S;const A=parseInt(window.getComputedStyle(f).order),b=parseInt(window.getComputedStyle(v).order);A>b&&(w=-w);let z=o;if(o!==void 0&&o<=0){const M=this.splitPane;s==="vertical"?z=M.getBoundingClientRect().width+o:z=M.getBoundingClientRect().height+o}let O=E-w;const L=l-S;O<i?O=i:o!==void 0&&O>z?O=z:this.setState({position:L,resized:!0}),a&&a(O),this.setState({draggedSize:O,[h?"pane1Size":"pane2Size"]:O})}}}}onMouseUp(){const{allowResize:t,onDragFinished:n}=this.props,{active:o,draggedSize:i}=this.state;t&&o&&(typeof n=="function"&&n(i),this.setState({active:!1}))}static getSizeUpdate(t,n){const o={},{instanceProps:i}=n;if(i.size===t.size&&t.size!==void 0)return{};const a=t.size!==void 0?t.size:Ga(t.defaultSize,t.minSize,t.maxSize,n.draggedSize);t.size!==void 0&&(o.draggedSize=a);const s=t.primary==="first";return o[s?"pane1Size":"pane2Size"]=a,o[s?"pane2Size":"pane1Size"]=void 0,o.instanceProps={size:t.size},o}render(){const{allowResize:t,children:n,className:o,onResizerClick:i,onResizerDoubleClick:a,paneClassName:s,pane1ClassName:c,pane2ClassName:d,paneStyle:l,pane1Style:h,pane2Style:u,resizerClassName:m,resizerStyle:f,split:v,style:g}=this.props,{pane1Size:p,pane2Size:y}=this.state,E=t?"":"disabled",S=m&&`${m} ${Hl}`,w=Gl(n),A=Object.assign({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},g);v==="vertical"?Object.assign(A,{flexDirection:"row",left:0,right:0}):Object.assign(A,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});const b=["SplitPane",o,v,E],z=Object.assign(Object.assign({},l),h),O=Object.assign(Object.assign({},l),u),L=["Pane1",s,c].join(" "),M=["Pane2",s,d].join(" ");return r.createElement("div",{className:b.join(" "),ref:I=>{this.splitPane=I},style:A},r.createElement(Wa,{className:L,key:"pane1",eleRef:I=>{this.pane1=I},size:p,split:v,style:z},w[0]),r.createElement(Wl,{className:E,onClick:i,onDoubleClick:a,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:S,split:v,style:f||{}}),r.createElement(Wa,{className:M,key:"pane2",eleRef:I=>{this.pane2=I},size:y,split:v,style:O},w[1]))}}var Yl=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const $l="icon",Xl=()=>({iconClassName:G($l)}),ne=e=>{const{className:t,style:n,children:o}=e,i=Yl(e,["className","style","children"]),{iconClassName:a}=Xl();return T.useMemo(()=>r.createElement("span",Object.assign({className:ce([a,t]),style:n},i),o),[a,n,t])},Ul=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M516.266667 938.666667h-38.4c-234.666667-21.333333-405.333333-230.4-384-465.066667 17.066667-204.8 179.2-366.933333 384-384 17.066667 0 34.133333 8.533333 42.666666 21.333333 8.533333 12.8 8.533333 34.133333-4.266666 46.933334-85.333333 115.2-59.733333 273.066667 55.466666 358.4 89.6 68.266667 213.333333 68.266667 302.933334 0 12.8-8.533333 29.866667-12.8 46.933333-4.266667 12.8 8.533333 21.333333 25.6 21.333333 42.666667-8.533333 115.2-64 217.6-153.6 290.133333-81.066667 59.733333-174.933333 93.866667-273.066666 93.866667zM396.8 187.733333c-123.733333 42.666667-213.333333 153.6-221.866667 290.133334-17.066667 187.733333 119.466667 354.133333 307.2 371.2 89.6 8.533333 179.2-17.066667 247.466667-76.8 46.933333-38.4 81.066667-89.6 102.4-145.066667-106.666667 38.4-226.133333 21.333333-320-46.933333-119.466667-93.866667-166.4-251.733333-115.2-392.533334z"}))),Zl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 768c-141.376 0-256-114.624-256-256s114.624-256 256-256 256 114.624 256 256-114.624 256-256 256z m0-85.333333a170.666667 170.666667 0 1 0 0-341.333334 170.666667 170.666667 0 0 0 0 341.333334zM469.333333 85.333333a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0V85.333333z m0 768a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0v-85.333334zM85.333333 554.666667a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334H85.333333z m768 0a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334h-85.333334zM161.834667 222.165333a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m576 576a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m-515.669334 64a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z m576-576a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z"}))),Ql="base-theme-switch",Jl=qs(Ql),Ya=e=>{if(!(typeof e>"u"))return e==="light"};function Kl(e){return e===!0?"light":"dark"}const ql=e=>{const{className:t,style:n,onChange:o,theme:i,defaultTheme:a}=e;return r.createElement(Us,{className:ce([Jl(),t]),style:n,checkedChildren:r.createElement(Zl,{style:{height:"100%"}}),unCheckedChildren:r.createElement(Ul,{style:{height:"100%"}}),checked:Ya(a),defaultChecked:Ya(i),onChange:s=>{const c=Kl(s);o==null||o({theme:c})}})},$a=We.Option,ec="base-locale-selector",tc=e=>{const{className:t,style:n,defaultValue:o,value:i,onChange:a}=e;return T.useMemo(()=>r.createElement(We,{style:n,className:ce(G(ec),t),size:"small",defaultValue:o,value:i,onChange:a},r.createElement($a,{value:"en-US"},"English"),r.createElement($a,{value:"zh-CN"},"中文")),[t,n,o,i,a])};function Ca(e){const{accept:t,success:n,error:o}=e;let i=document.createElement("input");i.type="file",t&&(i.accept=t),i.addEventListener("change",function(){var a;const s=(a=i.files)===null||a===void 0?void 0:a[0];n({file:s}),i=null}),i.addEventListener("error",function(a){typeof o=="function"&&o(a),i=null}),i.click()}function nc(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsDataURL(e)})}function oc(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsText(e)})}function ic(e){const t=new TextEncoder().encode(e),n=new Blob([t],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(n)}function ac(e,t){const{fileName:n}=t,o=ic(e);let i=document.createElement("a");i.href=o,i.download=n,i.click(),i=null}function vi(e){return typeof e=="string"&&(/^\#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(e)||/^[a-z]{1,}$/i.test(e))}function sc(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="linear-gradient"){const n=[];typeof e.angle=="number"?n.push(`${e.angle}deg`):n.push("180deg"),Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(${n.join(", ")})`}else if((e==null?void 0:e.type)==="radial-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`radial-gradient(circle, ${n.join(", ")})`}return t}function pi(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="radial-gradient"||(e==null?void 0:e.type)==="linear-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.length>0&&(e.stops.forEach((o,i)=>{n.push(`${o.color} ${o.offset*100}%`),i===e.stops.length-1&&o.offset<1&&n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(90deg, ${n.join(", ")})`)}return t}function Xa(e,t){if(t===1)return e;let n=1;const o=/^\#[0-9a-f]{6,6}$/i,i=/^\#[0-9a-f]{8,8}$/i;let a=e;if(o.test(e)?n=parseInt(e.substring(5,7).replace(/^\#/,"0x")):i.test(e)&&(n=parseInt(e.substring(7,9).replace(/^\#/,"0x")),a=e.substring(0,7)),n=n*t,o.test(a)&&n>0&&n<1){const s=Math.max(0,Math.min(255,Math.ceil(n*256)));a=`${a.toUpperCase()}${s.toString(16).toUpperCase()}`}return a}function kt(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}function Mt(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)*e.charCodeAt(n)*n*n;return t.toString(16).substring(0,4)}function jn(e){const t=e.length,n=Math.floor(t/2),o=e.substring(0,4).padEnd(4,"0"),i=e.substring(0,4).padEnd(4,"0"),a=Mt(t.toString(16).padEnd(4,o)),s=Mt(e.substring(n-4,n).padEnd(4,o)).padEnd(4,"f"),c=Mt(e.substring(n-8,n-4).padEnd(4,o)).padEnd(4,"f"),d=Mt(e.substring(n-12,n-8).padEnd(4,o)).padEnd(4,"f"),l=Mt(e.substring(n-16,n-12).padEnd(4,i)).padEnd(4,"f"),h=Mt(e.substring(n,n+4).padEnd(4,i)).padEnd(4,"f"),u=Mt(e.substring(n+4,n+8).padEnd(4,i)).padEnd(4,"f"),m=Mt(i.padEnd(4,o).padEnd(4,i));return`@assets/${a}${s}-${c}-${d}-${l}-${h}${u}${m}`}function Kt(e){return/^@assets\/[0-9a-z]{8,8}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{12,12}$/.test(`${e}`)}function qt(e){function t(n){const o=rc(n);if(["Null","Number","String","Boolean","Undefined"].indexOf(o)>=0)return n;if(o==="Array"){const i=[];return n.forEach(a=>{i.push(t(a))}),i}else if(o==="Object"){const i={};return Object.keys(n).forEach(c=>{i[c]=t(n[c])}),Object.getOwnPropertySymbols(n).forEach(c=>{i[c]=t(n[c])}),i}}return t(e)}function ao(e){const t=qt(e),n=o=>{o.uuid=kt(),o.type==="group"&&o.detail.children&&o.detail.children.forEach(i=>{n(i)})};return n(t),t}function rc(e){return Object.prototype.toString.call(e).replace(/[\]|\[]{1,1}/gi,"").split(" ")[1]}function lc(e,t){const n=e.assets||{},o=qt(e),i=(t==null?void 0:t.loadItemMap)||{},a=s=>{s.forEach(c=>{var d,l,h;if(c.type==="image"&&c.detail.src){const u=c.detail.src;if(Kt(u)&&!n[u]&&i[u]&&typeof((d=i[u])===null||d===void 0?void 0:d.source)=="string")n[u]={type:"image",value:i[u].source};else if(!n[u]){const m=jn(u);n[m]||(n[m]={type:"image",value:u}),c.detail.src=m}}else if(c.type==="svg"){const u=c.detail.svg;if(Kt(u)&&!n[u]&&i[u]&&typeof((l=i[u])===null||l===void 0?void 0:l.source)=="string")n[u]={type:"svg",value:i[u].source};else if(!n[u]){const m=jn(u);n[m]||(n[m]={type:"svg",value:u}),c.detail.svg=m}}else if(c.type==="html"){const u=c.detail.html;if(Kt(u)&&!n[u]&&i[u]&&typeof((h=i[u])===null||h===void 0?void 0:h.source)=="string")n[u]={type:"html",value:i[u].source};else if(!n[u]){const m=jn(u);n[m]||(n[m]={type:"html",value:u}),c.detail.html=m}}else if(c.type==="group"&&Array.isArray(c.detail.children)){const u=c.detail.assets||{};Object.keys(u).forEach(m=>{n[m]||(n[m]=u[m])}),delete c.detail.assets,a(c.detail.children)}})};return a(o.elements),o.assets=n,o}function it(e){return(Object.prototype.toString.call(e)||"").replace(/(\[object|\])/gi,"").trim()}const Me={type(e,t){const n=it(e);return t===!0?n.toLocaleLowerCase():n},array(e){return it(e)==="Array"},json(e){return it(e)==="Object"},function(e){return it(e)==="Function"},asyncFunction(e){return it(e)==="AsyncFunction"},boolean(e){return it(e)==="Boolean"},string(e){return it(e)==="String"},number(e){return it(e)==="Number"},undefined(e){return it(e)==="Undefined"},null(e){return it(e)==="Null"},promise(e){return it(e)==="Promise"}};function cc(e,t){const{width:n,height:o}=t;return new Promise((i,a)=>{const s=`
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      width="${n||""}" 
      height = "${o||""}">
      <foreignObject width="100%" height="100%">
        <div xmlns = "http://www.w3.org/1999/xhtml">
          ${e}
        </div>
      </foreignObject>
    </svg>
    `,c=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),d=new FileReader;d.readAsDataURL(c),d.onload=function(l){var h;const u=(h=l==null?void 0:l.target)===null||h===void 0?void 0:h.result;i(u)},d.onerror=function(l){a(l)}})}function dc(e){return new Promise((t,n)=>{const o=e,i=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=new FileReader;a.readAsDataURL(i),a.onload=function(s){var c;const d=(c=s==null?void 0:s.target)===null||c===void 0?void 0:c.result;t(d)},a.onerror=function(s){n(s)}})}var tr=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{Image:uc}=window;function Ti(e){return new Promise((t,n)=>{const o=new uc;o.crossOrigin="anonymous",o.onload=function(){t(o)},o.onabort=n,o.onerror=n,o.src=e})}function hc(e){return tr(this,void 0,void 0,function*(){const t=yield dc(e);return yield Ti(t)})}function mc(e){return e.replace(/\&/gi,"&amp;")}function fc(e,t){return tr(this,void 0,void 0,function*(){e=mc(e);const n=yield cc(e,t);return yield Ti(n)})}function sn(e){return typeof e=="number"&&(e>0||e<=0)}function gc(e){return sn(e)}function vc(e){return sn(e)}function nr(e){return typeof e=="number"&&e>=0}function pc(e){return typeof e=="number"&&e>=0}function yc(e){return typeof e=="number"&&e>=-360&&e<=360}function wc(e){return nr(e)}function bc(e){return sn(e)&&e>=0}function Sc(e){return vi(e)}function or(e){return typeof e=="string"&&/^(http:\/\/|https:\/\/|\.\/|\/)/.test(`${e}`)}function ir(e){return typeof e=="string"&&/^(data:image\/)/.test(`${e}`)}function Ec(e){return ir(e)||or(e)}function Cc(e){return typeof e=="string"&&/^(<svg[\s]{1,}|<svg>)/i.test(`${e}`.trim())&&/<\/[\s]{0,}svg>$/i.test(`${e}`.trim())}function xc(e){let t=!1;if(typeof e=="string"){let n=document.createElement("div");n.innerHTML=e,n.children.length>0&&(t=!0),n=null}return t}function Mc(e){return typeof e=="string"}function zc(e){return sn(e)&&e>0}function Ic(e){return sn(e)&&e>0}function Ac(e){return sn(e)&&e>0}function Tc(e){return["center","left","right"].includes(e)}function Nc(e){return typeof e=="string"&&e.length>0}function Dc(e){return["bold"].includes(e)}function Pc(e){return/^(-?\d+(?:\.\d+)?)$/.test(`${e}`)}const Ce={x:gc,y:vc,w:nr,h:pc,angle:yc,number:sn,numberStr:Pc,borderWidth:wc,borderRadius:bc,color:Sc,imageSrc:Ec,imageURL:or,imageBase64:ir,svg:Cc,html:xc,text:Mc,fontSize:zc,lineHeight:Ic,textAlign:Tc,fontFamily:Nc,fontWeight:Dc,strokeWidth:Ac};var So=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},q=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ee,ut;const Lc=12,Oc="400",Rc="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'";class ar{constructor(t,n){ee.set(this,void 0),ut.set(this,void 0),So(this,ee,t,"f"),So(this,ut,Object.assign({devicePixelRatio:1,offscreenCanvas:null},n),"f"),this.$resetFont()}$undoPixelRatio(t){return t/q(this,ut,"f").devicePixelRatio}$doPixelRatio(t){return q(this,ut,"f").devicePixelRatio*t}$getContext(){return q(this,ee,"f")}$setContext(t){So(this,ee,t,"f")}$setFont(t){const n=[];t.fontWeight&&n.push(`${t.fontWeight}`),n.push(`${this.$doPixelRatio(t.fontSize||12)}px`),n.push(`${t.fontFamily||"sans-serif"}`),q(this,ee,"f").font=`${n.join(" ")}`}$resetFont(){this.$setFont({fontSize:Lc,fontFamily:Rc,fontWeight:Oc})}$getOffscreenCanvas(){return q(this,ut,"f").offscreenCanvas}$resize(t){const{width:n,height:o,devicePixelRatio:i,resetStyle:a}=t,{canvas:s}=q(this,ee,"f");s.width=n*i,s.height=o*i,So(this,ut,Object.assign(Object.assign({},q(this,ut,"f")),{devicePixelRatio:i}),"f"),a===!0&&(s.style.width=`${n}px`,s.style.height=`${o}px`)}$getSize(){const{devicePixelRatio:t}=q(this,ut,"f"),{width:n,height:o}=q(this,ee,"f").canvas;return{width:n/t,height:o/t,devicePixelRatio:t}}get canvas(){return q(this,ee,"f").canvas}get fillStyle(){return q(this,ee,"f").fillStyle}set fillStyle(t){q(this,ee,"f").fillStyle=t}get strokeStyle(){return q(this,ee,"f").strokeStyle}set strokeStyle(t){q(this,ee,"f").strokeStyle=t}get lineWidth(){return this.$undoPixelRatio(q(this,ee,"f").lineWidth)}set lineWidth(t){q(this,ee,"f").lineWidth=this.$doPixelRatio(t)}get textAlign(){return q(this,ee,"f").textAlign}set textAlign(t){q(this,ee,"f").textAlign=t}get textBaseline(){return q(this,ee,"f").textBaseline}set textBaseline(t){q(this,ee,"f").textBaseline=t}get globalAlpha(){return q(this,ee,"f").globalAlpha}set globalAlpha(t){q(this,ee,"f").globalAlpha=t}get shadowColor(){return q(this,ee,"f").shadowColor}set shadowColor(t){q(this,ee,"f").shadowColor=t}get shadowOffsetX(){return this.$undoPixelRatio(q(this,ee,"f").shadowOffsetX)}set shadowOffsetX(t){q(this,ee,"f").shadowOffsetX=this.$doPixelRatio(t)}get shadowOffsetY(){return this.$undoPixelRatio(q(this,ee,"f").shadowOffsetY)}set shadowOffsetY(t){q(this,ee,"f").shadowOffsetY=this.$doPixelRatio(t)}get shadowBlur(){return this.$undoPixelRatio(q(this,ee,"f").shadowBlur)}set shadowBlur(t){q(this,ee,"f").shadowBlur=this.$doPixelRatio(t)}get lineCap(){return q(this,ee,"f").lineCap}set lineCap(t){q(this,ee,"f").lineCap=t}get globalCompositeOperation(){return q(this,ee,"f").globalCompositeOperation}set globalCompositeOperation(t){q(this,ee,"f").globalCompositeOperation=t}fill(...t){return q(this,ee,"f").fill(...t)}arc(t,n,o,i,a,s){return q(this,ee,"f").arc(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),i,a,s)}rect(t,n,o,i){return q(this,ee,"f").rect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}fillRect(t,n,o,i){return q(this,ee,"f").fillRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}clearRect(t,n,o,i){return q(this,ee,"f").clearRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}beginPath(){return q(this,ee,"f").beginPath()}closePath(){return q(this,ee,"f").closePath()}lineTo(t,n){return q(this,ee,"f").lineTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}moveTo(t,n){return q(this,ee,"f").moveTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}arcTo(t,n,o,i,a){return q(this,ee,"f").arcTo(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a))}getLineDash(){return q(this,ee,"f").getLineDash()}setLineDash(t){const n=t.map(o=>this.$doPixelRatio(o));return q(this,ee,"f").setLineDash(n)}stroke(t){return t?q(this,ee,"f").stroke(t):q(this,ee,"f").stroke()}translate(t,n){return q(this,ee,"f").translate(this.$doPixelRatio(t),this.$doPixelRatio(n))}rotate(t){return q(this,ee,"f").rotate(t)}drawImage(...t){const n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[t.length-4],d=t[t.length-3],l=t[t.length-2],h=t[t.length-1];return t.length===9?q(this,ee,"f").drawImage(n,this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s),this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h)):q(this,ee,"f").drawImage(n,this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h))}createPattern(t,n){return q(this,ee,"f").createPattern(t,n)}measureText(t){return q(this,ee,"f").measureText(t)}fillText(t,n,o,i){return i!==void 0?q(this,ee,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):q(this,ee,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}strokeText(t,n,o,i){return i!==void 0?q(this,ee,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):q(this,ee,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}save(){q(this,ee,"f").save()}restore(){q(this,ee,"f").restore()}scale(t,n){q(this,ee,"f").scale(t,n)}circle(t,n,o,i,a,s,c,d){q(this,ee,"f").ellipse(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),a,s,c,d)}isPointInPath(t,n){return q(this,ee,"f").isPointInPath(this.$doPixelRatio(t),this.$doPixelRatio(n))}clip(...t){return q(this,ee,"f").clip(...t)}setTransform(t,n,o,i,a,s){return q(this,ee,"f").setTransform(t,n,o,i,a,s)}getTransform(){return q(this,ee,"f").getTransform()}createLinearGradient(t,n,o,i){return q(this,ee,"f").createLinearGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}createRadialGradient(t,n,o,i,a,s){return q(this,ee,"f").createRadialGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s))}createConicGradient(t,n,o){return q(this,ee,"f").createConicGradient(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}}ee=new WeakMap,ut=new WeakMap;function dn(e){const{width:t,height:n,ctx:o,devicePixelRatio:i}=e;let a=o;if(!a){const c=document.createElement("canvas");c.width=t*i,c.height=n*i,a=c.getContext("2d")}return new ar(a,e)}function Xo(e){const{width:t,height:n,devicePixelRatio:o}=e,i=new OffscreenCanvas(t*o,n*o),s=i.getContext("2d").canvas.getContext("2d");return new ar(s,{devicePixelRatio:o,offscreenCanvas:i})}function kc(e,t){const{width:n,height:o,devicePixelRatio:i,offscreen:a,createCustomContext2D:s}=t,c={width:n,height:o,devicePixelRatio:i},d=e.getContext("2d");if(s){const l=s(c),h=s(c),u=s(c),m=dn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:m,drawView:()=>{const{width:g,height:p}=l.$getSize();m.clearRect(0,0,g,p),m.drawImage(u.canvas,0,0,g,p),m.drawImage(l.canvas,0,0,g,p),m.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}if(a===!0){const l=Xo(c),h=Xo(c),u=Xo(c),m=dn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:m,drawView:()=>{const{width:g,height:p}=l.$getSize();m.clearRect(0,0,g,p),m.drawImage(u.canvas,0,0,g,p),m.drawImage(l.canvas,0,0,g,p),m.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}else{const l=dn(c),h=dn(c),u=dn(c),m=dn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:m,drawView:()=>{m.clearRect(0,0,n,o),m.drawImage(u.canvas,0,0,n,o),m.drawImage(l.canvas,0,0,n,o),m.drawImage(h.canvas,0,0,n,o),u.clearRect(0,0,n,o),l.clearRect(0,0,n,o),h.clearRect(0,0,n,o)}}}}var jc=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},at=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Xe;class en{constructor(){Xe.set(this,void 0),jc(this,Xe,new Map,"f")}on(t,n){if(at(this,Xe,"f").has(t)){const o=at(this,Xe,"f").get(t)||[];o==null||o.push(n),at(this,Xe,"f").set(t,o)}else at(this,Xe,"f").set(t,[n])}off(t,n){if(at(this,Xe,"f").has(t)){const o=at(this,Xe,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}at(this,Xe,"f").set(t,o||[])}}trigger(t,n){const o=at(this,Xe,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(at(this,Xe,"f").has(t)){const n=at(this,Xe,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){at(this,Xe,"f").clear()}}Xe=new WeakMap;function _c(e,t){const n=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);return n===0?n:Math.sqrt(n)}function Je(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var Eo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Zt=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Uo,ht,yi,oa;class tn{constructor(t){Uo.add(this),ht.set(this,void 0),yi.set(this,void 0),Eo(this,yi,qt(t.defaultStorage),"f"),Eo(this,ht,Zt(this,Uo,"m",oa).call(this),"f")}set(t,n){Zt(this,ht,"f")[t]=n}get(t){return Zt(this,ht,"f")[t]}getSnapshot(t){return(t==null?void 0:t.deepClone)===!0?qt(Zt(this,ht,"f")):Object.assign({},Zt(this,ht,"f"))}clear(){Eo(this,ht,Zt(this,Uo,"m",oa).call(this),"f")}destroy(){Eo(this,ht,null,"f")}}ht=new WeakMap,yi=new WeakMap,Uo=new WeakSet,oa=function(){return qt(Zt(this,yi,"f"))};function fo(e){const{activeStore:t}=e;return{scale:t==null?void 0:t.scale,offsetTop:t==null?void 0:t.offsetTop,offsetBottom:t==null?void 0:t.offsetBottom,offsetLeft:t==null?void 0:t.offsetLeft,offsetRight:t==null?void 0:t.offsetRight}}function Ni(e){const{activeStore:t}=e;return{devicePixelRatio:t.devicePixelRatio,width:t==null?void 0:t.width,height:t==null?void 0:t.height,contextWidth:t==null?void 0:t.contextWidth,contextHeight:t==null?void 0:t.contextHeight}}function Vc(e){return e/Math.PI*180}function St(e){return e/180*Math.PI}function go(e,t,n,o){const i=St(t||0);n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(i),e.translate(-n.x,-n.y)),o(e),n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(-i),e.translate(-n.x,-n.y))}function dt(e,t,n){const o=ot(t);go(e,t.angle||0,o,()=>{n(e)})}function ot(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function sr(e){const t=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),n=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),o=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),i=Math.max(e[0].y,e[1].y,e[2].y,e[3].y),a={x:t,y:n,w:o-t,h:i-n};return ot(a)}function Bc(e,t,n){const o=ia(e,t),i=ia(e,n);return i!==null&&o!==null?o>Math.PI*3/2&&i<Math.PI/2?i+(Math.PI*2-o):i>Math.PI*3/2&&o<Math.PI/2?o+(Math.PI*2-i):i-o:0}function ia(e,t){const n=t.x-e.x,o=t.y-e.y;if(n===0){if(o<0)return 0;if(o>0)return Math.PI}else if(o===0){if(n<0)return Math.PI*3/2;if(n>0)return Math.PI/2}return n>0&&o<0?Math.atan(Math.abs(n)/Math.abs(o)):n>0&&o>0?Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o>0?Math.PI+Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o<0?2*Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):0}function ze(e,t,n){let a=ia(e,t)+n;a>Math.PI*2?a=a-Math.PI*2:a<0-Math.PI*2&&(a=a+Math.PI*2),a<0&&(a=a+Math.PI*2);const s=_c(e,t);let c=0,d=0;return a===0?(c=0,d=0-s):a>0&&a<Math.PI/2?(c=Math.sin(a)*s,d=0-Math.cos(a)*s):a===Math.PI/2?(c=s,d=0):a>Math.PI/2&&a<Math.PI?(c=Math.sin(Math.PI-a)*s,d=Math.cos(Math.PI-a)*s):a===Math.PI?(c=0,d=s):a>Math.PI&&a<3/2*Math.PI?(c=0-Math.sin(a-Math.PI)*s,d=Math.cos(a-Math.PI)*s):a===3/2*Math.PI?(c=0-s,d=0):a>3/2*Math.PI&&a<2*Math.PI?(c=0-Math.sin(2*Math.PI-a)*s,d=0-Math.cos(2*Math.PI-a)*s):a===2*Math.PI&&(c=0,d=0-s),c+=e.x,d+=e.y,{x:c,y:d}}function wi(e,t){if((t==null?void 0:t.length)>0){let n=e.x,o=e.y;return t.forEach(i=>{const{x:a,y:s,w:c,h:d,angle:l=0}=i,h=ot({x:a,y:s,w:c,h:d,angle:l}),u=ze(h,{x:n,y:o},St(l));n=u.x,o=u.y}),{x:n,y:o}}return e}function rr(e,t,n){const{x:o,y:i,w:a,h:s}=e;let c={x:o,y:i},d={x:o+a,y:i},l={x:o+a,y:i+s},h={x:o,y:i+s};if(n&&(n>0||n<0)){const u=St(rt(n));c=ze(t,c,u),d=ze(t,d,u),l=ze(t,l,u),h=ze(t,h,u)}return[c,d,l,h]}function _n(e){const{angle:t=0}=e,n=ot(e);return rr(e,n,t)}function Ua(e,t,n){return[ze(e,{x:t[0].x,y:t[0].y},n),ze(e,{x:t[1].x,y:t[1].y},n),ze(e,{x:t[2].x,y:t[2].y},n),ze(e,{x:t[3].x,y:t[3].y},n)]}function rt(e){if(!(e>0||e<0)||e===0)return 0;let t=e%360;return t<0&&(t+=360),t}function lr(e){let t=!0;if(Array.isArray(e)){const n=[];e.forEach(o=>{var i;typeof o.uuid=="string"&&o.uuid?n.includes(o.uuid)?(t=!1,console.warn(`Duplicate uuids: ${o.uuid}`)):n.push(o.uuid):(t=!1,console.warn("Element missing uuid",o)),o.type==="group"&&(t=lr((i=o==null?void 0:o.detail)===null||i===void 0?void 0:i.children))})}return t}function xa(e){var t;const n={x:0,y:0,w:0,h:0};let o=null;for(let a=0;a<e.length;a++){const s=e[a];if(!((t=s==null?void 0:s.operations)===null||t===void 0)&&t.invisible)continue;const c={x:s.x,y:s.y,w:s.w,h:s.h,angle:s.angle||0};if(c.angle&&(c.angle>0||c.angle<0)){const d=_n(c);if(d.length===4){const l=[d[0].x,d[1].x,d[2].x,d[3].x],h=[d[0].y,d[1].y,d[2].y,d[3].y];c.x=Math.min(...l),c.y=Math.min(...h),c.w=Math.abs(Math.max(...l)-Math.min(...l)),c.h=Math.abs(Math.max(...h)-Math.min(...h))}}if(o){const d=Math.min(c.x,n.x),l=Math.min(c.y,n.y),h=Math.max(c.x+c.w,n.x+n.w),u=Math.max(c.y+c.h,n.y+n.h);n.x=d,n.y=l,n.w=Math.abs(h-d),n.h=Math.abs(u-l)}else n.x=c.x,n.y=c.y,n.w=c.w,n.h=c.h;o=c}return{x:Math.floor(n.x),y:Math.floor(n.y),w:Math.ceil(n.w),h:Math.ceil(n.h)}}function cr(e,t){const n={x:0,y:0,w:0,h:0};e.forEach(i=>{const a={x:i.x,y:i.y,w:i.w,h:i.h,angle:i.angle};if(a.angle&&(a.angle>0||a.angle<0)){const h=_n(a);if(h.length===4){const u=[h[0].x,h[1].x,h[2].x,h[3].x],m=[h[0].y,h[1].y,h[2].y,h[3].y];a.x=Math.min(...u),a.y=Math.min(...m),a.w=Math.abs(Math.max(...u)-Math.min(...u)),a.h=Math.abs(Math.max(...m)-Math.min(...m))}}const s=Math.min(a.x,n.x),c=Math.min(a.y,n.y),d=Math.max(a.x+a.w,n.x+n.w),l=Math.max(a.y+a.h,n.y+n.h);n.x=s,n.y=c,n.w=Math.abs(d-s),n.h=Math.abs(l-c)}),t!=null&&t.extend&&(n.x=Math.min(n.x,0),n.y=Math.min(n.y,0));const o={contextWidth:n.w,contextHeight:n.h};return t!=null&&t.viewWidth&&(t!=null&&t.viewHeight)&&(t==null?void 0:t.viewWidth)>0&&(t==null?void 0:t.viewHeight)>0&&(t.viewWidth>n.x+n.w&&(o.contextWidth=t.viewWidth-n.x),t.viewHeight>n.y+n.h&&(o.contextHeight=t.viewHeight-n.y)),o}function Fc(e,t,n){const o=cr(e,{viewWidth:t.width,viewHeight:t.height,extend:n==null?void 0:n.extend});return(n==null?void 0:n.extend)===!0&&(o.contextWidth=Math.max(o.contextWidth,t.contextWidth),o.contextHeight=Math.max(o.contextHeight,t.contextHeight)),{contextSize:o}}function dr(e,t){var n;let o=null;for(let i=0;i<t.length;i++){const a=t[i];if(a.uuid===e){o=a;break}else if(!o&&a.type==="group"){const s=dr(e,((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.children)||[]);if((s==null?void 0:s.uuid)===e){o=s;break}}}return o}function Zo(e,t){const n=[];function o(i){var a;for(let s=0;s<i.length;s++){const c=i[s];e.includes(c.uuid)?n.push(c):c.type==="group"&&o(((a=c==null?void 0:c.detail)===null||a===void 0?void 0:a.children)||[])}}return o(t),n}function Ma(e,t){const n=[];function o(i,a){var s;let c=null;for(let d=0;d<a.length;d++){const l=a[d];if(l.uuid===i){c=l;break}else if(!c&&l.type==="group"){n.push(l);const h=o(i,((s=l==null?void 0:l.detail)===null||s===void 0?void 0:s.children)||[]);if((h==null?void 0:h.uuid)===i){c=h;break}n.pop()}}return c}return o(e,t),n}function ur(e,t){var n;const o=[];let i=e;if(t.length>1)for(let a=0;a<t.length-1;a++){const s=t[a],c=i[s];if((c==null?void 0:c.type)==="group"&&Array.isArray((n=c==null?void 0:c.detail)===null||n===void 0?void 0:n.children))o.push(c),i=c.detail.children;else return null}return o}function vo(e){const{x:t,y:n,w:o,h:i,angle:a}=e;return{x:t,y:n,w:o,h:i,angle:a}}function hr(e,t){const n=[];return e.forEach(o=>{const i=He(o,t);i&&n.push(i)}),n}function He(e,t){let n=null,o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i<e.length-1&&s.type==="group")o=s.detail.children;else if(i===e.length-1)n=s;else break}return n}function ct(e,t){const n=[];let o=!1;const i=a=>{var s;for(let c=0;c<a.length&&o!==!0;c++){n.push(c);const d=a[c];if(d.uuid===e){o=!0;break}else d.type==="group"&&i(((s=d==null?void 0:d.detail)===null||s===void 0?void 0:s.children)||[]);if(o)break;n.pop()}};return i(t),n}function mr(e){const{x:t,y:n,h:o,w:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]}function Pe(e){const{x:t,y:n,w:o,h:i,angle:a=0}=e;return a===0?mr(e):rr(e,ot({x:t,y:n,w:o,h:i,angle:a}),a)}function za(e){const t=[];let n=0,o=0;const i=[],a=[...e];for(let s=0;s<a.length;s++){const{x:c,y:d,w:l,h,angle:u=0}=a[s];n+=c,o+=d;let m;if(s===0){const f={x:n,y:o,w:l,h,angle:u};m=Pe({x:c,y:d,w:l,h,angle:u}),i.push({center:ot(f),angle:u,radian:St(u)})}else{m=mr({x:n,y:o,w:l,h,angle:u});for(let g=0;g<i.length;g++){const{center:p,radian:y}=i[g];m=Ua(p,m,y)}const v=sr(m);if(u>0||u<0){const g=St(u);m=Ua(v,m,g)}i.push({center:v,angle:u,radian:St(u)})}t.push(m)}return t}function Wc(e,t){const{groupQueue:n}=t;if(!(n.length>0))return[Pe(e)];const o=[...n,e];return za(o)}function uo(e,t){return Wc(e,t).pop()||null}function Hc(e,t){const{scale:n,offsetX:o,offsetY:i}=e,{viewSizeInfo:a}=t,{width:s,height:c,contextWidth:d,contextHeight:l}=a,h=d*n,u=l*n,m=0-o*n,f=0-i*n,v=s-(h+m/n),g=c-(u+f/n);return{scale:n,offsetLeft:m,offsetTop:f,offsetRight:v,offsetBottom:g}}function Gc(e){const{scale:t,point:n,viewScaleInfo:o}=e,{offsetLeft:i,offsetTop:a}=o,s=t/o.scale,c=n.x,d=n.y,l=c-c*s+(i*s-i),h=d-d*s+(a*s-a);return{moveX:l,moveY:h}}function Yc(e){const{moveX:t=0,moveY:n=0,viewScaleInfo:o,viewSizeInfo:i}=e,{scale:a}=o,{width:s,height:c,contextWidth:d,contextHeight:l}=i;let h=o.offsetLeft,u=o.offsetRight,m=o.offsetTop,f=o.offsetBottom;h+=t,m+=n;const v=d*a,g=l*a;return u=s-(v+h),f=c-(g+m),{scale:a,offsetTop:m,offsetLeft:h,offsetRight:u,offsetBottom:f}}function Ge(e,t){const{viewScaleInfo:n}=t,{x:o,y:i,w:a,h:s,angle:c}=e,{scale:d,offsetTop:l,offsetLeft:h}=n;return{x:o*d+h,y:i*d+l,w:a*d,h:s*d,angle:c}}function ve(e,t){const{viewScaleInfo:n}=t,{x:o,y:i}=e,{scale:a,offsetTop:s,offsetLeft:c}=n;return{x:o*a+c,y:i*a+s}}function Be(e,t){return[ve(e[0],t),ve(e[1],t),ve(e[2],t),ve(e[3],t)]}function aa(e,t){const{context2d:n,element:o,viewScaleInfo:i}=t,{angle:a=0}=o,{x:s,y:c,w:d,h:l}=Ge(o,{viewScaleInfo:i}),h=_n({x:s,y:c,w:d,h:l,angle:a});if(h.length>=2){n.beginPath(),n.moveTo(h[0].x,h[0].y);for(let u=1;u<h.length;u++)n.lineTo(h[u].x,h[u].y);n.closePath()}return!!n.isPointInPath(e.x,e.y)}function $c(e,t,n){const o=Pe(t);return fr(e,o)}function fr(e,t,n){const o=[t[0].x,t[1].x,t[2].x,t[3].x],i=[t[0].y,t[1].y,t[2].y,t[3].y],a=Math.min(...o),s=Math.max(...o),c=Math.min(...i),d=Math.max(...i);return e.x>a&&e.x<s&&e.y>c&&e.y<d}function Xc(e,t){var n,o,i;const{context2d:a,data:s,viewScaleInfo:c,viewSizeInfo:d,groupQueue:l}=t,h={index:-1,element:null,groupQueueIndex:-1};if(l&&Array.isArray(l)&&(l==null?void 0:l.length)>0)for(let u=l.length-1;u>=0;u--){let m=0,f=0,v=0;for(let p=0;p<=u;p++)m+=l[p].x,f+=l[p].y,v+=l[p].angle||0;const g=l[u];if(g&&g.type==="group"&&Array.isArray((n=g.detail)===null||n===void 0?void 0:n.children))for(let p=0;p<g.detail.children.length;p++){const y=g.detail.children[p];if(((o=y==null?void 0:y.operations)===null||o===void 0?void 0:o.invisible)!==!0)if(y){const E={x:m+y.x,y:f+y.y,w:y.w,h:y.h,angle:v+(y.angle||0)};if(aa(e,{context2d:a,element:E,viewScaleInfo:c,viewSizeInfo:d})){h.element=y,(u<l.length-1||y.type!=="group")&&(h.groupQueueIndex=u);break}}else break}if(h.element)break}if(h.element)return h;for(let u=s.elements.length-1;u>=0;u--){const m=s.elements[u];if(((i=m==null?void 0:m.operations)===null||i===void 0?void 0:i.invisible)!==!0&&aa(e,{context2d:a,element:m,viewScaleInfo:c,viewSizeInfo:d})){h.index=u,h.element=m;break}}return h}function gr(e,t){const{groupQueue:n}=t,o=uo(e,{groupQueue:n}),i=Je(o[0],o[1]),a=Je(o[1],o[2]),s=Je(o[2],o[3]),c=Je(o[3],o[0]),d=o[0],l=o[1],h=o[2],u=o[3],m=Math.max(d.x,l.x,h.x,u.x),f=Math.max(d.y,l.y,h.y,u.y),v=Math.min(d.x,l.x,h.x,u.x),g=Math.min(d.y,l.y,h.y,u.y);return{center:{x:(m+v)/2,y:(f+g)/2},topLeft:d,topRight:l,bottomLeft:u,bottomRight:h,top:i,right:a,left:c,bottom:s}}function vr(e){const t=Math.max(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),n=Math.max(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),o=Math.min(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),a={x:e.center.x,y:e.center.y},s={x:o,y:i},c={x:t,y:i},d={x:t,y:n},l={x:o,y:n},h=Je(s,c),u=Je(l,d),m=Je(s,l),f=Je(c,d);return{center:a,topLeft:s,topRight:c,bottomLeft:l,bottomRight:d,top:h,right:f,left:m,bottom:u}}function Uc(e,t){const n={},o=[],i=a=>{const s={isVisibleInView:!0,isGroup:a.type==="group",position:[...o]};let c=null;const d=ur(e,o);c=gr(a,{groupQueue:d||[]}),n[a.uuid]=Object.assign(Object.assign({},s),{originRectInfo:c,rangeRectInfo:Ce.angle(a.angle)?vr(c):c}),a.type==="group"&&a.detail.children.forEach((l,h)=>{o.push(h),i(l),o.pop()})};return e.forEach((a,s)=>{o.push(s),i(a),o.pop()}),pr(n,t)}function Zc(e,t){const n=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),o=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),a=Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),s=Math.min(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),c=Math.max(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),d=Math.min(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y),l=Math.max(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y);return n<=c&&o>=s&&i<=l&&a>=d||c<=a&&c>=a&&c<=a&&c>=a}function pr(e,t){const n=Qc(t);let o=0,i=0;return Object.keys(e).forEach(a=>{const s=e[a];s.isVisibleInView=Zc(s.rangeRectInfo,n),s.isVisibleInView?o++:i++}),{viewVisibleInfoMap:e,visibleCount:o,invisibleCount:i}}function Qc(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i,offsetLeft:a}=t,{width:s,height:c}=n,d=0-a/o,l=0-i/o,h=s/o,u=c/o,m=ot({x:d,y:l,w:h,h:u}),f={x:d,y:l},v={x:d+h,y:l},g={x:d,y:l+u},p={x:d+h,y:l+u},y={x:d,y:m.y},E={x:m.x,y:l},S={x:d+h,y:m.y},w={x:m.x,y:l+u};return{center:m,topLeft:f,topRight:v,bottomLeft:g,bottomRight:p,left:y,top:E,right:S,bottom:w}}function ke(e,t){const{x:n,y:o}=e,{size:i,angle:a}=t;return{x:n-i/2,y:o-i/2,w:i,h:i,angle:a}}function Co(e,t){const{groupQueue:n,controllerSize:o,viewScaleInfo:i}=t,a=(o&&o>0?o:8)/i.scale,{x:s,y:c,w:d,h:l,angle:h=0}=e,u=[{uuid:kt(),x:s,y:c,w:d,h:l,angle:h,type:"group",detail:{children:[]}},...n];let m=0;u.forEach(({angle:X=0})=>{m+=X});const f=uo(e,{groupQueue:n}),v=uo({x:s-a*2,y:c-a*2,h:l+a*4,w:d+a*4,angle:h},{groupQueue:[...n]}),g=Je(f[0],f[1]),p=Je(f[1],f[2]),y=Je(f[2],f[3]),E=Je(f[3],f[0]),S=f[0],w=f[1],A=f[2],b=f[3],z=ke(g,{size:a,angle:m}),O=ke(p,{size:a,angle:m}),L=ke(y,{size:a,angle:m}),M=ke(E,{size:a,angle:m}),I=ke(S,{size:a,angle:m}),P=ke(w,{size:a,angle:m}),k=ke(b,{size:a,angle:m}),W=ke(A,{size:a,angle:m}),F=Pe(I),V=Pe(P),j=Pe(k),_=Pe(W),x=[F[1],V[0],V[3],F[2]],Y=[V[3],V[2],_[1],_[0]],$=[j[1],_[0],_[3],j[2]],R=[F[3],F[2],j[1],j[0]],H=Pe(z),U=Pe(O),C=Pe(L),D=Pe(M),N=Je(v[0],v[1]),B=ke(N,{size:a,angle:m}),Z=Pe(B);return{elementWrapper:f,left:{type:"left",vertexes:R,center:E},right:{type:"right",vertexes:Y,center:p},top:{type:"top",vertexes:x,center:g},bottom:{type:"bottom",vertexes:$,center:y},topLeft:{type:"top-left",vertexes:F,center:S},topRight:{type:"top-right",vertexes:V,center:w},bottomLeft:{type:"bottom-left",vertexes:j,center:b},bottomRight:{type:"bottom-right",vertexes:_,center:A},leftMiddle:{type:"left-middle",vertexes:D,center:E},rightMiddle:{type:"right-middle",vertexes:U,center:p},topMiddle:{type:"top-middle",vertexes:H,center:g},bottomMiddle:{type:"bottom-middle",vertexes:C,center:y},rotate:{type:"rotate",vertexes:Z,center:N}}}function Za(e,t){const{controllerSize:n,viewScaleInfo:o}=t,i=n&&n>0?n:8,{x:a,y:s,w:c,h:d}=Ge(e,{viewScaleInfo:o}),l=ot({x:a,y:s,w:c,h:d}),h={x:l.x,y:s},u={x:a+c,y:l.y},m={x:l.x,y:s+d},f={x:a,y:l.y},v={x:a,y:s},g={x:a+c,y:s},p={x:a+c,y:s+d},y={x:a,y:s+d},E=ke(h,{size:i,angle:0}),S=ke(u,{size:i,angle:0}),w=ke(m,{size:i,angle:0}),A=ke(f,{size:i,angle:0}),b=ke(v,{size:i,angle:0}),z=ke(g,{size:i,angle:0}),O=ke(y,{size:i,angle:0}),L=ke(p,{size:i,angle:0}),M=Pe(b),I=Pe(z),P=Pe(O),k=Pe(L),W=[M[1],I[0],I[3],M[2]],F=[I[3],I[2],k[1],k[0]],V=[P[1],k[0],k[3],P[2]],j=[M[3],M[2],P[1],P[0]],_=Pe(E),x=Pe(S),Y=Pe(w),$=Pe(A);return{left:{type:"left",vertexes:j,center:f},right:{type:"right",vertexes:F,center:u},top:{type:"top",vertexes:W,center:h},bottom:{type:"bottom",vertexes:V,center:m},topLeft:{type:"top-left",vertexes:M,center:v},topRight:{type:"top-right",vertexes:I,center:g},bottomLeft:{type:"bottom-left",vertexes:P,center:y},bottomRight:{type:"bottom-right",vertexes:k,center:p},leftMiddle:{type:"left-middle",vertexes:$,center:f},rightMiddle:{type:"right-middle",vertexes:x,center:u},topMiddle:{type:"top-middle",vertexes:_,center:h},bottomMiddle:{type:"bottom-middle",vertexes:Y,center:m}}}function Ia(e){let t="";return e.forEach(n=>{t+=n.type+n.params.join(" ")}),t}function pe(e,t){let n=2;return typeof(t==null?void 0:t.decimalPlaces)<"u"&&(t==null?void 0:t.decimalPlaces)>=0&&(n=t.decimalPlaces),parseFloat(e.toFixed(n))}const Qo="Text Element";function rn(){return{boxSizing:"border-box",borderWidth:0,borderColor:"#000000",shadowColor:"#000000",borderRadius:0,borderDash:[],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,opacity:1,color:"#000000",textAlign:"left",verticalAlign:"top",fontSize:16,fontFamily:"sans-serif",fontWeight:400,minInlineSize:"auto",wordBreak:"break-all",overflow:"hidden"}}function Jc(){return{background:"#D9D9D9"}}function Kc(){return{background:"#D9D9D9",radius:0}}function qc(e){const t=rn();return{text:Qo,color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,lineHeight:e.w/Qo.length,fontSize:e.w/Qo.length,textAlign:"center",verticalAlign:"middle"}}function e0(){return{svg:'<svg t="1701004189871" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"   width="200" height="200"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"   fill="#2c2c2c"></path></svg>'}}function t0(){return{src:"data:image/svg+xml;base64,PHN2ZyAgIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxwYXRoIGQ9Ik05MjggMTYwSDk2Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY2NDBjMCAxNy43IDE0LjMgMzIgMzIgMzJoODMyYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE5MmMwLTE3LjctMTQuMy0zMi0zMi0zMnogbS00MCA2MzJIMTM2di0zOS45bDEzOC41LTE2NC4zIDE1MC4xIDE3OEw2NTguMSA0ODkgODg4IDc2MS42Vjc5MnogbTAtMTI5LjhMNjY0LjIgMzk2LjhjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDQyNC42IDY2Ni40bC0xNDQtMTcwLjdjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDEzNiA2NTIuN1YyMzJoNzUydjQzMC4yeiIgIGZpbGw9IiM1MTUxNTEiPjwvcGF0aD48cGF0aCBkPSJNMzA0IDQ1NmM0OC42IDAgODgtMzkuNCA4OC04OHMtMzkuNC04OC04OC04OC04OCAzOS40LTg4IDg4IDM5LjQgODggODggODh6IG0wLTExNmMxNS41IDAgMjggMTIuNSAyOCAyOHMtMTIuNSAyOC0yOCAyOC0yOC0xMi41LTI4LTI4IDEyLjUtMjggMjgtMjh6IiAgZmlsbD0iIzUxNTE1MSI+PC9wYXRoPjwvc3ZnPg=="}}function n0(){return{children:[],background:"#D9D9D9",overflow:"hidden"}}const o0=rn();function Di(e,t){const{viewScaleInfo:n}=t,{scale:o}=n;let{borderRadius:i,borderDash:a}=e.detail;const s=Array.isArray(a)&&a.length>0,{boxSizing:c=o0.boxSizing,borderWidth:d}=e.detail;Array.isArray(d)&&(i=0);let{x:l,y:h,w:u,h:m}=e,f=[0,0,0,0];if(typeof i=="number"){const g=i*o;f=[g,g,g,g]}else Array.isArray(i)&&(i==null?void 0:i.length)===4&&(f=[i[0]*o,i[1]*o,i[2]*o,i[3]*o]);let v=0;return typeof d=="number"&&(v=(d||0)*o),c==="border-box"&&!s?(l=e.x+v/2,h=e.y+v/2,u=e.w-v,m=e.h-v):c==="content-box"?(l=e.x-v/2,h=e.y-v/2,u=e.w+v,m=e.h+v):(l=e.x,h=e.y,u=e.w,m=e.h),u=Math.max(u,1),m=Math.max(m,1),f=f.map(g=>Math.min(g,u/2,m/2)),{x:l,y:h,w:u,h:m,radiusList:f}}const Ve=e=>pe(e,{decimalPlaces:4});function yr(e,t){const{detail:n}=e,{xRatio:o,yRatio:i,maxRatio:a}=t,s=(o+i)/2,{borderWidth:c,borderRadius:d,borderDash:l,shadowOffsetX:h,shadowOffsetY:u,shadowBlur:m}=n;if(typeof c=="number")n.borderWidth=Ve(c*s);else if(Array.isArray(n.borderWidth)){const f=c;n.borderWidth=[Ve(f[0]*i),Ve(f[1]*o),Ve(f[2]*i),Ve(f[3]*o)]}if(typeof d=="number")n.borderRadius=Ve(d*s);else if(Array.isArray(n.borderRadius)){const f=d;n.borderRadius=[f[0]*o,f[1]*o,f[2]*i,f[3]*i]}Array.isArray(l)&&l.forEach((f,v)=>{n.borderDash[v]=Ve(f*a)}),typeof h=="number"&&(n.shadowOffsetX=Ve(h*a)),typeof u=="number"&&(n.shadowOffsetX=Ve(u*a)),typeof m=="number"&&(n.shadowOffsetX=Ve(m*a))}function i0(e,t){const{xRatio:n,yRatio:o}=t,{x:i,y:a,w:s,h:c}=e;e.x=Ve(i*n),e.y=Ve(a*o),e.w=Ve(s*n),e.h=Ve(c*o),yr(e,t)}function a0(e,t){const{minRatio:n,maxRatio:o}=t,{fontSize:i,lineHeight:a}=e.detail,s=(n+o)/2;i&&i>0&&(e.detail.fontSize=Ve(i*s)),a&&a>0&&(e.detail.lineHeight=Ve(a*s))}function wr(e,t){const{type:n}=e;i0(e,t),n==="circle"||(n==="text"?a0(e,t):n==="image"||n==="svg"||n==="html"||n==="path"||n==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(o=>{wr(o,t)}))}function br(e,t){const n=t.w&&t.w>0?t.w:e.w,o=t.h&&t.h>0?t.h:e.h,i=n/e.w,a=o/e.h;if(i===a&&i===1)return e;const s=Math.min(i,a),c=Math.max(i,a);e.w=n,e.h=o;const d={xRatio:i,yRatio:a,minRatio:s,maxRatio:c};return e.type==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(l=>{wr(l,d)}),yr(e,d),e}const _i=200,Vi=200;function s0(e,t){let n=0,o=0,i=_i,a=Vi;if(t){const{viewScaleInfo:c,viewSizeInfo:d}=t,{scale:l,offsetLeft:h,offsetTop:u}=c,{width:m,height:f}=d,v=m/4,g=f/4;_i>=v?i=v/l:i=_i/l,Vi>=g?a=g/l:a=Vi/l,["circle","svg","image"].includes(e)?i=a=Math.max(i,a):e==="text"&&(a=i/Qo.length*2),n=(0-h+m/2-i*l/2)/l,o=(0-u+f/2-a*l/2)/l}return{x:n,y:o,w:i,h:a}}function r0(e,t,n){const o=s0(e,n);let i={};return e==="rect"?i=Jc():e==="circle"?i=Kc():e==="text"?i=qc(o):e==="svg"?i=e0():e==="image"?i=t0():e==="group"&&(i=n0()),Object.assign(Object.assign(Object.assign({},o),t),{uuid:kt(),type:e,detail:Object.assign(Object.assign({},i),t.detail||{})})}function Sr(e,t,n){let o=!1;if(t.length===1){const i=t[0];n.splice(i,0,e),o=!0}else if(t.length>1){let i=n;for(let a=0;a<t.length;a++){const s=t[a],c=i[s];if(a===t.length-1){const d=t[a];i.splice(d,0,e),o=!0}else if(a<t.length-1&&c.type==="group")i=c.detail.children;else break}}return o}function Er(e,t){let n=!1;if(e.length===1){const o=e[0];t.splice(o,1),n=!0}else if(e.length>1){let o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i===e.length-1){const c=e[i];o.splice(c,1),n=!0}else if(i<e.length-1&&s.type==="group")o=s.detail.children;else break}}return n}function l0(e,t){const n=ct(e,t);return Er(n,t)}function bi(e,t){const n=[...t.from],o=[...t.to];if(n.length===0||o.length===0)return{elements:e,from:n,to:o};if(n.length<=o.length){for(let a=0;a<n.length;a++)if(o[a]===n[a]){if(a===n.length-1)return{elements:e,from:n,to:o};continue}}const i=He(n,e);if(i){if(!Sr(i,o,e))return{elements:e,from:n,to:o};let s=-1,c=!1;if(n.length>=1&&o.length>=1){if(n.length<=o.length){if(n.length===1)n[0]<o[0]&&(c=!0);else for(let d=0;d<n.length&&n[d]===o[d];d++)if(n.length===n.length-1){c=!0;break}}if(n.length>=o.length)if(o.length===1)o[0]<n[0]&&(c=!0);else for(let d=0;d<o.length&&(d===o.length-1&&o[d]<n[d]&&(c=!0),n[d]===o[d]);d++);}if(c===!0)for(let d=0;d<n.length&&o[d]>=0;d++)o[d]!==n[d]&&o[d]<n[d]&&d==o.length-1&&(s=d);s>=0&&(n[s]=n[s]+1),Er(n,e)}return{elements:e,from:n,to:o}}function c0(e,t){var n;const o=Object.keys(t);for(let i=0;i<o.length;i++){const a=o[i];["x","y","w","h","angle","name"].includes(a)?e[a]=t[a]:["detail","operations"].includes(a)&&(Me.json(t[a])?(e!=null&&e.hasOwnProperty(a)||(e[a]={}),Me.json(e[a])&&(e[a]=Object.assign(Object.assign({},e[a]),t[a]))):Me.array(t[a])&&(e!=null&&e.hasOwnProperty(a)||(e[a]=[]),Me.array(e[a])&&((n=t==null?void 0:t[a])===null||n===void 0||n.forEach((s,c)=>{e[a][c]=s}),e[a]=[...e[a],...t[a]])))}return e}function jt(e,t,n){var o,i;let a=null;for(let s=0;s<n.length;s++){const c=n[s];if(c.uuid===e){c.type==="group"&&((o=c.operations)===null||o===void 0?void 0:o.deepResize)===!0&&(t.w&&t.w>0||t.h&&t.h>0)&&br(c,{w:t.w,h:t.h}),c0(c,t),a=c;break}else c.type==="group"&&(a=jt(e,t,((i=c==null?void 0:c.detail)===null||i===void 0?void 0:i.children)||[]))}return a}function d0(e,t){var n,o,i,a,s,c,d,l,h,u;let m=0,f=0,v=1,g=((o=(n=e==null?void 0:e.elements)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.x)||0,p=((a=(i=e==null?void 0:e.elements)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.y)||0,y=((c=(s=e==null?void 0:e.elements)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.w)||0,E=((l=(d=e==null?void 0:e.elements)===null||d===void 0?void 0:d[0])===null||l===void 0?void 0:l.h)||0;const{width:S,height:w}=t.viewSizeInfo;if(e.layout&&((u=(h=e.layout)===null||h===void 0?void 0:h.detail)===null||u===void 0?void 0:u.overflow)==="hidden"?(g=0,p=0,y=e.layout.w||0,E=e.layout.h||0):e.elements.forEach(b=>{const z={x:b.x,y:b.y,w:b.w,h:b.h,angle:b.angle};if(z.angle&&(z.angle>0||z.angle<0)){const P=_n(z);if(P.length===4){const k=[P[0].x,P[1].x,P[2].x,P[3].x],W=[P[0].y,P[1].y,P[2].y,P[3].y];z.x=Math.min(...k),z.y=Math.min(...W),z.w=Math.abs(Math.max(...k)-Math.min(...k)),z.h=Math.abs(Math.max(...W)-Math.min(...W))}}const O=Math.min(z.x,g),L=Math.min(z.y,p),M=Math.max(z.x+z.w,g+y),I=Math.max(z.y+z.h,p+E);g=O,p=L,y=Math.abs(M-O),E=Math.abs(I-L)}),e.layout){const{x:b,y:z,w:O,h:L}=e.layout;Ce.x(b)&&Ce.y(z)&&Ce.w(O)&&Ce.h(L)&&(g=Math.min(g,b),p=Math.min(p,z),y=Math.max(y,O),E=Math.max(E,L))}if(y>0&&E>0){const b=pe(S/y,{decimalPlaces:4}),z=pe(w/E,{decimalPlaces:4});v=Math.min(b,z,1),m=(y*v-S)/2/v+g,f=(E*v-w)/2/v+p}return{offsetX:pe(m,{decimalPlaces:0}),offsetY:pe(f,{decimalPlaces:0}),scale:v}}function u0(e){let t=0,n=0;if(e){const{viewScaleInfo:i,viewSizeInfo:a}=e,{offsetLeft:s,offsetTop:c,scale:d}=i,{width:l,height:h}=a;t=0-s+l/d/2,n=0-c+h/d/2}return{x:t,y:n}}const h0=["-apple-system",'"system-ui"',' "Segoe UI"'," Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"'," sans-serif"];function Cr(e){return[e,...h0].join(", ")}function sa(e,t,n){if(typeof t=="string")return t;const{viewElementSize:o,viewScaleInfo:i,opacity:a=1}=n,{x:s,y:c}=o,{scale:d}=i;if((t==null?void 0:t.type)==="linear-gradient"){const{start:l,end:h,stops:u}=t,m={x:s+l.x*d,y:c+l.y*d},f={x:s+h.x*d,y:c+h.y*d},v=e.createLinearGradient(m.x,m.y,f.x,f.y);return u.forEach(g=>{v.addColorStop(g.offset,Xa(g.color,a))}),v}if((t==null?void 0:t.type)==="radial-gradient"){const{inner:l,outer:h,stops:u}=t,m={x:s+l.x*d,y:c+l.y*d,radius:l.radius*d},f={x:s+h.x*d,y:c+h.y*d,radius:h.radius*d},v=e.createRadialGradient(m.x,m.y,m.radius,f.x,f.y,f.radius);return u.forEach(g=>{v.addColorStop(g.offset,Xa(g.color,a))}),v}return"#000000"}const ra=rn();function nn(e){var t,n,o,i;let a=1;return((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.opacity)!==void 0&&((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.opacity)>=0&&((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.opacity)<=1&&(a=(i=e==null?void 0:e.detail)===null||i===void 0?void 0:i.opacity),a}function po(e,t,n){const{pattern:o,renderContent:i,originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d}=n||{},{parentOpacity:l}=n,h=nn(a)*l,{clipPath:u,clipPathStrokeColor:m,clipPathStrokeWidth:f}=a.detail,v=()=>{e.globalAlpha=h,xr(e,t,{pattern:o,viewScaleInfo:c,viewSizeInfo:d}),i==null||i(),Mr(e,t,{viewScaleInfo:c,viewSizeInfo:d}),e.globalAlpha=l};u?(m0(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,renderContent:()=>{v()}}),typeof f=="number"&&f>0&&m&&f0(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,parentOpacity:l})):v()}function m0(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s}=n,c=s.devicePixelRatio,{clipPath:d}=(i==null?void 0:i.detail)||{};if(d&&a&&d.commands){const{x:l,y:h,w:u,h:m}=a,{originW:f,originH:v,originX:g,originY:p}=d,y=u/f,E=m/v,S=g*y,w=p*E,A=l-S,b=h-w;e.save(),e.translate(A,b),e.scale(c*y,c*E);const z=Ia(d.commands||[]),O=new Path2D(z);e.clip(O),e.translate(0-A,0-b),e.setTransform(1,0,0,1,0,0),dt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function f0(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s,parentOpacity:c}=n,d=s.devicePixelRatio,{clipPath:l,clipPathStrokeColor:h,clipPathStrokeWidth:u}=(i==null?void 0:i.detail)||{};if(l&&a&&l.commands&&typeof u=="number"&&u>0&&h){const{x:m,y:f,w:v,h:g}=a,{originW:p,originH:y,originX:E,originY:S}=l,w=v/p,A=g/y,b=E*w,z=S*A,O=m-b,L=f-z;e.save(),e.globalAlpha=c,e.translate(O,L),e.scale(d*w,d*A);const M=Ia(l.commands||[]),I=new Path2D(M);e.strokeStyle=h,e.lineWidth=u,e.stroke(I),e.translate(0-O,0-L),e.setTransform(1,0,0,1,0,0),dt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function xr(e,t,n){var o,i;const{pattern:a,viewScaleInfo:s,viewSizeInfo:c}=n,d=[];if(t.detail.background||a){const{x:l,y:h,w:u,h:m,radiusList:f}=Di(t,{viewScaleInfo:s,viewSizeInfo:c});if(e.beginPath(),e.moveTo(l+f[0],h),e.arcTo(l+u,h,l+u,h+m,f[1]),e.arcTo(l+u,h+m,l,h+m,f[2]),e.arcTo(l,h+m,l,h,f[3]),e.arcTo(l,h,l+u,h,f[0]),e.closePath(),typeof a=="string")e.fillStyle=a;else if(["CanvasPattern"].includes(Me.type(a)))e.fillStyle=a;else if(typeof t.detail.background=="string")e.fillStyle=t.detail.background;else if(((o=t.detail.background)===null||o===void 0?void 0:o.type)==="linear-gradient"){const v=sa(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:m},viewScaleInfo:s,opacity:e.globalAlpha});e.fillStyle=v}else if(((i=t.detail.background)===null||i===void 0?void 0:i.type)==="radial-gradient"){const v=sa(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:m},viewScaleInfo:s,opacity:e.globalAlpha});if(e.fillStyle=v,d&&d.length>0)for(let g=0;g<(d==null?void 0:d.length);g++){const p=d[g];p.method==="translate"?e.translate(p.args[0]+l,p.args[1]+h):p.method==="rotate"?e.rotate(...p.args):p.method==="scale"&&e.scale(...p.args)}}e.fill(),d&&d.length>0&&e.setTransform(1,0,0,1,0,0)}}function Mr(e,t,n){if(t.detail.borderWidth===0||!vi(t.detail.borderColor))return;const{viewScaleInfo:o}=n,{scale:i}=o;let a=ra.borderColor;vi(t.detail.borderColor)===!0&&(a=t.detail.borderColor);const{borderWidth:s,borderRadius:c,borderDash:d,boxSizing:l=ra.boxSizing}=t.detail;let h=0;typeof s=="number"&&(h=s||1),h=h*i;let u=[0,0,0,0];if(typeof c=="number"){const y=c*i;u=[y,y,y,y]}else Array.isArray(c)&&(c==null?void 0:c.length)===4&&(u=[c[0]*i,c[1]*i,c[2]*i,c[3]*i]);e.strokeStyle=a;let m=[];Array.isArray(d)&&d.length>0&&(m=d.map(y=>Math.ceil(y*i)));let f=0,v=0,g=0,p=0;if(Array.isArray(s)&&(f=(s[0]||0)*i,v=(s[1]||0)*i,g=(s[2]||0)*i,p=(s[3]||0)*i),p||v||f||g){e.lineCap="butt";let{x:y,y:E,w:S,h:w}=t;l==="border-box"?(y=y+p/2,E=E+f/2,S=S-p/2-v/2,w=w-f/2-g/2):l==="content-box"?(y=y-p/2,E=E-f/2,S=S+p/2+v/2,w=w+f/2+g/2):(y=t.x,E=t.y,S=t.w,w=t.h),f&&(e.beginPath(),e.lineWidth=f,e.moveTo(y-p/2,E),e.lineTo(y+S+v/2,E),e.closePath(),e.stroke()),v&&(e.beginPath(),e.lineWidth=v,e.moveTo(y+S,E-f/2),e.lineTo(y+S,E+w+g/2),e.closePath(),e.stroke()),g&&(e.beginPath(),e.lineWidth=g,e.moveTo(y-p/2,E+w),e.lineTo(y+S+v/2,E+w),e.closePath(),e.stroke()),p&&(e.beginPath(),e.lineWidth=p,e.moveTo(y,E-f/2),e.lineTo(y,E+w+g/2),e.closePath(),e.stroke())}else{let{x:y,y:E,w:S,h:w}=t;l==="border-box"?(y=t.x+h/2,E=t.y+h/2,S=t.w-h,w=t.h-h):l==="content-box"?(y=t.x-h/2,E=t.y-h/2,S=t.w+h,w=t.h+h):(y=t.x,E=t.y,S=t.w,w=t.h),m.length>0?e.lineCap="butt":e.lineCap="square",S=Math.max(S,1),w=Math.max(w,1),u=u.map(A=>Math.min(A,S/2,w/2)),e.setLineDash(m),e.lineWidth=h,e.beginPath(),e.moveTo(y+u[0],E),e.arcTo(y+S,E,y+S,E+w,u[1]),e.arcTo(y+S,E+w,y,E+w,u[2]),e.arcTo(y,E+w,y,E,u[3]),e.arcTo(y,E,y+S,E,u[0]),e.closePath(),e.stroke()}e.setLineDash([])}function ln(e,t,n){const{detail:o}=t,{viewScaleInfo:i,renderContent:a}=n,{shadowColor:s,shadowOffsetX:c,shadowOffsetY:d,shadowBlur:l}=o;Ce.number(l)?(e.save(),e.shadowColor=s||ra.shadowColor,e.shadowOffsetX=(c||0)*i.scale,e.shadowOffsetY=(d||0)*i.scale,e.shadowBlur=(l||0)*i.scale,a(),e.restore()):(e.save(),e.shadowColor="transparent",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,a(),e.restore())}function g0(e,t,n){const{detail:o,angle:i}=t,{viewScaleInfo:a,viewSizeInfo:s,parentOpacity:c}=n,{background:d="#000000",borderColor:l="#000000",boxSizing:h,borderWidth:u=0,borderDash:m}=o;let f=0;typeof u=="number"&&u>0?f=u:Array.isArray(u)&&typeof u[0]=="number"&&u[0]>0&&(f=u[0]),f=f*a.scale;const{x:v,y:g,w:p,h:y}=Ge({x:t.x,y:t.y,w:t.w,h:t.h},{viewScaleInfo:a})||t,E=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:y,angle:i});dt(e,{x:v,y:g,w:p,h:y,angle:i},()=>{ln(e,E,{viewScaleInfo:a,viewSizeInfo:s,renderContent:()=>{let S=p/2,w=y/2;const A=v+S,b=g+w,z=S,O=w;if(f>0&&(h==="content-box"?(S=S,w=w):h==="center-line"?(S=S-f/2,w=w-f/2):(S=S-f,w=w-f)),S>=0&&w>=0){const L=nn(E)*c;e.globalAlpha=L,e.beginPath();const M=sa(e,d,{viewElementSize:{x:v,y:g,w:p,h:y},viewScaleInfo:a,opacity:e.globalAlpha});if(e.fillStyle=M,e.circle(A,b,z,O,0,0,2*Math.PI),e.closePath(),e.fill(),e.globalAlpha=c,typeof f=="number"&&f>0){const I=f/2+S,P=f/2+w;if(e.beginPath(),m){const k=m.map(W=>W*a.scale);e.setLineDash(k)}e.strokeStyle=l,e.lineWidth=f,e.circle(A,b,I,P,0,0,2*Math.PI),e.closePath(),e.stroke(),e.setLineDash([])}}}})})}function v0(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Ge(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});dt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{ln(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{po(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{}})}})})}function p0(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Ge(t,{viewScaleInfo:i})||t,m=Object.assign(Object.assign({},t),{x:c,y:d,w:l,h,angle:u});dt(e,{x:c,y:d,w:l,h,angle:u},()=>{ln(e,m,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{po(e,m,{originElem:t,calcElemSize:{x:c,y:d,w:l,h,angle:u},viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s,renderContent:()=>{if(!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="image"&&o){e.globalAlpha=nn(t)*s;const{x:f,y:v,w:g,h:p,radiusList:y}=Di(m,{viewScaleInfo:i,viewSizeInfo:a}),{detail:E}=t,{scaleMode:S,originW:w=0,originH:A=0}=E,b=e.$undoPixelRatio(w),z=e.$undoPixelRatio(A);if(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(f+y[0],v),e.arcTo(f+g,v,f+g,v+p,y[1]),e.arcTo(f+g,v+p,f,v+p,y[2]),e.arcTo(f,v+p,f,v,y[3]),e.arcTo(f,v,f+g,v,y[0]),e.closePath(),e.fill(),e.clip(),S&&A&&w){let O=0,L=0,M=b,I=z;const P=f,k=v,W=g,F=p;if(b>t.w||z>t.h){if(S==="fill"){const V=Math.max(t.w/b,t.h/z),j=b*V,_=z*V;O=(j-t.w)/2/V,L=(_-t.h)/2/V,M=t.w/V,I=t.h/V}else if(S==="tile")O=0,L=0,M=t.w,I=t.h;else if(S==="fit"){const V=Math.min(t.w/b,t.h/z);O=(b-t.w/V)/2,L=(z-t.h/V)/2,M=t.w/V,I=t.h/V}}e.drawImage(o,O,L,M,I,P,k,W,F)}else e.drawImage(o,f,v,g,p);e.globalAlpha=s,e.restore()}}})}})})}function y0(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Ge(t,{viewScaleInfo:i,viewSizeInfo:a})||t;dt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="svg"&&o&&(e.globalAlpha=nn(t)*s,e.drawImage(o,c,d,l,h),e.globalAlpha=s)})}function w0(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Ge(t,{viewScaleInfo:i,viewSizeInfo:a})||t;dt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="html"&&o&&(e.globalAlpha=nn(t)*s,e.drawImage(o,c,d,l,h),e.globalAlpha=s)})}const Bi=rn();function b0(e,t,n){return n<.5&&e<t&&(e-t)/e>-.15?!0:e>=t}function S0(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Ge(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});dt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{ln(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{po(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a})}});{const m=Object.assign(Object.assign({},Bi),t.detail),f=m.fontSize||Bi.fontSize,v=f*o.scale;if(v<2)return;const p=(m.lineHeight||f)*o.scale;e.fillStyle=t.detail.color||Bi.color,e.textBaseline="top",e.$setFont({fontWeight:m.fontWeight,fontSize:v,fontFamily:Cr(m.fontFamily)});let y=m.text.replace(/\r\n/gi,`
`);m.textTransform==="lowercase"?y=y.toLowerCase():m.textTransform==="uppercase"&&(y=y.toUpperCase());const E=p,S=y.split(`
`),w=[];let A=0;S.forEach((O,L)=>{if(m.minInlineSize==="maxContent")w.push({text:O,width:e.$undoPixelRatio(e.measureText(O).width)});else{let M="",P=O.split("");if(m.wordBreak==="normal"){const k=" ",W=O.split(k);P=[],W.forEach((F,V)=>{P.push(F),V<W.length-1&&P.push(k)})}if(P.length===1&&m.overflow==="visible")w.push({text:P[0],width:e.$undoPixelRatio(e.measureText(P[0]).width)});else if(P.length>0){for(let k=0;k<P.length&&(b0(e.$doPixelRatio(d),e.measureText(M+P[k]).width,o.scale)?M+=P[k]||"":(w.push({text:M,width:e.$undoPixelRatio(e.measureText(M).width)}),M=P[k]||"",A++),!((A+1)*E>l&&m.overflow==="hidden"));k++)if(P.length-1===k&&(A+1)*E<=l){w.push({text:M,width:e.$undoPixelRatio(e.measureText(M).width)}),L<S.length-1&&A++;break}}else w.push({text:"",width:0})}});let b=0,z=0;E>v&&(z=(E-v)/2),w.length*E<l&&(t.detail.verticalAlign==="top"?b=0:t.detail.verticalAlign==="bottom"?b+=l-w.length*E:b+=(l-w.length*E)/2);{const O=c+b;m.textShadowColor!==void 0&&vi(m.textShadowColor)&&(e.shadowColor=m.textShadowColor),m.textShadowOffsetX!==void 0&&Ce.number(m.textShadowOffsetX)&&(e.shadowOffsetX=m.textShadowOffsetX),m.textShadowOffsetY!==void 0&&Ce.number(m.textShadowOffsetY)&&(e.shadowOffsetY=m.textShadowOffsetY),m.textShadowBlur!==void 0&&Ce.number(m.textShadowBlur)&&(e.shadowBlur=m.textShadowBlur),w.forEach((L,M)=>{let I=s;m.textAlign==="center"?I=s+(d-L.width)/2:m.textAlign==="right"&&(I=s+(d-L.width)),e.fillText(L.text,I,O+E*M+z)})}}})}var E0=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function C0(e,t,n){var o,i;const{detail:a}=t,{originX:s,originY:c,originW:d,originH:l,fillRule:h}=a,{viewScaleInfo:u,viewSizeInfo:m,parentOpacity:f}=n,{x:v,y:g,w:p,h:y,angle:E}=Ge(t,{viewScaleInfo:u})||t,S=p/d,w=y/l,A=s*S,b=c*w,z=v-A,O=g-b,L=t.detail,M=E0(L,["clipPath","clipPathStrokeColor","clipPathStrokeWidth"]),I=u.scale*m.devicePixelRatio,P=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:y,angle:E});let k=Object.assign({},P);k.detail=M;let W=Object.assign({},t);W.detail=M,a.fill&&a.fill!=="string"&&(!((i=(o=a.fill)===null||o===void 0?void 0:o.type)===null||i===void 0)&&i.includes("gradient"))&&(k=Object.assign(Object.assign({},P),{detail:Object.assign(Object.assign({},P.detail),{background:a.fill,clipPath:{commands:a.commands,originX:s,originY:c,originW:d,originH:l}})}),W.detail=Object.assign({},k.detail)),dt(e,{x:v,y:g,w:p,h:y,angle:E},()=>{po(e,k,{originElem:W,calcElemSize:{x:v,y:g,w:p,h:y,angle:E},viewScaleInfo:u,viewSizeInfo:m,parentOpacity:f,renderContent:()=>{ln(e,P,{viewScaleInfo:u,viewSizeInfo:m,renderContent:()=>{e.save(),e.translate(z,O),e.scale(I*S/u.scale,I*w/u.scale);const F=Ia(a.commands||[]),V=new Path2D(F);a.fill&&(typeof a.fill=="string"?e.fillStyle=a.fill:e.fillStyle="transparent"),a.fill&&e.fill(V,h),a.stroke&&a.strokeWidth!==0&&(e.strokeStyle=a.stroke,e.lineWidth=(a.strokeWidth||1)/m.devicePixelRatio,e.lineCap=a.strokeLineCap||"square",e.stroke(V)),e.translate(-z,-O),e.restore()}})}})})}const Qa=.4;function zr(e,t,n){var o,i,a;if(((o=t==null?void 0:t.operations)===null||o===void 0?void 0:o.invisible)===!0)return;const{w:s,h:c}=t,{scale:d}=n.viewScaleInfo;if(d<1&&(s*d<Qa||c*d<Qa)||n.parentOpacity===0)return;const{overrideElementMap:l}=n;if(!(!((a=(i=l==null?void 0:l[t.uuid])===null||i===void 0?void 0:i.operations)===null||a===void 0)&&a.invisible))try{switch(t.type){case"rect":{v0(e,t,n);break}case"circle":{g0(e,t,n);break}case"text":{S0(e,t,n);break}case"image":{p0(e,t,n);break}case"svg":{y0(e,t,n);break}case"html":{w0(e,t,n);break}case"path":{C0(e,t,n);break}case"group":{const h=Object.assign(Object.assign({},n.elementAssets||{}),t.detail.assets||{});x0(e,t,Object.assign(Object.assign({},n),{elementAssets:h}));break}default:break}}catch(h){console.error(h)}}function x0(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Ge({x:t.x,y:t.y,w:t.w,h:t.h,angle:t.angle},{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});dt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{e.globalAlpha=nn(t)*a,ln(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{po(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{const{x:m,y:f,w:v,h:g,radiusList:p}=Di(u,{viewScaleInfo:o,viewSizeInfo:i});if(t.detail.overflow==="hidden"&&(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(m+p[0],f),e.arcTo(m+v,f,m+v,f+g,p[1]),e.arcTo(m+v,f+g,m,f+g,p[2]),e.arcTo(m,f+g,m,f,p[3]),e.arcTo(m,f,m+v,f,p[0]),e.closePath(),e.fill(),e.clip()),Array.isArray(t.detail.children)){const{parentElementSize:y}=n,E={x:y.x+t.x,y:y.y+t.y,w:t.w||y.w,h:t.h||y.h,angle:t.angle},{calculator:S}=n;for(let w=0;w<t.detail.children.length;w++){let A=t.detail.children[w];if(A=Object.assign(Object.assign({},A),{x:E.x+A.x,y:E.y+A.y}),!(n.forceDrawAll!==!0&&!(S!=null&&S.needRender(A))))try{zr(e,A,Object.assign(Object.assign({},n),{parentOpacity:a*nn(t)}))}catch(b){console.error(b)}}}t.detail.overflow==="hidden"&&e.restore()}})}}),e.globalAlpha=a})}const M0=rn();function Ja(e,t,n){var o;const{elements:i=[]}=t,{parentOpacity:a}=n;for(let s=0;s<i.length;s++){const c=i[s],d=Object.assign(Object.assign({},c),{detail:Object.assign(Object.assign({},M0),c==null?void 0:c.detail)});if(!(n.forceDrawAll!==!0&&!(!((o=n.calculator)===null||o===void 0)&&o.needRender(d))))try{zr(e,d,Object.assign(Object.assign({},n),{parentOpacity:a}))}catch(l){console.error(l)}}}function z0(e,t,n,o){const{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,c=Object.assign({uuid:"layout",type:"group"},t),{x:d,y:l,w:h,h:u}=Ge(c,{viewScaleInfo:i})||c,f=Object.assign(Object.assign({},c),{x:d,y:l,w:h,h:u,angle:0});if(e.globalAlpha=1,ln(e,f,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{xr(e,f,{viewScaleInfo:i,viewSizeInfo:a})}}),t.detail.overflow==="hidden"){const{viewScaleInfo:v,viewSizeInfo:g}=n,p=Object.assign({uuid:"layout",type:"group"},t),y=Ge(p,{viewScaleInfo:v})||p,E=Object.assign(Object.assign({},p),y),{x:S,y:w,w:A,h:b,radiusList:z}=Di(E,{viewScaleInfo:v,viewSizeInfo:g});e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(S+z[0],w),e.arcTo(S+A,w,S+A,w+b,z[1]),e.arcTo(S+A,w+b,S,w+b,z[2]),e.arcTo(S,w+b,S,w,z[3]),e.arcTo(S,w,S+A,w,z[0]),e.closePath(),e.fill(),e.clip()}o(e),t.detail.overflow==="hidden"&&e.restore(),Mr(e,f,{viewScaleInfo:i,viewSizeInfo:a}),e.globalAlpha=s}function I0(e,t,n){if(typeof(t==null?void 0:t.background)=="string"){const{viewSizeInfo:o}=n,{width:i,height:a}=o;e.globalAlpha=1,e.fillStyle=t.background,e.fillRect(0,0,i,a)}}var Fi=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},ye=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Vn=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},nt,so,Pn,tt,bt,Jo,Wi,Ka,qa,es,Ir,Ar;const A0=["image","svg","html"],Jn=e=>{var t,n,o;let i=null;return e.type==="image"?i=((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.src)||null:e.type==="svg"?i=((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.svg)||null:e.type==="html"&&(i=((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.html)||null),typeof i=="string"&&i?Kt(i)?i:jn(i):jn(`${kt()}-${e.uuid}-${kt()}-${kt()}`)};class T0 extends en{constructor(){super(),nt.add(this),so.set(this,{}),Pn.set(this,{}),tt.set(this,{}),bt.set(this,!1),ye(this,nt,"m",Jo).call(this,"image",(t,n)=>Fi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.src])===null||o===void 0?void 0:o.value)||t.detail.src,a=yield Ti(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}})),ye(this,nt,"m",Jo).call(this,"html",(t,n)=>Fi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.html])===null||o===void 0?void 0:o.value)||t.detail.html,a=yield fc(i,{width:t.detail.originW||t.w,height:t.detail.originH||t.h});return{uuid:t.uuid,lastModified:Date.now(),content:a}})),ye(this,nt,"m",Jo).call(this,"svg",(t,n)=>Fi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.svg])===null||o===void 0?void 0:o.value)||t.detail.svg,a=yield hc(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}}))}isDestroyed(){return ye(this,bt,"f")}destroy(){Vn(this,bt,!0,"f"),this.clear(),Vn(this,so,null,"f"),Vn(this,Pn,null,"f"),Vn(this,tt,null,"f")}load(t,n){ye(this,bt,"f")!==!0&&(ye(this,nt,"m",Ar).call(this,t)||A0.includes(t.type)&&ye(this,nt,"m",Ir).call(this,t,n))}getContent(t){var n,o;const i=Jn(t);return((o=(n=ye(this,tt,"f"))===null||n===void 0?void 0:n[i])===null||o===void 0?void 0:o.content)||null}getLoadItemMap(){return ye(this,tt,"f")}setLoadItemMap(t){Vn(this,tt,t,"f")}}so=new WeakMap,Pn=new WeakMap,tt=new WeakMap,bt=new WeakMap,nt=new WeakSet,Jo=function(t,n){ye(this,so,"f")[t]=n},Wi=function(t){var n,o,i;let a=null;return t.type==="image"?a=((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.src)||null:t.type==="svg"?a=((o=t==null?void 0:t.detail)===null||o===void 0?void 0:o.svg)||null:t.type==="html"&&(a=((i=t==null?void 0:t.detail)===null||i===void 0?void 0:i.html)||null),a},Ka=function(t){return{element:t,status:"null",content:null,error:null,startTime:-1,endTime:-1,source:ye(this,nt,"m",Wi).call(this,t)}},qa=function(t){const n=Jn(t.element),o=ye(this,tt,"f")[n];ye(this,bt,"f")||(o?o.startTime<t.startTime&&(ye(this,tt,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(ye(this,tt,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},es=function(t){var n;const o=Jn(t.element),i=(n=ye(this,tt,"f"))===null||n===void 0?void 0:n[o];ye(this,bt,"f")||(i?i.startTime<t.startTime&&(ye(this,tt,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(ye(this,tt,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},Ir=function(t,n){const o=ye(this,nt,"m",Ka).call(this,t),i=Jn(t);if(ye(this,Pn,"f")[i])return;ye(this,Pn,"f")[i]=o;const a=ye(this,so,"f")[t.type];typeof a=="function"&&!ye(this,bt,"f")&&(o.startTime=Date.now(),a(t,n).then(s=>{ye(this,bt,"f")||(o.content=s.content,o.endTime=Date.now(),o.status="load",ye(this,nt,"m",qa).call(this,o))}).catch(s=>{console.warn(`Load element source "${o.source}" fail`,s,t),o.endTime=Date.now(),o.status="error",o.error=s,ye(this,nt,"m",es).call(this,o)}))},Ar=function(t){var n;const o=Jn(t),i=(n=ye(this,Pn,"f"))===null||n===void 0?void 0:n[o];return!!(i&&i.status==="error"&&i.source&&i.source===ye(this,nt,"m",Wi).call(this,t))};var Bn=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},st=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},la,Tt,yt,Ko,Tr;class Nr extends en{constructor(t){super(),la.add(this),Tt.set(this,void 0),yt.set(this,new T0),Ko.set(this,!1),Bn(this,Tt,t,"f"),st(this,la,"m",Tr).call(this)}isDestroyed(){return st(this,Ko,"f")}destroy(){this.clear(),Bn(this,Tt,null,"f"),st(this,yt,"f").destroy(),Bn(this,yt,null,"f"),Bn(this,Ko,!0,"f")}updateOptions(t){Bn(this,Tt,t,"f")}drawData(t,n){const o=st(this,yt,"f"),{calculator:i,sharer:a}=st(this,Tt,"f"),s=st(this,Tt,"f").viewContext;s.clearRect(0,0,s.canvas.width,s.canvas.height);const c={x:0,y:0,w:n.viewSizeInfo.width,h:n.viewSizeInfo.height},d=Object.assign({loader:o,calculator:i,parentElementSize:c,elementAssets:t.assets,parentOpacity:1,overrideElementMap:a==null?void 0:a.getActiveOverrideElemenentMap()},n);I0(s,t.global,d),t.layout?z0(s,t.layout,d,()=>{Ja(s,t,d)}):Ja(s,t,d)}scale(t){const{sharer:n}=st(this,Tt,"f");if(!n)return;const{data:o,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c,width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:m}=n.getActiveStoreSnapshot();o&&this.drawData(o,{viewScaleInfo:{scale:t,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c},viewSizeInfo:{width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:m}})}setLoadItemMap(t){st(this,yt,"f").setLoadItemMap(t)}getLoadItemMap(){return st(this,yt,"f").getLoadItemMap()}getLoader(){return st(this,yt,"f")}}Tt=new WeakMap,yt=new WeakMap,Ko=new WeakMap,la=new WeakSet,Tr=function(){const t=st(this,yt,"f");t.on("load",n=>{this.trigger("load",n)}),t.on("error",n=>{console.error(n)})};var Hi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ye=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Mn,je;class Dr{constructor(t){Mn.set(this,void 0),je.set(this,void 0),Hi(this,Mn,t,"f"),Hi(this,je,new tn({defaultStorage:{viewVisibleInfoMap:{},visibleCount:0,invisibleCount:0}}),"f")}toGridNum(t,n){return(n==null?void 0:n.ignore)===!0?t:Math.round(t)}destroy(){Hi(this,Mn,null,"f")}needRender(t){const o=Ye(this,je,"f").get("viewVisibleInfoMap")[t.uuid];return o?o.isVisibleInView:!0}isPointInElement(t,n,o,i){const a=Ye(this,Mn,"f").viewContext;return aa(t,{context2d:a,element:n,viewScaleInfo:o,viewSizeInfo:i})}getPointElement(t,n){const o=Ye(this,Mn,"f").viewContext;return Xc(t,Object.assign(Object.assign({},n),{context2d:o}))}resetViewVisibleInfoMap(t,n){if(t){const{viewVisibleInfoMap:o,invisibleCount:i,visibleCount:a}=Uc(t.elements,n);Ye(this,je,"f").set("viewVisibleInfoMap",o),Ye(this,je,"f").set("invisibleCount",i),Ye(this,je,"f").set("visibleCount",a)}}updateVisiableStatus(t){const{viewVisibleInfoMap:n,invisibleCount:o,visibleCount:i}=pr(Ye(this,je,"f").get("viewVisibleInfoMap"),t);Ye(this,je,"f").set("viewVisibleInfoMap",n),Ye(this,je,"f").set("invisibleCount",o),Ye(this,je,"f").set("visibleCount",i)}calcViewRectInfoFromOrigin(t,n){const o=Ye(this,je,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:m,topRight:f,bottomLeft:v,bottomRight:g}=o.originRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:ve(c,p),left:ve(d,p),right:ve(l,p),bottom:ve(h,p),top:ve(u,p),topLeft:ve(m,p),topRight:ve(f,p),bottomLeft:ve(v,p),bottomRight:ve(g,p)}}calcViewRectInfoFromRange(t,n){const o=Ye(this,je,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:m,topRight:f,bottomLeft:v,bottomRight:g}=o.rangeRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:ve(c,p),left:ve(d,p),right:ve(l,p),bottom:ve(h,p),top:ve(u,p),topLeft:ve(m,p),topRight:ve(f,p),bottomLeft:ve(v,p),bottomRight:ve(g,p)}}modifyViewVisibleInfoMap(t,n){const{modifyOptions:o,viewScaleInfo:i,viewSizeInfo:a}=n,{type:s,content:c}=o,d=t.elements,l=Ye(this,je,"f").get("viewVisibleInfoMap");if(s==="deleteElement"){const{element:h}=c,u=[],m=f=>{u.push(f.uuid),f.type==="group"&&Array.isArray(f.detail.children)&&f.detail.children.forEach(v=>{m(v)})};m(h),u.forEach(f=>{delete l[f]}),Ye(this,je,"f").set("viewVisibleInfoMap",l)}else if(s==="addElement"||s==="updateElement"){const{position:h}=c,u=He(h,t.elements),m=ur(d,h);if(u)if(s==="updateElement"&&u.type==="group")this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a});else{const f=gr(u,{groupQueue:m||[]}),v={originRectInfo:f,rangeRectInfo:Ce.angle(u.angle)?vr(f):f,isVisibleInView:!0,isGroup:(u==null?void 0:u.type)==="group",position:[...h]};l[u.uuid]=v,Ye(this,je,"f").set("viewVisibleInfoMap",l),s==="updateElement"&&this.updateVisiableStatus({viewScaleInfo:i,viewSizeInfo:a})}}else s==="moveElement"&&this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a})}}Mn=new WeakMap,je=new WeakMap;var Gi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},oe=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},xe,Ln,qe,qo,Pr,ei,ti,ni,oi,ii,ai,si,ri,mt,ft,Qt;function ts(e){return e>0||e<0||e===0}class N0 extends en{constructor(t){super(),xe.add(this),Ln.set(this,void 0),qe.set(this,void 0),qo.set(this,!1),ei.set(this,o=>{if(!oe(this,xe,"m",mt).call(this,o))return;const i=oe(this,xe,"m",ft).call(this,o);if(!oe(this,xe,"m",Qt).call(this,i))return;o.preventDefault(),o.stopPropagation();const a=o.deltaX>0||o.deltaX<0?o.deltaX:0,s=o.deltaY>0||o.deltaY<0?o.deltaY:0;o.ctrlKey===!0&&this.has("wheelScale")?this.trigger("wheelScale",{deltaX:a,deltaY:s,point:i}):this.has("wheel")&&this.trigger("wheel",{deltaX:a,deltaY:s,point:i})}),ti.set(this,o=>{if(!oe(this,xe,"m",mt).call(this,o))return;o.preventDefault();const i=oe(this,xe,"m",ft).call(this,o);oe(this,xe,"m",Qt).call(this,i)}),ni.set(this,o=>{if(!oe(this,xe,"m",mt).call(this,o))return;o.preventDefault();const i=oe(this,xe,"m",ft).call(this,o);if(!oe(this,xe,"m",Qt).call(this,i))return;const a=500,s=Date.now(),c=oe(this,qe,"f").get("prevClickPoint");c&&s-c.t<=a&&Math.abs(c.x-i.x)<=5&&Math.abs(c.y-i.y)<=5?this.trigger("doubleClick",{point:i}):oe(this,qe,"f").set("prevClickPoint",i)}),oi.set(this,o=>{if(oe(this,qe,"f").set("hasPointDown",!1),!oe(this,xe,"m",mt).call(this,o))return;o.preventDefault();const i=oe(this,xe,"m",ft).call(this,o);this.trigger("pointLeave",{point:i})}),ii.set(this,o=>{if(oe(this,qe,"f").set("hasPointDown",!1),!oe(this,xe,"m",mt).call(this,o))return;o.preventDefault();const i=oe(this,xe,"m",ft).call(this,o);this.trigger("pointEnd",{point:i})}),ai.set(this,o=>{if(!oe(this,xe,"m",mt).call(this,o))return;o.preventDefault(),o.stopPropagation();const i=oe(this,xe,"m",ft).call(this,o);if(!oe(this,xe,"m",Qt).call(this,i)){oe(this,qe,"f").get("hasPointDown")&&(this.trigger("pointLeave",{point:i}),oe(this,qe,"f").set("hasPointDown",!1));return}oe(this,qe,"f").get("hasPointDown")===!0&&this.trigger("pointMove",{point:i})}),si.set(this,o=>{if(!oe(this,xe,"m",mt).call(this,o))return;o.preventDefault();const i=oe(this,xe,"m",ft).call(this,o);oe(this,xe,"m",Qt).call(this,i)&&(oe(this,qe,"f").set("hasPointDown",!0),this.trigger("pointStart",{point:i}))}),ri.set(this,o=>{if(!oe(this,xe,"m",mt).call(this,o))return;o.preventDefault();const i=oe(this,xe,"m",ft).call(this,o);oe(this,xe,"m",Qt).call(this,i)&&this.trigger("hover",{point:i})});const n=new tn({defaultStorage:{hasPointDown:!1,prevClickPoint:null}});Gi(this,qe,n,"f"),Gi(this,Ln,t,"f"),oe(this,xe,"m",Pr).call(this)}onEvents(){if(oe(this,qo,"f"))return;const t=window;t.addEventListener("mousemove",oe(this,ri,"f")),t.addEventListener("mousedown",oe(this,si,"f")),t.addEventListener("mousemove",oe(this,ai,"f")),t.addEventListener("mouseup",oe(this,ii,"f")),t.addEventListener("mouseleave",oe(this,oi,"f")),t.addEventListener("wheel",oe(this,ei,"f"),{passive:!1}),t.addEventListener("click",oe(this,ni,"f")),t.addEventListener("contextmenu",oe(this,ti,"f"))}offEvents(){const t=window;t.removeEventListener("mousemove",oe(this,ri,"f")),t.removeEventListener("mousedown",oe(this,si,"f")),t.removeEventListener("mousemove",oe(this,ai,"f")),t.removeEventListener("mouseup",oe(this,ii,"f")),t.removeEventListener("mouseleave",oe(this,oi,"f")),t.removeEventListener("wheel",oe(this,ei,"f")),t.removeEventListener("click",oe(this,ni,"f")),t.removeEventListener("contextmenu",oe(this,ti,"f"))}destroy(){this.offEvents(),oe(this,qe,"f").destroy(),Gi(this,qo,!0,"f")}}Ln=new WeakMap,qe=new WeakMap,qo=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,oi=new WeakMap,ii=new WeakMap,ai=new WeakMap,si=new WeakMap,ri=new WeakMap,xe=new WeakSet,Pr=function(){this.onEvents()},mt=function(t){return t.target===oe(this,Ln,"f").boardContent.boardContext.canvas},ft=function(t){const o=oe(this,Ln,"f").boardContent.boardContext.canvas.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top,t:Date.now()}},Qt=function(t){const n=oe(this,Ln,"f").sharer.getActiveViewSizeInfo(),{width:o,height:i}=n;return!!(ts(t.x)&&ts(t.y)&&t.x<=o&&t.y<=i)};var ns=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},we=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},be,zn;const D0={width:0,height:0,devicePixelRatio:1,contextWidth:0,contextHeight:0,data:null,scale:1,offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0,overrideElementMap:null};class P0{constructor(){be.set(this,void 0),zn.set(this,void 0);const t=new tn({defaultStorage:D0}),n=new tn({defaultStorage:{}});ns(this,be,t,"f"),ns(this,zn,n,"f")}getActiveStorage(t){return we(this,be,"f").get(t)}setActiveStorage(t,n){return we(this,be,"f").set(t,n)}getActiveStoreSnapshot(t){return we(this,be,"f").getSnapshot(t)}getSharedStorage(t){return we(this,zn,"f").get(t)}setSharedStorage(t,n){return we(this,zn,"f").set(t,n)}getSharedStoreSnapshot(t){return we(this,zn,"f").getSnapshot(t)}getActiveViewScaleInfo(){return{scale:we(this,be,"f").get("scale"),offsetTop:we(this,be,"f").get("offsetTop"),offsetBottom:we(this,be,"f").get("offsetBottom"),offsetLeft:we(this,be,"f").get("offsetLeft"),offsetRight:we(this,be,"f").get("offsetRight")}}setActiveViewScaleInfo(t){const{scale:n,offsetTop:o,offsetBottom:i,offsetLeft:a,offsetRight:s}=t;we(this,be,"f").set("scale",n),we(this,be,"f").set("offsetTop",o),we(this,be,"f").set("offsetBottom",i),we(this,be,"f").set("offsetLeft",a),we(this,be,"f").set("offsetRight",s)}setActiveViewSizeInfo(t){we(this,be,"f").set("width",t.width),we(this,be,"f").set("height",t.height),we(this,be,"f").set("devicePixelRatio",t.devicePixelRatio),we(this,be,"f").set("contextWidth",t.contextWidth),we(this,be,"f").set("contextHeight",t.contextHeight)}getActiveViewSizeInfo(){return{width:we(this,be,"f").get("width"),height:we(this,be,"f").get("height"),devicePixelRatio:we(this,be,"f").get("devicePixelRatio"),contextWidth:we(this,be,"f").get("contextWidth"),contextHeight:we(this,be,"f").get("contextHeight")}}getActiveOverrideElemenentMap(){return we(this,be,"f").get("overrideElementMap")}setActiveOverrideElemenentMap(t){we(this,be,"f").set("overrideElementMap",t)}}be=new WeakMap,zn=new WeakMap;var li=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ne=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ro,_e,On,In,Lr,Or;const{requestAnimationFrame:L0}=window;class O0 extends en{constructor(t){super(),ro.add(this),_e.set(this,void 0),On.set(this,[]),In.set(this,"FREE"),li(this,_e,t,"f"),Ne(this,ro,"m",Lr).call(this)}resetViewVisibleInfoMap(t,n){t&&Ne(this,_e,"f").calculator.resetViewVisibleInfoMap(t,n)}drawFrame(){const{sharer:t}=Ne(this,_e,"f"),n=t.getActiveStoreSnapshot(),o=t.getSharedStoreSnapshot();Ne(this,On,"f").push({activeStore:n,sharedStore:o}),Ne(this,ro,"m",Or).call(this)}scale(t){const{scale:n,point:o,ignoreUpdateVisibleStatus:i}=t,{sharer:a}=Ne(this,_e,"f"),{moveX:s,moveY:c}=Gc({scale:n,point:o,viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()});return a.setActiveStorage("scale",n),i||Ne(this,_e,"f").calculator.updateVisiableStatus({viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()}),{moveX:s,moveY:c}}scroll(t){const{sharer:n}=Ne(this,_e,"f"),o=n.getActiveViewScaleInfo(),{moveX:i,moveY:a,ignoreUpdateVisibleStatus:s}=t,c=n.getActiveViewSizeInfo(),d=Yc({moveX:i,moveY:a,viewScaleInfo:o,viewSizeInfo:c});return n.setActiveViewScaleInfo(d),s||Ne(this,_e,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),d}updateViewScaleInfo(t){const{sharer:n}=Ne(this,_e,"f"),o=Hc(t,{viewSizeInfo:n.getActiveViewSizeInfo()});return n.setActiveViewScaleInfo(o),Ne(this,_e,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),o}resize(t={},n){const{sharer:o}=Ne(this,_e,"f"),i=o.getActiveViewSizeInfo(),a=Object.assign(Object.assign({},i),t),{width:s,height:c,devicePixelRatio:d}=a,{underlayContext:l,boardContext:h,overlayContext:u,viewContext:m}=Ne(this,_e,"f").boardContent;return h.canvas.width=s*d,h.canvas.height=c*d,h.canvas.style.width=`${s}px`,h.canvas.style.height=`${c}px`,l.canvas.width=s*d,l.canvas.height=c*d,u.canvas.width=s*d,u.canvas.height=c*d,m.canvas.width=s*d,m.canvas.height=c*d,o.setActiveViewSizeInfo(a),n!=null&&n.ignoreUpdateVisibleStatus||Ne(this,_e,"f").calculator.updateVisiableStatus({viewScaleInfo:o.getActiveViewScaleInfo(),viewSizeInfo:o.getActiveViewSizeInfo()}),a}}_e=new WeakMap,On=new WeakMap,In=new WeakMap,ro=new WeakSet,Lr=function(){const{renderer:t}=Ne(this,_e,"f");t.on("load",()=>{this.drawFrame()})},Or=function e(){if(Ne(this,In,"f")==="DRAWING"||Ne(this,On,"f").length===0)return;li(this,In,"DRAWING","f");const t=Ne(this,On,"f").shift(),{renderer:n,boardContent:o,beforeDrawFrame:i,afterDrawFrame:a}=Ne(this,_e,"f");if(t){const{scale:s,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h,width:u,height:m,contextHeight:f,contextWidth:v,devicePixelRatio:g}=t.activeStore,p={scale:s,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h},y={width:u,height:m,contextHeight:f,contextWidth:v,devicePixelRatio:g};t!=null&&t.activeStore.data&&n.drawData(t.activeStore.data,{viewScaleInfo:p,viewSizeInfo:y}),i({snapshot:t}),o.drawView(),a({snapshot:t})}if(Ne(this,On,"f").length===0){li(this,In,"COMPLETE","f");return}li(this,In,"DRAWING","f")&&L0(()=>{Ne(this,ro,"m",e).call(this)})};var Nt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Q=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},De,An,wt,Si,ge,Re,Rn,lt,Ze,Tn,kn,ci,Rr,os,is,as,ss,rs,ls,cs,ds,us,hs,kr,jr,_r,Kn;class R0{constructor(t){De.add(this),An.set(this,void 0),wt.set(this,new WeakMap),Si.set(this,[]),ge.set(this,[]),Re.set(this,void 0),Rn.set(this,void 0),lt.set(this,void 0),Ze.set(this,void 0),Tn.set(this,void 0),kn.set(this,new en),ci.set(this,!1);const{boardContent:n}=t,o=new P0,i=new Dr({viewContext:n.viewContext}),a=new N0({boardContent:n,sharer:o}),s=new Nr({viewContext:n.viewContext,sharer:o,calculator:i});Nt(this,An,t,"f"),Nt(this,lt,o,"f"),Nt(this,Re,a,"f"),Nt(this,Rn,s,"f"),Nt(this,Tn,i,"f"),Nt(this,Ze,new O0({boardContent:t.boardContent,sharer:o,renderer:s,calculator:Q(this,Tn,"f"),beforeDrawFrame:c=>{Q(this,De,"m",jr).call(this,c)},afterDrawFrame:c=>{Q(this,De,"m",_r).call(this,c)}}),"f"),Q(this,De,"m",Rr).call(this),Q(this,De,"m",Kn).call(this)}isDestroyed(){return Q(this,ci,"f")}destroy(){Q(this,Re,"f").destroy(),Q(this,Rn,"f").destroy(),Q(this,Tn,"f").destroy(),Q(this,kn,"f").destroy(),Nt(this,ci,!0,"f")}getSharer(){return Q(this,lt,"f")}getViewer(){return Q(this,Ze,"f")}getRenderer(){return Q(this,Rn,"f")}setData(t,n){const{modifiedOptions:o}=n||{},i=Q(this,lt,"f");Q(this,lt,"f").setActiveStorage("data",t);const a=i.getActiveViewSizeInfo(),s=i.getActiveViewScaleInfo(),c=cr(t.elements,{viewWidth:a.width,viewHeight:a.height,extend:!0});o?Q(this,Ze,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}):Q(this,Ze,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}),Q(this,Ze,"f").drawFrame();const d=Object.assign(Object.assign({},a),c);return Q(this,lt,"f").setActiveViewSizeInfo(d),{viewSizeInfo:d}}getData(){const{data:t}=Q(this,lt,"f").getActiveStoreSnapshot();return t}use(t,n){var o,i,a;if(Q(this,wt,"f").has(t)){const f=Q(this,wt,"f").get(t);if(f){(i=(o=f.middlewareObject).use)===null||i===void 0||i.call(o),f.status="enable",Q(this,wt,"f").set(t,f),Q(this,De,"m",Kn).call(this);return}}const{boardContent:s,container:c}=Q(this,An,"f"),d=Q(this,lt,"f"),l=Q(this,Ze,"f"),h=Q(this,Tn,"f"),u=Q(this,kn,"f"),m=t({boardContent:s,sharer:d,viewer:l,calculator:h,eventHub:u,container:c},n);(a=m.use)===null||a===void 0||a.call(m),Q(this,Si,"f").push(t),Q(this,ge,"f").push(m),Q(this,wt,"f").set(t,{status:"enable",middlewareObject:m,config:n}),Q(this,De,"m",Kn).call(this)}disuse(t){var n,o;const i=Q(this,wt,"f").get(t);i&&((o=(n=i.middlewareObject).disuse)===null||o===void 0||o.call(n),i.status="disable",Q(this,wt,"f").set(t,i),Q(this,De,"m",Kn).call(this))}scale(t){const n=Q(this,Ze,"f"),{ignoreUpdateVisibleStatus:o}=t,{moveX:i,moveY:a}=n.scale(Object.assign(Object.assign({},t),{ignoreUpdateVisibleStatus:!0}));n.scroll({moveX:i,moveY:a,ignoreUpdateVisibleStatus:o})}scroll(t){return Q(this,Ze,"f").scroll(t)}updateViewScaleInfo(t){return Q(this,Ze,"f").updateViewScaleInfo(t)}resize(t,n){const o=Q(this,Ze,"f").resize(t,n),{width:i,height:a,devicePixelRatio:s}=t,{boardContent:c}=Q(this,An,"f");c.viewContext.$resize({width:i,height:a,devicePixelRatio:s}),c.overlayContext.$resize({width:i,height:a,devicePixelRatio:s}),c.boardContext.$resize({width:i,height:a,devicePixelRatio:s}),c.underlayContext.$resize({width:i,height:a,devicePixelRatio:s}),Q(this,Ze,"f").drawFrame(),Q(this,Re,"f").trigger("resize",o),Q(this,lt,"f").setActiveViewSizeInfo(t)}clear(){const{boardContent:t}=Q(this,An,"f"),{underlayContext:n,overlayContext:o,viewContext:i,boardContext:a}=t;n.clearRect(0,0,n.canvas.width,n.canvas.height),o.clearRect(0,0,o.canvas.width,o.canvas.height),i.clearRect(0,0,i.canvas.width,i.canvas.height),a.clearRect(0,0,a.canvas.width,a.canvas.height),Q(this,De,"m",kr).call(this)}getEventHub(){return Q(this,kn,"f")}onWatcherEvents(){Q(this,Re,"f").onEvents()}offWatcherEvents(){Q(this,Re,"f").offEvents()}}An=new WeakMap,wt=new WeakMap,Si=new WeakMap,ge=new WeakMap,Re=new WeakMap,Rn=new WeakMap,lt=new WeakMap,Ze=new WeakMap,Tn=new WeakMap,kn=new WeakMap,ci=new WeakMap,De=new WeakSet,Rr=function(){Q(this,Re,"f").on("pointStart",Q(this,De,"m",os).bind(this)),Q(this,Re,"f").on("pointEnd",Q(this,De,"m",is).bind(this)),Q(this,Re,"f").on("pointMove",Q(this,De,"m",as).bind(this)),Q(this,Re,"f").on("hover",Q(this,De,"m",ss).bind(this)),Q(this,Re,"f").on("wheel",Q(this,De,"m",ls).bind(this)),Q(this,Re,"f").on("wheelScale",Q(this,De,"m",cs).bind(this)),Q(this,Re,"f").on("scrollX",Q(this,De,"m",ds).bind(this)),Q(this,Re,"f").on("scrollY",Q(this,De,"m",us).bind(this)),Q(this,Re,"f").on("resize",Q(this,De,"m",hs).bind(this)),Q(this,Re,"f").on("doubleClick",Q(this,De,"m",rs).bind(this)),Q(this,Rn,"f").on("load",()=>{Q(this,kn,"f").trigger("loadResource")})},os=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.pointStart)===null||n===void 0?void 0:n.call(i,t))===!1)return}},is=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.pointEnd)===null||n===void 0?void 0:n.call(i,t))===!1)return}},as=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.pointMove)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ss=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.hover)===null||n===void 0?void 0:n.call(i,t))===!1)return}},rs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.doubleClick)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ls=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.wheel)===null||n===void 0?void 0:n.call(i,t))===!1)return}},cs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.wheelScale)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ds=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollX)===null||n===void 0?void 0:n.call(i,t))===!1)return}},us=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollY)===null||n===void 0?void 0:n.call(i,t))===!1)return}},hs=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.resize)===null||n===void 0?void 0:n.call(i,t))===!1)return}},kr=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.clear)===null||n===void 0?void 0:n.call(i,t))===!1)return}},jr=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.beforeDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},_r=function(t){var n;for(let o=0;o<Q(this,ge,"f").length;o++){const i=Q(this,ge,"f")[o];if(((n=i==null?void 0:i.afterDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Kn=function(){const t=[],n=Q(this,wt,"f");Q(this,Si,"f").forEach(o=>{const i=n.get(o);(i==null?void 0:i.status)==="enable"&&(i!=null&&i.middlewareObject)&&t.push(i.middlewareObject)}),Nt(this,ge,t,"f")};const k0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MDc6MjYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjliMGM0MzI2LWU4ZTQtNDlkNy04MmUzLTgxODkwYTE2ZmU1YSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjMzOGFhZDBmLWZkZjMtODE0MS1iMTZmLWNiZWIzNTQyYTJhMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUwODAxNzc1LWZlNGEtNDQyMy05NDQ3LThkYWRhNzZhYTllOSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTA4MDE3NzUtZmU0YS00NDIzLTk0NDctOGRhZGE3NmFhOWU5IiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjA3OjI2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWIwYzQzMjYtZThlNC00OWQ3LTgyZTMtODE4OTBhMTZmZTVhIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7W6XrzAAAGLklEQVRYhb2Xf2iUdRzHX/txtfXLplZ6Wblm6fzRmG6r7Uou1AxKRjQKYUqgaLBACFogppcK1h8aLRkMSYaJIA5hYMomZpskEfPOufCaDpZ6t7rbre263U3vzn3643meu+eu3XNzvz7w4bbdc/e89nl/Pu/v50HUCAQCx1tbW0uAx4CHgSwggxkKERkziUQif2mQ0WjU53a7vwSeBB4BTEDmTICmBBwYGDivVlDjlFAo9KvT6dwIPAHkANkq6MwDXr169bCISENDg9TX14s+BgcHf2hubi5mBmRPCXj06NFPREQ6OjoEkPLycrl06VIMMhKJeFwu1xdMs+wpAYuLi9eIiIyOjkpeXp4AAsj27dvF7/fHQIPB4C9dXV0fME2ypwQEXvX7/bdFRNauXRsDBMRkMsnhw4cTZB8YGGhsamp6hSmW3Qhw1Y0bN86LiNTW1iYAallWViZtbW162ftcLtdO/i/7tAAWtba2ficicvLkyTEBtdy6dasMDg7GQIeHh9s7OzvfBx5nkrIbAS7du3fvxyIiPT09hoBa1tXVJcv+fWNj4zLgUeAhJiC7EeDLwOsiMioisnDhwnFBrlixQi5evKiX/c6tW7c+R5E9lweU3QjwReDV/v7+bhGRqqqqcQFquWnTJvH5fHrZLzocjkoSZU9bTSPA54GV165daxYROXDgwAMBannw4MFk2RsaGhqWME7ZjQDNwIrTp09/JSLS0tIyIUBACgoK5MKFCzHIcDj85+3btz8FZpFGdiPAZ4DCmpqaTSIiPp9vwoBaVlVVidfr1ct+/sqVK+9iILsR4FzgJcASDoeHRUSKioomDQnI/v37E2T3+Xz1hw4dWjSW7EaAeUA+UNbX12cXEdmyZcuUAAJiNpvlzJkzetl73G53rVrN2EmUCjATuA9EgYjL5eoGKCkpGatNHijmz5/Pxo0b2blzJ2azOfZ3k8lUYDabv45Go/Y7d+6sIY0VZQOjGqDT6bxeWlrKqlWrJgRlsVhYv349FRUVWCwWcnJyEt4PBoOuoaEhu9frvdzR0fHTtm3buolvRpLqe3OBp4EllZWV74mIRKNRyc3NTSvf7Nmzpbq6Wk6cOCFut1uSY2RkJOB0Ou3Nzc3Ha2trPwPWAGXAEuBZFFPPAbKMevBhYA6wCKgIBoP9IiKrV682hLPZbP8DEpH7vb29N1paWn602WwHFyxYsAX4EKgE3gIsQBFQgOIeT6j3z0wFqEkc60OPx9Odn58/t6SkhPb29jFLbrVa2bNnDwBer7fv5s2bPQ6Ho7upqcnZ1tbmASJq3gPC6utdYESXYfWeo6mkBaUHRQ/odrv/yM/Pt5SWlqb8kAbncDh+W7lyZYN683u6DOvAwipsOOnniA4wZf9lqhdoVYzY7fbrQMpBsdlsWK1WRkZGAtXV1d8D/wA+wKNLr5o+YEC9ZggIAEHiFbyfDhCUCcoFngIWFxYWrtMaat68eQl9V15eHmu2+vr6OuAd4A2gGFgMLERp/mdQ+noWyuadi9Jr2aQ4k42GBPXDs1Ga97WhoaFbIiIbNmxIANTWq87Ozp9VuApgGfACihPkoRjwI+p3mlSgtA9ZRkYNYwwKJBr2rl27sFqthEKhwZqamqOAX5f/AsPE5btLvM/GJWO6yFb/82eBonPnztWJiJw9e1YAWb58eUzaI0eOfAO8CbwCPIfiZZN+eEoncSaKLPOApbt3794uIuL1ehOktdvtF4C3gRKURXcOSn9lTRRsvIAZKI4+l/gjQFREZMeOHSIiEggE+tetW/cRitkuRhmERxnnxjxZQFDWnzzURwCv1+vUHxHHjh37lri0C1Am9KGpgDMC1G8SQnxxCHs8Hqf2RldX10+bN28+i+JjwyT62KSaP13oAfWTHO7t7f0dIBQK/b1v375GlEnVjPYuyoQaHlNTDahVMALca29vdwBcvnz5+KlTp26OATft1UuODBS7yEOxj0K/329HOSWWopjxlE1tchhtM7FriPfgXSDDbrfXo0gbJr4QzIi0WiRPYBbKZJrUV23b0dYn7XSYcsBkS9EiO/k6lApq1cwiPjzaAM1Y9cYC1G6uAWrPCtrvMwoHqU02Q5caIEzj1KaS+D+vIjxtLug31gAAAABJRU5ErkJggg==",Vr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MzE6MjMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0MTBhYjUzLWM0ZjEtNDVhNS04MjhkLTIxOTczOWFjOTk3MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBkMDNmNjM5LTE5MzctY2Y0MC1hMTg0LTIyMjg0NzczNWNmYSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjgyYjQwZGRmLWE0ZGEtNDY3MC1iYzc2LTBhYjY3ZmI5M2I0ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODJiNDBkZGYtYTRkYS00NjcwLWJjNzYtMGFiNjdmYjkzYjRlIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjMxOjIzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjQxMGFiNTMtYzRmMS00NWE1LTgyOGQtMjE5NzM5YWM5OTcxIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz57vRudAAAEk0lEQVRYhe3ZW0jbVxzA8e8/MX+NYnG9uI4xE3bvoLt0FzradRfGBtsYo32YdAhb6WQyBqV7KOylpYjzZShDGfjmyxgbgjjwyRm16SYMhgiNKDhbL3VtNF4xJOnf3x7+59i/Wf4aTbInf3AwJMdzPjnnf/n9/jFEhGzDMIxMb3uAIsDs6ek5urS05Dtz5syE+uwekAQS6u89YD19gC0NIpJ1c8GZQHlXV9fJRCIxGo/HxxoaGj4CngWOAEGgEihXfT07MeQC3MB1dna+lkgkRkXF6urq3xcuXPgUOAE8DzwGPOiGLARwEy4ej4+JiITD4elr167NiIgsLi7eqq2trQPeBI4Bj7sh8w10xZmmeds0zdn+/v5/RERisdjUuXPnvgLeAl50Q+YTaAA+oKy7u/uE3laNAwSQ4uLiu6FQ6G4G5DG13YeAMjWWkU+gBygJhULHNe769etTTpwDGXUiz58//yXwujp5qoAHgBLAk0+gNxKJHEulUiMKN2ma5gwgPp/vjhOXjlxYWJisq6urBV5RW30IKAW8eQPGYrGjlmXdEBEZHBy8aZrmFCCmac729fVtAHt7e6MO5N2+vr47IiJLS0s3L126dBZ4Sh2LZUBRwVdwYGBgVuwOYh/zsoF0bnPBVzDTMRgOh6dFhROokSIi8/Pz0+pEeaPQx+DGWdzV1XVSX2LcgCIic3NzMzU1NV8D7wIvq9WrLNRZvOk62NHRccqJTAdGo9Hb1dXV3wAfYt9VjgAPFfI66EQWAxU9PT0fuwEvXrzYBJwF3gFeAAJAhfrfrO4k/7lxZxnr2JlJqry8POnWyePx6H4JR0vhktVkHGOXQI20SkpKLLcOhmGsA5YCaZiVLS5XoADi9XpdkznDMERhnE0fCgUHZhvOW+CO4/8A5hR7wFxjD5hr7AFzjZyBlmVlrOYdYaS1HUUuQA/gWV9fd51URDyqn1c1j6MVFGjoidfW1oq2ABrYj0V82OmVzwHNajVdB88C5wOKTdM87NaxsrKyQsFKHC2BnTDo+/TWt8Bd5INeVC44NDT0xXYZdXNz8w/AaeyS8yjwCPdzQu92ht2m/OUjIyOfS1pkAoqItLS0fA+8D7wKPA0cxs6qC1O4T0xMfKYnb21tnXEDNjc3z+nXbW1t3wFvYz9dCAL7KUThHovFPtGTNjU1jQFSX18/lg68cuXKLUAaGxs3vkB7e/u3wHHgCQpUdnpTqdQvesJgMDisUVevXh3Xry9fvnxTv66qqprQ/cfHx/vVNj/J/couv0DAv7q6+pMDeYPNSalkwkUikX7s4ukl4FHgAODPN1CXnPsWFxd/dCAjW+GGhoZCwAfYpeczwMPAPjVW3gv3IvXN98disZ8dyBGNCwQC4/r94eHhfuy6+JS6zATUCeJXY+W9cNfIUuDAwsLCr05kIBDYeBQ8Ojr6h8Lpx25BtbWlGpfv62BG5PLy8m+SFpOTk38C76mVe84NVyhgOvLgysrK7xoXjUb/Uqt2XG1rEDiYCbcd0MgwsWtk+J1EI03An0wmw5Zlefx+/2n1eRKIO5r+rWTTpFsZ/gWFrGMmeObuqwAAAABJRU5ErkJggg==",j0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAEvUlEQVRYhc2Y20/cVRDHP8v+uKzAWkpDCtZq8BYhJkq8PBoJxgj7I2m0ryaSyFN9IT74pI8+8WJiggRj/APApFkSTGRJ+qKGUiyxbGPEWsUSuVhYC12Wy8+HmeMeYPe3d3WSye/k/M7le+bMzJkZ+J9ToEJreGVYN+vihcytstjQocUlAw0WCSoIVCv3Ae8CXwIt+u8XHVeOG8qLqgAHqAFCQCNwGugCthBJGd7S/tM6LqTzHI5KuqzgaoAHgEvAtwrkG2AG8FzXvep5nue67lX9N6P/PR1/SefXlBtkFXKNDUA/RyX1D9uUbYzOb9D1ygbSQU7eDMxhSSsSiVz3AxiJRK57nuf19/fPad8coqONFCBJPyUOIKc1OvcbgiY9ICDT8+0DHge2gR0gBeyTtviM5HeKAGlrrfMZVwhdAVaAr4F3KNF4gkA9cBbowOc68+3LwDn1Mhdy4/OcYk54nPr6+m54nofruvPa9SFQ6wfQTweNgTwInAGuQWk6mEUvHwb+Au4Dexx7ffK9+0q+CHWIBIOZ9skHYKWfK9tQ8gZoLDjIyWCg3ORY+2T8aYOyg4EaRIFrkCs4QU1NTSvabC20zyIDzuyfkYzEahHX8jHwE/LwXwHeJ4P7KIVIu5ouxFDC+HgLAy4MfEF2v1UpgOezATSiNVf6EvAWsD01NXVtdnb2bk9Pz81sp/q3KIi8t83Ae4DX0tJy0z7t8PDwD4FAYIX/WILVwKMAzc3Nu/agoaGhzmg0ugcsV0hIvlSNoH8IuIiebHJycrls4sotwaxGYvueAPAjEg3jum79yMjIr5WUjFLOxMpBIopWoBN4GfhOJ+4NDg4ulVt6i4uLm7r+BvAscA4fCXrAAfJQJ5Fg8gPgMuCMjo62d3V1LW1sbKRKlpXSxMTEmjZ/5qQrOwHwUAGmkIjiHhJdfKrM/Pz8Y+3t7RvT09Ob5QAYi8X2tbmke2cEZwAaCdoAt5QvIzEbiUSitbe3tyoej++UCnBhYSGkzdu6d1aQxkgOkfwgieQMCeCu8iwSnpNKpcIdHR3BZDJ5UCy4SCSyvL6+/giiSou67wE+eYmhAKKkIaAJUdynkdflNcQF3dFTpooxjmg0aozDAz4DXkB8bxPy1OYM7QzIOuAU0AY8pQu9CrwJ3AK8UCj0RyHgZmZmli1w3wOvAM/oHo1kiZiygbSDh7PAE8DzQA/wBqKnnuM4a2NjY7dygbtw4cICRy31deBFJA09o7eWsU7kJ1KTLJmyRyOSn5zS70fAkwBtbW2/DwwMHHR3d9d3dnY2rK6u7o2Pj2/GYrH9eDzurK2tndM1vwI+QXT7T2BTD5skQz6SCyAcLRoZkGEFGQbeRqpbubK+BPA5MI14h00L3I6Cy2h4+eQbJsKuRa6iQcGFFfB5oBt4DpFsI+Ky7iDBxW3gBhBH/GtC+R7i1lKk3UxRAG2QpvxWr0AbtB3SA5jkx36djH/dVlDbyibN3M8GDvJPyI2PSulixm/u6kZ1OQCaJ/S+tndJX6tvsFBIxcCUdA3vW5ubxMrObc0hDMhd/Rqp5QQHxeW8dubnHGM7tzVv/IECMlxQ/bpcRfRMqaNRheNcUGG9XFWDACfzWs/6Fl3t/xtO//8gpbCORQAAAABJRU5ErkJggg==",_0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAER0lEQVRYhe2YT2hjRRjAf8lL22xsNsm6EWKrSKvuIkIh+O9QRFxEW18KUsoe7FHoRaWCN1FPetOrIHgVKS0q9P5OxaJbodkalgVrtVZjS7Ntd02z6abPw3yzmaT585q+elj2g2HmvZn35jffN/PNNwP35R6XgM/fuif4n+dO2klQvgsaZRc4NJJvoJbHdhrIAkJAN2ADHwFfAw9J3ZoB/b9I0AA6A0SBc0Aa2EVpSqddeZ+QdmfkO+u0gIPSQQR4HfhRQH4AHMDNZDJXXNd1M5nMFalzdB3wJTAOPAD0yEB9066G6wXepVZTd5MpTdporZ6jVqsatmMJoTR3HvgJQ1u2bS+3ArRte9l1XXdsbGyJo1pdBN6Wf3d3ChlAmSQO9LeC8fquQRpDWaerHWSjSr1iu4BkJyOsF9u2s67rkslkluTVxygltAVsJBZqdCngEj5osIlW+4EYytRNF04jeu3vulCT+7QkLH20dEOhumft97pQI4s3+iiRSPwtxVSbd39J8eEGvzFXc1NAs8KSFAZeBt4AHgNeBFDWObkEAne7HAK2gT2gCFQatdca1GbtBj4E3veFprVYVLXXcg4GqM6588BbAMlkcm1qamqzr6/v6ikBet5RgiizJoDPAXdgYGDZXHkzMzPrrk9CdRWngUeAsxxdCzVwpgZ/BigWiz1mo4mJif7jqMajeJrU5hywgGvAej6fvzA0NLThN1Eul9uT4g5VTbYFNKUIfAbsZ7PZvuHh4Wt+As7Ozu5IcY2j219TQB0NV4A7qODgO4CFhYWLg4ODOb8AHccpG4A68m6pRQ1YAQ6A28A+8BXwBcDq6upTqVTquh+AuVyuW4q/opRRaQdZD1gCbgE3ge+BT4HdfD7/ZDwe/z2bzRY6hRsfH1/e3Nx8FDX/sgbgoZfvg6jo4ixqW7oIPA+8CrwHrAJuJBLJd+JaHMf5k6qmPgGeQe1SCenXk0/U21xcIC8AzwGvAJPAEuAmEon1xcXFba9w8/Pz5oqdB14CnpY+oij35km0qwmjwqAU8ISM9hIwBeQA17KsG9PT07+1gxsZGdmgdqW+BjwLDAAPoo4ALU+W9arVwWoIpXp9kouKZpPAO8AwQCwW+2d0dLQ0OTkZSafT0UKhUJ6bm9t2HKeysrIS3tra0g7+KvABUJC0g5rrJdRcbLpImtleRzYashc1P2OSXwbebDVykX3gW+Ab1AHqhuQ3pe6AJlFMO0CoPROHDcio5I8DL1A9C8dQbmod+APYAK4DvwjQnsDdErgyVTfTEaCG1GFYGHXG7TVSo2OkdvhlAflXoHSuNdfStFqaRhEi2kfdprrj6M5LAt0I8EDaaMdflPal48CB95hMr3Bt8h4jD0kyL5E0pN6dysZzW7N2AqjbmhdIZjJvufTOpE19x3g+9s1XJ/ck5tVbfdhu+rxDfLiSO+lFToCjZwrXyH2/0Lwv95z8B1jAqXmDnj4YAAAAAElFTkSuQmCC",V0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAIiklEQVRYhe2YW2yUxxmGn7W96zXGNnZsr2FJHQyYBHNIU1ttAqVUVjlJUAtxQyUXhKgQktUDdSUkuEDtBVJ9UQXRC0RJRblrq/SCIARpFImWQ8VBIZQinJpQYozNyWaxiw/rfXsx3+z+6xNOe9tPGv2nOTzzffPPvDMhSXwJC1nKAXIDV/9ellLAqF1T9o5A2Ry7J5A/Fbh3mUMh8qYJ5kHCQATID6QIkBcAHAVGgKFAStq33EB53/ao5Rm064i9g0CmqcDyrNICYCZQBJTYdaa9j1jelDUwCAwAz4F+ex61DhZauXzr1CDwDHhq1wFg2Do1KWAo0NsCAyoDKoGYXcuBWdZY1PKnzAsDQB/wBOg1yKTVN8vqmoHz6nOgC7gHdFrbCasrNRFgyMCj5qVXgDlANfAaMA/4ir2rMI+MtSHgEdAN9BjsiNVZYR0sNq8+AtqB69Z2MuDBcYA+pAXW0yoDWgTUWXrd8k1l+cBcSxjIIBlPB63G8uUB/8Z57znwAkgGAX1YC4BSK7QIWA7UWwoDJJNJzp49y4ULF2hvb6e7u5tEIkFhYSGVlZXMmzePhoYGNmzYQElJCVZv2tPt7e3s2bOHvr4+9u3bx/r16+PWjg/zQ9x4BEk+5UkqklQt6ZuSdkn6jaRbMhsYGFBbW5uWLVvmp5MpU3V1tVpbW9XV1aWgbdy4MZ2npqbGvx6W9DtJ35e0RFJREDBX0gxJcUnfkPQDScck3fGlz549q7q6ummBjU2xWEzvvfdeGvCtt95Kf6uoqAiyfyBpt6SvSZrlAUOSIpLKJS2X9D1Jv5Z025d69913FQqFJmy8rKxMS5YsUUNDg5YvX67Zs2dPCrpjxw6NjIxoxYoV6XdVVVVBwI8l/UTS1yWVesBcC+18SRsk/ULS33yJtra2CRtramrSiRMn1NXVpWQyKUlKpVJ6+vSpTp48qZ07dyo/P39cua1bt6q+vn4ywL9IapX0tqQyDxiRFDPq3ZL+JCklSadOnRrXwMKFC3X69GlNx65du6aVK1eOqyMYjTGAf50IsNC8t1FSm6TPJOn+/fuKxWJZFb/zzjvjBvx0bO/evQqHwxNG4mUe9MtYMZk5bwHA4cOH6enpSc9BixYt4uTJk5SVlflXfcBN4DFuapoHLPQfz58/z9WrVwmFQsTjceLxOHfv3uUlNlZcpFeMEtzsXg2QSCQ4duxYulQoFOLQoUNBuE7gvAE+x82b/VZHyblz52hsbCSZTL4MCGWrqUECq0gQsBi3ts4B+PDDD3n48GG61OrVq1mzZo1/fGZw54HbVmGV1bMAWPbRRx9NC24CwD7cajLiAXNwIS7ELW3lAGfOnMmqZPv27cHHvwM3gH8AnwH/wnn0C+AuwLZt25g/f/5L4cLhMNu2bfOPnbh1+xkZ9UMebvmKGmQEoLOzM11JQUEBK1eu9I/JAFAPTqnk4hTNY9xS1V5TU1N7+fJlOjo6SKXS+jPLJFFUVMTixYsxmJtW/inOi2nAXDI/C0BWeMvKyojFYv6xz1LCKhnCRSEBPMCFfBaQKi0tfb2+vn5qFzp7AnwCXAM+t45mAUJGfgMwOpoWtIRCWZ/89BB8TuJ+lG5cNEatkXYgjtN+BYG2ktaxBE4U3AP+iRsud3EeHCTwk6Ss0IhvtaKiIk3Q19dHb28vhYWF4H6mYtxwiBrQIE4aPTHgIVzoO3E/TzlOV4YD3/stj9eMPj2xzg4HAYMSPQnkxePxNGB/fz+XLl1iy5Yt4HTeq+aZTtyA9h18Yb33G6aRQBqyDiUNLihmH1q54LAZ9ZHKISPRn1loaGxsJGjHjx8PPi6xtAgnNufgVHcRmf1J2DpTiJsjvYout3c5gQ49Ns89s3fpOdB70I+Hx7iBXrV27VqKi4tJJBKAm3auXLmCDfpy4G3rZSHur/aSPg83BCpx24MFuNUlbnkHcGMubEDdxpG0lBn8AcBBsgfsVysqKti6dStHjhwBYGRkhJaWFs6dO0ckEgGYj9v0xIA71rkha7jUgBYCb5hHGRoaIj8/f4Z5s8jafUpmN/diLBwAkmZKWiipSdKvJN2VpI6ODhUVFWUt7Js2bdLAwMBYLdAt6VNJlyV9IumLsRkOHjyo2tparVixQrdvp2Xmn00YrJI0R05VBRV+GjAiqcoUxA8lnfI1HD16dJz6WLVqla5fvz4tFdPZ2anm5uas8s3Nzf7zp5J+LmmNpFcl5U8GmCupWFKtpO9K+qWkG76W3bt3j4OMRqNqaWnRhQsXNDQ0lAWVTCZ169YtHThwQFVVVePKtrS0+Kw3pgsYso+Vkuol7ZD0W0ldvsHW1tZJZXxtba0aGxvV1NSkdevWaenSpYpGoxPmXb9+vXp6ejzgx5J+ZiGeLSk8GaD34ky5Hd23JP1I0h8kPQmGu7y8/L/aNEUiEe3fv1/Dw8Pp6Es6KqlZ0puSXpHbVU4KiPVglqQFkr4j6aeSfi/pvq/13r172rVrlyorK6cFFo1GtXnzZl25ciU4Ch5J+qOkH0v6tqTXzDk5EwGGlNFjOWQOd8px4vUN4E3cpn2pz/jgwQPef/99Ll68yJ07d+jt7WVwcJBIJEJJSQlz586loaGBTZs2UVdXF5w0OoDLwFWcbPsct6r04+bRLHEYCoWyAD1kBDfHleHmsxrccccS3NFHNV/eenBy6iZwCycMOnHz5wBuDh2nyyY6H0zhFmoF7vtxk+l9q3ieQfrDo8msF7cy3cN56g7ZWnKcep7IxnrQmz+wHKu2K3EKJWbPpWSUTQ4ZtRJc23sC6ZGB9ZM52JwcboIQjzUvZvNxYfeHlyVkZFcBbux6wKA6ShjoM5yM8uH0Xpuy8ekAQuZc2W8P8nEei9p9mMmPgAfJHO0O27e0lHppw9MEDJo//A4eoE91iB48SJ80lFMB/t/+V/sPGZfTmtMFR4EAAAAASUVORK5CYII=";var Ei=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ie=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Qe,Ci,lo,Nn,di,Jt,Br,Fr,zt,ms,fs;class B0{constructor(t,n){Qe.add(this),Ci.set(this,void 0),lo.set(this,void 0),Nn.set(this,null),di.set(this,null),Jt.set(this,{auto:k0,"drag-default":j0,"drag-active":_0,"rotate-0":Vr,rotate:V0}),Ei(this,lo,t,"f"),Ei(this,Ci,n.eventHub,"f"),Ie(this,Qe,"m",Br).call(this),Ie(this,Qe,"m",Fr).call(this)}}Ci=new WeakMap,lo=new WeakMap,Nn=new WeakMap,di=new WeakMap,Jt=new WeakMap,Qe=new WeakSet,Br=function(){const t=Ie(this,Ci,"f");Ie(this,Qe,"m",zt).call(this,"default"),t.on("cursor",n=>{var o;n.type==="over-element"||!n.type?Ie(this,Qe,"m",zt).call(this,"auto"):n.type==="resize-rotate"?Ie(this,Qe,"m",zt).call(this,"rotate"):typeof n.type=="string"&&(!((o=n.type)===null||o===void 0)&&o.startsWith("resize-"))?Ie(this,Qe,"m",ms).call(this,n):n.type==="drag-default"?Ie(this,Qe,"m",zt).call(this,"drag-default"):n.type==="drag-active"?Ie(this,Qe,"m",zt).call(this,"drag-active"):Ie(this,Qe,"m",zt).call(this,"auto")})},Fr=function(){Ti(Vr).then(t=>{Ei(this,di,t,"f")}).catch(t=>{console.error(t)})},zt=function(t){if(Ie(this,Nn,"f")===t)return;Ei(this,Nn,t,"f");const n=Ie(this,Jt,"f")[Ie(this,Nn,"f")]||Ie(this,Jt,"f").auto;let o=0,i=0;(t.startsWith("rotate-")&&Ie(this,Jt,"f")[Ie(this,Nn,"f")]||t==="rotate")&&(o=10,i=10),t==="default"?Ie(this,lo,"f").style.cursor="default":Ie(this,lo,"f").style.cursor=`image-set(url(${n})2x) ${o} ${i}, auto`},ms=function(t){var n;let o=0;t.type==="resize-top"?o+=0:t.type==="resize-top-right"?o+=45:t.type==="resize-right"?o+=90:t.type==="resize-bottom-right"?o+=135:t.type==="resize-bottom"?o+=180:t.type==="resize-bottom-left"?o+=225:t.type==="resize-left"?o+=270:t.type==="resize-top-left"&&(o+=315),o+=rt(((n=t==null?void 0:t.element)===null||n===void 0?void 0:n.angle)||0),Array.isArray(t.groupQueue)&&t.groupQueue.length>0&&t.groupQueue.forEach(a=>{o+=rt(a.angle||0)}),o=rt(o);const i=Ie(this,Qe,"m",fs).call(this,o);Ie(this,Qe,"m",zt).call(this,i)},fs=function(t){const n=`rotate-${t}`;if(!Ie(this,Jt,"f")[n]){const o=Ie(this,di,"f");if(o){const i=document.createElement("canvas"),a=o.width,s=o.height,c={x:a/2,y:s/2};i.width=a,i.height=s;const d=i.getContext("2d"),l=St(t);d.translate(c.x,c.y),d.rotate(l),d.translate(-c.x,-c.y),d.drawImage(o,0,0,a,s),d.translate(c.x,c.y),d.rotate(-l),d.translate(-c.x,-c.y);const h=i.toDataURL("image/png");Ie(this,Jt,"f")[n]=h}}return n};const Aa="change",$e="SELECT",Ee=Symbol(`${$e}_actionType`),Wt=Symbol(`${$e}_resizeType`),xo=Symbol(`${$e}_areaStart`),Mo=Symbol(`${$e}_areaEnd`),gt=Symbol(`${$e}_hoverElement`),Fn=Symbol(`${$e}_hoverElementVertexes`),Dt=Symbol(`${$e}_selectedElementList`),F0=Symbol(`${$e}_selectedElementListVertexes`),un=Symbol(`${$e}_selectedElementController`),hn=Symbol(`${$e}_selectedElementPosition`),Ue=Symbol(`${$e}_groupQueue`),Yi=Symbol(`${$e}_groupQueueVertexesList`),zo=Symbol(`${$e}_isMoving`),gs=Symbol(`${$e}_enableSelectInGroup`),Io=Symbol(`${$e}_enableSnapToGrid`),Wr=2,W0=4,Hr=1,Gr=10,H0="#1973ba",G0="#1976d21c",Y0="#5b5959b5",$0="#f7276e",X0={activeColor:H0,activeAreaColor:G0,lockedColor:Y0,referenceColor:$0},ui="@middleware/select",xi="@middleware/select-clear",ca="@middleware/select-in-group",da="@middleware/snap-to-grid";function Lt(e,t,n){const{borderColor:o,borderWidth:i,background:a,lineDash:s}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.fillStyle=a,e.setLineDash(s),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.lineTo(t[0].x,t[0].y),e.closePath(),e.stroke(),e.fill()}function ua(e,t,n,o){const{borderColor:i,borderWidth:a,lineDash:s}=o;e.setLineDash([]),e.lineWidth=a,e.strokeStyle=i,e.setLineDash(s),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath(),e.stroke()}function U0(e,t,n){const{size:o,borderColor:i,borderWidth:a,background:s}=n,c=t,d=o/2,l=d,h=d;if(l>=0&&h>=0){if(typeof a=="number"&&a>0){const u=a/2+l,m=a/2+h;e.beginPath(),e.strokeStyle=i,e.lineWidth=a,e.circle(c.x,c.y,u,m,0,0,2*Math.PI),e.closePath(),e.stroke()}e.beginPath(),e.fillStyle=s,e.circle(c.x,c.y,l,h,0,0,2*Math.PI),e.closePath(),e.fill()}}function vt(e,t,n){const{borderColor:o,borderWidth:i,lineDash:a}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.setLineDash(a),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[2].x,t[2].y),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(t[1].x,t[1].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function vs(e,t,n){const{size:o,borderColor:i,borderWidth:a,lineDash:s}=n,c=t.x-o/2,d=t.x+o/2,l=t.y-o/2,h=t.y+o/2;vt(e,[{x:c,y:l},{x:d,y:l},{x:d,y:h},{x:c,y:h}],{borderColor:i,borderWidth:a,lineDash:s})}function ps(e,t,n){if(!t)return;const{style:o}=n,{activeColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Lt(e,Be(t,n),a)}function ys(e,t,n){if(!t)return;const{style:o}=n,{lockedColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Lt(e,Be(t,n),a);const{controller:s}=n;if(s){const{topLeft:c,topRight:d,bottomLeft:l,bottomRight:h,topMiddle:u,bottomMiddle:m,leftMiddle:f,rightMiddle:v}=s,g=Object.assign(Object.assign({},a),{borderWidth:1,background:i});vt(e,Be(u.vertexes,n),g),vt(e,Be(m.vertexes,n),g),vt(e,Be(f.vertexes,n),g),vt(e,Be(v.vertexes,n),g),vt(e,Be(c.vertexes,n),g),vt(e,Be(d.vertexes,n),g),vt(e,Be(l.vertexes,n),g),vt(e,Be(h.vertexes,n),g)}}function ws(e,t,n){if(!t)return;const{hideControllers:o,style:i}=n,{activeColor:a}=i,{elementWrapper:s,topLeft:c,topRight:d,bottomLeft:l,bottomRight:h,top:u,rotate:m}=t,f={borderColor:a,borderWidth:Wr,background:"transparent",lineDash:[]},v=Object.assign(Object.assign({},f),{borderWidth:W0,background:"#FFFFFF"});Lt(e,Be(s,n),f),o||(ua(e,ve(u.center,n),ve(m.center,n),Object.assign(Object.assign({},v),{borderWidth:2})),Lt(e,Be(c.vertexes,n),v),Lt(e,Be(d.vertexes,n),v),Lt(e,Be(l.vertexes,n),v),Lt(e,Be(h.vertexes,n),v),U0(e,ve(m.center,n),Object.assign(Object.assign({},v),{size:Gr,borderWidth:2})))}function Z0(e,t){const{start:n,end:o,style:i}=t,{activeColor:a,activeAreaColor:s}=i;e.setLineDash([]),e.lineWidth=Hr,e.strokeStyle=a,e.fillStyle=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,n.y),e.lineTo(o.x,o.y),e.lineTo(n.x,o.y),e.closePath(),e.stroke(),e.fill()}function Q0(e,t){const{areaSize:n,style:o}=t,{activeColor:i,activeAreaColor:a}=o,{x:s,y:c,w:d,h:l}=n;e.setLineDash([]),e.lineWidth=Hr,e.strokeStyle=i,e.fillStyle=a,e.beginPath(),e.moveTo(s,c),e.lineTo(s+d,c),e.lineTo(s+d,c+l),e.lineTo(s,c+l),e.closePath(),e.stroke(),e.fill()}function J0(e,t,n){const{style:o}=n,{activeColor:i}=o;for(let a=0;a<t.length;a++){const s=t[a],c={borderColor:i,borderWidth:Wr,background:"transparent",lineDash:[4,4]};Lt(e,Be(s,n),c)}}function bs(e,t){const{xLines:n,yLines:o,style:i}=t,{referenceColor:a}=i,s={borderColor:a,borderWidth:1,lineDash:[]},c=Object.assign(Object.assign({},s),{size:6});n&&n.forEach(d=>{d.forEach((l,h)=>{vs(e,l,c),d[h+1]&&ua(e,d[h],d[h+1],s)})}),o&&o.forEach(d=>{d.forEach((l,h)=>{vs(e,l,c),d[h+1]&&ua(e,d[h],d[h+1],s)})})}function he(e){return e*Math.PI/180}function Ao(e,t){return Math.sqrt(e*e+t*t)}function ie(e,t){return t>0?Math.abs(e):0-Math.abs(e)}function ha(e,t){const{ctx:n,viewScaleInfo:o,vertexes:i}=t,a=ve(i[0],{viewScaleInfo:o}),s=ve(i[1],{viewScaleInfo:o}),c=ve(i[2],{viewScaleInfo:o}),d=ve(i[3],{viewScaleInfo:o});return n.beginPath(),n.moveTo(a.x,a.y),n.lineTo(s.x,s.y),n.lineTo(c.x,c.y),n.lineTo(d.x,d.y),n.lineTo(a.x,a.y),n.closePath(),!!n.isPointInPath(e.x,e.y)}function Ss(e,t){const{ctx:n,viewScaleInfo:o,viewSizeInfo:i,groupQueue:a}=t;if(!a||!((a==null?void 0:a.length)>0))return!1;const s=za(a),c=s[s.length-1];return c?ha(e,{ctx:n,vertexes:c,viewScaleInfo:o,viewSizeInfo:i}):!1}function Wn(e,t){var n,o,i;const a={type:null,elements:[],elementVertexesList:[],groupQueue:[],groupQueueVertexesList:[]},{ctx:s,data:c,calculator:d,selectedElements:l,viewScaleInfo:h,viewSizeInfo:u,areaSize:m,groupQueue:f,selectedElementController:v}=t;if(v){const{left:g,right:p,top:y,bottom:E,topLeft:S,topRight:w,bottomLeft:A,bottomRight:b,rotate:z}=v,O=[g,p,y,E,S,w,A,b,z];for(let L=0;L<O.length;L++){const M=O[L];if(ha(e,{ctx:s,vertexes:M.vertexes,viewSizeInfo:u,viewScaleInfo:h})){a.type=`resize-${M.type}`,l&&(l==null?void 0:l.length)>0&&(a.groupQueue=f||[],a.elements=[l[0]]);break}}}if(f&&Array.isArray(f)&&f.length>0){const g=f[f.length-1];if(!((n=g==null?void 0:g.detail)===null||n===void 0)&&n.children&&Array.isArray((o=g==null?void 0:g.detail)===null||o===void 0?void 0:o.children))for(let p=g.detail.children.length-1;p>=0;p--){const y=g.detail.children[p],E=uo(y,{groupQueue:f});if(E&&ha(e,{ctx:s,vertexes:E,viewScaleInfo:h,viewSizeInfo:u}))return a.type||(a.type="over-element"),a.groupQueue=f,a.elements=[y],a}return a}if(a.type!==null)return a;if(m&&Array.isArray(l)&&(l==null?void 0:l.length)>1){const{x:g,y:p,w:y,h:E}=m;if(e.x>=g&&e.x<=g+y&&e.y>=p&&e.y<=p+E)return a.type="list-area",a.elements=l,a}if(c){const{index:g,element:p}=d.getPointElement(e,{data:c,viewScaleInfo:h,viewSizeInfo:u});if(g>=0&&p&&((i=p==null?void 0:p.operations)===null||i===void 0?void 0:i.invisible)!==!0)return a.elements=[p],a.type="over-element",a}return a}function K0(e,t){var n,o,i,a,s,c,d,l,h;let{x:u,y:m,w:f,h:v,angle:g=0}=e;const p=ot({x:u,y:m,w:f,h:v,angle:g});g=rt(g);const y=St(g),E=!!(!((n=e==null?void 0:e.operations)===null||n===void 0)&&n.limitRatio),{start:S,end:w,resizeType:A,scale:b}=t;let z=Object.assign({},S),O=Object.assign({},w),L={x:z.x,y:p.y},M={x:O.x,y:p.y},I=Object.assign({},L),P=Object.assign({},M),k={x:p.x,y:z.y},W={x:p.x,y:O.y},F=Object.assign({},k),V=Object.assign({},W),j=(P.x-I.x)/b,_=(P.y-I.y)/b,x=Ao(j,_),Y=(V.x-F.x)/b,$=(V.y-F.y)/b,R=Ao(Y,$);(g>0||g<0)&&(z=ze(p,S,0-y),O=ze(p,w,0-y),L={x:z.x,y:p.y},M={x:O.x,y:p.y},I=ze(p,L,y),P=ze(p,M,y),k={x:p.x,y:z.y},W={x:p.x,y:O.y},F=ze(p,k,y),V=ze(p,W,y),j=(P.x-I.x)/b,_=(P.y-I.y)/b,x=Ao(j,_),x=ie(x,_),Y=(V.x-F.x)/b,$=(V.y-F.y)/b,R=Ao(Y,$),R=ie(R,$));let H=(w.x-S.x)/b,U=(w.y-S.y)/b;if(E===!0){if(["resize-top","resize-bottom","resize-left","resize-right"].includes(A)){const C=Math.max(Math.abs(H),Math.abs(U));H=(H>=0?1:-1)*C,U=(U>=0?1:-1)*C/e.w*e.h;const D=Math.max(Math.abs(Y),Math.abs($));Y=(Y>=0?1:-1)*D,$=($>=0?1:-1)*D/e.w*e.h;const N=Math.max(Math.abs(j),Math.abs(_));j=(j>=0?1:-1)*N,_=(_>=0?1:-1)*N/e.w*e.h}else if(["resize-top-left","resize-top-right","resize-bottom-left","resize-bottom-right"].includes(A)){{const C=Math.abs(H);H=(H>=0?1:-1)*C;const D=C/e.w*e.h;A==="resize-top-left"||A==="resize-bottom-right"?U=H>0?D:-D:(A==="resize-top-right"||A==="resize-bottom-left")&&(U=H>0?-D:D)}x=Math.abs(x),R=x/e.w*e.h}}switch(A){case"resize-top":{if(g===0)v-U>0&&(m+=U,v-=U,((o=e.operations)===null||o===void 0?void 0:o.limitRatio)===!0&&(u+=U/e.h*e.w/2,f-=U/e.h*e.w));else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){R=0-ie(R,$);const N=he(g),B=R/2;C=C+B*Math.sin(N),D=D-B*Math.cos(N)}else if(g<180){R=ie(R,Y);const N=he(g-90),B=R/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N)}else if(g<270){R=ie(R,$);const N=he(g-180),B=R/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N)}else if(g<360){R=0-ie(R,Y);const N=he(g-270),B=R/2;C=C-B*Math.cos(N),D=D-B*Math.sin(N)}v+R>0&&(((i=e.operations)===null||i===void 0?void 0:i.limitRatio)===!0&&(f=f+R/e.h*e.w),v=v+R,u=C-f/2,m=D-v/2)}break}case"resize-bottom":{if(g===0)e.h+U>0&&(v+=U,((a=e.operations)===null||a===void 0?void 0:a.limitRatio)===!0&&(u-=U/e.h*e.w/2,f+=U/e.h*e.w));else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){R=ie(R,$);const N=he(g),B=R/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N)}else if(g<180){R=0-ie(R,Y);const N=he(g-90),B=R/2;C=C-B*Math.cos(N),D=D-B*Math.sin(N)}else if(g<270){R=ie(R,Y);const N=he(g-180),B=R/2;C=C+B*Math.sin(N),D=D-B*Math.cos(N)}else if(g<360){R=ie(R,Y);const N=he(g-270),B=R/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N)}v+R>0&&(((s=e.operations)===null||s===void 0?void 0:s.limitRatio)===!0&&(f=f+R/e.h*e.w),v=v+R,u=C-f/2,m=D-v/2)}break}case"resize-left":{if(g===0)e.w-H>0&&(u+=H,f-=H,((c=e.operations)===null||c===void 0?void 0:c.limitRatio)===!0&&(v-=H/e.w*e.h,m+=H/e.w*e.h/2));else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){x=0-ie(x,j);const N=he(g),B=x/2;C=C-B*Math.cos(N),D=D-B*Math.sin(N)}else if(g<180){x=ie(x,j);const N=he(g-90),B=x/2;C=C+B*Math.sin(N),D=D-B*Math.cos(N)}else if(g<270){x=ie(x,_);const N=he(g-180),B=x/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N)}else if(g<360){x=ie(x,_);const N=he(g-270),B=x/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N)}f+x>0&&(((d=e.operations)===null||d===void 0?void 0:d.limitRatio)===!0&&(v=v+x/e.w*e.h),f=f+x,u=C-f/2,m=D-v/2)}break}case"resize-right":{if(g===0)e.w+H>0&&(f+=H,((l=e.operations)===null||l===void 0?void 0:l.limitRatio)===!0&&(m-=H*e.h/e.w/2,v+=H*e.h/e.w));else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){x=ie(x,_);const N=he(g),B=x/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N)}else if(g<180){x=ie(x,U);const N=he(g-90),B=x/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N)}else if(g<270){x=ie(x,U);const N=he(g-180),B=x/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N),x=0-x}else if(g<360){x=ie(x,H);const N=he(g-270),B=x/2;C=C+B*Math.sin(N),D=D-B*Math.cos(N)}f+x>0&&(((h=e.operations)===null||h===void 0?void 0:h.limitRatio)===!0&&(v=v+x/e.w*e.h),f=f+x,u=C-f/2,m=D-v/2)}break}case"resize-top-left":{if(g===0)f-H>0&&(u+=H,f-=H),v-U>0&&(m+=U,v-=U);else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){R=0-ie(R,$),x=0-ie(x,E?0-R:j);const N=R/2;C=C+N*Math.sin(y),D=D-N*Math.cos(y);const B=x/2;C=C-B*Math.cos(y),D=D-B*Math.sin(y)}else if(g<180){R=ie(R,Y),x=ie(x,E?R:j);const N=he(g-90),B=R/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N);const Z=x/2;C=C+Z*Math.sin(N),D=D-Z*Math.cos(N)}else if(g<270){R=ie(R,$),x=ie(x,E?R:_);const N=he(g-180),B=R/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N);const Z=x/2;C=C+Z*Math.cos(N),D=D+Z*Math.sin(N)}else if(g<360){R=0-ie(R,Y),x=ie(x,E?R:_);const N=he(g-270),B=R/2;C=C-B*Math.cos(N),D=D-B*Math.sin(N);const Z=x/2;C=C-Z*Math.sin(N),D=D+Z*Math.cos(N)}v+R>0&&(v=v+R),f+x>0&&(f=f+x),u=C-f/2,m=D-v/2}break}case"resize-top-right":{if(g===0)f+H>0&&(f+=H),v-U>0&&(m+=U,v-=U);else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){R=0-ie(R,$),x=ie(x,E?R:_);const N=he(g),B=R/2;C=C+B*Math.sin(N),D=D-B*Math.cos(N);const Z=x/2;C=C+Z*Math.cos(N),D=D+Z*Math.sin(N)}else if(g<180){R=ie(R,Y),x=ie(x,E?R:_);const N=he(g-90),B=R/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N);const Z=x/2;C=C-Z*Math.sin(N),D=D+Z*Math.cos(N)}else if(g<270){const N=he(g-180);R=ie(R,$),x=ie(x,E?R:0-j);const B=R/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N);const Z=x/2;C=C-Z*Math.cos(N),D=D-Z*Math.sin(N)}else if(g<360){R=0-ie(R,Y),x=ie(x,E?R:j);const N=he(g-270),B=R/2;C=C-B*Math.cos(N),D=D-B*Math.sin(N);const Z=x/2;C=C+Z*Math.sin(N),D=D-Z*Math.cos(N)}v+R>0&&(v=v+R),f+x>0&&(f=f+x),u=C-f/2,m=D-v/2}break}case"resize-bottom-left":{if(g===0)e.h+U>0&&(v+=U),e.w-H>0&&(u+=H,f-=H);else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){R=ie(R,$),x=0-ie(x,E?0-R:j);const N=he(g),B=R/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N);const Z=x/2;C=C-Z*Math.cos(N),D=D-Z*Math.sin(N)}else if(g<180){R=0-ie(R,Y),x=ie(x,E?R:j);const N=he(g-90),B=R/2;C=C-B*Math.cos(N),D=D-B*Math.sin(N);const Z=x/2;C=C+Z*Math.sin(N),D=D-Z*Math.cos(N)}else if(g<270){R=ie(R,Y),x=ie(x,E?R:_);const N=he(g-180),B=R/2;C=C+B*Math.sin(N),D=D-B*Math.cos(N);const Z=x/2;C=C+Z*Math.cos(N),D=D+Z*Math.sin(N)}else if(g<360){R=ie(R,Y),x=ie(x,E?R:_);const N=he(g-270),B=R/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N);const Z=x/2;C=C-Z*Math.sin(N),D=D+Z*Math.cos(N)}v+R>0&&(v=v+R),f+x>0&&(f=f+x),u=C-f/2,m=D-v/2}break}case"resize-bottom-right":{if(g===0)e.h+U>0&&(v+=U),e.w+H>0&&(f+=H);else if(g>0||g<0){let C=p.x,D=p.y;if(g<90){R=ie(R,$),x=ie(x,E?R:_);const N=he(g),B=R/2;C=C-B*Math.sin(N),D=D+B*Math.cos(N);const Z=x/2;C=C+Z*Math.cos(N),D=D+Z*Math.sin(N)}else if(g<180){R=0-ie(R,Y),x=ie(x,E?R:U);const N=he(g-90),B=R/2;C=C-B*Math.cos(N),D=D-B*Math.sin(N);const Z=x/2;C=C-Z*Math.sin(N),D=D+Z*Math.cos(N)}else if(g<270){R=ie(R,Y),x=ie(x,E?R:0-_);const N=he(g-180),B=R/2;C=C+B*Math.sin(N),D=D-B*Math.cos(N);const Z=x/2;C=C-Z*Math.cos(N),D=D-Z*Math.sin(N)}else if(g<360){R=ie(R,Y),x=ie(x,E?R:j);const N=he(g-270),B=R/2;C=C+B*Math.cos(N),D=D+B*Math.sin(N);const Z=x/2;C=C+Z*Math.sin(N),D=D-Z*Math.cos(N)}v+R>0&&(v=v+R),f+x>0&&(f=f+x),u=C-f/2,m=D-v/2}break}}return{x:u,y:m,w:f,h:v,angle:e.angle}}function q0(e,t){const{x:n,y:o,w:i,h:a,angle:s=0}=e,{center:c,start:d,end:l,viewScaleInfo:h}=t,u=ve(c,{viewScaleInfo:h}),m=rt(s),f=Bc(u,d,l),v=m+Vc(f);return{x:n,y:o,w:i,h:a,angle:v}}function ed(e,t){var n;const o=[],i=[],a=[],{viewScaleInfo:s,viewSizeInfo:c,start:d,end:l}=t;if(!(Array.isArray(e.elements)&&d&&l))return{indexes:o,uuids:i,elements:a};const h=Math.min(d.x,l.x),u=Math.max(d.x,l.x),m=Math.min(d.y,l.y),f=Math.max(d.y,l.y);for(let v=0;v<e.elements.length;v++){const g=e.elements[v];if(((n=g==null?void 0:g.operations)===null||n===void 0?void 0:n.lock)===!0)continue;const p=Ge(g,{viewScaleInfo:s,viewSizeInfo:c}),y=ot(p);if(y.x>=h&&y.x<=u&&y.y>=m&&y.y<=f&&(o.push(v),i.push(g.uuid),a.push(g),p.angle&&(p.angle>0||p.angle<0))){const E=_n(p);if(E.length===4){const S=[E[0].x,E[1].x,E[2].x,E[3].x],w=[E[0].y,E[1].y,E[2].y,E[3].y];p.x=Math.min(...S),p.y=Math.min(...w),p.w=Math.abs(Math.max(...S)-Math.min(...S)),p.h=Math.abs(Math.max(...w)-Math.min(...w))}}}return{indexes:o,uuids:i,elements:a}}function $i(e,t){var n;if(!Array.isArray(e))return null;const o={x:0,y:0,w:0,h:0},{viewScaleInfo:i,viewSizeInfo:a}=t;let s=null;for(let c=0;c<e.length;c++){const d=e[c];if(!((n=d==null?void 0:d.operations)===null||n===void 0)&&n.invisible)continue;const l=Ge(d,{viewScaleInfo:i,viewSizeInfo:a});if(l.angle&&(l.angle>0||l.angle<0)){const h=_n(l);if(h.length===4){const u=[h[0].x,h[1].x,h[2].x,h[3].x],m=[h[0].y,h[1].y,h[2].y,h[3].y];l.x=Math.min(...u),l.y=Math.min(...m),l.w=Math.abs(Math.max(...u)-Math.min(...u)),l.h=Math.abs(Math.max(...m)-Math.min(...m))}}if(s){const h=Math.min(l.x,o.x),u=Math.min(l.y,o.y),m=Math.max(l.x+l.w,o.x+o.w),f=Math.max(l.y+l.h,o.y+o.h);o.x=h,o.y=u,o.w=Math.abs(m-h),o.h=Math.abs(f-u)}else o.x=l.x,o.y=l.y,o.w=l.w,o.h=l.h;s=l}return o}function td(e,t){var n;if((t==null?void 0:t.type)==="group"&&Array.isArray((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.children))for(let o=0;o<t.detail.children.length;o++){const i=t.detail.children[o];if(e.uuid===i.uuid)return!0}return!1}function nd(e,t,n){let o=t.x-e.x,i=t.y-e.y;const a=[];if(n.forEach(s=>{const{x:c,y:d,w:l,h,angle:u=0}=s;a.push({x:c,y:d,w:l,h,angle:0-u})}),(n==null?void 0:n.length)>0){const s=wi(e,a),c=wi(t,a);o=c.x-s.x,i=c.y-s.y}return{moveX:o,moveY:i}}const Es=2;function Cs(e){return{minX:e.topLeft.x,minY:e.topLeft.y,maxX:e.bottomRight.x,maxY:e.bottomRight.y,midX:e.center.x,midY:e.center.y}}const mn=(e,t)=>{if(e.length===0)throw null;if(e.length===1)return e[0];let n=0,o=e.length-1;for(;n<=o;){const i=Math.floor((n+o)/2);if(e[i]===t)return e[i];e[i]<t?n=i+1:o=i-1}return n>=e.length?e[o]:o<0?e[n]:Math.abs(e[o]-t)<=Math.abs(e[n]-t)?e[o]:e[n]},Ke=(e,t)=>Math.abs(e-t)<1e-5;function Xi(e,t){var n,o;const{data:i,groupQueue:a,calculator:s,viewScaleInfo:c,viewSizeInfo:d}=t;let l=i.elements||[];(a==null?void 0:a.length)>0&&(l=((o=(n=a[a.length-1])===null||n===void 0?void 0:n.detail)===null||o===void 0?void 0:o.children)||[]);const h=[];l.forEach(V=>{if(V.uuid!==e){const j=s.calcViewRectInfoFromRange(V.uuid,{checkVisible:!0,viewScaleInfo:c,viewSizeInfo:d});j&&h.push(j)}});const u=s.calcViewRectInfoFromRange(e,{viewScaleInfo:c,viewSizeInfo:d});if(!u)return null;const m={},f={},v={},g={},p=[],y=[];let E=[],S=[];const w=Cs(u);m[w.minX]=[w.minY,w.midY,w.maxY],m[w.midX]=[w.minY,w.midY,w.maxY],m[w.maxX]=[w.minY,w.midY,w.maxY],f[w.minY]=[w.minX,w.midX,w.maxX],f[w.midY]=[w.minX,w.midX,w.maxX],f[w.maxY]=[w.minX,w.midX,w.maxX],h.forEach(V=>{const j=Cs(V);v[j.minX]||(v[j.minX]=[]),v[j.midX]||(v[j.midX]=[]),v[j.maxX]||(v[j.maxX]=[]),g[j.minY]||(g[j.minY]=[]),g[j.midY]||(g[j.midY]=[]),g[j.maxY]||(g[j.maxY]=[]),v[j.minX]=[j.minY,j.midY,j.maxY],v[j.midX]=[j.minY,j.midY,j.maxY],v[j.maxX]=[j.minY,j.midY,j.maxY],E.push(j.minX),E.push(j.midX),E.push(j.maxX),g[j.minY]=[j.minX,j.midX,j.maxX],g[j.midY]=[j.minX,j.midX,j.maxX],g[j.maxY]=[j.minX,j.midX,j.maxX],S.push(j.minY),S.push(j.midY),S.push(j.maxY)}),E=E.sort((V,j)=>V-j),S=S.sort((V,j)=>V-j);let A=null,b=null,z=null,O=null,L=null,M=null,I=null,P=null;if(E.length>0){z=mn(E,w.minX),O=mn(E,w.midX),L=mn(E,w.maxX);const V=Math.abs(z-w.minX),j=Math.abs(O-w.midX),_=Math.abs(L-w.maxX),x=Math.min(V,j,_);x<=Es/c.scale&&(Ke(x,V)?A=z-w.minX:Ke(x,j)?A=O-w.midX:Ke(x,_)&&(A=L-w.maxX))}if(S.length>0){M=mn(S,w.minY),I=mn(S,w.midY),P=mn(S,w.maxY);const V=Math.abs(M-w.minY),j=Math.abs(I-w.midY),_=Math.abs(P-w.maxY),x=Math.min(V,j,_);x<=Es/c.scale&&(Ke(x,V)?b=M-w.minY:Ke(x,j)?b=I-w.midY:Ke(x,_)&&(b=P-w.maxY))}const k=Object.assign({},w);if(A!==null&&(k.minX+=A,k.midX+=A,k.maxX+=A),b!==null&&(k.minY+=b,k.midY+=b,k.maxY+=b),Ce.x(A)&&A!==null&&z!==null&&O!==null&&L!==null){if(Ke(A,z-w.minX)){const V={x:z,yList:[]};V.yList.push(k.minY),V.yList.push(k.maxY),V.yList.push(...(g==null?void 0:g[z])||[]),p.push(V)}if(Ke(A,O-w.minX)){const V={x:O,yList:[]};V.yList.push(k.minY),V.yList.push(k.maxY),V.yList.push(...(g==null?void 0:g[O])||[]),p.push(V)}if(Ke(A,L-w.minX)){const V={x:L,yList:[]};V.yList.push(k.minY),V.yList.push(k.maxY),V.yList.push(...(g==null?void 0:g[L])||[]),p.push(V)}}if(Ce.y(b)&&b!==null&&M!==null&&I!==null&&P!==null){if(Ke(b,M-w.minY)){const V={y:M,xList:[]};V.xList.push(k.minX),V.xList.push(k.maxX),V.xList.push(...(v==null?void 0:v[M])||[]),y.push(V)}if(Ke(b,I-w.midY)){const V={y:I,xList:[]};V.xList.push(k.minX),V.xList.push(k.maxX),V.xList.push(...(v==null?void 0:v[M])||[]),y.push(V)}if(Ke(b,P-w.maxY)){const V={y:P,xList:[]};V.xList.push(k.minX),V.xList.push(k.maxX),V.xList.push(...(v==null?void 0:v[P])||[]),y.push(V)}}const W=[];(p==null?void 0:p.length)>0&&p.forEach((V,j)=>{W.push([]),V.yList.forEach(_=>{W[j].push({x:V.x,y:_})})});const F=[];return(y==null?void 0:y.length)>0&&y.forEach((V,j)=>{F.push([]),V.xList.forEach(_=>{F[j].push({x:_,y:V.y})})}),{offsetX:A,offsetY:b,yLines:W,xLines:F}}const Mi="@middleware/text-edit",ma="@middleware/text-change",od=rn(),xs=e=>{const{eventHub:t,boardContent:n,viewer:o,sharer:i}=e,a=n.boardContext.canvas,s=document.createElement("div");s.setAttribute("contenteditable","true");const c=document.createElement("div"),d=e.container||document.body,l=document.createElement("div");let h=null,u=[];c.appendChild(s),c.style.position="absolute",l.appendChild(c),l.style.position="fixed",l.style.top="0",l.style.bottom="0",l.style.left="0",l.style.right="0",l.style.display="none",d.appendChild(l);const m=S=>{y(),p(S),l.style.display="block",h!=null&&h.uuid&&(i.setActiveOverrideElemenentMap({[h.uuid]:{operations:{invisible:!0}}}),o.drawFrame())},f=()=>{if(h!=null&&h.uuid){const S=i.getActiveOverrideElemenentMap();S&&delete S[h.uuid],i.setActiveOverrideElemenentMap(S),o.drawFrame()}l.style.display="none",h=null,u=[]},v=()=>{const S=a.getBoundingClientRect(),{left:w,top:A,width:b,height:z}=S;return{left:w,top:A,width:b,height:z}},g=S=>{const{size:w,parent:A}=S,b=document.createElement("div"),{x:z,y:O,w:L,h:M}=w,I=rt(w.angle||0);return b.style.position="absolute",b.style.left=`${z}px`,b.style.top=`${O}px`,b.style.width=`${L}px`,b.style.height=`${M}px`,b.style.transform=`rotate(${I}deg)`,A.appendChild(b),b},p=S=>{const{viewScaleInfo:w,element:A,groupQueue:b}=S,{scale:z,offsetTop:O,offsetLeft:L}=w;c.children&&Array.from(c.children).forEach(_=>{_.remove()});let M=c;for(let _=0;_<b.length;_++){const x=b[_],{x:Y,y:$,w:R,h:H}=x,U=rt(x.angle||0),C={x:Y*z,y:$*z,w:R*z,h:H*z,angle:U};_===0&&(C.x+=L,C.y+=O),M=g({size:C,parent:M})}const I=Object.assign(Object.assign({},od),A.detail);let P=A.x*z+L,k=A.y*z+O,W=A.w*z,F=A.h*z;b.length>0&&(P=A.x*z,k=A.y*z,W=A.w*z,F=A.h*z);let V="center",j="center";I.textAlign==="left"?V="start":I.textAlign==="right"&&(V="end"),I.verticalAlign==="top"?j="start":I.verticalAlign==="bottom"&&(j="end"),s.style.display="inline-flex",s.style.justifyContent=V,s.style.alignItems=j,s.style.position="absolute",s.style.left=`${P-1}px`,s.style.top=`${k-1}px`,s.style.width=`${W+2}px`,s.style.height=`${F+2}px`,s.style.transform=`rotate(${rt(A.angle||0)}deg)`,s.style.boxSizing="border-box",s.style.border="1px solid #1973ba",s.style.resize="none",s.style.overflow="hidden",s.style.wordBreak="break-all",s.style.borderRadius=`${(typeof I.borderRadius=="number"?I.borderRadius:0)*z}px`,s.style.background=`${I.background||"transparent"}`,s.style.color=`${I.color||"#333333"}`,s.style.fontSize=`${I.fontSize*z}px`,s.style.lineHeight=`${(I.lineHeight||I.fontSize)*z}px`,s.style.fontFamily=Cr(I.fontFamily),s.style.fontWeight=`${I.fontWeight}`,s.style.padding="0",s.style.margin="0",s.style.outline="none",s.innerText=I.text||"",M.appendChild(s)},y=()=>{const{left:S,top:w,width:A,height:b}=v();c.style.position="absolute",c.style.overflow="hidden",c.style.top=`${w}px`,c.style.left=`${S}px`,c.style.width=`${A}px`,c.style.height=`${b}px`};l.addEventListener("click",()=>{f()}),s.addEventListener("click",S=>{S.stopPropagation()}),s.addEventListener("input",()=>{h&&u&&(h.detail.text=s.innerText||"",t.trigger(ma,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u||[]]}),o.drawFrame())}),s.addEventListener("blur",()=>{h&&u&&t.trigger(ma,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u]}),f()}),s.addEventListener("keydown",S=>{S.stopPropagation()}),s.addEventListener("keypress",S=>{S.stopPropagation()}),s.addEventListener("keyup",S=>{S.stopPropagation()}),s.addEventListener("wheel",S=>{S.stopPropagation(),S.preventDefault()});const E=S=>{var w;S!=null&&S.position&&(S!=null&&S.element)&&((w=S==null?void 0:S.element)===null||w===void 0?void 0:w.type)==="text"&&(h=S.element,u=S.position),m(S)};return{name:"@middleware/text-editor",use(){t.on(Mi,E)},disuse(){t.off(Mi,E)}}},yo="LAYOUT_SELECT",Ht=Symbol(`${yo}_layoutActionType`),To=Symbol(`${yo}_layoutControlType`),No=Symbol(`${yo}_layoutController`),fn=Symbol(`${yo}_layoutIsHover`),pt=Symbol(`${yo}_layoutIsSelected`),Hn=10,id={activeColor:"#b331c9"};function Do(e,t,n){const{activeColor:o}=n;e.setLineDash([]),e.fillStyle="#FFFFFF",e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.fill(),e.strokeStyle=o,e.lineWidth=2,e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Po(e,t){const{start:n,end:o,style:i}=t,{activeColor:a}=i,s=2,c=a;e.setLineDash([]),e.strokeStyle=c,e.lineWidth=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,o.y),e.closePath(),e.stroke()}function ad(e,t){const{controller:n,style:o}=t,{topLeft:i,topRight:a,bottomLeft:s,bottomRight:c,topMiddle:d,rightMiddle:l,bottomMiddle:h,leftMiddle:u}=n;Po(e,{start:i.center,end:a.center,centerVertexes:d.vertexes,style:o}),Po(e,{start:a.center,end:c.center,centerVertexes:l.vertexes,style:o}),Po(e,{start:c.center,end:s.center,centerVertexes:h.vertexes,style:o}),Po(e,{start:s.center,end:i.center,centerVertexes:u.vertexes,style:o}),Do(e,i.vertexes,o),Do(e,a.vertexes,o),Do(e,c.vertexes,o),Do(e,s.vertexes,o)}function sd(e,t){const{layoutSize:n,style:o}=t,{activeColor:i}=o,{x:a,y:s,w:c,h:d}=n;e.setLineDash([]),e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.moveTo(a,s),e.lineTo(a+c,s),e.lineTo(a+c,s+d),e.lineTo(a,s+d),e.lineTo(a,s),e.closePath(),e.stroke()}const Ms=(e,t)=>{const{sharer:n,boardContent:o,calculator:i,viewer:a,eventHub:s}=e,{overlayContext:c}=o,d=Object.assign(Object.assign({},id),t),{activeColor:l}=d,h={activeColor:l};let u=null,m=null,f=null,v=null;const g=()=>{u=null,n.setSharedStorage(Ht,null),n.setSharedStorage(To,null),n.setSharedStorage(No,null),n.setSharedStorage(fn,null),n.setSharedStorage(pt,null),m=null,f=null,v=null},p=()=>n.getSharedStorage(gt)?(g(),!0):!1,y=()=>{const z=n.getSharedStorage(Ee);return z&&z!=="area"?(g(),!0):!1},E=()=>{const z=n.getActiveStorage("data");if(z!=null&&z.layout){const{x:O,y:L,w:M,h:I}=z.layout;return{x:O,y:L,w:M,h:I}}return null},S=z=>{const O=E();if(O){const{x:L,y:M,w:I,h:P}=O,k=n.getActiveViewScaleInfo(),W=Ge({x:L-Hn/2,y:M-Hn/2,w:I+Hn,h:P+Hn},{viewScaleInfo:k});return $c(z,W)}return!1},w=()=>{const z=n.getActiveViewScaleInfo(),O=E();if(O){const L=Za(O,{viewScaleInfo:z,controllerSize:10});n.setSharedStorage(No,L)}else n.setSharedStorage(No,null)},A=z=>{const O=n.getActiveStorage("data"),L=n.getSharedStorage(No);if(L&&(O!=null&&O.layout)&&(z!=null&&z.point)){let M=null;if(L){const{topLeft:I,top:P,topRight:k,right:W,bottomRight:F,bottom:V,bottomLeft:j,left:_}=L,x=[I,P,k,W,F,V,j,_];for(let Y=0;Y<x.length;Y++){const $=x[Y];if(fr(z.point,$.vertexes)){M=`${$.type}`;break}}if(M)return n.setSharedStorage(To,M),s.trigger(xi,{}),M}}return null},b=z=>{v!==!0&&s.trigger("cursor",{type:z&&`resize-${z}`,groupQueue:[],element:E()})};return{name:"@middleware/layout-selector",use:()=>{g(),w()},hover:z=>{if(v!==!0&&!y()&&!p()){if(S(z.point)?n.setSharedStorage(fn,!0):(n.setSharedStorage(fn,!1),m===!0&&(a.drawFrame(),m=!1)),n.getSharedStorage(pt)===!0){const O=n.getSharedStorage(Ht),L=n.getActiveStorage("data");if(L!=null&&L.layout)if(O!=="resize"){w();const M=A(z);M?b(M):(b(),n.setSharedStorage(Ht,null))}else{const M=A(z);b(M)}return}n.getSharedStorage(fn)&&!m&&a.drawFrame(),m=n.getSharedStorage(fn)}},pointStart:z=>{if(y())return;S(z.point)?n.setSharedStorage(pt,!0):(f===!0&&(g(),a.drawFrame()),n.setSharedStorage(pt,!1)),w();const O=A(z);u=z.point,O&&n.setSharedStorage(Ht,"resize"),n.getSharedStorage(pt)===!0&&!f&&a.drawFrame(),f=n.getSharedStorage(pt)},pointMove:z=>{if(!n.getSharedStorage(pt)&&y())return;const O=n.getSharedStorage(Ht),L=n.getSharedStorage(To),M=n.getActiveStorage("data");if(O==="resize"&&L&&(M!=null&&M.layout)){if(u){v=!0;const I=n.getActiveStorage("scale"),P=z.point.x-u.x,k=z.point.y-u.y,W=P/I,F=k/I,{x:V,y:j,w:_,h:x,operations:Y={}}=M.layout,{position:$="absolute"}=Y;L==="top"?$==="relative"?(M.layout.h=i.toGridNum(x-F),a.scroll({moveY:k})):(M.layout.y=i.toGridNum(j+F),M.layout.h=i.toGridNum(x-F)):L==="right"?M.layout.w=i.toGridNum(_+W):L==="bottom"?M.layout.h=i.toGridNum(x+F):L==="left"?$==="relative"?(M.layout.w=i.toGridNum(_-W),a.scroll({moveX:P})):(M.layout.x=i.toGridNum(V+W),M.layout.w=i.toGridNum(_-W)):L==="top-left"?$==="relative"?(M.layout.w=i.toGridNum(_-W),M.layout.h=i.toGridNum(x-F),a.scroll({moveX:P,moveY:k})):(M.layout.x=i.toGridNum(V+W),M.layout.y=i.toGridNum(j+F),M.layout.w=i.toGridNum(_-W),M.layout.h=i.toGridNum(x-F)):L==="top-right"?$==="relative"?(a.scroll({moveY:k}),M.layout.w=i.toGridNum(_+W),M.layout.h=i.toGridNum(x-F)):(M.layout.y=i.toGridNum(j+F),M.layout.w=i.toGridNum(_+W),M.layout.h=i.toGridNum(x-F)):L==="bottom-right"?(M.layout.w=i.toGridNum(_+W),M.layout.h=i.toGridNum(x+F)):L==="bottom-left"&&($==="relative"?(a.scroll({moveX:P}),M.layout.w=i.toGridNum(_-W),M.layout.h=i.toGridNum(x+F)):(M.layout.x=i.toGridNum(V+W),M.layout.w=i.toGridNum(_-W),M.layout.h=i.toGridNum(x+F)))}return u=z.point,w(),a.drawFrame(),!1}if(["resize"].includes(O))return!1},pointEnd:()=>{v=!1;const z=n.getSharedStorage(Ht),O=n.getSharedStorage(To),L=n.getActiveStorage("data");L&&z==="resize"&&O&&s.trigger(Aa,{type:"changeLayout",data:L})},beforeDrawFrame:({snapshot:z})=>{var O;if(y())return;const{sharedStore:L,activeStore:M}=z,I=L[Ht],P=L[fn],k=L[pt];if(!((O=M.data)===null||O===void 0)&&O.layout){const{x:W,y:F,w:V,h:j}=M.data.layout,_=fo(z),x={x:W,y:F,w:V,h:j},Y=Za(x,{viewScaleInfo:_,controllerSize:Hn});if(P===!0){const $=Ge(x,{viewScaleInfo:_});sd(c,{layoutSize:$,style:h})}(I&&["resize"].includes(I)||k===!0)&&ad(c,{controller:Y,style:h})}},scrollX:()=>{g()},scrollY:()=>{g()},wheelScale:()=>{g()}}},zs=(e,t)=>{const n=Object.assign(Object.assign({},X0),t),{activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s}=n,c={activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s},{viewer:d,sharer:l,boardContent:h,calculator:u,eventHub:m}=e,{overlayContext:f}=h;let v=null,g=null;l.setSharedStorage(Ee,null),l.setSharedStorage(Io,!0);const p=()=>l.getSharedStorage(Dt),y=M=>{let I=l.getSharedStorage(Ue);Array.isArray(I)||(I=[]),I.length>0?td(M,I[I.length-1])?I.push(M):I=[]:I.length===0&&I.push(M);const P=za(I);return l.setSharedStorage(Ue,I),l.setSharedStorage(Yi,P),I.length>0},E=M=>{l.setSharedStorage(gt,M);let I=null;M&&(I=uo(M,{groupQueue:l.getSharedStorage(Ue)})),l.setSharedStorage(Fn,I)},S=(M,I)=>{var P;if(l.setSharedStorage(Dt,M),M.length===1){const k=Co(M[0],{groupQueue:l.getSharedStorage(Ue),controllerSize:Gr,viewScaleInfo:l.getActiveViewScaleInfo()});l.setSharedStorage(un,k),l.setSharedStorage(hn,ct(M[0].uuid,((P=l.getActiveStorage("data"))===null||P===void 0?void 0:P.elements)||[]))}else l.setSharedStorage(un,null),l.setSharedStorage(hn,[]);(I==null?void 0:I.triggerEvent)===!0&&m.trigger(ui,{uuids:M.map(k=>k.uuid)})},w=()=>({ctx:f,calculator:u,data:l.getActiveStorage("data"),selectedElements:p(),viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Ue),areaSize:null,selectedElementController:l.getSharedStorage(un),selectedElementPosition:l.getSharedStorage(hn)}),A=()=>{l.setSharedStorage(Ee,null),l.setSharedStorage(Wt,null),l.setSharedStorage(xo,null),l.setSharedStorage(Mo,null),l.setSharedStorage(Ue,[]),l.setSharedStorage(Yi,[]),l.setSharedStorage(gt,null),l.setSharedStorage(Fn,null),l.setSharedStorage(Dt,[]),l.setSharedStorage(F0,null),l.setSharedStorage(un,null),l.setSharedStorage(hn,[]),l.setSharedStorage(zo,null)};A();const b=({uuids:M,positions:I})=>{let P=[];const k=l.getSharedStorage(Ee),W=l.getActiveStorage("data");I&&Array.isArray(I)?P=hr(I,(W==null?void 0:W.elements)||[]):P=Zo(M,(W==null?void 0:W.elements)||[]);let F=!1;if(!k&&P.length===1?(l.setSharedStorage(Ee,"select"),F=!0):k==="select"&&P.length===1&&(F=!0),F){const V=P[0],j=Ma(V.uuid,(W==null?void 0:W.elements)||[]);l.setSharedStorage(Ue,j),S(P),d.drawFrame()}},z=()=>{A(),d.drawFrame()},O=M=>{l.setSharedStorage(Io,!!M.enable)},L=M=>{l.setSharedStorage(gs,!!M.enable)};return{name:"@middleware/selector",use(){m.on(ui,b),m.on(xi,z),m.on(ca,L),m.on(da,O)},disuse(){m.off(ui,b),m.off(xi,z),m.off(ca,L),m.off(da,O)},hover:M=>{var I,P,k,W,F;const V=l.getSharedStorage(pt),j=l.getSharedStorage(Wt),_=l.getSharedStorage(Ee),x=l.getSharedStorage(Ue),Y=C=>{if(V===!0)return;const D=C.type;g===null&&m.trigger("cursor",{type:D,groupQueue:C.groupQueue,element:C.elements[0]})};if((x==null?void 0:x.length)>0){if(!Ss(M.point,{ctx:f,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Ue)})){E(null),d.drawFrame();return}const D=Wn(M.point,w());if(Y(D),j||["area","drag","drag-list"].includes(_)){E(null),d.drawFrame();return}if(((I=D==null?void 0:D.elements)===null||I===void 0?void 0:I.length)===1){E(D.elements[0]),d.drawFrame();return}E(null),d.drawFrame();return}if(j||["area","drag","drag-list"].includes(_)){E(null);return}if(_==="drag"){E(null);return}const $=p(),R=l.getActiveViewScaleInfo(),H=l.getActiveViewSizeInfo(),U=Wn(M.point,Object.assign(Object.assign({},w()),{areaSize:$i($,{viewScaleInfo:R,viewSizeInfo:H,calculator:u})}));if(Y(U),U.type===null){(l.getSharedStorage(gt)||l.getSharedStorage(Fn))&&(l.setSharedStorage(gt,null),l.setSharedStorage(Fn,null),d.drawFrame());return}if(!(U.type==="over-element"&&l.getSharedStorage(Ee)==="select"&&U.elements.length===1&&U.elements[0].uuid===((k=(P=p())===null||P===void 0?void 0:P[0])===null||k===void 0?void 0:k.uuid))&&!(U.type==="over-element"&&l.getSharedStorage(Ee)===null&&U.elements.length===1&&U.elements[0].uuid===((W=l.getSharedStorage(gt))===null||W===void 0?void 0:W.uuid))){if(U.type==="over-element"&&((F=U==null?void 0:U.elements)===null||F===void 0?void 0:F.length)===1){E(U.elements[0]),d.drawFrame();return}if(l.getSharedStorage(gt)){E(null),d.drawFrame();return}}},pointStart:M=>{var I,P,k,W,F,V,j,_,x,Y;v=M.point;const $=l.getSharedStorage(Ue);if(($==null?void 0:$.length)>0){if(Ss(M.point,{ctx:f,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:$})){const U=Wn(M.point,w());if(((I=U==null?void 0:U.elements)===null||I===void 0?void 0:I.length)===1&&((k=(P=U.elements[0])===null||P===void 0?void 0:P.operations)===null||k===void 0?void 0:k.lock)===!0)return;E(null),U.type==="over-element"&&((W=U==null?void 0:U.elements)===null||W===void 0?void 0:W.length)===1?(S([U.elements[0]],{triggerEvent:!0}),l.setSharedStorage(Ee,"drag")):!((F=U.type)===null||F===void 0)&&F.startsWith("resize-")?(l.setSharedStorage(Wt,U.type),l.setSharedStorage(Ee,"resize")):S([],{triggerEvent:!0})}else A();d.drawFrame();return}const R=$i(p(),{viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),calculator:u}),H=Wn(M.point,Object.assign(Object.assign({},w()),{areaSize:R,groupQueue:[]}));((V=H==null?void 0:H.elements)===null||V===void 0?void 0:V.length)===1&&((_=(j=H.elements[0])===null||j===void 0?void 0:j.operations)===null||_===void 0?void 0:_.lock)===!0||(E(null),H.type==="list-area"?l.setSharedStorage(Ee,"drag-list"):H.type==="over-element"&&((x=H==null?void 0:H.elements)===null||x===void 0?void 0:x.length)===1?(S([H.elements[0]],{triggerEvent:!0}),l.setSharedStorage(Ee,"drag")):!((Y=H.type)===null||Y===void 0)&&Y.startsWith("resize-")?(l.setSharedStorage(Wt,H.type),l.setSharedStorage(Ee,"resize")):(A(),l.setSharedStorage(Ee,"area"),l.setSharedStorage(xo,M.point),S([],{triggerEvent:!0})),d.drawFrame())},pointMove:M=>{var I,P,k;l.setSharedStorage(zo,!0);const W=l.getActiveStorage("data"),F=p(),V=l.getActiveStorage("scale")||1,j=l.getActiveViewScaleInfo(),_=l.getActiveViewSizeInfo(),x=v,Y=M.point,$=l.getSharedStorage(Wt),R=l.getSharedStorage(Ee),H=l.getSharedStorage(Ue),U=l.getSharedStorage(Io);if(R==="drag"){if(g="drag",W&&(F==null?void 0:F.length)===1&&x&&Y&&((P=(I=F[0])===null||I===void 0?void 0:I.operations)===null||P===void 0?void 0:P.lock)!==!0){const{moveX:C,moveY:D}=nd(x,Y,H);let N=u.toGridNum(C/V),B=u.toGridNum(D/V);if(U===!0){const Z=Xi(F[0].uuid,{calculator:u,data:W,groupQueue:H,viewScaleInfo:j,viewSizeInfo:_});try{Z&&(Ce.x(Z.offsetX)&&Z.offsetX!==null&&(N=u.toGridNum(N+Z.offsetX)),Ce.y(Z.offsetY)&&Z.offsetY!==null&&(B=u.toGridNum(B+Z.offsetY)))}catch(ue){console.error(ue)}}F[0].x=u.toGridNum(F[0].x+N),F[0].y=u.toGridNum(F[0].y+B),S([F[0]]),u.modifyViewVisibleInfoMap(W,{modifyOptions:{type:"updateElement",content:{element:F[0],position:l.getSharedStorage(hn)||[]}},viewSizeInfo:_,viewScaleInfo:j})}d.drawFrame()}else if(R==="drag-list"){if(g="drag-list",W&&x&&Y&&(F==null?void 0:F.length)>1){const C=(Y.x-x.x)/V,D=(Y.y-x.y)/V;F.forEach(N=>{var B;N&&((B=N==null?void 0:N.operations)===null||B===void 0?void 0:B.lock)!==!0&&(N.x=u.toGridNum(N.x+C),N.y=u.toGridNum(N.y+D),u.modifyViewVisibleInfoMap(W,{modifyOptions:{type:"updateElement",content:{element:N,position:ct(N.uuid,W.elements)||[]}},viewSizeInfo:_,viewScaleInfo:j}))}),l.setActiveStorage("data",W)}d.drawFrame()}else if(R==="resize"){if(W&&(F==null?void 0:F.length)===1&&x&&($!=null&&$.startsWith("resize-"))){g="resize";const C=[];H.forEach(B=>{const{x:Z,y:ue,w:X,h:te,angle:ae=0}=B;C.push({x:Z,y:ue,w:X,h:te,angle:0-ae})});let D=x,N=Y;if(H.length>0&&(D=wi(x,C),N=wi(Y,C)),$==="resize-rotate"){const B=l.getSharedStorage(un),Z=[B.topLeft.center,B.topRight.center,B.bottomLeft.center,B.bottomRight.center],ue=sr(Z),X=q0(F[0],{center:ue,viewScaleInfo:j,viewSizeInfo:_,start:x,end:Y,resizeType:$,sharer:l});F[0].angle=u.toGridNum(X.angle||0)}else{const B=K0(F[0],{scale:V,start:D,end:N,resizeType:$,sharer:l}),Z={ignore:!!F[0].angle};F[0].x=u.toGridNum(B.x,Z),F[0].y=u.toGridNum(B.y,Z),F[0].type==="group"&&((k=F[0].operations)===null||k===void 0?void 0:k.deepResize)===!0?br(F[0],{w:u.toGridNum(B.w,Z),h:u.toGridNum(B.h,Z)}):(F[0].w=u.toGridNum(B.w,Z),F[0].h=u.toGridNum(B.h,Z))}S([F[0]]),u.modifyViewVisibleInfoMap(W,{modifyOptions:{type:"updateElement",content:{element:F[0],position:l.getSharedStorage(hn)||[]}},viewSizeInfo:_,viewScaleInfo:j}),d.drawFrame()}}else R==="area"&&(g="area",l.setSharedStorage(Mo,M.point),d.drawFrame());v=M.point},pointEnd(M){g=null,l.setSharedStorage(zo,!1);const I=l.getActiveStorage("data"),P=l.getSharedStorage(Dt),k=l.getSharedStorage(gt),W=l.getSharedStorage(Wt),F=l.getSharedStorage(Ee),V=l.getActiveViewSizeInfo();let j=!1;if(v=null,F==="resize"&&W)l.setSharedStorage(Wt,null),j=!0;else if(F==="area"){if(l.setSharedStorage(Ee,null),I){const x=l.getSharedStorage(xo),Y=l.getSharedStorage(Mo);if(x&&Y){const{elements:$}=ed(I,{start:x,end:Y,calculator:u,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()});$.length>0&&(l.setSharedStorage(Ee,"drag-list"),S($,{triggerEvent:!0}),j=!0)}}}else F==="drag-list"?(l.setSharedStorage(Ee,"drag-list-end"),j=!0):I&&(u.getPointElement(M.point,{data:I,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()}).element?(l.setSharedStorage(Ee,"select"),j=!0):l.setSharedStorage(Ee,null));l.getSharedStorage(Ee)===null&&(A(),j=!0),(()=>{if(j){if(I&&Array.isArray(I==null?void 0:I.elements)&&["drag","drag-list"].includes(F)){const x=Fc(I.elements,V,{extend:!0});l.setActiveStorage("contextHeight",x.contextSize.contextHeight),l.setActiveStorage("contextWidth",x.contextSize.contextWidth)}I&&["drag","drag-list","drag-list-end","resize"].includes(F)&&m.trigger(Aa,{data:I,type:"dragElement",selectedElements:P,hoverElement:k}),d.drawFrame()}})()},pointLeave(){v=null,A(),d.drawFrame()},doubleClick(M){var I,P,k,W,F,V,j,_;if(l.getSharedStorage(gs)===!1)return;const x=Wn(M.point,w());if(l.setSharedStorage(un,null),l.setSharedStorage(Dt,[]),!(x.elements.length===1&&((P=(I=x.elements[0])===null||I===void 0?void 0:I.operations)===null||P===void 0?void 0:P.lock)===!0)){if(x.elements.length===1&&((k=x.elements[0])===null||k===void 0?void 0:k.type)==="group"){if(y(x.elements[0])===!0){l.setSharedStorage(Ee,null),d.drawFrame();return}}else x.elements.length===1&&((W=x.elements[0])===null||W===void 0?void 0:W.type)==="text"&&!(!((V=(F=x.elements[0])===null||F===void 0?void 0:F.operations)===null||V===void 0)&&V.invisible)&&m.trigger(Mi,{element:x.elements[0],groupQueue:l.getSharedStorage(Ue)||[],position:ct((j=x.elements[0])===null||j===void 0?void 0:j.uuid,((_=l.getActiveStorage("data"))===null||_===void 0?void 0:_.elements)||[]),viewScaleInfo:l.getActiveViewScaleInfo()});l.setSharedStorage(Ee,null)}},beforeDrawFrame({snapshot:M}){var I;const{activeStore:P,sharedStore:k}=M,{scale:W,offsetLeft:F,offsetTop:V,offsetRight:j,offsetBottom:_,width:x,height:Y,contextHeight:$,contextWidth:R,devicePixelRatio:H}=P,U=e.sharer,C={scale:W,offsetLeft:F,offsetTop:V,offsetRight:j,offsetBottom:_},D={width:x,height:Y,contextHeight:$,contextWidth:R,devicePixelRatio:H},B=k[Dt][0],Z=k[gt],ue=k[Fn],X=k[Ee],te=k[xo],ae=k[Mo],se=k[Ue],Bt=k[Yi],Ra=k[zo],ka=k[Io],Ft={calculator:u,viewScaleInfo:C,viewSizeInfo:D,style:c},ja=B?Co(B,{groupQueue:se,controllerSize:10,viewScaleInfo:C}):null,bo=!!(!((I=Z==null?void 0:Z.operations)===null||I===void 0)&&I.lock);if((se==null?void 0:se.length)>0){if(J0(f,Bt,Ft),Z&&X!=="drag"&&(bo?ys(f,ue,Object.assign(Object.assign({},Ft),{controller:Co(Z,{groupQueue:se,controllerSize:10,viewScaleInfo:C}),style:c})):ps(f,ue,Ft)),!bo&&B&&["select","drag","resize"].includes(X)&&(ws(f,ja,Object.assign(Object.assign({},Ft),{element:B,calculator:u,hideControllers:!!Ra&&X==="drag",style:c})),X==="drag"&&ka===!0)){const xt=Xi(B.uuid,{calculator:u,data:P.data,groupQueue:se,viewScaleInfo:C,viewSizeInfo:D});if(xt){const{offsetX:Oi,offsetY:Ri,xLines:ki,yLines:ji}=xt;(Oi===0||Ri===0)&&bs(f,{xLines:ki,yLines:ji,style:c})}}}else if(Z&&X!=="drag"&&(bo?ys(f,ue,Object.assign(Object.assign({},Ft),{controller:Co(Z,{groupQueue:se,controllerSize:10,viewScaleInfo:C}),style:c})):ps(f,ue,Ft)),!bo&&B&&["select","drag","resize"].includes(X)){if(ws(f,ja,Object.assign(Object.assign({},Ft),{element:B,calculator:u,hideControllers:!!Ra&&X==="drag",style:c})),X==="drag"&&ka===!0){const xt=Xi(B.uuid,{calculator:u,data:P.data,groupQueue:se,viewScaleInfo:C,viewSizeInfo:D});if(xt){const{offsetX:Oi,offsetY:Ri,xLines:ki,yLines:ji}=xt;(Oi===0||Ri===0)&&bs(f,{xLines:ki,yLines:ji,style:c})}}}else if(X==="area"&&te&&ae)Z0(f,{start:te,end:ae,style:c});else if(["drag-list","drag-list-end"].includes(X)){const xt=$i(p(),{viewScaleInfo:U.getActiveViewScaleInfo(),viewSizeInfo:U.getActiveViewSizeInfo(),calculator:u});xt&&Q0(f,{areaSize:xt,style:c})}}}},cn="SCROLL",hi=Symbol(`${cn}_xThumbRect`),mi=Symbol(`${cn}_yThumbRect`),qn=Symbol(`${cn}_hoverXThumbRect`),eo=Symbol(`${cn}_hoverYThumbRect`),Dn=Symbol(`${cn}_prevPoint`),fa=Symbol(`${cn}_activePoint`),to=Symbol(`${cn}_activeThumbType`),rd={thumbBackground:"#0000003A",thumbBorderColor:"#0000008A",hoverThumbBackground:"#0000005F",hoverThumbBorderColor:"#000000EE",activeThumbBackground:"#0000005E",activeThumbBorderColor:"#000000F0"},Yr=16,ld=Yr*2.5;function Is(e,t,n){const o=e,{x:i,y:a,w:s,h:c}=n;return o.beginPath(),o.rect(i,a,s,c),o.closePath(),!!o.isPointInPath(t.x,t.y)}function cd(e,t,n){let o=null;const{xThumbRect:i,yThumbRect:a}=n;return i&&Is(e,t,i)?o="X":a&&Is(e,t,a)&&(o="Y"),o}function dd(e){const{sharedStore:t}=e;return{activePoint:t[fa]||null,prevPoint:t[Dn]||null,activeThumbType:t[to]||null,xThumbRect:t[hi]||null,yThumbRect:t[mi]||null,hoverXThumb:t[qn],hoverYThumb:t[eo]}}function ud(e){const{viewScaleInfo:t,viewSizeInfo:n,hoverXThumb:o,hoverYThumb:i,style:a}=e,{width:s,height:c}=n,{offsetTop:d,offsetBottom:l,offsetLeft:h,offsetRight:u}=t,m=ld,f=Yr,{thumbBackground:v,thumbBorderColor:g,hoverThumbBackground:p,hoverThumbBorderColor:y}=a;let E=0,S=0;E=Math.max(m,s-f*2-(Math.abs(h)+Math.abs(u))),E>=s&&(E=s),S=Math.max(m,c-f*2-(Math.abs(d)+Math.abs(l))),S>=c&&(S=c);const w=f,A=s-E-f;let b=w;h>0?b=w:u>0?b=A:h<=0&&E>0&&!(h===0&&u===0)&&(b=w+(s-E)*Math.abs(h)/(Math.abs(h)+Math.abs(u)),b=Math.min(Math.max(0,b-w),s-E));const z=f,O=c-S-f;let L=z;d>0?L=z:l>0?L=O:d<=0&&S>0&&!(d===0&&l===0)&&(L=z+(c-S)*Math.abs(d)/(Math.abs(d)+Math.abs(l)),L=Math.min(Math.max(0,L-z),c-S));const M={x:b,y:c-f,w:E,h:f},I={x:s-f,y:L,w:f,h:S};return{lineSize:f,xSize:E,ySize:S,translateY:L,translateX:b,xThumbBackground:o?p:v,yThumbBackground:i?p:v,xThumbBorderColor:o?y:g,yThumbBorderColor:i?y:g,xThumbRect:M,yThumbRect:I}}function As(e,t){let{x:n,y:o,h:i,w:a,background:s,borderColor:c}=t;e.save(),e.shadowColor="#FFFFFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=1;{const{axis:d}=t;d==="X"?(o=o+i/4+0,i=i/2):d==="Y"&&(n=n+a/4+0,a=a/2);let l=t.r;l=Math.min(l,a/2,i/2),(a<l*2||i<l*2)&&(l=0),e.globalAlpha=1,e.beginPath(),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.fillStyle=s,e.fill(),e.beginPath(),e.lineWidth=1,e.strokeStyle=c,e.setLineDash([]),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.stroke()}e.restore()}function hd(e,t){const n=e,{viewScaleInfo:o,viewSizeInfo:i,scrollInfo:a,style:s}=t,{activeThumbType:c,prevPoint:d,activePoint:l,hoverXThumb:h,hoverYThumb:u}=a,m=ud({viewScaleInfo:o,viewSizeInfo:i,hoverXThumb:h,hoverYThumb:u,style:s});let f=Object.assign({},m.xThumbRect),v=Object.assign({},m.yThumbRect);return c&&d&&l&&(c==="X"&&a.xThumbRect?(f=Object.assign({},a.xThumbRect),f.x=f.x+(l.x-d.x)):c==="Y"&&a.yThumbRect&&(v=Object.assign({},a.yThumbRect),v.y=v.y+(l.y-d.y))),As(n,Object.assign(Object.assign({axis:"X"},f),{r:m.lineSize/2,background:m.xThumbBackground,borderColor:m.xThumbBorderColor})),As(n,Object.assign(Object.assign({axis:"Y"},v),{r:m.lineSize/2,background:m.yThumbBackground,borderColor:m.yThumbBorderColor})),{xThumbRect:f,yThumbRect:v}}function md(e,t){const{snapshot:n,style:o}=t,i=Ni(n),a=fo(n),s=dd(n),{xThumbRect:c,yThumbRect:d}=hd(e,{viewSizeInfo:i,viewScaleInfo:a,scrollInfo:s,style:o});return{xThumbRect:c,yThumbRect:d}}const Ts=(e,t)=>{const{viewer:n,boardContent:o,sharer:i,eventHub:a}=e,{overlayContext:s}=o;i.setSharedStorage(hi,null),i.setSharedStorage(mi,null);let c=!1;const d=Object.assign(Object.assign({},rd),t),{thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:m,activeThumbBackground:f,activeThumbBorderColor:v}=d,g={thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:m,activeThumbBackground:f,activeThumbBorderColor:v},p=()=>{i.setSharedStorage(Dn,null),i.setSharedStorage(fa,null),i.setSharedStorage(to,null),i.setSharedStorage(qn,null),i.setSharedStorage(eo,null),c=!1};p();const y=w=>{const A=i.getSharedStorage(Dn);if(A){const{offsetLeft:b,offsetRight:z}=i.getActiveViewScaleInfo(),{width:O}=i.getActiveViewSizeInfo(),L=-(w.x-A.x),M=O+Math.abs(b)+Math.abs(z),I=L*M/O;n.scroll({moveX:I}),n.drawFrame()}},E=w=>{const A=i.getSharedStorage(Dn);if(A){const{offsetTop:b,offsetBottom:z}=i.getActiveViewScaleInfo(),{height:O}=i.getActiveViewSizeInfo(),L=-(w.y-A.y),M=O+Math.abs(b)+Math.abs(z),I=L*M/O;n.scroll({moveY:I}),n.drawFrame()}},S=w=>cd(s,w,{xThumbRect:i.getSharedStorage(hi),yThumbRect:i.getSharedStorage(mi)});return{name:"@middleware/scroller",wheel:w=>{n.scroll({moveX:0-w.deltaX,moveY:0-w.deltaY}),n.drawFrame()},hover:w=>{if(c===!0)return!1;const{point:A}=w,b=S(A);if(b==="X"||b==="Y")return b==="X"?(i.setSharedStorage(qn,!0),i.setSharedStorage(eo,!1)):(i.setSharedStorage(qn,!1),i.setSharedStorage(eo,!0)),a.trigger("cursor",{type:"default"}),!1;i.setSharedStorage(qn,!1),i.setSharedStorage(eo,!1)},pointStart:w=>{const{point:A}=w,b=S(A);if(b==="X"||b==="Y")return c=!0,i.setSharedStorage(to,b),i.setSharedStorage(Dn,A),!1},pointMove:w=>{const{point:A}=w,b=i.getSharedStorage(to);if(b==="X"||b==="Y")return i.setSharedStorage(fa,A),b==="X"?y(A):b==="Y"&&E(A),i.setSharedStorage(Dn,A),!1},pointEnd:()=>{c=!1;const w=i.getSharedStorage(to);if(p(),w==="X"||w==="Y")return n.scroll({moveX:0,moveY:0}),n.drawFrame(),!1},beforeDrawFrame({snapshot:w}){const{xThumbRect:A,yThumbRect:b}=md(s,{snapshot:w,style:g});i.setSharedStorage(hi,A),i.setSharedStorage(mi,b)}}},$r="@middleware/scale",Ns=e=>{const{viewer:t,sharer:n,eventHub:o}=e,i=50,a=.05;return{name:"@middleware/scaler",wheelScale(s){const{deltaY:c,point:d}=s,{scale:l}=n.getActiveViewScaleInfo();let h=l;if(c<0?h=l*1.1:c>0&&(h=l*.9),h<a||h>i)return;const{moveX:u,moveY:m}=t.scale({scale:h,point:d});t.scroll({moveX:u,moveY:m}),t.drawFrame();const f=pe(l);o.trigger($r,{scale:f})}}},Le=16,ga=10,Xr=100,Pi=1,Ur="monospace",fd="#FFFFFFA8",gd="#00000080",vd="#000000",pd="#00000080",yd="#AAAAAA20",wd="#AAAAAA40",bd="#196097",Sd={background:fd,borderColor:gd,scaleColor:vd,textColor:pd,gridColor:yd,gridPrimaryColor:wd,selectedAreaColor:bd},gn=[1,2,5,10,20,50,100,200,500];function Ed(e){e=Math.max(gn[0],Math.min(e,gn[gn.length-1]));for(let t=0;t<gn.length-1;t++){const n=gn[t],o=gn[t+1];if(e>o)continue;if(e===n||e===o)return e;const i=(n+o)/2;return e<=i?n:o}return e}function Zr(e){const{scale:t,viewLength:n,viewOffset:o}=e,i=[];let a=10;a=pe(a/t,{decimalPlaces:0}),a=Ed(a);const s=a*10,c=a*5;let d=0;const l=a*t,h=0-o,u=0,m=h%l,f=(h-m+l)/t,v=u+(l-m);for(;v+d*l<n;){const g=pe(f+d*a,{decimalPlaces:0}),p=pe(v+d*l,{decimalPlaces:0}),y={num:g,position:p,showNum:g%s===0,isKeyNum:g%s===0,isSubKeyNum:g%c===0};i.push(y),d++}return{list:i,rulerUnit:a}}function Cd(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetLeft:i}=t,{width:a}=n;return Zr({axis:"X",scale:o,viewLength:a,viewOffset:i})}function xd(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i}=t,{height:a}=n;return Zr({axis:"Y",scale:o,viewLength:a,viewOffset:i})}function Md(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=Le,c=Le*4/5,d=Le*2/5,l=Le*1/5,h=Le/5;for(let u=0;u<n.length;u++){const m=n[u];m.position<Le||(e.beginPath(),e.moveTo(m.position,s),e.lineTo(m.position,m.isKeyNum?l:m.isSubKeyNum?d:c),e.closePath(),e.lineWidth=Pi,e.setLineDash([]),e.fillStyle=i,e.stroke(),m.isKeyNum&&(e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:Xr,fontSize:ga,fontFamily:Ur}),e.fillText(`${m.num}`,m.position+h,h)))}}function zd(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=Le,c=Le*4/5,d=Le*2/5,l=Le*1/5,h=Le/5;for(let u=0;u<n.length;u++){const m=n[u];if(!(m.position<Le)&&(e.beginPath(),e.moveTo(s,m.position),e.lineTo(m.isKeyNum?l:m.isSubKeyNum?d:c,m.position),e.closePath(),e.fillStyle=i,e.lineWidth=Pi,e.setLineDash([]),e.stroke(),m.showNum===!0)){const f=h,v=m.position+h,g=`${m.num}`;go(e,-90,{x:f,y:v},()=>{e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:Xr,fontSize:ga,fontFamily:Ur}),e.fillText(g,h+ga,m.position+h)})}}}function Id(e,t){const{viewSizeInfo:n,style:o}=t,{width:i,height:a}=n,{background:s,borderColor:c}=o;e.beginPath(),e.moveTo(0,0),e.lineTo(i+1,0),e.lineTo(i+1,Le),e.lineTo(Le,Le),e.lineTo(Le,a+1),e.lineTo(0,a+1),e.lineTo(0,0),e.closePath(),e.fillStyle=s,e.fill(),e.lineWidth=Pi,e.setLineDash([]),e.strokeStyle=c,e.stroke()}function Ad(e,t){const{xList:n,yList:o,viewSizeInfo:i,style:a}=t,{width:s,height:c}=i,{gridColor:d,gridPrimaryColor:l}=a;for(let h=0;h<n.length;h++){const u=n[h];e.beginPath(),e.moveTo(u.position,0),e.lineTo(u.position,c),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.closePath(),e.lineWidth=Pi,e.setLineDash([]),e.stroke()}for(let h=0;h<o.length;h++){const u=o[h];e.beginPath(),e.moveTo(0,u.position),e.lineTo(s,u.position),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.lineWidth=1,e.closePath(),e.stroke()}}function Td(e,t){const{snapshot:n,calculator:o,style:i}=t,{sharedStore:a}=n,{selectedAreaColor:s}=i,c=a[Dt],d=a[Ee];if(["select","drag","drag-list","drag-list-end"].includes(d)&&c.length>0){const l=fo(n),h=Ni(n),u=[],m=[],f=[],v=[],g=[];if(c.forEach(w=>{const A=o.calcViewRectInfoFromRange(w.uuid,{viewScaleInfo:l,viewSizeInfo:h});A&&(u.push(A),m.push(A.left.x),f.push(A.right.x),v.push(A.top.y),g.push(A.bottom.y))}),!(u.length>0))return;const p=Math.min(...m),y=Math.max(...f),E=Math.min(...v),S=Math.max(...g);e.globalAlpha=1,e.beginPath(),e.moveTo(p,0),e.lineTo(y,0),e.lineTo(y,Le),e.lineTo(p,Le),e.fillStyle=s,e.closePath(),e.fill(),e.beginPath(),e.moveTo(0,E),e.lineTo(Le,E),e.lineTo(Le,S),e.lineTo(0,S),e.fillStyle=s,e.closePath(),e.fill()}}const va="@middleware/show-ruler",Ds=(e,t)=>{const{boardContent:n,viewer:o,eventHub:i,calculator:a}=e,{overlayContext:s,underlayContext:c}=n,d=Object.assign(Object.assign({},Sd),t),{background:l,borderColor:h,scaleColor:u,textColor:m,gridColor:f,gridPrimaryColor:v,selectedAreaColor:g}=d,p={background:l,borderColor:h,scaleColor:u,textColor:m,gridColor:f,gridPrimaryColor:v,selectedAreaColor:g};let y=!0,E=!0;const S=w=>{typeof(w==null?void 0:w.show)=="boolean"&&(y=w.show),typeof(w==null?void 0:w.showGrid)=="boolean"&&(E=w.showGrid),(typeof(w==null?void 0:w.show)=="boolean"||typeof(w==null?void 0:w.showGrid)=="boolean")&&o.drawFrame()};return{name:"@middleware/ruler",use(){i.on(va,S)},disuse(){i.off(va,S)},beforeDrawFrame:({snapshot:w})=>{if(y===!0){const A=fo(w),b=Ni(w);Td(s,{snapshot:w,calculator:a,style:p}),Id(s,{viewScaleInfo:A,viewSizeInfo:b,style:p});const{list:z,rulerUnit:O}=Cd({viewScaleInfo:A,viewSizeInfo:b});Md(s,{scaleList:z,style:p});const{list:L}=xd({viewScaleInfo:A,viewSizeInfo:b});zd(s,{scaleList:L,style:p}),E===!0&&Ad(O===1?s:c,{xList:z,yList:L,viewScaleInfo:A,viewSizeInfo:b,style:p})}}}},Nd="DRAG",Lo=Symbol(`${Nd}_prevPoint`),Ps=e=>{const{eventHub:t,sharer:n,viewer:o}=e;let i=!1;return{name:"@middleware/dragger",hover(){i!==!0&&t.trigger("cursor",{type:"drag-default"})},pointStart(a){const{point:s}=a;n.setSharedStorage(Lo,s),i=!0,t.trigger("cursor",{type:"drag-active"})},pointMove(a){const{point:s}=a,c=n.getSharedStorage(Lo);if(s&&c){const d=s.x-c.x,l=s.y-c.y;o.scroll({moveX:d,moveY:l}),o.drawFrame()}n.setSharedStorage(Lo,s)},pointEnd(){i=!1,n.setSharedStorage(Lo,null),t.trigger("cursor",{type:"drag-default"})}}},Ta="monospace";function Dd(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textColor:l,textBackground:h}=s;go(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ta});const u=(d-c)/2,m=e.$undoPixelRatio(e.measureText(a).width),f={x:n.x-m/2-u,y:n.y},v={x:f.x+m+u*2,y:f.y+c+u},g={x:n.x-m/2,y:n.y};e.setLineDash([]),e.fillStyle=h,e.beginPath(),e.moveTo(f.x,f.y),e.lineTo(v.x,f.y),e.lineTo(v.x,v.y),e.lineTo(f.x,v.y),e.closePath(),e.fill(),e.fillStyle=l,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function Pd(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=s;go(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ta});const u=(d-c)/2,m=e.$undoPixelRatio(e.measureText(a).width),f={x:n.x,y:n.y},v={x:f.x+m+u*2,y:f.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(f.x,f.y),e.lineTo(v.x,f.y),e.lineTo(v.x,v.y),e.lineTo(f.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function Ld(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=s;go(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ta});const u=(d-c)/2,m=e.$undoPixelRatio(e.measureText(a).width),f={x:n.x,y:n.y},v={x:f.x+m+u*2,y:f.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(f.x,f.y),e.lineTo(v.x,f.y),e.lineTo(v.x,v.y),e.lineTo(f.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}const Od="#1973bac6",Rd="#ffffff",kd={textBackground:Od,textColor:Rd},Gt=10,Ui=16,Ls=(e,t)=>{const{boardContent:n,calculator:o}=e,{overlayContext:i}=n,a=Object.assign(Object.assign({},kd),t),{textBackground:s,textColor:c}=a,d={textBackground:s,textColor:c};return{name:"@middleware/info",beforeDrawFrame({snapshot:l}){const{sharedStore:h}=l,u=h[Dt],m=h[Ee],f=h[Ue]||[];if(u.length===1){const v=u[0];if(v&&["select","drag","resize"].includes(m)){const g=fo(l),p=Ni(l),{x:y,y:E,w:S,h:w,angle:A}=v,b=[...f,{uuid:kt(),x:y,y:E,w:S,h:w,angle:A,type:"group",detail:{children:[]}}],z={viewScaleInfo:g,viewSizeInfo:p},O=o.calcViewRectInfoFromOrigin(v.uuid,z);let L=0;b.forEach(I=>{L+=I.angle||0});const M=St(rt(0-L));if(O){const I=O==null?void 0:O.center,P={topLeft:ze(I,O.topLeft,M),topRight:ze(I,O.topRight,M),bottomRight:ze(I,O.bottomRight,M),bottomLeft:ze(I,O.bottomLeft,M),center:ze(I,O.center,M),top:ze(I,O.top,M),right:ze(I,O.right,M),bottom:ze(I,O.bottom,M),left:ze(I,O.left,M)},k=pe(v.x,{decimalPlaces:2}),W=pe(v.y,{decimalPlaces:2}),F=pe(v.w,{decimalPlaces:2}),V=pe(v.h,{decimalPlaces:2}),j=`${pe(k,{decimalPlaces:0})},${pe(W,{decimalPlaces:0})}`,_=`${pe(F,{decimalPlaces:0})}x${pe(V,{decimalPlaces:0})}`,x=`${pe(v.angle||0,{decimalPlaces:0})}°`;Dd(i,{point:{x:P.bottom.x,y:P.bottom.y+Gt},rotateCenter:P.center,angle:L,text:_,fontSize:Gt,lineHeight:Ui,style:d}),Pd(i,{point:{x:P.topLeft.x,y:P.topLeft.y-Gt*2},rotateCenter:P.center,angle:L,text:j,fontSize:Gt,lineHeight:Ui,style:d}),Ld(i,{point:{x:P.top.x+Gt,y:P.top.y-Gt*2},rotateCenter:P.center,angle:L,text:x,fontSize:Gt,lineHeight:Ui,style:d})}}}}}};var Zi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ae=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},pa,Te,fi,zi,Qr;class jd{constructor(t,n){pa.add(this),Te.set(this,void 0),fi.set(this,void 0),zi.set(this,void 0);const{devicePixelRatio:o=1,width:i,height:a,createCustomContext2D:s}=n;Zi(this,zi,t,"f");const c=document.createElement("canvas");Zi(this,fi,c,"f"),Ae(this,pa,"m",Qr).call(this),t.appendChild(c);const d=kc(c,{width:i,height:a,devicePixelRatio:o,offscreen:!0,createCustomContext2D:s}),l=new R0({boardContent:d,container:t}),h=l.getSharer();h.setActiveViewSizeInfo({width:i,height:a,devicePixelRatio:o,contextWidth:i,contextHeight:a}),Zi(this,Te,l,"f"),this.resize(h.getActiveViewSizeInfo());const u=l.getEventHub();new B0(t,{eventHub:u})}isDestroyed(){return Ae(this,Te,"f").isDestroyed()}destroy(){Ae(this,Te,"f").destroy(),Ae(this,fi,"f").remove()}use(t,n){Ae(this,Te,"f").use(t,n)}disuse(t){Ae(this,Te,"f").disuse(t)}setData(t,n){lr((t==null?void 0:t.elements)||[]),Ae(this,Te,"f").setData(t,n)}getData(){return Ae(this,Te,"f").getData()}scale(t){Ae(this,Te,"f").scale(t),Ae(this,Te,"f").getViewer().drawFrame()}resize(t){const n=Ae(this,Te,"f"),i=n.getSharer().getActiveViewSizeInfo();n.resize(Object.assign(Object.assign({},i),t))}clear(){Ae(this,Te,"f").clear()}on(t,n){Ae(this,Te,"f").getEventHub().on(t,n)}off(t,n){Ae(this,Te,"f").getEventHub().off(t,n)}trigger(t,n){Ae(this,Te,"f").getEventHub().trigger(t,n)}getViewInfo(){const n=Ae(this,Te,"f").getSharer(),o=n.getActiveViewSizeInfo(),i=n.getActiveViewScaleInfo();return{viewSizeInfo:o,viewScaleInfo:i}}refresh(){Ae(this,Te,"f").getViewer().drawFrame()}setViewScale(t){Ae(this,Te,"f").updateViewScaleInfo(t)}getLoadItemMap(){return Ae(this,Te,"f").getRenderer().getLoadItemMap()}onBoardWatcherEvents(){Ae(this,Te,"f").onWatcherEvents()}offBoardWatcherEvents(){Ae(this,Te,"f").offWatcherEvents()}}Te=new WeakMap,fi=new WeakMap,zi=new WeakMap,pa=new WeakSet,Qr=function(){const t=Ae(this,zi,"f");t.style.position="relative"};const Ii="select",_d={mode:Ii};function Vd(){return{mode:Ii,enableRuler:!1,enableScale:!1,enableScroll:!1,enableSelect:!1,enableTextEdit:!1,enableDrag:!1,enableInfo:!1,middlewareStyles:{selector:{},info:{},ruler:{},scroller:{},layoutSelector:{}}}}function Bd(e){const t={selector:{},ruler:{},info:{},scroller:{},layoutSelector:{}};if(e.styles){const{selector:n,info:o,ruler:i,scroller:a,layoutSelector:s}=e.styles;Me.string(n==null?void 0:n.activeColor)&&(t.selector.activeColor=n==null?void 0:n.activeColor),Me.string(n==null?void 0:n.activeAreaColor)&&(t.selector.activeAreaColor=n==null?void 0:n.activeAreaColor),Me.string(n==null?void 0:n.lockedColor)&&(t.selector.lockedColor=n==null?void 0:n.lockedColor),Me.string(n==null?void 0:n.referenceColor)&&(t.selector.referenceColor=n==null?void 0:n.referenceColor),Me.string(o==null?void 0:o.textBackground)&&(t.info.textBackground=o==null?void 0:o.textBackground),Me.string(o==null?void 0:o.textColor)&&(t.info.textColor=o==null?void 0:o.textColor),Me.string(i==null?void 0:i.background)&&(t.ruler.background=i==null?void 0:i.background),Me.string(i==null?void 0:i.borderColor)&&(t.ruler.borderColor=i==null?void 0:i.borderColor),Me.string(i==null?void 0:i.scaleColor)&&(t.ruler.scaleColor=i==null?void 0:i.scaleColor),Me.string(i==null?void 0:i.textColor)&&(t.ruler.textColor=i==null?void 0:i.textColor),Me.string(i==null?void 0:i.gridColor)&&(t.ruler.gridColor=i==null?void 0:i.gridColor),Me.string(i==null?void 0:i.gridPrimaryColor)&&(t.ruler.gridPrimaryColor=i==null?void 0:i.gridPrimaryColor),Me.string(i==null?void 0:i.selectedAreaColor)&&(t.ruler.selectedAreaColor=i==null?void 0:i.selectedAreaColor),Me.string(a==null?void 0:a.thumbBackground)&&(t.scroller.thumbBackground=a==null?void 0:a.thumbBackground),Me.string(a==null?void 0:a.thumbBorderColor)&&(t.scroller.thumbBorderColor=a==null?void 0:a.thumbBorderColor),Me.string(a==null?void 0:a.hoverThumbBackground)&&(t.scroller.hoverThumbBackground=a==null?void 0:a.hoverThumbBackground),Me.string(a==null?void 0:a.hoverThumbBorderColor)&&(t.scroller.hoverThumbBorderColor=a==null?void 0:a.hoverThumbBorderColor),Me.string(a==null?void 0:a.activeThumbBackground)&&(t.scroller.activeThumbBackground=a==null?void 0:a.activeThumbBackground),Me.string(a==null?void 0:a.activeThumbBorderColor)&&(t.scroller.activeThumbBorderColor=a==null?void 0:a.activeThumbBorderColor),Me.string(s==null?void 0:s.activeColor)&&(t.layoutSelector.activeColor=s==null?void 0:s.activeColor)}return t}var Fd=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function Wd(e){return Fd(this,void 0,void 0,function*(){const{data:t,width:n,height:o,devicePixelRatio:i,viewScaleInfo:a,viewSizeInfo:s,loadItemMap:c}=e;let d=Xo({width:n,height:o,devicePixelRatio:i}),l=new Dr({viewContext:d}),h=new Nr({viewContext:d,calculator:l});h.setLoadItemMap(c),h.drawData(t,{viewScaleInfo:a,viewSizeInfo:s,forceDrawAll:!0});let u=null,m=d.$getOffscreenCanvas();if(m){const f=yield m.convertToBlob();u=window.URL.createObjectURL(f)}return m=null,d=null,l=null,h=null,{blobURL:u,width:n,height:o,devicePixelRatio:i}})}const Hd=Aa,Os={change:Hd,ruler:va,scale:$r,select:ui,clearSelect:xi,textEdit:Mi,textChange:ma},fe={};Object.keys(Os).forEach(e=>{Object.defineProperty(fe,e,{value:Os[e],writable:!1})});function Gd(e){return["select","drag","readOnly"].includes(e)}function Jr(e,t){const{enableRuler:n,enableScale:o,enableScroll:i,enableSelect:a,enableTextEdit:s,enableDrag:c,enableInfo:d}=t.getSnapshot(),l=t.get("middlewareStyles");i===!0?e.use(Ts,l==null?void 0:l.scroller):i===!1&&e.disuse(Ts),a===!0?(e.use(Ms,l==null?void 0:l.layoutSelector),e.use(zs,l==null?void 0:l.selector)):a===!1&&(e.disuse(Ms),e.disuse(zs)),o===!0?e.use(Ns):o===!1&&e.disuse(Ns),n===!0?e.use(Ds,l==null?void 0:l.ruler):n===!1&&e.disuse(Ds),s===!0?e.use(xs):s===!1&&e.disuse(xs),c===!0?e.use(Ps):c===!1&&e.disuse(Ps),d===!0?e.use(Ls,l==null?void 0:l.info):d===!1&&e.disuse(Ls)}function ya(e,t,n){let o=!1,i=!1,a=!1,s=!1,c=!1,d=!1,l=!1,h="select";n.set("mode",h),Gd(e)?h=e:console.warn(`${e} is invalid mode of iDraw.js`),h==="select"?(o=!0,i=!0,a=!0,l=!0,s=!0,c=!1,d=!0):h==="drag"?(o=!0,i=!0,a=!1,s=!1,c=!0,d=!0):h==="readOnly"&&(o=!1,i=!1,a=!1,s=!1,c=!1,d=!1),n.set("enableScale",o),n.set("enableScroll",i),n.set("enableSelect",a),n.set("enableTextEdit",s),n.set("enableDrag",c),n.set("enableRuler",d),n.set("enableInfo",l),Jr(t,n)}var Yd=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},re=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Qi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},no,me,oo,Ot,Kr,wa;class qr{constructor(t,n){no.add(this),me.set(this,void 0),oo.set(this,void 0),Ot.set(this,new tn({defaultStorage:Vd()}));const o=Object.assign(Object.assign({},_d),n);re(this,Ot,"f").set("middlewareStyles",Bd(o));const{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c}=o,d=new jd(t,{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c});Qi(this,me,d,"f"),Qi(this,oo,o,"f"),re(this,no,"m",Kr).call(this)}reset(t){const n=re(this,me,"f"),o=re(this,Ot,"f");o.clear(),ya(t.mode||Ii,n,o),n.refresh(),Qi(this,oo,Object.assign(Object.assign({},re(this,oo,"f")),t),"f")}setMode(t){const n=re(this,me,"f"),o=re(this,Ot,"f");ya(t||Ii,n,o),n.refresh()}enable(t){re(this,no,"m",wa).call(this,t,!0)}disable(t){re(this,no,"m",wa).call(this,t,!1)}setData(t){const n=re(this,me,"f");n.setData(t),n.trigger(fe.change,{data:t,type:"setData"})}getData(t){const n=re(this,me,"f").getData();return n&&(t==null?void 0:t.compact)===!0?lc(n,{loadItemMap:re(this,me,"f").getLoadItemMap()}):n}getViewInfo(){return re(this,me,"f").getViewInfo()}scale(t){re(this,me,"f").scale(t)}setViewScale(t){const n=re(this,me,"f");n.setViewScale(t),n.refresh()}centerContent(t){const n=(t==null?void 0:t.data)||re(this,me,"f").getData(),{viewSizeInfo:o}=this.getViewInfo();if(n!=null&&n.layout||Array.isArray(n==null?void 0:n.elements)&&(n==null?void 0:n.elements.length)>0){const i=d0(n,{viewSizeInfo:o});this.setViewScale(i)}}resize(t){re(this,me,"f").resize(t)}on(t,n){re(this,me,"f").on(t,n)}off(t,n){re(this,me,"f").off(t,n)}trigger(t,n){re(this,me,"f").trigger(t,n)}selectElement(t){this.selectElements([t])}selectElements(t){this.trigger(fe.select,{uuids:t})}selectElementByPosition(t){this.selectElementsByPositions([t])}selectElementsByPositions(t){this.trigger(fe.select,{positions:t})}cancelElements(){this.trigger(fe.select,{uuids:[]})}createElement(t,n){const{viewScaleInfo:o,viewSizeInfo:i}=re(this,me,"f").getViewInfo();return r0(t,(n==null?void 0:n.element)||{},(n==null?void 0:n.viewCenter)===!0?{viewScaleInfo:o,viewSizeInfo:i}:void 0)}updateElement(t){const n=re(this,me,"f"),o=n.getData()||{elements:[]};jt(t.uuid,t,o.elements),n.setData(o),n.refresh(),n.trigger(fe.change,{data:o,type:"updateElement"})}addElement(t,n){var o;const i=re(this,me,"f"),a=i.getData()||{elements:[]};if(!n||!(!((o=n==null?void 0:n.position)===null||o===void 0)&&o.length))a.elements.push(t);else if(n!=null&&n.position){const s=[...n==null?void 0:n.position];Sr(t,s,a.elements)}return i.setData(a),i.refresh(),i.trigger(fe.change,{data:a,type:"addElement"}),a}deleteElement(t){const n=re(this,me,"f"),o=n.getData()||{elements:[]};l0(t,o.elements),n.setData(o),n.refresh(),n.trigger(fe.change,{data:o,type:"deleteElement"})}moveElement(t,n){const o=re(this,me,"f"),i=o.getData()||{elements:[]},a=ct(t,i.elements),{elements:s}=bi(i.elements,{from:a,to:n});i.elements=s,o.setData(i),o.refresh(),o.trigger(fe.change,{data:i,type:"moveElement"})}getImageBlobURL(t){return Yd(this,void 0,void 0,function*(){const n=this.getData()||{elements:[]},{devicePixelRatio:o}=t||{devicePixelRatio:1},i=xa(n.elements),{viewSizeInfo:a}=this.getViewInfo();return yield Wd({width:i.w,height:i.h,devicePixelRatio:o,data:n,viewScaleInfo:{scale:1,offsetLeft:-i.x,offsetTop:-i.y,offsetBottom:0,offsetRight:0},viewSizeInfo:Object.assign(Object.assign({},a),{devicePixelRatio:o}),loadItemMap:re(this,me,"f").getLoadItemMap()})})}isDestroyed(){return re(this,me,"f").isDestroyed()}destroy(){const t=re(this,me,"f"),n=re(this,Ot,"f");t.destroy(),n.destroy()}getViewCenter(){const{viewScaleInfo:t,viewSizeInfo:n}=this.getViewInfo();return u0({viewScaleInfo:t,viewSizeInfo:n})}$onBoardWatcherEvents(){re(this,me,"f").onBoardWatcherEvents()}$offBoardWatcherEvents(){re(this,me,"f").offBoardWatcherEvents()}}me=new WeakMap,oo=new WeakMap,Ot=new WeakMap,no=new WeakSet,Kr=function(){const t=re(this,me,"f"),n=re(this,Ot,"f");ya("select",t,n)},wa=function(t,n){const o=re(this,Ot,"f");if(["ruler","scroll","scale","info"].includes(t)){const i={ruler:"enableRuler",scroll:"enableScroll",scale:"enableScale",info:"enableInfo"};o.set(i[t],!!n),Jr(re(this,me,"f"),o),re(this,me,"f").refresh()}else t==="selectInGroup"?re(this,me,"f").trigger(ca,{enable:!!n}):t==="snapToGrid"&&re(this,me,"f").trigger(da,{enable:!!n})};const $d=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}),r.createElement("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}))),Ji="base-scale-selector",Xd=e=>{const{className:t,style:n,defaultValue:o,value:i,onChange:a}=e,s=G(Ji),c=G(Ji,"menu-item"),d=G(Ji,"input"),[l,h]=T.useState(100);T.useEffect(()=>{const g=pe(parseFloat(i||"1")*100);h(g)},[i]);const u=g=>{const{key:p}=g;a==null||a(p)},m=g=>{g.stopPropagation()},v={items:[{label:r.createElement("span",{className:c},r.createElement(le,{className:d,size:"small",value:l,suffix:"%",onClick:m,step:1,min:10,max:1e4,controls:!1,onChange:g=>{if(g&&g>0){const p=pe(g/100);a==null||a(`${p}`)}}})),key:"custom"},...[.5,1,2,3].map(g=>({key:`${g}`,label:r.createElement("span",{className:c},`${pe(g*100)}%`)}))],onClick:u,selectedKeys:[`${i||o}`]};return T.useMemo(()=>r.createElement(mo,{className:ce(s,t),menu:v},r.createElement(Oe,{icon:r.createElement($d,null),size:"small"},`${pe(parseFloat(i||"1")*100)}%`)),[t,n,o,i,a,l])},el=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M508 512m-112 0a112 112 0 1 0 224 0 112 112 0 1 0-224 0Z"}),r.createElement("path",{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3-7.7 16.2-7.7 35.2 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}))),tl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M942.3 486.4l-0.1-0.1-0.1-0.1c-36.4-76.7-80-138.7-130.7-186L760.7 351c43.7 40.2 81.5 93.7 114.1 160.9C791.5 684.2 673.4 766 512 766c-51.3 0-98.3-8.3-141.2-25.1l-54.7 54.7C374.6 823.8 439.8 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0.1-51.3zM878.3 154.2l-42.4-42.4c-3.1-3.1-8.2-3.1-11.3 0L707.8 228.5C649.4 200.2 584.2 186 512 186c-192.2 0-335.4 100.5-430.2 300.3v0.1c-7.7 16.2-7.7 35.2 0 51.5 36.4 76.7 80 138.7 130.7 186.1L111.8 824.5c-3.1 3.1-3.1 8.2 0 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0l712.8-712.8c3.1-3 3.1-8.1 0-11.2zM398.9 537.4c-1.9-8.2-2.9-16.7-2.9-25.4 0-61.9 50.1-112 112-112 8.7 0 17.3 1 25.4 2.9L398.9 537.4z m184.5-184.5C560.5 342.1 535 336 508 336c-97.2 0-176 78.8-176 176 0 27 6.1 52.5 16.9 75.4L263.3 673c-43.7-40.2-81.5-93.7-114.1-160.9C232.6 339.8 350.7 258 512 258c51.3 0 98.3 8.3 141.2 25.1l-69.8 69.8z"}),r.createElement("path",{d:"M508 624c-6.4 0-12.7-0.5-18.8-1.6l-51.1 51.1c21.4 9.3 45.1 14.4 69.9 14.4 97.2 0 176-78.8 176-176 0-24.8-5.1-48.5-14.4-69.9l-51.1 51.1c1 6.1 1.6 12.4 1.6 18.8C620 573.9 569.9 624 508 624z"}))),nl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"}))),ol=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),il=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M853.333333 170.666667H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v128a42.666667 42.666667 0 0 0 85.333333 0V256h256v554.666667H384a42.666667 42.666667 0 0 0 0 85.333333h256a42.666667 42.666667 0 0 0 0-85.333333h-85.333333V256h256v85.333333a42.666667 42.666667 0 0 0 85.333333 0V213.333333a42.666667 42.666667 0 0 0-42.666667-42.666666z"}))),al=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M0.00592 521.157814v-103.646801l430.267025 235.101281c36.191582 13.567843 70.207188 15.615819 111.870706 0.191998l440.986902-258.365013v103.614802l-435.386966 258.877007c-42.175512 18.303788-91.326944 18.303788-126.398539 0L0.00592 521.157814z"}),r.createElement("path",{d:"M0.00592 743.651242v-104.798789l406.427301 221.43744c17.2798 9.439891 40.511532 17.599797 65.119247 20.383764h27.999676c32.511624-5.023942 47.103455-10.207882 67.615218-22.943735l415.931191-258.173014v98.974855l-430.875018 268.95689c-42.111513 17.439798-95.806892 18.079791-130.878487 0.575994L0.00592 743.619242zM20.069688 246.024995L399.073306 20.971598c41.279523-26.303696 90.430954-27.967677 133.342458-4.35195l421.083131 198.621703c35.743587 17.599797 37.18357 61.311291 2.655969 81.151062l-414.043212 226.205384a165.758083 165.758083 0 0 1-133.374458 4.415949L22.725657 327.208057C9.157814 318.664155 0.90191 303.56033 0.229917 285.000545c-0.607993-18.911781 10.719876-32.159628 19.807771-38.94355z"})," ")),sl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}))),rl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792z m0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z"}),r.createElement("path",{d:"M304 456c48.6 0 88-39.4 88-88s-39.4-88-88-88-88 39.4-88 88 39.4 88 88 88z m0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}))),Ud=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M256 682.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0zM768 170.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0z"}),r.createElement("path",{d:"M707.84 316.16a42.666667 42.666667 0 0 1 0 60.330667l-331.178667 331.178666a42.666667 42.666667 0 0 1-60.330666-60.330666l331.178666-331.178667a42.666667 42.666667 0 0 1 60.330667 0z"}))),ll=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M145 96l66 746.6L511.8 928l299.6-85.4L878.7 96H145z m610.9 700.6l-244.1 69.6-245.2-69.6-56.7-641.2h603.8l-57.8 641.2z"}),r.createElement("path",{d:"M281 249l1.7 24.3 22.7 253.5h206.5v-0.1h112.9l-11.4 118.5L511 672.9v0.2h-0.8l-102.4-27.7-6.5-73.2h-91l11.3 144.7 188.6 52h1.7v-0.4l187.7-51.7 1.7-16.3 21.2-242.2 3.2-24.3H511v0.2H389.9l-8.2-94.2h352.1l1.7-19.5 4.8-47.2L742 249H511z"}))),Zd=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-0.7 5.2-2L869 536.2c14.7-12.8 14.7-35.6 0-48.4z"}))),cl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 0.3L512 465.6l-99.3-118.4-66.1-0.3c-4.4 0-8 3.5-8 8 0 1.9 0.7 3.7 1.9 5.2l130.1 155L340.5 670c-1.2 1.5-1.9 3.3-1.9 5.2 0 4.4 3.6 8 8 8l66.1-0.3L512 564.4l99.3 118.4 66 0.3c4.4 0 8-3.5 8-8 0-1.9-0.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}),r.createElement("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),Yt="node",Qd=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:m,onSelect:f,onGoToGroup:v,operations:g,isSelected:p}=e,[y,E]=T.useState(!1),[S,w]=T.useState(!1),A=T.useRef(s),b=l(d,Yt),z=l(d,Yt,"icon"),O=l(d,Yt,"title"),L=l(d,Yt,"title","input"),M=l(d,Yt,"title","icon"),I=l(d,Yt,"action"),P=l(d,Yt,"selected"),k=T.useRef(0),W=T.useRef(null);T.useEffect(()=>{var C;y===!0&&((C=W.current)===null||C===void 0||C.focus())},[y]);const F=C=>{E(!1),h==null||h({uuid:a,value:C.target.value||""})},V=C=>{A.current=C.target.value||""},j=C=>{var D;C.code==="Enter"&&(E(!1),h==null||h({uuid:a,value:((D=C==null?void 0:C.target)===null||D===void 0?void 0:D.value)||""}))},_=C=>{C.stopPropagation(),C.preventDefault()},x=C=>{C.stopPropagation(),w(!0)},Y=C=>{C.stopPropagation(),w(!1)},$=C=>{const D=Date.now(),N=D-k.current;k.current=D,f==null||f({uuids:[i],positions:[c]}),N<=300&&N>0&&(C.stopPropagation(),C.preventDefault(),E(!0))},R=C=>{C.stopPropagation(),C.preventDefault(),m==null||m({uuid:a})},H=C=>{C.stopPropagation(),C.preventDefault(),u==null||u({uuid:a,operations:{invisible:!g.invisible}})},U=C=>{C.stopPropagation(),C.preventDefault(),v==null||v({uuid:i,position:c})};return T.useMemo(()=>{A.current=s;function C(D){return D==="rect"?r.createElement(nl,{className:M}):D==="circle"?r.createElement(ol,{className:M}):D==="text"?r.createElement(il,{className:M}):D==="path"?r.createElement(Ud,{className:M}):D==="image"?r.createElement(rl,{className:M}):D==="svg"?r.createElement(sl,{className:M}):D==="group"?r.createElement(al,{className:M}):D==="html"?r.createElement(ll,{className:M}):r.createElement("span",{className:M})}return r.createElement("span",{key:a,style:n,className:ce(b,t,p?P:null),onClick:$,onMouseOver:x,onMouseLeave:Y},r.createElement("span",{className:O},C(o),r.createElement("span",null,s)),S&&r.createElement("span",{className:I},o==="group"&&r.createElement(Zd,{className:z,onClick:U}),g.invisible?r.createElement(tl,{className:z,onClick:H}):r.createElement(el,{className:z,onClick:H}),r.createElement(cl,{className:z,onClick:R})),y&&r.createElement("span",{className:L},r.createElement(_t,{ref:W,size:"small",defaultValue:s,onBlur:F,onClick:_,onKeyDown:j,onChange:V})))},[a,s,y,o,S,g,p])};function Jd(e,t){const n=[],{position:o}=t;if(Array.isArray(e)){const i=[...o];e.forEach((a,s)=>{i.push(s),n.push(dl(a,Object.assign(Object.assign({},t),{position:[...i]}))),i.pop()})}return n}const dl=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onGoToGroup:c,position:d,selectedKeys:l}=t,h={key:e.key,title:r.createElement(Qd,{parentModName:n,uuid:e.key,title:e.title,position:d,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onGoToGroup:c,isSelected:l==null?void 0:l.includes(e.key)}),children:[]};if(Array.isArray(e.children)){const u=[...d];e.children.forEach((m,f)=>{u.push(f),h.children.push(dl(m,Object.assign(Object.assign({},t),{position:[...u]}))),u.pop()})}return h},Kd=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}),r.createElement("path",{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8C574.1 404.4 544.1 392 512 392z"}))),qd=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),e3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),t3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),n3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}))),o3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H212V612h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200z"}))),i3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333zM128 469.333333v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM128 640v85.333333h85.333333v-85.333333z m0-341.333333v85.333333h85.333333v-85.333333z m341.333333 341.333333v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128zM128 810.666667v85.333333h768v-85.333333z"}))),a3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M592 928H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96zM976 0H784a48 48 0 1 0 0 96h144v144.016a48 48 0 1 0 96 0V48a48 48 0 0 0-48-48zM240 928H96v-144a48 48 0 1 0-96 0v192a48 48 0 0 0 48 48h192a48 48 0 1 0 0-96zM48 640a48 48 0 0 0 48-48V432a48 48 0 1 0-96 0v160a48 48 0 0 0 48 48zM240 0H48a48 48 0 0 0-48 48v192a48 48 0 1 0 96 0V96h144a48 48 0 1 0 0-96z m784 592V432a48 48 0 1 0-96 0v160a48 48 0 1 0 96 0zM592 0H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96z m384 736a48 48 0 0 0-48 48v144h-144a48 48 0 1 0 0 96h192a48 48 0 0 0 48-48V784a48 48 0 0 0-48-48z"}))),s3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333z m-512-170.666667v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM469.333333 640v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v768h85.333333V128z m170.666667 0v85.333333h85.333333V128z m170.666666 682.666667v85.333333h85.333334v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m-512 0v85.333333h85.333333v-85.333333z"}))),r3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333zM128 213.333333h85.333333V128H128v85.333333z m170.666667 0h85.333333V128h-85.333333v85.333333z m0 341.333334h85.333333v-85.333334h-85.333333v85.333334zM128 896h85.333333v-85.333333H128v85.333333z m341.333333 0h85.333334v-85.333333h-85.333334v85.333333zM128 554.666667h85.333333v-85.333334H128v85.333334z m0 170.666666h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m170.666667-170.666666h85.333333v-85.333334h-85.333333v85.333334z m170.666667-426.666667v768h85.333333V128h-85.333333z m-170.666667 768h85.333333v-85.333333h-85.333333v85.333333z m0-682.666667h85.333333V128h-85.333333v85.333333z m-170.666667 341.333334h85.333334v-85.333334h-85.333334v85.333334z m0-341.333334h85.333334V128h-85.333334v85.333333z m0 170.666667h85.333334v-85.333333h-85.333334v85.333333z"}))),l3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333z m0-341.333333h85.333333v-85.333334h-85.333333v85.333334z m170.666666 0h85.333334v-85.333334h-85.333334v85.333334z m0 341.333333h85.333334v-85.333333h-85.333334v85.333333zM128 725.333333h85.333333v-85.333333H128v85.333333z m0 170.666667h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333334H128v85.333334z m0-170.666667h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m341.333334-341.333333h85.333333v-85.333333h-85.333333v85.333333z m0 170.666667h85.333333v-85.333334h-85.333333v85.333334zM128 128v85.333333h768V128H128z m682.666667 597.333333h85.333333v-85.333333h-85.333333v85.333333z m-170.666667 170.666667h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-512h85.333334v-85.333333h-85.333334v85.333333z m341.333334 512h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-341.333333h85.333333v-85.333334h-85.333333v85.333334z"}))),c3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8c12.7 17.7 39 17.7 51.7 0l210.6-292c3.9-5.3 0.1-12.7-6.4-12.7z"}),r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),d3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M341.333333 512a42.666667 42.666667 0 0 0 42.666667 42.666667h256a42.666667 42.666667 0 0 0 0-85.333334H384a42.666667 42.666667 0 0 0-42.666667 42.666667z"}),r.createElement("path",{d:"M384 682.666667H307.626667A176.213333 176.213333 0 0 1 128 527.786667 170.666667 170.666667 0 0 1 298.666667 341.333333h85.333333a42.666667 42.666667 0 0 0 0-85.333333H307.626667a262.4 262.4 0 0 0-262.826667 222.293333A256 256 0 0 0 298.666667 768h85.333333a42.666667 42.666667 0 0 0 0-85.333333zM981.333333 479.573333A262.826667 262.826667 0 0 0 715.093333 256h-64.426666C616.106667 256 597.333333 275.2 597.333333 298.666667a42.666667 42.666667 0 0 0 42.666667 42.666666h76.373333A176.213333 176.213333 0 0 1 896 496.213333 170.666667 170.666667 0 0 1 725.333333 682.666667h-85.333333a42.666667 42.666667 0 0 0 0 85.333333h85.333333a256 256 0 0 0 256-288.426667z"}))),u3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M712 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM136 374h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM136 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM540 824H358c-87.3 0-158-70.7-158-158V484c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v182c0 127 103 230 230 230h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),h3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M368 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM484 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM658 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 476h-56c-4.4 0-8 3.6-8 8v182c0 87.3-70.7 158-158 158H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c127 0 230-103 230-230V484c0-4.4-3.6-8-8-8z"}))),m3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M656 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128H358c-127 0-230 103-230 230v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-87.3 70.7-158 158-158h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),f3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M368 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM666 128H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c87.3 0 158 70.7 158 158v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-127-103-230-230-230z"}))),Rs=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M896 810.666667v85.333333h-85.333333v-85.333333h85.333333z m-170.666667 0v85.333333h-85.333333v-85.333333h85.333333z m-170.666666 0v85.333333h-85.333334v-85.333333h85.333334z m-170.666667 0v85.333333H298.666667v-85.333333h85.333333z m-170.666667 0v85.333333H128v-85.333333h85.333333z m682.666667-170.666667v85.333333h-85.333333v-85.333333h85.333333zM213.333333 640v85.333333H128v-85.333333h85.333333z m0-170.666667v85.333334H128v-85.333334h85.333333z m469.333334-341.333333a213.418667 213.418667 0 0 1 213.12 204.074667L896 341.333333v213.333334h-85.333333V341.333333a128.426667 128.426667 0 0 0-120.490667-127.786666L682.666667 213.333333h-213.333334V128h213.333334zM213.333333 298.666667v85.333333H128V298.666667h85.333333z m0-170.666667v85.333333H128V128h85.333333z m170.666667 0v85.333333H298.666667V128h85.333333z"}))),g3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72z"}),r.createElement("path",{d:"M864 256H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}))),v3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M510.762667 970.666667A458.666667 458.666667 0 1 1 969.429333 512a459.178667 459.178667 0 0 1-458.666666 458.666667z m0-853.333334a394.666667 394.666667 0 1 0 394.666666 394.666667 395.093333 395.093333 0 0 0-394.666666-394.666667z"}),r.createElement("path",{d:"M512 724.48A212.48 212.48 0 1 1 724.48 512 212.736 212.736 0 0 1 512 724.48z m0-360.96A148.48 148.48 0 1 0 660.48 512 148.608 148.608 0 0 0 512 363.52z"}))),ul=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M272.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512z"}),r.createElement("path",{d:"M576.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}))),Na=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3 0.1-12.7-6.4-12.7z"}))),p3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M841.065412 337.317647v352.015059c0 46.802824-23.070118 74.752-39.936 95.111529-14.095059 17.106824-21.443765 26.684235-21.443765 41.803294V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-107.39953c0-37.526588 19.576471-61.199059 35.297882-80.173176 14.576941-17.648941 26.142118-31.563294 26.142118-56.681412V337.317647c0-18.793412-16.143059-36.502588-33.189647-36.502588-19.817412 0-24.033882 3.072-24.214588 3.19247-3.975529 5.360941-3.855059 34.273882-3.794824 57.584942 0.060235 11.384471 0.120471 24.094118-0.12047 38.068705-0.240941 16.504471-12.830118 28.792471-30.358589 29.696a30.117647 30.117647 0 0 1-29.876706-30.117647v-127.698823c0-18.492235-13.372235-32.406588-31.081411-32.406588-16.263529 0-28.190118 12.107294-29.635765 29.394823v120.651294a30.117647 30.117647 0 0 1-60.235294 0V268.047059l-0.120471-0.602353v-46.561882c0-3.975529-0.843294-38.671059-28.551529-38.671059-27.105882 0-31.201882 24.214588-31.201883 38.671059v42.345411c0 1.686588-0.662588 3.252706-0.963764 4.879059v156.250353a30.117647 30.117647 0 0 1-60.235294 0V262.686118c-2.891294-11.685647-11.324235-23.491765-28.069647-23.491765-17.227294 0-31.744 15.721412-31.744 34.334118v201.788235c0 0.421647-0.361412 0.783059-0.361412 1.204706v66.319059a30.117647 30.117647 0 0 1-60.235294 0v-50.236236c-10.601412-3.855059-25.961412-6.987294-34.755765-4.999529-7.107765 1.385412-14.275765 7.649882-18.733176 16.323765a43.309176 43.309176 0 0 0-0.542118 38.369882L345.148235 766.192941a31.563294 31.563294 0 0 1 2.108236 6.505412 32.888471 32.888471 0 0 0 35.418353 25.961412 30.238118 30.238118 0 0 1 33.310117 29.936941V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-77.462588a92.521412 92.521412 0 0 1-66.680471-67.764706L187.934118 567.055059a104.448 104.448 0 0 1 1.927529-90.774588c12.890353-24.877176 35.418353-42.706824 60.295529-47.766589 12.649412-2.590118 29.756235-1.867294 46.682353 1.566118v-43.369412c0-0.602353 0.301176-1.144471 0.361412-1.746823v-111.435294c0-52.163765 41.321412-94.569412 91.979294-94.569412 12.047059 0 23.612235 2.409412 34.093177 6.746353 11.986824-38.791529 44.152471-63.668706 86.317176-63.668706 40.237176 0 71.800471 25.419294 83.666824 63.909647 10.721882-4.517647 22.467765-6.987294 34.876235-6.987294 41.502118 0 75.776 26.744471 87.160471 64.572235 11.023059-2.409412 22.226824-2.951529 32.286117-2.951529 50.718118 0 93.485176 44.272941 93.485177 96.737882z"}))),y3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}))),w3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}),r.createElement("path",{d:"M544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}))),b3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M170.666667 298.666667a42.666667 42.666667 0 1 1-85.333334 0V256a170.666667 170.666667 0 0 1 170.666667-170.666667h42.666667a42.666667 42.666667 0 1 1 0 85.333334H256a85.333333 85.333333 0 0 0-85.333333 85.333333v42.666667z m554.666666-128a42.666667 42.666667 0 0 1 0-85.333334h42.666667a170.666667 170.666667 0 0 1 170.666667 170.666667v42.666667a42.666667 42.666667 0 0 1-85.333334 0V256a85.333333 85.333333 0 0 0-85.333333-85.333333h-42.666667z m128 554.666666a42.666667 42.666667 0 0 1 85.333334 0v42.666667a170.666667 170.666667 0 0 1-170.666667 170.666667h-42.666667a42.666667 42.666667 0 0 1 0-85.333334h42.666667a85.333333 85.333333 0 0 0 85.333333-85.333333v-42.666667zM298.666667 853.333333a42.666667 42.666667 0 0 1 0 85.333334H256a170.666667 170.666667 0 0 1-170.666667-170.666667v-42.666667a42.666667 42.666667 0 0 1 85.333334 0v42.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h42.666667z"}))),S3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M118.979048 637.074286l137.99619 66.243047 255.171048 123.587048 246.076952-119.222857 147.163429-70.485334a73.142857 73.142857 0 0 1-34.230857 97.109334l-327.119239 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 734.305524A73.142857 73.142857 0 0 1 118.979048 637.074286z m786.090666-153.063619a73.142857 73.142857 0 0 1-33.913904 97.767619L544.01219 740.205714a73.142857 73.142857 0 0 1-63.780571 0L153.136762 581.778286A73.142857 73.142857 0 0 1 117.51619 487.862857l362.300953 170.886095 32.329143 15.652572 327.119238-158.427429 65.80419-31.939047zM544.036571 139.190857l327.094858 158.403048a73.142857 73.142857 0 0 1 0 131.657143l-327.094858 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 429.251048a73.142857 73.142857 0 0 1 0-131.657143L480.256 139.215238a73.142857 73.142857 0 0 1 63.780571 0z m-31.890285 65.828572L185.027048 363.422476l327.119238 158.427429 327.119238-158.427429L512.146286 205.04381z"}))),E3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-696 72h136v656H184V184z m656 656H384V384h456v456zM384 320V184h456v136H384z"}))),hl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8c-16.4 12.8-16.4 37.5 0 50.3l450.8 352.1c5.3 4.1 12.9 0.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}))),C3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 42.666667a469.333333 469.333333 0 1 0 469.333333 469.333333A469.333333 469.333333 0 0 0 512 42.666667z m0 864a394.666667 394.666667 0 1 1 394.666667-394.666667 395.146667 395.146667 0 0 1-394.666667 394.666667z"}),r.createElement("path",{d:"M304.906667 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}),r.createElement("path",{d:"M512 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333334 0 66.666667 66.666667 0 1 0-133.333334 0Z"}),r.createElement("path",{d:"M719.093333 512m-66.666666 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}))),x3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M935.253333 111.786667a42.666667 42.666667 0 0 0-23.04-23.04A42.666667 42.666667 0 0 0 896 85.333333h-256a42.666667 42.666667 0 0 0 0 85.333334h153.173333L170.666667 793.173333V640a42.666667 42.666667 0 0 0-85.333334 0v256a42.666667 42.666667 0 0 0 3.413334 16.213333 42.666667 42.666667 0 0 0 23.04 23.04A42.666667 42.666667 0 0 0 128 938.666667h256a42.666667 42.666667 0 0 0 0-85.333334H230.826667L853.333333 230.826667V384a42.666667 42.666667 0 0 0 85.333334 0V128a42.666667 42.666667 0 0 0-3.413334-16.213333z"}))),M3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M128 128h64v389.312A384.32 384.32 0 0 1 506.688 832H896v64H192a64 64 0 0 1-64-64V128z m313.6 704A320.384 320.384 0 0 0 192 582.4V832h249.6z"}))),z3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M929.19 352.19c3.12 3.12 3.12 8.19 0 11.31L363.51 929.19c-3.12 3.12-8.19 3.12-11.31 0L94.81 671.81c-3.12-3.12-3.12-8.19 0-11.31L660.49 94.81c3.12-3.12 8.19-3.12 11.31 0l257.39 257.38z m-424.26 5.66l108.89 108.89c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0L456.85 405.93l-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-62.23 62.23 161.22 161.22 469.52-469.52-161.23-161.21-62.23 62.23 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91z"}))),I3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M725.333333 341.333333a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666666a42.666667 42.666667 0 1 0 42.666667 42.666666 42.666667 42.666667 0 0 0-42.666667-42.666666z"}),r.createElement("path",{d:"M640 256H85.333333a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM938.666667 256h-128a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333zM512 640a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666667 42.666667 42.666667 42.666667 0 0 0-42.666667-42.666667z"}),r.createElement("path",{d:"M426.666667 554.666667H85.333333a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM938.666667 554.666667h-341.333334a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM298.666667 938.666667a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666666 42.666667 42.666667 42.666667 0 0 0-42.666666-42.666667z"}),r.createElement("path",{d:"M938.666667 853.333333H384a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM213.333333 853.333333H85.333333a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333z"}))),A3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M802.742857 777.485714c49.942857 0 90.742857-41.371429 90.742857-92 0-61.142857-90.742857-160.914286-90.742857-160.914285S712 624.342857 712 685.485714c0 50.628571 40.8 92 90.742857 92z m-430.971428-50.4c8.114286 8.114286 21.257143 8.114286 29.257142 0l292.685715-292.571428c8.114286-8.114286 8.114286-21.257143 0-29.257143l-292.571429-292.571429c-0.685714-0.685714-1.485714-1.371429-2.285714-1.942857l-89.371429-89.371428a10.411429 10.411429 0 0 0-14.628571 0l-54.857143 54.857142a10.411429 10.411429 0 0 0 0 14.628572l76.8 76.8-237.485714 237.6c-8.114286 8.114286-8.114286 21.257143 0 29.257143l292.457143 292.571428z m14.742857-512.685714l204.457143 204.457143H182.171429l204.342857-204.457143zM960 859.428571H64c-5.028571 0-9.142857 4.114286-9.142857 9.142858v91.428571c0 5.028571 4.114286 9.142857 9.142857 9.142857h896c5.028571 0 9.142857-4.114286 9.142857-9.142857v-91.428571c0-5.028571-4.114286-9.142857-9.142857-9.142858z"}))),T3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}))),N3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM506.3 399.3c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zM517.7 624.7c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"}))),D3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355c-3.2-4.1-9.4-4.1-12.6 0l-112 141.7c-4.1 5.2-0.4 12.9 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}))),{DirectoryTree:P3}=Zs,ks="base-element-tree",Ki=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},ml=r.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,selectedKeys:l,onDrop:h,defaultExpandedKeys:u,onDelete:m,onExpand:f,onGoToGroup:v}=e,g=(y,E)=>{const w=[Ki(E.node.pos)],A=[y[0]];d==null||d({uuids:A,positions:w})},p=({uuid:y})=>{m==null||m({uuid:y})};return T.useMemo(()=>{const y=Jd(a||[],{parentModName:ks,generateClassName:G,onTitleChange:s,onOperationToggle:c,onDelete:p,onGoToGroup:v,position:[],selectedKeys:l||[]});return r.createElement(P3,{ref:t,height:n,style:i,className:ce(G(ks),o),showLine:!0,blockNode:!0,selectedKeys:l,switcherIcon:r.createElement(Na,null),icon:null,onSelect:g,treeData:y,defaultExpandedKeys:u,onExpand:f,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:E=>{const{dragNode:S,node:w,dropToGap:A,dropPosition:b}=E,z=Ki(S.pos),O=Ki(w.pos);A===!0&&b>=0?O[O.length-1]=b:w.dragOverGapBottom===!0?O[O.length-1]=O[O.length-1]+1:w.dragOverGapTop===!0?O[O.length-1]=Math.max(0,O[O.length-1]-1):w.dragOver===!0&&O.push(0),h==null||h({from:z,to:O})}})},[o,i,g,a,l])}),$t="node",L3=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:m,onSelect:f,operations:v,isSelected:g}=e,[p,y]=T.useState(!1),[E,S]=T.useState(!1),w=T.useRef(s),A=l(d,$t),b=l(d,$t,"icon"),z=l(d,$t,"title"),O=l(d,$t,"title","input"),L=l(d,$t,"title","icon"),M=l(d,$t,"action"),I=l(d,$t,"selected"),P=T.useRef(0),k=T.useRef(null);T.useEffect(()=>{var H;p===!0&&((H=k.current)===null||H===void 0||H.focus())},[p]);const W=H=>{y(!1),h==null||h({uuid:a,value:H.target.value||""})},F=H=>{w.current=H.target.value||""},V=H=>{var U;H.code==="Enter"&&(y(!1),h==null||h({uuid:a,value:((U=H==null?void 0:H.target)===null||U===void 0?void 0:U.value)||""}))},j=H=>{H.stopPropagation(),H.preventDefault()},_=H=>{H.stopPropagation(),S(!0)},x=H=>{H.stopPropagation(),S(!1)},Y=H=>{const U=Date.now(),C=U-P.current;P.current=U,f==null||f({uuids:[i],positions:[c]}),C<=300&&C>0&&(H.stopPropagation(),H.preventDefault(),y(!0))},$=H=>{H.stopPropagation(),H.preventDefault(),m==null||m({uuid:a})},R=H=>{H.stopPropagation(),H.preventDefault(),u==null||u({uuid:a,operations:{invisible:!v.invisible}})};return T.useMemo(()=>(w.current=s,r.createElement("span",{key:a,style:n,className:ce(A,t,g?I:null),onClick:Y,onMouseOver:_,onMouseLeave:x},r.createElement("span",{className:z},r.createElement(y3,{className:L}),r.createElement("span",null,s)),E&&r.createElement("span",{className:M},v.invisible?r.createElement(tl,{className:b,onClick:R}):r.createElement(el,{className:b,onClick:R}),r.createElement(cl,{className:b,onClick:$})),p&&r.createElement("span",{className:O},r.createElement(_t,{ref:k,size:"small",defaultValue:s,onBlur:W,onClick:j,onKeyDown:V,onChange:F})))),[a,s,p,o,E,v,g])};function O3(e,t){const n=[],{position:o}=t;if(Array.isArray(e)){const i=[...o];e.forEach((a,s)=>{i.push(s),n.push(R3(a,Object.assign(Object.assign({},t),{position:[...i]}))),i.pop()})}return n}const R3=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,position:c,selectedKeys:d}=t;return{key:e.key,title:r.createElement(L3,{parentModName:n,uuid:e.key,title:e.title,position:c,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,isSelected:d==null?void 0:d.includes(e.key)})}},{DirectoryTree:k3}=Zs,js="base-page-tree",qi=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},j3=r.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,selectedKeys:l,onDrop:h,defaultExpandedKeys:u,expandedKeys:m,onDelete:f}=e,v=(p,y)=>{const S=[qi(y.node.pos)],w=[p[0]];d==null||d({uuids:w,positions:S})},g=({uuid:p})=>{f==null||f({uuid:p})};return T.useMemo(()=>{const p=O3(a||[],{parentModName:js,generateClassName:G,onTitleChange:s,onOperationToggle:c,onDelete:g,position:[],selectedKeys:l||[]});return r.createElement(k3,{ref:t,height:n,style:i,className:ce(G(js),o),showLine:!0,blockNode:!0,multiple:!0,selectedKeys:l,switcherIcon:r.createElement(Na,null),icon:null,onSelect:v,treeData:p,defaultExpandedKeys:u,expandedKeys:m,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:y=>{const{dragNode:E,node:S,dropToGap:w,dropPosition:A}=y,b=qi(E.pos),z=qi(S.pos);w===!0&&A>=0?z[z.length-1]=A:S.dragOverGapBottom===!0?z[z.length-1]=z[z.length-1]+1:S.dragOverGapTop===!0?z[z.length-1]=Math.max(0,z[z.length-1]-1):S.dragOver===!0&&z.push(0),h==null||h({from:b,to:z})}})},[o,i,v,a,l])});var _3=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const V3=e=>{const{value:t,onChange:n}=e,o=_3(e,["value","onChange"]),i=s=>{n==null||n(s)},a=()=>{i(!t)};return r.createElement(Oe,Object.assign({},o,{type:t?"primary":"default",onClick:a}))},B3="ElementDetail",Vt=()=>{const[e]=Ea(B3);return e},Gn="base-element-basic-attribute",It=e=>Ce.number(e*1)?pe(e*1):e,_s=e=>{if(Ce.number(e*1)){const t=pe(e*1);return rt(t)}return e},F3=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=T.useRef(null),c=G(Gn),d=G(Gn,"row"),l=G(Gn,"col"),h=G(Gn,"input"),u=G(Gn,"form-item"),m=Vt(),f=v=>{var g;((g=o==null?void 0:o.operations)===null||g===void 0?void 0:g.limitRatio)===!0&&(v!=null&&v.hasOwnProperty("w")?v.h=pe(v.w/o.w*o.h):v!=null&&v.hasOwnProperty("h")&&(v.w=pe(v.h/o.h*o.w))),i==null||i(v)};return T.useEffect(()=>{var v;const{type:g,x:p,y,w:E,h:S,angle:w=0,operations:A={}}=o||{},b={x:p,y,w:E,h:S,angle:w,operations:{limitRatio:A.limitRatio}};g==="group"&&(b.operations.deepResize=A.deepResize),(v=s.current)===null||v===void 0||v.setFieldsValue(b)},[o]),T.useMemo(()=>r.createElement(K,{ref:s,style:n,className:ce(c,t),onValuesChange:f},r.createElement(de,{className:d},r.createElement(J,{span:10,className:l},r.createElement(K.Item,{className:u,name:"x"},r.createElement(le,{className:h,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:It,parser:It}))),r.createElement(J,{span:10,className:l},r.createElement(K.Item,{className:u,name:"y"},r.createElement(le,{className:h,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:It,parser:It})))),r.createElement(de,{className:d},r.createElement(J,{span:10,className:l},r.createElement(K.Item,{className:u,name:"w"},r.createElement(le,{className:h,size:"small",placeholder:"Width",prefix:m.w,disabled:a,formatter:It,parser:It}))),r.createElement(J,{span:10,className:l},r.createElement(K.Item,{className:u,name:"h"},r.createElement(le,{className:h,size:"small",placeholder:"Height",prefix:m.h,disabled:a,formatter:It,parser:It}))),r.createElement(J,{span:4,className:l},r.createElement(K.Item,{className:u,name:["operations","limitRatio"]},r.createElement(V3,{icon:r.createElement(d3,null),size:"small",disabled:a})))),r.createElement(de,{className:d},r.createElement(J,{span:10,className:l},r.createElement(K.Item,{className:u,name:"angle"},r.createElement(le,{className:h,size:"small",placeholder:"Angle",prefix:r.createElement(M3,{style:{fontSize:14}}),disabled:a,formatter:_s,parser:_s,suffix:"°"})))),(o==null?void 0:o.type)==="group"&&r.createElement(de,{className:d},r.createElement(J,{span:18,className:l},m.deepResizeInGroup),r.createElement(J,{span:6,className:l},r.createElement(K.Item,{className:u,name:["operations","deepResize"]},r.createElement(Us,{size:"small"}))))),[m,a,o])},Fe="base-element-field-multiple-color-picker",W3=["transparent","#FFFFFF","#000000","#AAAAAA","#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"],H3=({value:e="",onChange:t,className:n,diabledColorBlocks:o=!0})=>{const i=G(Fe,"color-block"),a=G(Fe,"color-block-active");return r.createElement(r.Fragment,null,!o&&r.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:10,paddingBottom:0}},W3.map(s=>r.createElement(Il,{className:ce(i,{[a]:s.toUpperCase()===(e==null?void 0:e.toUpperCase())}),key:s,color:s,prefixCls:"rc-color-picker",onClick:()=>{t==null||t(s)}}))),r.createElement(Al,{className:n,value:new Tl(e),onChange:s=>{const c=`#${s.toHex8().toUpperCase()}`,d=c.endsWith("FF")?`#${s.toHex().toUpperCase()}`:c;t==null||t(d)}}))},fl=16,Vs=e=>{var t,n;const o=(t=e.currentTarget.parentElement)===null||t===void 0?void 0:t.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),a=e.clientX-o.x-fl/2;let s=parseFloat((n=a/i.width)===null||n===void 0?void 0:n.toFixed(2));return s=Math.min(Math.max(s,0),1),s};function G3(e){const{mode:t,value:n,internalColor:o,internalLinearGradient:i,internalRadialGradient:a,currentPickedColor:s,onChange:c,onSelectStop:d}=e,[l,h]=T.useState(pi(n)),[u,m]=T.useState(null),f=T.useRef(!1),v=G(Fe,"gradient-root"),g=G(Fe,"gradient-delete"),p=G(Fe,"gradient"),y=G(Fe,"gradient-bar"),E=G(Fe,"gradient-point"),S=G(Fe,"gradient-point-active");T.useEffect(()=>{var M;const I=pi(n);h(I),["linear-gradient","radial-gradient"].includes(n==null?void 0:n.type)&&(u||m((M=n==null?void 0:n.stops)===null||M===void 0?void 0:M[0]))},[n]),T.useEffect(()=>{u?d==null||d(Object.assign({},u)):d==null||d(u)},[u]);const w=M=>{M.stopPropagation(),f.current=!0;const I=Vs(M);let P=null;if(t==="linear-gradient"?P=i:t==="radial-gradient"&&(P=a),P){const k=[...P.stops];for(let F=0;F<k.length;F++){const V=k[F],j=k[F+1],_={offset:I,color:s};if(V.offset===I)break;if(I<V.offset){k.unshift(_),m(_);break}else if(V.offset<I&&I<(j==null?void 0:j.offset)){k.splice(F+1,0,_),m(_);break}else if(I>V.offset&&!j){k.push(_),m(_);break}if(!j)break}const W=Object.assign(Object.assign({},P),{stops:k});c==null||c(W)}},A=M=>{if(f.current===!0&&u){const I=Vs(M);let P=null;if(t==="linear-gradient"?P=i:t==="radial-gradient"&&(P=a),P){const k=[...P.stops];for(let V=0;V<k.length;V++){const j=k[V];if(j.offset===u.offset){j.offset=I,m(Object.assign({},j));break}}const W=k.sort((V,j)=>V.offset-j.offset),F=Object.assign(Object.assign({},P),{stops:W});c==null||c(F)}}},b=M=>{M.stopPropagation(),f.current=!1},z=(M,I)=>{M.stopPropagation(),m(I),f.current=!0},O=()=>{let M=null;t==="linear-gradient"?M=i:t==="radial-gradient"&&(M=a);let I=-1;if(M&&u){const P=[...M.stops];for(let k=0;k<P.length;k++)if(P[k].offset===u.offset){I=k;break}if(I>=0){P.splice(I,1);const k=Object.assign(Object.assign({},M),{stops:P});c==null||c(k)}}},L=()=>{f.current=!1};return T.useMemo(()=>{var M,I,P;return r.createElement(r.Fragment,null,(t==="linear-gradient"||t==="radial-gradient")&&r.createElement("div",{className:v},r.createElement("div",{className:p,"data-css":l,style:{background:l}},r.createElement("div",{className:y,onMouseDown:w,onMouseUp:b,onMouseMove:A,onMouseLeave:b},(P=(I=(M=t==="linear-gradient"?i:a)===null||M===void 0?void 0:M.stops)===null||I===void 0?void 0:I.map)===null||P===void 0?void 0:P.call(I,(k,W)=>r.createElement("span",{key:W,className:ce({[E]:!0,[S]:(u==null?void 0:u.offset)===k.offset}),style:{left:`calc(${k.offset*100}% - ${fl/2}px)`,background:k.color},onMouseDown:F=>{z(F,k)},onMouseUp:L})))),r.createElement("div",{className:g,onClick:k=>{k.stopPropagation(),O()}},r.createElement(g3,null))))},[t,l,s,o,i,a,u])}function Bs(e){let t="solid";return e&&(e!=null&&e.type)&&(t=e.type),t}function Y3(e){const{className:t,value:n,onChange:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,[c,d]=T.useState(pi(n)),[l,h]=T.useState(Bs(n)),[u,m]=T.useState("#000000"),[f,v]=T.useState(null),[g,p]=T.useState(null),[y,E]=T.useState(null),S=T.useRef(null),w=T.useRef(null),A=T.useRef(null),b=G(Fe),z=G(Fe,"header"),O=G(Fe,"internal-picker"),L=G(Fe,"radio-group"),M=G(Fe,"row"),I=G(Fe,"col"),P=G(Fe,"input"),k=G(Fe,"form-item");T.useEffect(()=>{d(pi(n)),h(Bs(n)),typeof n=="string"?(v(n),m(n)):(n==null?void 0:n.type)==="linear-gradient"?p(n):(n==null?void 0:n.type)==="radial-gradient"&&E(n)},[n]),T.useEffect(()=>{var _,x;l==="linear-gradient"&&(n==null?void 0:n.type)===l?(_=w.current)===null||_===void 0||_.setFieldsValue(n):l==="radial-gradient"&&(n==null?void 0:n.type)===l&&((x=A.current)===null||x===void 0||x.setFieldsValue(n))},[l,n]);const W=_=>{var x,Y,$,R,H,U;let C;_==="linear-gradient"?(C={type:"linear-gradient",start:{x:0,y:0},end:{x:0,y:(i==null?void 0:i.h)||0},stops:[]},typeof n=="string"?(C.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],p(C)):(n==null?void 0:n.type)==="radial-gradient"&&(C.stops=[...(n==null?void 0:n.stops)||[]],p(C)),(x=w.current)===null||x===void 0||x.setFieldsValue(C)):_==="radial-gradient"?(C={type:"radial-gradient",inner:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:0},outer:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:Math.min(((i==null?void 0:i.w)||0)/2,((i==null?void 0:i.h)||0)/2)},stops:[]},typeof n=="string"?(C.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],E(C)):(n==null?void 0:n.type)==="linear-gradient"&&(C.stops=[...(n==null?void 0:n.stops)||[]],E(C)),(Y=A.current)===null||Y===void 0||Y.setFieldsValue(C)):_==="solid"&&(C=n,(n==null?void 0:n.type)==="linear-gradient"?(C=((R=($=n==null?void 0:n.stops)===null||$===void 0?void 0:$[0])===null||R===void 0?void 0:R.color)||"#000000",v(C)):(n==null?void 0:n.type)==="radial-gradient"&&(C=((U=(H=n==null?void 0:n.stops)===null||H===void 0?void 0:H[0])===null||U===void 0?void 0:U.color)||"#000000",v(C))),C&&(o==null||o(C))},F=_=>{if(l==="solid")o==null||o(_.color);else if(S.current){if(l==="linear-gradient"&&g&&Array.isArray(g==null?void 0:g.stops)){const x=[...g.stops];for(let $=0;$<x.length;$++)if(x[$].offset===S.current.offset){x[$].color=_.color;break}const Y=Object.assign(Object.assign({},g),{stops:x});p(Y),o==null||o(Y)}else if(l==="radial-gradient"&&y&&Array.isArray(y==null?void 0:y.stops)){const x=[...y.stops];for(let $=0;$<x.length;$++)if(x[$].offset===S.current.offset){x[$].color=_.color;break}const Y=Object.assign(Object.assign({},y),{stops:x});E(Y),o==null||o(Y)}}},V=_=>{const x=Object.assign({},g);_!=null&&_.start&&(x.start=Object.assign(Object.assign({},x.start),_.start)),_!=null&&_.end&&(x.end=Object.assign(Object.assign({},x.end),_.end)),o==null||o(x)},j=_=>{const x=Object.assign({},y);_!=null&&_.inner&&(x.inner=Object.assign(Object.assign({},x.inner),_.inner)),_!=null&&_.outer&&(x.outer=Object.assign(Object.assign({},x.outer),_.outer)),o==null||o(x)};return T.useMemo(()=>r.createElement("div",{className:ce(b,t)},!a&&!s&&r.createElement("div",{className:z},r.createElement(et.Group,{className:L,size:"small",buttonStyle:"solid",value:l,onChange:({target:{value:_}})=>{W(_)}},r.createElement(et.Button,{value:"solid"},r.createElement(A3,null)),!a&&r.createElement(et.Button,{value:"linear-gradient"},r.createElement(x3,null)),!s&&r.createElement(et.Button,{value:"radial-gradient"},r.createElement(v3,null)))),!a&&l==="linear-gradient"&&r.createElement("div",{style:{marginBottom:10}},r.createElement(K,{ref:w,onValuesChange:V},r.createElement(de,{className:M},r.createElement(J,{className:I,span:"4"},"Start"),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["start","x"]},r.createElement(le,{className:P,size:"small",prefix:"X"}))),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["start","y"]},r.createElement(le,{className:P,size:"small",prefix:"Y"})))),r.createElement(de,{className:M},r.createElement(J,{className:I,span:"4"},"End"),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["end","x"]},r.createElement(le,{className:P,size:"small",prefix:"X"}))),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["end","y"]},r.createElement(le,{className:P,size:"small",prefix:"Y"})))))),!s&&l==="radial-gradient"&&r.createElement("div",{style:{marginBottom:10}},r.createElement(K,{ref:A,onValuesChange:j},r.createElement(de,{className:M},r.createElement(J,{className:I,span:"4"},"Inner"),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["inner","x"]},r.createElement(le,{className:P,size:"small",prefix:"X"}))),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["inner","y"]},r.createElement(le,{className:P,size:"small",prefix:"Y"})))),r.createElement(de,{className:M},r.createElement(J,{className:I,span:"4"}),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["inner","radius"]},r.createElement(le,{className:P,size:"small",prefix:"R"})))),r.createElement(de,{className:M},r.createElement(J,{className:I,span:"4"},"Outer"),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["outer","x"]},r.createElement(le,{className:P,size:"small",prefix:"X"}))),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["outer","y"]},r.createElement(le,{className:P,size:"small",prefix:"Y"})))),r.createElement(de,{className:M},r.createElement(J,{className:I,span:"4"}),r.createElement(J,{className:I,span:"10"},r.createElement(K.Item,{className:k,name:["outer","radius"]},r.createElement(le,{className:P,size:"small",prefix:"R"})))))),(!a||!s)&&(l==="linear-gradient"||l==="radial-gradient")&&r.createElement(G3,{mode:l,value:n,currentPickedColor:u,internalColor:f,internalLinearGradient:g,internalRadialGradient:y,onChange:_=>{(_==null?void 0:_.type)==="linear-gradient"?(p(_),o==null||o(_)):(_==null?void 0:_.type)==="radial-gradient"&&(E(_),o==null||o(_))},onSelectStop:_=>{_!=null&&_.color&&m(_.color),S.current=_}}),r.createElement(H3,{diabledColorBlocks:["linear-gradient","radial-gradient"].includes(l),value:u,className:O,onChange:_=>{m(_),F({color:_})}})),[l,c,f,g,y,u,a,s])}const Fs="base-element-field-multiple-color";function on(e){const{value:t,onChange:n,disabled:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,c=Vt(),l=(p=>{let y="";return typeof p=="string"?y=p:["linear-gradient","radial-gradient"].includes(p==null?void 0:p.type)&&(y=c.gradient),y})(t),h=typeof t=="string",{container:u,getContainer:m}=T.useContext(an),f=G(Fs),v=G(Fs,"preview"),g=T.useRef(u);return T.useEffect(()=>{!g.current&&u&&(g.current=u)},[u]),T.useMemo(()=>{const p=sc(t||"transparent");return r.createElement(r.Fragment,null,r.createElement(_t,{className:f,size:"small",disabled:o,prefix:o?r.createElement("span",null):r.createElement(Qs,{placement:"left",getPopupContainer:m,style:{padding:0},content:r.createElement(Y3,{value:t,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s,onChange:n}),trigger:"click"},r.createElement("span",{className:v,style:{background:p}})),readOnly:!h,value:l,onChange:y=>{n==null||n(y.target.value)}}))},[t,n,o,i])}const ea=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 384a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m0 170.666667a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m170.666667 0a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m-170.666667 170.666666a42.666667 42.666667 0 1 0-42.666667-42.666666 42.666667 42.666667 0 0 0 42.666667 42.666666z m341.333333-597.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v682.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h682.666666a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667z m-42.666666 682.666667H213.333333V213.333333h597.333334zM341.333333 554.666667a42.666667 42.666667 0 1 0-42.666666-42.666667 42.666667 42.666667 0 0 0 42.666666 42.666667z"}))),Yn="base-element-border-attribute",ba=4;function $n(e){const{borderRadius:t,borderWidth:n,borderColor:o,boxSizing:i,borderDash:a}=(e==null?void 0:e.detail)||{};let s="solid",c=ba;Array.isArray(a)&&(a==null?void 0:a.length)>0&&a[0]>=1&&typeof n=="number"&&(s="dash",c=Math.ceil(a[0]));const d={borderRadiusList:[0,0,0,0],borderWidthList:[0,0,0,0],borderColor:o,borderType:s,boxSizing:i,borderDashNum:c};return typeof t=="number"?(d.borderRadius=t,d.borderRadiusList=[t,t,t,t]):Array.isArray(t)?d.borderRadiusList=[t[0]||0,t[1]||0,t[2]||0,t[3]||0]:d.borderRadius=0,typeof n=="number"?(d.borderWidth=n,d.borderWidthList=[n,n,n,n]):Array.isArray(n)?d.borderWidthList=[n[0]||0,n[1]||0,n[2]||0,n[3]||0]:d.borderWidth=0,d}const $3=e=>{var t,n;const{className:o,style:i,element:a,disabled:s,onChange:c}=e,d=T.useRef(null),l=G(Yn),h=G(Yn,"row"),u=G(Yn,"col"),m=G(Yn,"input"),f=G(Yn,"form-item"),[v,g]=T.useState(Array.isArray((t=a==null?void 0:a.detail)===null||t===void 0?void 0:t.borderRadius)),[p,y]=T.useState(Array.isArray((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.borderWidth)),[E,S]=T.useState(p),w=Vt(),A=b=>{var z,O;const L=$n(a),{borderColor:M,boxSizing:I,borderType:P,borderDashNum:k}=b,W={};if(M&&(W.borderColor=M),I&&(W.boxSizing=I),p===!0&&b.borderWidthList){const F=[0,0,0,0],V=Array.from((b==null?void 0:b.borderWidthList)||[null,null,null,null]);for(let j=0;j<4;j++){const _=V[j];typeof _=="number"?F[j]=_:F[j]=((z=L==null?void 0:L.borderWidthList)===null||z===void 0?void 0:z[j])||0,W.borderWidth=F}}else typeof b.borderWidth=="number"&&(W.borderWidth=b.borderWidth);if(v===!0&&b.borderRadiusList){const F=[0,0,0,0],V=Array.from((b==null?void 0:b.borderRadiusList)||[null,null,null,null]);for(let j=0;j<4;j++){const _=V[j];typeof _=="number"?F[j]=_:F[j]=((O=L==null?void 0:L.borderRadiusList)===null||O===void 0?void 0:O[j])||0,W.borderRadius=F}}else typeof b.borderRadius=="number"&&(W.borderRadius=b.borderRadius);p===!0?W.borderDash=[]:P==="solid"?W.borderDash=[]:P==="dash"?W.borderDash=[ba,ba]:k&&k>0&&(W.borderDash=[k,k]),c==null||c({detail:W})};return T.useEffect(()=>{var b,z,O;const L=Array.isArray((b=a==null?void 0:a.detail)===null||b===void 0?void 0:b.borderWidth),M=Array.isArray((z=a==null?void 0:a.detail)===null||z===void 0?void 0:z.borderRadius);y(L),g(M),S(L);const I=$n(a);(O=d.current)===null||O===void 0||O.setFieldsValue(I)},[a]),T.useMemo(()=>{const b=$n(a);return r.createElement(K,{ref:d,style:i,className:ce(l,o),onValuesChange:A},r.createElement(r.Fragment,null,r.createElement(de,{className:h},r.createElement(J,{span:16,className:u},p?r.createElement(_t,{className:m,size:"small",prefix:r.createElement(ea,{style:{fontSize:14}}),disabled:!0,value:w.mixedBorderWidth}):r.createElement(K.Item,{className:f,name:"borderWidth"},r.createElement(le,{className:m,size:"small",min:0,placeholder:"Border Width",prefix:r.createElement(ea,{style:{fontSize:14}}),disabled:s||p}))),r.createElement(J,{span:4,className:u},r.createElement(Oe,{icon:r.createElement(ea,null),size:"small",disabled:s,type:p?"primary":"default",onClick:()=>{var z;const O=!p;if(y(O),S(O),!O){const L=$n(a),M=L.borderWidth||((z=L.borderWidthList)===null||z===void 0?void 0:z[0])||0;A({borderWidth:M})}}}))),p&&r.createElement(r.Fragment,null,r.createElement(de,{className:h},r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderWidthList",0]},r.createElement(le,{className:m,size:"small",prefix:r.createElement(l3,null),disabled:s||!p,min:0}))),r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderWidthList",1]},r.createElement(le,{className:m,size:"small",prefix:r.createElement(r3,null),disabled:s||!p,min:0})))),r.createElement(de,{className:h},r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderWidthList",2]},r.createElement(le,{className:m,size:"small",prefix:r.createElement(i3,null),disabled:s||!p,min:0}))),r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderWidthList",3]},r.createElement(le,{className:m,size:"small",prefix:r.createElement(s3,null),disabled:s||!p,min:0})))))),!["circle"].includes(a==null?void 0:a.type)&&r.createElement(r.Fragment,null,r.createElement(de,{className:h},r.createElement(J,{span:16,className:u},v?r.createElement(_t,{className:m,size:"small",prefix:r.createElement(Rs,{style:{fontSize:14}}),disabled:!0,value:w.mixedBorderRadius}):r.createElement(K.Item,{className:f,name:"borderRadius"},r.createElement(le,{className:m,size:"small",placeholder:"Radius",prefix:r.createElement(Rs,{style:{fontSize:14}}),disabled:s||v||E,min:0}))),r.createElement(J,{span:4,className:u},r.createElement(Oe,{icon:r.createElement(b3,null),size:"small",disabled:s||E,type:v?"primary":"default",onClick:()=>{var z;const O=!v;if(g(O),!O){const L=$n(a),M=L.borderRadius||((z=L.borderRadiusList)===null||z===void 0?void 0:z[0])||0;A({borderRadius:M})}}}))),v&&r.createElement(r.Fragment,null,r.createElement(de,{className:h},r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderRadiusList",0]},r.createElement(le,{className:m,size:"small",placeholder:"",prefix:r.createElement(m3,null),disabled:s||!v||E,min:0}))),r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderRadiusList",1]},r.createElement(le,{className:m,size:"small",placeholder:"",prefix:r.createElement(f3,null),disabled:s||!v||E,min:0})))),r.createElement(de,{className:h},r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderRadiusList",2]},r.createElement(le,{className:m,size:"small",placeholder:"",prefix:r.createElement(u3,null),disabled:s||!v||E,min:0}))),r.createElement(J,{span:12,className:u},r.createElement(K.Item,{className:f,name:["borderRadiusList",3]},r.createElement(le,{className:m,size:"small",placeholder:"",prefix:r.createElement(h3,null),disabled:s||!v||E,min:0})))))),r.createElement(de,{className:h},r.createElement(J,{className:u,span:"11"},r.createElement(K.Item,{className:f,name:"boxSizing"},r.createElement(We,{size:"small",disabled:s},r.createElement(We.Option,{value:"border-box"},w.inside),r.createElement(We.Option,{value:"content-box"},w.outside),r.createElement(We.Option,{value:"center-line"},w.centerLine)))),r.createElement(J,{className:u,span:"13"},r.createElement(K.Item,{className:f,name:"borderColor"},r.createElement(on,{elementSize:a?vo(a):void 0,disabled:s,disabledLinearGradient:!0,disabledRadialGradient:!0})))),r.createElement(de,{className:h},r.createElement(J,{className:u,span:"11"},r.createElement(K.Item,{className:f,name:"borderType"},r.createElement(We,{size:"small",disabled:s||p},r.createElement(We.Option,{value:"solid"},w.solid),r.createElement(We.Option,{value:"dash"},w.dash)))),r.createElement(J,{className:u,span:"13"},b.borderType==="dash"&&r.createElement(K.Item,{className:f,name:"borderDashNum"},r.createElement(le,{disabled:s||p,className:m,size:"small",style:{width:"100%"},prefix:r.createElement(a3,{style:{fontSize:14}})})))))},[w,a,s,v,p,E])},X3="base-element-detail-circle",U3=e=>{const{className:t,style:n}=e,o=G(X3);return T.useMemo(()=>r.createElement("div",{style:n,className:ce(o,t)}),[n,t])};var Z3=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{TextArea:Q3}=_t,vn="base-element-field-image-picker",{useCallback:Ws}=r,J3=["image/png","image/jpeg","image/jpg","image/png"],K3=({value:e="",onChange:t})=>{const[n,o]=T.useState(e),[i,a]=T.useState("free"),s=G(vn),c=G(vn,"box"),d=G(vn,"entity"),l=G(vn,"action"),h=G(vn,"action-text"),u=G(vn,"action-upload"),m=Ws(p=>{const y=p||"";let E=3;const S=300;return y.length>128&&(E=10),{rows:E,width:S}},[n]),f=p=>{t==null||t(p||e)},v=p=>{o(p),Ce.imageSrc(p)&&f(p)},g=Ws(()=>{i!=="picking"&&(Ca({success:p=>Z3(void 0,void 0,void 0,function*(){if(J3.includes(p.file.type)!==!0){co.error(`File's type "${p.file.type}" is not supported!`);return}try{const y=yield nc(p.file);v(y.toString())}catch{co.error(`Failed to parse file ${p.file.name}`)}a("free")}),error:p=>{console.log(p),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return T.useMemo(()=>r.createElement("div",{className:s},r.createElement("div",{className:c},r.createElement("img",{className:d,src:e||n}),r.createElement("div",{className:l},r.createElement("div",{className:h},r.createElement(Qs,{content:()=>r.createElement("div",null,r.createElement(Q3,{value:e||n,style:{width:m(e||n).width},rows:m(e||n).rows,onChange:p=>{v(p.target.value||"")}})),trigger:"click"},r.createElement("span",{style:{display:"inline-block",width:"100%",height:"100%",lineHeight:"50px"}},"URL"))),r.createElement("div",{onClick:g,className:u},r.createElement("span",null,"Upload"))))),[e,n])},q3="base-element-detail-image",e6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=G(q3),l=T.useRef(null),h=m=>{const{src:f=""}=(m==null?void 0:m.detail)||{};return{src:f,imageResource:(a==null?void 0:a(f))||""}},u=m=>{const f={};if(m!=null&&m.imageResource){const{assetId:v}=s({type:"image",value:m.imageResource});v&&Kt(v)&&(f.src=v)}i==null||i({detail:f})};return T.useEffect(()=>{var m;const f=h(o);(m=l.current)===null||m===void 0||m.setFieldsValue(f)},[o]),T.useMemo(()=>r.createElement("div",{style:n,className:ce(d,t)},r.createElement(K,{ref:l,onValuesChange:u},r.createElement(K.Item,{name:"imageResource"},r.createElement(K3,null)))),[o,c])},Oo="base-element-detail-path",t6=e=>{const{fill:t,stroke:n}=(e==null?void 0:e.detail)||{};return{fill:t,stroke:n}},n6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=T.useRef(null),c=G(Oo),d=G(Oo,"row"),l=G(Oo,"col"),h=G(Oo,"form-item"),u=Vt(),m=f=>{const v=f;i==null||i({detail:v})};return T.useEffect(()=>{var f;const v=t6(o);(f=s.current)===null||f===void 0||f.setFieldsValue(v)},[o]),T.useMemo(()=>r.createElement("div",{style:n,className:ce(c,t)},r.createElement(K,{ref:s,onValuesChange:m},r.createElement(de,{className:d},r.createElement(J,{className:l,span:"10"},u.fill),r.createElement(J,{className:l,span:"14"},r.createElement(K.Item,{className:h,name:"fill"},r.createElement(on,{disabled:a})))),r.createElement(de,{className:d},r.createElement(J,{className:l,span:"10"},u.stroke),r.createElement(J,{className:l,span:"14"},r.createElement(K.Item,{className:h,name:"stroke"},r.createElement(on,{disabled:a})))))),[n,t])},o6="base-element-detail-rect",i6=e=>{const{className:t,style:n}=e,o=G(o6);return T.useMemo(()=>r.createElement("div",{style:n,className:ce(o,t)}),[n,t])};var a6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const Xn="base-element-field-svg-picker",s6=["image/svg+xml"];function r6(e){const t=document.createElement("div");return t.innerHTML=e,document.querySelector("svg").setAttribute("_t",Date.now()+""),{__html:t.innerHTML}}const l6=({value:e="",onChange:t})=>{const[n,o]=T.useState(e),[i,a]=T.useState("free"),s=G(Xn),c=G(Xn,"box"),d=G(Xn,"entity"),l=G(Xn,"action"),h=G(Xn,"action-upload"),u=v=>{t==null||t(v||e)},m=v=>{o(v),Ce.svg(v)&&u(v)},f=T.useCallback(()=>{i!=="picking"&&(Ca({success:v=>a6(void 0,void 0,void 0,function*(){if(s6.includes(v.file.type)!==!0){co.error(`File's type "${v.file.type}" is not supported!`);return}try{let g=(yield oc(v.file)).toString();g=g.substring(g.indexOf("<svg")),m(g)}catch{co.error(`Failed to parse file ${v.file.name}`)}a("free")}),error:v=>{console.log(v),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return T.useMemo(()=>r.createElement("div",{className:s},r.createElement("div",{className:c},r.createElement("div",{className:d,dangerouslySetInnerHTML:r6(e||n)}),r.createElement("div",{className:l},r.createElement("div",{onClick:f,className:h},r.createElement("span",null,"Upload"))))),[e,n])},c6="base-element-detail-svg",d6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=G(c6),l=T.useRef(null),h=m=>{const{svg:f=""}=(m==null?void 0:m.detail)||{};return{svg:f,svgResource:(a==null?void 0:a(f))||""}},u=m=>{const f={};if(m!=null&&m.svgResource){const{assetId:v}=s({type:"svg",value:m.svgResource});v&&Kt(v)&&(f.svg=v)}i==null||i({detail:f})};return T.useEffect(()=>{var m;const f=h(o);(m=l.current)===null||m===void 0||m.setFieldsValue(f)},[o]),T.useMemo(()=>r.createElement("div",{style:n,className:ce(d,t)},r.createElement(K,{ref:l,onValuesChange:u},r.createElement(K.Item,{name:"svgResource"},r.createElement(l6,null)))),[o,c])},Un="base-element-detail-text",pn={fontSize:20},{TextArea:u6}=_t,yn=e=>Ce.number(e*1)?pe(e*1):e,h6=e=>{const{color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s,text:c=""}=(e==null?void 0:e.detail)||{};return{text:c,color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s}},m6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=G(Un),c=G(Un,"row"),d=G(Un,"col"),l=G(Un,"switch"),h=G(Un,"form-item"),u=T.useRef(null);T.useEffect(()=>{var f;const v=h6(o);(f=u.current)===null||f===void 0||f.setFieldsValue(v)},[o]);const m=f=>{i==null||i({detail:f})};return T.useMemo(()=>r.createElement("div",{style:n,className:ce(s,t)},r.createElement(K,{ref:u,style:n,className:s,onValuesChange:m},r.createElement(de,{className:c},r.createElement(J,{span:"12",className:d},r.createElement(K.Item,{className:h,name:"verticalAlign"},r.createElement(et.Group,{disabled:a,className:l,size:"small"},r.createElement(et.Button,{value:"top"},r.createElement(D3,{style:pn})),r.createElement(et.Button,{value:"middle"},r.createElement(N3,{style:pn})),r.createElement(et.Button,{value:"bottom"},r.createElement(T3,{style:pn}))))),r.createElement(J,{span:"12",className:d},r.createElement(K.Item,{className:h,name:"textAlign"},r.createElement(et.Group,{disabled:a,className:l,size:"small"},r.createElement(et.Button,{value:"left"},r.createElement(e3,{style:pn})),r.createElement(et.Button,{value:"center"},r.createElement(qd,{style:pn})),r.createElement(et.Button,{value:"right"},r.createElement(t3,{style:pn})))))),r.createElement(de,{className:c},r.createElement(J,{span:"10",className:d},"Text Color"),r.createElement(J,{span:"14",className:d},r.createElement(K.Item,{className:h,name:"color"},r.createElement(on,{elementSize:o?vo(o):void 0,disabled:a,disabledLinearGradient:!0,disabledRadialGradient:!0})))),r.createElement(de,{className:c},r.createElement(J,{span:"10",className:d},"Font Size"),r.createElement(J,{span:"14",className:d},r.createElement(K.Item,{className:h,name:"fontSize"},r.createElement(le,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:yn,parser:yn})))),r.createElement(de,{className:c},r.createElement(J,{span:"10",className:d},"Font Weight"),r.createElement(J,{span:"14",className:d},r.createElement(K.Item,{className:h,name:"fontWeight"},r.createElement(le,{disabled:a,size:"small",style:{width:"100%"},step:100,max:1e3,min:100,formatter:yn,parser:yn})))),r.createElement(de,{className:c},r.createElement(J,{span:"10",className:d},"Line Height"),r.createElement(J,{span:"14",className:d},r.createElement(K.Item,{className:h,name:"lineHeight"},r.createElement(le,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:yn,parser:yn})))),r.createElement(de,{className:c},r.createElement(J,{span:"24",className:d},r.createElement(K.Item,{className:h,name:"text",style:{width:"100%"}},r.createElement(u6,{disabled:a,style:{width:"100%"},rows:3})))))),[n,t])},Ro="base-element-detail-group",f6=e=>{const{overflow:t}=(e==null?void 0:e.detail)||{};return{overflow:t}},g6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=G(Ro),c=G(Ro,"row"),d=G(Ro,"col"),l=G(Ro,"form-item"),h=T.useRef(null),u=Vt();T.useEffect(()=>{var f;const v=f6(o);(f=h.current)===null||f===void 0||f.setFieldsValue(v)},[o]);const m=f=>{i==null||i({detail:f})};return T.useMemo(()=>r.createElement("div",{style:n,className:ce(s,t)},r.createElement(K,{ref:h,style:n,className:s,onValuesChange:m},r.createElement(de,{className:c},r.createElement(J,{className:d,span:"10"},u.overflow),r.createElement(J,{span:"12",className:d},r.createElement(K.Item,{className:l,name:"overflow"},r.createElement(We,{size:"small",disabled:a},r.createElement(We.Option,{value:"visible"},u.visible),r.createElement(We.Option,{value:"hidden"},u.hidden))))))),[n,t,u])},v6="base-element-detail-attribute",p6=e=>{const{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}=e,s=G(v6);return T.useMemo(()=>r.createElement("div",{className:s},(t==null?void 0:t.type)==="circle"&&r.createElement(U3,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="image"&&r.createElement(e6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="svg"&&r.createElement(d6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="group"&&r.createElement(g6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="path"&&r.createElement(n6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="rect"&&r.createElement(i6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="text"&&r.createElement(m6,{element:t,onChange:n})),[o,t])},ko="base-element-content-attribute",y6=e=>{let{opacity:t}=(e==null?void 0:e.detail)||{};const{background:n}=(e==null?void 0:e.detail)||{};return typeof t=="number"&&t>=0&&t<=1||(t=1),{background:n,opacity:t}},w6=e=>{const{style:t,element:n,disabled:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=T.useRef(null),d=G(ko),l=G(ko,"row"),h=G(ko,"col"),u=G(ko,"form-item"),m=g=>{const p=g;i==null||i({detail:p})},f=g=>{i==null||i(g)},v=Vt();return T.useEffect(()=>{var g;const p=y6(n);(g=c.current)===null||g===void 0||g.setFieldsValue(p)},[n]),T.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(K,{ref:c,style:t,className:d,onValuesChange:m},["rect","circle","text","group"].includes(n==null?void 0:n.type)&&r.createElement(de,{className:l},r.createElement(J,{className:h,span:"10"},v.background),r.createElement(J,{className:h,span:"14"},r.createElement(K.Item,{className:u,name:"background"},r.createElement(on,{elementSize:n?vo(n):void 0,disabled:o})))),r.createElement(de,{className:l},r.createElement(J,{className:h,span:"10"},v.opacity),r.createElement(J,{className:h,span:"14"},r.createElement(K.Item,{className:u,name:"opacity"},r.createElement(le,{disabled:o,size:"small",style:{width:"100%"},step:.1}))))),r.createElement(p6,{element:n,disabled:o,onChange:f,getElementAsset:a,createElementAsset:s})),[v,n,o,i])},jo="base-element-shadow-attribute",b6=e=>{const{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}=(e==null?void 0:e.detail)||{};return{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}},S6=e=>{const{style:t,element:n,disabled:o,onChange:i}=e,a=T.useRef(null),s=G(jo),c=G(jo,"row"),d=G(jo,"col"),l=G(jo,"form-item"),h=m=>{const f=m;i==null||i({detail:f})},u=Vt();return T.useEffect(()=>{var m;const f=b6(n);(m=a.current)===null||m===void 0||m.setFieldsValue(f)},[n]),T.useMemo(()=>r.createElement(K,{ref:a,style:t,className:s,onValuesChange:h},r.createElement(de,{className:c},r.createElement(J,{className:d,span:"14"},r.createElement(K.Item,{className:l,name:"shadowColor"},r.createElement(on,{elementSize:n?vo(n):void 0,disabled:o,disabledLinearGradient:!0,disabledRadialGradient:!0}))),r.createElement(J,{className:d,span:"10"},r.createElement(K.Item,{className:l,name:"shadowBlur"},r.createElement(le,{disabled:o,size:"small",style:{width:"100%"}})))),r.createElement(de,null,r.createElement(J,{className:d,span:"12"},r.createElement(K.Item,{className:l,name:"shadowOffsetX"},r.createElement(le,{disabled:o,size:"small",style:{width:"100%"},prefix:"X"}))),r.createElement(J,{className:d,span:"12"},r.createElement(K.Item,{className:l,name:"shadowOffsetY"},r.createElement(le,{disabled:o,size:"small",style:{width:"100%"},prefix:"Y"}))))),[u,n,o])},E6="base-element-detail",C6=rn(),x6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=Vt(),d=G(E6);let l=o;o&&(l=Object.assign(Object.assign({},o||{}),{detail:Object.assign(Object.assign({},C6),o==null?void 0:o.detail)}));const h=[{key:"basic-attribute",label:c.basicAttributes,children:r.createElement(F3,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}})},{key:"border-attribute",label:c.borderAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?r.createElement($3,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):r.createElement(Rt,{image:Rt.PRESENTED_IMAGE_SIMPLE,description:!1})},{key:"content-attribute",label:c.contentAttribute,children:r.createElement(w6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)},getElementAsset:a,createElementAsset:s})},{key:"shadow-attribute",label:c.shadowAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?r.createElement(S6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):r.createElement(Rt,{image:Rt.PRESENTED_IMAGE_SIMPLE,description:!1})}];return T.useMemo(()=>r.createElement("div",{style:n,className:ce(d,t)},r.createElement(Sa,{ghost:!0,items:h,size:"small",defaultActiveKey:h.map(u=>u.key)})),[l,c])},M6="LayoutDetail",Da=()=>{const[e]=Ea(M6);return e},Zn="base-element-basic-attribute",At=e=>Ce.number(e*1)?pe(e*1):e,z6=e=>{const{className:t,style:n,layout:o,onChange:i,disabled:a,isGroupLayout:s}=e,c=T.useRef(null),d=G(Zn),l=G(Zn,"row"),h=G(Zn,"col"),u=G(Zn,"input"),m=G(Zn,"form-item"),f=Da(),v=g=>{i==null||i(g)};return T.useEffect(()=>{var g;const{x:p,y,w:E,h:S}=o||{},w={x:p,y,w:E,h:S};(g=c.current)===null||g===void 0||g.setFieldsValue(w)},[o]),T.useMemo(()=>r.createElement(K,{ref:c,style:n,className:ce(d,t),onValuesChange:v},!s&&r.createElement(de,{className:l},r.createElement(J,{span:10,className:h},r.createElement(K.Item,{className:m,name:"x"},r.createElement(le,{className:u,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:At,parser:At}))),r.createElement(J,{span:10,className:h},r.createElement(K.Item,{className:m,name:"y"},r.createElement(le,{className:u,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:At,parser:At})))),r.createElement(de,{className:l},r.createElement(J,{span:10,className:h},r.createElement(K.Item,{className:m,name:"w"},r.createElement(le,{className:u,size:"small",placeholder:"Width",prefix:f.w,disabled:a,formatter:At,parser:At}))),r.createElement(J,{span:10,className:h},r.createElement(K.Item,{className:m,name:"h"},r.createElement(le,{className:u,size:"small",placeholder:"Height",prefix:f.h,disabled:a,formatter:At,parser:At}))))),[f,a,o])},_o="base-element-content-attribute",I6=e=>{const{background:t,overflow:n="visible"}=e||{};return{background:t,overflow:n}},A6=e=>{const{style:t,layout:n,disabled:o,onChange:i}=e,a=T.useRef(null),s=G(_o),c=G(_o,"row"),d=G(_o,"col"),l=G(_o,"form-item"),h=m=>{const f=m;i==null||i({detail:f})},u=Da();return T.useEffect(()=>{var m;const f=I6(n==null?void 0:n.detail);(m=a.current)===null||m===void 0||m.setFieldsValue(f)},[n]),T.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(K,{ref:a,style:t,className:s,onValuesChange:h},r.createElement(de,{className:c},r.createElement(J,{className:d,span:"10"},u.background),r.createElement(J,{className:d,span:"14"},r.createElement(K.Item,{className:l,name:"background"},r.createElement(on,{elementSize:n?vo(n):void 0,disabled:o})))),r.createElement(de,{className:c},r.createElement(J,{className:d,span:"10"},u.overflow),r.createElement(J,{span:"12",className:d},r.createElement(K.Item,{className:l,name:"overflow"},r.createElement(We,{size:"small",disabled:o},r.createElement(We.Option,{value:"visible"},u.visible),r.createElement(We.Option,{value:"hidden"},u.hidden))))))),[u,n,o,i])},T6="base-layout-detail",N6=e=>{const{className:t,style:n,layout:o,onChange:i,isGroupLayout:a}=e,s=Da(),c=G(T6),d=[{key:"layout-attribute",label:s.layout,children:r.createElement(r.Fragment,null,r.createElement(z6,{isGroupLayout:a,layout:o,onChange:l=>{i==null||i(l)}}),r.createElement(A6,{layout:o,onChange:l=>{i==null||i(l)}}))}];return T.useMemo(()=>r.createElement("div",{style:n,className:ce(c,t)},r.createElement(Sa,{ghost:!0,items:d,size:"small",defaultActiveKey:d.map(l=>l.key)})),[o,s])},D6="ElementDesign",P6="base-element-design",L6=e=>{var t;const{className:n,style:o,element:i,onElementChange:a,getElementAsset:s,createElementAsset:c,layout:d,onLayoutChange:l}=e,[h]=Ea(D6),u=[{key:"element-detail",label:h.element,children:r.createElement(x6,{element:i,onChange:a,getElementAsset:s,createElementAsset:c})},{key:"layout-detail",label:h.layout,children:r.createElement(N6,{isGroupLayout:((t=d==null?void 0:d.operations)===null||t===void 0?void 0:t.position)==="relative",layout:d,onChange:l})},{key:"global",label:h.global,children:r.createElement("div",{style:{padding:20,textAlign:"center"}},"TODO")}];return T.useMemo(()=>r.createElement("div",{style:o,className:ce(G(P6),n)},r.createElement(Nl,{size:"small",defaultActiveKey:u[0].key,items:u})),[i,a,s,c,d,l,h])},gl=e=>{var t;const n={uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,children:[],operations:e.operations||{}};return e.type==="group"&&Array.isArray((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.children)&&e.detail.children.forEach(o=>{n.children.push(gl(o))}),n};function Se(e){const t=[];return e.elements.forEach(n=>{const o=gl(n);t.push(o)}),t}const O6=e=>({uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,operations:e.operations||{}});function ho(e){const t=[];return e.elements.forEach(n=>{var o;if(n.type==="group"&&((o=n.extends)===null||o===void 0?void 0:o.isPage)===!0){const i=O6(n);t.push(i)}}),t}var R6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function Pt(e,t){if(e.length===0)return qt(t);const n=He(e,t.elements),o={elements:[],assets:t.assets};if((n==null?void 0:n.type)==="group"){const{w:i,h:a,detail:s}=n,{children:c}=s,d=R6(s,["children"]),l={x:0,y:0,w:i,h:a,detail:Object.assign({},d),operations:{position:"relative"}};o.elements=qt(c||[]),o.layout=l}return o}function k6(e,t,n){if(e.length>0){const o=He(e,n.elements);(o==null?void 0:o.type)==="group"&&(o.detail.children=t.elements)}}function j6(e,t,n){if(t.length>0&&(e!=null&&e.layout)){const o=e.layout,a=He(t,n.elements);(a==null?void 0:a.type)==="group"&&(Ce.w(o.w)&&(a.w=o.w),Ce.h(o.h)&&(a.h=o.h),a.detail=Object.assign(Object.assign({},a.detail),o.detail))}}function vl(e){var t,n,o,i,a,s,c,d,l,h;let u=e;for(let y=0;y<e.elements.length;y++){const E=e.elements[y];if(E.type==="group"&&((t=E.extends)===null||t===void 0?void 0:t.isPage)===!0)return u}const m=xa(e.elements);let{x:f,y:v,w:g,h:p}=m;return Ce.x((n=e==null?void 0:e.layout)===null||n===void 0?void 0:n.x)&&(f=Math.min(f,(o=e.layout)===null||o===void 0?void 0:o.x)),Ce.y((i=e==null?void 0:e.layout)===null||i===void 0?void 0:i.y)&&(v=Math.min(v,(a=e.layout)===null||a===void 0?void 0:a.y)),Ce.w((s=e==null?void 0:e.layout)===null||s===void 0?void 0:s.w)&&(g=Math.max(g,(c=e.layout)===null||c===void 0?void 0:c.w)),Ce.h((d=e==null?void 0:e.layout)===null||d===void 0?void 0:d.h)&&(p=Math.max(p,(l=e.layout)===null||l===void 0?void 0:l.h)),e.elements.forEach(y=>{y.x-=f,y.y-=v}),u={elements:[{uuid:kt(),name:"Default page",type:"group",x:0,y:0,w:g,h:p,detail:Object.assign(Object.assign(Object.assign({},(h=e.layout)===null||h===void 0?void 0:h.detail),{children:e.elements}),g===0||p===0?{overflow:"visible"}:{}),extends:{isPage:!0}}],assets:e.assets},u}const pl="dark",yl="en-US",wl="data";function _6(e){let t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});(e==null?void 0:e.defaultEditMode)==="page"&&(t=vl(t));let n=[],o=t;const i=ho(t);e!=null&&e.defaultEditingGroupUUID&&(n=ct(e.defaultEditingGroupUUID,t.elements)),(e==null?void 0:e.defaultEditMode)==="page"&&n.length!==1&&i.length>0&&(n=[0]),o=Pt(n,t);const a=Se(o);return{localeCode:(e==null?void 0:e.defaultLocale)||yl,themeMode:(e==null?void 0:e.defaultThemeMode)||pl,editMode:(e==null?void 0:e.defaultEditMode)||wl,data:t,editingData:o,editingDataPosition:n,elementTree:a,pageTree:i,selectedUUIDs:(e==null?void 0:e.defaultSelectedElementUUIDs)||[],scaleInfo:Object.assign({scale:1,from:"init"},(e==null?void 0:e.defaultScaleInfo)||{})}}function V6(e){const t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});return{localeCode:yl,themeMode:(e==null?void 0:e.themeMode)||pl,editMode:(e==null?void 0:e.editMode)||wl,data:Object.assign({elements:[]},(e==null?void 0:e.data)||{}),editingData:Pt([],t),editingDataPosition:[],elementTree:[],pageTree:[],selectedUUIDs:[],scaleInfo:Object.assign({scale:1,from:"control"},(e==null?void 0:e.scaleInfo)||{})}}function B6(e,t){var n,o,i;switch(t.type){case"update":return t!=null&&t.payload?Object.assign(Object.assign({},e),t==null?void 0:t.payload):e;case"updateThemeMode":return!((n=t==null?void 0:t.payload)===null||n===void 0)&&n.themeMode?Object.assign(Object.assign({},e),{themeMode:(o=t==null?void 0:t.payload)===null||o===void 0?void 0:o.themeMode}):e;case"updateEditingDataLayoutToTargetGroup":{if(!(!((i=t==null?void 0:t.payload)===null||i===void 0)&&i.editingData))return e;const{editingData:a}=t.payload;if(a.layout){const{editingDataPosition:s,data:c}=e;return j6(a,s,c),Object.assign(Object.assign({},e),{data:c,editingData:a})}return e}default:return e}}const Et=T.createContext({state:V6(),dispatch:()=>{}}),F6=Et.Provider,W6={locale:"en-US",NavMenu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",material:"Material",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio",materialTempate:"Material templates"},Toolbar:{layers:"Layers",ruler:"Ruler",attributes:"Attributes",hand:"Hand tool",centerContent:"Center content"},PanelPage:{pages:"Pages",addPage:"Add page",overview:"Overview",pcPageTemplates:"PC page templates",mobilePageTemplates:"Mobile page templates"},contextMenu:{copy:"Copy",paste:"Paste",cut:"Cut",delete:"Delete"}},H6={locale:"zh-CN",NavMenu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",material:"物料",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例",materialTempate:"物料模板"},Toolbar:{layers:"图层",ruler:"标尺",attributes:"属性",hand:"拖拽工具",centerContent:"内容居中"},PanelPage:{pages:"页面",addPage:"添加PC页面",overview:"预览",pcPageTemplates:"PC页面模板",mobilePageTemplates:"移动页面模板"},contextMenu:{copy:"复制",paste:"粘贴",cut:"剪切",delete:"删除"}},G6={"en-US":W6,"zh-CN":H6},wo=e=>{const{state:t}=T.useContext(Et),n=t.localeCode;return[T.useMemo(()=>{const a=G6[n][e];return Object.assign({},a)},[n,e])]},Vo="mod-toolbar",Y6=()=>{const[e]=wo("Toolbar");return e},$6=e=>{const{className:t,style:n,openLeftSider:o,openRightSider:i,onClickToggleLayer:a,onClickToggleSetting:s,sharedStore:c}=e,d={fontSize:16},l=G(Vo),h=G(Vo,"left"),u=G(Vo,"right"),m=G(Vo,"btn"),[f,v]=T.useState(!1),[g,p]=T.useState(!0),y=Y6();T.useEffect(()=>{const S=c.get("idraw");g===!0?S==null||S.enable("ruler"):S==null||S.disable("ruler")},[g]),T.useEffect(()=>{const S=c.get("idraw");S==null||S.setMode(f?"drag":"select")},[f]);const E={size:"small",className:m,shape:"default"};return T.useMemo(()=>r.createElement("div",{style:n,className:ce(l,t)},r.createElement("div",{className:h}),r.createElement("div",{className:u},r.createElement(xn,{title:y.layers},r.createElement(Oe,Object.assign({},E,{type:o?"primary":"default",icon:r.createElement(S3,{style:d}),onClick:a}))),r.createElement(xn,{title:y.attributes},r.createElement(Oe,Object.assign({},E,{type:i?"primary":"default",icon:r.createElement(I3,{style:d}),onClick:s}))),r.createElement(xn,{title:y.ruler},r.createElement(Oe,Object.assign({},E,{type:g?"primary":"default",icon:r.createElement(z3,{style:Object.assign(Object.assign({},d),{fontSize:20})}),onClick:()=>{p(!g)}}))),r.createElement(xn,{title:y.hand},r.createElement(Oe,Object.assign({},E,{type:f?"primary":"default",icon:r.createElement(p3,{style:Object.assign(Object.assign({},d),{fontSize:20})}),onClick:()=>{v(!f)}}))),r.createElement(xn,{title:y.centerContent},r.createElement(Oe,Object.assign({},E,{type:"text",icon:r.createElement(Kd,{style:Object.assign(Object.assign({},d),{fontSize:20})}),onClick:()=>{const S=c.get("idraw");S==null||S.centerContent()}}))))),[o,i,a,s,f,g,y])},Qn="mod-panel-layer",X6=e=>{const{className:t,style:n,height:o,sharedStore:i,sharedEvent:a,useContextMenuOptions:s}=e,{state:c,dispatch:d}=T.useContext(Et),{elementTree:l,selectedUUIDs:h,editingData:u}=c,m=T.useRef(null),f=G(Qn),v=G(Qn,"content"),g=G(Qn,"header"),p=G(Qn,"header","title"),y=G(Qn,"header","btn"),[E]=s({sharedEvent:a,sharedStore:i}),S=()=>{if(c.editingDataPosition.length===0)return"";const L=He(c.editingDataPosition,c.data.elements);return(L==null?void 0:L.name)||(L==null?void 0:L.type)||""},w=L=>{const M=i.get("idraw");M==null||M.selectElementsByPositions(L)};T.useEffect(()=>{a.on("scrollToLayer",({uuid:L})=>{var M;L&&((M=m.current)===null||M===void 0||M.scrollTo({key:L,align:"top"}))})},[]),T.useEffect(()=>{if(h[0]&&h.length===1){const M=Ma(h[0],u.elements).map(I=>I.uuid);h[0]&&M.push(h[0])}},[h,u]);const A=()=>{a.trigger("resetEditingView",{type:"back-root",position:null})},b=()=>{a.trigger("resetEditingView",{type:"back-one",position:null})},z=32,O=o-z;return T.useMemo(()=>Array.isArray(l)&&l.length>0?r.createElement("div",{style:n,className:ce(f,t),onContextMenu:L=>{L.preventDefault()}},r.createElement("div",{className:g,style:{height:z}},r.createElement(Oe,{className:y,size:"small",icon:r.createElement(ul,null),disabled:!(c.editingDataPosition.length>0),onClick:A}),r.createElement(Oe,{className:y,size:"small",icon:r.createElement(hl,null),disabled:!(c.editingDataPosition.length>0),onClick:b}),r.createElement("span",{className:p},S())),r.createElement(mo,{menu:{items:E},trigger:["contextMenu"]},r.createElement("div",{className:v},r.createElement(ml,{ref:m,height:O,treeData:l,selectedKeys:h,onTitleChange:({uuid:L,value:M})=>{jt(L,{name:M},c.editingData.elements);const I=Se(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:I}})},onOperationToggle:({uuid:L,operations:M})=>{jt(L,{operations:M},c.editingData.elements);const I=Se(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:I}})},onSelect:L=>{h!=null&&h.includes(L.uuids[0])||w(L.positions)},onDrop:L=>{const{elements:M}=bi(u.elements,{from:L.from,to:L.to}),I=He(L.to,u.elements);I&&(I.x=0,I.y=0);const P=Se(u);d({type:"update",payload:{editingData:Object.assign(Object.assign({},u),{elements:[...M]}),elementTree:P}})},onDelete:({uuid:L})=>{a.trigger("deleteElement",{uuid:L})},onGoToGroup:L=>{a.trigger("resetEditingView",{type:"go-to-next-group",position:L.position})}})))):r.createElement("div",{style:n,className:ce(f,t),onContextMenu:L=>{L.preventDefault()}},r.createElement("div",{className:g},"..."),r.createElement("div",{className:v},r.createElement("div",{style:{padding:"20px 0",textAlign:"center"}},"Empty"))),[O,l,h,u.elements,c.editingDataPosition,E])};var U6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Bo="item",Z6=e=>{const{parentModName:t,className:n,style:o,width:i,height:a,onMount:s,item:c,onSelect:d}=e,l=U6(e,["parentModName","className","style","width","height","onMount","item","onSelect"]),h=T.useRef(null),u=T.useRef(null),m=T.useRef(c.element),f=G(t,Bo),v=G(t,Bo,"name"),g=G(t,Bo,"action"),p=G(t,Bo,"alert"),[y,E]=T.useState(!1),[S,w]=T.useState(null);return T.useEffect(()=>(i>0&&a>0&&h.current&&(u.current||(u.current=new qr(h.current,{width:i,height:a,devicePixelRatio:1}))),()=>{const A=u.current;A==null||A.destroy(),u.current=null}),[]),T.useEffect(()=>{const A=u.current;if(A){A.setMode("readOnly"),A.$offBoardWatcherEvents();const{element:b,staticResource:z}=c;b?(A.setData({elements:[b]}),A.centerContent()):z&&(E(!0),w(null),window.fetch(z).then(O=>O.json()).then(O=>{m.current=O,A.setData({elements:[O]}),A.centerContent()}).catch(O=>{const L=[O.name,O.message].join(", ");w(L)}).finally(()=>{E(!1)})),s==null||s({idraw:A})}},[c]),T.useMemo(()=>r.createElement(Js,{spinning:y},r.createElement("div",Object.assign({style:Object.assign(Object.assign({},o),{width:i,minHeight:a}),className:ce(f,n)},l),r.createElement(xn,{placement:"top",title:c.name},r.createElement("div",{className:v},c.name)),r.createElement("div",{ref:h}),r.createElement("div",{className:g},r.createElement(Oe.Group,{size:"large"},r.createElement(Oe,{size:"large",type:"primary"},r.createElement(c3,{style:{fontSize:20},onClick:()=>{const A=m.current;A&&(A.name=c.name),d({element:A})}})))),S&&r.createElement(Dl,{className:p,type:"error",message:S,banner:!0}))),[y,S,c])};var Q6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const Fo="mod-template-preview",bl={content:{width:490},header:{padding:"10px 20px"},body:{padding:"0"}},Sl=e=>{const{className:t,style:n,getTemplates:o,onSelect:i,afterChangePagination:a}=e,s=G(Fo),c=G(Fo,"list"),d=G(Fo,"footer"),[l,h]=T.useState([]),[u,m]=T.useState(1),[f,v]=T.useState(8),[g,p]=T.useState(0),y=T.useRef(null),E=S=>Q6(void 0,void 0,void 0,function*(){var w;(w=y.current)===null||w===void 0||w.scrollTo(0,0);const A=yield o==null?void 0:o(S);Array.isArray(A==null?void 0:A.list)&&(h([...A.list]),m(A.current),v(A.pageSize),p(A.total))});return T.useEffect(()=>{E({pageSize:f,current:u}).then(()=>{}).catch(()=>{})},[]),T.useMemo(()=>r.createElement("div",{ref:y,style:n,className:ce(s,t)},r.createElement("div",{className:c},l.map((S,w)=>r.createElement(Z6,{width:200,height:150,parentModName:Fo,key:w,item:S,onSelect:i}))),r.createElement("div",{className:d},r.createElement(Pl,{size:"small",pageSize:f,current:u,total:g,onChange:S=>{E({current:S,pageSize:f}),a==null||a()}}))),[l,f,u,g])},J6={uuid:"8227861e-9ffd-c90b-6fe3-1959958afd05",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"05fd9c0a-63dc-fb63-2d50-2d8ea9c70280",name:"Splash",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#0D6EFD",borderRadius:30,borderDash:[],boxSizing:"border-box",opacity:1,overflow:"hidden",children:[]},operations:{}},{uuid:"737b2596-c70c-d90c-70d4-55af24cb1d61",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#FFFFFF",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"b8cde2a5-c0f5-ecf1-8d6e-8fab7a12b85c",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#FFFFFF",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"acadb1ff-7274-ae5c-a71e-9d4e4c18ea80",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#FFFFFF",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"d8b651a8-dad9-cfbf-7a9b-abe5983742f6",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"bbea2aa2-38ac-70b0-1355-110a4fb61484",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"0c188e29-8a38-c84d-7286-b96508908fe5",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#FFFFFF",opacity:1},operations:{}},{uuid:"ecb52e4d-2ecb-b88d-de13-708870f0061f",name:"Loading...",x:121,y:385,w:133,h:42,angle:0,type:"text",detail:{text:"Loading...",fontFamily:"Geometr415 Blk BT",fontSize:34,textAlign:"left",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:42,color:"#FFFFFF",opacity:1},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},K6={uuid:"3f827bd7-6a3a-e39c-7ec9-098895fc9f26",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#FFFFFF",borderRadius:30,borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"4c359376-7338-07dd-d533-fa43b329f948",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#1B1E28",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"baabee79-f1c0-f861-a3f0-3325d6d593c2",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#1B1E28",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"89b12005-beea-f2a6-a94b-7bfb9160bdc7",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"0abc02b1-addf-1816-5e57-cb0e3df44727",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"4335bf98-fdc8-1d55-2227-650d8e1866db",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"38d6aa8d-fd1a-963a-75b0-19645372ef26",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#1B1E28",opacity:1},operations:{}},{uuid:"5f97cb86-ef58-f353-9cb8-769f1b5aed90",name:"Home Indicator",x:121,y:799,w:134,h:5,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:100,borderDash:[],boxSizing:"center-line",borderColor:"transparent",borderWidth:0,opacity:1},operations:{}}],overflow:"hidden"},operations:{}},q6=e=>({list:[{name:"Blank Page",element:K6},{name:"Loading Page",element:J6}],pageSize:8,current:1,total:2}),eu="add-page-button",tu=e=>{const{className:t,style:n,parentModName:o,inPageOverview:i,sharedEvent:a,sharedStore:s,getPageTemplates:c}=e,d=G(o,eu),[l]=wo("PanelPage"),{getContainer:h}=T.useContext(an),[u,m]=T.useState(!1),[f,v]=co.useMessage();return T.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(Oe,{size:"small",type:"text",style:n,className:ce(d,t),onClick:g=>{g.preventDefault(),g.stopPropagation(),m(!0)}},r.createElement(w3,{style:{fontSize:18}})),r.createElement(Ks,{title:l.addPage,placement:"left",onClose:()=>{m(!1)},styles:bl,open:u,getContainer:h},r.createElement(Sl,{getTemplates:c||q6,onSelect:({element:g})=>{if(!g){f==null||f.error("Unexpected data");return}const p=ao(g),y=s.get("idraw"),E=y==null?void 0:y.getData(),S={x:0,y:0};if(y&&Array.isArray(E==null?void 0:E.elements)){const w=xa(E.elements);S.x=w.x,S.y=w.y}a.trigger("addPage",{element:Object.assign(Object.assign({},p),S),inPageOverview:i}),m(!1)}})),v),[n,t,i,l,u])},wn="mod-panel-page",Xt="page-tree",bn="element-tree",Hs=1,Gs=3,nu=e=>{const{className:t,style:n,height:o,defaultSelectedElementUUIDs:i=[],sharedStore:a,sharedEvent:s,useContextMenuOptions:c,getPageTemplates:d}=e,{state:l,dispatch:h}=T.useContext(Et),{pageTree:u,elementTree:m,selectedUUIDs:f,editingData:v,editingDataPosition:g,data:p}=l,y=T.useRef(null),E=T.useRef(null),S=32,[w,A]=T.useState([Xt,bn]),[b,z]=T.useState(0),[O,L]=T.useState(0),[M,I]=T.useState(i),P=G(wn),k=G(wn,"content"),W=G(wn,"header"),F=G(wn,"header","title"),V=G(wn,"header","btn"),[j]=c({sharedEvent:s,sharedStore:a}),[_]=wo("PanelPage"),[x,Y]=T.useState(!1),$=T.useRef(x),R=()=>{const X=[],te=He([g[0]],l.data.elements);return te!=null&&te.uuid&&X.push(te.uuid),X},[H,U]=T.useState(R());T.useEffect(()=>{const X=a.get("idraw"),te=ae=>{if($.current===!0){const{uuids:se=[]}=ae;U([...se])}};return X==null||X.on(fe.select,te),()=>{X==null||X.off(fe.select,te)}},[]),T.useEffect(()=>{var X;if(g.length===1&&u.length>0){const te=(X=u[g[0]])===null||X===void 0?void 0:X.uuid;te&&!H.includes(te)&&U([te])}},[g]);const C=X=>{const te=Hs+Gs;if(X.includes(Xt)&&X.includes(bn)){const ae=o-S*2;z(ae*Hs/te),L(ae*Gs/te)}else if(X.includes(Xt)&&!X.includes(bn)){const ae=o-S*2;z(ae),L(0)}else if(!X.includes(Xt)&&X.includes(bn)){const ae=o-S*2;z(0),L(ae)}else z(0),L(0)};T.useEffect(()=>{const X=a==null?void 0:a.get("idraw");let te=[];if(x===!0)s.trigger("resetEditingView",{type:"back-root",position:null}),U([]),te=[Xt],A(te),X==null||X.disable("selectInGroup");else{const ae=[];u.length>0&&(ae.push(u[0].uuid),s.trigger("resetEditingView",{type:"go-to-page",position:[0]})),U(ae),X==null||X.enable("selectInGroup"),te=[Xt,bn],A(te)}C(te)},[o,x]),T.useEffect(()=>{$.current=x,s.trigger("switchPageOverview",{isPageOverview:!!x})},[x]);const D=()=>{if(g.length===0)return"";const X=He(g,l.data.elements);return(X==null?void 0:X.name)||(X==null?void 0:X.type)||""},N=X=>{const te=a.get("idraw");te==null||te.selectElementsByPositions(X)};T.useEffect(()=>{s.on("scrollToLayer",({uuid:X})=>{var te;X&&((te=y.current)===null||te===void 0||te.scrollTo({key:X,align:"top"}))})},[]),T.useEffect(()=>{if(f[0]&&f.length===1){const te=Ma(f[0],v.elements).map(se=>se.uuid);f[0]&&te.push(f[0]);const ae=[...M];te.forEach(se=>{ae.includes(se)||ae.push(se)}),I(ae)}},[f,v]);const B=X=>{X.stopPropagation(),g.length>1&&s.trigger("resetEditingView",{type:"go-to-group",position:[g[0]]})},Z=X=>{X.stopPropagation(),s.trigger("resetEditingView",{type:"back-one",position:null})},ue=[{key:Xt,collapsible:x?"disabled":void 0,label:r.createElement("div",{className:W,style:{height:S}},r.createElement("div",{style:{display:"flex"}},r.createElement("span",{style:{marginRight:10}},_.pages),r.createElement(Oe,{className:V,style:{marginLeft:"10px"},size:"small",icon:r.createElement(E3,null),type:x?"primary":"default",onClick:X=>{X.stopPropagation(),Y(!x)}})),r.createElement("div",{style:{display:"flex"}},r.createElement(tu,{inPageOverview:x,parentModName:wn,sharedEvent:s,sharedStore:a,getPageTemplates:d}))),children:r.createElement("div",{className:k,style:{height:b}},u.length>0?r.createElement(j3,{ref:E,height:b,treeData:u,selectedKeys:H,onTitleChange:({uuid:X,value:te})=>{jt(X,{name:te},p.elements);const se={pageTree:ho(p),data:Object.assign({},p)};if(g.length===0){se.editingData=Object.assign({},p);const Bt=Se(p);se.elementTree=Bt}h({type:"update",payload:se})},onSelect:X=>{if((X==null?void 0:X.positions.length)===1){const te=a.get("idraw");if(te==null||te.trigger(fe.select,{uuids:[]}),te==null||te.trigger(fe.clearSelect),x){H!=null&&H.includes(X.uuids[0])||(N(X.positions),U([X.uuids[0]]));return}s.trigger("resetEditingView",{type:"go-to-page",position:X.positions[0]});const ae=[],se=He(X.positions[0],l.data.elements);se!=null&&se.uuid&&(ae.push(se.uuid),U(ae))}},onDrop:X=>{if(!(X.from.length===1&&X.to.length===1))return;const{elements:te}=bi(p.elements,{from:X.from,to:X.to}),se={pageTree:ho(p),data:Object.assign(Object.assign({},p),{elements:te})};if(g.length===0){se.editingData=Object.assign(Object.assign({},p),{elements:te});const Bt=Se(p);se.elementTree=Bt}h({type:"update",payload:se})},onDelete:({uuid:X})=>{s.trigger("deletePage",{uuid:X})}}):r.createElement(Rt,{image:Rt.PRESENTED_IMAGE_SIMPLE,description:!1}))},{key:bn,collapsible:x?"disabled":void 0,label:r.createElement("div",{className:W,style:{height:S}},r.createElement("div",{style:{display:"inline-flex"}},r.createElement(Oe,{className:V,size:"small",icon:r.createElement(ul,null),disabled:!(g.length>1),onClick:B}),r.createElement(Oe,{className:V,size:"small",icon:r.createElement(hl,null),disabled:!(g.length>1),onClick:Z})),r.createElement("span",{className:F},D())),children:r.createElement(mo,{menu:{items:j},trigger:["contextMenu"]},r.createElement("div",{className:k,style:{height:O}},m.length>0?r.createElement(ml,{ref:y,height:O,treeData:m,selectedKeys:f,onTitleChange:({uuid:X,value:te})=>{jt(X,{name:te},l.editingData.elements);const ae=Se(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:ae}})},onOperationToggle:({uuid:X,operations:te})=>{jt(X,{operations:te},l.editingData.elements);const ae=Se(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:ae}})},onSelect:X=>{f!=null&&f.includes(X.uuids[0])||N(X.positions)},onDrop:X=>{const{elements:te}=bi(v.elements,{from:X.from,to:X.to}),ae=He(X.to,v.elements);ae&&(ae.x=0,ae.y=0);const se=Se(v);h({type:"update",payload:{editingData:Object.assign(Object.assign({},v),{elements:[...te]}),elementTree:se}})},onDelete:({uuid:X})=>{s.trigger("deleteElement",{uuid:X})},onGoToGroup:X=>{s.trigger("resetEditingView",{type:"go-to-next-group",position:X.position})},onExpand:(X,{node:te})=>{const ae=te.key;if(ae){let se=[...M];M.includes(ae)?se.splice(se.indexOf(ae),1):se=[...se,ae],I(se)}}}):r.createElement(Rt,{image:Rt.PRESENTED_IMAGE_SIMPLE,description:!1})))}];return T.useMemo(()=>r.createElement("div",{style:n,className:ce(P,t),onContextMenu:X=>{X.preventDefault()}},r.createElement(Sa,{ghost:!0,collapsible:"icon",items:ue,size:"small",activeKey:w,onChange:X=>{if(Array.isArray(X)){const te=[...X];A(te),C(te)}}})),[o,b,O,u,m,f,M,p.elements,v.elements,g,x,H,_])};var ou=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const iu="mod-panel-detail",au=e=>{const{className:t,style:n}=e,{state:o,dispatch:i}=T.useContext(Et),{selectedUUIDs:a,editingData:s,editingDataPosition:c}=o,d=G(iu),l=T.useRef(s);T.useEffect(()=>{l.current=s},[s]);const h=()=>l.current,u=T.useCallback(p=>{if((a==null?void 0:a.length)===1&&a[0]){const y=a[0];jt(y,p,s.elements),i({type:"update",payload:{editingData:Object.assign({},s)}})}},[s,a]),m=T.useCallback(p=>{var y;const{detail:E}=p,S=ou(p,["detail"]);delete S.operations;const w=h();if(S||E){const A=Object.assign(Object.assign(Object.assign({x:0,y:0},w.layout),S),{detail:Object.assign(Object.assign({},(y=w.layout)===null||y===void 0?void 0:y.detail),E)}),b=Object.assign(Object.assign({},w),{layout:A});i({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:b}})}},[s,a]),f=T.useCallback(p=>(a==null?void 0:a.length)>1?null:dr(p,h().elements),[s,a[0]]),v=T.useCallback(p=>{var y,E;let S=null;return p&&Kt(p)&&(S=((E=(y=h().assets)===null||y===void 0?void 0:y[p])===null||E===void 0?void 0:E.value)||null),S},[s,a[0]]),g=T.useCallback(p=>{const y=jn(p.value);return s.assets||(s.assets={}),s.assets[y]=p,{assetId:y,assetItem:p}},[s,a[0]]);return T.useMemo(()=>{const p=f(a[0]);return r.createElement("div",{style:n,className:ce(d,t),onContextMenu:y=>{y.preventDefault()}},r.createElement(L6,{element:p,onElementChange:u,getElementAsset:v,createElementAsset:g,layout:s.layout,onLayoutChange:m}))},[a[0],s.layout,c])},Wo="mod-export-image-file",Pa=700,su=Pa+48,io=500,ru=Pa-io,Ho={devicePixelRatio:1,fileName:"download.png"},lu=e=>{const{className:t,style:n,sharedStore:o}=e,i=G(Wo),a=G(Wo,"preview"),s=G(Wo,"options"),c=G(Wo,"canvas"),[d,l]=T.useState(null),[h,u]=T.useState(!0),[m,f]=T.useState(null),[v]=K.useForm(),g=T.useCallback(y=>{const E=o.get("idraw");E&&(u(!0),E.getImageBlobURL({devicePixelRatio:y}).then(({blobURL:S,width:w,height:A,devicePixelRatio:b})=>{S&&(f(S),l({width:w,height:A,devicePixelRatio:b}))}).catch(S=>{console.log(S)}).finally(()=>{u(!1)}))},[]);T.useEffect(()=>{v.setFieldsValue({devicePixelRatio:Ho.devicePixelRatio,fileName:Ho.fileName}),setTimeout(()=>{g(Ho.devicePixelRatio)},10)},[]);const p=()=>{if(!m)return;const y=v.getFieldsValue(),E=document.createElement("a");E.href=m,E.download=y.fileName||Ho.fileName,document.body.appendChild(E),E.click(),document.body.removeChild(E)};return T.useMemo(()=>r.createElement("div",{style:Object.assign(Object.assign({},n),{width:Pa}),className:ce(i,t)},r.createElement(Js,{tip:"Loading...",spinning:h},r.createElement("div",{className:a,style:{width:io,height:io*3/4}},m&&r.createElement("img",{className:c,style:{maxWidth:io,maxHeight:io*3/4},src:m}))),r.createElement("div",{className:s,style:{width:ru}},r.createElement("div",{style:{marginBottom:6}},"Width: ",d==null?void 0:d.width),r.createElement("div",null,"Height: ",d==null?void 0:d.height),r.createElement(Ll,null),r.createElement("div",null,r.createElement(K,{form:v,layout:"vertical",onValuesChange:y=>{y.devicePixelRatio>0&&setTimeout(()=>{g(y.devicePixelRatio)},10)},disabled:h},r.createElement(K.Item,{label:"Device pixel ratio",name:"devicePixelRatio"},r.createElement(We,{size:"small",options:[1,2,3,4].map(y=>({label:`x${y}`,value:y}))})),r.createElement(K.Item,{label:"File name",name:"fileName"},r.createElement(_t,{size:"small",placeholder:"File name"})),r.createElement(Oe,{type:"primary",onClick:p,disabled:h||!m,loading:h},"Download"))))),[d,h,m,g])};var cu=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function du(e){return new Promise(function(t,n){const o=new FileReader;o.onload=function(){t(o)},o.onerror=n,e.type==="application/json"?o.readAsText(e):o.readAsArrayBuffer(e)})}function uu(e){Ca({accept:"application/json",success:t=>cu(this,void 0,void 0,function*(){var n,o,i;const s=(yield du(t.file)).result;if(typeof s=="string")try{const c=JSON.parse(s);(n=e==null?void 0:e.success)===null||n===void 0||n.call(e,{json:c})}catch(c){(o=e==null?void 0:e.error)===null||o===void 0||o.call(e,c)}else(i=e==null?void 0:e.error)===null||i===void 0||i.call(e,Error("ERROR_PICK_FILE_FAIL"))}),error:e==null?void 0:e.error})}const hu={uuid:"b8b3fdea-d4ba-669b-803d-9aea7b86a5c8",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#0D6EFD",borderRadius:16,borderDash:[],boxSizing:"border-box",opacity:1,text:"Button",fontFamily:"SF UI Display",fontSize:20,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#FFFFFF"},operations:{}},mu={uuid:"07ddd6e3-b6a5-f843-4229-35673c811253",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1,text:"      user@example.com",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#1B1E28"},operations:{}},fu={uuid:"2adb5b3e-9798-a4ea-2cbe-d85c8c24eeb6",name:"Link",x:245,y:630,w:42,h:16,angle:0,type:"text",detail:{text:"Link",fontFamily:"SF UI Display",fontSize:14,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:16,color:"#0D6EFD",opacity:1},operations:{}},gu={uuid:"47186341-186f-0403-3f4e-3d467afe2016",name:"Password",x:0,y:0,w:335,h:56,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"9ff6159d-bede-8e89-baac-f91afa754a06",name:"Box",x:0,y:0,w:335,h:56,angle:0,type:"rect",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1},operations:{}},{uuid:"7a47c6df-cd8c-530f-f3b9-22b661f901eb",name:"Vector",x:297.00006103515625,y:20,w:20,h:16,angle:0,type:"path",detail:{commands:[{type:"M",params:[2.530330181121826,-.5303300619125366]},{type:"C",params:[2.2374367713928223,-.8232232928276062,1.7625631093978882,-.8232232928276062,1.4696699380874634,-.5303300619125366]},{type:"C",params:[1.176776647567749,-.23743686079978943,1.176776647567749,.23743686079978943,1.4696699380874634,.5303300619125366]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[17.469669342041016,16.530330657958984]},{type:"C",params:[17.762563705444336,16.823223114013672,18.237436294555664,16.823223114013672,18.530330657958984,16.530330657958984]},{type:"C",params:[18.823223114013672,16.237436294555664,18.823223114013672,15.76256275177002,18.530330657958984,15.469670295715332]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"Z",params:[]},{type:"M",params:[12.500185012817383,10.794958114624023]},{type:"C",params:[12.808830261230469,10.518712997436523,12.83509635925293,10.04456615447998,12.55885124206543,9.735921859741211]},{type:"C",params:[12.28260612487793,9.427276611328125,11.808459281921387,9.401010513305664,11.499814987182617,9.677255630493164]},{type:"L",params:[12.500185012817383,10.794958114624023]},{type:"Z",params:[]},{type:"M",params:[8.322744369506836,6.500185489654541]},{type:"C",params:[8.598989486694336,6.191540241241455,8.572724342346191,5.717393398284912,8.264079093933105,5.44114875793457]},{type:"C",params:[7.9554338455200195,5.1649041175842285,7.481287002563477,5.191169738769531,7.205042362213135,5.499814510345459]},{type:"L",params:[8.322744369506836,6.500185489654541]},{type:"Z",params:[]},{type:"M",params:[.8697054386138916,10.146900177001953]},{type:"L",params:[.3260757029056549,10.663588523864746]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"L",params:[.8697054386138916,10.146900177001953]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,5.8530988693237305]},{type:"L",params:[19.673925399780273,5.336410999298096]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"L",params:[19.130294799804688,5.8530988693237305]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,10.14690113067627]},{type:"L",params:[19.67392349243164,10.663589477539062]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"L",params:[19.130294799804688,10.14690113067627]},{type:"Z",params:[]},{type:"M",params:[.8697060346603394,5.853097915649414]},{type:"L",params:[.32607635855674744,5.336409568786621]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"L",params:[.8697060346603394,5.853097915649414]},{type:"Z",params:[]},{type:"M",params:[17.11528778076172,11.042052268981934]},{type:"C",params:[16.802886962890625,11.314040184020996,16.770124435424805,11.787782669067383,17.042112350463867,12.100184440612793]},{type:"C",params:[17.314102172851562,12.41258716583252,17.787843704223633,12.445348739624023,18.10024642944336,12.173359870910645]},{type:"L",params:[17.11528778076172,11.042052268981934]},{type:"Z",params:[]},{type:"M",params:[7.18831205368042,.6969932913780212]},{type:"C",params:[6.793071269989014,.8209197521209717,6.573127746582031,1.2417877912521362,6.697054386138916,1.6370283365249634]},{type:"C",params:[6.820981025695801,2.03226900100708,7.241848945617676,2.2522125244140625,7.637089252471924,2.1282858848571777]},{type:"L",params:[7.18831205368042,.6969932913780212]},{type:"Z",params:[]},{type:"M",params:[4.903543949127197,3.4355645179748535]},{type:"C",params:[5.252687454223633,3.212693214416504,5.355051517486572,2.74898362159729,5.132180690765381,2.3998398780822754]},{type:"C",params:[4.909309387207031,2.0506961345672607,4.4456000328063965,1.9483320713043213,4.096456050872803,2.171203136444092]},{type:"L",params:[4.903543949127197,3.4355645179748535]},{type:"Z",params:[]},{type:"M",params:[15.551521301269531,14.047059059143066]},{type:"C",params:[15.906437873840332,13.833499908447266,16.02103042602539,13.372659683227539,15.80747127532959,13.017744064331055]},{type:"C",params:[15.593912124633789,12.662827491760254,15.133071899414062,12.548234939575195,14.778156280517578,12.761794090270996]},{type:"L",params:[15.551521301269531,14.047059059143066]},{type:"Z",params:[]},{type:"M",params:[1.4696699380874634,.5303300619125366]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"L",params:[18.530330657958984,15.469670295715332]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"L",params:[1.4696699380874634,.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[6.25,8]},{type:"C",params:[6.25,10.071067810058594,7.928932189941406,11.75,10,11.75]},{type:"L",params:[10,10.25]},{type:"C",params:[8.757359504699707,10.25,7.75,9.242640495300293,7.75,8]},{type:"L",params:[6.25,8]},{type:"Z",params:[]},{type:"M",params:[10,11.75]},{type:"C",params:[10.959962844848633,11.75,11.837237358093262,11.388312339782715,12.500185012817383,10.794958114624023]},{type:"L",params:[11.499814987182617,9.677255630493164]},{type:"C",params:[11.101249694824219,10.033981323242188,10.576745986938477,10.25,10,10.25]},{type:"L",params:[10,11.75]},{type:"Z",params:[]},{type:"M",params:[7.205042362213135,5.499814510345459]},{type:"C",params:[6.611688137054443,6.16276216506958,6.25,7.040036678314209,6.25,8]},{type:"L",params:[7.75,8]},{type:"C",params:[7.75,7.423254489898682,7.966019153594971,6.8987507820129395,8.322744369506836,6.500185489654541]},{type:"L",params:[7.205042362213135,5.499814510345459]},{type:"Z",params:[]},{type:"M",params:[.32607579231262207,10.663588523864746]},{type:"C",params:[2.297703981399536,12.738021850585938,5.848983287811279,15.75,10,15.75]},{type:"L",params:[10,14.25]},{type:"C",params:[6.519985675811768,14.25,3.3532803058624268,11.671310424804688,1.4133350849151611,9.63021183013916]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,5.3364105224609375]},{type:"C",params:[17.70229721069336,3.261976718902588,14.151017189025879,.25,10,.25]},{type:"L",params:[10,1.75]},{type:"C",params:[13.480013847351074,1.75,16.64672088623047,4.328688621520996,18.5866641998291,6.369787216186523]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,10.663589477539062]},{type:"C",params:[21.108692169189453,9.154008865356445,21.108692169189453,6.845991611480713,19.673925399780273,5.336410999298096]},{type:"L",params:[18.5866641998291,6.369786739349365]},{type:"C",params:[19.471111297607422,7.300351619720459,19.471111297607422,8.699647903442383,18.5866641998291,9.630212783813477]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"Z",params:[]},{type:"M",params:[1.4133352041244507,9.63021183013916]},{type:"C",params:[.5288880467414856,8.699646949768066,.5288882851600647,7.300351142883301,1.4133358001708984,6.369786262512207]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"C",params:[-1.1086915731430054,6.845990180969238,-1.1086925268173218,9.154007911682129,.3260757029056549,10.663588523864746]},{type:"L",params:[1.4133352041244507,9.63021183013916]},{type:"Z",params:[]},{type:"M",params:[18.10024642944336,12.173359870910645]},{type:"C",params:[18.692087173461914,11.658082008361816,19.22022819519043,11.140942573547363,19.67392349243164,10.663589477539062]},{type:"L",params:[18.586666107177734,9.630212783813477]},{type:"C",params:[18.160234451293945,10.078877449035645,17.666166305541992,10.562438011169434,17.11528778076172,11.042052268981934]},{type:"L",params:[18.10024642944336,12.173359870910645]},{type:"Z",params:[]},{type:"M",params:[10,.25]},{type:"C",params:[9.022459983825684,.25,8.080134391784668,.4173649847507477,7.18831205368042,.6969932913780212]},{type:"L",params:[7.637089252471924,2.1282858848571777]},{type:"C",params:[8.404208183288574,1.8877582550048828,9.194794654846191,1.75,10,1.75]},{type:"L",params:[10,.25]},{type:"Z",params:[]},{type:"M",params:[4.096456050872803,2.171203136444092]},{type:"C",params:[2.570507526397705,3.1452717781066895,1.280151128768921,4.332587242126465,.32607635855674744,5.336409568786621]},{type:"L",params:[1.4133356809616089,6.369786262512207]},{type:"C",params:[2.3151214122772217,5.420979022979736,3.51236629486084,4.323603630065918,4.903543949127197,3.4355645179748535]},{type:"L",params:[4.096456050872803,2.171203136444092]},{type:"Z",params:[]},{type:"M",params:[10,15.75]},{type:"C",params:[12.047597885131836,15.75,13.940337181091309,15.016534805297852,15.551521301269531,14.047059059143066]},{type:"L",params:[14.778156280517578,12.761794090270996]},{type:"C",params:[13.313118934631348,13.643331527709961,11.688562393188477,14.25,10,14.25]},{type:"L",params:[10,15.75]},{type:"Z",params:[]}],fill:"#7D848D",originX:0,originY:0,originW:20,originH:16},operations:{}},{uuid:"f3fb01f1-c2a1-7c7b-2906-49271490ecec",name:"**********",x:16,y:20,w:97,h:20,angle:0,type:"text",detail:{text:"**********",color:"#7D848D",fontSize:16,lineHeight:20,textAlign:"left",verticalAlign:"top",wordBreak:"normal"},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},vu={uuid:"af161d19-73ae-77e3-e54d-a88be90632ba",name:"Text",x:0,y:0,w:300,h:40,angle:0,type:"text",detail:{text:"  Please fill the description",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#7D848D",opacity:1},operations:{}},pu={uuid:"81895177-c187-eefa-de59-4b9ad201343e",name:"Title",x:0,y:0,w:136,h:34,angle:0,type:"text",detail:{text:"Title",fontFamily:"SF UI Display",fontSize:26,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:34,color:"#1B1E28",opacity:1},operations:{}},yu=e=>({list:[{name:"Button",element:hu},{name:"Input",element:mu},{name:"Password",element:gu},{name:"Text",element:vu},{name:"Title",element:pu},{name:"Link",element:fu}],pageSize:8,current:1,total:8}),wu=()=>{const[e]=wo("NavMenu");return e},Ys="mod-nav-menu",bu=e=>{const{className:t,style:n,sharedStore:o,sharedEvent:i,getMaterialTemplates:a}=e,[s,c]=Ol.useModal(),d=G(Ys),l=G(Ys,"dropdown"),[h,u]=T.useState([]),m=wu(),f=({key:P,domEvent:k})=>{k.preventDefault(),i.trigger("createElement",{type:P,element:{name:P}})},{state:v}=T.useContext(Et),{getContainer:g}=T.useContext(an),{editMode:p,pageTree:y}=v,[E,S]=T.useState(!1),[w,A]=T.useState(!1);T.useEffect(()=>{const P=k=>{const{isPageOverview:W}=k;A(!!W)};return i.on("switchPageOverview",P),()=>{i.off("switchPageOverview",P)}},[]);const b=!!(p==="page"&&(y.length===0||w)),z=P=>{const k=o.get("idraw");k==null||k.resize({devicePixelRatio:P})},O={more:[{key:"about-idraw-stuido",label:m.about,disabled:!0},{key:"line",type:"divider"},{key:"file",label:m.file,children:[{key:"import-json-file",label:m.importJSONFile,onClick:()=>{uu({success:({json:P})=>{i.trigger("resetData",{data:P})},error:()=>{}})}},{key:"export-image",label:m.exportImage,onClick:()=>{s.info({icon:null,title:"Whole image file",width:su,content:r.createElement(lu,{sharedEvent:i,sharedStore:o}),footer:null,closable:!0})}},{key:"export-json-file",label:m.exportJSONFile,onClick:()=>{const P=o.get("idraw"),k=P==null?void 0:P.getData({compact:!0});if(k){const W=JSON.stringify(k);ac(W,{fileName:"downdown.json"})}}}]},{key:"preferences",label:m.preferences,children:[{key:"device-pixel-ratio",label:m.devicePixelRatio,type:"group",children:[{key:"device-pixel-ratio-x1",label:"x1",onClick:()=>{z(1)}},{key:"device-pixel-ratio-x2",label:"x2",onClick:()=>{z(2)}},{key:"device-pixel-ratio-x3",label:"x3",onClick:()=>{z(3)}}]}]}],element:[{key:"material",label:m.material,icon:r.createElement(o3,null),disabled:b,onClick:()=>{S(!0)}},{key:"rect",label:m.rect,icon:r.createElement(nl,null),disabled:b,onClick:f},{key:"circle",label:m.circle,icon:r.createElement(ol,null),disabled:b,onClick:f},{key:"text",label:m.text,icon:r.createElement(il,null),disabled:b,onClick:f},{key:"image",label:m.image,icon:r.createElement(rl,null),disabled:b,onClick:f},{key:"svg",label:m.svg,disabled:b,icon:r.createElement(sl,null),onClick:f},{key:"html",label:m.html,disabled:!0,icon:r.createElement(ll,null),onClick:f},{key:"group",label:m.group,icon:r.createElement(al,null),disabled:b,onClick:f}]},L={size:"small",type:"text"},M=[{key:"more",button:r.createElement(C3,{style:{fontSize:20}})},{key:"element",button:r.createElement(n3,{style:{fontSize:20}})}],I=()=>{const P=o.get("idraw"),k=[];if(P){const{viewSizeInfo:W}=P.getViewInfo(),{devicePixelRatio:F}=W;k.push(`device-pixel-ratio-x${F}`)}u(k)};return T.useMemo(()=>r.createElement("div",{style:n,className:ce(d,t)},M.map((P,k)=>r.createElement(mo,{key:k,trigger:["click","click"],menu:{items:O[P.key]||[],selectedKeys:h},placement:"bottom",overlayClassName:l,onOpenChange:W=>{W===!0&&I()}},r.createElement(Oe,Object.assign({},L,{onClick:W=>W.preventDefault()}),r.createElement(Rl.Compact,null,P.button,r.createElement(Na,{style:{fontSize:10,marginLeft:4}}))))),r.createElement(Ks,{title:m.materialTempate,placement:"left",open:E,onClose:()=>{S(!1)},styles:bl,getContainer:g},r.createElement(Sl,{onSelect:P=>{P.element&&i.trigger("addElement",{element:ao(P.element),position:[]}),S(!1)},getTemplates:a||yu})),c),[h,m,E])},Ut="mod-header",Su=e=>{const{logo:t,navigationMenu:n,navigationCenter:o,className:i,style:a,openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u,getMaterialTemplates:m}=e,{state:f,dispatch:v}=T.useContext(Et),g=G(Ut),p=G(Ut,"left"),y=G(Ut,"right"),E=G(Ut,"center"),S=G(Ut,"locale"),w=G(Ut,"scale"),A=G(Ut,"switch"),{localeCode:b,scaleInfo:z}=f;return T.useMemo(()=>r.createElement("div",{style:a,className:ce(g,i)},r.createElement("div",{className:p},t,n||r.createElement(bu,{sharedStore:h,sharedEvent:u,getMaterialTemplates:m}),r.createElement($6,{openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u})),o&&r.createElement("div",{className:E},o),r.createElement("div",{className:y},r.createElement(Xd,{className:w,value:`${pe(z.scale)}`,onChange:O=>{const L=parseFloat(O);L>0&&(v==null||v({type:"update",payload:{scaleInfo:{scale:pe(L),from:"control"}}}))}}),r.createElement(tc,{className:S,value:b,onChange:O=>{v==null||v({type:"update",payload:{localeCode:O}})}}),r.createElement(ql,{className:A,theme:f==null?void 0:f.themeMode,onChange:({theme:O})=>{v==null||v({type:"updateThemeMode",payload:{themeMode:O}})}}))),[b,z,s,c,d,l])};var $s=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Eu="mod-sketch",Cu=e=>{const t=T.useRef(null),n=T.useRef(null),o=T.useRef(!1),{className:i,style:a,width:s,height:c,sharedEvent:d,sharedStore:l,useContextMenuOptions:h}=e,{generateClassName:u}=T.useContext(an),{state:m,dispatch:f}=T.useContext(Et),{editingData:v}=m,g=u(Eu),p=T.useRef([]),y=T.useRef(m.editingData),E=T.useRef(m.data),S=T.useRef([]),[w]=h({sharedEvent:d,sharedStore:l});return T.useEffect(()=>{p.current=[...m.editingDataPosition],E.current=m.data,y.current=m.editingData,S.current=[...m.selectedUUIDs]},[m.editingDataPosition,m.data,m.editingData,m.selectedUUIDs]),T.useEffect(()=>{if(!(t!=null&&t.current)||n!=null&&n.current)return;const A={width:s,height:c,devicePixelRatio:window.devicePixelRatio},b=new qr(t.current,A);b.enable("ruler"),n.current=b;const z=x=>{var Y;const $=y.current;let{uuids:R}=x;if((R==null?void 0:R.length)===1&&((Y=S.current)===null||Y===void 0?void 0:Y.length)===1&&R[0]===S.current[0])return;const{positions:H}=x;H&&Array.isArray(H)&&(R=hr(H,$.elements).map(C=>C.uuid)),f({type:"update",payload:{selectedUUIDs:R}})},O=x=>{const{data:Y,type:$}=x,R=y.current;if(["addElement","updateElement","deleteElement","moveElement","dragElement","resizeElement"].includes($)){const H={editingData:Object.assign({},Y)};["addElement","deleteElement","moveElement"].includes($)&&(H.elementTree=Se(R)),f({type:"update",payload:H})}else if($==="changeLayout"){if(Y.layout){const H=Object.assign({},Y.layout);H.detail&&(H.detail=Object.assign({},H.detail)),Y.layout=Object.assign({},Y.layout)}f({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:Object.assign({},Y)}})}},L=x=>{const{scale:Y}=x;f({type:"update",payload:{scaleInfo:{scale:Y,from:"event"}}})},M=x=>{const{element:Y}=x;b.updateElement(Y);const $=Object.assign({},b.getData()),R=Se($);f({type:"update",payload:{editingData:Object.assign({},$),elementTree:R}})},I=x=>{const{type:Y,element:$}=x,R=b.createElement(Y,{element:$,viewCenter:!0});let H=b.getViewCenter();const U=S.current;let C=[];const D=b.getData();if(Array.isArray(U)&&U.length===1){const Z=U[0],ue=ct(Z,D.elements);let X=He(ue,D.elements);if(ue.length>1){C=[...ue];let te=C.pop();te+=1;const ae=[...C];C.push(te),X=He(ae,D.elements),H=ot(X),R.x=H.x-R.w/2,R.y=H.y-R.h/2}}const N=b.addElement(R,{position:C}),B=Se(N);f({type:"update",payload:{editingData:Object.assign({},N),elementTree:B}}),b.selectElements([R.uuid])},P=x=>{const{element:Y,position:$=[]}=x;let R=b.getViewCenter();const H=S.current;let U=$;const C=b.getData();if(Array.isArray(H)&&H.length===1){const B=H[0],Z=ct(B,C.elements),ue=He(Z,C.elements);Z.length>0&&(ue==null?void 0:ue.type)==="group"&&Array.isArray(ue.detail.children)&&(U=[...Z],U.push(ue.detail.children.length),R=ot(ue))}const D=b.addElement(Object.assign(Object.assign({},Y),{x:R.x-Y.w/2,y:R.y-Y.h/2}),{position:U}),N=Se(D);f({type:"update",payload:{editingData:Object.assign({},D),elementTree:N}}),b.selectElements([Y.uuid])},k=x=>{const{uuid:Y}=x;b==null||b.deleteElement(Y);const $=b==null?void 0:b.getData();if($){const R=Se($);f({type:"update",payload:{editingData:Object.assign({},$),elementTree:R}}),b.trigger(fe.clearSelect,{})}},W=x=>{const{element:Y,inPageOverview:$}=x,{w:R,h:H,detail:U}=Y,C=E.current;C.elements=[...C.elements,Y];const D=$s(U,["children"]);let N={elements:Y.detail.children,layout:{x:0,y:0,w:R,h:H,detail:D,operations:{position:"relative"}}};const B=Se(C);let Z=[B.length-1];$===!0&&(N=C,Z=[]);const ue=Se(N);b.centerContent({data:N}),f({type:"update",payload:{data:Object.assign({},C),editingData:N,elementTree:ue,pageTree:B,editingDataPosition:Z}})},F=x=>{var Y,$,R,H;const{uuid:U}=x;if(!U)return;const C=E.current;let D=-1;const N={pageTree:[]};for(let Z=0;Z<C.elements.length;Z++)if(((Y=C.elements[Z])===null||Y===void 0?void 0:Y.uuid)===U){C.elements.splice(Z,1),C.elements=[...C.elements],D=Z;break}const B=Se(C);if(N.data=Object.assign({},C),N.pageTree=B,p.current.length===1&&D===p.current[0]){let Z=($=C==null?void 0:C.elements)===null||$===void 0?void 0:$[D],ue=D;for(;!(!((R=Z==null?void 0:Z.extends)===null||R===void 0)&&R.isPage)&&ue>0;)ue--,Z=(H=C==null?void 0:C.elements)===null||H===void 0?void 0:H[ue];if(Z){const X=Z.detail,{children:te}=X,ae=$s(X,["children"]),se={elements:te||[],layout:{x:0,y:0,w:Z.w,h:Z.h,detail:ae,operations:{position:"relative"}}},Bt=Se(se);N.editingData=se,N.editingDataPosition=[ue],N.elementTree=Bt,b.centerContent({data:se})}else N.editingData={elements:[]},N.editingDataPosition=[],N.elementTree=[]}else p.current.length===0&&(N.editingData=Object.assign({},C));B.length===0&&(N.elementTree=[],N.editingDataPosition=[],N.editingData={elements:[]}),f({type:"update",payload:N})},V=x=>{const{type:Y,position:$}=x,R=n==null?void 0:n.current;if(!R)return;const H=p.current,U=y.current;let C=E.current;if(H.length>0?k6(H,U,C):H.length===0&&(C=U),Y==="go-to-page"&&$){const D=[...$],N=Pt(D,C),B=Se(N);f({type:"update",payload:{data:Object.assign({},C),editingData:Object.assign({},N),editingDataPosition:D,elementTree:B}}),R.centerContent({data:N}),R.trigger(fe.clearSelect,{})}else if(Y==="go-to-group"&&$){const D=[...$],N=Pt(D,C),B=Se(N);f({type:"update",payload:{data:Object.assign({},C),editingData:Object.assign({},N),editingDataPosition:D,elementTree:B}}),R.centerContent({data:N}),R.trigger(fe.clearSelect,{})}else if(Y==="go-to-next-group"&&$){const D=[...H,...$],N=Pt(D,C),B=Se(N);f({type:"update",payload:{data:Object.assign({},C),editingData:Object.assign({},N),editingDataPosition:D,elementTree:B}}),R.centerContent({data:N}),R.trigger(fe.clearSelect,{})}else if(Y==="back-one"&&H.length>0){const D=[...H];D.pop();const N=Pt(D,C),B=Se(N);f({type:"update",payload:{data:Object.assign({},C),editingData:Object.assign({},N),editingDataPosition:[...D],elementTree:B}}),R.centerContent({data:N}),R.trigger(fe.clearSelect,{})}else if(Y==="back-root"){const D=[],N=Pt(D,C),B=Se(N);f({type:"update",payload:{data:Object.assign({},C),editingData:N,editingDataPosition:D,elementTree:B}}),R.centerContent({data:N}),R.trigger(fe.clearSelect,{})}},j=x=>{let{data:Y}=x,$=[],R=ho(Y);if(m.editMode==="page"&&(Y=vl(Y),R=ho(Y),R.length>0)){const C=R[0].uuid;$=ct(C,Y.elements)}let H=Pt($,Y);const U=Se(H);f({type:"update",payload:{data:Object.assign({},Y),editingData:Object.assign({},H),editingDataPosition:$,elementTree:U,pageTree:R}}),b.centerContent({data:H}),b.trigger(fe.clearSelect,{})},_=x=>{const{editingData:Y}=x,$=Se(Y);f({type:"update",payload:{editingData:Object.assign({},Y),elementTree:$}}),b.trigger(fe.clearSelect,{})};if(b.on(fe.select,z),b.on(fe.change,O),b.on(fe.scale,L),b.on(fe.textChange,M),d.on("createElement",I),d.on("addElement",P),d.on("deleteElement",k),d.on("addPage",W),d.on("deletePage",F),d.on("resetEditingView",V),d.on("resetData",j),d.on("resetEditingData",_),d.on("dispatch",f),!o.current){if(m.scaleInfo){const{scale:x,offsetX:Y,offsetY:$}=m.scaleInfo;x&&Y&&$?b.setViewScale({scale:x,offsetX:Y,offsetY:$}):b.centerContent({data:m.editingData})}o.current=!0}return l.set("idraw",b),()=>{o.current=!1,b.off(fe.select,z),b.off(fe.change,O),b.off(fe.scale,L),b.off(fe.textChange,M),l.set("idraw",null)}},[]),T.useEffect(()=>{n!=null&&n.current&&n.current.setData(v)},[v]),T.useEffect(()=>{if(n!=null&&n.current){const A=n.current;m.scaleInfo.from==="control"&&A.scale({scale:m.scaleInfo.scale,point:{x:s/2,y:c/2}})}},[m.scaleInfo]),T.useEffect(()=>{const A=n.current,b=t.current;A&&A.resize({width:s,height:c}),b&&(b.style.width=`${s}px`,b.style.height=`${c}px`)},[s,c]),T.useMemo(()=>r.createElement(mo,{menu:{items:w},trigger:["contextMenu"]},r.createElement("div",{ref:t,className:ce(g,i),style:Object.assign(Object.assign({},a),{width:s,height:c,padding:0})})),[w])},Sn="mod-dashboard",Go=240,Yo=240,En=36,xu=T.forwardRef((e,t)=>{const{className:n,style:o,width:i,height:a,logo:s,navigationMenu:c,navigationCenter:d,defaultSelectedElementUUIDs:l,sharedStore:h,sharedEvent:u,useContextMenuOptions:m,handleKeyboard:f,getPageTemplates:v,getMaterialTemplates:g}=e,{state:p}=T.useContext(Et),{editMode:y}=p,[E,S]=T.useState(!0),[w,A]=T.useState(!0);T.useEffect(()=>{const W=F=>{["INPUT","TEXTAREA"].includes(F.target.nodeName)||f(F,{sharedEvent:u,sharedStore:h})};return window.addEventListener("keydown",W),()=>{window.removeEventListener("keydown",W)}},[]);const[b,z]=T.useState({leftWidth:E?Go:0,rightWidth:w?Yo:0,centerWidth:i-(E?Go:0)-(w?Yo:0)});T.useEffect(()=>{const W=E?Go:0,F=w?Yo:0,V=i-W-F;z({leftWidth:W,rightWidth:F,centerWidth:V})},[a,i,E,w]);const O=G(Sn),L=G(Sn,"header"),M=G(Sn,"content"),I=G(Sn,"left"),P=G(Sn,"right"),k=G(Sn,"right");return T.useMemo(()=>{const{leftWidth:W,rightWidth:F,centerWidth:V}=b;return r.createElement("div",{ref:t,className:ce(O,n),style:Object.assign(Object.assign({},o),{width:i,height:a,padding:0})},r.createElement("div",{className:L,style:{height:En}},r.createElement(Su,{sharedEvent:u,sharedStore:h,logo:s,navigationMenu:c,navigationCenter:d,openLeftSider:E,openRightSider:w,getMaterialTemplates:g,onClickToggleLayer:()=>{const j=!E;let _=W;j?_=Go:_=0,z({leftWidth:_,rightWidth:F,centerWidth:i-_-F}),S(j)},onClickToggleSetting:()=>{const j=!w;let _=F;j?_=Yo:_=0,z({leftWidth:W,rightWidth:_,centerWidth:i-W-_}),A(j)}})),r.createElement("div",{className:M,style:{top:En}},r.createElement(gi,{split:"vertical",defaultSize:V+F,allowResize:!0,onChange:j=>{const _=i-j,x=j-F;x<100||z({leftWidth:_,rightWidth:F,centerWidth:x})},pane1Style:{width:W},pane2Style:{width:V+F}},r.createElement("div",null,E&&(y==="page"?r.createElement(nu,{height:a-En,className:I,defaultSelectedElementUUIDs:l,sharedEvent:u,sharedStore:h,useContextMenuOptions:m,getPageTemplates:v}):r.createElement(X6,{height:a-En,className:I,sharedEvent:u,sharedStore:h,useContextMenuOptions:m}))),r.createElement("div",{style:{width:b.centerWidth+b.rightWidth,display:"flex",flexDirection:"row"}},r.createElement(Cu,{className:k,width:V,height:a-En,sharedStore:h,sharedEvent:u,useContextMenuOptions:m}),r.createElement("div",{className:P,style:{width:F,height:a-En}},r.createElement(au,null))))))},[n,y,E,w,b,a])});function Xs(){return{idraw:null,clipboard:{type:"default",data:null},selectedUUIDs:[]}}function Mu(e){const{sharedEvent:t,sharedStore:n}=e;t.on("copy",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const s=Zo(i,a.elements);s.length>0&&n.set("clipboard",{type:"copy-elements",data:s})}}),t.on("paste",()=>{const o=n.get("idraw"),i=n.get("clipboard"),a=n.get("selectedUUIDs");if(o&&["copy-elements","cut-elements"].includes(i==null?void 0:i.type)&&Array.isArray(i.data)){const s=i.data,c=[];if(i.type==="copy-elements"){for(let m=0;m<s.length;m++)if(s[m]){const f=s[m],v=ao(f);v.name=`${v.name} copy`,c.push(v)}}else if(i.type==="cut-elements"){for(let m=0;m<s.length;m++)if(s[m]){const f=s[m],v=ao(f);v.name=`${v.name}`,c.push(v)}}const d=o==null?void 0:o.getData(),l=ct(a[0],(d==null?void 0:d.elements)||[]);l.length>0&&l[l.length-1]++,c.forEach(m=>{o.addElement(m,{position:l})});const h=o==null?void 0:o.getData(),u=Se(h);t.trigger("dispatch",{type:"update",payload:{editingData:h,elementTree:u}}),o.selectElement(c[0].uuid),setTimeout(()=>{t.trigger("scrollToLayer",{uuid:c[0].uuid})},100)}}),t.on("cut",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const d=Zo(i,a.elements);d.length>0&&n.set("clipboard",{type:"cut-elements",data:d.map(l=>ao(l))}),d.forEach(l=>{o==null||o.deleteElement(l.uuid)})}const s=o==null?void 0:o.getData(),c=Se(s);t.trigger("dispatch",{type:"update",payload:{editingData:s,elementTree:c}}),o==null||o.trigger(fe.clearSelect)}),t.on("delete",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const s=Zo(i,a.elements);if(s.length>0){for(let l=0;l<s.length;l++)o==null||o.deleteElement(s[l].uuid);const c=o==null?void 0:o.getData(),d=Se(c);t.trigger("dispatch",{type:"update",payload:{editingData:c,elementTree:d}}),o==null||o.trigger(fe.clearSelect)}}})}const zu=e=>{const[t]=wo("contextMenu"),{sharedEvent:n}=e;return[[{label:t.copy,key:"copy",onClick:()=>{n.trigger("copy")}},{label:t.paste,key:"paste-here",onClick:()=>{n.trigger("paste")}},{label:t.cut,key:"cut",onClick:()=>{n.trigger("cut")}},{label:t.delete,key:"delete",onClick:()=>{n.trigger("delete")}}]]};var Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});var Iu=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ta={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},El={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Iu?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},La={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var $o=1;$o<20;$o++)La["f"+$o]=111+$o;function Li(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var o=e.map(function(s){return Cl(s,t)}),i=function(c){return o.some(function(d){return xl(d,c)})},a=n==null?i:i(n);return a}function Au(e,t){return Li(e,t)}function Tu(e,t){return Li(e,{byKey:!0},t)}function Cl(e,t){var n=t&&t.byKey,o={};e=e.replace("++","+add");var i=e.split("+"),a=i.length;for(var s in ta)o[ta[s]]=!1;var c=!0,d=!1,l=void 0;try{for(var h=i[Symbol.iterator](),u;!(c=(u=h.next()).done);c=!0){var m=u.value,f=m.endsWith("?")&&m.length>1;f&&(m=m.slice(0,-1));var v=Oa(m),g=ta[v];if(m.length>1&&!g&&!El[m]&&!La[v])throw new TypeError('Unknown modifier: "'+m+'"');(a===1||!g)&&(n?o.key=v:o.which=Ml(m)),g&&(o[g]=f?null:!0)}}catch(p){d=!0,l=p}finally{try{!c&&h.return&&h.return()}finally{if(d)throw l}}return o}function xl(e,t){for(var n in e){var o=e[n],i=void 0;if(o!=null&&(n==="key"&&t.key!=null?i=t.key.toLowerCase():n==="which"?i=o===91&&t.which===93?91:t.which:i=t[n],!(i==null&&o===!1)&&i!==o))return!1}return!0}function Ml(e){e=Oa(e);var t=La[e]||e.toUpperCase().charCodeAt(0);return t}function Oa(e){return e=e.toLowerCase(),e=El[e]||e,e}var Cn=Ct.default=Li;Ct.isHotkey=Li;Ct.isCodeHotkey=Au;Ct.isKeyHotkey=Tu;Ct.parseHotkey=Cl;Ct.compareHotkey=xl;Ct.toKeyCode=Ml;Ct.toKeyName=Oa;const Nu=(e,t)=>{const{sharedEvent:n}=t;Cn("mod+c",e)?n.trigger("copy",void 0):Cn("mod+v",e)?n.trigger("paste",void 0):Cn("mod+x",e)?n.trigger("cut",void 0):Cn("del",e)||Cn("backspace",e)?n.trigger("delete",void 0):Cn("mod+s",e)&&console.log("Save ... ")},Lu=r.forwardRef((e,t)=>{const{width:n=1e3,height:o=600,style:i,className:a,logo:s,navigationMenu:c,navigationCenter:d,defaultSelectedElementUUIDs:l,defaultEditMode:h,prefiexName:u,onEditGroupElement:m,useContextMenuOptions:f=zu,handleKeyboard:v=Nu,getPageTemplates:g,getMaterialTemplates:p}=e,[y,E]=T.useReducer(B6,_6(e)),S=T.useRef(null),w=T.useRef(new en),A=T.useRef(new tn({defaultStorage:Xs()}));return T.useEffect(()=>{if(h!=="page"){const b=He(y.editingDataPosition,y.data.elements);m==null||m({uuid:b==null?void 0:b.uuid,position:[...y.editingDataPosition]})}},[y.editingDataPosition]),T.useImperativeHandle(t,()=>({getSharedEvent(){return w.current},getSharedStore(){return A.current},dispatch(z){const{type:O,payload:L}=z;E({type:O,payload:L})}}),[]),T.useEffect(()=>(w.current||(w.current=new en),A.current||(A.current=new tn({defaultStorage:Xs()})),Mu({sharedEvent:w.current,sharedStore:A.current}),()=>{var b,z;(b=A.current)===null||b===void 0||b.clear(),(z=w.current)===null||z===void 0||z.destroy(),w.current=null,A.current=null}),[]),T.useEffect(()=>{const b=A.current;b&&b.set("selectedUUIDs",[...y.selectedUUIDs])},[y.selectedUUIDs]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("switchTheme",{theme:y.themeMode})},[y.themeMode]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("changeLocale",{locale:y.localeCode})},[y.localeCode]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("trackDataChange",{data:y.data})},[y.data]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("trackEditingDataChange",{editingData:y.editingData,editingDataPosition:y.editingDataPosition})},[y.editingData,y.editingDataPosition]),T.useMemo(()=>r.createElement(Vl,{localeCode:y.localeCode,topPrefix:u,themeMode:y.themeMode,getContainer:()=>S.current||document.body},r.createElement(F6,{value:{state:y,dispatch:E}},r.createElement(xu,{logo:s,navigationMenu:c,navigationCenter:d,ref:S,width:n,height:o,style:i,className:a,defaultSelectedElementUUIDs:l,sharedEvent:w.current,sharedStore:A.current,useContextMenuOptions:f,handleKeyboard:v,getPageTemplates:g,getMaterialTemplates:p}))),[u,n,o,y,E])});export{Lu as S};
