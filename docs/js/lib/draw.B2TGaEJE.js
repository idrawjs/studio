import{r as I,R as s}from"./react.D016eMnP.js";import{c as fe,C as Dl,t as Ga,S as tr,D as Jn,B as Re,T as he,I as Ut,a as nr,F as K,R as me,b as J,d as Ll,e as Pl,f as Rl,g as at,P as or,h as qe,s as Mo,E as Yt,i as Ma,j as Ol,k as dn,l as ir,A as kl,M as ar,m as _l,n as sr,o as jl,p as Vl}from"./antd.CAdaRPzT.js";let ki="idraw-studio";function Ya(e){ki=e}function $a(){return ki}function rr(e){return(...t)=>[ki,e,...t].join("-")}function G(...e){return[ki,...e].join("-")}const Bl={locale:"en-US",Header:{},LayoutDetail:{layout:"Layout",groupLayout:"Group Layout",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible"},ElementDesign:{element:"Element",layout:"Layout",global:"Global"},ElementDetail:{basicAttributes:"Basic",borderAttribute:"Border",contentAttribute:"Content",shadowAttribute:"Shadow",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible",deepResizeInGroup:"Deep resize in group",fill:"Fill",stroke:"Stroke"},Menu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio"}},Fl={locale:"zh-CN",Header:{},LayoutDetail:{layout:"布局",groupLayout:"组布局",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视"},ElementDesign:{element:"元素",layout:"布局",global:"全局"},ElementDetail:{basicAttributes:"基础",borderAttribute:"边框",contentAttribute:"内容",shadowAttribute:"阴影",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视",deepResizeInGroup:"组内尺寸关联调整",fill:"填充",stroke:"描边"},Menu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例"}},Xa={"en-US":Bl,"zh-CN":Fl},da="en-US",za=e=>{const{localeCode:t}=I.useContext(pn);return[I.useMemo(()=>{const i=(Xa[t||da]||Xa[da])[e];return Object.assign({},i)},[t,e])]},Wl=e=>{const{themeMode:t}=e,n="theme",o=G(n),i=G(n,"dark"),a=fe({[o]:!0,[i]:t==="dark"});return{themeMode:t,className:a}},lr=e=>(e!=null&&e.topPrefix&&typeof(e==null?void 0:e.topPrefix)=="string"&&Ya(e.topPrefix),Object.assign({topPrefix:$a(),createPrefixName:rr,generateClassName:G,getClassNameTopPrefix:$a,setClassNameTopPrefix:Ya,localeCode:da,getContainer:()=>(e==null?void 0:e.container)||document.body},e||{})),pn=I.createContext(lr()),Hl=e=>{const{children:t,topPrefix:n,localeCode:o,container:i,themeMode:a,getContainer:r}=e,c=lr({topPrefix:n,localeCode:o,getContainer:r}),[d,l]=I.useState(c),{className:h}=Wl({themeMode:a});return I.useEffect(()=>{l(Object.assign(Object.assign({},d),{localeCode:o,container:i}))},[o,i]),s.createElement(pn.Provider,{value:Object.assign({},d)},s.createElement(Dl,{theme:{algorithm:a==="dark"?Ga.darkAlgorithm:Ga.defaultAlgorithm}},s.createElement("div",{className:h},t)))};class Ua extends s.PureComponent{render(){const{children:t,className:n,split:o,style:i,size:a,eleRef:r}=this.props,c=["Pane",o,n];let d={flex:1,position:"relative",outline:"none"};return a!==void 0&&(o==="vertical"?d.width=a:(d.height=a,d.display="flex"),d.flex="none"),d=Object.assign({},d,i||{}),s.createElement("div",{ref:r,className:c.join(" "),style:d},t)}}const Gl="base-split-pane",Yl=()=>{const{generateClassName:e}=I.useContext(pn);return{modClassName:e(Gl)}};function $l(e){const{modClassName:t}=Yl(),{className:n,onClick:o,onDoubleClick:i,onMouseDown:a,onTouchEnd:r,onTouchStart:c,resizerClassName:d=t,split:l,style:h}=e,u=[d,l,n];return I.useMemo(()=>s.createElement("span",{role:"presentation",className:u.join(" "),style:h,onMouseDown:f=>a(f),onTouchStart:f=>{f.preventDefault(),c(f)},onTouchEnd:f=>{f.preventDefault(),r(f)},onClick:f=>{o&&(f.preventDefault(),o(f))},onDoubleClick:f=>{i&&(f.preventDefault(),i(f))}}),[])}const Xl="xxxxx";function Za(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch{}}function Qa(e,t,n,o){if(typeof o=="number"){const i=typeof t=="number"?t:0,a=typeof n=="number"&&n>=0?n:1/0;return Math.max(i,Math.min(a,o))}return e!==void 0?e:t}function Ul(e){return s.Children.toArray(e).filter(t=>t)}class Mi extends s.Component{constructor(t){super(t),this.onMouseDown=this.onMouseDown.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this);const{size:n,defaultSize:o,minSize:i,maxSize:a,primary:r}=t,c=n!==void 0?n:Qa(o,i,a,null);this.state={active:!1,resized:!1,pane1Size:r==="first"?c:void 0,pane2Size:r==="second"?c:void 0,instanceProps:{size:n}}}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(Mi.getSizeUpdate(this.props,this.state))}static getDerivedStateFromProps(t,n){return Mi.getSizeUpdate(t,n)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}onMouseDown(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchStart(n)}onTouchStart(t){const{allowResize:n,onDragStarted:o,split:i}=this.props;if(n){Za(document,window);const a=i==="vertical"?t.touches[0].clientX:t.touches[0].clientY;typeof o=="function"&&o(),this.setState({active:!0,position:a})}}onMouseMove(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchMove(n)}onTouchMove(t){const{allowResize:n,maxSize:o,minSize:i,onChange:a,split:r,step:c}=this.props,{active:d,position:l}=this.state;if(n&&d){Za(document,window);const h=this.props.primary==="first",u=h?this.pane1:this.pane2,f=h?this.pane2:this.pane1;if(u){const m=u,v=f;if(m.getBoundingClientRect){const g=m.getBoundingClientRect().width,p=m.getBoundingClientRect().height,b=r==="vertical"?t.touches[0].clientX:t.touches[0].clientY,E=r==="vertical"?g:p;let M=l-b;if(c){if(Math.abs(M)<c)return;M=~~(M/c)*c}let y=h?M:-M;const R=parseInt(window.getComputedStyle(m).order),C=parseInt(window.getComputedStyle(v).order);R>C&&(y=-y);let w=o;if(o!==void 0&&o<=0){const x=this.splitPane;r==="vertical"?w=x.getBoundingClientRect().width+o:w=x.getBoundingClientRect().height+o}let O=E-y;const A=l-M;O<i?O=i:o!==void 0&&O>w?O=w:this.setState({position:A,resized:!0}),a&&a(O),this.setState({draggedSize:O,[h?"pane1Size":"pane2Size"]:O})}}}}onMouseUp(){const{allowResize:t,onDragFinished:n}=this.props,{active:o,draggedSize:i}=this.state;t&&o&&(typeof n=="function"&&n(i),this.setState({active:!1}))}static getSizeUpdate(t,n){const o={},{instanceProps:i}=n;if(i.size===t.size&&t.size!==void 0)return{};const a=t.size!==void 0?t.size:Qa(t.defaultSize,t.minSize,t.maxSize,n.draggedSize);t.size!==void 0&&(o.draggedSize=a);const r=t.primary==="first";return o[r?"pane1Size":"pane2Size"]=a,o[r?"pane2Size":"pane1Size"]=void 0,o.instanceProps={size:t.size},o}render(){const{allowResize:t,children:n,className:o,onResizerClick:i,onResizerDoubleClick:a,paneClassName:r,pane1ClassName:c,pane2ClassName:d,paneStyle:l,pane1Style:h,pane2Style:u,resizerClassName:f,resizerStyle:m,split:v,style:g}=this.props,{pane1Size:p,pane2Size:b}=this.state,E=t?"":"disabled",M=f&&`${f} ${Xl}`,y=Ul(n),R=Object.assign({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},g);v==="vertical"?Object.assign(R,{flexDirection:"row",left:0,right:0}):Object.assign(R,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});const C=["SplitPane",o,v,E],w=Object.assign(Object.assign({},l),h),O=Object.assign(Object.assign({},l),u),A=["Pane1",r,c].join(" "),x=["Pane2",r,d].join(" ");return s.createElement("div",{className:C.join(" "),ref:j=>{this.splitPane=j},style:R},s.createElement(Ua,{className:A,key:"pane1",eleRef:j=>{this.pane1=j},size:p,split:v,style:w},y[0]),s.createElement($l,{className:E,onClick:i,onDoubleClick:a,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:M,split:v,style:m||{}}),s.createElement(Ua,{className:x,key:"pane2",eleRef:j=>{this.pane2=j},size:b,split:v,style:O},y[1]))}}var Zl=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Ql="icon",Jl=()=>({iconClassName:G(Ql)}),ne=e=>{const{className:t,style:n,children:o}=e,i=Zl(e,["className","style","children"]),{iconClassName:a}=Jl();return I.useMemo(()=>s.createElement("span",Object.assign({className:fe([a,t]),style:n},i),o),[a,n,t])},Kl=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M516.266667 938.666667h-38.4c-234.666667-21.333333-405.333333-230.4-384-465.066667 17.066667-204.8 179.2-366.933333 384-384 17.066667 0 34.133333 8.533333 42.666666 21.333333 8.533333 12.8 8.533333 34.133333-4.266666 46.933334-85.333333 115.2-59.733333 273.066667 55.466666 358.4 89.6 68.266667 213.333333 68.266667 302.933334 0 12.8-8.533333 29.866667-12.8 46.933333-4.266667 12.8 8.533333 21.333333 25.6 21.333333 42.666667-8.533333 115.2-64 217.6-153.6 290.133333-81.066667 59.733333-174.933333 93.866667-273.066666 93.866667zM396.8 187.733333c-123.733333 42.666667-213.333333 153.6-221.866667 290.133334-17.066667 187.733333 119.466667 354.133333 307.2 371.2 89.6 8.533333 179.2-17.066667 247.466667-76.8 46.933333-38.4 81.066667-89.6 102.4-145.066667-106.666667 38.4-226.133333 21.333333-320-46.933333-119.466667-93.866667-166.4-251.733333-115.2-392.533334z"}))),ql=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M512 768c-141.376 0-256-114.624-256-256s114.624-256 256-256 256 114.624 256 256-114.624 256-256 256z m0-85.333333a170.666667 170.666667 0 1 0 0-341.333334 170.666667 170.666667 0 0 0 0 341.333334zM469.333333 85.333333a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0V85.333333z m0 768a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0v-85.333334zM85.333333 554.666667a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334H85.333333z m768 0a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334h-85.333334zM161.834667 222.165333a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m576 576a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m-515.669334 64a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z m576-576a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z"}))),ec="base-theme-switch",tc=rr(ec),Ja=e=>{if(!(typeof e>"u"))return e==="light"};function nc(e){return e===!0?"light":"dark"}const oc=e=>{const{className:t,style:n,onChange:o,theme:i,defaultTheme:a}=e;return s.createElement(tr,{className:fe([tc(),t]),style:n,checkedChildren:s.createElement(ql,{style:{height:"100%"}}),unCheckedChildren:s.createElement(Kl,{style:{height:"100%"}}),checked:Ja(a),defaultChecked:Ja(i),onChange:r=>{const c=nc(r);o==null||o({theme:c})}})},ic=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}),s.createElement("path",{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8C574.1 404.4 544.1 392 512 392z"}))),ac=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),sc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),rc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),lc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-0.7 5.2-2L869 536.2c14.7-12.8 14.7-35.6 0-48.4z"}))),cc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}))),dc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H212V612h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200z"}))),uc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333zM128 469.333333v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM128 640v85.333333h85.333333v-85.333333z m0-341.333333v85.333333h85.333333v-85.333333z m341.333333 341.333333v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128zM128 810.666667v85.333333h768v-85.333333z"}))),hc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M592 928H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96zM976 0H784a48 48 0 1 0 0 96h144v144.016a48 48 0 1 0 96 0V48a48 48 0 0 0-48-48zM240 928H96v-144a48 48 0 1 0-96 0v192a48 48 0 0 0 48 48h192a48 48 0 1 0 0-96zM48 640a48 48 0 0 0 48-48V432a48 48 0 1 0-96 0v160a48 48 0 0 0 48 48zM240 0H48a48 48 0 0 0-48 48v192a48 48 0 1 0 96 0V96h144a48 48 0 1 0 0-96z m784 592V432a48 48 0 1 0-96 0v160a48 48 0 1 0 96 0zM592 0H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96z m384 736a48 48 0 0 0-48 48v144h-144a48 48 0 1 0 0 96h192a48 48 0 0 0 48-48V784a48 48 0 0 0-48-48z"}))),fc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333z m-512-170.666667v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM469.333333 640v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v768h85.333333V128z m170.666667 0v85.333333h85.333333V128z m170.666666 682.666667v85.333333h85.333334v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m-512 0v85.333333h85.333333v-85.333333z"}))),mc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333zM128 213.333333h85.333333V128H128v85.333333z m170.666667 0h85.333333V128h-85.333333v85.333333z m0 341.333334h85.333333v-85.333334h-85.333333v85.333334zM128 896h85.333333v-85.333333H128v85.333333z m341.333333 0h85.333334v-85.333333h-85.333334v85.333333zM128 554.666667h85.333333v-85.333334H128v85.333334z m0 170.666666h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m170.666667-170.666666h85.333333v-85.333334h-85.333333v85.333334z m170.666667-426.666667v768h85.333333V128h-85.333333z m-170.666667 768h85.333333v-85.333333h-85.333333v85.333333z m0-682.666667h85.333333V128h-85.333333v85.333333z m-170.666667 341.333334h85.333334v-85.333334h-85.333334v85.333334z m0-341.333334h85.333334V128h-85.333334v85.333333z m0 170.666667h85.333334v-85.333333h-85.333334v85.333333z"}))),gc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333z m0-341.333333h85.333333v-85.333334h-85.333333v85.333334z m170.666666 0h85.333334v-85.333334h-85.333334v85.333334z m0 341.333333h85.333334v-85.333333h-85.333334v85.333333zM128 725.333333h85.333333v-85.333333H128v85.333333z m0 170.666667h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333334H128v85.333334z m0-170.666667h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m341.333334-341.333333h85.333333v-85.333333h-85.333333v85.333333z m0 170.666667h85.333333v-85.333334h-85.333333v85.333334zM128 128v85.333333h768V128H128z m682.666667 597.333333h85.333333v-85.333333h-85.333333v85.333333z m-170.666667 170.666667h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-512h85.333334v-85.333333h-85.333334v85.333333z m341.333334 512h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-341.333333h85.333333v-85.333334h-85.333333v85.333334z"}))),vc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8c12.7 17.7 39 17.7 51.7 0l210.6-292c3.9-5.3 0.1-12.7-6.4-12.7z"}),s.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),cr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),dr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 0.3L512 465.6l-99.3-118.4-66.1-0.3c-4.4 0-8 3.5-8 8 0 1.9 0.7 3.7 1.9 5.2l130.1 155L340.5 670c-1.2 1.5-1.9 3.3-1.9 5.2 0 4.4 3.6 8 8 8l66.1-0.3L512 564.4l99.3 118.4 66 0.3c4.4 0 8-3.5 8-8 0-1.9-0.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}),s.createElement("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),pc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M341.333333 512a42.666667 42.666667 0 0 0 42.666667 42.666667h256a42.666667 42.666667 0 0 0 0-85.333334H384a42.666667 42.666667 0 0 0-42.666667 42.666667z"}),s.createElement("path",{d:"M384 682.666667H307.626667A176.213333 176.213333 0 0 1 128 527.786667 170.666667 170.666667 0 0 1 298.666667 341.333333h85.333333a42.666667 42.666667 0 0 0 0-85.333333H307.626667a262.4 262.4 0 0 0-262.826667 222.293333A256 256 0 0 0 298.666667 768h85.333333a42.666667 42.666667 0 0 0 0-85.333333zM981.333333 479.573333A262.826667 262.826667 0 0 0 715.093333 256h-64.426666C616.106667 256 597.333333 275.2 597.333333 298.666667a42.666667 42.666667 0 0 0 42.666667 42.666666h76.373333A176.213333 176.213333 0 0 1 896 496.213333 170.666667 170.666667 0 0 1 725.333333 682.666667h-85.333333a42.666667 42.666667 0 0 0 0 85.333333h85.333333a256 256 0 0 0 256-288.426667z"}))),yc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M712 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM136 374h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM136 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM540 824H358c-87.3 0-158-70.7-158-158V484c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v182c0 127 103 230 230 230h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),wc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M368 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM484 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM658 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 476h-56c-4.4 0-8 3.6-8 8v182c0 87.3-70.7 158-158 158H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c127 0 230-103 230-230V484c0-4.4-3.6-8-8-8z"}))),bc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M656 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128H358c-127 0-230 103-230 230v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-87.3 70.7-158 158-158h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),Ec=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M368 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM666 128H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c87.3 0 158 70.7 158 158v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-127-103-230-230-230z"}))),Ka=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M896 810.666667v85.333333h-85.333333v-85.333333h85.333333z m-170.666667 0v85.333333h-85.333333v-85.333333h85.333333z m-170.666666 0v85.333333h-85.333334v-85.333333h85.333334z m-170.666667 0v85.333333H298.666667v-85.333333h85.333333z m-170.666667 0v85.333333H128v-85.333333h85.333333z m682.666667-170.666667v85.333333h-85.333333v-85.333333h85.333333zM213.333333 640v85.333333H128v-85.333333h85.333333z m0-170.666667v85.333334H128v-85.333334h85.333333z m469.333334-341.333333a213.418667 213.418667 0 0 1 213.12 204.074667L896 341.333333v213.333334h-85.333333V341.333333a128.426667 128.426667 0 0 0-120.490667-127.786666L682.666667 213.333333h-213.333334V128h213.333334zM213.333333 298.666667v85.333333H128V298.666667h85.333333z m0-170.666667v85.333333H128V128h85.333333z m170.666667 0v85.333333H298.666667V128h85.333333z"}))),Sc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72z"}),s.createElement("path",{d:"M864 256H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}))),Cc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M510.762667 970.666667A458.666667 458.666667 0 1 1 969.429333 512a459.178667 459.178667 0 0 1-458.666666 458.666667z m0-853.333334a394.666667 394.666667 0 1 0 394.666666 394.666667 395.093333 395.093333 0 0 0-394.666666-394.666667z"}),s.createElement("path",{d:"M512 724.48A212.48 212.48 0 1 1 724.48 512 212.736 212.736 0 0 1 512 724.48z m0-360.96A148.48 148.48 0 1 0 660.48 512 148.608 148.608 0 0 0 512 363.52z"}))),ur=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M272.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512z"}),s.createElement("path",{d:"M576.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}))),Ia=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3 0.1-12.7-6.4-12.7z"}))),xc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M841.065412 337.317647v352.015059c0 46.802824-23.070118 74.752-39.936 95.111529-14.095059 17.106824-21.443765 26.684235-21.443765 41.803294V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-107.39953c0-37.526588 19.576471-61.199059 35.297882-80.173176 14.576941-17.648941 26.142118-31.563294 26.142118-56.681412V337.317647c0-18.793412-16.143059-36.502588-33.189647-36.502588-19.817412 0-24.033882 3.072-24.214588 3.19247-3.975529 5.360941-3.855059 34.273882-3.794824 57.584942 0.060235 11.384471 0.120471 24.094118-0.12047 38.068705-0.240941 16.504471-12.830118 28.792471-30.358589 29.696a30.117647 30.117647 0 0 1-29.876706-30.117647v-127.698823c0-18.492235-13.372235-32.406588-31.081411-32.406588-16.263529 0-28.190118 12.107294-29.635765 29.394823v120.651294a30.117647 30.117647 0 0 1-60.235294 0V268.047059l-0.120471-0.602353v-46.561882c0-3.975529-0.843294-38.671059-28.551529-38.671059-27.105882 0-31.201882 24.214588-31.201883 38.671059v42.345411c0 1.686588-0.662588 3.252706-0.963764 4.879059v156.250353a30.117647 30.117647 0 0 1-60.235294 0V262.686118c-2.891294-11.685647-11.324235-23.491765-28.069647-23.491765-17.227294 0-31.744 15.721412-31.744 34.334118v201.788235c0 0.421647-0.361412 0.783059-0.361412 1.204706v66.319059a30.117647 30.117647 0 0 1-60.235294 0v-50.236236c-10.601412-3.855059-25.961412-6.987294-34.755765-4.999529-7.107765 1.385412-14.275765 7.649882-18.733176 16.323765a43.309176 43.309176 0 0 0-0.542118 38.369882L345.148235 766.192941a31.563294 31.563294 0 0 1 2.108236 6.505412 32.888471 32.888471 0 0 0 35.418353 25.961412 30.238118 30.238118 0 0 1 33.310117 29.936941V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-77.462588a92.521412 92.521412 0 0 1-66.680471-67.764706L187.934118 567.055059a104.448 104.448 0 0 1 1.927529-90.774588c12.890353-24.877176 35.418353-42.706824 60.295529-47.766589 12.649412-2.590118 29.756235-1.867294 46.682353 1.566118v-43.369412c0-0.602353 0.301176-1.144471 0.361412-1.746823v-111.435294c0-52.163765 41.321412-94.569412 91.979294-94.569412 12.047059 0 23.612235 2.409412 34.093177 6.746353 11.986824-38.791529 44.152471-63.668706 86.317176-63.668706 40.237176 0 71.800471 25.419294 83.666824 63.909647 10.721882-4.517647 22.467765-6.987294 34.876235-6.987294 41.502118 0 75.776 26.744471 87.160471 64.572235 11.023059-2.409412 22.226824-2.951529 32.286117-2.951529 50.718118 0 93.485176 44.272941 93.485177 96.737882z"}))),Mc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}))),zc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}),s.createElement("path",{d:"M544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}))),Ic=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M170.666667 298.666667a42.666667 42.666667 0 1 1-85.333334 0V256a170.666667 170.666667 0 0 1 170.666667-170.666667h42.666667a42.666667 42.666667 0 1 1 0 85.333334H256a85.333333 85.333333 0 0 0-85.333333 85.333333v42.666667z m554.666666-128a42.666667 42.666667 0 0 1 0-85.333334h42.666667a170.666667 170.666667 0 0 1 170.666667 170.666667v42.666667a42.666667 42.666667 0 0 1-85.333334 0V256a85.333333 85.333333 0 0 0-85.333333-85.333333h-42.666667z m128 554.666666a42.666667 42.666667 0 0 1 85.333334 0v42.666667a170.666667 170.666667 0 0 1-170.666667 170.666667h-42.666667a42.666667 42.666667 0 0 1 0-85.333334h42.666667a85.333333 85.333333 0 0 0 85.333333-85.333333v-42.666667zM298.666667 853.333333a42.666667 42.666667 0 0 1 0 85.333334H256a170.666667 170.666667 0 0 1-170.666667-170.666667v-42.666667a42.666667 42.666667 0 0 1 85.333334 0v42.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h42.666667z"}))),hr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M0.00592 521.157814v-103.646801l430.267025 235.101281c36.191582 13.567843 70.207188 15.615819 111.870706 0.191998l440.986902-258.365013v103.614802l-435.386966 258.877007c-42.175512 18.303788-91.326944 18.303788-126.398539 0L0.00592 521.157814z"}),s.createElement("path",{d:"M0.00592 743.651242v-104.798789l406.427301 221.43744c17.2798 9.439891 40.511532 17.599797 65.119247 20.383764h27.999676c32.511624-5.023942 47.103455-10.207882 67.615218-22.943735l415.931191-258.173014v98.974855l-430.875018 268.95689c-42.111513 17.439798-95.806892 18.079791-130.878487 0.575994L0.00592 743.619242zM20.069688 246.024995L399.073306 20.971598c41.279523-26.303696 90.430954-27.967677 133.342458-4.35195l421.083131 198.621703c35.743587 17.599797 37.18357 61.311291 2.655969 81.151062l-414.043212 226.205384a165.758083 165.758083 0 0 1-133.374458 4.415949L22.725657 327.208057C9.157814 318.664155 0.90191 303.56033 0.229917 285.000545c-0.607993-18.911781 10.719876-32.159628 19.807771-38.94355z"})," ")),fr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M145 96l66 746.6L511.8 928l299.6-85.4L878.7 96H145z m610.9 700.6l-244.1 69.6-245.2-69.6-56.7-641.2h603.8l-57.8 641.2z"}),s.createElement("path",{d:"M281 249l1.7 24.3 22.7 253.5h206.5v-0.1h112.9l-11.4 118.5L511 672.9v0.2h-0.8l-102.4-27.7-6.5-73.2h-91l11.3 144.7 188.6 52h1.7v-0.4l187.7-51.7 1.7-16.3 21.2-242.2 3.2-24.3H511v0.2H389.9l-8.2-94.2h352.1l1.7-19.5 4.8-47.2L742 249H511z"}))),Ac=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M540.245333 645.888L426.410667 522.069333l1.365333-1.536a889.770667 889.770667 0 0 0 166.314667-322.048h131.413333V99.669333H411.562667V1.109333h-89.6v98.645334H7.850667v98.730666h500.906666a797.696 797.696 0 0 1-142.165333 263.936 778.581333 778.581333 0 0 1-103.594667-165.290666h-89.6c33.621333 82.176 78.677333 158.037333 133.546667 224.938666L78.848 769.706667l63.658667 69.973333 224.170666-246.613333 139.52 153.429333 34.133334-100.608z m252.501334-250.026667H703.061333l-201.813333 591.872h89.685333l50.261334-147.968h212.992l50.688 147.968h89.685333L792.746667 395.776zM675.242667 741.034667l72.618666-213.674667 72.704 213.674667H675.242667z"}))),mr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792z m0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z"}),s.createElement("path",{d:"M304 456c48.6 0 88-39.4 88-88s-39.4-88-88-88-88 39.4-88 88 39.4 88 88 88z m0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}))),gr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M942.3 486.4l-0.1-0.1-0.1-0.1c-36.4-76.7-80-138.7-130.7-186L760.7 351c43.7 40.2 81.5 93.7 114.1 160.9C791.5 684.2 673.4 766 512 766c-51.3 0-98.3-8.3-141.2-25.1l-54.7 54.7C374.6 823.8 439.8 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0.1-51.3zM878.3 154.2l-42.4-42.4c-3.1-3.1-8.2-3.1-11.3 0L707.8 228.5C649.4 200.2 584.2 186 512 186c-192.2 0-335.4 100.5-430.2 300.3v0.1c-7.7 16.2-7.7 35.2 0 51.5 36.4 76.7 80 138.7 130.7 186.1L111.8 824.5c-3.1 3.1-3.1 8.2 0 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0l712.8-712.8c3.1-3 3.1-8.1 0-11.2zM398.9 537.4c-1.9-8.2-2.9-16.7-2.9-25.4 0-61.9 50.1-112 112-112 8.7 0 17.3 1 25.4 2.9L398.9 537.4z m184.5-184.5C560.5 342.1 535 336 508 336c-97.2 0-176 78.8-176 176 0 27 6.1 52.5 16.9 75.4L263.3 673c-43.7-40.2-81.5-93.7-114.1-160.9C232.6 339.8 350.7 258 512 258c51.3 0 98.3 8.3 141.2 25.1l-69.8 69.8z"}),s.createElement("path",{d:"M508 624c-6.4 0-12.7-0.5-18.8-1.6l-51.1 51.1c21.4 9.3 45.1 14.4 69.9 14.4 97.2 0 176-78.8 176-176 0-24.8-5.1-48.5-14.4-69.9l-51.1 51.1c1 6.1 1.6 12.4 1.6 18.8C620 573.9 569.9 624 508 624z"}))),Tc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M118.979048 637.074286l137.99619 66.243047 255.171048 123.587048 246.076952-119.222857 147.163429-70.485334a73.142857 73.142857 0 0 1-34.230857 97.109334l-327.119239 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 734.305524A73.142857 73.142857 0 0 1 118.979048 637.074286z m786.090666-153.063619a73.142857 73.142857 0 0 1-33.913904 97.767619L544.01219 740.205714a73.142857 73.142857 0 0 1-63.780571 0L153.136762 581.778286A73.142857 73.142857 0 0 1 117.51619 487.862857l362.300953 170.886095 32.329143 15.652572 327.119238-158.427429 65.80419-31.939047zM544.036571 139.190857l327.094858 158.403048a73.142857 73.142857 0 0 1 0 131.657143l-327.094858 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 429.251048a73.142857 73.142857 0 0 1 0-131.657143L480.256 139.215238a73.142857 73.142857 0 0 1 63.780571 0z m-31.890285 65.828572L185.027048 363.422476l327.119238 158.427429 327.119238-158.427429L512.146286 205.04381z"}))),Nc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-696 72h136v656H184V184z m656 656H384V384h456v456zM384 320V184h456v136H384z"}))),vr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8c-16.4 12.8-16.4 37.5 0 50.3l450.8 352.1c5.3 4.1 12.9 0.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}))),Dc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53c-12.1-8.7-20-22.9-20-39 0-26.5 21.5-48 48-48s48 21.5 48 48c0 16.1-7.9 30.3-20 39z m152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z"}))),Lc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M512 42.666667a469.333333 469.333333 0 1 0 469.333333 469.333333A469.333333 469.333333 0 0 0 512 42.666667z m0 864a394.666667 394.666667 0 1 1 394.666667-394.666667 395.146667 395.146667 0 0 1-394.666667 394.666667z"}),s.createElement("path",{d:"M304.906667 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}),s.createElement("path",{d:"M512 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333334 0 66.666667 66.666667 0 1 0-133.333334 0Z"}),s.createElement("path",{d:"M719.093333 512m-66.666666 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}))),Pc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M256 682.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0zM768 170.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0z"}),s.createElement("path",{d:"M707.84 316.16a42.666667 42.666667 0 0 1 0 60.330667l-331.178667 331.178666a42.666667 42.666667 0 0 1-60.330666-60.330666l331.178666-331.178667a42.666667 42.666667 0 0 1 60.330667 0z"}))),Rc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M1000.65998 0.00002h-94.819998a24 24 0 0 0-23.999999 25.14l8 165.519996A494.83999 494.83999 0 0 0 511.99999 16.00002C238.679995 16.00002 15.8 239.060015 16 512.38001 16.2 786.140005 238.199995 1008 511.99999 1008a494.19999 494.19999 0 0 0 332.359994-127.819997 24 24 0 0 0 0.959999-34.86l-67.999998-67.999998a24 24 0 0 0-32.76-1.1A351.999993 351.999993 0 1 1 804.199984 315.600014l-203.059996-9.74a24 24 0 0 0-25.139999 24v94.819998a24 24 0 0 0 23.999999 23.999999h400.659992a24 24 0 0 0 24-23.999999V24.00002a24 24 0 0 0-24-24z"}))),pr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"}))),Oc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M935.253333 111.786667a42.666667 42.666667 0 0 0-23.04-23.04A42.666667 42.666667 0 0 0 896 85.333333h-256a42.666667 42.666667 0 0 0 0 85.333334h153.173333L170.666667 793.173333V640a42.666667 42.666667 0 0 0-85.333334 0v256a42.666667 42.666667 0 0 0 3.413334 16.213333 42.666667 42.666667 0 0 0 23.04 23.04A42.666667 42.666667 0 0 0 128 938.666667h256a42.666667 42.666667 0 0 0 0-85.333334H230.826667L853.333333 230.826667V384a42.666667 42.666667 0 0 0 85.333334 0V128a42.666667 42.666667 0 0 0-3.413334-16.213333z"}))),kc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M128 128h64v389.312A384.32 384.32 0 0 1 506.688 832H896v64H192a64 64 0 0 1-64-64V128z m313.6 704A320.384 320.384 0 0 0 192 582.4V832h249.6z"}))),_c=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M929.19 352.19c3.12 3.12 3.12 8.19 0 11.31L363.51 929.19c-3.12 3.12-8.19 3.12-11.31 0L94.81 671.81c-3.12-3.12-3.12-8.19 0-11.31L660.49 94.81c3.12-3.12 8.19-3.12 11.31 0l257.39 257.38z m-424.26 5.66l108.89 108.89c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0L456.85 405.93l-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-62.23 62.23 161.22 161.22 469.52-469.52-161.23-161.21-62.23 62.23 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91z"}))),jc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}),s.createElement("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}))),Vc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M725.333333 341.333333a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666666a42.666667 42.666667 0 1 0 42.666667 42.666666 42.666667 42.666667 0 0 0-42.666667-42.666666z"}),s.createElement("path",{d:"M640 256H85.333333a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM938.666667 256h-128a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333zM512 640a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666667 42.666667 42.666667 42.666667 0 0 0-42.666667-42.666667z"}),s.createElement("path",{d:"M426.666667 554.666667H85.333333a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM938.666667 554.666667h-341.333334a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM298.666667 938.666667a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666666 42.666667 42.666667 42.666667 0 0 0-42.666666-42.666667z"}),s.createElement("path",{d:"M938.666667 853.333333H384a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM213.333333 853.333333H85.333333a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333z"}))),Bc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M802.742857 777.485714c49.942857 0 90.742857-41.371429 90.742857-92 0-61.142857-90.742857-160.914286-90.742857-160.914285S712 624.342857 712 685.485714c0 50.628571 40.8 92 90.742857 92z m-430.971428-50.4c8.114286 8.114286 21.257143 8.114286 29.257142 0l292.685715-292.571428c8.114286-8.114286 8.114286-21.257143 0-29.257143l-292.571429-292.571429c-0.685714-0.685714-1.485714-1.371429-2.285714-1.942857l-89.371429-89.371428a10.411429 10.411429 0 0 0-14.628571 0l-54.857143 54.857142a10.411429 10.411429 0 0 0 0 14.628572l76.8 76.8-237.485714 237.6c-8.114286 8.114286-8.114286 21.257143 0 29.257143l292.457143 292.571428z m14.742857-512.685714l204.457143 204.457143H182.171429l204.342857-204.457143zM960 859.428571H64c-5.028571 0-9.142857 4.114286-9.142857 9.142858v91.428571c0 5.028571 4.114286 9.142857 9.142857 9.142857h896c5.028571 0 9.142857-4.114286 9.142857-9.142857v-91.428571c0-5.028571-4.114286-9.142857-9.142857-9.142858z"}))),yr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}))),wr=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M853.333333 170.666667H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v128a42.666667 42.666667 0 0 0 85.333333 0V256h256v554.666667H384a42.666667 42.666667 0 0 0 0 85.333333h256a42.666667 42.666667 0 0 0 0-85.333333h-85.333333V256h256v85.333333a42.666667 42.666667 0 0 0 85.333333 0V213.333333a42.666667 42.666667 0 0 0-42.666667-42.666666z"}))),Fc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M424.666 448.666H24c-13.254 0-24-10.746-24-24V24C0 10.746 10.746 0 24 0h96c13.254 0 24 10.746 24 24v156.224C235.546 78.558 368.52 14.94 516.35 16.014c273.812 1.988 492.896 223.246 492.314 497.064C1008.082 786.516 786.24 1008 512.666 1008c-128.178 0-244.992-48.626-333.02-128.43-10.198-9.244-10.668-25.108-0.934-34.84l67.934-67.934c8.948-8.948 23.324-9.434 32.802-1.05C341.52 830.672 423.16 864 512.666 864c194.536 0 352-157.432 352-352 0-194.534-157.432-352-352-352-116.992 0-220.56 56.952-284.548 144.666h196.548c13.254 0 24 10.746 24 24v96c0 13.254-10.746 24-24 24z"}))),Wc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32z m-40 376H232V536h560v304z"}),s.createElement("path",{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53c12.1-8.7 20-22.9 20-39 0-26.5-21.5-48-48-48s-48 21.5-48 48c0 16.1 7.9 30.3 20 39z"}))),Hc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}))),Gc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM506.3 399.3c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zM517.7 624.7c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"}))),Yc=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355c-3.2-4.1-9.4-4.1-12.6 0l-112 141.7c-4.1 5.2-0.4 12.9 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}))),Aa=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M508 512m-112 0a112 112 0 1 0 224 0 112 112 0 1 0-224 0Z"}),s.createElement("path",{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3-7.7 16.2-7.7 35.2 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}))),$c="base-locale-selector",Xc=e=>{var t;const{className:n,style:o,defaultValue:i,value:a,onChange:r}=e,c=[{label:"English",key:"en-US"},{label:"中文",key:"zh-CN"}],d={items:c,selectedKeys:[i||a||((t=c[0])===null||t===void 0?void 0:t.key)],onClick:({key:l})=>{r==null||r(l)}};return I.useMemo(()=>s.createElement(Jn,{menu:d,placement:"bottom"},s.createElement(Re,{style:o,className:fe(G($c),n),size:"small",type:"text"},s.createElement(Ac,null))),[n,o,i,a,r,d])};function Ta(e){const{accept:t,success:n,error:o}=e;let i=document.createElement("input");i.type="file",t&&(i.accept=t),i.addEventListener("change",function(){var a;const r=(a=i.files)===null||a===void 0?void 0:a[0];n({file:r}),i=null}),i.addEventListener("error",function(a){typeof o=="function"&&o(a),i=null}),i.click()}function Uc(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsDataURL(e)})}function Zc(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsText(e)})}function Qc(e){const t=new TextEncoder().encode(e),n=new Blob([t],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(n)}function Jc(e,t){const{fileName:n}=t,o=Qc(e);let i=document.createElement("a");i.href=o,i.download=n,i.click(),i=null}function zi(e){return typeof e=="string"&&(/^\#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(e)||/^[a-z]{1,}$/i.test(e))}function Kc(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="linear-gradient"){const n=[];typeof e.angle=="number"?n.push(`${e.angle}deg`):n.push("180deg"),Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(${n.join(", ")})`}else if((e==null?void 0:e.type)==="radial-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`radial-gradient(circle, ${n.join(", ")})`}return t}function Ii(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="radial-gradient"||(e==null?void 0:e.type)==="linear-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.length>0&&(e.stops.forEach((o,i)=>{n.push(`${o.color} ${o.offset*100}%`),i===e.stops.length-1&&o.offset<1&&n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(90deg, ${n.join(", ")})`)}return t}function qa(e,t){if(t===1)return e;let n=1;const o=/^\#[0-9a-f]{6,6}$/i,i=/^\#[0-9a-f]{8,8}$/i;let a=e;if(o.test(e)?n=parseInt(e.substring(5,7).replace(/^\#/,"0x")):i.test(e)&&(n=parseInt(e.substring(7,9).replace(/^\#/,"0x")),a=e.substring(0,7)),n=n*t,o.test(a)&&n>0&&n<1){const r=Math.max(0,Math.min(255,Math.ceil(n*256)));a=`${a.toUpperCase()}${r.toString(16).toUpperCase()}`}return a}function $t(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}function Rt(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)*e.charCodeAt(n)*n*n;return t.toString(16).substring(0,4)}function Qn(e){const t=e.length,n=Math.floor(t/2),o=e.substring(0,4).padEnd(4,"0"),i=e.substring(0,4).padEnd(4,"0"),a=Rt(t.toString(16).padEnd(4,o)),r=Rt(e.substring(n-4,n).padEnd(4,o)).padEnd(4,"f"),c=Rt(e.substring(n-8,n-4).padEnd(4,o)).padEnd(4,"f"),d=Rt(e.substring(n-12,n-8).padEnd(4,o)).padEnd(4,"f"),l=Rt(e.substring(n-16,n-12).padEnd(4,i)).padEnd(4,"f"),h=Rt(e.substring(n,n+4).padEnd(4,i)).padEnd(4,"f"),u=Rt(e.substring(n+4,n+8).padEnd(4,i)).padEnd(4,"f"),f=Rt(i.padEnd(4,o).padEnd(4,i));return`@assets/${a}${r}-${c}-${d}-${l}-${h}${u}${f}`}function un(e){return/^@assets\/[0-9a-z]{8,8}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{12,12}$/.test(`${e}`)}function gt(e){function t(n){const o=qc(n);if(["Null","Number","String","Boolean","Undefined"].indexOf(o)>=0)return n;if(o==="Array"){const i=[];return n.forEach(a=>{i.push(t(a))}),i}else if(o==="Object"){const i={};return Object.keys(n).forEach(c=>{i[c]=t(n[c])}),Object.getOwnPropertySymbols(n).forEach(c=>{i[c]=t(n[c])}),i}}return t(e)}function Eo(e){const t=gt(e),n=o=>{o.uuid=$t(),o.type==="group"&&o.detail.children&&o.detail.children.forEach(i=>{n(i)})};return n(t),t}function qc(e){return Object.prototype.toString.call(e).replace(/[\]|\[]{1,1}/gi,"").split(" ")[1]}function e0(e,t){const n=e.assets||{},o=gt(e),i=(t==null?void 0:t.loadItemMap)||{},a=r=>{r.forEach(c=>{var d,l,h;if(c.type==="image"&&c.detail.src){const u=c.detail.src;if(un(u)&&!n[u]&&i[u]&&typeof((d=i[u])===null||d===void 0?void 0:d.source)=="string")n[u]={type:"image",value:i[u].source};else if(!n[u]){const f=Qn(u);n[f]||(n[f]={type:"image",value:u}),c.detail.src=f}}else if(c.type==="svg"){const u=c.detail.svg;if(un(u)&&!n[u]&&i[u]&&typeof((l=i[u])===null||l===void 0?void 0:l.source)=="string")n[u]={type:"svg",value:i[u].source};else if(!n[u]){const f=Qn(u);n[f]||(n[f]={type:"svg",value:u}),c.detail.svg=f}}else if(c.type==="html"){const u=c.detail.html;if(un(u)&&!n[u]&&i[u]&&typeof((h=i[u])===null||h===void 0?void 0:h.source)=="string")n[u]={type:"html",value:i[u].source};else if(!n[u]){const f=Qn(u);n[f]||(n[f]={type:"html",value:u}),c.detail.html=f}}else if(c.type==="group"&&Array.isArray(c.detail.children)){const u=c.detail.assets||{};Object.keys(u).forEach(f=>{n[f]||(n[f]=u[f])}),delete c.detail.assets,a(c.detail.children)}})};return a(o.elements),o.assets=n,o}function ct(e){return(Object.prototype.toString.call(e)||"").replace(/(\[object|\])/gi,"").trim()}const Ae={type(e,t){const n=ct(e);return t===!0?n.toLocaleLowerCase():n},array(e){return ct(e)==="Array"},json(e){return ct(e)==="Object"},function(e){return ct(e)==="Function"},asyncFunction(e){return ct(e)==="AsyncFunction"},boolean(e){return ct(e)==="Boolean"},string(e){return ct(e)==="String"},number(e){return ct(e)==="Number"},undefined(e){return ct(e)==="Undefined"},null(e){return ct(e)==="Null"},promise(e){return ct(e)==="Promise"}};function t0(e,t){const{width:n,height:o}=t;return new Promise((i,a)=>{const r=`
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      width="${n||""}" 
      height = "${o||""}">
      <foreignObject width="100%" height="100%">
        <div xmlns = "http://www.w3.org/1999/xhtml">
          ${e}
        </div>
      </foreignObject>
    </svg>
    `,c=new Blob([r],{type:"image/svg+xml;charset=utf-8"}),d=new FileReader;d.readAsDataURL(c),d.onload=function(l){var h;const u=(h=l==null?void 0:l.target)===null||h===void 0?void 0:h.result;i(u)},d.onerror=function(l){a(l)}})}function n0(e){return new Promise((t,n)=>{const o=e,i=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=new FileReader;a.readAsDataURL(i),a.onload=function(r){var c;const d=(c=r==null?void 0:r.target)===null||c===void 0?void 0:c.result;t(d)},a.onerror=function(r){n(r)}})}var br=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{Image:o0}=window;function _i(e){return new Promise((t,n)=>{const o=new o0;o.crossOrigin="anonymous",o.onload=function(){t(o)},o.onabort=n,o.onerror=n,o.src=e})}function i0(e){return br(this,void 0,void 0,function*(){const t=yield n0(e);return yield _i(t)})}function a0(e){return e.replace(/\&/gi,"&amp;")}function s0(e,t){return br(this,void 0,void 0,function*(){e=a0(e);const n=yield t0(e,t);return yield _i(n)})}function yn(e){return typeof e=="number"&&(e>0||e<=0)}function r0(e){return yn(e)}function l0(e){return yn(e)}function Er(e){return typeof e=="number"&&e>=0}function c0(e){return typeof e=="number"&&e>=0}function d0(e){return typeof e=="number"&&e>=-360&&e<=360}function u0(e){return Er(e)}function h0(e){return yn(e)&&e>=0}function f0(e){return zi(e)}function Sr(e){return typeof e=="string"&&/^(http:\/\/|https:\/\/|\.\/|\/)/.test(`${e}`)}function Cr(e){return typeof e=="string"&&/^(data:image\/)/.test(`${e}`)}function m0(e){return Cr(e)||Sr(e)}function g0(e){return typeof e=="string"&&/^(<svg[\s]{1,}|<svg>)/i.test(`${e}`.trim())&&/<\/[\s]{0,}svg>$/i.test(`${e}`.trim())}function v0(e){let t=!1;if(typeof e=="string"){let n=document.createElement("div");n.innerHTML=e,n.children.length>0&&(t=!0),n=null}return t}function p0(e){return typeof e=="string"}function y0(e){return yn(e)&&e>0}function w0(e){return yn(e)&&e>0}function b0(e){return yn(e)&&e>0}function E0(e){return["center","left","right"].includes(e)}function S0(e){return typeof e=="string"&&e.length>0}function C0(e){return["bold"].includes(e)}function x0(e){return/^(-?\d+(?:\.\d+)?)$/.test(`${e}`)}const ze={x:r0,y:l0,w:Er,h:c0,angle:d0,number:yn,numberStr:x0,borderWidth:u0,borderRadius:h0,color:f0,imageSrc:m0,imageURL:Sr,imageBase64:Cr,svg:g0,html:v0,text:p0,fontSize:y0,lineHeight:w0,textAlign:E0,fontFamily:S0,fontWeight:C0,strokeWidth:b0};var Lo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ee=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},te,yt;const M0=12,z0="400",I0="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'";class xr{constructor(t,n){te.set(this,void 0),yt.set(this,void 0),Lo(this,te,t,"f"),Lo(this,yt,Object.assign({devicePixelRatio:1,offscreenCanvas:null},n),"f"),this.$resetFont()}$undoPixelRatio(t){return t/ee(this,yt,"f").devicePixelRatio}$doPixelRatio(t){return ee(this,yt,"f").devicePixelRatio*t}$getContext(){return ee(this,te,"f")}$setContext(t){Lo(this,te,t,"f")}$setFont(t){const n=[];t.fontWeight&&n.push(`${t.fontWeight}`),n.push(`${this.$doPixelRatio(t.fontSize||12)}px`),n.push(`${t.fontFamily||"sans-serif"}`),ee(this,te,"f").font=`${n.join(" ")}`}$resetFont(){this.$setFont({fontSize:M0,fontFamily:I0,fontWeight:z0})}$getOffscreenCanvas(){return ee(this,yt,"f").offscreenCanvas}$resize(t){const{width:n,height:o,devicePixelRatio:i,resetStyle:a}=t,{canvas:r}=ee(this,te,"f");r.width=n*i,r.height=o*i,Lo(this,yt,Object.assign(Object.assign({},ee(this,yt,"f")),{devicePixelRatio:i}),"f"),a===!0&&(r.style.width=`${n}px`,r.style.height=`${o}px`)}$getSize(){const{devicePixelRatio:t}=ee(this,yt,"f"),{width:n,height:o}=ee(this,te,"f").canvas;return{width:n/t,height:o/t,devicePixelRatio:t}}get canvas(){return ee(this,te,"f").canvas}get fillStyle(){return ee(this,te,"f").fillStyle}set fillStyle(t){ee(this,te,"f").fillStyle=t}get strokeStyle(){return ee(this,te,"f").strokeStyle}set strokeStyle(t){ee(this,te,"f").strokeStyle=t}get lineWidth(){return this.$undoPixelRatio(ee(this,te,"f").lineWidth)}set lineWidth(t){ee(this,te,"f").lineWidth=this.$doPixelRatio(t)}get textAlign(){return ee(this,te,"f").textAlign}set textAlign(t){ee(this,te,"f").textAlign=t}get textBaseline(){return ee(this,te,"f").textBaseline}set textBaseline(t){ee(this,te,"f").textBaseline=t}get globalAlpha(){return ee(this,te,"f").globalAlpha}set globalAlpha(t){ee(this,te,"f").globalAlpha=t}get shadowColor(){return ee(this,te,"f").shadowColor}set shadowColor(t){ee(this,te,"f").shadowColor=t}get shadowOffsetX(){return this.$undoPixelRatio(ee(this,te,"f").shadowOffsetX)}set shadowOffsetX(t){ee(this,te,"f").shadowOffsetX=this.$doPixelRatio(t)}get shadowOffsetY(){return this.$undoPixelRatio(ee(this,te,"f").shadowOffsetY)}set shadowOffsetY(t){ee(this,te,"f").shadowOffsetY=this.$doPixelRatio(t)}get shadowBlur(){return this.$undoPixelRatio(ee(this,te,"f").shadowBlur)}set shadowBlur(t){ee(this,te,"f").shadowBlur=this.$doPixelRatio(t)}get lineCap(){return ee(this,te,"f").lineCap}set lineCap(t){ee(this,te,"f").lineCap=t}get globalCompositeOperation(){return ee(this,te,"f").globalCompositeOperation}set globalCompositeOperation(t){ee(this,te,"f").globalCompositeOperation=t}fill(...t){return ee(this,te,"f").fill(...t)}arc(t,n,o,i,a,r){return ee(this,te,"f").arc(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),i,a,r)}rect(t,n,o,i){return ee(this,te,"f").rect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}fillRect(t,n,o,i){return ee(this,te,"f").fillRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}clearRect(t,n,o,i){return ee(this,te,"f").clearRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}beginPath(){return ee(this,te,"f").beginPath()}closePath(){return ee(this,te,"f").closePath()}lineTo(t,n){return ee(this,te,"f").lineTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}moveTo(t,n){return ee(this,te,"f").moveTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}arcTo(t,n,o,i,a){return ee(this,te,"f").arcTo(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a))}getLineDash(){return ee(this,te,"f").getLineDash()}setLineDash(t){const n=t.map(o=>this.$doPixelRatio(o));return ee(this,te,"f").setLineDash(n)}stroke(t){return t?ee(this,te,"f").stroke(t):ee(this,te,"f").stroke()}translate(t,n){return ee(this,te,"f").translate(this.$doPixelRatio(t),this.$doPixelRatio(n))}rotate(t){return ee(this,te,"f").rotate(t)}drawImage(...t){const n=t[0],o=t[1],i=t[2],a=t[3],r=t[4],c=t[t.length-4],d=t[t.length-3],l=t[t.length-2],h=t[t.length-1];return t.length===9?ee(this,te,"f").drawImage(n,this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(r),this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h)):ee(this,te,"f").drawImage(n,this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h))}createPattern(t,n){return ee(this,te,"f").createPattern(t,n)}measureText(t){return ee(this,te,"f").measureText(t)}fillText(t,n,o,i){return i!==void 0?ee(this,te,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):ee(this,te,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}strokeText(t,n,o,i){return i!==void 0?ee(this,te,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):ee(this,te,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}save(){ee(this,te,"f").save()}restore(){ee(this,te,"f").restore()}scale(t,n){ee(this,te,"f").scale(t,n)}circle(t,n,o,i,a,r,c,d){ee(this,te,"f").ellipse(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),a,r,c,d)}isPointInPath(t,n){return ee(this,te,"f").isPointInPath(this.$doPixelRatio(t),this.$doPixelRatio(n))}clip(...t){return ee(this,te,"f").clip(...t)}setTransform(t,n,o,i,a,r){return ee(this,te,"f").setTransform(t,n,o,i,a,r)}getTransform(){return ee(this,te,"f").getTransform()}createLinearGradient(t,n,o,i){return ee(this,te,"f").createLinearGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}createRadialGradient(t,n,o,i,a,r){return ee(this,te,"f").createRadialGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(r))}createConicGradient(t,n,o){return ee(this,te,"f").createConicGradient(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}}te=new WeakMap,yt=new WeakMap;function Cn(e){const{width:t,height:n,ctx:o,devicePixelRatio:i}=e;let a=o;if(!a){const c=document.createElement("canvas");c.width=t*i,c.height=n*i,a=c.getContext("2d")}return new xr(a,e)}function ii(e){const{width:t,height:n,devicePixelRatio:o}=e,i=new OffscreenCanvas(t*o,n*o),r=i.getContext("2d").canvas.getContext("2d");return new xr(r,{devicePixelRatio:o,offscreenCanvas:i})}function A0(e,t){const{width:n,height:o,devicePixelRatio:i,offscreen:a,createCustomContext2D:r}=t,c={width:n,height:o,devicePixelRatio:i},d=e.getContext("2d");if(r){const l=r(c),h=r(c),u=r(c),f=Cn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:f,drawView:()=>{const{width:g,height:p}=l.$getSize();f.clearRect(0,0,g,p),f.drawImage(u.canvas,0,0,g,p),f.drawImage(l.canvas,0,0,g,p),f.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}if(a===!0){const l=ii(c),h=ii(c),u=ii(c),f=Cn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:f,drawView:()=>{const{width:g,height:p}=l.$getSize();f.clearRect(0,0,g,p),f.drawImage(u.canvas,0,0,g,p),f.drawImage(l.canvas,0,0,g,p),f.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}else{const l=Cn(c),h=Cn(c),u=Cn(c),f=Cn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:f,drawView:()=>{f.clearRect(0,0,n,o),f.drawImage(u.canvas,0,0,n,o),f.drawImage(l.canvas,0,0,n,o),f.drawImage(h.canvas,0,0,n,o),u.clearRect(0,0,n,o),l.clearRect(0,0,n,o),h.clearRect(0,0,n,o)}}}}var T0=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},dt=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Je;let hn=class{constructor(){Je.set(this,void 0),T0(this,Je,new Map,"f")}on(t,n){if(dt(this,Je,"f").has(t)){const o=dt(this,Je,"f").get(t)||[];o==null||o.push(n),dt(this,Je,"f").set(t,o)}else dt(this,Je,"f").set(t,[n])}off(t,n){if(dt(this,Je,"f").has(t)){const o=dt(this,Je,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}dt(this,Je,"f").set(t,o||[])}}trigger(t,n){const o=dt(this,Je,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(dt(this,Je,"f").has(t)){const n=dt(this,Je,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){dt(this,Je,"f").clear()}};Je=new WeakMap;function N0(e,t){const n=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);return n===0?n:Math.sqrt(n)}function nt(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var Po=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},rn=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ai,wt,Ai,ua;class fn{constructor(t){ai.add(this),wt.set(this,void 0),Ai.set(this,void 0),Po(this,Ai,gt(t.defaultStorage),"f"),Po(this,wt,rn(this,ai,"m",ua).call(this),"f")}set(t,n){rn(this,wt,"f")[t]=n}get(t){return rn(this,wt,"f")[t]}getSnapshot(t){return(t==null?void 0:t.deepClone)===!0?gt(rn(this,wt,"f")):Object.assign({},rn(this,wt,"f"))}clear(){Po(this,wt,rn(this,ai,"m",ua).call(this),"f")}destroy(){Po(this,wt,null,"f")}}wt=new WeakMap,Ai=new WeakMap,ai=new WeakSet,ua=function(){return gt(rn(this,Ai,"f"))};function Ao(e){const{activeStore:t}=e;return{scale:t==null?void 0:t.scale,offsetTop:t==null?void 0:t.offsetTop,offsetBottom:t==null?void 0:t.offsetBottom,offsetLeft:t==null?void 0:t.offsetLeft,offsetRight:t==null?void 0:t.offsetRight}}function ji(e){const{activeStore:t}=e;return{devicePixelRatio:t.devicePixelRatio,width:t==null?void 0:t.width,height:t==null?void 0:t.height,contextWidth:t==null?void 0:t.contextWidth,contextHeight:t==null?void 0:t.contextHeight}}function D0(e){return e/Math.PI*180}function Nt(e){return e/180*Math.PI}function To(e,t,n,o){const i=Nt(t||0);n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(i),e.translate(-n.x,-n.y)),o(e),n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(-i),e.translate(-n.x,-n.y))}function pt(e,t,n){const o=lt(t);To(e,t.angle||0,o,()=>{n(e)})}function lt(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function Mr(e){const t=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),n=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),o=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),i=Math.max(e[0].y,e[1].y,e[2].y,e[3].y),a={x:t,y:n,w:o-t,h:i-n};return lt(a)}function L0(e,t,n){const o=ha(e,t),i=ha(e,n);return i!==null&&o!==null?o>Math.PI*3/2&&i<Math.PI/2?i+(Math.PI*2-o):i>Math.PI*3/2&&o<Math.PI/2?o+(Math.PI*2-i):i-o:0}function ha(e,t){const n=t.x-e.x,o=t.y-e.y;if(n===0){if(o<0)return 0;if(o>0)return Math.PI}else if(o===0){if(n<0)return Math.PI*3/2;if(n>0)return Math.PI/2}return n>0&&o<0?Math.atan(Math.abs(n)/Math.abs(o)):n>0&&o>0?Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o>0?Math.PI+Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o<0?2*Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):0}function Ne(e,t,n){let a=ha(e,t)+n;a>Math.PI*2?a=a-Math.PI*2:a<0-Math.PI*2&&(a=a+Math.PI*2),a<0&&(a=a+Math.PI*2);const r=N0(e,t);let c=0,d=0;return a===0?(c=0,d=0-r):a>0&&a<Math.PI/2?(c=Math.sin(a)*r,d=0-Math.cos(a)*r):a===Math.PI/2?(c=r,d=0):a>Math.PI/2&&a<Math.PI?(c=Math.sin(Math.PI-a)*r,d=Math.cos(Math.PI-a)*r):a===Math.PI?(c=0,d=r):a>Math.PI&&a<3/2*Math.PI?(c=0-Math.sin(a-Math.PI)*r,d=Math.cos(a-Math.PI)*r):a===3/2*Math.PI?(c=0-r,d=0):a>3/2*Math.PI&&a<2*Math.PI?(c=0-Math.sin(2*Math.PI-a)*r,d=0-Math.cos(2*Math.PI-a)*r):a===2*Math.PI&&(c=0,d=0-r),c+=e.x,d+=e.y,{x:c,y:d}}function Ti(e,t){if((t==null?void 0:t.length)>0){let n=e.x,o=e.y;return t.forEach(i=>{const{x:a,y:r,w:c,h:d,angle:l=0}=i,h=lt({x:a,y:r,w:c,h:d,angle:l}),u=Ne(h,{x:n,y:o},Nt(l));n=u.x,o=u.y}),{x:n,y:o}}return e}function zr(e,t,n){const{x:o,y:i,w:a,h:r}=e;let c={x:o,y:i},d={x:o+a,y:i},l={x:o+a,y:i+r},h={x:o,y:i+r};if(n&&(n>0||n<0)){const u=Nt(ft(n));c=Ne(t,c,u),d=Ne(t,d,u),l=Ne(t,l,u),h=Ne(t,h,u)}return[c,d,l,h]}function Kn(e){const{angle:t=0}=e,n=lt(e);return zr(e,n,t)}function es(e,t,n){return[Ne(e,{x:t[0].x,y:t[0].y},n),Ne(e,{x:t[1].x,y:t[1].y},n),Ne(e,{x:t[2].x,y:t[2].y},n),Ne(e,{x:t[3].x,y:t[3].y},n)]}function ft(e){if(!(e>0||e<0)||e===0)return 0;let t=e%360;return t<0&&(t+=360),t}function Ir(e){let t=!0;if(Array.isArray(e)){const n=[];e.forEach(o=>{var i;typeof o.uuid=="string"&&o.uuid?n.includes(o.uuid)?(t=!1,console.warn(`Duplicate uuids: ${o.uuid}`)):n.push(o.uuid):(t=!1,console.warn("Element missing uuid",o)),o.type==="group"&&(t=Ir((i=o==null?void 0:o.detail)===null||i===void 0?void 0:i.children))})}return t}function Na(e){var t;const n={x:0,y:0,w:0,h:0};let o=null;for(let a=0;a<e.length;a++){const r=e[a];if(!((t=r==null?void 0:r.operations)===null||t===void 0)&&t.invisible)continue;const c={x:r.x,y:r.y,w:r.w,h:r.h,angle:r.angle||0};if(c.angle&&(c.angle>0||c.angle<0)){const d=Kn(c);if(d.length===4){const l=[d[0].x,d[1].x,d[2].x,d[3].x],h=[d[0].y,d[1].y,d[2].y,d[3].y];c.x=Math.min(...l),c.y=Math.min(...h),c.w=Math.abs(Math.max(...l)-Math.min(...l)),c.h=Math.abs(Math.max(...h)-Math.min(...h))}}if(o){const d=Math.min(c.x,n.x),l=Math.min(c.y,n.y),h=Math.max(c.x+c.w,n.x+n.w),u=Math.max(c.y+c.h,n.y+n.h);n.x=d,n.y=l,n.w=Math.abs(h-d),n.h=Math.abs(u-l)}else n.x=c.x,n.y=c.y,n.w=c.w,n.h=c.h;o=c}return{x:Math.floor(n.x),y:Math.floor(n.y),w:Math.ceil(n.w),h:Math.ceil(n.h)}}function Ar(e,t){const n={x:0,y:0,w:0,h:0};e.forEach(i=>{const a={x:i.x,y:i.y,w:i.w,h:i.h,angle:i.angle};if(a.angle&&(a.angle>0||a.angle<0)){const h=Kn(a);if(h.length===4){const u=[h[0].x,h[1].x,h[2].x,h[3].x],f=[h[0].y,h[1].y,h[2].y,h[3].y];a.x=Math.min(...u),a.y=Math.min(...f),a.w=Math.abs(Math.max(...u)-Math.min(...u)),a.h=Math.abs(Math.max(...f)-Math.min(...f))}}const r=Math.min(a.x,n.x),c=Math.min(a.y,n.y),d=Math.max(a.x+a.w,n.x+n.w),l=Math.max(a.y+a.h,n.y+n.h);n.x=r,n.y=c,n.w=Math.abs(d-r),n.h=Math.abs(l-c)}),t!=null&&t.extend&&(n.x=Math.min(n.x,0),n.y=Math.min(n.y,0));const o={contextWidth:n.w,contextHeight:n.h};return t!=null&&t.viewWidth&&(t!=null&&t.viewHeight)&&(t==null?void 0:t.viewWidth)>0&&(t==null?void 0:t.viewHeight)>0&&(t.viewWidth>n.x+n.w&&(o.contextWidth=t.viewWidth-n.x),t.viewHeight>n.y+n.h&&(o.contextHeight=t.viewHeight-n.y)),o}function P0(e,t,n){const o=Ar(e,{viewWidth:t.width,viewHeight:t.height,extend:n==null?void 0:n.extend});return(n==null?void 0:n.extend)===!0&&(o.contextWidth=Math.max(o.contextWidth,t.contextWidth),o.contextHeight=Math.max(o.contextHeight,t.contextHeight)),{contextSize:o}}function Tr(e,t){var n;let o=null;for(let i=0;i<t.length;i++){const a=t[i];if(a.uuid===e){o=a;break}else if(!o&&a.type==="group"){const r=Tr(e,((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.children)||[]);if((r==null?void 0:r.uuid)===e){o=r;break}}}return o}function si(e,t){const n=[];function o(i){var a;for(let r=0;r<i.length;r++){const c=i[r];e.includes(c.uuid)?n.push(c):c.type==="group"&&o(((a=c==null?void 0:c.detail)===null||a===void 0?void 0:a.children)||[])}}return o(t),n}function Da(e,t){const n=[];function o(i,a){var r;let c=null;for(let d=0;d<a.length;d++){const l=a[d];if(l.uuid===i){c=l;break}else if(!c&&l.type==="group"){n.push(l);const h=o(i,((r=l==null?void 0:l.detail)===null||r===void 0?void 0:r.children)||[]);if((h==null?void 0:h.uuid)===i){c=h;break}n.pop()}}return c}return o(e,t),n}function Nr(e,t){var n;const o=[];let i=e;if(t.length>1)for(let a=0;a<t.length-1;a++){const r=t[a],c=i[r];if((c==null?void 0:c.type)==="group"&&Array.isArray((n=c==null?void 0:c.detail)===null||n===void 0?void 0:n.children))o.push(c),i=c.detail.children;else return null}return o}function mn(e){const{x:t,y:n,w:o,h:i,angle:a}=e;return{x:t,y:n,w:o,h:i,angle:a}}function Dr(e,t){const n=[];return e.forEach(o=>{const i=Be(o,t);i&&n.push(i)}),n}function Be(e,t){let n=null,o=t;for(let i=0;i<e.length;i++){const a=e[i],r=o[a];if(i<e.length-1&&r.type==="group")o=r.detail.children;else if(i===e.length-1)n=r;else break}return n}function vt(e,t){const n=[];let o=!1;const i=a=>{var r;for(let c=0;c<a.length&&o!==!0;c++){n.push(c);const d=a[c];if(d.uuid===e){o=!0;break}else d.type==="group"&&i(((r=d==null?void 0:d.detail)===null||r===void 0?void 0:r.children)||[]);if(o)break;n.pop()}};return i(t),n}function Lr(e){const{x:t,y:n,h:o,w:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]}function _e(e){const{x:t,y:n,w:o,h:i,angle:a=0}=e;return a===0?Lr(e):zr(e,lt({x:t,y:n,w:o,h:i,angle:a}),a)}function La(e){const t=[];let n=0,o=0;const i=[],a=[...e];for(let r=0;r<a.length;r++){const{x:c,y:d,w:l,h,angle:u=0}=a[r];n+=c,o+=d;let f;if(r===0){const m={x:n,y:o,w:l,h,angle:u};f=_e({x:c,y:d,w:l,h,angle:u}),i.push({center:lt(m),angle:u,radian:Nt(u)})}else{f=Lr({x:n,y:o,w:l,h,angle:u});for(let g=0;g<i.length;g++){const{center:p,radian:b}=i[g];f=es(p,f,b)}const v=Mr(f);if(u>0||u<0){const g=Nt(u);f=es(v,f,g)}i.push({center:v,angle:u,radian:Nt(u)})}t.push(f)}return t}function R0(e,t){const{groupQueue:n}=t;if(!(n.length>0))return[_e(e)];const o=[...n,e];return La(o)}function zo(e,t){return R0(e,t).pop()||null}function O0(e,t){const{scale:n,offsetX:o,offsetY:i}=e,{viewSizeInfo:a}=t,{width:r,height:c,contextWidth:d,contextHeight:l}=a,h=d*n,u=l*n,f=0-o*n,m=0-i*n,v=r-(h+f/n),g=c-(u+m/n);return{scale:n,offsetLeft:f,offsetTop:m,offsetRight:v,offsetBottom:g}}function k0(e){const{scale:t,point:n,viewScaleInfo:o}=e,{offsetLeft:i,offsetTop:a}=o,r=t/o.scale,c=n.x,d=n.y,l=c-c*r+(i*r-i),h=d-d*r+(a*r-a);return{moveX:l,moveY:h}}function _0(e){const{moveX:t=0,moveY:n=0,viewScaleInfo:o,viewSizeInfo:i}=e,{scale:a}=o,{width:r,height:c,contextWidth:d,contextHeight:l}=i;let h=o.offsetLeft,u=o.offsetRight,f=o.offsetTop,m=o.offsetBottom;h+=t,f+=n;const v=d*a,g=l*a;return u=r-(v+h),m=c-(g+f),{scale:a,offsetTop:f,offsetLeft:h,offsetRight:u,offsetBottom:m}}function Xe(e,t){const{viewScaleInfo:n}=t,{x:o,y:i,w:a,h:r,angle:c}=e,{scale:d,offsetTop:l,offsetLeft:h}=n;return{x:o*d+h,y:i*d+l,w:a*d,h:r*d,angle:c}}function we(e,t){const{viewScaleInfo:n}=t,{x:o,y:i}=e,{scale:a,offsetTop:r,offsetLeft:c}=n;return{x:o*a+c,y:i*a+r}}function Ye(e,t){return[we(e[0],t),we(e[1],t),we(e[2],t),we(e[3],t)]}function fa(e,t){const{context2d:n,element:o,viewScaleInfo:i}=t,{angle:a=0}=o,{x:r,y:c,w:d,h:l}=Xe(o,{viewScaleInfo:i}),h=Kn({x:r,y:c,w:d,h:l,angle:a});if(h.length>=2){n.beginPath(),n.moveTo(h[0].x,h[0].y);for(let u=1;u<h.length;u++)n.lineTo(h[u].x,h[u].y);n.closePath()}return!!n.isPointInPath(e.x,e.y)}function j0(e,t,n){const o=_e(t);return Pr(e,o)}function Pr(e,t,n){const o=[t[0].x,t[1].x,t[2].x,t[3].x],i=[t[0].y,t[1].y,t[2].y,t[3].y],a=Math.min(...o),r=Math.max(...o),c=Math.min(...i),d=Math.max(...i);return e.x>a&&e.x<r&&e.y>c&&e.y<d}function V0(e,t){var n,o,i;const{context2d:a,data:r,viewScaleInfo:c,viewSizeInfo:d,groupQueue:l}=t,h={index:-1,element:null,groupQueueIndex:-1};if(l&&Array.isArray(l)&&(l==null?void 0:l.length)>0)for(let u=l.length-1;u>=0;u--){let f=0,m=0,v=0;for(let p=0;p<=u;p++)f+=l[p].x,m+=l[p].y,v+=l[p].angle||0;const g=l[u];if(g&&g.type==="group"&&Array.isArray((n=g.detail)===null||n===void 0?void 0:n.children))for(let p=0;p<g.detail.children.length;p++){const b=g.detail.children[p];if(((o=b==null?void 0:b.operations)===null||o===void 0?void 0:o.invisible)!==!0)if(b){const E={x:f+b.x,y:m+b.y,w:b.w,h:b.h,angle:v+(b.angle||0)};if(fa(e,{context2d:a,element:E,viewScaleInfo:c,viewSizeInfo:d})){h.element=b,(u<l.length-1||b.type!=="group")&&(h.groupQueueIndex=u);break}}else break}if(h.element)break}if(h.element)return h;for(let u=r.elements.length-1;u>=0;u--){const f=r.elements[u];if(((i=f==null?void 0:f.operations)===null||i===void 0?void 0:i.invisible)!==!0&&fa(e,{context2d:a,element:f,viewScaleInfo:c,viewSizeInfo:d})){h.index=u,h.element=f;break}}return h}function Rr(e,t){const{groupQueue:n}=t,o=zo(e,{groupQueue:n}),i=nt(o[0],o[1]),a=nt(o[1],o[2]),r=nt(o[2],o[3]),c=nt(o[3],o[0]),d=o[0],l=o[1],h=o[2],u=o[3],f=Math.max(d.x,l.x,h.x,u.x),m=Math.max(d.y,l.y,h.y,u.y),v=Math.min(d.x,l.x,h.x,u.x),g=Math.min(d.y,l.y,h.y,u.y);return{center:{x:(f+v)/2,y:(m+g)/2},topLeft:d,topRight:l,bottomLeft:u,bottomRight:h,top:i,right:a,left:c,bottom:r}}function Or(e){const t=Math.max(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),n=Math.max(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),o=Math.min(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),a={x:e.center.x,y:e.center.y},r={x:o,y:i},c={x:t,y:i},d={x:t,y:n},l={x:o,y:n},h=nt(r,c),u=nt(l,d),f=nt(r,l),m=nt(c,d);return{center:a,topLeft:r,topRight:c,bottomLeft:l,bottomRight:d,top:h,right:m,left:f,bottom:u}}function B0(e,t){const n={},o=[],i=a=>{const r={isVisibleInView:!0,isGroup:a.type==="group",position:[...o]};let c=null;const d=Nr(e,o);c=Rr(a,{groupQueue:d||[]}),n[a.uuid]=Object.assign(Object.assign({},r),{originRectInfo:c,rangeRectInfo:ze.angle(a.angle)?Or(c):c}),a.type==="group"&&a.detail.children.forEach((l,h)=>{o.push(h),i(l),o.pop()})};return e.forEach((a,r)=>{o.push(r),i(a),o.pop()}),kr(n,t)}function F0(e,t){const n=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),o=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),a=Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),r=Math.min(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),c=Math.max(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),d=Math.min(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y),l=Math.max(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y);return n<=c&&o>=r&&i<=l&&a>=d||c<=a&&c>=a&&c<=a&&c>=a}function kr(e,t){const n=W0(t);let o=0,i=0;return Object.keys(e).forEach(a=>{const r=e[a];r.isVisibleInView=F0(r.rangeRectInfo,n),r.isVisibleInView?o++:i++}),{viewVisibleInfoMap:e,visibleCount:o,invisibleCount:i}}function W0(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i,offsetLeft:a}=t,{width:r,height:c}=n,d=0-a/o,l=0-i/o,h=r/o,u=c/o,f=lt({x:d,y:l,w:h,h:u}),m={x:d,y:l},v={x:d+h,y:l},g={x:d,y:l+u},p={x:d+h,y:l+u},b={x:d,y:f.y},E={x:f.x,y:l},M={x:d+h,y:f.y},y={x:f.x,y:l+u};return{center:f,topLeft:m,topRight:v,bottomLeft:g,bottomRight:p,left:b,top:E,right:M,bottom:y}}function Fe(e,t){const{x:n,y:o}=e,{size:i,angle:a}=t;return{x:n-i/2,y:o-i/2,w:i,h:i,angle:a}}function Ro(e,t){const{groupQueue:n,controllerSize:o,viewScaleInfo:i}=t,a=(o&&o>0?o:8)/i.scale,{x:r,y:c,w:d,h:l,angle:h=0}=e,u=[{uuid:$t(),x:r,y:c,w:d,h:l,angle:h,type:"group",detail:{children:[]}},...n];let f=0;u.forEach(({angle:oe=0})=>{f+=oe});const m=zo(e,{groupQueue:n}),v=zo({x:r-a*2,y:c-a*2,h:l+a*4,w:d+a*4,angle:h},{groupQueue:[...n]}),g=nt(m[0],m[1]),p=nt(m[1],m[2]),b=nt(m[2],m[3]),E=nt(m[3],m[0]),M=m[0],y=m[1],R=m[2],C=m[3],w=Fe(g,{size:a,angle:f}),O=Fe(p,{size:a,angle:f}),A=Fe(b,{size:a,angle:f}),x=Fe(E,{size:a,angle:f}),j=Fe(M,{size:a,angle:f}),z=Fe(y,{size:a,angle:f}),N=Fe(C,{size:a,angle:f}),F=Fe(R,{size:a,angle:f}),H=_e(j),V=_e(z),D=_e(N),_=_e(F),T=[H[1],V[0],V[3],H[2]],Q=[V[3],V[2],_[1],_[0]],Y=[D[1],_[0],_[3],D[2]],P=[H[3],H[2],D[1],D[0]],W=_e(w),X=_e(O),L=_e(A),k=_e(x),S=nt(v[0],v[1]),B=Fe(S,{size:a,angle:f}),$=_e(B);return{elementWrapper:m,left:{type:"left",vertexes:P,center:E},right:{type:"right",vertexes:Q,center:p},top:{type:"top",vertexes:T,center:g},bottom:{type:"bottom",vertexes:Y,center:b},topLeft:{type:"top-left",vertexes:H,center:M},topRight:{type:"top-right",vertexes:V,center:y},bottomLeft:{type:"bottom-left",vertexes:D,center:C},bottomRight:{type:"bottom-right",vertexes:_,center:R},leftMiddle:{type:"left-middle",vertexes:k,center:E},rightMiddle:{type:"right-middle",vertexes:X,center:p},topMiddle:{type:"top-middle",vertexes:W,center:g},bottomMiddle:{type:"bottom-middle",vertexes:L,center:b},rotate:{type:"rotate",vertexes:$,center:S}}}function ts(e,t){const{controllerSize:n,viewScaleInfo:o}=t,i=n&&n>0?n:8,{x:a,y:r,w:c,h:d}=Xe(e,{viewScaleInfo:o}),l=lt({x:a,y:r,w:c,h:d}),h={x:l.x,y:r},u={x:a+c,y:l.y},f={x:l.x,y:r+d},m={x:a,y:l.y},v={x:a,y:r},g={x:a+c,y:r},p={x:a+c,y:r+d},b={x:a,y:r+d},E=Fe(h,{size:i,angle:0}),M=Fe(u,{size:i,angle:0}),y=Fe(f,{size:i,angle:0}),R=Fe(m,{size:i,angle:0}),C=Fe(v,{size:i,angle:0}),w=Fe(g,{size:i,angle:0}),O=Fe(b,{size:i,angle:0}),A=Fe(p,{size:i,angle:0}),x=_e(C),j=_e(w),z=_e(O),N=_e(A),F=[x[1],j[0],j[3],x[2]],H=[j[3],j[2],N[1],N[0]],V=[z[1],N[0],N[3],z[2]],D=[x[3],x[2],z[1],z[0]],_=_e(E),T=_e(M),Q=_e(y),Y=_e(R);return{left:{type:"left",vertexes:D,center:m},right:{type:"right",vertexes:H,center:u},top:{type:"top",vertexes:F,center:h},bottom:{type:"bottom",vertexes:V,center:f},topLeft:{type:"top-left",vertexes:x,center:v},topRight:{type:"top-right",vertexes:j,center:g},bottomLeft:{type:"bottom-left",vertexes:z,center:b},bottomRight:{type:"bottom-right",vertexes:N,center:p},leftMiddle:{type:"left-middle",vertexes:Y,center:m},rightMiddle:{type:"right-middle",vertexes:T,center:u},topMiddle:{type:"top-middle",vertexes:_,center:h},bottomMiddle:{type:"bottom-middle",vertexes:Q,center:f}}}function Pa(e){let t="";return e.forEach(n=>{t+=n.type+n.params.join(" ")}),t}function be(e,t){let n=2;return typeof(t==null?void 0:t.decimalPlaces)<"u"&&(t==null?void 0:t.decimalPlaces)>=0&&(n=t.decimalPlaces),parseFloat(e.toFixed(n))}const ri="Text Element";function wn(){return{boxSizing:"border-box",borderWidth:0,borderColor:"#000000",shadowColor:"#000000",borderRadius:0,borderDash:[],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,opacity:1,color:"#000000",textAlign:"left",verticalAlign:"top",fontSize:16,fontFamily:"sans-serif",fontWeight:400,minInlineSize:"auto",wordBreak:"break-all",overflow:"hidden"}}function H0(){return{background:"#D9D9D9"}}function G0(){return{background:"#D9D9D9",radius:0}}function Y0(e){const t=wn();return{text:ri,color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,lineHeight:e.w/ri.length,fontSize:e.w/ri.length,textAlign:"center",verticalAlign:"middle"}}function $0(){return{svg:'<svg t="1701004189871" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"   width="200" height="200"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"   fill="#2c2c2c"></path></svg>'}}function X0(){return{src:"data:image/svg+xml;base64,PHN2ZyAgIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxwYXRoIGQ9Ik05MjggMTYwSDk2Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY2NDBjMCAxNy43IDE0LjMgMzIgMzIgMzJoODMyYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE5MmMwLTE3LjctMTQuMy0zMi0zMi0zMnogbS00MCA2MzJIMTM2di0zOS45bDEzOC41LTE2NC4zIDE1MC4xIDE3OEw2NTguMSA0ODkgODg4IDc2MS42Vjc5MnogbTAtMTI5LjhMNjY0LjIgMzk2LjhjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDQyNC42IDY2Ni40bC0xNDQtMTcwLjdjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDEzNiA2NTIuN1YyMzJoNzUydjQzMC4yeiIgIGZpbGw9IiM1MTUxNTEiPjwvcGF0aD48cGF0aCBkPSJNMzA0IDQ1NmM0OC42IDAgODgtMzkuNCA4OC04OHMtMzkuNC04OC04OC04OC04OCAzOS40LTg4IDg4IDM5LjQgODggODggODh6IG0wLTExNmMxNS41IDAgMjggMTIuNSAyOCAyOHMtMTIuNSAyOC0yOCAyOC0yOC0xMi41LTI4LTI4IDEyLjUtMjggMjgtMjh6IiAgZmlsbD0iIzUxNTE1MSI+PC9wYXRoPjwvc3ZnPg=="}}function U0(){return{children:[],background:"#D9D9D9",overflow:"hidden"}}const Z0=wn();function Vi(e,t){const{viewScaleInfo:n}=t,{scale:o}=n;let{borderRadius:i,borderDash:a}=e.detail;const r=Array.isArray(a)&&a.length>0,{boxSizing:c=Z0.boxSizing,borderWidth:d}=e.detail;Array.isArray(d)&&(i=0);let{x:l,y:h,w:u,h:f}=e,m=[0,0,0,0];if(typeof i=="number"){const g=i*o;m=[g,g,g,g]}else Array.isArray(i)&&(i==null?void 0:i.length)===4&&(m=[i[0]*o,i[1]*o,i[2]*o,i[3]*o]);let v=0;return typeof d=="number"&&(v=(d||0)*o),c==="border-box"&&!r?(l=e.x+v/2,h=e.y+v/2,u=e.w-v,f=e.h-v):c==="content-box"?(l=e.x-v/2,h=e.y-v/2,u=e.w+v,f=e.h+v):(l=e.x,h=e.y,u=e.w,f=e.h),u=Math.max(u,1),f=Math.max(f,1),m=m.map(g=>Math.min(g,u/2,f/2)),{x:l,y:h,w:u,h:f,radiusList:m}}const Ge=e=>be(e,{decimalPlaces:4});function _r(e,t){const{detail:n}=e,{xRatio:o,yRatio:i,maxRatio:a}=t,r=(o+i)/2,{borderWidth:c,borderRadius:d,borderDash:l,shadowOffsetX:h,shadowOffsetY:u,shadowBlur:f}=n;if(typeof c=="number")n.borderWidth=Ge(c*r);else if(Array.isArray(n.borderWidth)){const m=c;n.borderWidth=[Ge(m[0]*i),Ge(m[1]*o),Ge(m[2]*i),Ge(m[3]*o)]}if(typeof d=="number")n.borderRadius=Ge(d*r);else if(Array.isArray(n.borderRadius)){const m=d;n.borderRadius=[m[0]*o,m[1]*o,m[2]*i,m[3]*i]}Array.isArray(l)&&l.forEach((m,v)=>{n.borderDash[v]=Ge(m*a)}),typeof h=="number"&&(n.shadowOffsetX=Ge(h*a)),typeof u=="number"&&(n.shadowOffsetX=Ge(u*a)),typeof f=="number"&&(n.shadowOffsetX=Ge(f*a))}function Q0(e,t){const{xRatio:n,yRatio:o}=t,{x:i,y:a,w:r,h:c}=e;e.x=Ge(i*n),e.y=Ge(a*o),e.w=Ge(r*n),e.h=Ge(c*o),_r(e,t)}function J0(e,t){const{minRatio:n,maxRatio:o}=t,{fontSize:i,lineHeight:a}=e.detail,r=(n+o)/2;i&&i>0&&(e.detail.fontSize=Ge(i*r)),a&&a>0&&(e.detail.lineHeight=Ge(a*r))}function jr(e,t){const{type:n}=e;Q0(e,t),n==="circle"||(n==="text"?J0(e,t):n==="image"||n==="svg"||n==="html"||n==="path"||n==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(o=>{jr(o,t)}))}function Vr(e,t){const n=t.w&&t.w>0?t.w:e.w,o=t.h&&t.h>0?t.h:e.h,i=n/e.w,a=o/e.h;if(i===a&&i===1)return e;const r=Math.min(i,a),c=Math.max(i,a);e.w=n,e.h=o;const d={xRatio:i,yRatio:a,minRatio:r,maxRatio:c};return e.type==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(l=>{jr(l,d)}),_r(e,d),e}const $i=200,Xi=200;function K0(e,t){let n=0,o=0,i=$i,a=Xi;if(t){const{viewScaleInfo:c,viewSizeInfo:d}=t,{scale:l,offsetLeft:h,offsetTop:u}=c,{width:f,height:m}=d,v=f/4,g=m/4;$i>=v?i=v/l:i=$i/l,Xi>=g?a=g/l:a=Xi/l,["circle","svg","image"].includes(e)?i=a=Math.max(i,a):e==="text"&&(a=i/ri.length*2),n=(0-h+f/2-i*l/2)/l,o=(0-u+m/2-a*l/2)/l}return{x:n,y:o,w:i,h:a}}function q0(e,t,n){const o=K0(e,n);let i={};return e==="rect"?i=H0():e==="circle"?i=G0():e==="text"?i=Y0(o):e==="svg"?i=$0():e==="image"?i=X0():e==="group"&&(i=U0()),Object.assign(Object.assign(Object.assign({},o),t),{uuid:$t(),type:e,detail:Object.assign(Object.assign({},i),t.detail||{})})}function Br(e,t,n){let o=!1;if(t.length===1){const i=t[0];n.splice(i,0,e),o=!0}else if(t.length>1){let i=n;for(let a=0;a<t.length;a++){const r=t[a],c=i[r];if(a===t.length-1){const d=t[a];i.splice(d,0,e),o=!0}else if(a<t.length-1&&c.type==="group")i=c.detail.children;else break}}return o}function Fr(e,t){let n=!1;if(e.length===1){const o=e[0];t.splice(o,1),n=!0}else if(e.length>1){let o=t;for(let i=0;i<e.length;i++){const a=e[i],r=o[a];if(i===e.length-1){const c=e[i];o.splice(c,1),n=!0}else if(i<e.length-1&&r.type==="group")o=r.detail.children;else break}}return n}function ed(e,t){const n=vt(e,t);return Fr(n,t)}function Ni(e,t){const n=[...t.from],o=[...t.to];if(n.length===0||o.length===0)return{elements:e,from:n,to:o};if(n.length<=o.length){for(let a=0;a<n.length;a++)if(o[a]===n[a]){if(a===n.length-1)return{elements:e,from:n,to:o};continue}}const i=Be(n,e);if(i){if(!Br(i,o,e))return{elements:e,from:n,to:o};let r=-1,c=!1;if(n.length>=1&&o.length>=1){if(n.length<=o.length){if(n.length===1)n[0]<o[0]&&(c=!0);else for(let d=0;d<n.length&&n[d]===o[d];d++)if(n.length===n.length-1){c=!0;break}}if(n.length>=o.length)if(o.length===1)o[0]<n[0]&&(c=!0);else for(let d=0;d<o.length&&(d===o.length-1&&o[d]<n[d]&&(c=!0),n[d]===o[d]);d++);}if(c===!0)for(let d=0;d<n.length&&o[d]>=0;d++)o[d]!==n[d]&&o[d]<n[d]&&d==o.length-1&&(r=d);r>=0&&(n[r]=n[r]+1),Fr(n,e)}return{elements:e,from:n,to:o}}function td(e,t){var n;const o=Object.keys(t);for(let i=0;i<o.length;i++){const a=o[i];["x","y","w","h","angle","name"].includes(a)?e[a]=t[a]:["detail","operations"].includes(a)&&(Ae.json(t[a])?(e!=null&&e.hasOwnProperty(a)||(e[a]={}),Ae.json(e[a])&&(e[a]=Object.assign(Object.assign({},e[a]),t[a]))):Ae.array(t[a])&&(e!=null&&e.hasOwnProperty(a)||(e[a]=[]),Ae.array(e[a])&&((n=t==null?void 0:t[a])===null||n===void 0||n.forEach((r,c)=>{e[a][c]=r}),e[a]=[...e[a],...t[a]])))}return e}function Xt(e,t,n){var o,i;let a=null;for(let r=0;r<n.length;r++){const c=n[r];if(c.uuid===e){c.type==="group"&&((o=c.operations)===null||o===void 0?void 0:o.deepResize)===!0&&(t.w&&t.w>0||t.h&&t.h>0)&&Vr(c,{w:t.w,h:t.h}),td(c,t),a=c;break}else c.type==="group"&&(a=Xt(e,t,((i=c==null?void 0:c.detail)===null||i===void 0?void 0:i.children)||[]))}return a}function nd(e,t){var n,o,i,a,r,c,d,l,h,u;let f=0,m=0,v=1,g=((o=(n=e==null?void 0:e.elements)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.x)||0,p=((a=(i=e==null?void 0:e.elements)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.y)||0,b=((c=(r=e==null?void 0:e.elements)===null||r===void 0?void 0:r[0])===null||c===void 0?void 0:c.w)||0,E=((l=(d=e==null?void 0:e.elements)===null||d===void 0?void 0:d[0])===null||l===void 0?void 0:l.h)||0;const{width:M,height:y}=t.viewSizeInfo;if(e.layout&&((u=(h=e.layout)===null||h===void 0?void 0:h.detail)===null||u===void 0?void 0:u.overflow)==="hidden"?(g=0,p=0,b=e.layout.w||0,E=e.layout.h||0):e.elements.forEach(C=>{const w={x:C.x,y:C.y,w:C.w,h:C.h,angle:C.angle};if(w.angle&&(w.angle>0||w.angle<0)){const z=Kn(w);if(z.length===4){const N=[z[0].x,z[1].x,z[2].x,z[3].x],F=[z[0].y,z[1].y,z[2].y,z[3].y];w.x=Math.min(...N),w.y=Math.min(...F),w.w=Math.abs(Math.max(...N)-Math.min(...N)),w.h=Math.abs(Math.max(...F)-Math.min(...F))}}const O=Math.min(w.x,g),A=Math.min(w.y,p),x=Math.max(w.x+w.w,g+b),j=Math.max(w.y+w.h,p+E);g=O,p=A,b=Math.abs(x-O),E=Math.abs(j-A)}),e.layout){const{x:C,y:w,w:O,h:A}=e.layout;ze.x(C)&&ze.y(w)&&ze.w(O)&&ze.h(A)&&(g=Math.min(g,C),p=Math.min(p,w),b=Math.max(b,O),E=Math.max(E,A))}if(b>0&&E>0){const C=be(M/b,{decimalPlaces:4}),w=be(y/E,{decimalPlaces:4});v=Math.min(C,w,1),f=(b*v-M)/2/v+g,m=(E*v-y)/2/v+p}return{offsetX:be(f,{decimalPlaces:0}),offsetY:be(m,{decimalPlaces:0}),scale:v}}function od(e){let t=0,n=0;if(e){const{viewScaleInfo:i,viewSizeInfo:a}=e,{offsetLeft:r,offsetTop:c,scale:d}=i,{width:l,height:h}=a;t=0-r+l/d/2,n=0-c+h/d/2}return{x:t,y:n}}const id=["-apple-system",'"system-ui"',' "Segoe UI"'," Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"'," sans-serif"];function Wr(e){return[e,...id].join(", ")}function ma(e,t,n){if(typeof t=="string")return t;const{viewElementSize:o,viewScaleInfo:i,opacity:a=1}=n,{x:r,y:c}=o,{scale:d}=i;if((t==null?void 0:t.type)==="linear-gradient"){const{start:l,end:h,stops:u}=t,f={x:r+l.x*d,y:c+l.y*d},m={x:r+h.x*d,y:c+h.y*d},v=e.createLinearGradient(f.x,f.y,m.x,m.y);return u.forEach(g=>{v.addColorStop(g.offset,qa(g.color,a))}),v}if((t==null?void 0:t.type)==="radial-gradient"){const{inner:l,outer:h,stops:u}=t,f={x:r+l.x*d,y:c+l.y*d,radius:l.radius*d},m={x:r+h.x*d,y:c+h.y*d,radius:h.radius*d},v=e.createRadialGradient(f.x,f.y,f.radius,m.x,m.y,m.radius);return u.forEach(g=>{v.addColorStop(g.offset,qa(g.color,a))}),v}return"#000000"}const ga=wn();function gn(e){var t,n,o,i;let a=1;return((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.opacity)!==void 0&&((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.opacity)>=0&&((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.opacity)<=1&&(a=(i=e==null?void 0:e.detail)===null||i===void 0?void 0:i.opacity),a}function No(e,t,n){const{pattern:o,renderContent:i,originElem:a,calcElemSize:r,viewScaleInfo:c,viewSizeInfo:d}=n||{},{parentOpacity:l}=n,h=gn(a)*l,{clipPath:u,clipPathStrokeColor:f,clipPathStrokeWidth:m}=a.detail,v=()=>{e.globalAlpha=h,Hr(e,t,{pattern:o,viewScaleInfo:c,viewSizeInfo:d}),i==null||i(),Gr(e,t,{viewScaleInfo:c,viewSizeInfo:d}),e.globalAlpha=l};u?(ad(e,t,{originElem:a,calcElemSize:r,viewScaleInfo:c,viewSizeInfo:d,renderContent:()=>{v()}}),typeof m=="number"&&m>0&&f&&sd(e,t,{originElem:a,calcElemSize:r,viewScaleInfo:c,viewSizeInfo:d,parentOpacity:l})):v()}function ad(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:r}=n,c=r.devicePixelRatio,{clipPath:d}=(i==null?void 0:i.detail)||{};if(d&&a&&d.commands){const{x:l,y:h,w:u,h:f}=a,{originW:m,originH:v,originX:g,originY:p}=d,b=u/m,E=f/v,M=g*b,y=p*E,R=l-M,C=h-y;e.save(),e.translate(R,C),e.scale(c*b,c*E);const w=Pa(d.commands||[]),O=new Path2D(w);e.clip(O),e.translate(0-R,0-C),e.setTransform(1,0,0,1,0,0),pt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function sd(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:r,parentOpacity:c}=n,d=r.devicePixelRatio,{clipPath:l,clipPathStrokeColor:h,clipPathStrokeWidth:u}=(i==null?void 0:i.detail)||{};if(l&&a&&l.commands&&typeof u=="number"&&u>0&&h){const{x:f,y:m,w:v,h:g}=a,{originW:p,originH:b,originX:E,originY:M}=l,y=v/p,R=g/b,C=E*y,w=M*R,O=f-C,A=m-w;e.save(),e.globalAlpha=c,e.translate(O,A),e.scale(d*y,d*R);const x=Pa(l.commands||[]),j=new Path2D(x);e.strokeStyle=h,e.lineWidth=u,e.stroke(j),e.translate(0-O,0-A),e.setTransform(1,0,0,1,0,0),pt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function Hr(e,t,n){var o,i;const{pattern:a,viewScaleInfo:r,viewSizeInfo:c}=n,d=[];if(t.detail.background||a){const{x:l,y:h,w:u,h:f,radiusList:m}=Vi(t,{viewScaleInfo:r,viewSizeInfo:c});if(e.beginPath(),e.moveTo(l+m[0],h),e.arcTo(l+u,h,l+u,h+f,m[1]),e.arcTo(l+u,h+f,l,h+f,m[2]),e.arcTo(l,h+f,l,h,m[3]),e.arcTo(l,h,l+u,h,m[0]),e.closePath(),typeof a=="string")e.fillStyle=a;else if(["CanvasPattern"].includes(Ae.type(a)))e.fillStyle=a;else if(typeof t.detail.background=="string")e.fillStyle=t.detail.background;else if(((o=t.detail.background)===null||o===void 0?void 0:o.type)==="linear-gradient"){const v=ma(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:f},viewScaleInfo:r,opacity:e.globalAlpha});e.fillStyle=v}else if(((i=t.detail.background)===null||i===void 0?void 0:i.type)==="radial-gradient"){const v=ma(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:f},viewScaleInfo:r,opacity:e.globalAlpha});if(e.fillStyle=v,d&&d.length>0)for(let g=0;g<(d==null?void 0:d.length);g++){const p=d[g];p.method==="translate"?e.translate(p.args[0]+l,p.args[1]+h):p.method==="rotate"?e.rotate(...p.args):p.method==="scale"&&e.scale(...p.args)}}e.fill(),d&&d.length>0&&e.setTransform(1,0,0,1,0,0)}}function Gr(e,t,n){if(t.detail.borderWidth===0||!zi(t.detail.borderColor))return;const{viewScaleInfo:o}=n,{scale:i}=o;let a=ga.borderColor;zi(t.detail.borderColor)===!0&&(a=t.detail.borderColor);const{borderWidth:r,borderRadius:c,borderDash:d,boxSizing:l=ga.boxSizing}=t.detail;let h=0;typeof r=="number"&&(h=r||1),h=h*i;let u=[0,0,0,0];if(typeof c=="number"){const b=c*i;u=[b,b,b,b]}else Array.isArray(c)&&(c==null?void 0:c.length)===4&&(u=[c[0]*i,c[1]*i,c[2]*i,c[3]*i]);e.strokeStyle=a;let f=[];Array.isArray(d)&&d.length>0&&(f=d.map(b=>Math.ceil(b*i)));let m=0,v=0,g=0,p=0;if(Array.isArray(r)&&(m=(r[0]||0)*i,v=(r[1]||0)*i,g=(r[2]||0)*i,p=(r[3]||0)*i),p||v||m||g){e.lineCap="butt";let{x:b,y:E,w:M,h:y}=t;l==="border-box"?(b=b+p/2,E=E+m/2,M=M-p/2-v/2,y=y-m/2-g/2):l==="content-box"?(b=b-p/2,E=E-m/2,M=M+p/2+v/2,y=y+m/2+g/2):(b=t.x,E=t.y,M=t.w,y=t.h),m&&(e.beginPath(),e.lineWidth=m,e.moveTo(b-p/2,E),e.lineTo(b+M+v/2,E),e.closePath(),e.stroke()),v&&(e.beginPath(),e.lineWidth=v,e.moveTo(b+M,E-m/2),e.lineTo(b+M,E+y+g/2),e.closePath(),e.stroke()),g&&(e.beginPath(),e.lineWidth=g,e.moveTo(b-p/2,E+y),e.lineTo(b+M+v/2,E+y),e.closePath(),e.stroke()),p&&(e.beginPath(),e.lineWidth=p,e.moveTo(b,E-m/2),e.lineTo(b,E+y+g/2),e.closePath(),e.stroke())}else{let{x:b,y:E,w:M,h:y}=t;l==="border-box"?(b=t.x+h/2,E=t.y+h/2,M=t.w-h,y=t.h-h):l==="content-box"?(b=t.x-h/2,E=t.y-h/2,M=t.w+h,y=t.h+h):(b=t.x,E=t.y,M=t.w,y=t.h),f.length>0?e.lineCap="butt":e.lineCap="square",M=Math.max(M,1),y=Math.max(y,1),u=u.map(R=>Math.min(R,M/2,y/2)),e.setLineDash(f),e.lineWidth=h,e.beginPath(),e.moveTo(b+u[0],E),e.arcTo(b+M,E,b+M,E+y,u[1]),e.arcTo(b+M,E+y,b,E+y,u[2]),e.arcTo(b,E+y,b,E,u[3]),e.arcTo(b,E,b+M,E,u[0]),e.closePath(),e.stroke()}e.setLineDash([])}function bn(e,t,n){const{detail:o}=t,{viewScaleInfo:i,renderContent:a}=n,{shadowColor:r,shadowOffsetX:c,shadowOffsetY:d,shadowBlur:l}=o;ze.number(l)?(e.save(),e.shadowColor=r||ga.shadowColor,e.shadowOffsetX=(c||0)*i.scale,e.shadowOffsetY=(d||0)*i.scale,e.shadowBlur=(l||0)*i.scale,a(),e.restore()):(e.save(),e.shadowColor="transparent",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,a(),e.restore())}function rd(e,t,n){const{detail:o,angle:i}=t,{viewScaleInfo:a,viewSizeInfo:r,parentOpacity:c}=n,{background:d="#000000",borderColor:l="#000000",boxSizing:h,borderWidth:u=0,borderDash:f}=o;let m=0;typeof u=="number"&&u>0?m=u:Array.isArray(u)&&typeof u[0]=="number"&&u[0]>0&&(m=u[0]),m=m*a.scale;const{x:v,y:g,w:p,h:b}=Xe({x:t.x,y:t.y,w:t.w,h:t.h},{viewScaleInfo:a})||t,E=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:b,angle:i});pt(e,{x:v,y:g,w:p,h:b,angle:i},()=>{bn(e,E,{viewScaleInfo:a,viewSizeInfo:r,renderContent:()=>{let M=p/2,y=b/2;const R=v+M,C=g+y,w=M,O=y;if(m>0&&(h==="content-box"?(M=M,y=y):h==="center-line"?(M=M-m/2,y=y-m/2):(M=M-m,y=y-m)),M>=0&&y>=0){const A=gn(E)*c;e.globalAlpha=A,e.beginPath();const x=ma(e,d,{viewElementSize:{x:v,y:g,w:p,h:b},viewScaleInfo:a,opacity:e.globalAlpha});if(e.fillStyle=x,e.circle(R,C,w,O,0,0,2*Math.PI),e.closePath(),e.fill(),e.globalAlpha=c,typeof m=="number"&&m>0){const j=m/2+M,z=m/2+y;if(e.beginPath(),f){const N=f.map(F=>F*a.scale);e.setLineDash(N)}e.strokeStyle=l,e.lineWidth=m,e.circle(R,C,j,z,0,0,2*Math.PI),e.closePath(),e.stroke(),e.setLineDash([])}}}})})}function ld(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:r,y:c,w:d,h:l,angle:h}=Xe(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:r,y:c,w:d,h:l,angle:h});pt(e,{x:r,y:c,w:d,h:l,angle:h},()=>{bn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{No(e,u,{originElem:t,calcElemSize:{x:r,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{}})}})})}function cd(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:r}=n,{x:c,y:d,w:l,h,angle:u}=Xe(t,{viewScaleInfo:i})||t,f=Object.assign(Object.assign({},t),{x:c,y:d,w:l,h,angle:u});pt(e,{x:c,y:d,w:l,h,angle:u},()=>{bn(e,f,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{No(e,f,{originElem:t,calcElemSize:{x:c,y:d,w:l,h,angle:u},viewScaleInfo:i,viewSizeInfo:a,parentOpacity:r,renderContent:()=>{if(!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="image"&&o){e.globalAlpha=gn(t)*r;const{x:m,y:v,w:g,h:p,radiusList:b}=Vi(f,{viewScaleInfo:i,viewSizeInfo:a}),{detail:E}=t,{scaleMode:M,originW:y=0,originH:R=0}=E,C=e.$undoPixelRatio(y),w=e.$undoPixelRatio(R);if(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(m+b[0],v),e.arcTo(m+g,v,m+g,v+p,b[1]),e.arcTo(m+g,v+p,m,v+p,b[2]),e.arcTo(m,v+p,m,v,b[3]),e.arcTo(m,v,m+g,v,b[0]),e.closePath(),e.fill(),e.clip(),M&&R&&y){let O=0,A=0,x=C,j=w;const z=m,N=v,F=g,H=p;if(C>t.w||w>t.h){if(M==="fill"){const V=Math.max(t.w/C,t.h/w),D=C*V,_=w*V;O=(D-t.w)/2/V,A=(_-t.h)/2/V,x=t.w/V,j=t.h/V}else if(M==="tile")O=0,A=0,x=t.w,j=t.h;else if(M==="fit"){const V=Math.min(t.w/C,t.h/w);O=(C-t.w/V)/2,A=(w-t.h/V)/2,x=t.w/V,j=t.h/V}}e.drawImage(o,O,A,x,j,z,N,F,H)}else e.drawImage(o,m,v,g,p);e.globalAlpha=r,e.restore()}}})}})})}function dd(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:r}=n,{x:c,y:d,w:l,h,angle:u}=Xe(t,{viewScaleInfo:i,viewSizeInfo:a})||t;pt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="svg"&&o&&(e.globalAlpha=gn(t)*r,e.drawImage(o,c,d,l,h),e.globalAlpha=r)})}function ud(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:r}=n,{x:c,y:d,w:l,h,angle:u}=Xe(t,{viewScaleInfo:i,viewSizeInfo:a})||t;pt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="html"&&o&&(e.globalAlpha=gn(t)*r,e.drawImage(o,c,d,l,h),e.globalAlpha=r)})}const Ui=wn();function hd(e,t,n){return n<.5&&e<t&&(e-t)/e>-.15?!0:e>=t}function fd(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:r,y:c,w:d,h:l,angle:h}=Xe(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:r,y:c,w:d,h:l,angle:h});pt(e,{x:r,y:c,w:d,h:l,angle:h},()=>{bn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{No(e,u,{originElem:t,calcElemSize:{x:r,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a})}});{const f=Object.assign(Object.assign({},Ui),t.detail),m=f.fontSize||Ui.fontSize,v=m*o.scale;if(v<2)return;const p=(f.lineHeight||m)*o.scale;e.fillStyle=t.detail.color||Ui.color,e.textBaseline="top",e.$setFont({fontWeight:f.fontWeight,fontSize:v,fontFamily:Wr(f.fontFamily)});let b=f.text.replace(/\r\n/gi,`
`);f.textTransform==="lowercase"?b=b.toLowerCase():f.textTransform==="uppercase"&&(b=b.toUpperCase());const E=p,M=b.split(`
`),y=[];let R=0;M.forEach((O,A)=>{if(f.minInlineSize==="maxContent")y.push({text:O,width:e.$undoPixelRatio(e.measureText(O).width)});else{let x="",z=O.split("");if(f.wordBreak==="normal"){const N=" ",F=O.split(N);z=[],F.forEach((H,V)=>{z.push(H),V<F.length-1&&z.push(N)})}if(z.length===1&&f.overflow==="visible")y.push({text:z[0],width:e.$undoPixelRatio(e.measureText(z[0]).width)});else if(z.length>0){for(let N=0;N<z.length&&(hd(e.$doPixelRatio(d),e.measureText(x+z[N]).width,o.scale)?x+=z[N]||"":(y.push({text:x,width:e.$undoPixelRatio(e.measureText(x).width)}),x=z[N]||"",R++),!((R+1)*E>l&&f.overflow==="hidden"));N++)if(z.length-1===N&&(R+1)*E<=l){y.push({text:x,width:e.$undoPixelRatio(e.measureText(x).width)}),A<M.length-1&&R++;break}}else y.push({text:"",width:0})}});let C=0,w=0;E>v&&(w=(E-v)/2),y.length*E<l&&(t.detail.verticalAlign==="top"?C=0:t.detail.verticalAlign==="bottom"?C+=l-y.length*E:C+=(l-y.length*E)/2);{const O=c+C;f.textShadowColor!==void 0&&zi(f.textShadowColor)&&(e.shadowColor=f.textShadowColor),f.textShadowOffsetX!==void 0&&ze.number(f.textShadowOffsetX)&&(e.shadowOffsetX=f.textShadowOffsetX),f.textShadowOffsetY!==void 0&&ze.number(f.textShadowOffsetY)&&(e.shadowOffsetY=f.textShadowOffsetY),f.textShadowBlur!==void 0&&ze.number(f.textShadowBlur)&&(e.shadowBlur=f.textShadowBlur),y.forEach((A,x)=>{let j=r;f.textAlign==="center"?j=r+(d-A.width)/2:f.textAlign==="right"&&(j=r+(d-A.width)),e.fillText(A.text,j,O+E*x+w)})}}})}var md=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function gd(e,t,n){var o,i;const{detail:a}=t,{originX:r,originY:c,originW:d,originH:l,fillRule:h}=a,{viewScaleInfo:u,viewSizeInfo:f,parentOpacity:m}=n,{x:v,y:g,w:p,h:b,angle:E}=Xe(t,{viewScaleInfo:u})||t,M=p/d,y=b/l,R=r*M,C=c*y,w=v-R,O=g-C,A=t.detail,x=md(A,["clipPath","clipPathStrokeColor","clipPathStrokeWidth"]),j=u.scale*f.devicePixelRatio,z=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:b,angle:E});let N=Object.assign({},z);N.detail=x;let F=Object.assign({},t);F.detail=x,a.fill&&a.fill!=="string"&&(!((i=(o=a.fill)===null||o===void 0?void 0:o.type)===null||i===void 0)&&i.includes("gradient"))&&(N=Object.assign(Object.assign({},z),{detail:Object.assign(Object.assign({},z.detail),{background:a.fill,clipPath:{commands:a.commands,originX:r,originY:c,originW:d,originH:l}})}),F.detail=Object.assign({},N.detail)),pt(e,{x:v,y:g,w:p,h:b,angle:E},()=>{No(e,N,{originElem:F,calcElemSize:{x:v,y:g,w:p,h:b,angle:E},viewScaleInfo:u,viewSizeInfo:f,parentOpacity:m,renderContent:()=>{bn(e,z,{viewScaleInfo:u,viewSizeInfo:f,renderContent:()=>{e.save(),e.translate(w,O),e.scale(j*M/u.scale,j*y/u.scale);const H=Pa(a.commands||[]),V=new Path2D(H);a.fill&&(typeof a.fill=="string"?e.fillStyle=a.fill:e.fillStyle="transparent"),a.fill&&e.fill(V,h),a.stroke&&a.strokeWidth!==0&&(e.strokeStyle=a.stroke,e.lineWidth=(a.strokeWidth||1)/f.devicePixelRatio,e.lineCap=a.strokeLineCap||"square",e.stroke(V)),e.translate(-w,-O),e.restore()}})}})})}const ns=.4;function Yr(e,t,n){var o,i,a;if(((o=t==null?void 0:t.operations)===null||o===void 0?void 0:o.invisible)===!0)return;const{w:r,h:c}=t,{scale:d}=n.viewScaleInfo;if(d<1&&(r*d<ns||c*d<ns)||n.parentOpacity===0)return;const{overrideElementMap:l}=n;if(!(!((a=(i=l==null?void 0:l[t.uuid])===null||i===void 0?void 0:i.operations)===null||a===void 0)&&a.invisible))try{switch(t.type){case"rect":{ld(e,t,n);break}case"circle":{rd(e,t,n);break}case"text":{fd(e,t,n);break}case"image":{cd(e,t,n);break}case"svg":{dd(e,t,n);break}case"html":{ud(e,t,n);break}case"path":{gd(e,t,n);break}case"group":{const h=Object.assign(Object.assign({},n.elementAssets||{}),t.detail.assets||{});vd(e,t,Object.assign(Object.assign({},n),{elementAssets:h}));break}default:break}}catch(h){console.error(h)}}function vd(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:r,y:c,w:d,h:l,angle:h}=Xe({x:t.x,y:t.y,w:t.w,h:t.h,angle:t.angle},{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:r,y:c,w:d,h:l,angle:h});pt(e,{x:r,y:c,w:d,h:l,angle:h},()=>{e.globalAlpha=gn(t)*a,bn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{No(e,u,{originElem:t,calcElemSize:{x:r,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{const{x:f,y:m,w:v,h:g,radiusList:p}=Vi(u,{viewScaleInfo:o,viewSizeInfo:i});if(t.detail.overflow==="hidden"&&(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(f+p[0],m),e.arcTo(f+v,m,f+v,m+g,p[1]),e.arcTo(f+v,m+g,f,m+g,p[2]),e.arcTo(f,m+g,f,m,p[3]),e.arcTo(f,m,f+v,m,p[0]),e.closePath(),e.fill(),e.clip()),Array.isArray(t.detail.children)){const{parentElementSize:b}=n,E={x:b.x+t.x,y:b.y+t.y,w:t.w||b.w,h:t.h||b.h,angle:t.angle},{calculator:M}=n;for(let y=0;y<t.detail.children.length;y++){let R=t.detail.children[y];if(R=Object.assign(Object.assign({},R),{x:E.x+R.x,y:E.y+R.y}),!(n.forceDrawAll!==!0&&!(M!=null&&M.needRender(R))))try{Yr(e,R,Object.assign(Object.assign({},n),{parentOpacity:a*gn(t)}))}catch(C){console.error(C)}}}t.detail.overflow==="hidden"&&e.restore()}})}}),e.globalAlpha=a})}const pd=wn();function os(e,t,n){var o;const{elements:i=[]}=t,{parentOpacity:a}=n;for(let r=0;r<i.length;r++){const c=i[r],d=Object.assign(Object.assign({},c),{detail:Object.assign(Object.assign({},pd),c==null?void 0:c.detail)});if(!(n.forceDrawAll!==!0&&!(!((o=n.calculator)===null||o===void 0)&&o.needRender(d))))try{Yr(e,d,Object.assign(Object.assign({},n),{parentOpacity:a}))}catch(l){console.error(l)}}}function yd(e,t,n,o){const{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:r}=n,c=Object.assign({uuid:"layout",type:"group"},t),{x:d,y:l,w:h,h:u}=Xe(c,{viewScaleInfo:i})||c,m=Object.assign(Object.assign({},c),{x:d,y:l,w:h,h:u,angle:0});if(e.globalAlpha=1,bn(e,m,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{Hr(e,m,{viewScaleInfo:i,viewSizeInfo:a})}}),t.detail.overflow==="hidden"){const{viewScaleInfo:v,viewSizeInfo:g}=n,p=Object.assign({uuid:"layout",type:"group"},t),b=Xe(p,{viewScaleInfo:v})||p,E=Object.assign(Object.assign({},p),b),{x:M,y,w:R,h:C,radiusList:w}=Vi(E,{viewScaleInfo:v,viewSizeInfo:g});e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(M+w[0],y),e.arcTo(M+R,y,M+R,y+C,w[1]),e.arcTo(M+R,y+C,M,y+C,w[2]),e.arcTo(M,y+C,M,y,w[3]),e.arcTo(M,y,M+R,y,w[0]),e.closePath(),e.fill(),e.clip()}o(e),t.detail.overflow==="hidden"&&e.restore(),Gr(e,m,{viewScaleInfo:i,viewSizeInfo:a}),e.globalAlpha=r}function wd(e,t,n){if(typeof(t==null?void 0:t.background)=="string"){const{viewSizeInfo:o}=n,{width:i,height:a}=o;e.globalAlpha=1,e.fillStyle=t.background,e.fillRect(0,0,i,a)}}var Zi=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},Ee=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},qn=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},rt,So,Yn,st,Tt,li,Qi,is,as,ss,$r,Xr;const bd=["image","svg","html"],fo=e=>{var t,n,o;let i=null;return e.type==="image"?i=((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.src)||null:e.type==="svg"?i=((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.svg)||null:e.type==="html"&&(i=((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.html)||null),typeof i=="string"&&i?un(i)?i:Qn(i):Qn(`${$t()}-${e.uuid}-${$t()}-${$t()}`)};class Ed extends hn{constructor(){super(),rt.add(this),So.set(this,{}),Yn.set(this,{}),st.set(this,{}),Tt.set(this,!1),Ee(this,rt,"m",li).call(this,"image",(t,n)=>Zi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.src])===null||o===void 0?void 0:o.value)||t.detail.src,a=yield _i(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}})),Ee(this,rt,"m",li).call(this,"html",(t,n)=>Zi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.html])===null||o===void 0?void 0:o.value)||t.detail.html,a=yield s0(i,{width:t.detail.originW||t.w,height:t.detail.originH||t.h});return{uuid:t.uuid,lastModified:Date.now(),content:a}})),Ee(this,rt,"m",li).call(this,"svg",(t,n)=>Zi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.svg])===null||o===void 0?void 0:o.value)||t.detail.svg,a=yield i0(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}}))}isDestroyed(){return Ee(this,Tt,"f")}destroy(){qn(this,Tt,!0,"f"),this.clear(),qn(this,So,null,"f"),qn(this,Yn,null,"f"),qn(this,st,null,"f")}load(t,n){Ee(this,Tt,"f")!==!0&&(Ee(this,rt,"m",Xr).call(this,t)||bd.includes(t.type)&&Ee(this,rt,"m",$r).call(this,t,n))}getContent(t){var n,o;const i=fo(t);return((o=(n=Ee(this,st,"f"))===null||n===void 0?void 0:n[i])===null||o===void 0?void 0:o.content)||null}getLoadItemMap(){return Ee(this,st,"f")}setLoadItemMap(t){qn(this,st,t,"f")}}So=new WeakMap,Yn=new WeakMap,st=new WeakMap,Tt=new WeakMap,rt=new WeakSet,li=function(t,n){Ee(this,So,"f")[t]=n},Qi=function(t){var n,o,i;let a=null;return t.type==="image"?a=((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.src)||null:t.type==="svg"?a=((o=t==null?void 0:t.detail)===null||o===void 0?void 0:o.svg)||null:t.type==="html"&&(a=((i=t==null?void 0:t.detail)===null||i===void 0?void 0:i.html)||null),a},is=function(t){return{element:t,status:"null",content:null,error:null,startTime:-1,endTime:-1,source:Ee(this,rt,"m",Qi).call(this,t)}},as=function(t){const n=fo(t.element),o=Ee(this,st,"f")[n];Ee(this,Tt,"f")||(o?o.startTime<t.startTime&&(Ee(this,st,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(Ee(this,st,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},ss=function(t){var n;const o=fo(t.element),i=(n=Ee(this,st,"f"))===null||n===void 0?void 0:n[o];Ee(this,Tt,"f")||(i?i.startTime<t.startTime&&(Ee(this,st,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(Ee(this,st,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},$r=function(t,n){const o=Ee(this,rt,"m",is).call(this,t),i=fo(t);if(Ee(this,Yn,"f")[i])return;Ee(this,Yn,"f")[i]=o;const a=Ee(this,So,"f")[t.type];typeof a=="function"&&!Ee(this,Tt,"f")&&(o.startTime=Date.now(),a(t,n).then(r=>{Ee(this,Tt,"f")||(o.content=r.content,o.endTime=Date.now(),o.status="load",Ee(this,rt,"m",as).call(this,o))}).catch(r=>{console.warn(`Load element source "${o.source}" fail`,r,t),o.endTime=Date.now(),o.status="error",o.error=r,Ee(this,rt,"m",ss).call(this,o)}))},Xr=function(t){var n;const o=fo(t),i=(n=Ee(this,Yn,"f"))===null||n===void 0?void 0:n[o];return!!(i&&i.status==="error"&&i.source&&i.source===Ee(this,rt,"m",Qi).call(this,t))};var eo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ut=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},va,jt,zt,ci,Ur;class Zr extends hn{constructor(t){super(),va.add(this),jt.set(this,void 0),zt.set(this,new Ed),ci.set(this,!1),eo(this,jt,t,"f"),ut(this,va,"m",Ur).call(this)}isDestroyed(){return ut(this,ci,"f")}destroy(){this.clear(),eo(this,jt,null,"f"),ut(this,zt,"f").destroy(),eo(this,zt,null,"f"),eo(this,ci,!0,"f")}updateOptions(t){eo(this,jt,t,"f")}drawData(t,n){const o=ut(this,zt,"f"),{calculator:i,sharer:a}=ut(this,jt,"f"),r=ut(this,jt,"f").viewContext;r.clearRect(0,0,r.canvas.width,r.canvas.height);const c={x:0,y:0,w:n.viewSizeInfo.width,h:n.viewSizeInfo.height},d=Object.assign({loader:o,calculator:i,parentElementSize:c,elementAssets:t.assets,parentOpacity:1,overrideElementMap:a==null?void 0:a.getActiveOverrideElemenentMap()},n);wd(r,t.global,d),t.layout?yd(r,t.layout,d,()=>{os(r,t,d)}):os(r,t,d)}scale(t){const{sharer:n}=ut(this,jt,"f");if(!n)return;const{data:o,offsetTop:i,offsetBottom:a,offsetLeft:r,offsetRight:c,width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:f}=n.getActiveStoreSnapshot();o&&this.drawData(o,{viewScaleInfo:{scale:t,offsetTop:i,offsetBottom:a,offsetLeft:r,offsetRight:c},viewSizeInfo:{width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:f}})}setLoadItemMap(t){ut(this,zt,"f").setLoadItemMap(t)}getLoadItemMap(){return ut(this,zt,"f").getLoadItemMap()}getLoader(){return ut(this,zt,"f")}}jt=new WeakMap,zt=new WeakMap,ci=new WeakMap,va=new WeakSet,Ur=function(){const t=ut(this,zt,"f");t.on("load",n=>{this.trigger("load",n)}),t.on("error",n=>{console.error(n)})};var Ji=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ue=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},_n,We;class Qr{constructor(t){_n.set(this,void 0),We.set(this,void 0),Ji(this,_n,t,"f"),Ji(this,We,new fn({defaultStorage:{viewVisibleInfoMap:{},visibleCount:0,invisibleCount:0}}),"f")}toGridNum(t,n){return(n==null?void 0:n.ignore)===!0?t:Math.round(t)}destroy(){Ji(this,_n,null,"f")}needRender(t){const o=Ue(this,We,"f").get("viewVisibleInfoMap")[t.uuid];return o?o.isVisibleInView:!0}isPointInElement(t,n,o,i){const a=Ue(this,_n,"f").viewContext;return fa(t,{context2d:a,element:n,viewScaleInfo:o,viewSizeInfo:i})}getPointElement(t,n){const o=Ue(this,_n,"f").viewContext;return V0(t,Object.assign(Object.assign({},n),{context2d:o}))}resetViewVisibleInfoMap(t,n){if(t){const{viewVisibleInfoMap:o,invisibleCount:i,visibleCount:a}=B0(t.elements,n);Ue(this,We,"f").set("viewVisibleInfoMap",o),Ue(this,We,"f").set("invisibleCount",i),Ue(this,We,"f").set("visibleCount",a)}}updateVisiableStatus(t){const{viewVisibleInfoMap:n,invisibleCount:o,visibleCount:i}=kr(Ue(this,We,"f").get("viewVisibleInfoMap"),t);Ue(this,We,"f").set("viewVisibleInfoMap",n),Ue(this,We,"f").set("invisibleCount",o),Ue(this,We,"f").set("visibleCount",i)}calcViewRectInfoFromOrigin(t,n){const o=Ue(this,We,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:r}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:f,topRight:m,bottomLeft:v,bottomRight:g}=o.originRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:r};return{center:we(c,p),left:we(d,p),right:we(l,p),bottom:we(h,p),top:we(u,p),topLeft:we(f,p),topRight:we(m,p),bottomLeft:we(v,p),bottomRight:we(g,p)}}calcViewRectInfoFromRange(t,n){const o=Ue(this,We,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:r}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:f,topRight:m,bottomLeft:v,bottomRight:g}=o.rangeRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:r};return{center:we(c,p),left:we(d,p),right:we(l,p),bottom:we(h,p),top:we(u,p),topLeft:we(f,p),topRight:we(m,p),bottomLeft:we(v,p),bottomRight:we(g,p)}}modifyViewVisibleInfoMap(t,n){const{modifyOptions:o,viewScaleInfo:i,viewSizeInfo:a}=n,{type:r,content:c}=o,d=t.elements,l=Ue(this,We,"f").get("viewVisibleInfoMap");if(r==="deleteElement"){const{element:h}=c,u=[],f=m=>{u.push(m.uuid),m.type==="group"&&Array.isArray(m.detail.children)&&m.detail.children.forEach(v=>{f(v)})};f(h),u.forEach(m=>{delete l[m]}),Ue(this,We,"f").set("viewVisibleInfoMap",l)}else if(r==="addElement"||r==="updateElement"){const{position:h}=c,u=Be(h,t.elements),f=Nr(d,h);if(u)if(r==="updateElement"&&u.type==="group")this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a});else{const m=Rr(u,{groupQueue:f||[]}),v={originRectInfo:m,rangeRectInfo:ze.angle(u.angle)?Or(m):m,isVisibleInView:!0,isGroup:(u==null?void 0:u.type)==="group",position:[...h]};l[u.uuid]=v,Ue(this,We,"f").set("viewVisibleInfoMap",l),r==="updateElement"&&this.updateVisiableStatus({viewScaleInfo:i,viewSizeInfo:a})}}else r==="moveElement"&&this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a})}}_n=new WeakMap,We=new WeakMap;var Ki=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ie=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ie,$n,it,di,Jr,ui,hi,fi,mi,gi,vi,pi,yi,bt,Et,ln;function rs(e){return e>0||e<0||e===0}class Sd extends hn{constructor(t){super(),Ie.add(this),$n.set(this,void 0),it.set(this,void 0),di.set(this,!1),ui.set(this,o=>{if(!ie(this,Ie,"m",bt).call(this,o))return;const i=ie(this,Ie,"m",Et).call(this,o);if(!ie(this,Ie,"m",ln).call(this,i))return;o.preventDefault(),o.stopPropagation();const a=o.deltaX>0||o.deltaX<0?o.deltaX:0,r=o.deltaY>0||o.deltaY<0?o.deltaY:0;o.ctrlKey===!0&&this.has("wheelScale")?this.trigger("wheelScale",{deltaX:a,deltaY:r,point:i}):this.has("wheel")&&this.trigger("wheel",{deltaX:a,deltaY:r,point:i})}),hi.set(this,o=>{if(o.button!==2||!ie(this,Ie,"m",bt).call(this,o))return;o.preventDefault();const i=ie(this,Ie,"m",Et).call(this,o);ie(this,Ie,"m",ln).call(this,i)&&this.trigger("contextMenu",{point:i})}),fi.set(this,o=>{if(!ie(this,Ie,"m",bt).call(this,o))return;o.preventDefault();const i=ie(this,Ie,"m",Et).call(this,o);if(!ie(this,Ie,"m",ln).call(this,i))return;const a=500,r=Date.now(),c=ie(this,it,"f").get("prevClickPoint");c&&r-c.t<=a&&Math.abs(c.x-i.x)<=5&&Math.abs(c.y-i.y)<=5?this.trigger("doubleClick",{point:i}):ie(this,it,"f").set("prevClickPoint",i)}),mi.set(this,o=>{if(ie(this,it,"f").set("hasPointDown",!1),!ie(this,Ie,"m",bt).call(this,o))return;o.preventDefault();const i=ie(this,Ie,"m",Et).call(this,o);this.trigger("pointLeave",{point:i})}),gi.set(this,o=>{if(ie(this,it,"f").set("hasPointDown",!1),!ie(this,Ie,"m",bt).call(this,o))return;o.preventDefault();const i=ie(this,Ie,"m",Et).call(this,o);this.trigger("pointEnd",{point:i})}),vi.set(this,o=>{if(!ie(this,Ie,"m",bt).call(this,o))return;o.preventDefault(),o.stopPropagation();const i=ie(this,Ie,"m",Et).call(this,o);if(!ie(this,Ie,"m",ln).call(this,i)){ie(this,it,"f").get("hasPointDown")&&(this.trigger("pointLeave",{point:i}),ie(this,it,"f").set("hasPointDown",!1));return}ie(this,it,"f").get("hasPointDown")===!0&&this.trigger("pointMove",{point:i})}),pi.set(this,o=>{if(o.button!==0||!ie(this,Ie,"m",bt).call(this,o))return;o.preventDefault();const i=ie(this,Ie,"m",Et).call(this,o);ie(this,Ie,"m",ln).call(this,i)&&(ie(this,it,"f").set("hasPointDown",!0),this.trigger("pointStart",{point:i}))}),yi.set(this,o=>{if(!ie(this,Ie,"m",bt).call(this,o))return;o.preventDefault();const i=ie(this,Ie,"m",Et).call(this,o);ie(this,Ie,"m",ln).call(this,i)&&this.trigger("hover",{point:i})});const n=new fn({defaultStorage:{hasPointDown:!1,prevClickPoint:null}});Ki(this,it,n,"f"),Ki(this,$n,t,"f"),ie(this,Ie,"m",Jr).call(this)}onEvents(){if(ie(this,di,"f"))return;const t=window;t.addEventListener("mousemove",ie(this,yi,"f")),t.addEventListener("mousedown",ie(this,pi,"f")),t.addEventListener("mousemove",ie(this,vi,"f")),t.addEventListener("mouseup",ie(this,gi,"f")),t.addEventListener("mouseleave",ie(this,mi,"f")),t.addEventListener("wheel",ie(this,ui,"f"),{passive:!1}),t.addEventListener("click",ie(this,fi,"f")),t.addEventListener("contextmenu",ie(this,hi,"f"))}offEvents(){const t=window;t.removeEventListener("mousemove",ie(this,yi,"f")),t.removeEventListener("mousedown",ie(this,pi,"f")),t.removeEventListener("mousemove",ie(this,vi,"f")),t.removeEventListener("mouseup",ie(this,gi,"f")),t.removeEventListener("mouseleave",ie(this,mi,"f")),t.removeEventListener("wheel",ie(this,ui,"f")),t.removeEventListener("click",ie(this,fi,"f")),t.removeEventListener("contextmenu",ie(this,hi,"f"))}destroy(){this.offEvents(),ie(this,it,"f").destroy(),Ki(this,di,!0,"f")}}$n=new WeakMap,it=new WeakMap,di=new WeakMap,ui=new WeakMap,hi=new WeakMap,fi=new WeakMap,mi=new WeakMap,gi=new WeakMap,vi=new WeakMap,pi=new WeakMap,yi=new WeakMap,Ie=new WeakSet,Jr=function(){this.onEvents()},bt=function(t){return t.target===ie(this,$n,"f").boardContent.boardContext.canvas},Et=function(t){const o=ie(this,$n,"f").boardContent.boardContext.canvas.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top,t:Date.now()}},ln=function(t){const n=ie(this,$n,"f").sharer.getActiveViewSizeInfo(),{width:o,height:i}=n;return!!(rs(t.x)&&rs(t.y)&&t.x<=o&&t.y<=i)};var ls=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Se=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ce,jn;const Cd={width:0,height:0,devicePixelRatio:1,contextWidth:0,contextHeight:0,data:null,scale:1,offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0,overrideElementMap:null};class xd{constructor(){Ce.set(this,void 0),jn.set(this,void 0);const t=new fn({defaultStorage:Cd}),n=new fn({defaultStorage:{}});ls(this,Ce,t,"f"),ls(this,jn,n,"f")}getActiveStorage(t){return Se(this,Ce,"f").get(t)}setActiveStorage(t,n){return Se(this,Ce,"f").set(t,n)}getActiveStoreSnapshot(t){return Se(this,Ce,"f").getSnapshot(t)}getSharedStorage(t){return Se(this,jn,"f").get(t)}setSharedStorage(t,n){return Se(this,jn,"f").set(t,n)}getSharedStoreSnapshot(t){return Se(this,jn,"f").getSnapshot(t)}getActiveViewScaleInfo(){return{scale:Se(this,Ce,"f").get("scale"),offsetTop:Se(this,Ce,"f").get("offsetTop"),offsetBottom:Se(this,Ce,"f").get("offsetBottom"),offsetLeft:Se(this,Ce,"f").get("offsetLeft"),offsetRight:Se(this,Ce,"f").get("offsetRight")}}setActiveViewScaleInfo(t){const{scale:n,offsetTop:o,offsetBottom:i,offsetLeft:a,offsetRight:r}=t;Se(this,Ce,"f").set("scale",n),Se(this,Ce,"f").set("offsetTop",o),Se(this,Ce,"f").set("offsetBottom",i),Se(this,Ce,"f").set("offsetLeft",a),Se(this,Ce,"f").set("offsetRight",r)}setActiveViewSizeInfo(t){Se(this,Ce,"f").set("width",t.width),Se(this,Ce,"f").set("height",t.height),Se(this,Ce,"f").set("devicePixelRatio",t.devicePixelRatio),Se(this,Ce,"f").set("contextWidth",t.contextWidth),Se(this,Ce,"f").set("contextHeight",t.contextHeight)}getActiveViewSizeInfo(){return{width:Se(this,Ce,"f").get("width"),height:Se(this,Ce,"f").get("height"),devicePixelRatio:Se(this,Ce,"f").get("devicePixelRatio"),contextWidth:Se(this,Ce,"f").get("contextWidth"),contextHeight:Se(this,Ce,"f").get("contextHeight")}}getActiveOverrideElemenentMap(){return Se(this,Ce,"f").get("overrideElementMap")}setActiveOverrideElemenentMap(t){Se(this,Ce,"f").set("overrideElementMap",t)}}Ce=new WeakMap,jn=new WeakMap;var wi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Oe=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Co,He,Xn,Vn,Kr,qr;const{requestAnimationFrame:Md}=window;class zd extends hn{constructor(t){super(),Co.add(this),He.set(this,void 0),Xn.set(this,[]),Vn.set(this,"FREE"),wi(this,He,t,"f"),Oe(this,Co,"m",Kr).call(this)}resetViewVisibleInfoMap(t,n){t&&Oe(this,He,"f").calculator.resetViewVisibleInfoMap(t,n)}drawFrame(){const{sharer:t}=Oe(this,He,"f"),n=t.getActiveStoreSnapshot(),o=t.getSharedStoreSnapshot();Oe(this,Xn,"f").push({activeStore:n,sharedStore:o}),Oe(this,Co,"m",qr).call(this)}scale(t){const{scale:n,point:o,ignoreUpdateVisibleStatus:i}=t,{sharer:a}=Oe(this,He,"f"),{moveX:r,moveY:c}=k0({scale:n,point:o,viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()});return a.setActiveStorage("scale",n),i||Oe(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()}),{moveX:r,moveY:c}}scroll(t){const{sharer:n}=Oe(this,He,"f"),o=n.getActiveViewScaleInfo(),{moveX:i,moveY:a,ignoreUpdateVisibleStatus:r}=t,c=n.getActiveViewSizeInfo(),d=_0({moveX:i,moveY:a,viewScaleInfo:o,viewSizeInfo:c});return n.setActiveViewScaleInfo(d),r||Oe(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),d}updateViewScaleInfo(t){const{sharer:n}=Oe(this,He,"f"),o=O0(t,{viewSizeInfo:n.getActiveViewSizeInfo()});return n.setActiveViewScaleInfo(o),Oe(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),o}resize(t={},n){const{sharer:o}=Oe(this,He,"f"),i=o.getActiveViewSizeInfo(),a=Object.assign(Object.assign({},i),t),{width:r,height:c,devicePixelRatio:d}=a,{underlayContext:l,boardContext:h,overlayContext:u,viewContext:f}=Oe(this,He,"f").boardContent;return h.canvas.width=r*d,h.canvas.height=c*d,h.canvas.style.width=`${r}px`,h.canvas.style.height=`${c}px`,l.canvas.width=r*d,l.canvas.height=c*d,u.canvas.width=r*d,u.canvas.height=c*d,f.canvas.width=r*d,f.canvas.height=c*d,o.setActiveViewSizeInfo(a),n!=null&&n.ignoreUpdateVisibleStatus||Oe(this,He,"f").calculator.updateVisiableStatus({viewScaleInfo:o.getActiveViewScaleInfo(),viewSizeInfo:o.getActiveViewSizeInfo()}),a}}He=new WeakMap,Xn=new WeakMap,Vn=new WeakMap,Co=new WeakSet,Kr=function(){const{renderer:t}=Oe(this,He,"f");t.on("load",()=>{this.drawFrame()})},qr=function e(){if(Oe(this,Vn,"f")==="DRAWING"||Oe(this,Xn,"f").length===0)return;wi(this,Vn,"DRAWING","f");const t=Oe(this,Xn,"f").shift(),{renderer:n,boardContent:o,beforeDrawFrame:i,afterDrawFrame:a}=Oe(this,He,"f");if(t){const{scale:r,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h,width:u,height:f,contextHeight:m,contextWidth:v,devicePixelRatio:g}=t.activeStore,p={scale:r,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h},b={width:u,height:f,contextHeight:m,contextWidth:v,devicePixelRatio:g};t!=null&&t.activeStore.data&&n.drawData(t.activeStore.data,{viewScaleInfo:p,viewSizeInfo:b}),i({snapshot:t}),o.drawView(),a({snapshot:t})}if(Oe(this,Xn,"f").length===0){wi(this,Vn,"COMPLETE","f");return}wi(this,Vn,"DRAWING","f")&&Md(()=>{Oe(this,Co,"m",e).call(this)})};var Vt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Z=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ke,Bn,It,Di,ge,Ve,Un,mt,et,Fn,Zn,bi,el,cs,ds,us,hs,fs,ms,gs,vs,ps,ys,ws,tl,nl,ol,mo;class Id{constructor(t){ke.add(this),Bn.set(this,void 0),It.set(this,new WeakMap),Di.set(this,[]),ge.set(this,[]),Ve.set(this,void 0),Un.set(this,void 0),mt.set(this,void 0),et.set(this,void 0),Fn.set(this,void 0),Zn.set(this,new hn),bi.set(this,!1);const{boardContent:n}=t,o=new xd,i=new Qr({viewContext:n.viewContext}),a=new Sd({boardContent:n,sharer:o}),r=new Zr({viewContext:n.viewContext,sharer:o,calculator:i});Vt(this,Bn,t,"f"),Vt(this,mt,o,"f"),Vt(this,Ve,a,"f"),Vt(this,Un,r,"f"),Vt(this,Fn,i,"f"),Vt(this,et,new zd({boardContent:t.boardContent,sharer:o,renderer:r,calculator:Z(this,Fn,"f"),beforeDrawFrame:c=>{Z(this,ke,"m",nl).call(this,c)},afterDrawFrame:c=>{Z(this,ke,"m",ol).call(this,c)}}),"f"),Z(this,ke,"m",el).call(this),Z(this,ke,"m",mo).call(this)}isDestroyed(){return Z(this,bi,"f")}destroy(){Z(this,Ve,"f").destroy(),Z(this,Un,"f").destroy(),Z(this,Fn,"f").destroy(),Z(this,Zn,"f").destroy(),Vt(this,bi,!0,"f")}getSharer(){return Z(this,mt,"f")}getViewer(){return Z(this,et,"f")}getRenderer(){return Z(this,Un,"f")}setData(t,n){const{modifiedOptions:o}=n||{},i=Z(this,mt,"f");Z(this,mt,"f").setActiveStorage("data",t);const a=i.getActiveViewSizeInfo(),r=i.getActiveViewScaleInfo(),c=Ar(t.elements,{viewWidth:a.width,viewHeight:a.height,extend:!0});o?Z(this,et,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:r}):Z(this,et,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:r}),Z(this,et,"f").drawFrame();const d=Object.assign(Object.assign({},a),c);return Z(this,mt,"f").setActiveViewSizeInfo(d),{viewSizeInfo:d}}getData(){const{data:t}=Z(this,mt,"f").getActiveStoreSnapshot();return t}use(t,n){var o,i,a;if(Z(this,It,"f").has(t)){const m=Z(this,It,"f").get(t);if(m){(i=(o=m.middlewareObject).use)===null||i===void 0||i.call(o),m.status="enable",Z(this,It,"f").set(t,m),Z(this,ke,"m",mo).call(this);return}}const{boardContent:r,container:c}=Z(this,Bn,"f"),d=Z(this,mt,"f"),l=Z(this,et,"f"),h=Z(this,Fn,"f"),u=Z(this,Zn,"f"),f=t({boardContent:r,sharer:d,viewer:l,calculator:h,eventHub:u,container:c},n);(a=f.use)===null||a===void 0||a.call(f),Z(this,Di,"f").push(t),Z(this,ge,"f").push(f),Z(this,It,"f").set(t,{status:"enable",middlewareObject:f,config:n}),Z(this,ke,"m",mo).call(this)}disuse(t){var n,o;const i=Z(this,It,"f").get(t);i&&((o=(n=i.middlewareObject).disuse)===null||o===void 0||o.call(n),i.status="disable",Z(this,It,"f").set(t,i),Z(this,ke,"m",mo).call(this))}scale(t){const n=Z(this,et,"f"),{ignoreUpdateVisibleStatus:o}=t,{moveX:i,moveY:a}=n.scale(Object.assign(Object.assign({},t),{ignoreUpdateVisibleStatus:!0}));n.scroll({moveX:i,moveY:a,ignoreUpdateVisibleStatus:o})}scroll(t){return Z(this,et,"f").scroll(t)}updateViewScaleInfo(t){return Z(this,et,"f").updateViewScaleInfo(t)}resize(t,n){const o=Z(this,et,"f").resize(t,n),{width:i,height:a,devicePixelRatio:r}=t,{boardContent:c}=Z(this,Bn,"f");c.viewContext.$resize({width:i,height:a,devicePixelRatio:r}),c.overlayContext.$resize({width:i,height:a,devicePixelRatio:r}),c.boardContext.$resize({width:i,height:a,devicePixelRatio:r}),c.underlayContext.$resize({width:i,height:a,devicePixelRatio:r}),Z(this,et,"f").drawFrame(),Z(this,Ve,"f").trigger("resize",o),Z(this,mt,"f").setActiveViewSizeInfo(t)}clear(){const{boardContent:t}=Z(this,Bn,"f"),{underlayContext:n,overlayContext:o,viewContext:i,boardContext:a}=t;n.clearRect(0,0,n.canvas.width,n.canvas.height),o.clearRect(0,0,o.canvas.width,o.canvas.height),i.clearRect(0,0,i.canvas.width,i.canvas.height),a.clearRect(0,0,a.canvas.width,a.canvas.height),Z(this,ke,"m",tl).call(this)}getEventHub(){return Z(this,Zn,"f")}onWatcherEvents(){Z(this,Ve,"f").onEvents()}offWatcherEvents(){Z(this,Ve,"f").offEvents()}}Bn=new WeakMap,It=new WeakMap,Di=new WeakMap,ge=new WeakMap,Ve=new WeakMap,Un=new WeakMap,mt=new WeakMap,et=new WeakMap,Fn=new WeakMap,Zn=new WeakMap,bi=new WeakMap,ke=new WeakSet,el=function(){Z(this,Ve,"f").on("pointStart",Z(this,ke,"m",cs).bind(this)),Z(this,Ve,"f").on("pointEnd",Z(this,ke,"m",ds).bind(this)),Z(this,Ve,"f").on("pointMove",Z(this,ke,"m",us).bind(this)),Z(this,Ve,"f").on("hover",Z(this,ke,"m",hs).bind(this)),Z(this,Ve,"f").on("wheel",Z(this,ke,"m",gs).bind(this)),Z(this,Ve,"f").on("wheelScale",Z(this,ke,"m",vs).bind(this)),Z(this,Ve,"f").on("scrollX",Z(this,ke,"m",ps).bind(this)),Z(this,Ve,"f").on("scrollY",Z(this,ke,"m",ys).bind(this)),Z(this,Ve,"f").on("resize",Z(this,ke,"m",ws).bind(this)),Z(this,Ve,"f").on("doubleClick",Z(this,ke,"m",fs).bind(this)),Z(this,Ve,"f").on("contextMenu",Z(this,ke,"m",ms).bind(this)),Z(this,Un,"f").on("load",()=>{Z(this,Zn,"f").trigger("loadResource")})},cs=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.pointStart)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ds=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.pointEnd)===null||n===void 0?void 0:n.call(i,t))===!1)return}},us=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.pointMove)===null||n===void 0?void 0:n.call(i,t))===!1)return}},hs=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.hover)===null||n===void 0?void 0:n.call(i,t))===!1)return}},fs=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.doubleClick)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ms=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.contextMenu)===null||n===void 0?void 0:n.call(i,t))===!1)return}},gs=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.wheel)===null||n===void 0?void 0:n.call(i,t))===!1)return}},vs=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.wheelScale)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ps=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollX)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ys=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollY)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ws=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.resize)===null||n===void 0?void 0:n.call(i,t))===!1)return}},tl=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.clear)===null||n===void 0?void 0:n.call(i,t))===!1)return}},nl=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.beforeDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ol=function(t){var n;for(let o=0;o<Z(this,ge,"f").length;o++){const i=Z(this,ge,"f")[o];if(((n=i==null?void 0:i.afterDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},mo=function(){const t=[],n=Z(this,It,"f");Z(this,Di,"f").forEach(o=>{const i=n.get(o);(i==null?void 0:i.status)==="enable"&&(i!=null&&i.middlewareObject)&&t.push(i.middlewareObject)}),Vt(this,ge,t,"f")};const Ad="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MDc6MjYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjliMGM0MzI2LWU4ZTQtNDlkNy04MmUzLTgxODkwYTE2ZmU1YSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjMzOGFhZDBmLWZkZjMtODE0MS1iMTZmLWNiZWIzNTQyYTJhMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUwODAxNzc1LWZlNGEtNDQyMy05NDQ3LThkYWRhNzZhYTllOSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTA4MDE3NzUtZmU0YS00NDIzLTk0NDctOGRhZGE3NmFhOWU5IiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjA3OjI2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWIwYzQzMjYtZThlNC00OWQ3LTgyZTMtODE4OTBhMTZmZTVhIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7W6XrzAAAGLklEQVRYhb2Xf2iUdRzHX/txtfXLplZ6Wblm6fzRmG6r7Uou1AxKRjQKYUqgaLBACFogppcK1h8aLRkMSYaJIA5hYMomZpskEfPOufCaDpZ6t7rbre263U3vzn3643meu+eu3XNzvz7w4bbdc/e89nl/Pu/v50HUCAQCx1tbW0uAx4CHgSwggxkKERkziUQif2mQ0WjU53a7vwSeBB4BTEDmTICmBBwYGDivVlDjlFAo9KvT6dwIPAHkANkq6MwDXr169bCISENDg9TX14s+BgcHf2hubi5mBmRPCXj06NFPREQ6OjoEkPLycrl06VIMMhKJeFwu1xdMs+wpAYuLi9eIiIyOjkpeXp4AAsj27dvF7/fHQIPB4C9dXV0fME2ypwQEXvX7/bdFRNauXRsDBMRkMsnhw4cTZB8YGGhsamp6hSmW3Qhw1Y0bN86LiNTW1iYAallWViZtbW162ftcLtdO/i/7tAAWtba2ficicvLkyTEBtdy6dasMDg7GQIeHh9s7OzvfBx5nkrIbAS7du3fvxyIiPT09hoBa1tXVJcv+fWNj4zLgUeAhJiC7EeDLwOsiMioisnDhwnFBrlixQi5evKiX/c6tW7c+R5E9lweU3QjwReDV/v7+bhGRqqqqcQFquWnTJvH5fHrZLzocjkoSZU9bTSPA54GV165daxYROXDgwAMBannw4MFk2RsaGhqWME7ZjQDNwIrTp09/JSLS0tIyIUBACgoK5MKFCzHIcDj85+3btz8FZpFGdiPAZ4DCmpqaTSIiPp9vwoBaVlVVidfr1ct+/sqVK+9iILsR4FzgJcASDoeHRUSKioomDQnI/v37E2T3+Xz1hw4dWjSW7EaAeUA+UNbX12cXEdmyZcuUAAJiNpvlzJkzetl73G53rVrN2EmUCjATuA9EgYjL5eoGKCkpGatNHijmz5/Pxo0b2blzJ2azOfZ3k8lUYDabv45Go/Y7d+6sIY0VZQOjGqDT6bxeWlrKqlWrJgRlsVhYv349FRUVWCwWcnJyEt4PBoOuoaEhu9frvdzR0fHTtm3buolvRpLqe3OBp4EllZWV74mIRKNRyc3NTSvf7Nmzpbq6Wk6cOCFut1uSY2RkJOB0Ou3Nzc3Ha2trPwPWAGXAEuBZFFPPAbKMevBhYA6wCKgIBoP9IiKrV682hLPZbP8DEpH7vb29N1paWn602WwHFyxYsAX4EKgE3gIsQBFQgOIeT6j3z0wFqEkc60OPx9Odn58/t6SkhPb29jFLbrVa2bNnDwBer7fv5s2bPQ6Ho7upqcnZ1tbmASJq3gPC6utdYESXYfWeo6mkBaUHRQ/odrv/yM/Pt5SWlqb8kAbncDh+W7lyZYN683u6DOvAwipsOOnniA4wZf9lqhdoVYzY7fbrQMpBsdlsWK1WRkZGAtXV1d8D/wA+wKNLr5o+YEC9ZggIAEHiFbyfDhCUCcoFngIWFxYWrtMaat68eQl9V15eHmu2+vr6OuAd4A2gGFgMLERp/mdQ+noWyuadi9Jr2aQ4k42GBPXDs1Ga97WhoaFbIiIbNmxIANTWq87Ozp9VuApgGfACihPkoRjwI+p3mlSgtA9ZRkYNYwwKJBr2rl27sFqthEKhwZqamqOAX5f/AsPE5btLvM/GJWO6yFb/82eBonPnztWJiJw9e1YAWb58eUzaI0eOfAO8CbwCPIfiZZN+eEoncSaKLPOApbt3794uIuL1ehOktdvtF4C3gRKURXcOSn9lTRRsvIAZKI4+l/gjQFREZMeOHSIiEggE+tetW/cRitkuRhmERxnnxjxZQFDWnzzURwCv1+vUHxHHjh37lri0C1Am9KGpgDMC1G8SQnxxCHs8Hqf2RldX10+bN28+i+JjwyT62KSaP13oAfWTHO7t7f0dIBQK/b1v375GlEnVjPYuyoQaHlNTDahVMALca29vdwBcvnz5+KlTp26OATft1UuODBS7yEOxj0K/329HOSWWopjxlE1tchhtM7FriPfgXSDDbrfXo0gbJr4QzIi0WiRPYBbKZJrUV23b0dYn7XSYcsBkS9EiO/k6lApq1cwiPjzaAM1Y9cYC1G6uAWrPCtrvMwoHqU02Q5caIEzj1KaS+D+vIjxtLug31gAAAABJRU5ErkJggg==",il="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MzE6MjMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0MTBhYjUzLWM0ZjEtNDVhNS04MjhkLTIxOTczOWFjOTk3MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBkMDNmNjM5LTE5MzctY2Y0MC1hMTg0LTIyMjg0NzczNWNmYSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjgyYjQwZGRmLWE0ZGEtNDY3MC1iYzc2LTBhYjY3ZmI5M2I0ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODJiNDBkZGYtYTRkYS00NjcwLWJjNzYtMGFiNjdmYjkzYjRlIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjMxOjIzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjQxMGFiNTMtYzRmMS00NWE1LTgyOGQtMjE5NzM5YWM5OTcxIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz57vRudAAAEk0lEQVRYhe3ZW0jbVxzA8e8/MX+NYnG9uI4xE3bvoLt0FzradRfGBtsYo32YdAhb6WQyBqV7KOylpYjzZShDGfjmyxgbgjjwyRm16SYMhgiNKDhbL3VtNF4xJOnf3x7+59i/Wf4aTbInf3AwJMdzPjnnf/n9/jFEhGzDMIxMb3uAIsDs6ek5urS05Dtz5syE+uwekAQS6u89YD19gC0NIpJ1c8GZQHlXV9fJRCIxGo/HxxoaGj4CngWOAEGgEihXfT07MeQC3MB1dna+lkgkRkXF6urq3xcuXPgUOAE8DzwGPOiGLARwEy4ej4+JiITD4elr167NiIgsLi7eqq2trQPeBI4Bj7sh8w10xZmmeds0zdn+/v5/RERisdjUuXPnvgLeAl50Q+YTaAA+oKy7u/uE3laNAwSQ4uLiu6FQ6G4G5DG13YeAMjWWkU+gBygJhULHNe769etTTpwDGXUiz58//yXwujp5qoAHgBLAk0+gNxKJHEulUiMKN2ma5gwgPp/vjhOXjlxYWJisq6urBV5RW30IKAW8eQPGYrGjlmXdEBEZHBy8aZrmFCCmac729fVtAHt7e6MO5N2+vr47IiJLS0s3L126dBZ4Sh2LZUBRwVdwYGBgVuwOYh/zsoF0bnPBVzDTMRgOh6dFhROokSIi8/Pz0+pEeaPQx+DGWdzV1XVSX2LcgCIic3NzMzU1NV8D7wIvq9WrLNRZvOk62NHRccqJTAdGo9Hb1dXV3wAfYt9VjgAPFfI66EQWAxU9PT0fuwEvXrzYBJwF3gFeAAJAhfrfrO4k/7lxZxnr2JlJqry8POnWyePx6H4JR0vhktVkHGOXQI20SkpKLLcOhmGsA5YCaZiVLS5XoADi9XpdkznDMERhnE0fCgUHZhvOW+CO4/8A5hR7wFxjD5hr7AFzjZyBlmVlrOYdYaS1HUUuQA/gWV9fd51URDyqn1c1j6MVFGjoidfW1oq2ABrYj0V82OmVzwHNajVdB88C5wOKTdM87NaxsrKyQsFKHC2BnTDo+/TWt8Bd5INeVC44NDT0xXYZdXNz8w/AaeyS8yjwCPdzQu92ht2m/OUjIyOfS1pkAoqItLS0fA+8D7wKPA0cxs6qC1O4T0xMfKYnb21tnXEDNjc3z+nXbW1t3wFvYz9dCAL7KUThHovFPtGTNjU1jQFSX18/lg68cuXKLUAaGxs3vkB7e/u3wHHgCQpUdnpTqdQvesJgMDisUVevXh3Xry9fvnxTv66qqprQ/cfHx/vVNj/J/couv0DAv7q6+pMDeYPNSalkwkUikX7s4ukl4FHgAODPN1CXnPsWFxd/dCAjW+GGhoZCwAfYpeczwMPAPjVW3gv3IvXN98disZ8dyBGNCwQC4/r94eHhfuy6+JS6zATUCeJXY+W9cNfIUuDAwsLCr05kIBDYeBQ8Ojr6h8Lpx25BtbWlGpfv62BG5PLy8m+SFpOTk38C76mVe84NVyhgOvLgysrK7xoXjUb/Uqt2XG1rEDiYCbcd0MgwsWtk+J1EI03An0wmw5Zlefx+/2n1eRKIO5r+rWTTpFsZ/gWFrGMmeObuqwAAAABJRU5ErkJggg==",Td="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAEvUlEQVRYhc2Y20/cVRDHP8v+uKzAWkpDCtZq8BYhJkq8PBoJxgj7I2m0ryaSyFN9IT74pI8+8WJiggRj/APApFkSTGRJ+qKGUiyxbGPEWsUSuVhYC12Wy8+HmeMeYPe3d3WSye/k/M7le+bMzJkZ+J9ToEJreGVYN+vihcytstjQocUlAw0WCSoIVCv3Ae8CXwIt+u8XHVeOG8qLqgAHqAFCQCNwGugCthBJGd7S/tM6LqTzHI5KuqzgaoAHgEvAtwrkG2AG8FzXvep5nue67lX9N6P/PR1/SefXlBtkFXKNDUA/RyX1D9uUbYzOb9D1ygbSQU7eDMxhSSsSiVz3AxiJRK57nuf19/fPad8coqONFCBJPyUOIKc1OvcbgiY9ICDT8+0DHge2gR0gBeyTtviM5HeKAGlrrfMZVwhdAVaAr4F3KNF4gkA9cBbowOc68+3LwDn1Mhdy4/OcYk54nPr6+m54nofruvPa9SFQ6wfQTweNgTwInAGuQWk6mEUvHwb+Au4Dexx7ffK9+0q+CHWIBIOZ9skHYKWfK9tQ8gZoLDjIyWCg3ORY+2T8aYOyg4EaRIFrkCs4QU1NTSvabC20zyIDzuyfkYzEahHX8jHwE/LwXwHeJ4P7KIVIu5ouxFDC+HgLAy4MfEF2v1UpgOezATSiNVf6EvAWsD01NXVtdnb2bk9Pz81sp/q3KIi8t83Ae4DX0tJy0z7t8PDwD4FAYIX/WILVwKMAzc3Nu/agoaGhzmg0ugcsV0hIvlSNoH8IuIiebHJycrls4sotwaxGYvueAPAjEg3jum79yMjIr5WUjFLOxMpBIopWoBN4GfhOJ+4NDg4ulVt6i4uLm7r+BvAscA4fCXrAAfJQJ5Fg8gPgMuCMjo62d3V1LW1sbKRKlpXSxMTEmjZ/5qQrOwHwUAGmkIjiHhJdfKrM/Pz8Y+3t7RvT09Ob5QAYi8X2tbmke2cEZwAaCdoAt5QvIzEbiUSitbe3tyoej++UCnBhYSGkzdu6d1aQxkgOkfwgieQMCeCu8iwSnpNKpcIdHR3BZDJ5UCy4SCSyvL6+/giiSou67wE+eYmhAKKkIaAJUdynkdflNcQF3dFTpooxjmg0aozDAz4DXkB8bxPy1OYM7QzIOuAU0AY8pQu9CrwJ3AK8UCj0RyHgZmZmli1w3wOvAM/oHo1kiZiygbSDh7PAE8DzQA/wBqKnnuM4a2NjY7dygbtw4cICRy31deBFJA09o7eWsU7kJ1KTLJmyRyOSn5zS70fAkwBtbW2/DwwMHHR3d9d3dnY2rK6u7o2Pj2/GYrH9eDzurK2tndM1vwI+QXT7T2BTD5skQz6SCyAcLRoZkGEFGQbeRqpbubK+BPA5MI14h00L3I6Cy2h4+eQbJsKuRa6iQcGFFfB5oBt4DpFsI+Ky7iDBxW3gBhBH/GtC+R7i1lKk3UxRAG2QpvxWr0AbtB3SA5jkx36djH/dVlDbyibN3M8GDvJPyI2PSulixm/u6kZ1OQCaJ/S+tndJX6tvsFBIxcCUdA3vW5ubxMrObc0hDMhd/Rqp5QQHxeW8dubnHGM7tzVv/IECMlxQ/bpcRfRMqaNRheNcUGG9XFWDACfzWs/6Fl3t/xtO//8gpbCORQAAAABJRU5ErkJggg==",Nd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAER0lEQVRYhe2YT2hjRRjAf8lL22xsNsm6EWKrSKvuIkIh+O9QRFxEW18KUsoe7FHoRaWCN1FPetOrIHgVKS0q9P5OxaJbodkalgVrtVZjS7Ntd02z6abPw3yzmaT585q+elj2g2HmvZn35jffN/PNNwP35R6XgM/fuif4n+dO2klQvgsaZRc4NJJvoJbHdhrIAkJAN2ADHwFfAw9J3ZoB/b9I0AA6A0SBc0Aa2EVpSqddeZ+QdmfkO+u0gIPSQQR4HfhRQH4AHMDNZDJXXNd1M5nMFalzdB3wJTAOPAD0yEB9066G6wXepVZTd5MpTdporZ6jVqsatmMJoTR3HvgJQ1u2bS+3ArRte9l1XXdsbGyJo1pdBN6Wf3d3ChlAmSQO9LeC8fquQRpDWaerHWSjSr1iu4BkJyOsF9u2s67rkslkluTVxygltAVsJBZqdCngEj5osIlW+4EYytRNF04jeu3vulCT+7QkLH20dEOhumft97pQI4s3+iiRSPwtxVSbd39J8eEGvzFXc1NAs8KSFAZeBt4AHgNeBFDWObkEAne7HAK2gT2gCFQatdca1GbtBj4E3veFprVYVLXXcg4GqM6588BbAMlkcm1qamqzr6/v6ikBet5RgiizJoDPAXdgYGDZXHkzMzPrrk9CdRWngUeAsxxdCzVwpgZ/BigWiz1mo4mJif7jqMajeJrU5hywgGvAej6fvzA0NLThN1Eul9uT4g5VTbYFNKUIfAbsZ7PZvuHh4Wt+As7Ozu5IcY2j219TQB0NV4A7qODgO4CFhYWLg4ODOb8AHccpG4A68m6pRQ1YAQ6A28A+8BXwBcDq6upTqVTquh+AuVyuW4q/opRRaQdZD1gCbgE3ge+BT4HdfD7/ZDwe/z2bzRY6hRsfH1/e3Nx8FDX/sgbgoZfvg6jo4ixqW7oIPA+8CrwHrAJuJBLJd+JaHMf5k6qmPgGeQe1SCenXk0/U21xcIC8AzwGvAJPAEuAmEon1xcXFba9w8/Pz5oqdB14CnpY+oij35km0qwmjwqAU8ISM9hIwBeQA17KsG9PT07+1gxsZGdmgdqW+BjwLDAAPoo4ALU+W9arVwWoIpXp9kouKZpPAO8AwQCwW+2d0dLQ0OTkZSafT0UKhUJ6bm9t2HKeysrIS3tra0g7+KvABUJC0g5rrJdRcbLpImtleRzYashc1P2OSXwbebDVykX3gW+Ab1AHqhuQ3pe6AJlFMO0CoPROHDcio5I8DL1A9C8dQbmod+APYAK4DvwjQnsDdErgyVTfTEaCG1GFYGHXG7TVSo2OkdvhlAflXoHSuNdfStFqaRhEi2kfdprrj6M5LAt0I8EDaaMdflPal48CB95hMr3Bt8h4jD0kyL5E0pN6dysZzW7N2AqjbmhdIZjJvufTOpE19x3g+9s1XJ/ck5tVbfdhu+rxDfLiSO+lFToCjZwrXyH2/0Lwv95z8B1jAqXmDnj4YAAAAAElFTkSuQmCC",Dd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAIiklEQVRYhe2YW2yUxxmGn7W96zXGNnZsr2FJHQyYBHNIU1ttAqVUVjlJUAtxQyUXhKgQktUDdSUkuEDtBVJ9UQXRC0RJRblrq/SCIARpFImWQ8VBIZQinJpQYozNyWaxiw/rfXsx3+z+6xNOe9tPGv2nOTzzffPPvDMhSXwJC1nKAXIDV/9ellLAqF1T9o5A2Ry7J5A/Fbh3mUMh8qYJ5kHCQATID6QIkBcAHAVGgKFAStq33EB53/ao5Rm064i9g0CmqcDyrNICYCZQBJTYdaa9j1jelDUwCAwAz4F+ex61DhZauXzr1CDwDHhq1wFg2Do1KWAo0NsCAyoDKoGYXcuBWdZY1PKnzAsDQB/wBOg1yKTVN8vqmoHz6nOgC7gHdFrbCasrNRFgyMCj5qVXgDlANfAaMA/4ir2rMI+MtSHgEdAN9BjsiNVZYR0sNq8+AtqB69Z2MuDBcYA+pAXW0yoDWgTUWXrd8k1l+cBcSxjIIBlPB63G8uUB/8Z57znwAkgGAX1YC4BSK7QIWA7UWwoDJJNJzp49y4ULF2hvb6e7u5tEIkFhYSGVlZXMmzePhoYGNmzYQElJCVZv2tPt7e3s2bOHvr4+9u3bx/r16+PWjg/zQ9x4BEk+5UkqklQt6ZuSdkn6jaRbMhsYGFBbW5uWLVvmp5MpU3V1tVpbW9XV1aWgbdy4MZ2npqbGvx6W9DtJ35e0RFJREDBX0gxJcUnfkPQDScck3fGlz549q7q6ummBjU2xWEzvvfdeGvCtt95Kf6uoqAiyfyBpt6SvSZrlAUOSIpLKJS2X9D1Jv5Z025d69913FQqFJmy8rKxMS5YsUUNDg5YvX67Zs2dPCrpjxw6NjIxoxYoV6XdVVVVBwI8l/UTS1yWVesBcC+18SRsk/ULS33yJtra2CRtramrSiRMn1NXVpWQyKUlKpVJ6+vSpTp48qZ07dyo/P39cua1bt6q+vn4ywL9IapX0tqQyDxiRFDPq3ZL+JCklSadOnRrXwMKFC3X69GlNx65du6aVK1eOqyMYjTGAf50IsNC8t1FSm6TPJOn+/fuKxWJZFb/zzjvjBvx0bO/evQqHwxNG4mUe9MtYMZk5bwHA4cOH6enpSc9BixYt4uTJk5SVlflXfcBN4DFuapoHLPQfz58/z9WrVwmFQsTjceLxOHfv3uUlNlZcpFeMEtzsXg2QSCQ4duxYulQoFOLQoUNBuE7gvAE+x82b/VZHyblz52hsbCSZTL4MCGWrqUECq0gQsBi3ts4B+PDDD3n48GG61OrVq1mzZo1/fGZw54HbVmGV1bMAWPbRRx9NC24CwD7cajLiAXNwIS7ELW3lAGfOnMmqZPv27cHHvwM3gH8AnwH/wnn0C+AuwLZt25g/f/5L4cLhMNu2bfOPnbh1+xkZ9UMebvmKGmQEoLOzM11JQUEBK1eu9I/JAFAPTqnk4hTNY9xS1V5TU1N7+fJlOjo6SKXS+jPLJFFUVMTixYsxmJtW/inOi2nAXDI/C0BWeMvKyojFYv6xz1LCKhnCRSEBPMCFfBaQKi0tfb2+vn5qFzp7AnwCXAM+t45mAUJGfgMwOpoWtIRCWZ/89BB8TuJ+lG5cNEatkXYgjtN+BYG2ktaxBE4U3AP+iRsud3EeHCTwk6Ss0IhvtaKiIk3Q19dHb28vhYWF4H6mYtxwiBrQIE4aPTHgIVzoO3E/TzlOV4YD3/stj9eMPj2xzg4HAYMSPQnkxePxNGB/fz+XLl1iy5Yt4HTeq+aZTtyA9h18Yb33G6aRQBqyDiUNLihmH1q54LAZ9ZHKISPRn1loaGxsJGjHjx8PPi6xtAgnNufgVHcRmf1J2DpTiJsjvYout3c5gQ49Ns89s3fpOdB70I+Hx7iBXrV27VqKi4tJJBKAm3auXLmCDfpy4G3rZSHur/aSPg83BCpx24MFuNUlbnkHcGMubEDdxpG0lBn8AcBBsgfsVysqKti6dStHjhwBYGRkhJaWFs6dO0ckEgGYj9v0xIA71rkha7jUgBYCb5hHGRoaIj8/f4Z5s8jafUpmN/diLBwAkmZKWiipSdKvJN2VpI6ODhUVFWUt7Js2bdLAwMBYLdAt6VNJlyV9IumLsRkOHjyo2tparVixQrdvp2Xmn00YrJI0R05VBRV+GjAiqcoUxA8lnfI1HD16dJz6WLVqla5fvz4tFdPZ2anm5uas8s3Nzf7zp5J+LmmNpFcl5U8GmCupWFKtpO9K+qWkG76W3bt3j4OMRqNqaWnRhQsXNDQ0lAWVTCZ169YtHThwQFVVVePKtrS0+Kw3pgsYso+Vkuol7ZD0W0ldvsHW1tZJZXxtba0aGxvV1NSkdevWaenSpYpGoxPmXb9+vXp6ejzgx5J+ZiGeLSk8GaD34ky5Hd23JP1I0h8kPQmGu7y8/L/aNEUiEe3fv1/Dw8Pp6Es6KqlZ0puSXpHbVU4KiPVglqQFkr4j6aeSfi/pvq/13r172rVrlyorK6cFFo1GtXnzZl25ciU4Ch5J+qOkH0v6tqTXzDk5EwGGlNFjOWQOd8px4vUN4E3cpn2pz/jgwQPef/99Ll68yJ07d+jt7WVwcJBIJEJJSQlz586loaGBTZs2UVdXF5w0OoDLwFWcbPsct6r04+bRLHEYCoWyAD1kBDfHleHmsxrccccS3NFHNV/eenBy6iZwCycMOnHz5wBuDh2nyyY6H0zhFmoF7vtxk+l9q3ieQfrDo8msF7cy3cN56g7ZWnKcep7IxnrQmz+wHKu2K3EKJWbPpWSUTQ4ZtRJc23sC6ZGB9ZM52JwcboIQjzUvZvNxYfeHlyVkZFcBbux6wKA6ShjoM5yM8uH0Xpuy8ekAQuZc2W8P8nEei9p9mMmPgAfJHO0O27e0lHppw9MEDJo//A4eoE91iB48SJ80lFMB/t/+V/sPGZfTmtMFR4EAAAAASUVORK5CYII=",Ld="change",Pd="cursor",Rd="ruler",Od="scale",kd="select",_d="clearSelect",jd="textEdit",Vd="textChange",Bd="contextMenu",bs="selectInGroup",Es={CURSOR:Pd,CHANGE:Ld,RULER:Rd,SCALE:Od,SELECT:kd,CLEAR_SELECT:_d,TEXT_EDIT:jd,TEXT_CHANGE:Vd,CONTEXT_MENU:Bd,SELECT_IN_GROUP:bs,SNAP_TO_GRID:bs},de={};Object.keys(Es).forEach(e=>{Object.defineProperty(de,e,{value:Es[e],writable:!1})});var Li=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},De=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},tt,Pi,xo,Wn,Ei,cn,al,sl,Ot,Ss,Cs;class Fd{constructor(t,n){tt.add(this),Pi.set(this,void 0),xo.set(this,void 0),Wn.set(this,null),Ei.set(this,null),cn.set(this,{auto:Ad,"drag-default":Td,"drag-active":Nd,"rotate-0":il,rotate:Dd}),Li(this,xo,t,"f"),Li(this,Pi,n.eventHub,"f"),De(this,tt,"m",al).call(this),De(this,tt,"m",sl).call(this)}}Pi=new WeakMap,xo=new WeakMap,Wn=new WeakMap,Ei=new WeakMap,cn=new WeakMap,tt=new WeakSet,al=function(){const t=De(this,Pi,"f");De(this,tt,"m",Ot).call(this,"default"),t.on(de.CURSOR,n=>{var o;n.type==="over-element"||!n.type?De(this,tt,"m",Ot).call(this,"auto"):n.type==="resize-rotate"?De(this,tt,"m",Ot).call(this,"rotate"):typeof n.type=="string"&&(!((o=n.type)===null||o===void 0)&&o.startsWith("resize-"))?De(this,tt,"m",Ss).call(this,n):n.type==="drag-default"?De(this,tt,"m",Ot).call(this,"drag-default"):n.type==="drag-active"?De(this,tt,"m",Ot).call(this,"drag-active"):De(this,tt,"m",Ot).call(this,"auto")})},sl=function(){_i(il).then(t=>{Li(this,Ei,t,"f")}).catch(t=>{console.error(t)})},Ot=function(t){if(De(this,Wn,"f")===t)return;Li(this,Wn,t,"f");const n=De(this,cn,"f")[De(this,Wn,"f")]||De(this,cn,"f").auto;let o=0,i=0;(t.startsWith("rotate-")&&De(this,cn,"f")[De(this,Wn,"f")]||t==="rotate")&&(o=10,i=10),t==="default"?De(this,xo,"f").style.cursor="default":De(this,xo,"f").style.cursor=`image-set(url(${n})2x) ${o} ${i}, auto`},Ss=function(t){var n;let o=0;t.type==="resize-top"?o+=0:t.type==="resize-top-right"?o+=45:t.type==="resize-right"?o+=90:t.type==="resize-bottom-right"?o+=135:t.type==="resize-bottom"?o+=180:t.type==="resize-bottom-left"?o+=225:t.type==="resize-left"?o+=270:t.type==="resize-top-left"&&(o+=315),o+=ft(((n=t==null?void 0:t.element)===null||n===void 0?void 0:n.angle)||0),Array.isArray(t.groupQueue)&&t.groupQueue.length>0&&t.groupQueue.forEach(a=>{o+=ft(a.angle||0)}),o=ft(o);const i=De(this,tt,"m",Cs).call(this,o);De(this,tt,"m",Ot).call(this,i)},Cs=function(t){const n=`rotate-${t}`;if(!De(this,cn,"f")[n]){const o=De(this,Ei,"f");if(o){const i=document.createElement("canvas"),a=o.width,r=o.height,c={x:a/2,y:r/2};i.width=a,i.height=r;const d=i.getContext("2d"),l=Nt(t);d.translate(c.x,c.y),d.rotate(l),d.translate(-c.x,-c.y),d.drawImage(o,0,0,a,r),d.translate(c.x,c.y),d.rotate(-l),d.translate(-c.x,-c.y);const h=i.toDataURL("image/png");De(this,cn,"f")[n]=h}}return n};const Qe="SELECT",xe=Symbol(`${Qe}_actionType`),Kt=Symbol(`${Qe}_resizeType`),to=Symbol(`${Qe}_areaStart`),Oo=Symbol(`${Qe}_areaEnd`),St=Symbol(`${Qe}_hoverElement`),no=Symbol(`${Qe}_hoverElementVertexes`),At=Symbol(`${Qe}_selectedElementList`),Wd=Symbol(`${Qe}_selectedElementListVertexes`),xn=Symbol(`${Qe}_selectedElementController`),Mn=Symbol(`${Qe}_selectedElementPosition`),Ze=Symbol(`${Qe}_groupQueue`),qi=Symbol(`${Qe}_groupQueueVertexesList`),ko=Symbol(`${Qe}_isMoving`),xs=Symbol(`${Qe}_enableSelectInGroup`),_o=Symbol(`${Qe}_enableSnapToGrid`),rl=2,Hd=4,ll=1,cl=10,Gd="#1973ba",Yd="#1976d21c",$d="#5b5959b5",Xd="#f7276e",Ud={activeColor:Gd,activeAreaColor:Yd,lockedColor:$d,referenceColor:Xd};function Ht(e,t,n){const{borderColor:o,borderWidth:i,background:a,lineDash:r}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.fillStyle=a,e.setLineDash(r),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.lineTo(t[0].x,t[0].y),e.closePath(),e.stroke(),e.fill()}function pa(e,t,n,o){const{borderColor:i,borderWidth:a,lineDash:r}=o;e.setLineDash([]),e.lineWidth=a,e.strokeStyle=i,e.setLineDash(r),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath(),e.stroke()}function Zd(e,t,n){const{size:o,borderColor:i,borderWidth:a,background:r}=n,c=t,d=o/2,l=d,h=d;if(l>=0&&h>=0){if(typeof a=="number"&&a>0){const u=a/2+l,f=a/2+h;e.beginPath(),e.strokeStyle=i,e.lineWidth=a,e.circle(c.x,c.y,u,f,0,0,2*Math.PI),e.closePath(),e.stroke()}e.beginPath(),e.fillStyle=r,e.circle(c.x,c.y,l,h,0,0,2*Math.PI),e.closePath(),e.fill()}}function Ct(e,t,n){const{borderColor:o,borderWidth:i,lineDash:a}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.setLineDash(a),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[2].x,t[2].y),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(t[1].x,t[1].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Ms(e,t,n){const{size:o,borderColor:i,borderWidth:a,lineDash:r}=n,c=t.x-o/2,d=t.x+o/2,l=t.y-o/2,h=t.y+o/2;Ct(e,[{x:c,y:l},{x:d,y:l},{x:d,y:h},{x:c,y:h}],{borderColor:i,borderWidth:a,lineDash:r})}function zs(e,t,n){if(!t)return;const{style:o}=n,{activeColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Ht(e,Ye(t,n),a)}function Is(e,t,n){if(!t)return;const{style:o}=n,{lockedColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Ht(e,Ye(t,n),a);const{controller:r}=n;if(r){const{topLeft:c,topRight:d,bottomLeft:l,bottomRight:h,topMiddle:u,bottomMiddle:f,leftMiddle:m,rightMiddle:v}=r,g=Object.assign(Object.assign({},a),{borderWidth:1,background:i});Ct(e,Ye(u.vertexes,n),g),Ct(e,Ye(f.vertexes,n),g),Ct(e,Ye(m.vertexes,n),g),Ct(e,Ye(v.vertexes,n),g),Ct(e,Ye(c.vertexes,n),g),Ct(e,Ye(d.vertexes,n),g),Ct(e,Ye(l.vertexes,n),g),Ct(e,Ye(h.vertexes,n),g)}}function As(e,t,n){if(!t)return;const{hideControllers:o,style:i}=n,{activeColor:a}=i,{elementWrapper:r,topLeft:c,topRight:d,bottomLeft:l,bottomRight:h,top:u,rotate:f}=t,m={borderColor:a,borderWidth:rl,background:"transparent",lineDash:[]},v=Object.assign(Object.assign({},m),{borderWidth:Hd,background:"#FFFFFF"});Ht(e,Ye(r,n),m),o||(pa(e,we(u.center,n),we(f.center,n),Object.assign(Object.assign({},v),{borderWidth:2})),Ht(e,Ye(c.vertexes,n),v),Ht(e,Ye(d.vertexes,n),v),Ht(e,Ye(l.vertexes,n),v),Ht(e,Ye(h.vertexes,n),v),Zd(e,we(f.center,n),Object.assign(Object.assign({},v),{size:cl,borderWidth:2})))}function Qd(e,t){const{start:n,end:o,style:i}=t,{activeColor:a,activeAreaColor:r}=i;e.setLineDash([]),e.lineWidth=ll,e.strokeStyle=a,e.fillStyle=r,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,n.y),e.lineTo(o.x,o.y),e.lineTo(n.x,o.y),e.closePath(),e.stroke(),e.fill()}function Jd(e,t){const{areaSize:n,style:o}=t,{activeColor:i,activeAreaColor:a}=o,{x:r,y:c,w:d,h:l}=n;e.setLineDash([]),e.lineWidth=ll,e.strokeStyle=i,e.fillStyle=a,e.beginPath(),e.moveTo(r,c),e.lineTo(r+d,c),e.lineTo(r+d,c+l),e.lineTo(r,c+l),e.closePath(),e.stroke(),e.fill()}function Kd(e,t,n){const{style:o}=n,{activeColor:i}=o;for(let a=0;a<t.length;a++){const r=t[a],c={borderColor:i,borderWidth:rl,background:"transparent",lineDash:[4,4]};Ht(e,Ye(r,n),c)}}function Ts(e,t){const{xLines:n,yLines:o,style:i}=t,{referenceColor:a}=i,r={borderColor:a,borderWidth:1,lineDash:[]},c=Object.assign(Object.assign({},r),{size:6});n&&n.forEach(d=>{d.forEach((l,h)=>{Ms(e,l,c),d[h+1]&&pa(e,d[h],d[h+1],r)})}),o&&o.forEach(d=>{d.forEach((l,h)=>{Ms(e,l,c),d[h+1]&&pa(e,d[h],d[h+1],r)})})}function ve(e){return e*Math.PI/180}function jo(e,t){return Math.sqrt(e*e+t*t)}function se(e,t){return t>0?Math.abs(e):0-Math.abs(e)}function ya(e,t){const{ctx:n,viewScaleInfo:o,vertexes:i}=t,a=we(i[0],{viewScaleInfo:o}),r=we(i[1],{viewScaleInfo:o}),c=we(i[2],{viewScaleInfo:o}),d=we(i[3],{viewScaleInfo:o});return n.beginPath(),n.moveTo(a.x,a.y),n.lineTo(r.x,r.y),n.lineTo(c.x,c.y),n.lineTo(d.x,d.y),n.lineTo(a.x,a.y),n.closePath(),!!n.isPointInPath(e.x,e.y)}function ea(e,t){const{ctx:n,viewScaleInfo:o,viewSizeInfo:i,groupQueue:a}=t;if(!a||!((a==null?void 0:a.length)>0))return!1;const r=La(a),c=r[r.length-1];return c?ya(e,{ctx:n,vertexes:c,viewScaleInfo:o,viewSizeInfo:i}):!1}function qt(e,t){var n,o,i;const a={type:null,elements:[],elementVertexesList:[],groupQueue:[],groupQueueVertexesList:[]},{ctx:r,data:c,calculator:d,selectedElements:l,viewScaleInfo:h,viewSizeInfo:u,areaSize:f,groupQueue:m,selectedElementController:v}=t;if(v){const{left:g,right:p,top:b,bottom:E,topLeft:M,topRight:y,bottomLeft:R,bottomRight:C,rotate:w}=v,O=[g,p,b,E,M,y,R,C,w];for(let A=0;A<O.length;A++){const x=O[A];if(ya(e,{ctx:r,vertexes:x.vertexes,viewSizeInfo:u,viewScaleInfo:h})){a.type=`resize-${x.type}`,l&&(l==null?void 0:l.length)>0&&(a.groupQueue=m||[],a.elements=[l[0]]);break}}}if(m&&Array.isArray(m)&&m.length>0){const g=m[m.length-1];if(!((n=g==null?void 0:g.detail)===null||n===void 0)&&n.children&&Array.isArray((o=g==null?void 0:g.detail)===null||o===void 0?void 0:o.children))for(let p=g.detail.children.length-1;p>=0;p--){const b=g.detail.children[p],E=zo(b,{groupQueue:m});if(E&&ya(e,{ctx:r,vertexes:E,viewScaleInfo:h,viewSizeInfo:u}))return a.type||(a.type="over-element"),a.groupQueue=m,a.elements=[b],a}return a}if(a.type!==null)return a;if(f&&Array.isArray(l)&&(l==null?void 0:l.length)>1){const{x:g,y:p,w:b,h:E}=f;if(e.x>=g&&e.x<=g+b&&e.y>=p&&e.y<=p+E)return a.type="list-area",a.elements=l,a}if(c){const{index:g,element:p}=d.getPointElement(e,{data:c,viewScaleInfo:h,viewSizeInfo:u});if(g>=0&&p&&((i=p==null?void 0:p.operations)===null||i===void 0?void 0:i.invisible)!==!0)return a.elements=[p],a.type="over-element",a}return a}function qd(e,t){var n,o,i,a,r,c,d,l,h;let{x:u,y:f,w:m,h:v,angle:g=0}=e;const p=lt({x:u,y:f,w:m,h:v,angle:g});g=ft(g);const b=Nt(g),E=!!(!((n=e==null?void 0:e.operations)===null||n===void 0)&&n.limitRatio),{start:M,end:y,resizeType:R,scale:C}=t;let w=Object.assign({},M),O=Object.assign({},y),A={x:w.x,y:p.y},x={x:O.x,y:p.y},j=Object.assign({},A),z=Object.assign({},x),N={x:p.x,y:w.y},F={x:p.x,y:O.y},H=Object.assign({},N),V=Object.assign({},F),D=(z.x-j.x)/C,_=(z.y-j.y)/C,T=jo(D,_),Q=(V.x-H.x)/C,Y=(V.y-H.y)/C,P=jo(Q,Y);(g>0||g<0)&&(w=Ne(p,M,0-b),O=Ne(p,y,0-b),A={x:w.x,y:p.y},x={x:O.x,y:p.y},j=Ne(p,A,b),z=Ne(p,x,b),N={x:p.x,y:w.y},F={x:p.x,y:O.y},H=Ne(p,N,b),V=Ne(p,F,b),D=(z.x-j.x)/C,_=(z.y-j.y)/C,T=jo(D,_),T=se(T,_),Q=(V.x-H.x)/C,Y=(V.y-H.y)/C,P=jo(Q,Y),P=se(P,Y));let W=(y.x-M.x)/C,X=(y.y-M.y)/C;if(E===!0){if(["resize-top","resize-bottom","resize-left","resize-right"].includes(R)){const L=Math.max(Math.abs(W),Math.abs(X));W=(W>=0?1:-1)*L,X=(X>=0?1:-1)*L/e.w*e.h;const k=Math.max(Math.abs(Q),Math.abs(Y));Q=(Q>=0?1:-1)*k,Y=(Y>=0?1:-1)*k/e.w*e.h;const S=Math.max(Math.abs(D),Math.abs(_));D=(D>=0?1:-1)*S,_=(_>=0?1:-1)*S/e.w*e.h}else if(["resize-top-left","resize-top-right","resize-bottom-left","resize-bottom-right"].includes(R)){{const L=Math.abs(W);W=(W>=0?1:-1)*L;const k=L/e.w*e.h;R==="resize-top-left"||R==="resize-bottom-right"?X=W>0?k:-k:(R==="resize-top-right"||R==="resize-bottom-left")&&(X=W>0?-k:k)}T=Math.abs(T),P=T/e.w*e.h}}switch(R){case"resize-top":{if(g===0)v-X>0&&(f+=X,v-=X,((o=e.operations)===null||o===void 0?void 0:o.limitRatio)===!0&&(u+=X/e.h*e.w/2,m-=X/e.h*e.w));else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){P=0-se(P,Y);const S=ve(g),B=P/2;L=L+B*Math.sin(S),k=k-B*Math.cos(S)}else if(g<180){P=se(P,Q);const S=ve(g-90),B=P/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S)}else if(g<270){P=se(P,Y);const S=ve(g-180),B=P/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S)}else if(g<360){P=0-se(P,Q);const S=ve(g-270),B=P/2;L=L-B*Math.cos(S),k=k-B*Math.sin(S)}v+P>0&&(((i=e.operations)===null||i===void 0?void 0:i.limitRatio)===!0&&(m=m+P/e.h*e.w),v=v+P,u=L-m/2,f=k-v/2)}break}case"resize-bottom":{if(g===0)e.h+X>0&&(v+=X,((a=e.operations)===null||a===void 0?void 0:a.limitRatio)===!0&&(u-=X/e.h*e.w/2,m+=X/e.h*e.w));else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){P=se(P,Y);const S=ve(g),B=P/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S)}else if(g<180){P=0-se(P,Q);const S=ve(g-90),B=P/2;L=L-B*Math.cos(S),k=k-B*Math.sin(S)}else if(g<270){P=se(P,Q);const S=ve(g-180),B=P/2;L=L+B*Math.sin(S),k=k-B*Math.cos(S)}else if(g<360){P=se(P,Q);const S=ve(g-270),B=P/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S)}v+P>0&&(((r=e.operations)===null||r===void 0?void 0:r.limitRatio)===!0&&(m=m+P/e.h*e.w),v=v+P,u=L-m/2,f=k-v/2)}break}case"resize-left":{if(g===0)e.w-W>0&&(u+=W,m-=W,((c=e.operations)===null||c===void 0?void 0:c.limitRatio)===!0&&(v-=W/e.w*e.h,f+=W/e.w*e.h/2));else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){T=0-se(T,D);const S=ve(g),B=T/2;L=L-B*Math.cos(S),k=k-B*Math.sin(S)}else if(g<180){T=se(T,D);const S=ve(g-90),B=T/2;L=L+B*Math.sin(S),k=k-B*Math.cos(S)}else if(g<270){T=se(T,_);const S=ve(g-180),B=T/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S)}else if(g<360){T=se(T,_);const S=ve(g-270),B=T/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S)}m+T>0&&(((d=e.operations)===null||d===void 0?void 0:d.limitRatio)===!0&&(v=v+T/e.w*e.h),m=m+T,u=L-m/2,f=k-v/2)}break}case"resize-right":{if(g===0)e.w+W>0&&(m+=W,((l=e.operations)===null||l===void 0?void 0:l.limitRatio)===!0&&(f-=W*e.h/e.w/2,v+=W*e.h/e.w));else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){T=se(T,_);const S=ve(g),B=T/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S)}else if(g<180){T=se(T,X);const S=ve(g-90),B=T/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S)}else if(g<270){T=se(T,X);const S=ve(g-180),B=T/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S),T=0-T}else if(g<360){T=se(T,W);const S=ve(g-270),B=T/2;L=L+B*Math.sin(S),k=k-B*Math.cos(S)}m+T>0&&(((h=e.operations)===null||h===void 0?void 0:h.limitRatio)===!0&&(v=v+T/e.w*e.h),m=m+T,u=L-m/2,f=k-v/2)}break}case"resize-top-left":{if(g===0)m-W>0&&(u+=W,m-=W),v-X>0&&(f+=X,v-=X);else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){P=0-se(P,Y),T=0-se(T,E?0-P:D);const S=P/2;L=L+S*Math.sin(b),k=k-S*Math.cos(b);const B=T/2;L=L-B*Math.cos(b),k=k-B*Math.sin(b)}else if(g<180){P=se(P,Q),T=se(T,E?P:D);const S=ve(g-90),B=P/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S);const $=T/2;L=L+$*Math.sin(S),k=k-$*Math.cos(S)}else if(g<270){P=se(P,Y),T=se(T,E?P:_);const S=ve(g-180),B=P/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S);const $=T/2;L=L+$*Math.cos(S),k=k+$*Math.sin(S)}else if(g<360){P=0-se(P,Q),T=se(T,E?P:_);const S=ve(g-270),B=P/2;L=L-B*Math.cos(S),k=k-B*Math.sin(S);const $=T/2;L=L-$*Math.sin(S),k=k+$*Math.cos(S)}v+P>0&&(v=v+P),m+T>0&&(m=m+T),u=L-m/2,f=k-v/2}break}case"resize-top-right":{if(g===0)m+W>0&&(m+=W),v-X>0&&(f+=X,v-=X);else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){P=0-se(P,Y),T=se(T,E?P:_);const S=ve(g),B=P/2;L=L+B*Math.sin(S),k=k-B*Math.cos(S);const $=T/2;L=L+$*Math.cos(S),k=k+$*Math.sin(S)}else if(g<180){P=se(P,Q),T=se(T,E?P:_);const S=ve(g-90),B=P/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S);const $=T/2;L=L-$*Math.sin(S),k=k+$*Math.cos(S)}else if(g<270){const S=ve(g-180);P=se(P,Y),T=se(T,E?P:0-D);const B=P/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S);const $=T/2;L=L-$*Math.cos(S),k=k-$*Math.sin(S)}else if(g<360){P=0-se(P,Q),T=se(T,E?P:D);const S=ve(g-270),B=P/2;L=L-B*Math.cos(S),k=k-B*Math.sin(S);const $=T/2;L=L+$*Math.sin(S),k=k-$*Math.cos(S)}v+P>0&&(v=v+P),m+T>0&&(m=m+T),u=L-m/2,f=k-v/2}break}case"resize-bottom-left":{if(g===0)e.h+X>0&&(v+=X),e.w-W>0&&(u+=W,m-=W);else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){P=se(P,Y),T=0-se(T,E?0-P:D);const S=ve(g),B=P/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S);const $=T/2;L=L-$*Math.cos(S),k=k-$*Math.sin(S)}else if(g<180){P=0-se(P,Q),T=se(T,E?P:D);const S=ve(g-90),B=P/2;L=L-B*Math.cos(S),k=k-B*Math.sin(S);const $=T/2;L=L+$*Math.sin(S),k=k-$*Math.cos(S)}else if(g<270){P=se(P,Q),T=se(T,E?P:_);const S=ve(g-180),B=P/2;L=L+B*Math.sin(S),k=k-B*Math.cos(S);const $=T/2;L=L+$*Math.cos(S),k=k+$*Math.sin(S)}else if(g<360){P=se(P,Q),T=se(T,E?P:_);const S=ve(g-270),B=P/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S);const $=T/2;L=L-$*Math.sin(S),k=k+$*Math.cos(S)}v+P>0&&(v=v+P),m+T>0&&(m=m+T),u=L-m/2,f=k-v/2}break}case"resize-bottom-right":{if(g===0)e.h+X>0&&(v+=X),e.w+W>0&&(m+=W);else if(g>0||g<0){let L=p.x,k=p.y;if(g<90){P=se(P,Y),T=se(T,E?P:_);const S=ve(g),B=P/2;L=L-B*Math.sin(S),k=k+B*Math.cos(S);const $=T/2;L=L+$*Math.cos(S),k=k+$*Math.sin(S)}else if(g<180){P=0-se(P,Q),T=se(T,E?P:X);const S=ve(g-90),B=P/2;L=L-B*Math.cos(S),k=k-B*Math.sin(S);const $=T/2;L=L-$*Math.sin(S),k=k+$*Math.cos(S)}else if(g<270){P=se(P,Q),T=se(T,E?P:0-_);const S=ve(g-180),B=P/2;L=L+B*Math.sin(S),k=k-B*Math.cos(S);const $=T/2;L=L-$*Math.cos(S),k=k-$*Math.sin(S)}else if(g<360){P=se(P,Q),T=se(T,E?P:D);const S=ve(g-270),B=P/2;L=L+B*Math.cos(S),k=k+B*Math.sin(S);const $=T/2;L=L+$*Math.sin(S),k=k-$*Math.cos(S)}v+P>0&&(v=v+P),m+T>0&&(m=m+T),u=L-m/2,f=k-v/2}break}}return{x:u,y:f,w:m,h:v,angle:e.angle}}function e3(e,t){const{x:n,y:o,w:i,h:a,angle:r=0}=e,{center:c,start:d,end:l,viewScaleInfo:h}=t,u=we(c,{viewScaleInfo:h}),f=ft(r),m=L0(u,d,l),v=f+D0(m);return{x:n,y:o,w:i,h:a,angle:v}}function t3(e,t){var n;const o=[],i=[],a=[],{viewScaleInfo:r,viewSizeInfo:c,start:d,end:l}=t;if(!(Array.isArray(e.elements)&&d&&l))return{indexes:o,uuids:i,elements:a};const h=Math.min(d.x,l.x),u=Math.max(d.x,l.x),f=Math.min(d.y,l.y),m=Math.max(d.y,l.y);for(let v=0;v<e.elements.length;v++){const g=e.elements[v];if(((n=g==null?void 0:g.operations)===null||n===void 0?void 0:n.locked)===!0)continue;const p=Xe(g,{viewScaleInfo:r}),b=lt(p);if(b.x>=h&&b.x<=u&&b.y>=f&&b.y<=m&&(o.push(v),i.push(g.uuid),a.push(g),p.angle&&(p.angle>0||p.angle<0))){const E=Kn(p);if(E.length===4){const M=[E[0].x,E[1].x,E[2].x,E[3].x],y=[E[0].y,E[1].y,E[2].y,E[3].y];p.x=Math.min(...M),p.y=Math.min(...y),p.w=Math.abs(Math.max(...M)-Math.min(...M)),p.h=Math.abs(Math.max(...y)-Math.min(...y))}}}return{indexes:o,uuids:i,elements:a}}function Vo(e,t){var n;if(!Array.isArray(e))return null;const o={x:0,y:0,w:0,h:0},{viewScaleInfo:i}=t;let a=null;for(let r=0;r<e.length;r++){const c=e[r];if(!((n=c==null?void 0:c.operations)===null||n===void 0)&&n.invisible)continue;const d=Xe(c,{viewScaleInfo:i});if(d.angle&&(d.angle>0||d.angle<0)){const l=Kn(d);if(l.length===4){const h=[l[0].x,l[1].x,l[2].x,l[3].x],u=[l[0].y,l[1].y,l[2].y,l[3].y];d.x=Math.min(...h),d.y=Math.min(...u),d.w=Math.abs(Math.max(...h)-Math.min(...h)),d.h=Math.abs(Math.max(...u)-Math.min(...u))}}if(a){const l=Math.min(d.x,o.x),h=Math.min(d.y,o.y),u=Math.max(d.x+d.w,o.x+o.w),f=Math.max(d.y+d.h,o.y+o.h);o.x=l,o.y=h,o.w=Math.abs(u-l),o.h=Math.abs(f-h)}else o.x=d.x,o.y=d.y,o.w=d.w,o.h=d.h;a=d}return o}function n3(e,t){var n;if((t==null?void 0:t.type)==="group"&&Array.isArray((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.children))for(let o=0;o<t.detail.children.length;o++){const i=t.detail.children[o];if(e.uuid===i.uuid)return!0}return!1}function o3(e,t,n){let o=t.x-e.x,i=t.y-e.y;const a=[];if(n.forEach(r=>{const{x:c,y:d,w:l,h,angle:u=0}=r;a.push({x:c,y:d,w:l,h,angle:0-u})}),(n==null?void 0:n.length)>0){const r=Ti(e,a),c=Ti(t,a);o=c.x-r.x,i=c.y-r.y}return{moveX:o,moveY:i}}const Ns=2;function Ds(e){return{minX:e.topLeft.x,minY:e.topLeft.y,maxX:e.bottomRight.x,maxY:e.bottomRight.y,midX:e.center.x,midY:e.center.y}}const zn=(e,t)=>{if(e.length===0)throw null;if(e.length===1)return e[0];let n=0,o=e.length-1;for(;n<=o;){const i=Math.floor((n+o)/2);if(e[i]===t)return e[i];e[i]<t?n=i+1:o=i-1}return n>=e.length?e[o]:o<0?e[n]:Math.abs(e[o]-t)<=Math.abs(e[n]-t)?e[o]:e[n]},ot=(e,t)=>Math.abs(e-t)<1e-5;function ta(e,t){var n,o;const{data:i,groupQueue:a,calculator:r,viewScaleInfo:c,viewSizeInfo:d}=t;let l=i.elements||[];(a==null?void 0:a.length)>0&&(l=((o=(n=a[a.length-1])===null||n===void 0?void 0:n.detail)===null||o===void 0?void 0:o.children)||[]);const h=[];l.forEach(V=>{if(V.uuid!==e){const D=r.calcViewRectInfoFromRange(V.uuid,{checkVisible:!0,viewScaleInfo:c,viewSizeInfo:d});D&&h.push(D)}});const u=r.calcViewRectInfoFromRange(e,{viewScaleInfo:c,viewSizeInfo:d});if(!u)return null;const f={},m={},v={},g={},p=[],b=[];let E=[],M=[];const y=Ds(u);f[y.minX]=[y.minY,y.midY,y.maxY],f[y.midX]=[y.minY,y.midY,y.maxY],f[y.maxX]=[y.minY,y.midY,y.maxY],m[y.minY]=[y.minX,y.midX,y.maxX],m[y.midY]=[y.minX,y.midX,y.maxX],m[y.maxY]=[y.minX,y.midX,y.maxX],h.forEach(V=>{const D=Ds(V);v[D.minX]||(v[D.minX]=[]),v[D.midX]||(v[D.midX]=[]),v[D.maxX]||(v[D.maxX]=[]),g[D.minY]||(g[D.minY]=[]),g[D.midY]||(g[D.midY]=[]),g[D.maxY]||(g[D.maxY]=[]),v[D.minX]=[D.minY,D.midY,D.maxY],v[D.midX]=[D.minY,D.midY,D.maxY],v[D.maxX]=[D.minY,D.midY,D.maxY],E.push(D.minX),E.push(D.midX),E.push(D.maxX),g[D.minY]=[D.minX,D.midX,D.maxX],g[D.midY]=[D.minX,D.midX,D.maxX],g[D.maxY]=[D.minX,D.midX,D.maxX],M.push(D.minY),M.push(D.midY),M.push(D.maxY)}),E=E.sort((V,D)=>V-D),M=M.sort((V,D)=>V-D);let R=null,C=null,w=null,O=null,A=null,x=null,j=null,z=null;if(E.length>0){w=zn(E,y.minX),O=zn(E,y.midX),A=zn(E,y.maxX);const V=Math.abs(w-y.minX),D=Math.abs(O-y.midX),_=Math.abs(A-y.maxX),T=Math.min(V,D,_);T<=Ns/c.scale&&(ot(T,V)?R=w-y.minX:ot(T,D)?R=O-y.midX:ot(T,_)&&(R=A-y.maxX))}if(M.length>0){x=zn(M,y.minY),j=zn(M,y.midY),z=zn(M,y.maxY);const V=Math.abs(x-y.minY),D=Math.abs(j-y.midY),_=Math.abs(z-y.maxY),T=Math.min(V,D,_);T<=Ns/c.scale&&(ot(T,V)?C=x-y.minY:ot(T,D)?C=j-y.midY:ot(T,_)&&(C=z-y.maxY))}const N=Object.assign({},y);if(R!==null&&(N.minX+=R,N.midX+=R,N.maxX+=R),C!==null&&(N.minY+=C,N.midY+=C,N.maxY+=C),ze.x(R)&&R!==null&&w!==null&&O!==null&&A!==null){if(ot(R,w-y.minX)){const V={x:w,yList:[]};V.yList.push(N.minY),V.yList.push(N.maxY),V.yList.push(...(g==null?void 0:g[w])||[]),p.push(V)}if(ot(R,O-y.minX)){const V={x:O,yList:[]};V.yList.push(N.minY),V.yList.push(N.maxY),V.yList.push(...(g==null?void 0:g[O])||[]),p.push(V)}if(ot(R,A-y.minX)){const V={x:A,yList:[]};V.yList.push(N.minY),V.yList.push(N.maxY),V.yList.push(...(g==null?void 0:g[A])||[]),p.push(V)}}if(ze.y(C)&&C!==null&&x!==null&&j!==null&&z!==null){if(ot(C,x-y.minY)){const V={y:x,xList:[]};V.xList.push(N.minX),V.xList.push(N.maxX),V.xList.push(...(v==null?void 0:v[x])||[]),b.push(V)}if(ot(C,j-y.midY)){const V={y:j,xList:[]};V.xList.push(N.minX),V.xList.push(N.maxX),V.xList.push(...(v==null?void 0:v[x])||[]),b.push(V)}if(ot(C,z-y.maxY)){const V={y:z,xList:[]};V.xList.push(N.minX),V.xList.push(N.maxX),V.xList.push(...(v==null?void 0:v[z])||[]),b.push(V)}}const F=[];(p==null?void 0:p.length)>0&&p.forEach((V,D)=>{F.push([]),V.yList.forEach(_=>{F[D].push({x:V.x,y:_})})});const H=[];return(b==null?void 0:b.length)>0&&b.forEach((V,D)=>{H.push([]),V.xList.forEach(_=>{H[D].push({x:_,y:V.y})})}),{offsetX:R,offsetY:C,yLines:F,xLines:H}}const Do="LAYOUT_SELECT",en=Symbol(`${Do}_layoutActionType`),Bo=Symbol(`${Do}_layoutControlType`),Fo=Symbol(`${Do}_layoutController`),In=Symbol(`${Do}_layoutIsHover`),xt=Symbol(`${Do}_layoutIsSelected`),oo=10,i3={activeColor:"#b331c9"};function Wo(e,t,n){const{activeColor:o}=n;e.setLineDash([]),e.fillStyle="#FFFFFF",e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.fill(),e.strokeStyle=o,e.lineWidth=2,e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Ho(e,t){const{start:n,end:o,style:i}=t,{activeColor:a}=i,r=2,c=a;e.setLineDash([]),e.strokeStyle=c,e.lineWidth=r,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,o.y),e.closePath(),e.stroke()}function a3(e,t){const{controller:n,style:o}=t,{topLeft:i,topRight:a,bottomLeft:r,bottomRight:c,topMiddle:d,rightMiddle:l,bottomMiddle:h,leftMiddle:u}=n;Ho(e,{start:i.center,end:a.center,centerVertexes:d.vertexes,style:o}),Ho(e,{start:a.center,end:c.center,centerVertexes:l.vertexes,style:o}),Ho(e,{start:c.center,end:r.center,centerVertexes:h.vertexes,style:o}),Ho(e,{start:r.center,end:i.center,centerVertexes:u.vertexes,style:o}),Wo(e,i.vertexes,o),Wo(e,a.vertexes,o),Wo(e,c.vertexes,o),Wo(e,r.vertexes,o)}function s3(e,t){const{layoutSize:n,style:o}=t,{activeColor:i}=o,{x:a,y:r,w:c,h:d}=n;e.setLineDash([]),e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.moveTo(a,r),e.lineTo(a+c,r),e.lineTo(a+c,r+d),e.lineTo(a,r+d),e.lineTo(a,r),e.closePath(),e.stroke()}const Ls=(e,t)=>{const{sharer:n,boardContent:o,calculator:i,viewer:a,eventHub:r}=e,{overlayContext:c}=o,d=Object.assign(Object.assign({},i3),t),{activeColor:l}=d,h={activeColor:l};let u=null,f=null,m=null,v=null;const g=()=>{u=null,n.setSharedStorage(en,null),n.setSharedStorage(Bo,null),n.setSharedStorage(Fo,null),n.setSharedStorage(In,null),n.setSharedStorage(xt,null),f=null,m=null,v=null},p=()=>n.getSharedStorage(St)?(g(),!0):!1,b=()=>{const w=n.getSharedStorage(xe);return w&&w!=="area"?(g(),!0):!1},E=()=>{const w=n.getActiveStorage("data");if(w!=null&&w.layout){const{x:O,y:A,w:x,h:j}=w.layout;return{x:O,y:A,w:x,h:j}}return null},M=w=>{const O=E();if(O){const{x:A,y:x,w:j,h:z}=O,N=n.getActiveViewScaleInfo(),F=Xe({x:A-oo/2,y:x-oo/2,w:j+oo,h:z+oo},{viewScaleInfo:N});return j0(w,F)}return!1},y=()=>{const w=n.getActiveViewScaleInfo(),O=E();if(O){const A=ts(O,{viewScaleInfo:w,controllerSize:10});n.setSharedStorage(Fo,A)}else n.setSharedStorage(Fo,null)},R=w=>{const O=n.getActiveStorage("data"),A=n.getSharedStorage(Fo);if(A&&(O!=null&&O.layout)&&(w!=null&&w.point)){let x=null;if(A){const{topLeft:j,top:z,topRight:N,right:F,bottomRight:H,bottom:V,bottomLeft:D,left:_}=A,T=[j,z,N,F,H,V,D,_];for(let Q=0;Q<T.length;Q++){const Y=T[Q];if(Pr(w.point,Y.vertexes)){x=`${Y.type}`;break}}if(x)return n.setSharedStorage(Bo,x),r.trigger(de.CLEAR_SELECT),x}}return null},C=w=>{v!==!0&&r.trigger(de.CURSOR,{type:w&&`resize-${w}`,groupQueue:[],element:E()})};return{name:"@middleware/layout-selector",use:()=>{g(),y()},hover:w=>{if(v!==!0&&!b()&&!p()){if(M(w.point)?n.setSharedStorage(In,!0):(n.setSharedStorage(In,!1),f===!0&&(a.drawFrame(),f=!1)),n.getSharedStorage(xt)===!0){const O=n.getSharedStorage(en),A=n.getActiveStorage("data");if(A!=null&&A.layout)if(O!=="resize"){y();const x=R(w);x?C(x):(C(),n.setSharedStorage(en,null))}else{const x=R(w);C(x)}return}n.getSharedStorage(In)&&!f&&a.drawFrame(),f=n.getSharedStorage(In)}},pointStart:w=>{if(b())return;M(w.point)?n.setSharedStorage(xt,!0):(m===!0&&(g(),a.drawFrame()),n.setSharedStorage(xt,!1)),y();const O=R(w);u=w.point,O&&n.setSharedStorage(en,"resize"),n.getSharedStorage(xt)===!0&&!m&&a.drawFrame(),m=n.getSharedStorage(xt)},pointMove:w=>{if(!n.getSharedStorage(xt)&&b())return;const O=n.getSharedStorage(en),A=n.getSharedStorage(Bo),x=n.getActiveStorage("data");if(O==="resize"&&A&&(x!=null&&x.layout)){if(u){v=!0;const j=n.getActiveStorage("scale"),z=w.point.x-u.x,N=w.point.y-u.y,F=z/j,H=N/j,{x:V,y:D,w:_,h:T,operations:Q={}}=x.layout,{position:Y="absolute"}=Q;A==="top"?Y==="relative"?(x.layout.h=i.toGridNum(T-H),a.scroll({moveY:N})):(x.layout.y=i.toGridNum(D+H),x.layout.h=i.toGridNum(T-H)):A==="right"?x.layout.w=i.toGridNum(_+F):A==="bottom"?x.layout.h=i.toGridNum(T+H):A==="left"?Y==="relative"?(x.layout.w=i.toGridNum(_-F),a.scroll({moveX:z})):(x.layout.x=i.toGridNum(V+F),x.layout.w=i.toGridNum(_-F)):A==="top-left"?Y==="relative"?(x.layout.w=i.toGridNum(_-F),x.layout.h=i.toGridNum(T-H),a.scroll({moveX:z,moveY:N})):(x.layout.x=i.toGridNum(V+F),x.layout.y=i.toGridNum(D+H),x.layout.w=i.toGridNum(_-F),x.layout.h=i.toGridNum(T-H)):A==="top-right"?Y==="relative"?(a.scroll({moveY:N}),x.layout.w=i.toGridNum(_+F),x.layout.h=i.toGridNum(T-H)):(x.layout.y=i.toGridNum(D+H),x.layout.w=i.toGridNum(_+F),x.layout.h=i.toGridNum(T-H)):A==="bottom-right"?(x.layout.w=i.toGridNum(_+F),x.layout.h=i.toGridNum(T+H)):A==="bottom-left"&&(Y==="relative"?(a.scroll({moveX:z}),x.layout.w=i.toGridNum(_-F),x.layout.h=i.toGridNum(T+H)):(x.layout.x=i.toGridNum(V+F),x.layout.w=i.toGridNum(_-F),x.layout.h=i.toGridNum(T+H)))}return u=w.point,y(),a.drawFrame(),!1}if(["resize"].includes(O))return!1},pointEnd:()=>{v=!1;const w=n.getSharedStorage(en),O=n.getSharedStorage(Bo),A=n.getActiveStorage("data");A&&w==="resize"&&O&&r.trigger(de.CHANGE,{type:"changeLayout",data:A})},beforeDrawFrame:({snapshot:w})=>{var O;if(b())return;const{sharedStore:A,activeStore:x}=w,j=A[en],z=A[In],N=A[xt];if(!((O=x.data)===null||O===void 0)&&O.layout){const{x:F,y:H,w:V,h:D}=x.data.layout,_=Ao(w),T={x:F,y:H,w:V,h:D},Q=ts(T,{viewScaleInfo:_,controllerSize:oo});if(z===!0){const Y=Xe(T,{viewScaleInfo:_});s3(c,{layoutSize:Y,style:h})}(j&&["resize"].includes(j)||N===!0)&&a3(c,{controller:Q,style:h})}},scrollX:()=>{g()},scrollY:()=>{g()},wheelScale:()=>{g()}}},Ps=(e,t)=>{const n=Object.assign(Object.assign({},Ud),t),{activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:r}=n,c={activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:r},{viewer:d,sharer:l,boardContent:h,calculator:u,eventHub:f}=e,{overlayContext:m}=h;let v=null,g=null,p=null,b=null;l.setSharedStorage(xe,null),l.setSharedStorage(_o,!0);const E=()=>l.getSharedStorage(At),M=z=>{let N=l.getSharedStorage(Ze);Array.isArray(N)||(N=[]),N.length>0?n3(z,N[N.length-1])?N.push(z):N=[]:N.length===0&&N.push(z);const F=La(N);return l.setSharedStorage(Ze,N),l.setSharedStorage(qi,F),N.length>0},y=z=>{l.setSharedStorage(St,z);let N=null;z&&(N=zo(z,{groupQueue:l.getSharedStorage(Ze)})),l.setSharedStorage(no,N)},R=(z,N)=>{var F;if(l.setSharedStorage(At,z),z.length===1){const H=Ro(z[0],{groupQueue:l.getSharedStorage(Ze),controllerSize:cl,viewScaleInfo:l.getActiveViewScaleInfo()});l.setSharedStorage(xn,H),l.setSharedStorage(Mn,vt(z[0].uuid,((F=l.getActiveStorage("data"))===null||F===void 0?void 0:F.elements)||[]))}else l.setSharedStorage(xn,null),l.setSharedStorage(Mn,[]);(N==null?void 0:N.triggerEvent)===!0&&f.trigger(de.SELECT,{uuids:z.map(H=>H.uuid),positions:[]})},C=()=>({ctx:m,calculator:u,data:l.getActiveStorage("data"),selectedElements:E(),viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Ze),areaSize:null,selectedElementController:l.getSharedStorage(xn),selectedElementPosition:l.getSharedStorage(Mn)}),w=()=>{l.setSharedStorage(xe,null),l.setSharedStorage(Kt,null),l.setSharedStorage(to,null),l.setSharedStorage(Oo,null),l.setSharedStorage(Ze,[]),l.setSharedStorage(qi,[]),l.setSharedStorage(St,null),l.setSharedStorage(no,null),l.setSharedStorage(At,[]),l.setSharedStorage(Wd,null),l.setSharedStorage(xn,null),l.setSharedStorage(Mn,[]),l.setSharedStorage(ko,null)};w();const O=({uuids:z=[],positions:N})=>{let F=[];const H=l.getSharedStorage(xe),V=l.getActiveStorage("data");N&&Array.isArray(N)?F=Dr(N,(V==null?void 0:V.elements)||[]):F=si(z,(V==null?void 0:V.elements)||[]);let D=!1;if(!H&&F.length===1?(l.setSharedStorage(xe,"select"),D=!0):H==="select"&&F.length===1&&(D=!0),D){const _=F[0],T=Da(_.uuid,(V==null?void 0:V.elements)||[]);l.setSharedStorage(Ze,T),R(F),d.drawFrame()}},A=()=>{w(),d.drawFrame()},x=z=>{l.setSharedStorage(_o,!!z.enable)},j=z=>{l.setSharedStorage(xs,!!z.enable)};return{name:"@middleware/selector",use(){f.on(de.SELECT,O),f.on(de.CLEAR_SELECT,A),f.on(de.SELECT_IN_GROUP,j),f.on(de.SNAP_TO_GRID,x)},disuse(){f.off(de.SELECT,O),f.off(de.CLEAR_SELECT,A),f.off(de.SELECT_IN_GROUP,j),f.off(de.SNAP_TO_GRID,x)},hover:z=>{var N,F,H,V,D;const _=l.getSharedStorage(xt),T=l.getSharedStorage(Kt),Q=l.getSharedStorage(xe),Y=l.getSharedStorage(Ze),P=S=>{if(_===!0)return;const B=S.type;b===null&&f.trigger(de.CURSOR,{type:B,groupQueue:S.groupQueue,element:S.elements[0]})};if((Y==null?void 0:Y.length)>0){if(!ea(z.point,{ctx:m,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Ze)})){y(null),d.drawFrame();return}const B=qt(z.point,C());if(P(B),T||["area","drag","drag-list"].includes(Q)){y(null),d.drawFrame();return}if(((N=B==null?void 0:B.elements)===null||N===void 0?void 0:N.length)===1){y(B.elements[0]),d.drawFrame();return}y(null),d.drawFrame();return}if(T||["area","drag","drag-list"].includes(Q)){y(null);return}if(Q==="drag"){y(null);return}const W=E(),X=l.getActiveViewScaleInfo(),L=l.getActiveViewSizeInfo(),k=qt(z.point,Object.assign(Object.assign({},C()),{areaSize:Vo(W,{viewScaleInfo:X,viewSizeInfo:L,calculator:u})}));if(P(k),k.type===null){(l.getSharedStorage(St)||l.getSharedStorage(no))&&(l.setSharedStorage(St,null),l.setSharedStorage(no,null),d.drawFrame());return}if(!(k.type==="over-element"&&l.getSharedStorage(xe)==="select"&&k.elements.length===1&&k.elements[0].uuid===((H=(F=E())===null||F===void 0?void 0:F[0])===null||H===void 0?void 0:H.uuid))&&!(k.type==="over-element"&&l.getSharedStorage(xe)===null&&k.elements.length===1&&k.elements[0].uuid===((V=l.getSharedStorage(St))===null||V===void 0?void 0:V.uuid))){if(k.type==="over-element"&&((D=k==null?void 0:k.elements)===null||D===void 0?void 0:D.length)===1){y(k.elements[0]),d.drawFrame();return}if(l.getSharedStorage(St)){y(null),d.drawFrame();return}}},pointStart:z=>{var N,F,H,V,D,_,T,Q,Y,P,W,X;v=z.point,g=z.point;const L=l.getSharedStorage(Ze);if((L==null?void 0:L.length)>0){if(ea(z.point,{ctx:m,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:L})){const $=qt(z.point,C()),ae=((N=$==null?void 0:$.elements)===null||N===void 0?void 0:N.length)===1&&((H=(F=$.elements[0])===null||F===void 0?void 0:F.operations)===null||H===void 0?void 0:H.locked)===!0;y(null),((V=$==null?void 0:$.elements)===null||V===void 0?void 0:V.length)===1&&(p=mn($==null?void 0:$.elements[0])),ae===!0?w():$.type==="over-element"&&((D=$==null?void 0:$.elements)===null||D===void 0?void 0:D.length)===1?(R([$.elements[0]],{triggerEvent:!0}),l.setSharedStorage(xe,"drag")):!((_=$.type)===null||_===void 0)&&_.startsWith("resize-")?(l.setSharedStorage(Kt,$.type),l.setSharedStorage(xe,"resize")):R([],{triggerEvent:!0})}else w();d.drawFrame();return}const k=Vo(E(),{viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),calculator:u}),S=qt(z.point,Object.assign(Object.assign({},C()),{areaSize:k,groupQueue:[]})),B=((T=S==null?void 0:S.elements)===null||T===void 0?void 0:T.length)===1&&((Y=(Q=S.elements[0])===null||Q===void 0?void 0:Q.operations)===null||Y===void 0?void 0:Y.locked)===!0;y(null),((P=S==null?void 0:S.elements)===null||P===void 0?void 0:P.length)===1&&(p=mn(S==null?void 0:S.elements[0])),B===!0?(w(),l.setSharedStorage(xe,"area"),l.setSharedStorage(to,z.point),R([],{triggerEvent:!0})):S.type==="list-area"?l.setSharedStorage(xe,"drag-list"):S.type==="over-element"&&((W=S==null?void 0:S.elements)===null||W===void 0?void 0:W.length)===1?(R([S.elements[0]],{triggerEvent:!0}),l.setSharedStorage(xe,"drag")):!((X=S.type)===null||X===void 0)&&X.startsWith("resize-")?(l.setSharedStorage(Kt,S.type),l.setSharedStorage(xe,"resize")):(w(),l.setSharedStorage(xe,"area"),l.setSharedStorage(to,z.point),R([],{triggerEvent:!0})),d.drawFrame()},pointMove:z=>{var N,F,H;l.setSharedStorage(ko,!0);const V=l.getActiveStorage("data"),D=E(),_=l.getActiveStorage("scale")||1,T=l.getActiveViewScaleInfo(),Q=l.getActiveViewSizeInfo(),Y=v,P=g,W=z.point,X=l.getSharedStorage(Kt),L=l.getSharedStorage(xe),k=l.getSharedStorage(Ze),S=l.getSharedStorage(_o);if(L==="drag"){if(b="drag",V&&(D==null?void 0:D.length)===1&&p&&P&&W&&((F=(N=D[0])===null||N===void 0?void 0:N.operations)===null||F===void 0?void 0:F.locked)!==!0){const{moveX:B,moveY:$}=o3(P,W,k);let ae=u.toGridNum(B/_),oe=u.toGridNum($/_);if(S===!0){const ce=ta(D[0].uuid,{calculator:u,data:V,groupQueue:k,viewScaleInfo:T,viewSizeInfo:Q});try{ce&&(ze.x(ce.offsetX)&&ce.offsetX!==null&&(ae=u.toGridNum(ae+ce.offsetX)),ze.y(ce.offsetY)&&ce.offsetY!==null&&(oe=u.toGridNum(oe+ce.offsetY)))}catch(U){console.error(U)}}D[0].x=u.toGridNum(p.x+ae),D[0].y=u.toGridNum(p.y+oe),R([D[0]]),u.modifyViewVisibleInfoMap(V,{modifyOptions:{type:"updateElement",content:{element:D[0],position:l.getSharedStorage(Mn)||[]}},viewSizeInfo:Q,viewScaleInfo:T})}d.drawFrame()}else if(L==="drag-list"){if(b="drag-list",V&&P&&Y&&W&&(D==null?void 0:D.length)>1){const B=(W.x-Y.x)/_,$=(W.y-Y.y)/_;D.forEach(ae=>{var oe;ae&&((oe=ae==null?void 0:ae.operations)===null||oe===void 0?void 0:oe.locked)!==!0&&(ae.x=u.toGridNum(ae.x+B),ae.y=u.toGridNum(ae.y+$),u.modifyViewVisibleInfoMap(V,{modifyOptions:{type:"updateElement",content:{element:ae,position:vt(ae.uuid,V.elements)||[]}},viewSizeInfo:Q,viewScaleInfo:T}))}),l.setActiveStorage("data",V)}d.drawFrame()}else if(L==="resize"){if(V&&(D==null?void 0:D.length)===1&&P&&p&&(X!=null&&X.startsWith("resize-"))){b="resize";const B=[];k.forEach(oe=>{const{x:ce,y:U,w:q,h:re,angle:le=0}=oe;B.push({x:ce,y:U,w:q,h:re,angle:0-le})});let $=P,ae=W;if(k.length>0&&($=Ti(P,B),ae=Ti(W,B)),X==="resize-rotate"){const oe=l.getSharedStorage(xn),ce=[oe.topLeft.center,oe.topRight.center,oe.bottomLeft.center,oe.bottomRight.center],U=Mr(ce),q=e3(p,{center:U,viewScaleInfo:T,viewSizeInfo:Q,start:P,end:W,resizeType:X,sharer:l});D[0].angle=u.toGridNum(q.angle||0)}else{const oe=qd(p,{scale:_,start:$,end:ae,resizeType:X,sharer:l}),ce={ignore:!!p.angle};D[0].x=u.toGridNum(oe.x,ce),D[0].y=u.toGridNum(oe.y,ce),D[0].type==="group"&&((H=D[0].operations)===null||H===void 0?void 0:H.deepResize)===!0?Vr(D[0],{w:u.toGridNum(oe.w,ce),h:u.toGridNum(oe.h,ce)}):(D[0].w=u.toGridNum(oe.w,ce),D[0].h=u.toGridNum(oe.h,ce))}R([D[0]]),u.modifyViewVisibleInfoMap(V,{modifyOptions:{type:"updateElement",content:{element:D[0],position:l.getSharedStorage(Mn)||[]}},viewSizeInfo:Q,viewScaleInfo:T}),d.drawFrame()}}else L==="area"&&(b="area",l.setSharedStorage(Oo,z.point),d.drawFrame());v=z.point},pointEnd(z){b=null,l.setSharedStorage(ko,!1);const N=l.getActiveStorage("data"),F=l.getSharedStorage(At),H=l.getSharedStorage(St),V=l.getSharedStorage(Kt),D=l.getSharedStorage(xe),_=l.getActiveViewSizeInfo();let T=!1;if(v=null,g=null,p=null,D==="resize"&&V)l.setSharedStorage(Kt,null),T=!0;else if(D==="area"){if(l.setSharedStorage(xe,null),N){const Y=l.getSharedStorage(to),P=l.getSharedStorage(Oo);if(Y&&P){const{elements:W}=t3(N,{start:Y,end:P,calculator:u,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()});W.length>0&&(l.setSharedStorage(xe,"drag-list"),R(W,{triggerEvent:!0}),T=!0)}}}else D==="drag-list"?(l.setSharedStorage(xe,"drag-list-end"),T=!0):N&&(u.getPointElement(z.point,{data:N,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()}).element?(l.setSharedStorage(xe,"select"),T=!0):l.setSharedStorage(xe,null));l.getSharedStorage(xe)===null&&(w(),T=!0),(()=>{if(T){if(N&&Array.isArray(N==null?void 0:N.elements)&&["drag","drag-list"].includes(D)){const Y=P0(N.elements,_,{extend:!0});l.setActiveStorage("contextHeight",Y.contextSize.contextHeight),l.setActiveStorage("contextWidth",Y.contextSize.contextWidth)}N&&["drag","drag-list","drag-list-end","resize"].includes(D)&&f.trigger(de.CHANGE,{data:N,type:"dragElement",selectedElements:F,hoverElement:H}),d.drawFrame()}})()},pointLeave(){v=null,g=null,p=null,w(),d.drawFrame()},doubleClick(z){var N,F,H,V,D,_,T,Q;if(l.getSharedStorage(xs)===!1)return;const Y=qt(z.point,C());if(l.setSharedStorage(xn,null),l.setSharedStorage(At,[]),!(Y.elements.length===1&&((F=(N=Y.elements[0])===null||N===void 0?void 0:N.operations)===null||F===void 0?void 0:F.locked)===!0)){if(Y.elements.length===1&&((H=Y.elements[0])===null||H===void 0?void 0:H.type)==="group"){if(M(Y.elements[0])===!0){l.setSharedStorage(xe,null),d.drawFrame();return}}else Y.elements.length===1&&((V=Y.elements[0])===null||V===void 0?void 0:V.type)==="text"&&!(!((_=(D=Y.elements[0])===null||D===void 0?void 0:D.operations)===null||_===void 0)&&_.invisible)&&f.trigger(de.TEXT_EDIT,{element:Y.elements[0],groupQueue:l.getSharedStorage(Ze)||[],position:vt((T=Y.elements[0])===null||T===void 0?void 0:T.uuid,((Q=l.getActiveStorage("data"))===null||Q===void 0?void 0:Q.elements)||[]),viewScaleInfo:l.getActiveViewScaleInfo()});l.setSharedStorage(xe,null)}},contextMenu:z=>{var N,F,H,V,D,_,T,Q;const Y=l.getSharedStorage(Ze);if((Y==null?void 0:Y.length)>0){if(ea(z.point,{ctx:m,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:Y})){const X=qt(z.point,C());((N=X==null?void 0:X.elements)===null||N===void 0?void 0:N.length)===1&&((H=(F=X.elements[0])===null||F===void 0?void 0:F.operations)===null||H===void 0?void 0:H.locked)!==!0?(w(),R([X.elements[0]],{triggerEvent:!0}),d.drawFrame()):!((V=X==null?void 0:X.elements)===null||V===void 0)&&V.length||w()}return}const P=Vo(E(),{viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),calculator:u}),W=qt(z.point,Object.assign(Object.assign({},C()),{areaSize:P,groupQueue:[]}));if(((D=W==null?void 0:W.elements)===null||D===void 0?void 0:D.length)===1&&((T=(_=W.elements[0])===null||_===void 0?void 0:_.operations)===null||T===void 0?void 0:T.locked)!==!0){w(),R([W.elements[0]],{triggerEvent:!0}),d.drawFrame();return}else!((Q=W==null?void 0:W.elements)===null||Q===void 0)&&Q.length||w()},beforeDrawFrame({snapshot:z}){var N;const{activeStore:F,sharedStore:H}=z,{scale:V,offsetLeft:D,offsetTop:_,offsetRight:T,offsetBottom:Q,width:Y,height:P,contextHeight:W,contextWidth:X,devicePixelRatio:L}=F,k=e.sharer,S={scale:V,offsetLeft:D,offsetTop:_,offsetRight:T,offsetBottom:Q},B={width:Y,height:P,contextHeight:W,contextWidth:X,devicePixelRatio:L},ae=H[At][0],oe=H[St],ce=H[no],U=H[xe],q=H[to],re=H[Oo],le=H[Ze],Qt=H[qi],Ba=H[ko],Fa=H[_o],Jt={calculator:u,viewScaleInfo:S,viewSizeInfo:B,style:c},Wa=ae?Ro(ae,{groupQueue:le,controllerSize:10,viewScaleInfo:S}):null,Ha=!!(!((N=oe==null?void 0:oe.operations)===null||N===void 0)&&N.locked);if((le==null?void 0:le.length)>0){if(Kd(m,Qt,Jt),oe&&U!=="drag"&&(Ha?Is(m,ce,Object.assign(Object.assign({},Jt),{controller:Ro(oe,{groupQueue:le,controllerSize:10,viewScaleInfo:S}),style:c})):zs(m,ce,Jt)),ae&&["select","drag","resize"].includes(U)&&(As(m,Wa,Object.assign(Object.assign({},Jt),{element:ae,calculator:u,hideControllers:!!Ba&&U==="drag",style:c})),U==="drag"&&Fa===!0)){const Pt=ta(ae.uuid,{calculator:u,data:F.data,groupQueue:le,viewScaleInfo:S,viewSizeInfo:B});if(Pt){const{offsetX:Wi,offsetY:Hi,xLines:Gi,yLines:Yi}=Pt;(Wi===0||Hi===0)&&Ts(m,{xLines:Gi,yLines:Yi,style:c})}}}else if(oe&&U!=="drag"&&(Ha?Is(m,ce,Object.assign(Object.assign({},Jt),{controller:Ro(oe,{groupQueue:le,controllerSize:10,viewScaleInfo:S}),style:c})):zs(m,ce,Jt)),ae&&["select","drag","resize"].includes(U)){if(As(m,Wa,Object.assign(Object.assign({},Jt),{element:ae,calculator:u,hideControllers:!!Ba&&U==="drag",style:c})),U==="drag"&&Fa===!0){const Pt=ta(ae.uuid,{calculator:u,data:F.data,groupQueue:le,viewScaleInfo:S,viewSizeInfo:B});if(Pt){const{offsetX:Wi,offsetY:Hi,xLines:Gi,yLines:Yi}=Pt;(Wi===0||Hi===0)&&Ts(m,{xLines:Gi,yLines:Yi,style:c})}}}else if(U==="area"&&q&&re)Qd(m,{start:q,end:re,style:c});else if(["drag-list","drag-list-end"].includes(U)){const Pt=Vo(E(),{viewScaleInfo:k.getActiveViewScaleInfo(),viewSizeInfo:k.getActiveViewSizeInfo(),calculator:u});Pt&&Jd(m,{areaSize:Pt,style:c})}}}},En="SCROLL",Si=Symbol(`${En}_xThumbRect`),Ci=Symbol(`${En}_yThumbRect`),go=Symbol(`${En}_hoverXThumbRect`),vo=Symbol(`${En}_hoverYThumbRect`),Hn=Symbol(`${En}_prevPoint`),wa=Symbol(`${En}_activePoint`),po=Symbol(`${En}_activeThumbType`),r3={thumbBackground:"#0000003A",thumbBorderColor:"#0000008A",hoverThumbBackground:"#0000005F",hoverThumbBorderColor:"#000000EE",activeThumbBackground:"#0000005E",activeThumbBorderColor:"#000000F0"},dl=16,l3=dl*2.5;function Rs(e,t,n){const o=e,{x:i,y:a,w:r,h:c}=n;return o.beginPath(),o.rect(i,a,r,c),o.closePath(),!!o.isPointInPath(t.x,t.y)}function c3(e,t,n){let o=null;const{xThumbRect:i,yThumbRect:a}=n;return i&&Rs(e,t,i)?o="X":a&&Rs(e,t,a)&&(o="Y"),o}function d3(e){const{sharedStore:t}=e;return{activePoint:t[wa]||null,prevPoint:t[Hn]||null,activeThumbType:t[po]||null,xThumbRect:t[Si]||null,yThumbRect:t[Ci]||null,hoverXThumb:t[go],hoverYThumb:t[vo]}}function u3(e){const{viewScaleInfo:t,viewSizeInfo:n,hoverXThumb:o,hoverYThumb:i,style:a}=e,{width:r,height:c}=n,{offsetTop:d,offsetBottom:l,offsetLeft:h,offsetRight:u}=t,f=l3,m=dl,{thumbBackground:v,thumbBorderColor:g,hoverThumbBackground:p,hoverThumbBorderColor:b}=a;let E=0,M=0;E=Math.max(f,r-m*2-(Math.abs(h)+Math.abs(u))),E>=r&&(E=r),M=Math.max(f,c-m*2-(Math.abs(d)+Math.abs(l))),M>=c&&(M=c);const y=m,R=r-E-m;let C=y;h>0?C=y:u>0?C=R:h<=0&&E>0&&!(h===0&&u===0)&&(C=y+(r-E)*Math.abs(h)/(Math.abs(h)+Math.abs(u)),C=Math.min(Math.max(0,C-y),r-E));const w=m,O=c-M-m;let A=w;d>0?A=w:l>0?A=O:d<=0&&M>0&&!(d===0&&l===0)&&(A=w+(c-M)*Math.abs(d)/(Math.abs(d)+Math.abs(l)),A=Math.min(Math.max(0,A-w),c-M));const x={x:C,y:c-m,w:E,h:m},j={x:r-m,y:A,w:m,h:M};return{lineSize:m,xSize:E,ySize:M,translateY:A,translateX:C,xThumbBackground:o?p:v,yThumbBackground:i?p:v,xThumbBorderColor:o?b:g,yThumbBorderColor:i?b:g,xThumbRect:x,yThumbRect:j}}function Os(e,t){let{x:n,y:o,h:i,w:a,background:r,borderColor:c}=t;e.save(),e.shadowColor="#FFFFFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=1;{const{axis:d}=t;d==="X"?(o=o+i/4+0,i=i/2):d==="Y"&&(n=n+a/4+0,a=a/2);let l=t.r;l=Math.min(l,a/2,i/2),(a<l*2||i<l*2)&&(l=0),e.globalAlpha=1,e.beginPath(),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.fillStyle=r,e.fill(),e.beginPath(),e.lineWidth=1,e.strokeStyle=c,e.setLineDash([]),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.stroke()}e.restore()}function h3(e,t){const n=e,{viewScaleInfo:o,viewSizeInfo:i,scrollInfo:a,style:r}=t,{activeThumbType:c,prevPoint:d,activePoint:l,hoverXThumb:h,hoverYThumb:u}=a,f=u3({viewScaleInfo:o,viewSizeInfo:i,hoverXThumb:h,hoverYThumb:u,style:r});let m=Object.assign({},f.xThumbRect),v=Object.assign({},f.yThumbRect);return c&&d&&l&&(c==="X"&&a.xThumbRect?(m=Object.assign({},a.xThumbRect),m.x=m.x+(l.x-d.x)):c==="Y"&&a.yThumbRect&&(v=Object.assign({},a.yThumbRect),v.y=v.y+(l.y-d.y))),Os(n,Object.assign(Object.assign({axis:"X"},m),{r:f.lineSize/2,background:f.xThumbBackground,borderColor:f.xThumbBorderColor})),Os(n,Object.assign(Object.assign({axis:"Y"},v),{r:f.lineSize/2,background:f.yThumbBackground,borderColor:f.yThumbBorderColor})),{xThumbRect:m,yThumbRect:v}}function f3(e,t){const{snapshot:n,style:o}=t,i=ji(n),a=Ao(n),r=d3(n),{xThumbRect:c,yThumbRect:d}=h3(e,{viewSizeInfo:i,viewScaleInfo:a,scrollInfo:r,style:o});return{xThumbRect:c,yThumbRect:d}}const ks=(e,t)=>{const{viewer:n,boardContent:o,sharer:i,eventHub:a}=e,{overlayContext:r}=o;i.setSharedStorage(Si,null),i.setSharedStorage(Ci,null);let c=!1;const d=Object.assign(Object.assign({},r3),t),{thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:f,activeThumbBackground:m,activeThumbBorderColor:v}=d,g={thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:f,activeThumbBackground:m,activeThumbBorderColor:v},p=()=>{i.setSharedStorage(Hn,null),i.setSharedStorage(wa,null),i.setSharedStorage(po,null),i.setSharedStorage(go,null),i.setSharedStorage(vo,null),c=!1};p();const b=y=>{const R=i.getSharedStorage(Hn);if(R){const{offsetLeft:C,offsetRight:w}=i.getActiveViewScaleInfo(),{width:O}=i.getActiveViewSizeInfo(),A=-(y.x-R.x),x=O+Math.abs(C)+Math.abs(w),j=A*x/O;n.scroll({moveX:j}),n.drawFrame()}},E=y=>{const R=i.getSharedStorage(Hn);if(R){const{offsetTop:C,offsetBottom:w}=i.getActiveViewScaleInfo(),{height:O}=i.getActiveViewSizeInfo(),A=-(y.y-R.y),x=O+Math.abs(C)+Math.abs(w),j=A*x/O;n.scroll({moveY:j}),n.drawFrame()}},M=y=>c3(r,y,{xThumbRect:i.getSharedStorage(Si),yThumbRect:i.getSharedStorage(Ci)});return{name:"@middleware/scroller",wheel:y=>{n.scroll({moveX:0-y.deltaX,moveY:0-y.deltaY}),n.drawFrame()},hover:y=>{if(c===!0)return!1;const{point:R}=y,C=M(R);if(C==="X"||C==="Y")return C==="X"?(i.setSharedStorage(go,!0),i.setSharedStorage(vo,!1)):(i.setSharedStorage(go,!1),i.setSharedStorage(vo,!0)),a.trigger(de.CURSOR,{type:"default"}),!1;i.setSharedStorage(go,!1),i.setSharedStorage(vo,!1)},pointStart:y=>{const{point:R}=y,C=M(R);if(C==="X"||C==="Y")return c=!0,i.setSharedStorage(po,C),i.setSharedStorage(Hn,R),!1},pointMove:y=>{const{point:R}=y,C=i.getSharedStorage(po);if(C==="X"||C==="Y")return i.setSharedStorage(wa,R),C==="X"?b(R):C==="Y"&&E(R),i.setSharedStorage(Hn,R),!1},pointEnd:()=>{c=!1;const y=i.getSharedStorage(po);if(p(),y==="X"||y==="Y")return n.scroll({moveX:0,moveY:0}),n.drawFrame(),!1},beforeDrawFrame({snapshot:y}){const{xThumbRect:R,yThumbRect:C}=f3(r,{snapshot:y,style:g});i.setSharedStorage(Si,R),i.setSharedStorage(Ci,C)}}},_s=e=>{const{viewer:t,sharer:n,eventHub:o}=e,i=50,a=.05;return{name:"@middleware/scaler",wheelScale(r){const{deltaY:c,point:d}=r,{scale:l}=n.getActiveViewScaleInfo();let h=l;if(c<0?h=l*1.1:c>0&&(h=l*.9),h<a||h>i)return;const{moveX:u,moveY:f}=t.scale({scale:h,point:d});t.scroll({moveX:u,moveY:f}),t.drawFrame();const m=be(l);o.trigger(de.SCALE,{scale:m})}}},je=16,ba=10,ul=100,Bi=1,hl="monospace",m3="#FFFFFFA8",g3="#00000080",v3="#000000",p3="#00000080",y3="#AAAAAA20",w3="#AAAAAA40",b3="#196097",E3={background:m3,borderColor:g3,scaleColor:v3,textColor:p3,gridColor:y3,gridPrimaryColor:w3,selectedAreaColor:b3},An=[1,2,5,10,20,50,100,200,500];function S3(e){e=Math.max(An[0],Math.min(e,An[An.length-1]));for(let t=0;t<An.length-1;t++){const n=An[t],o=An[t+1];if(e>o)continue;if(e===n||e===o)return e;const i=(n+o)/2;return e<=i?n:o}return e}function fl(e){const{scale:t,viewLength:n,viewOffset:o}=e,i=[];let a=10;a=be(a/t,{decimalPlaces:0}),a=S3(a);const r=a*10,c=a*5;let d=0;const l=a*t,h=0-o,u=0,f=h%l,m=(h-f+l)/t,v=u+(l-f);for(;v+d*l<n;){const g=be(m+d*a,{decimalPlaces:0}),p=be(v+d*l,{decimalPlaces:0}),b={num:g,position:p,showNum:g%r===0,isKeyNum:g%r===0,isSubKeyNum:g%c===0};i.push(b),d++}return{list:i,rulerUnit:a}}function C3(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetLeft:i}=t,{width:a}=n;return fl({axis:"X",scale:o,viewLength:a,viewOffset:i})}function x3(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i}=t,{height:a}=n;return fl({axis:"Y",scale:o,viewLength:a,viewOffset:i})}function M3(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,r=je,c=je*4/5,d=je*2/5,l=je*1/5,h=je/5;for(let u=0;u<n.length;u++){const f=n[u];f.position<je||(e.beginPath(),e.moveTo(f.position,r),e.lineTo(f.position,f.isKeyNum?l:f.isSubKeyNum?d:c),e.closePath(),e.lineWidth=Bi,e.setLineDash([]),e.fillStyle=i,e.stroke(),f.isKeyNum&&(e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:ul,fontSize:ba,fontFamily:hl}),e.fillText(`${f.num}`,f.position+h,h)))}}function z3(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,r=je,c=je*4/5,d=je*2/5,l=je*1/5,h=je/5;for(let u=0;u<n.length;u++){const f=n[u];if(!(f.position<je)&&(e.beginPath(),e.moveTo(r,f.position),e.lineTo(f.isKeyNum?l:f.isSubKeyNum?d:c,f.position),e.closePath(),e.fillStyle=i,e.lineWidth=Bi,e.setLineDash([]),e.stroke(),f.showNum===!0)){const m=h,v=f.position+h,g=`${f.num}`;To(e,-90,{x:m,y:v},()=>{e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:ul,fontSize:ba,fontFamily:hl}),e.fillText(g,h+ba,f.position+h)})}}}function I3(e,t){const{viewSizeInfo:n,style:o}=t,{width:i,height:a}=n,{background:r,borderColor:c}=o;e.beginPath(),e.moveTo(0,0),e.lineTo(i+1,0),e.lineTo(i+1,je),e.lineTo(je,je),e.lineTo(je,a+1),e.lineTo(0,a+1),e.lineTo(0,0),e.closePath(),e.fillStyle=r,e.fill(),e.lineWidth=Bi,e.setLineDash([]),e.strokeStyle=c,e.stroke()}function A3(e,t){const{xList:n,yList:o,viewSizeInfo:i,style:a}=t,{width:r,height:c}=i,{gridColor:d,gridPrimaryColor:l}=a;for(let h=0;h<n.length;h++){const u=n[h];e.beginPath(),e.moveTo(u.position,0),e.lineTo(u.position,c),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.closePath(),e.lineWidth=Bi,e.setLineDash([]),e.stroke()}for(let h=0;h<o.length;h++){const u=o[h];e.beginPath(),e.moveTo(0,u.position),e.lineTo(r,u.position),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.lineWidth=1,e.closePath(),e.stroke()}}function T3(e,t){const{snapshot:n,calculator:o,style:i}=t,{sharedStore:a}=n,{selectedAreaColor:r}=i,c=a[At],d=a[xe];if(["select","drag","drag-list","drag-list-end"].includes(d)&&c.length>0){const l=Ao(n),h=ji(n),u=[],f=[],m=[],v=[],g=[];if(c.forEach(y=>{const R=o.calcViewRectInfoFromRange(y.uuid,{viewScaleInfo:l,viewSizeInfo:h});R&&(u.push(R),f.push(R.left.x),m.push(R.right.x),v.push(R.top.y),g.push(R.bottom.y))}),!(u.length>0))return;const p=Math.min(...f),b=Math.max(...m),E=Math.min(...v),M=Math.max(...g);e.globalAlpha=1,e.beginPath(),e.moveTo(p,0),e.lineTo(b,0),e.lineTo(b,je),e.lineTo(p,je),e.fillStyle=r,e.closePath(),e.fill(),e.beginPath(),e.moveTo(0,E),e.lineTo(je,E),e.lineTo(je,M),e.lineTo(0,M),e.fillStyle=r,e.closePath(),e.fill()}}const js=(e,t)=>{const{boardContent:n,viewer:o,eventHub:i,calculator:a}=e,{overlayContext:r,underlayContext:c}=n,d=Object.assign(Object.assign({},E3),t),{background:l,borderColor:h,scaleColor:u,textColor:f,gridColor:m,gridPrimaryColor:v,selectedAreaColor:g}=d,p={background:l,borderColor:h,scaleColor:u,textColor:f,gridColor:m,gridPrimaryColor:v,selectedAreaColor:g};let b=!0,E=!0;const M=y=>{typeof(y==null?void 0:y.show)=="boolean"&&(b=y.show),typeof(y==null?void 0:y.showGrid)=="boolean"&&(E=y.showGrid),(typeof(y==null?void 0:y.show)=="boolean"||typeof(y==null?void 0:y.showGrid)=="boolean")&&o.drawFrame()};return{name:"@middleware/ruler",use(){i.on(de.RULER,M)},disuse(){i.off(de.RULER,M)},beforeDrawFrame:({snapshot:y})=>{if(b===!0){const R=Ao(y),C=ji(y);T3(r,{snapshot:y,calculator:a,style:p}),I3(r,{viewScaleInfo:R,viewSizeInfo:C,style:p});const{list:w,rulerUnit:O}=C3({viewScaleInfo:R,viewSizeInfo:C});M3(r,{scaleList:w,style:p});const{list:A}=x3({viewScaleInfo:R,viewSizeInfo:C});z3(r,{scaleList:A,style:p}),E===!0&&A3(O===1?r:c,{xList:w,yList:A,viewScaleInfo:R,viewSizeInfo:C,style:p})}}}},N3=wn(),Vs=e=>{const{eventHub:t,boardContent:n,viewer:o,sharer:i}=e,a=n.boardContext.canvas,r=document.createElement("div");r.setAttribute("contenteditable","true");const c=document.createElement("div"),d=e.container||document.body,l=document.createElement("div");let h=null,u=[];const f=`idraw-middleware-text-editor-${Math.random().toString(26).substring(2)}`;l.setAttribute("id",f),c.appendChild(r),c.style.position="absolute",l.appendChild(c),l.style.position="fixed",l.style.top="0",l.style.bottom="0",l.style.left="0",l.style.right="0",l.style.display="none",d.appendChild(l);const m=y=>{E(),b(y),l.style.display="block",h!=null&&h.uuid&&(i.setActiveOverrideElemenentMap({[h.uuid]:{operations:{invisible:!0}}}),o.drawFrame())},v=()=>{if(h!=null&&h.uuid){const y=i.getActiveOverrideElemenentMap();y&&delete y[h.uuid],i.setActiveOverrideElemenentMap(y),o.drawFrame()}l.style.display="none",h=null,u=[]},g=()=>{const y=a.getBoundingClientRect(),{left:R,top:C,width:w,height:O}=y;return{left:R,top:C,width:w,height:O}},p=y=>{const{size:R,parent:C}=y,w=document.createElement("div"),{x:O,y:A,w:x,h:j}=R,z=ft(R.angle||0);return w.style.position="absolute",w.style.left=`${O}px`,w.style.top=`${A}px`,w.style.width=`${x}px`,w.style.height=`${j}px`,w.style.transform=`rotate(${z}deg)`,C.appendChild(w),w},b=y=>{const{viewScaleInfo:R,element:C,groupQueue:w}=y,{scale:O,offsetTop:A,offsetLeft:x}=R;c.children&&Array.from(c.children).forEach(T=>{T.remove()});let j=c;for(let T=0;T<w.length;T++){const Q=w[T],{x:Y,y:P,w:W,h:X}=Q,L=ft(Q.angle||0),k={x:Y*O,y:P*O,w:W*O,h:X*O,angle:L};T===0&&(k.x+=x,k.y+=A),j=p({size:k,parent:j})}const z=Object.assign(Object.assign({},N3),C.detail);let N=C.x*O+x,F=C.y*O+A,H=C.w*O,V=C.h*O;w.length>0&&(N=C.x*O,F=C.y*O,H=C.w*O,V=C.h*O);let D="center",_="center";z.textAlign==="left"?D="start":z.textAlign==="right"&&(D="end"),z.verticalAlign==="top"?_="start":z.verticalAlign==="bottom"&&(_="end"),r.style.display="inline-flex",r.style.justifyContent=D,r.style.alignItems=_,r.style.position="absolute",r.style.left=`${N-1}px`,r.style.top=`${F-1}px`,r.style.width=`${H+2}px`,r.style.height=`${V+2}px`,r.style.transform=`rotate(${ft(C.angle||0)}deg)`,r.style.boxSizing="border-box",r.style.border="1px solid #1973ba",r.style.resize="none",r.style.overflow="hidden",r.style.wordBreak="break-all",r.style.borderRadius=`${(typeof z.borderRadius=="number"?z.borderRadius:0)*O}px`,r.style.background=`${z.background||"transparent"}`,r.style.color=`${z.color||"#333333"}`,r.style.fontSize=`${z.fontSize*O}px`,r.style.lineHeight=`${(z.lineHeight||z.fontSize)*O}px`,r.style.fontFamily=Wr(z.fontFamily),r.style.fontWeight=`${z.fontWeight}`,r.style.padding="0",r.style.margin="0",r.style.outline="none",r.innerText=z.text||"",j.appendChild(r)},E=()=>{const{left:y,top:R,width:C,height:w}=g();c.style.position="absolute",c.style.overflow="hidden",c.style.top=`${R}px`,c.style.left=`${y}px`,c.style.width=`${C}px`,c.style.height=`${w}px`};l.addEventListener("click",()=>{v()}),r.addEventListener("click",y=>{y.stopPropagation()}),r.addEventListener("input",()=>{h&&u&&(h.detail.text=r.innerText||"",t.trigger(de.TEXT_CHANGE,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u||[]]}),o.drawFrame())}),r.addEventListener("blur",()=>{h&&u&&t.trigger(de.TEXT_CHANGE,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u]}),v()}),r.addEventListener("keydown",y=>{y.stopPropagation()}),r.addEventListener("keypress",y=>{y.stopPropagation()}),r.addEventListener("keyup",y=>{y.stopPropagation()}),r.addEventListener("wheel",y=>{y.stopPropagation(),y.preventDefault()});const M=y=>{var R;y!=null&&y.position&&(y!=null&&y.element)&&((R=y==null?void 0:y.element)===null||R===void 0?void 0:R.type)==="text"&&(h=y.element,u=y.position),m(y)};return{name:"@middleware/text-editor",use(){t.on(de.TEXT_EDIT,M)},disuse(){t.off(de.TEXT_EDIT,M)}}},D3="DRAG",Go=Symbol(`${D3}_prevPoint`),Bs=e=>{const{eventHub:t,sharer:n,viewer:o}=e;let i=!1;return{name:"@middleware/dragger",hover(){i!==!0&&t.trigger(de.CURSOR,{type:"drag-default"})},pointStart(a){const{point:r}=a;n.setSharedStorage(Go,r),i=!0,t.trigger(de.CURSOR,{type:"drag-active"})},pointMove(a){const{point:r}=a,c=n.getSharedStorage(Go);if(r&&c){const d=r.x-c.x,l=r.y-c.y;o.scroll({moveX:d,moveY:l}),o.drawFrame()}n.setSharedStorage(Go,r)},pointEnd(){i=!1,n.setSharedStorage(Go,null),t.trigger(de.CURSOR,{type:"drag-default"})}}},Ra="monospace";function L3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:r,fontSize:c,lineHeight:d}=t,{textColor:l,textBackground:h}=r;To(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ra});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x-f/2-u,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x-f/2,y:n.y};e.setLineDash([]),e.fillStyle=h,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=l,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function P3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:r,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=r;To(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ra});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function R3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:r,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=r;To(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Ra});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}const O3="#1973bac6",k3="#ffffff",_3={textBackground:O3,textColor:k3},tn=10,na=16,Fs=(e,t)=>{const{boardContent:n,calculator:o}=e,{overlayContext:i}=n,a=Object.assign(Object.assign({},_3),t),{textBackground:r,textColor:c}=a,d={textBackground:r,textColor:c};return{name:"@middleware/info",beforeDrawFrame({snapshot:l}){const{sharedStore:h}=l,u=h[At],f=h[xe],m=h[Ze]||[];if(u.length===1){const v=u[0];if(v&&["select","drag","resize"].includes(f)){const g=Ao(l),p=ji(l),{x:b,y:E,w:M,h:y,angle:R}=v,C=[...m,{uuid:$t(),x:b,y:E,w:M,h:y,angle:R,type:"group",detail:{children:[]}}],w={viewScaleInfo:g,viewSizeInfo:p},O=o.calcViewRectInfoFromOrigin(v.uuid,w);let A=0;C.forEach(j=>{A+=j.angle||0});const x=Nt(ft(0-A));if(O){const j=O==null?void 0:O.center,z={topLeft:Ne(j,O.topLeft,x),topRight:Ne(j,O.topRight,x),bottomRight:Ne(j,O.bottomRight,x),bottomLeft:Ne(j,O.bottomLeft,x),center:Ne(j,O.center,x),top:Ne(j,O.top,x),right:Ne(j,O.right,x),bottom:Ne(j,O.bottom,x),left:Ne(j,O.left,x)},N=be(v.x,{decimalPlaces:2}),F=be(v.y,{decimalPlaces:2}),H=be(v.w,{decimalPlaces:2}),V=be(v.h,{decimalPlaces:2}),D=`${be(N,{decimalPlaces:0})},${be(F,{decimalPlaces:0})}`,_=`${be(H,{decimalPlaces:0})}x${be(V,{decimalPlaces:0})}`,T=`${be(v.angle||0,{decimalPlaces:0})}°`;L3(i,{point:{x:z.bottom.x,y:z.bottom.y+tn},rotateCenter:z.center,angle:A,text:_,fontSize:tn,lineHeight:na,style:d}),P3(i,{point:{x:z.topLeft.x,y:z.topLeft.y-tn*2},rotateCenter:z.center,angle:A,text:D,fontSize:tn,lineHeight:na,style:d}),R3(i,{point:{x:z.top.x+tn,y:z.top.y-tn*2},rotateCenter:z.center,angle:A,text:T,fontSize:tn,lineHeight:na,style:d})}}}}}},j3=e=>{const{boardContent:t,eventHub:n,sharer:o}=e,i=t.boardContext.canvas,a=e.container||document.body,r=`idraw-middleware-pointer-${Math.random().toString(26).substring(2)}`,c=()=>{const l=i.getBoundingClientRect(),{left:h,top:u,width:f,height:m}=l;return{left:h,top:u,width:f,height:m}},d=document.createElement("div");return d.setAttribute("id",r),d.style.position="fixed",d.style.top="0",d.style.bottom="unset",d.style.left="0",d.style.right="unset",a.appendChild(d),{name:"@middleware/pointer",use(){},disuse(){},pointStart(l){},pointEnd(){},contextMenu(l){const{point:h}=l,{left:u,top:f}=c();d.style.left=`${u+h.x}px`,d.style.top=`${f+h.y}px`;const m=o.getSharedStorage(At);n.trigger(de.CONTEXT_MENU,{pointerContainer:d,selectedElements:m||[]})}}};var oa=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Le=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ea,Pe,xi,Ri,ml;class V3{constructor(t,n){Ea.add(this),Pe.set(this,void 0),xi.set(this,void 0),Ri.set(this,void 0);const{devicePixelRatio:o=1,width:i,height:a,createCustomContext2D:r}=n;oa(this,Ri,t,"f");const c=document.createElement("canvas");oa(this,xi,c,"f"),Le(this,Ea,"m",ml).call(this),t.appendChild(c);const d=A0(c,{width:i,height:a,devicePixelRatio:o,offscreen:!0,createCustomContext2D:r}),l=new Id({boardContent:d,container:t}),h=l.getSharer();h.setActiveViewSizeInfo({width:i,height:a,devicePixelRatio:o,contextWidth:i,contextHeight:a}),oa(this,Pe,l,"f"),this.resize(h.getActiveViewSizeInfo());const u=l.getEventHub();new Fd(t,{eventHub:u})}isDestroyed(){return Le(this,Pe,"f").isDestroyed()}destroy(){Le(this,Pe,"f").destroy(),Le(this,xi,"f").remove()}use(t,n){Le(this,Pe,"f").use(t,n)}disuse(t){Le(this,Pe,"f").disuse(t)}setData(t,n){Ir((t==null?void 0:t.elements)||[]),Le(this,Pe,"f").setData(t,n)}getData(){return Le(this,Pe,"f").getData()}scale(t){Le(this,Pe,"f").scale(t),Le(this,Pe,"f").getViewer().drawFrame()}resize(t){const n=Le(this,Pe,"f"),i=n.getSharer().getActiveViewSizeInfo();n.resize(Object.assign(Object.assign({},i),t))}clear(){Le(this,Pe,"f").clear()}on(t,n){Le(this,Pe,"f").getEventHub().on(t,n)}off(t,n){Le(this,Pe,"f").getEventHub().off(t,n)}trigger(t,n){Le(this,Pe,"f").getEventHub().trigger(t,n)}getViewInfo(){const n=Le(this,Pe,"f").getSharer(),o=n.getActiveViewSizeInfo(),i=n.getActiveViewScaleInfo();return{viewSizeInfo:o,viewScaleInfo:i}}refresh(){Le(this,Pe,"f").getViewer().drawFrame()}setViewScale(t){Le(this,Pe,"f").updateViewScaleInfo(t)}getLoadItemMap(){return Le(this,Pe,"f").getRenderer().getLoadItemMap()}onBoardWatcherEvents(){Le(this,Pe,"f").onWatcherEvents()}offBoardWatcherEvents(){Le(this,Pe,"f").offWatcherEvents()}}Pe=new WeakMap,xi=new WeakMap,Ri=new WeakMap,Ea=new WeakSet,ml=function(){const t=Le(this,Ri,"f");t.style.position="relative"};const Oi="select",B3={mode:Oi};function F3(){return{mode:Oi,enableRuler:!1,enableScale:!1,enableScroll:!1,enableSelect:!1,enableTextEdit:!1,enableDrag:!1,enableInfo:!1,middlewareStyles:{selector:{},info:{},ruler:{},scroller:{},layoutSelector:{}}}}function W3(e){const t={selector:{},ruler:{},info:{},scroller:{},layoutSelector:{}};if(e.styles){const{selector:n,info:o,ruler:i,scroller:a,layoutSelector:r}=e.styles;Ae.string(n==null?void 0:n.activeColor)&&(t.selector.activeColor=n==null?void 0:n.activeColor),Ae.string(n==null?void 0:n.activeAreaColor)&&(t.selector.activeAreaColor=n==null?void 0:n.activeAreaColor),Ae.string(n==null?void 0:n.lockedColor)&&(t.selector.lockedColor=n==null?void 0:n.lockedColor),Ae.string(n==null?void 0:n.referenceColor)&&(t.selector.referenceColor=n==null?void 0:n.referenceColor),Ae.string(o==null?void 0:o.textBackground)&&(t.info.textBackground=o==null?void 0:o.textBackground),Ae.string(o==null?void 0:o.textColor)&&(t.info.textColor=o==null?void 0:o.textColor),Ae.string(i==null?void 0:i.background)&&(t.ruler.background=i==null?void 0:i.background),Ae.string(i==null?void 0:i.borderColor)&&(t.ruler.borderColor=i==null?void 0:i.borderColor),Ae.string(i==null?void 0:i.scaleColor)&&(t.ruler.scaleColor=i==null?void 0:i.scaleColor),Ae.string(i==null?void 0:i.textColor)&&(t.ruler.textColor=i==null?void 0:i.textColor),Ae.string(i==null?void 0:i.gridColor)&&(t.ruler.gridColor=i==null?void 0:i.gridColor),Ae.string(i==null?void 0:i.gridPrimaryColor)&&(t.ruler.gridPrimaryColor=i==null?void 0:i.gridPrimaryColor),Ae.string(i==null?void 0:i.selectedAreaColor)&&(t.ruler.selectedAreaColor=i==null?void 0:i.selectedAreaColor),Ae.string(a==null?void 0:a.thumbBackground)&&(t.scroller.thumbBackground=a==null?void 0:a.thumbBackground),Ae.string(a==null?void 0:a.thumbBorderColor)&&(t.scroller.thumbBorderColor=a==null?void 0:a.thumbBorderColor),Ae.string(a==null?void 0:a.hoverThumbBackground)&&(t.scroller.hoverThumbBackground=a==null?void 0:a.hoverThumbBackground),Ae.string(a==null?void 0:a.hoverThumbBorderColor)&&(t.scroller.hoverThumbBorderColor=a==null?void 0:a.hoverThumbBorderColor),Ae.string(a==null?void 0:a.activeThumbBackground)&&(t.scroller.activeThumbBackground=a==null?void 0:a.activeThumbBackground),Ae.string(a==null?void 0:a.activeThumbBorderColor)&&(t.scroller.activeThumbBorderColor=a==null?void 0:a.activeThumbBorderColor),Ae.string(r==null?void 0:r.activeColor)&&(t.layoutSelector.activeColor=r==null?void 0:r.activeColor)}return t}var H3=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function G3(e){return H3(this,void 0,void 0,function*(){const{data:t,width:n,height:o,devicePixelRatio:i,viewScaleInfo:a,viewSizeInfo:r,loadItemMap:c}=e;let d=ii({width:n,height:o,devicePixelRatio:i}),l=new Qr({viewContext:d}),h=new Zr({viewContext:d,calculator:l});h.setLoadItemMap(c),h.drawData(t,{viewScaleInfo:a,viewSizeInfo:r,forceDrawAll:!0});let u=null,f=d.$getOffscreenCanvas();if(f){const m=yield f.convertToBlob();u=window.URL.createObjectURL(m)}return f=null,d=null,l=null,h=null,{blobURL:u,width:n,height:o,devicePixelRatio:i}})}function Y3(e){return["select","drag","readOnly"].includes(e)}function gl(e,t){const{enableRuler:n,enableScale:o,enableScroll:i,enableSelect:a,enableTextEdit:r,enableDrag:c,enableInfo:d}=t.getSnapshot(),l=t.get("middlewareStyles");i===!0?e.use(ks,l==null?void 0:l.scroller):i===!1&&e.disuse(ks),a===!0?(e.use(Ls,l==null?void 0:l.layoutSelector),e.use(Ps,l==null?void 0:l.selector)):a===!1&&(e.disuse(Ls),e.disuse(Ps)),o===!0?e.use(_s):o===!1&&e.disuse(_s),n===!0?e.use(js,l==null?void 0:l.ruler):n===!1&&e.disuse(js),r===!0?e.use(Vs):r===!1&&e.disuse(Vs),c===!0?e.use(Bs):c===!1&&e.disuse(Bs),d===!0?e.use(Fs,l==null?void 0:l.info):d===!1&&e.disuse(Fs),e.use(j3)}function Sa(e,t,n){let o=!1,i=!1,a=!1,r=!1,c=!1,d=!1,l=!1,h="select";n.set("mode",h),Y3(e)?h=e:console.warn(`${e} is invalid mode of iDraw.js`),h==="select"?(o=!0,i=!0,a=!0,l=!0,r=!0,c=!1,d=!0):h==="drag"?(o=!0,i=!0,a=!1,r=!1,c=!0,d=!0):h==="readOnly"&&(o=!1,i=!1,a=!1,r=!1,c=!1,d=!1),n.set("enableScale",o),n.set("enableScroll",i),n.set("enableSelect",a),n.set("enableTextEdit",r),n.set("enableDrag",c),n.set("enableRuler",d),n.set("enableInfo",l),gl(t,n)}var $3=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},ue=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ia=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},yo,pe,wo,Gt,vl,Ca;class Oa{constructor(t,n){yo.add(this),pe.set(this,void 0),wo.set(this,void 0),Gt.set(this,new fn({defaultStorage:F3()}));const o=Object.assign(Object.assign({},B3),n);ue(this,Gt,"f").set("middlewareStyles",W3(o));const{width:i,height:a,devicePixelRatio:r,createCustomContext2D:c}=o,d=new V3(t,{width:i,height:a,devicePixelRatio:r,createCustomContext2D:c});ia(this,pe,d,"f"),ia(this,wo,o,"f"),ue(this,yo,"m",vl).call(this)}reset(t){const n=ue(this,pe,"f"),o=ue(this,Gt,"f");o.clear(),Sa(t.mode||Oi,n,o),n.refresh(),ia(this,wo,Object.assign(Object.assign({},ue(this,wo,"f")),t),"f")}setMode(t){const n=ue(this,pe,"f"),o=ue(this,Gt,"f");Sa(t||Oi,n,o),n.refresh()}enable(t){ue(this,yo,"m",Ca).call(this,t,!0)}disable(t){ue(this,yo,"m",Ca).call(this,t,!1)}setData(t){const n=ue(this,pe,"f");n.setData(t),n.trigger(de.CHANGE,{data:t,type:"setData"})}getData(t){const n=ue(this,pe,"f").getData();return n&&(t==null?void 0:t.compact)===!0?e0(n,{loadItemMap:ue(this,pe,"f").getLoadItemMap()}):n}getViewInfo(){return ue(this,pe,"f").getViewInfo()}scale(t){ue(this,pe,"f").scale(t)}setViewScale(t){const n=ue(this,pe,"f");n.setViewScale(t),n.refresh()}centerContent(t){const n=(t==null?void 0:t.data)||ue(this,pe,"f").getData(),{viewSizeInfo:o}=this.getViewInfo();if(n!=null&&n.layout||Array.isArray(n==null?void 0:n.elements)&&(n==null?void 0:n.elements.length)>0){const i=nd(n,{viewSizeInfo:o});this.setViewScale(i)}}resize(t){ue(this,pe,"f").resize(t)}on(t,n){ue(this,pe,"f").on(t,n)}off(t,n){ue(this,pe,"f").off(t,n)}trigger(t,n){ue(this,pe,"f").trigger(t,n)}selectElement(t){this.selectElements([t])}selectElements(t){this.trigger(de.SELECT,{uuids:t})}selectElementByPosition(t){this.selectElementsByPositions([t])}selectElementsByPositions(t){this.trigger(de.SELECT,{positions:t})}cancelElements(){this.trigger(de.CLEAR_SELECT,{uuids:[]})}createElement(t,n){const{viewScaleInfo:o,viewSizeInfo:i}=ue(this,pe,"f").getViewInfo();return q0(t,(n==null?void 0:n.element)||{},(n==null?void 0:n.viewCenter)===!0?{viewScaleInfo:o,viewSizeInfo:i}:void 0)}updateElement(t){const n=ue(this,pe,"f"),o=n.getData()||{elements:[]};Xt(t.uuid,t,o.elements),n.setData(o),n.refresh(),n.trigger(de.CHANGE,{data:o,type:"updateElement"})}addElement(t,n){var o;const i=ue(this,pe,"f"),a=i.getData()||{elements:[]};if(!n||!(!((o=n==null?void 0:n.position)===null||o===void 0)&&o.length))a.elements.push(t);else if(n!=null&&n.position){const r=[...n==null?void 0:n.position];Br(t,r,a.elements)}return i.setData(a),i.refresh(),i.trigger(de.CHANGE,{data:a,type:"addElement"}),a}deleteElement(t){const n=ue(this,pe,"f"),o=n.getData()||{elements:[]};ed(t,o.elements),n.setData(o),n.refresh(),n.trigger(de.CHANGE,{data:o,type:"deleteElement"})}moveElement(t,n){const o=ue(this,pe,"f"),i=o.getData()||{elements:[]},a=vt(t,i.elements),{elements:r}=Ni(i.elements,{from:a,to:n});i.elements=r,o.setData(i),o.refresh(),o.trigger(de.CHANGE,{data:i,type:"moveElement"})}getImageBlobURL(t){return $3(this,void 0,void 0,function*(){const n=this.getData()||{elements:[]},{devicePixelRatio:o}=t||{devicePixelRatio:1},i=Na(n.elements),{viewSizeInfo:a}=this.getViewInfo();return yield G3({width:i.w,height:i.h,devicePixelRatio:o,data:n,viewScaleInfo:{scale:1,offsetLeft:-i.x,offsetTop:-i.y,offsetBottom:0,offsetRight:0},viewSizeInfo:Object.assign(Object.assign({},a),{devicePixelRatio:o}),loadItemMap:ue(this,pe,"f").getLoadItemMap()})})}isDestroyed(){return ue(this,pe,"f").isDestroyed()}destroy(){const t=ue(this,pe,"f"),n=ue(this,Gt,"f");t.destroy(),n.destroy()}getViewCenter(){const{viewScaleInfo:t,viewSizeInfo:n}=this.getViewInfo();return od({viewScaleInfo:t,viewSizeInfo:n})}$onBoardWatcherEvents(){ue(this,pe,"f").onBoardWatcherEvents()}$offBoardWatcherEvents(){ue(this,pe,"f").offBoardWatcherEvents()}}pe=new WeakMap,wo=new WeakMap,Gt=new WeakMap,yo=new WeakSet,vl=function(){const t=ue(this,pe,"f"),n=ue(this,Gt,"f");Sa("select",t,n)},Ca=function(t,n){const o=ue(this,Gt,"f");if(["ruler","scroll","scale","info"].includes(t)){const i={ruler:"enableRuler",scroll:"enableScroll",scale:"enableScale",info:"enableInfo"};o.set(i[t],!!n),gl(ue(this,pe,"f"),o),ue(this,pe,"f").refresh()}else t==="selectInGroup"?ue(this,pe,"f").trigger(de.SELECT_IN_GROUP,{enable:!!n}):t==="snapToGrid"&&ue(this,pe,"f").trigger(de.SNAP_TO_GRID,{enable:!!n})};const Te=de,aa="base-scale-selector",X3=e=>{const{className:t,style:n,defaultValue:o,value:i,onChange:a}=e,r=G(aa),c=G(aa,"menu-item"),d=G(aa,"input"),[l,h]=I.useState(100);I.useEffect(()=>{const g=be(parseFloat(i||"1")*100);h(g)},[i]);const u=g=>{const{key:p}=g;a==null||a(p)},f=g=>{g.stopPropagation()},v={items:[{label:s.createElement("span",{className:c},s.createElement(he,{className:d,size:"small",value:l,suffix:"%",onClick:f,step:1,min:10,max:1e4,controls:!1,onChange:g=>{if(g&&g>0){const p=be(g/100);a==null||a(`${p}`)}}})),key:"custom"},...[.5,1,2,3].map(g=>({key:`${g}`,label:s.createElement("span",{className:c},`${be(g*100)}%`)}))],onClick:u,selectedKeys:[`${i||o}`]};return I.useMemo(()=>s.createElement(Jn,{className:fe(r,t),menu:v,placement:"bottom"},s.createElement(Re,{icon:s.createElement(jc,null),size:"small"},`${be(parseFloat(i||"1")*100)}%`)),[t,n,o,i,a,l])},nn="node",U3=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:r,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:f,onContextMenu:m,onGoToGroup:v,operations:g,isSelected:p}=e,[b,E]=I.useState(!1),[M,y]=I.useState(!1),R=I.useRef(r),C=l(d,nn),w=l(d,nn,"icon"),O=l(d,nn,"title"),A=l(d,nn,"title","input"),x=l(d,nn,"title","icon"),j=l(d,nn,"action"),z=l(d,nn,"selected"),N=I.useRef(0),F=I.useRef(null);I.useEffect(()=>{var S;b===!0&&((S=F.current)===null||S===void 0||S.focus())},[b]);const H=S=>{E(!1),h==null||h({uuid:a,value:S.target.value||""})},V=S=>{R.current=S.target.value||""},D=S=>{var B;S.code==="Enter"&&(E(!1),h==null||h({uuid:a,value:((B=S==null?void 0:S.target)===null||B===void 0?void 0:B.value)||""}))},_=S=>{S.stopPropagation(),S.preventDefault()},T=S=>{S.stopPropagation(),y(!0)},Q=S=>{S.stopPropagation(),y(!1)},Y=S=>{const B=Date.now(),$=B-N.current;N.current=B,$<=300&&$>0&&(S.stopPropagation(),S.preventDefault(),E(!0))},P=S=>{S.stopPropagation(),S.preventDefault(),f==null||f({uuid:a})},W=S=>{S.stopPropagation(),S.preventDefault(),u==null||u({uuid:a,operations:{invisible:!g.invisible}})},X=S=>{S.stopPropagation(),S.preventDefault(),v==null||v({uuid:i,position:c})},L=S=>{S.stopPropagation(),S.preventDefault(),u==null||u({uuid:a,operations:{locked:!g.locked}})},k=S=>{S.preventDefault(),m==null||m({uuids:[i],positions:[c]})};return I.useMemo(()=>{R.current=r;function S(B){return B==="rect"?s.createElement(pr,{className:x}):B==="circle"?s.createElement(cr,{className:x}):B==="text"?s.createElement(wr,{className:x}):B==="path"?s.createElement(Pc,{className:x}):B==="image"?s.createElement(mr,{className:x}):B==="svg"?s.createElement(yr,{className:x}):B==="group"?s.createElement(hr,{className:x}):B==="html"?s.createElement(fr,{className:x}):s.createElement("span",{className:x})}return s.createElement("span",{key:a,style:n,className:fe(C,t,p?z:null),onClick:Y,onMouseOver:T,onMouseLeave:Q,onContextMenu:k},s.createElement("span",{className:O},S(o),s.createElement("span",null,r)),M&&s.createElement("span",{className:j},o==="group"&&s.createElement(lc,{className:w,onClick:X}),g.invisible?s.createElement(gr,{className:w,onClick:W}):s.createElement(Aa,{className:w,onClick:W}),g.locked?s.createElement(Dc,{className:w,onClick:L}):s.createElement(Wc,{className:w,onClick:L}),s.createElement(dr,{className:w,onClick:P})),b&&s.createElement("span",{className:A},s.createElement(Ut,{ref:F,size:"small",defaultValue:r,onBlur:H,onClick:_,onKeyDown:D,onChange:V,onContextMenu:B=>{B.stopPropagation(),B.preventDefault()}})))},[a,r,b,o,M,g,p])};function Z3(e,t){const n=[],{position:o}=t;if(Array.isArray(e)){const i=[...o];e.forEach((a,r)=>{i.push(r),n.push(pl(a,Object.assign(Object.assign({},t),{position:[...i]}))),i.pop()})}return n}const pl=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:r,onContextMenu:c,onGoToGroup:d,position:l,selectedKeys:h}=t,u={key:e.key,title:s.createElement(U3,{parentModName:n,uuid:e.key,title:e.title,position:l,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:r,onContextMenu:c,onGoToGroup:d,isSelected:h==null?void 0:h.includes(e.key)}),children:[]};if(Array.isArray(e.children)){const f=[...l];e.children.forEach((m,v)=>{f.push(v),u.children.push(pl(m,Object.assign(Object.assign({},t),{position:[...f]}))),f.pop()})}return u},{DirectoryTree:Q3}=nr,Ws="base-element-tree",sa=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},yl=s.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:r,onOperationToggle:c,onSelect:d,onContextMenu:l,selectedKeys:h,onDrop:u,defaultExpandedKeys:f,onDelete:m,onExpand:v,onGoToGroup:g}=e,p=(E,M)=>{const R=[sa(M.node.pos)],C=[E[0]];d==null||d({uuids:C,positions:R})},b=({uuid:E})=>{m==null||m({uuid:E})};return I.useMemo(()=>{const E=Z3(a||[],{parentModName:Ws,generateClassName:G,onSelect:M=>{d==null||d(M)},onContextMenu:l,onTitleChange:r,onOperationToggle:c,onDelete:b,onGoToGroup:g,position:[],selectedKeys:h||[]});return s.createElement(Q3,{ref:t,height:n,style:i,className:fe(G(Ws),o),showLine:!0,blockNode:!0,selectedKeys:h,switcherIcon:s.createElement(Ia,null),icon:null,onSelect:p,treeData:E,defaultExpandedKeys:f,onExpand:v,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:M=>{const{dragNode:y,node:R,dropToGap:C,dropPosition:w}=M,O=sa(y.pos),A=sa(R.pos);C===!0&&w>=0?A[A.length-1]=w:R.dragOverGapBottom===!0?A[A.length-1]=A[A.length-1]+1:R.dragOverGapTop===!0?A[A.length-1]=Math.max(0,A[A.length-1]-1):R.dragOver===!0&&A.push(0),u==null||u({from:O,to:A})}})},[o,i,p,a,h])}),on="node",J3=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:r,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:f,onSelect:m,operations:v,isSelected:g}=e,[p,b]=I.useState(!1),[E,M]=I.useState(!1),y=I.useRef(r),R=l(d,on),C=l(d,on,"icon"),w=l(d,on,"title"),O=l(d,on,"title","input"),A=l(d,on,"title","icon"),x=l(d,on,"action"),j=l(d,on,"selected"),z=I.useRef(0),N=I.useRef(null);I.useEffect(()=>{var W;p===!0&&((W=N.current)===null||W===void 0||W.focus())},[p]);const F=W=>{b(!1),h==null||h({uuid:a,value:W.target.value||""})},H=W=>{y.current=W.target.value||""},V=W=>{var X;W.code==="Enter"&&(b(!1),h==null||h({uuid:a,value:((X=W==null?void 0:W.target)===null||X===void 0?void 0:X.value)||""}))},D=W=>{W.stopPropagation(),W.preventDefault()},_=W=>{W.stopPropagation(),M(!0)},T=W=>{W.stopPropagation(),M(!1)},Q=W=>{const X=Date.now(),L=X-z.current;z.current=X,m==null||m({uuids:[i],positions:[c]}),L<=300&&L>0&&(W.stopPropagation(),W.preventDefault(),b(!0))},Y=W=>{W.stopPropagation(),W.preventDefault(),f==null||f({uuid:a})},P=W=>{W.stopPropagation(),W.preventDefault(),u==null||u({uuid:a,operations:{invisible:!v.invisible}})};return I.useMemo(()=>(y.current=r,s.createElement("span",{key:a,style:n,className:fe(R,t,g?j:null),onClick:Q,onMouseOver:_,onMouseLeave:T},s.createElement("span",{className:w},s.createElement(Mc,{className:A}),s.createElement("span",null,r)),E&&s.createElement("span",{className:x},v.invisible?s.createElement(gr,{className:C,onClick:P}):s.createElement(Aa,{className:C,onClick:P}),s.createElement(dr,{className:C,onClick:Y})),p&&s.createElement("span",{className:O},s.createElement(Ut,{ref:N,size:"small",defaultValue:r,onBlur:F,onClick:D,onKeyDown:V,onChange:H})))),[a,r,p,o,E,v,g])};function K3(e,t){const n=[],{position:o}=t;if(Array.isArray(e)){const i=[...o];e.forEach((a,r)=>{i.push(r),n.push(q3(a,Object.assign(Object.assign({},t),{position:[...i]}))),i.pop()})}return n}const q3=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:r,position:c,selectedKeys:d}=t;return{key:e.key,title:s.createElement(J3,{parentModName:n,uuid:e.key,title:e.title,position:c,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:r,isSelected:d==null?void 0:d.includes(e.key)})}},{DirectoryTree:e6}=nr,Hs="base-page-tree",ra=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},t6=s.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:r,onOperationToggle:c,onSelect:d,selectedKeys:l,onDrop:h,defaultExpandedKeys:u,expandedKeys:f,onDelete:m}=e,v=(p,b)=>{const M=[ra(b.node.pos)],y=[p[0]];d==null||d({uuids:y,positions:M})},g=({uuid:p})=>{m==null||m({uuid:p})};return I.useMemo(()=>{const p=K3(a||[],{parentModName:Hs,generateClassName:G,onTitleChange:r,onOperationToggle:c,onDelete:g,position:[],selectedKeys:l||[]});return s.createElement(e6,{ref:t,height:n,style:i,className:fe(G(Hs),o),showLine:!0,blockNode:!0,multiple:!0,selectedKeys:l,switcherIcon:s.createElement(Ia,null),icon:null,onSelect:v,treeData:p,defaultExpandedKeys:u,expandedKeys:f,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:b=>{const{dragNode:E,node:M,dropToGap:y,dropPosition:R}=b,C=ra(E.pos),w=ra(M.pos);y===!0&&R>=0?w[w.length-1]=R:M.dragOverGapBottom===!0?w[w.length-1]=w[w.length-1]+1:M.dragOverGapTop===!0?w[w.length-1]=Math.max(0,w[w.length-1]-1):M.dragOver===!0&&w.push(0),h==null||h({from:C,to:w})}})},[o,i,v,a,l])});var n6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const o6=e=>{const{value:t,onChange:n}=e,o=n6(e,["value","onChange"]),i=r=>{n==null||n(r)},a=()=>{i(!t)};return s.createElement(Re,Object.assign({},o,{type:t?"primary":"default",onClick:a}))},i6="ElementDetail",Zt=()=>{const[e]=za(i6);return e},io="base-element-basic-attribute",kt=e=>ze.number(e*1)?be(e*1):e,Gs=e=>{if(ze.number(e*1)){const t=be(e*1);return ft(t)}return e},a6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,r=I.useRef(null),c=G(io),d=G(io,"row"),l=G(io,"col"),h=G(io,"input"),u=G(io,"form-item"),f=Zt(),m=v=>{var g;((g=o==null?void 0:o.operations)===null||g===void 0?void 0:g.limitRatio)===!0&&(v!=null&&v.hasOwnProperty("w")?v.h=be(v.w/o.w*o.h):v!=null&&v.hasOwnProperty("h")&&(v.w=be(v.h/o.h*o.w))),i==null||i(v)};return I.useEffect(()=>{var v;const{type:g,x:p,y:b,w:E,h:M,angle:y=0,operations:R={}}=o||{},C={x:p,y:b,w:E,h:M,angle:y,operations:{limitRatio:R.limitRatio}};g==="group"&&(C.operations.deepResize=R.deepResize),(v=r.current)===null||v===void 0||v.setFieldsValue(C)},[o]),I.useMemo(()=>s.createElement(K,{ref:r,style:n,className:fe(c,t),onValuesChange:m},s.createElement(me,{className:d},s.createElement(J,{span:10,className:l},s.createElement(K.Item,{className:u,name:"x"},s.createElement(he,{className:h,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:kt,parser:kt}))),s.createElement(J,{span:10,className:l},s.createElement(K.Item,{className:u,name:"y"},s.createElement(he,{className:h,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:kt,parser:kt})))),s.createElement(me,{className:d},s.createElement(J,{span:10,className:l},s.createElement(K.Item,{className:u,name:"w"},s.createElement(he,{className:h,size:"small",placeholder:"Width",prefix:f.w,disabled:a,formatter:kt,parser:kt}))),s.createElement(J,{span:10,className:l},s.createElement(K.Item,{className:u,name:"h"},s.createElement(he,{className:h,size:"small",placeholder:"Height",prefix:f.h,disabled:a,formatter:kt,parser:kt}))),s.createElement(J,{span:4,className:l},s.createElement(K.Item,{className:u,name:["operations","limitRatio"]},s.createElement(o6,{icon:s.createElement(pc,null),size:"small",disabled:a})))),s.createElement(me,{className:d},s.createElement(J,{span:10,className:l},s.createElement(K.Item,{className:u,name:"angle"},s.createElement(he,{className:h,size:"small",placeholder:"Angle",prefix:s.createElement(kc,{style:{fontSize:14}}),disabled:a,formatter:Gs,parser:Gs,suffix:"°"})))),(o==null?void 0:o.type)==="group"&&s.createElement(me,{className:d},s.createElement(J,{span:18,className:l},f.deepResizeInGroup),s.createElement(J,{span:6,className:l},s.createElement(K.Item,{className:u,name:["operations","deepResize"]},s.createElement(tr,{size:"small"}))))),[f,a,o])},$e="base-element-field-multiple-color-picker",s6=["transparent","#FFFFFF","#000000","#AAAAAA","#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"],r6=({value:e="",onChange:t,className:n,diabledColorBlocks:o=!0})=>{const i=G($e,"color-block"),a=G($e,"color-block-active");return s.createElement(s.Fragment,null,!o&&s.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:10,paddingBottom:0}},s6.map(r=>s.createElement(Ll,{className:fe(i,{[a]:r.toUpperCase()===(e==null?void 0:e.toUpperCase())}),key:r,color:r,prefixCls:"rc-color-picker",onClick:()=>{t==null||t(r)}}))),s.createElement(Pl,{className:n,value:new Rl(e),onChange:r=>{const c=`#${r.toHex8().toUpperCase()}`,d=c.endsWith("FF")?`#${r.toHex().toUpperCase()}`:c;t==null||t(d)}}))},wl=16,Ys=e=>{var t,n;const o=(t=e.currentTarget.parentElement)===null||t===void 0?void 0:t.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),a=e.clientX-o.x-wl/2;let r=parseFloat((n=a/i.width)===null||n===void 0?void 0:n.toFixed(2));return r=Math.min(Math.max(r,0),1),r};function l6(e){const{mode:t,value:n,internalColor:o,internalLinearGradient:i,internalRadialGradient:a,currentPickedColor:r,onChange:c,onSelectStop:d}=e,[l,h]=I.useState(Ii(n)),[u,f]=I.useState(null),m=I.useRef(!1),v=G($e,"gradient-root"),g=G($e,"gradient-delete"),p=G($e,"gradient"),b=G($e,"gradient-bar"),E=G($e,"gradient-point"),M=G($e,"gradient-point-active");I.useEffect(()=>{var x;const j=Ii(n);h(j),["linear-gradient","radial-gradient"].includes(n==null?void 0:n.type)&&(u||f((x=n==null?void 0:n.stops)===null||x===void 0?void 0:x[0]))},[n]),I.useEffect(()=>{u?d==null||d(Object.assign({},u)):d==null||d(u)},[u]);const y=x=>{x.stopPropagation(),m.current=!0;const j=Ys(x);let z=null;if(t==="linear-gradient"?z=i:t==="radial-gradient"&&(z=a),z){const N=[...z.stops];for(let H=0;H<N.length;H++){const V=N[H],D=N[H+1],_={offset:j,color:r};if(V.offset===j)break;if(j<V.offset){N.unshift(_),f(_);break}else if(V.offset<j&&j<(D==null?void 0:D.offset)){N.splice(H+1,0,_),f(_);break}else if(j>V.offset&&!D){N.push(_),f(_);break}if(!D)break}const F=Object.assign(Object.assign({},z),{stops:N});c==null||c(F)}},R=x=>{if(m.current===!0&&u){const j=Ys(x);let z=null;if(t==="linear-gradient"?z=i:t==="radial-gradient"&&(z=a),z){const N=[...z.stops];for(let V=0;V<N.length;V++){const D=N[V];if(D.offset===u.offset){D.offset=j,f(Object.assign({},D));break}}const F=N.sort((V,D)=>V.offset-D.offset),H=Object.assign(Object.assign({},z),{stops:F});c==null||c(H)}}},C=x=>{x.stopPropagation(),m.current=!1},w=(x,j)=>{x.stopPropagation(),f(j),m.current=!0},O=()=>{let x=null;t==="linear-gradient"?x=i:t==="radial-gradient"&&(x=a);let j=-1;if(x&&u){const z=[...x.stops];for(let N=0;N<z.length;N++)if(z[N].offset===u.offset){j=N;break}if(j>=0){z.splice(j,1);const N=Object.assign(Object.assign({},x),{stops:z});c==null||c(N)}}},A=()=>{m.current=!1};return I.useMemo(()=>{var x,j,z;return s.createElement(s.Fragment,null,(t==="linear-gradient"||t==="radial-gradient")&&s.createElement("div",{className:v},s.createElement("div",{className:p,"data-css":l,style:{background:l}},s.createElement("div",{className:b,onMouseDown:y,onMouseUp:C,onMouseMove:R,onMouseLeave:C},(z=(j=(x=t==="linear-gradient"?i:a)===null||x===void 0?void 0:x.stops)===null||j===void 0?void 0:j.map)===null||z===void 0?void 0:z.call(j,(N,F)=>s.createElement("span",{key:F,className:fe({[E]:!0,[M]:(u==null?void 0:u.offset)===N.offset}),style:{left:`calc(${N.offset*100}% - ${wl/2}px)`,background:N.color},onMouseDown:H=>{w(H,N)},onMouseUp:A})))),s.createElement("div",{className:g,onClick:N=>{N.stopPropagation(),O()}},s.createElement(Sc,null))))},[t,l,r,o,i,a,u])}function $s(e){let t="solid";return e&&(e!=null&&e.type)&&(t=e.type),t}function c6(e){const{className:t,value:n,onChange:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:r}=e,[c,d]=I.useState(Ii(n)),[l,h]=I.useState($s(n)),[u,f]=I.useState("#000000"),[m,v]=I.useState(null),[g,p]=I.useState(null),[b,E]=I.useState(null),M=I.useRef(null),y=I.useRef(null),R=I.useRef(null),C=G($e),w=G($e,"header"),O=G($e,"internal-picker"),A=G($e,"radio-group"),x=G($e,"row"),j=G($e,"col"),z=G($e,"input"),N=G($e,"form-item");I.useEffect(()=>{d(Ii(n)),h($s(n)),typeof n=="string"?(v(n),f(n)):(n==null?void 0:n.type)==="linear-gradient"?p(n):(n==null?void 0:n.type)==="radial-gradient"&&E(n)},[n]),I.useEffect(()=>{var _,T;l==="linear-gradient"&&(n==null?void 0:n.type)===l?(_=y.current)===null||_===void 0||_.setFieldsValue(n):l==="radial-gradient"&&(n==null?void 0:n.type)===l&&((T=R.current)===null||T===void 0||T.setFieldsValue(n))},[l,n]);const F=_=>{var T,Q,Y,P,W,X;let L;_==="linear-gradient"?(L={type:"linear-gradient",start:{x:0,y:0},end:{x:0,y:(i==null?void 0:i.h)||0},stops:[]},typeof n=="string"?(L.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],p(L)):(n==null?void 0:n.type)==="radial-gradient"&&(L.stops=[...(n==null?void 0:n.stops)||[]],p(L)),(T=y.current)===null||T===void 0||T.setFieldsValue(L)):_==="radial-gradient"?(L={type:"radial-gradient",inner:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:0},outer:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:Math.min(((i==null?void 0:i.w)||0)/2,((i==null?void 0:i.h)||0)/2)},stops:[]},typeof n=="string"?(L.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],E(L)):(n==null?void 0:n.type)==="linear-gradient"&&(L.stops=[...(n==null?void 0:n.stops)||[]],E(L)),(Q=R.current)===null||Q===void 0||Q.setFieldsValue(L)):_==="solid"&&(L=n,(n==null?void 0:n.type)==="linear-gradient"?(L=((P=(Y=n==null?void 0:n.stops)===null||Y===void 0?void 0:Y[0])===null||P===void 0?void 0:P.color)||"#000000",v(L)):(n==null?void 0:n.type)==="radial-gradient"&&(L=((X=(W=n==null?void 0:n.stops)===null||W===void 0?void 0:W[0])===null||X===void 0?void 0:X.color)||"#000000",v(L))),L&&(o==null||o(L))},H=_=>{if(l==="solid")o==null||o(_.color);else if(M.current){if(l==="linear-gradient"&&g&&Array.isArray(g==null?void 0:g.stops)){const T=[...g.stops];for(let Y=0;Y<T.length;Y++)if(T[Y].offset===M.current.offset){T[Y].color=_.color;break}const Q=Object.assign(Object.assign({},g),{stops:T});p(Q),o==null||o(Q)}else if(l==="radial-gradient"&&b&&Array.isArray(b==null?void 0:b.stops)){const T=[...b.stops];for(let Y=0;Y<T.length;Y++)if(T[Y].offset===M.current.offset){T[Y].color=_.color;break}const Q=Object.assign(Object.assign({},b),{stops:T});E(Q),o==null||o(Q)}}},V=_=>{const T=Object.assign({},g);_!=null&&_.start&&(T.start=Object.assign(Object.assign({},T.start),_.start)),_!=null&&_.end&&(T.end=Object.assign(Object.assign({},T.end),_.end)),o==null||o(T)},D=_=>{const T=Object.assign({},b);_!=null&&_.inner&&(T.inner=Object.assign(Object.assign({},T.inner),_.inner)),_!=null&&_.outer&&(T.outer=Object.assign(Object.assign({},T.outer),_.outer)),o==null||o(T)};return I.useMemo(()=>s.createElement("div",{className:fe(C,t)},!a&&!r&&s.createElement("div",{className:w},s.createElement(at.Group,{className:A,size:"small",buttonStyle:"solid",value:l,onChange:({target:{value:_}})=>{F(_)}},s.createElement(at.Button,{value:"solid"},s.createElement(Bc,null)),!a&&s.createElement(at.Button,{value:"linear-gradient"},s.createElement(Oc,null)),!r&&s.createElement(at.Button,{value:"radial-gradient"},s.createElement(Cc,null)))),!a&&l==="linear-gradient"&&s.createElement("div",{style:{marginBottom:10}},s.createElement(K,{ref:y,onValuesChange:V},s.createElement(me,{className:x},s.createElement(J,{className:j,span:"4"},"Start"),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["start","x"]},s.createElement(he,{className:z,size:"small",prefix:"X"}))),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["start","y"]},s.createElement(he,{className:z,size:"small",prefix:"Y"})))),s.createElement(me,{className:x},s.createElement(J,{className:j,span:"4"},"End"),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["end","x"]},s.createElement(he,{className:z,size:"small",prefix:"X"}))),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["end","y"]},s.createElement(he,{className:z,size:"small",prefix:"Y"})))))),!r&&l==="radial-gradient"&&s.createElement("div",{style:{marginBottom:10}},s.createElement(K,{ref:R,onValuesChange:D},s.createElement(me,{className:x},s.createElement(J,{className:j,span:"4"},"Inner"),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["inner","x"]},s.createElement(he,{className:z,size:"small",prefix:"X"}))),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["inner","y"]},s.createElement(he,{className:z,size:"small",prefix:"Y"})))),s.createElement(me,{className:x},s.createElement(J,{className:j,span:"4"}),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["inner","radius"]},s.createElement(he,{className:z,size:"small",prefix:"R"})))),s.createElement(me,{className:x},s.createElement(J,{className:j,span:"4"},"Outer"),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["outer","x"]},s.createElement(he,{className:z,size:"small",prefix:"X"}))),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["outer","y"]},s.createElement(he,{className:z,size:"small",prefix:"Y"})))),s.createElement(me,{className:x},s.createElement(J,{className:j,span:"4"}),s.createElement(J,{className:j,span:"10"},s.createElement(K.Item,{className:N,name:["outer","radius"]},s.createElement(he,{className:z,size:"small",prefix:"R"})))))),(!a||!r)&&(l==="linear-gradient"||l==="radial-gradient")&&s.createElement(l6,{mode:l,value:n,currentPickedColor:u,internalColor:m,internalLinearGradient:g,internalRadialGradient:b,onChange:_=>{(_==null?void 0:_.type)==="linear-gradient"?(p(_),o==null||o(_)):(_==null?void 0:_.type)==="radial-gradient"&&(E(_),o==null||o(_))},onSelectStop:_=>{_!=null&&_.color&&f(_.color),M.current=_}}),s.createElement(r6,{diabledColorBlocks:["linear-gradient","radial-gradient"].includes(l),value:u,className:O,onChange:_=>{f(_),H({color:_})}})),[l,c,m,g,b,u,a,r])}const Xs="base-element-field-multiple-color";function vn(e){const{value:t,onChange:n,disabled:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:r}=e,c=Zt(),l=(p=>{let b="";return typeof p=="string"?b=p:["linear-gradient","radial-gradient"].includes(p==null?void 0:p.type)&&(b=c.gradient),b})(t),h=typeof t=="string",{container:u,getContainer:f}=I.useContext(pn),m=G(Xs),v=G(Xs,"preview"),g=I.useRef(u);return I.useEffect(()=>{!g.current&&u&&(g.current=u)},[u]),I.useMemo(()=>{const p=Kc(t||"transparent");return s.createElement(s.Fragment,null,s.createElement(Ut,{className:m,size:"small",disabled:o,prefix:o?s.createElement("span",null):s.createElement(or,{placement:"left",getPopupContainer:f,style:{padding:0},content:s.createElement(c6,{value:t,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:r,onChange:n}),trigger:"click"},s.createElement("span",{className:v,style:{background:p}})),readOnly:!h,value:l,onChange:b=>{n==null||n(b.target.value)}}))},[t,n,o,i])}const la=e=>s.createElement(ne,Object.assign({},e),s.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},s.createElement("path",{d:"M512 384a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m0 170.666667a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m170.666667 0a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m-170.666667 170.666666a42.666667 42.666667 0 1 0-42.666667-42.666666 42.666667 42.666667 0 0 0 42.666667 42.666666z m341.333333-597.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v682.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h682.666666a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667z m-42.666666 682.666667H213.333333V213.333333h597.333334zM341.333333 554.666667a42.666667 42.666667 0 1 0-42.666666-42.666667 42.666667 42.666667 0 0 0 42.666666 42.666667z"}))),ao="base-element-border-attribute",xa=4;function so(e){const{borderRadius:t,borderWidth:n,borderColor:o,boxSizing:i,borderDash:a}=(e==null?void 0:e.detail)||{};let r="solid",c=xa;Array.isArray(a)&&(a==null?void 0:a.length)>0&&a[0]>=1&&typeof n=="number"&&(r="dash",c=Math.ceil(a[0]));const d={borderRadiusList:[0,0,0,0],borderWidthList:[0,0,0,0],borderColor:o,borderType:r,boxSizing:i,borderDashNum:c};return typeof t=="number"?(d.borderRadius=t,d.borderRadiusList=[t,t,t,t]):Array.isArray(t)?d.borderRadiusList=[t[0]||0,t[1]||0,t[2]||0,t[3]||0]:d.borderRadius=0,typeof n=="number"?(d.borderWidth=n,d.borderWidthList=[n,n,n,n]):Array.isArray(n)?d.borderWidthList=[n[0]||0,n[1]||0,n[2]||0,n[3]||0]:d.borderWidth=0,d}const d6=e=>{var t,n;const{className:o,style:i,element:a,disabled:r,onChange:c}=e,d=I.useRef(null),l=G(ao),h=G(ao,"row"),u=G(ao,"col"),f=G(ao,"input"),m=G(ao,"form-item"),[v,g]=I.useState(Array.isArray((t=a==null?void 0:a.detail)===null||t===void 0?void 0:t.borderRadius)),[p,b]=I.useState(Array.isArray((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.borderWidth)),[E,M]=I.useState(p),y=Zt(),R=C=>{var w,O;const A=so(a),{borderColor:x,boxSizing:j,borderType:z,borderDashNum:N}=C,F={};if(x&&(F.borderColor=x),j&&(F.boxSizing=j),p===!0&&C.borderWidthList){const H=[0,0,0,0],V=Array.from((C==null?void 0:C.borderWidthList)||[null,null,null,null]);for(let D=0;D<4;D++){const _=V[D];typeof _=="number"?H[D]=_:H[D]=((w=A==null?void 0:A.borderWidthList)===null||w===void 0?void 0:w[D])||0,F.borderWidth=H}}else typeof C.borderWidth=="number"&&(F.borderWidth=C.borderWidth);if(v===!0&&C.borderRadiusList){const H=[0,0,0,0],V=Array.from((C==null?void 0:C.borderRadiusList)||[null,null,null,null]);for(let D=0;D<4;D++){const _=V[D];typeof _=="number"?H[D]=_:H[D]=((O=A==null?void 0:A.borderRadiusList)===null||O===void 0?void 0:O[D])||0,F.borderRadius=H}}else typeof C.borderRadius=="number"&&(F.borderRadius=C.borderRadius);p===!0?F.borderDash=[]:z==="solid"?F.borderDash=[]:z==="dash"?F.borderDash=[xa,xa]:N&&N>0&&(F.borderDash=[N,N]),c==null||c({detail:F})};return I.useEffect(()=>{var C,w,O;const A=Array.isArray((C=a==null?void 0:a.detail)===null||C===void 0?void 0:C.borderWidth),x=Array.isArray((w=a==null?void 0:a.detail)===null||w===void 0?void 0:w.borderRadius);b(A),g(x),M(A);const j=so(a);(O=d.current)===null||O===void 0||O.setFieldsValue(j)},[a]),I.useMemo(()=>{const C=so(a);return s.createElement(K,{ref:d,style:i,className:fe(l,o),onValuesChange:R},s.createElement(s.Fragment,null,s.createElement(me,{className:h},s.createElement(J,{span:16,className:u},p?s.createElement(Ut,{className:f,size:"small",prefix:s.createElement(la,{style:{fontSize:14}}),disabled:!0,value:y.mixedBorderWidth}):s.createElement(K.Item,{className:m,name:"borderWidth"},s.createElement(he,{className:f,size:"small",min:0,placeholder:"Border Width",prefix:s.createElement(la,{style:{fontSize:14}}),disabled:r||p}))),s.createElement(J,{span:4,className:u},s.createElement(Re,{icon:s.createElement(la,null),size:"small",disabled:r,type:p?"primary":"default",onClick:()=>{var w;const O=!p;if(b(O),M(O),!O){const A=so(a),x=A.borderWidth||((w=A.borderWidthList)===null||w===void 0?void 0:w[0])||0;R({borderWidth:x})}}}))),p&&s.createElement(s.Fragment,null,s.createElement(me,{className:h},s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderWidthList",0]},s.createElement(he,{className:f,size:"small",prefix:s.createElement(gc,null),disabled:r||!p,min:0}))),s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderWidthList",1]},s.createElement(he,{className:f,size:"small",prefix:s.createElement(mc,null),disabled:r||!p,min:0})))),s.createElement(me,{className:h},s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderWidthList",2]},s.createElement(he,{className:f,size:"small",prefix:s.createElement(uc,null),disabled:r||!p,min:0}))),s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderWidthList",3]},s.createElement(he,{className:f,size:"small",prefix:s.createElement(fc,null),disabled:r||!p,min:0})))))),!["circle"].includes(a==null?void 0:a.type)&&s.createElement(s.Fragment,null,s.createElement(me,{className:h},s.createElement(J,{span:16,className:u},v?s.createElement(Ut,{className:f,size:"small",prefix:s.createElement(Ka,{style:{fontSize:14}}),disabled:!0,value:y.mixedBorderRadius}):s.createElement(K.Item,{className:m,name:"borderRadius"},s.createElement(he,{className:f,size:"small",placeholder:"Radius",prefix:s.createElement(Ka,{style:{fontSize:14}}),disabled:r||v||E,min:0}))),s.createElement(J,{span:4,className:u},s.createElement(Re,{icon:s.createElement(Ic,null),size:"small",disabled:r||E,type:v?"primary":"default",onClick:()=>{var w;const O=!v;if(g(O),!O){const A=so(a),x=A.borderRadius||((w=A.borderRadiusList)===null||w===void 0?void 0:w[0])||0;R({borderRadius:x})}}}))),v&&s.createElement(s.Fragment,null,s.createElement(me,{className:h},s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderRadiusList",0]},s.createElement(he,{className:f,size:"small",placeholder:"",prefix:s.createElement(bc,null),disabled:r||!v||E,min:0}))),s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderRadiusList",1]},s.createElement(he,{className:f,size:"small",placeholder:"",prefix:s.createElement(Ec,null),disabled:r||!v||E,min:0})))),s.createElement(me,{className:h},s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderRadiusList",2]},s.createElement(he,{className:f,size:"small",placeholder:"",prefix:s.createElement(yc,null),disabled:r||!v||E,min:0}))),s.createElement(J,{span:12,className:u},s.createElement(K.Item,{className:m,name:["borderRadiusList",3]},s.createElement(he,{className:f,size:"small",placeholder:"",prefix:s.createElement(wc,null),disabled:r||!v||E,min:0})))))),s.createElement(me,{className:h},s.createElement(J,{className:u,span:"11"},s.createElement(K.Item,{className:m,name:"boxSizing"},s.createElement(qe,{size:"small",disabled:r},s.createElement(qe.Option,{value:"border-box"},y.inside),s.createElement(qe.Option,{value:"content-box"},y.outside),s.createElement(qe.Option,{value:"center-line"},y.centerLine)))),s.createElement(J,{className:u,span:"13"},s.createElement(K.Item,{className:m,name:"borderColor"},s.createElement(vn,{elementSize:a?mn(a):void 0,disabled:r,disabledLinearGradient:!0,disabledRadialGradient:!0})))),s.createElement(me,{className:h},s.createElement(J,{className:u,span:"11"},s.createElement(K.Item,{className:m,name:"borderType"},s.createElement(qe,{size:"small",disabled:r||p},s.createElement(qe.Option,{value:"solid"},y.solid),s.createElement(qe.Option,{value:"dash"},y.dash)))),s.createElement(J,{className:u,span:"13"},C.borderType==="dash"&&s.createElement(K.Item,{className:m,name:"borderDashNum"},s.createElement(he,{disabled:r||p,className:f,size:"small",style:{width:"100%"},prefix:s.createElement(hc,{style:{fontSize:14}})})))))},[y,a,r,v,p,E])},u6="base-element-detail-circle",h6=e=>{const{className:t,style:n}=e,o=G(u6);return I.useMemo(()=>s.createElement("div",{style:n,className:fe(o,t)}),[n,t])};var f6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{TextArea:m6}=Ut,Tn="base-element-field-image-picker",{useCallback:Us}=s,g6=["image/png","image/jpeg","image/jpg","image/png"],v6=({value:e="",onChange:t})=>{const[n,o]=I.useState(e),[i,a]=I.useState("free"),r=G(Tn),c=G(Tn,"box"),d=G(Tn,"entity"),l=G(Tn,"action"),h=G(Tn,"action-text"),u=G(Tn,"action-upload"),f=Us(p=>{const b=p||"";let E=3;const M=300;return b.length>128&&(E=10),{rows:E,width:M}},[n]),m=p=>{t==null||t(p||e)},v=p=>{o(p),ze.imageSrc(p)&&m(p)},g=Us(()=>{i!=="picking"&&(Ta({success:p=>f6(void 0,void 0,void 0,function*(){if(g6.includes(p.file.type)!==!0){Mo.error(`File's type "${p.file.type}" is not supported!`);return}try{const b=yield Uc(p.file);v(b.toString())}catch{Mo.error(`Failed to parse file ${p.file.name}`)}a("free")}),error:p=>{console.log(p),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return I.useMemo(()=>s.createElement("div",{className:r},s.createElement("div",{className:c},s.createElement("img",{className:d,src:e||n}),s.createElement("div",{className:l},s.createElement("div",{className:h},s.createElement(or,{content:()=>s.createElement("div",null,s.createElement(m6,{value:e||n,style:{width:f(e||n).width},rows:f(e||n).rows,onChange:p=>{v(p.target.value||"")}})),trigger:"click"},s.createElement("span",{style:{display:"inline-block",width:"100%",height:"100%",lineHeight:"50px"}},"URL"))),s.createElement("div",{onClick:g,className:u},s.createElement("span",null,"Upload"))))),[e,n])},p6="base-element-detail-image",y6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:r,disabled:c}=e,d=G(p6),l=I.useRef(null),h=f=>{const{src:m=""}=(f==null?void 0:f.detail)||{};return{src:m,imageResource:(a==null?void 0:a(m))||""}},u=f=>{const m={};if(f!=null&&f.imageResource){const{assetId:v}=r({type:"image",value:f.imageResource});v&&un(v)&&(m.src=v)}i==null||i({detail:m})};return I.useEffect(()=>{var f;const m=h(o);(f=l.current)===null||f===void 0||f.setFieldsValue(m)},[o]),I.useMemo(()=>s.createElement("div",{style:n,className:fe(d,t)},s.createElement(K,{ref:l,onValuesChange:u},s.createElement(K.Item,{name:"imageResource"},s.createElement(v6,null)))),[o,c])},Yo="base-element-detail-path",w6=e=>{const{fill:t,stroke:n}=(e==null?void 0:e.detail)||{};return{fill:t,stroke:n}},b6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,r=I.useRef(null),c=G(Yo),d=G(Yo,"row"),l=G(Yo,"col"),h=G(Yo,"form-item"),u=Zt(),f=m=>{const v=m;i==null||i({detail:v})};return I.useEffect(()=>{var m;const v=w6(o);(m=r.current)===null||m===void 0||m.setFieldsValue(v)},[o]),I.useMemo(()=>s.createElement("div",{style:n,className:fe(c,t)},s.createElement(K,{ref:r,onValuesChange:f},s.createElement(me,{className:d},s.createElement(J,{className:l,span:"10"},u.fill),s.createElement(J,{className:l,span:"14"},s.createElement(K.Item,{className:h,name:"fill"},s.createElement(vn,{disabled:a})))),s.createElement(me,{className:d},s.createElement(J,{className:l,span:"10"},u.stroke),s.createElement(J,{className:l,span:"14"},s.createElement(K.Item,{className:h,name:"stroke"},s.createElement(vn,{disabled:a})))))),[n,t])},E6="base-element-detail-rect",S6=e=>{const{className:t,style:n}=e,o=G(E6);return I.useMemo(()=>s.createElement("div",{style:n,className:fe(o,t)}),[n,t])};var C6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const ro="base-element-field-svg-picker",x6=["image/svg+xml"];function M6(e){const t=document.createElement("div");return t.innerHTML=e,document.querySelector("svg").setAttribute("_t",Date.now()+""),{__html:t.innerHTML}}const z6=({value:e="",onChange:t})=>{const[n,o]=I.useState(e),[i,a]=I.useState("free"),r=G(ro),c=G(ro,"box"),d=G(ro,"entity"),l=G(ro,"action"),h=G(ro,"action-upload"),u=v=>{t==null||t(v||e)},f=v=>{o(v),ze.svg(v)&&u(v)},m=I.useCallback(()=>{i!=="picking"&&(Ta({success:v=>C6(void 0,void 0,void 0,function*(){if(x6.includes(v.file.type)!==!0){Mo.error(`File's type "${v.file.type}" is not supported!`);return}try{let g=(yield Zc(v.file)).toString();g=g.substring(g.indexOf("<svg")),f(g)}catch{Mo.error(`Failed to parse file ${v.file.name}`)}a("free")}),error:v=>{console.log(v),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return I.useMemo(()=>s.createElement("div",{className:r},s.createElement("div",{className:c},s.createElement("div",{className:d,dangerouslySetInnerHTML:M6(e||n)}),s.createElement("div",{className:l},s.createElement("div",{onClick:m,className:h},s.createElement("span",null,"Upload"))))),[e,n])},I6="base-element-detail-svg",A6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:r,disabled:c}=e,d=G(I6),l=I.useRef(null),h=f=>{const{svg:m=""}=(f==null?void 0:f.detail)||{};return{svg:m,svgResource:(a==null?void 0:a(m))||""}},u=f=>{const m={};if(f!=null&&f.svgResource){const{assetId:v}=r({type:"svg",value:f.svgResource});v&&un(v)&&(m.svg=v)}i==null||i({detail:m})};return I.useEffect(()=>{var f;const m=h(o);(f=l.current)===null||f===void 0||f.setFieldsValue(m)},[o]),I.useMemo(()=>s.createElement("div",{style:n,className:fe(d,t)},s.createElement(K,{ref:l,onValuesChange:u},s.createElement(K.Item,{name:"svgResource"},s.createElement(z6,null)))),[o,c])},lo="base-element-detail-text",Nn={fontSize:20},{TextArea:T6}=Ut,Dn=e=>ze.number(e*1)?be(e*1):e,N6=e=>{const{color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:r,text:c=""}=(e==null?void 0:e.detail)||{};return{text:c,color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:r}},D6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,r=G(lo),c=G(lo,"row"),d=G(lo,"col"),l=G(lo,"switch"),h=G(lo,"form-item"),u=I.useRef(null);I.useEffect(()=>{var m;const v=N6(o);(m=u.current)===null||m===void 0||m.setFieldsValue(v)},[o]);const f=m=>{i==null||i({detail:m})};return I.useMemo(()=>s.createElement("div",{style:n,className:fe(r,t)},s.createElement(K,{ref:u,style:n,className:r,onValuesChange:f},s.createElement(me,{className:c},s.createElement(J,{span:"12",className:d},s.createElement(K.Item,{className:h,name:"verticalAlign"},s.createElement(at.Group,{disabled:a,className:l,size:"small"},s.createElement(at.Button,{value:"top"},s.createElement(Yc,{style:Nn})),s.createElement(at.Button,{value:"middle"},s.createElement(Gc,{style:Nn})),s.createElement(at.Button,{value:"bottom"},s.createElement(Hc,{style:Nn}))))),s.createElement(J,{span:"12",className:d},s.createElement(K.Item,{className:h,name:"textAlign"},s.createElement(at.Group,{disabled:a,className:l,size:"small"},s.createElement(at.Button,{value:"left"},s.createElement(sc,{style:Nn})),s.createElement(at.Button,{value:"center"},s.createElement(ac,{style:Nn})),s.createElement(at.Button,{value:"right"},s.createElement(rc,{style:Nn})))))),s.createElement(me,{className:c},s.createElement(J,{span:"10",className:d},"Text Color"),s.createElement(J,{span:"14",className:d},s.createElement(K.Item,{className:h,name:"color"},s.createElement(vn,{elementSize:o?mn(o):void 0,disabled:a,disabledLinearGradient:!0,disabledRadialGradient:!0})))),s.createElement(me,{className:c},s.createElement(J,{span:"10",className:d},"Font Size"),s.createElement(J,{span:"14",className:d},s.createElement(K.Item,{className:h,name:"fontSize"},s.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:Dn,parser:Dn})))),s.createElement(me,{className:c},s.createElement(J,{span:"10",className:d},"Font Weight"),s.createElement(J,{span:"14",className:d},s.createElement(K.Item,{className:h,name:"fontWeight"},s.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:100,max:1e3,min:100,formatter:Dn,parser:Dn})))),s.createElement(me,{className:c},s.createElement(J,{span:"10",className:d},"Line Height"),s.createElement(J,{span:"14",className:d},s.createElement(K.Item,{className:h,name:"lineHeight"},s.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:Dn,parser:Dn})))),s.createElement(me,{className:c},s.createElement(J,{span:"24",className:d},s.createElement(K.Item,{className:h,name:"text",style:{width:"100%"}},s.createElement(T6,{disabled:a,style:{width:"100%"},rows:3})))))),[n,t])},$o="base-element-detail-group",L6=e=>{const{overflow:t}=(e==null?void 0:e.detail)||{};return{overflow:t}},P6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,r=G($o),c=G($o,"row"),d=G($o,"col"),l=G($o,"form-item"),h=I.useRef(null),u=Zt();I.useEffect(()=>{var m;const v=L6(o);(m=h.current)===null||m===void 0||m.setFieldsValue(v)},[o]);const f=m=>{i==null||i({detail:m})};return I.useMemo(()=>s.createElement("div",{style:n,className:fe(r,t)},s.createElement(K,{ref:h,style:n,className:r,onValuesChange:f},s.createElement(me,{className:c},s.createElement(J,{className:d,span:"10"},u.overflow),s.createElement(J,{span:"12",className:d},s.createElement(K.Item,{className:l,name:"overflow"},s.createElement(qe,{size:"small",disabled:a},s.createElement(qe.Option,{value:"visible"},u.visible),s.createElement(qe.Option,{value:"hidden"},u.hidden))))))),[n,t,u])},R6="base-element-detail-attribute",O6=e=>{const{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}=e,r=G(R6);return I.useMemo(()=>s.createElement("div",{className:r},(t==null?void 0:t.type)==="circle"&&s.createElement(h6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="image"&&s.createElement(y6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="svg"&&s.createElement(A6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="group"&&s.createElement(P6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="path"&&s.createElement(b6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="rect"&&s.createElement(S6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="text"&&s.createElement(D6,{element:t,onChange:n})),[o,t])},Xo="base-element-content-attribute",k6=e=>{let{opacity:t}=(e==null?void 0:e.detail)||{};const{background:n}=(e==null?void 0:e.detail)||{};return typeof t=="number"&&t>=0&&t<=1||(t=1),{background:n,opacity:t}},_6=e=>{const{style:t,element:n,disabled:o,onChange:i,getElementAsset:a,createElementAsset:r}=e,c=I.useRef(null),d=G(Xo),l=G(Xo,"row"),h=G(Xo,"col"),u=G(Xo,"form-item"),f=g=>{const p=g;i==null||i({detail:p})},m=g=>{i==null||i(g)},v=Zt();return I.useEffect(()=>{var g;const p=k6(n);(g=c.current)===null||g===void 0||g.setFieldsValue(p)},[n]),I.useMemo(()=>s.createElement(s.Fragment,null,s.createElement(K,{ref:c,style:t,className:d,onValuesChange:f},["rect","circle","text","group"].includes(n==null?void 0:n.type)&&s.createElement(me,{className:l},s.createElement(J,{className:h,span:"10"},v.background),s.createElement(J,{className:h,span:"14"},s.createElement(K.Item,{className:u,name:"background"},s.createElement(vn,{elementSize:n?mn(n):void 0,disabled:o})))),s.createElement(me,{className:l},s.createElement(J,{className:h,span:"10"},v.opacity),s.createElement(J,{className:h,span:"14"},s.createElement(K.Item,{className:u,name:"opacity"},s.createElement(he,{disabled:o,size:"small",style:{width:"100%"},step:.1}))))),s.createElement(O6,{element:n,disabled:o,onChange:m,getElementAsset:a,createElementAsset:r})),[v,n,o,i])},Uo="base-element-shadow-attribute",j6=e=>{const{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}=(e==null?void 0:e.detail)||{};return{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}},V6=e=>{const{style:t,element:n,disabled:o,onChange:i}=e,a=I.useRef(null),r=G(Uo),c=G(Uo,"row"),d=G(Uo,"col"),l=G(Uo,"form-item"),h=f=>{const m=f;i==null||i({detail:m})},u=Zt();return I.useEffect(()=>{var f;const m=j6(n);(f=a.current)===null||f===void 0||f.setFieldsValue(m)},[n]),I.useMemo(()=>s.createElement(K,{ref:a,style:t,className:r,onValuesChange:h},s.createElement(me,{className:c},s.createElement(J,{className:d,span:"14"},s.createElement(K.Item,{className:l,name:"shadowColor"},s.createElement(vn,{elementSize:n?mn(n):void 0,disabled:o,disabledLinearGradient:!0,disabledRadialGradient:!0}))),s.createElement(J,{className:d,span:"10"},s.createElement(K.Item,{className:l,name:"shadowBlur"},s.createElement(he,{disabled:o,size:"small",style:{width:"100%"}})))),s.createElement(me,null,s.createElement(J,{className:d,span:"12"},s.createElement(K.Item,{className:l,name:"shadowOffsetX"},s.createElement(he,{disabled:o,size:"small",style:{width:"100%"},prefix:"X"}))),s.createElement(J,{className:d,span:"12"},s.createElement(K.Item,{className:l,name:"shadowOffsetY"},s.createElement(he,{disabled:o,size:"small",style:{width:"100%"},prefix:"Y"}))))),[u,n,o])},B6="base-element-detail",F6=wn(),W6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:r}=e,c=Zt(),d=G(B6);let l=o;o&&(l=Object.assign(Object.assign({},o||{}),{detail:Object.assign(Object.assign({},F6),o==null?void 0:o.detail)}));const h=[{key:"basic-attribute",label:c.basicAttributes,children:s.createElement(a6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}})},{key:"border-attribute",label:c.borderAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?s.createElement(d6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):s.createElement(Yt,{image:Yt.PRESENTED_IMAGE_SIMPLE,description:!1})},{key:"content-attribute",label:c.contentAttribute,children:s.createElement(_6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)},getElementAsset:a,createElementAsset:r})},{key:"shadow-attribute",label:c.shadowAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?s.createElement(V6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):s.createElement(Yt,{image:Yt.PRESENTED_IMAGE_SIMPLE,description:!1})}];return I.useMemo(()=>s.createElement("div",{style:n,className:fe(d,t)},s.createElement(Ma,{ghost:!0,items:h,size:"small",defaultActiveKey:h.map(u=>u.key)})),[l,c])},H6="LayoutDetail",ka=()=>{const[e]=za(H6);return e},co="base-element-basic-attribute",_t=e=>ze.number(e*1)?be(e*1):e,G6=e=>{const{className:t,style:n,layout:o,onChange:i,disabled:a,isGroupLayout:r}=e,c=I.useRef(null),d=G(co),l=G(co,"row"),h=G(co,"col"),u=G(co,"input"),f=G(co,"form-item"),m=ka(),v=g=>{i==null||i(g)};return I.useEffect(()=>{var g;const{x:p,y:b,w:E,h:M}=o||{},y={x:p,y:b,w:E,h:M};(g=c.current)===null||g===void 0||g.setFieldsValue(y)},[o]),I.useMemo(()=>s.createElement(K,{ref:c,style:n,className:fe(d,t),onValuesChange:v},!r&&s.createElement(me,{className:l},s.createElement(J,{span:10,className:h},s.createElement(K.Item,{className:f,name:"x"},s.createElement(he,{className:u,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:_t,parser:_t}))),s.createElement(J,{span:10,className:h},s.createElement(K.Item,{className:f,name:"y"},s.createElement(he,{className:u,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:_t,parser:_t})))),s.createElement(me,{className:l},s.createElement(J,{span:10,className:h},s.createElement(K.Item,{className:f,name:"w"},s.createElement(he,{className:u,size:"small",placeholder:"Width",prefix:m.w,disabled:a,formatter:_t,parser:_t}))),s.createElement(J,{span:10,className:h},s.createElement(K.Item,{className:f,name:"h"},s.createElement(he,{className:u,size:"small",placeholder:"Height",prefix:m.h,disabled:a,formatter:_t,parser:_t}))))),[m,a,o])},Zo="base-element-content-attribute",Y6=e=>{const{background:t,overflow:n="visible"}=e||{};return{background:t,overflow:n}},$6=e=>{const{style:t,layout:n,disabled:o,onChange:i}=e,a=I.useRef(null),r=G(Zo),c=G(Zo,"row"),d=G(Zo,"col"),l=G(Zo,"form-item"),h=f=>{const m=f;i==null||i({detail:m})},u=ka();return I.useEffect(()=>{var f;const m=Y6(n==null?void 0:n.detail);(f=a.current)===null||f===void 0||f.setFieldsValue(m)},[n]),I.useMemo(()=>s.createElement(s.Fragment,null,s.createElement(K,{ref:a,style:t,className:r,onValuesChange:h},s.createElement(me,{className:c},s.createElement(J,{className:d,span:"10"},u.background),s.createElement(J,{className:d,span:"14"},s.createElement(K.Item,{className:l,name:"background"},s.createElement(vn,{elementSize:n?mn(n):void 0,disabled:o})))),s.createElement(me,{className:c},s.createElement(J,{className:d,span:"10"},u.overflow),s.createElement(J,{span:"12",className:d},s.createElement(K.Item,{className:l,name:"overflow"},s.createElement(qe,{size:"small",disabled:o},s.createElement(qe.Option,{value:"visible"},u.visible),s.createElement(qe.Option,{value:"hidden"},u.hidden))))))),[u,n,o,i])},X6="base-layout-detail",U6=e=>{const{className:t,style:n,layout:o,onChange:i,isGroupLayout:a}=e,r=ka(),c=G(X6),d=[{key:"layout-attribute",label:r.layout,children:s.createElement(s.Fragment,null,s.createElement(G6,{isGroupLayout:a,layout:o,onChange:l=>{i==null||i(l)}}),s.createElement($6,{layout:o,onChange:l=>{i==null||i(l)}}))}];return I.useMemo(()=>s.createElement("div",{style:n,className:fe(c,t)},s.createElement(Ma,{ghost:!0,items:d,size:"small",defaultActiveKey:d.map(l=>l.key)})),[o,r])},Z6="ElementDesign",Q6="base-element-design",J6=e=>{var t;const{className:n,style:o,element:i,onElementChange:a,getElementAsset:r,createElementAsset:c,layout:d,onLayoutChange:l}=e,[h]=za(Z6),u=[{key:"element-detail",label:h.element,children:s.createElement(W6,{element:i,onChange:a,getElementAsset:r,createElementAsset:c})},{key:"layout-detail",label:h.layout,children:s.createElement(U6,{isGroupLayout:((t=d==null?void 0:d.operations)===null||t===void 0?void 0:t.position)==="relative",layout:d,onChange:l})},{key:"global",label:h.global,children:s.createElement("div",{style:{padding:20,textAlign:"center"}},"TODO")}];return I.useMemo(()=>s.createElement("div",{style:o,className:fe(G(Q6),n)},s.createElement(Ol,{size:"small",defaultActiveKey:u[0].key,items:u})),[i,a,r,c,d,l,h])},bl=e=>{var t;const n={uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,children:[],operations:e.operations||{}};return e.type==="group"&&Array.isArray((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.children)&&e.detail.children.forEach(o=>{n.children.push(bl(o))}),n};function Me(e){const t=[];return e.elements.forEach(n=>{const o=bl(n);t.push(o)}),t}const K6=e=>({uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,operations:e.operations||{}});function Io(e){const t=[];return e.elements.forEach(n=>{var o;if(n.type==="group"&&((o=n.extends)===null||o===void 0?void 0:o.isPage)===!0){const i=K6(n);t.push(i)}}),t}var q6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function Wt(e,t){if(e.length===0)return gt(t);const n=Be(e,t.elements),o={elements:[],assets:t.assets};if((n==null?void 0:n.type)==="group"){const{w:i,h:a,detail:r}=n,{children:c}=r,d=q6(r,["children"]),l={x:0,y:0,w:i,h:a,detail:Object.assign({},d),operations:{position:"relative"}};o.elements=gt(c||[]),o.layout=l}return o}function eu(e,t,n){if(e.length>0){const o=Be(e,n.elements);(o==null?void 0:o.type)==="group"&&(o.detail.children=t.elements)}}function tu(e,t,n){if(t.length>0&&(e!=null&&e.layout)){const o=e.layout,a=Be(t,n.elements);(a==null?void 0:a.type)==="group"&&(ze.w(o.w)&&(a.w=o.w),ze.h(o.h)&&(a.h=o.h),a.detail=Object.assign(Object.assign({},a.detail),o.detail))}}function El(e){var t,n,o,i,a,r,c,d,l,h;let u=e;for(let b=0;b<e.elements.length;b++){const E=e.elements[b];if(E.type==="group"&&((t=E.extends)===null||t===void 0?void 0:t.isPage)===!0)return u}const f=Na(e.elements);let{x:m,y:v,w:g,h:p}=f;return ze.x((n=e==null?void 0:e.layout)===null||n===void 0?void 0:n.x)&&(m=Math.min(m,(o=e.layout)===null||o===void 0?void 0:o.x)),ze.y((i=e==null?void 0:e.layout)===null||i===void 0?void 0:i.y)&&(v=Math.min(v,(a=e.layout)===null||a===void 0?void 0:a.y)),ze.w((r=e==null?void 0:e.layout)===null||r===void 0?void 0:r.w)&&(g=Math.max(g,(c=e.layout)===null||c===void 0?void 0:c.w)),ze.h((d=e==null?void 0:e.layout)===null||d===void 0?void 0:d.h)&&(p=Math.max(p,(l=e.layout)===null||l===void 0?void 0:l.h)),e.elements.forEach(b=>{b.x-=m,b.y-=v}),u={elements:[{uuid:$t(),name:"Default page",type:"group",x:0,y:0,w:g,h:p,detail:Object.assign(Object.assign(Object.assign({},(h=e.layout)===null||h===void 0?void 0:h.detail),{children:e.elements}),g===0||p===0?{overflow:"visible"}:{}),extends:{isPage:!0}}],assets:e.assets},u}const Sl="dark",Cl="en-US",xl="data";function nu(e){let t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});(e==null?void 0:e.defaultEditMode)==="page"&&(t=El(t));let n=[],o=t;const i=Io(t);e!=null&&e.defaultEditingGroupUUID&&(n=vt(e.defaultEditingGroupUUID,t.elements)),(e==null?void 0:e.defaultEditMode)==="page"&&n.length!==1&&i.length>0&&(n=[0]),o=Wt(n,t);const a=Me(o);return{localeCode:(e==null?void 0:e.defaultLocale)||Cl,themeMode:(e==null?void 0:e.defaultThemeMode)||Sl,editMode:(e==null?void 0:e.defaultEditMode)||xl,data:t,editingData:o,editingDataPosition:n,elementTree:a,pageTree:i,selectedUUIDs:(e==null?void 0:e.defaultSelectedElementUUIDs)||[],scaleInfo:Object.assign({scale:1,from:"init"},(e==null?void 0:e.defaultScaleInfo)||{})}}function ou(e){const t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});return{localeCode:Cl,themeMode:(e==null?void 0:e.themeMode)||Sl,editMode:(e==null?void 0:e.editMode)||xl,data:Object.assign({elements:[]},(e==null?void 0:e.data)||{}),editingData:Wt([],t),editingDataPosition:[],elementTree:[],pageTree:[],selectedUUIDs:[],scaleInfo:Object.assign({scale:1,from:"control"},(e==null?void 0:e.scaleInfo)||{})}}function iu(e,t){var n,o,i;switch(t.type){case"update":return t!=null&&t.payload?Object.assign(Object.assign({},e),t==null?void 0:t.payload):e;case"updateThemeMode":return!((n=t==null?void 0:t.payload)===null||n===void 0)&&n.themeMode?Object.assign(Object.assign({},e),{themeMode:(o=t==null?void 0:t.payload)===null||o===void 0?void 0:o.themeMode}):e;case"updateEditingDataLayoutToTargetGroup":{if(!(!((i=t==null?void 0:t.payload)===null||i===void 0)&&i.editingData))return e;const{editingData:a}=t.payload;if(a.layout){const{editingDataPosition:r,data:c}=e;return tu(a,r,c),Object.assign(Object.assign({},e),{data:c,editingData:a})}return e}default:return e}}const Dt=I.createContext({state:ou(),dispatch:()=>{}}),au=Dt.Provider,su={locale:"en-US",NavMenu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",material:"Material",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio",materialTempate:"Material templates"},Toolbar:{layers:"Layers",ruler:"Ruler",attributes:"Attributes",hand:"Hand tool",centerContent:"Center content",redo:"Redo",undo:"Undo"},PanelPage:{pages:"Pages",addPage:"Add page",overview:"Overview",pcPageTemplates:"PC page templates",mobilePageTemplates:"Mobile page templates"},TemplatePreview:{add:"Add",cancel:"Cancel"},contextMenu:{copy:"Copy",paste:"Paste",cut:"Cut",delete:"Delete"}},ru={locale:"zh-CN",NavMenu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",material:"物料",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例",materialTempate:"物料模板"},Toolbar:{layers:"图层",ruler:"标尺",attributes:"属性",hand:"拖拽工具",centerContent:"内容居中",redo:"重做",undo:"撤销"},PanelPage:{pages:"页面",addPage:"添加PC页面",overview:"预览",pcPageTemplates:"PC页面模板",mobilePageTemplates:"移动页面模板"},TemplatePreview:{add:"添加",cancel:"取消"},contextMenu:{copy:"复制",paste:"粘贴",cut:"剪切",delete:"删除"}},lu={"en-US":su,"zh-CN":ru},Sn=e=>{const{state:t}=I.useContext(Dt),n=t.localeCode;return[I.useMemo(()=>{const a=lu[n][e];return Object.assign({},a)},[n,e])]},cu=()=>{const[e]=Sn("Toolbar");return e},du=e=>{const{style:t,sharedEvent:n,sharedStore:o}=e,i=cu(),[a,r]=I.useState(!1),[c,d]=I.useState(!1),l={size:"small",type:"text"};I.useEffect(()=>{const u=o.get("snapshotRecorder"),f=g=>{r(g.canRedo),d(g.canUndo)},m=g=>{r(g.canRedo),d(g.canUndo)},v=g=>{r(g.canRedo),d(g.canUndo)};return u&&(u.on("do",f),u.on("undo",m),u.on("redo",v)),()=>{u&&(u.off("do",f),u.off("undo",m),u.off("redo",v))}},[]);const h=[{key:"redo",title:i.redo,button:s.createElement(Rc,{style:{fontSize:14}}),disabled:!a,onClick:()=>{n.trigger("redo")}},{key:"undo",title:i.undo,button:s.createElement(Fc,{style:{fontSize:14}}),disabled:!c,onClick:()=>{n.trigger("undo")}}];return I.useMemo(()=>s.createElement("div",{style:Object.assign(Object.assign({},t),{width:100,display:"flex",flexDirection:"row"})},h.map((u,f)=>s.createElement(dn,{key:f,placement:"top",title:u.title},s.createElement(Re,Object.assign({},l,{disabled:u.disabled,style:{width:28,textAlign:"center",justifyContent:"center",alignItems:"center",display:"inline-flex"},key:f,onClick:m=>{m.preventDefault(),u.onClick()}}),u.button)))),[i,a,c])},Qo="mod-toolbar",uu=()=>{const[e]=Sn("Toolbar");return e},hu=e=>{const{className:t,style:n,openLeftSider:o,openRightSider:i,onClickToggleLayer:a,onClickToggleSetting:r,sharedEvent:c,sharedStore:d}=e,l={fontSize:16},h=G(Qo),u=G(Qo,"left"),f=G(Qo,"right"),m=G(Qo,"btn"),[v,g]=I.useState(!1),[p,b]=I.useState(!0),E=uu();I.useEffect(()=>{const y=d.get("idraw");p===!0?y==null||y.enable("ruler"):y==null||y.disable("ruler")},[p]),I.useEffect(()=>{const y=d.get("idraw");y==null||y.setMode(v?"drag":"select")},[v]);const M={size:"small",className:m,shape:"default"};return I.useMemo(()=>s.createElement("div",{style:n,className:fe(h,t)},s.createElement("div",{className:u}),s.createElement("div",{className:f},s.createElement(dn,{title:E.layers},s.createElement(Re,Object.assign({},M,{type:o?"primary":"default",icon:s.createElement(Tc,{style:l}),onClick:a}))),s.createElement(dn,{title:E.attributes},s.createElement(Re,Object.assign({},M,{type:i?"primary":"default",icon:s.createElement(Vc,{style:l}),onClick:r}))),s.createElement(dn,{title:E.ruler},s.createElement(Re,Object.assign({},M,{type:p?"primary":"default",icon:s.createElement(_c,{style:Object.assign(Object.assign({},l),{fontSize:20})}),onClick:()=>{b(!p)}}))),s.createElement(dn,{title:E.hand},s.createElement(Re,Object.assign({},M,{type:v?"primary":"default",icon:s.createElement(xc,{style:Object.assign(Object.assign({},l),{fontSize:20})}),onClick:()=>{g(!v)}}))),s.createElement(dn,{title:E.centerContent},s.createElement(Re,Object.assign({},M,{type:"text",icon:s.createElement(ic,{style:Object.assign(Object.assign({},l),{fontSize:20})}),onClick:()=>{const y=d.get("idraw");y==null||y.centerContent()}}))),s.createElement(du,{sharedEvent:c,sharedStore:d}))),[o,i,a,r,v,p,E])},uo="mod-panel-layer",fu=e=>{const{className:t,style:n,height:o,sharedStore:i,sharedEvent:a,useContextMenuOptions:r}=e,{state:c,dispatch:d}=I.useContext(Dt),{elementTree:l,selectedUUIDs:h,editingData:u}=c,f=I.useRef(null),m=G(uo),v=G(uo,"content"),g=G(uo,"header"),p=G(uo,"header","title"),b=G(uo,"header","btn"),[E,M]=r({sharedEvent:a,sharedStore:i}),y=()=>{if(c.editingDataPosition.length===0)return"";const x=Be(c.editingDataPosition,c.data.elements);return(x==null?void 0:x.name)||(x==null?void 0:x.type)||""},R=x=>{const j=i.get("idraw");j==null||j.selectElementsByPositions(x)};I.useEffect(()=>{a.on("scrollToLayer",({uuid:x})=>{var j;x&&((j=f.current)===null||j===void 0||j.scrollTo({key:x,align:"top"}))})},[]),I.useEffect(()=>{if(h[0]&&h.length===1){const j=Da(h[0],u.elements).map(z=>z.uuid);h[0]&&j.push(h[0])}},[h,u]);const C=()=>{a.trigger("resetEditingView",{type:"back-root",position:null})},w=()=>{a.trigger("resetEditingView",{type:"back-one",position:null})},O=32,A=o-O;return I.useMemo(()=>Array.isArray(l)&&l.length>0?s.createElement("div",{style:n,className:fe(m,t),onContextMenu:x=>{x.preventDefault()}},s.createElement("div",{className:g,style:{height:O}},s.createElement(Re,{className:b,size:"small",icon:s.createElement(ur,null),disabled:!(c.editingDataPosition.length>0),onClick:C}),s.createElement(Re,{className:b,size:"small",icon:s.createElement(vr,null),disabled:!(c.editingDataPosition.length>0),onClick:w}),s.createElement("span",{className:p},y())),s.createElement(Jn,{menu:{items:E},trigger:["contextMenu"]},s.createElement("div",{className:v},s.createElement(yl,{ref:f,height:A,treeData:l,selectedKeys:h,onTitleChange:({uuid:x,value:j})=>{Xt(x,{name:j},c.editingData.elements);const z=Me(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:z}})},onOperationToggle:({uuid:x,operations:j})=>{Xt(x,{operations:j},c.editingData.elements);const z=Me(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:z}})},onSelect:x=>{h!=null&&h.includes(x.uuids[0])||R(x.positions)},onContextMenu:x=>{if(!(h!=null&&h.includes(x.uuids[0]))){R(x.positions);const j=Be(x.positions[0],u.elements);j&&M({selectedElements:[j]})}},onDrop:x=>{const{elements:j}=Ni(u.elements,{from:x.from,to:x.to}),z=Be(x.to,u.elements);z&&(z.x=0,z.y=0);const N=Me(u);d({type:"update",payload:{editingData:Object.assign(Object.assign({},u),{elements:[...j]}),elementTree:N}})},onDelete:({uuid:x})=>{a.trigger("deleteElement",{uuid:x})},onGoToGroup:x=>{a.trigger("resetEditingView",{type:"go-to-next-group",position:x.position})}})))):s.createElement("div",{style:n,className:fe(m,t),onContextMenu:x=>{x.preventDefault()}},s.createElement("div",{className:g},"..."),s.createElement("div",{className:v},s.createElement("div",{style:{padding:"20px 0",textAlign:"center"}},"Empty"))),[A,l,h,u.elements,c.editingDataPosition,E])};var mu=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Jo="item",gu=e=>{const{parentModName:t,className:n,style:o,width:i,height:a,onMount:r,item:c,onSelect:d,onPreview:l}=e,h=mu(e,["parentModName","className","style","width","height","onMount","item","onSelect","onPreview"]),u=I.useRef(null),f=I.useRef(null),m=I.useRef(c.element),v=G(t,Jo),g=G(t,Jo,"name"),p=G(t,Jo,"action"),b=G(t,Jo,"alert"),[E,M]=I.useState(!1),[y,R]=I.useState(null);return I.useEffect(()=>(i>0&&a>0&&u.current&&(f.current||(f.current=new Oa(u.current,{width:i,height:a,devicePixelRatio:1}))),()=>{const C=f.current;C==null||C.destroy(),f.current=null}),[]),I.useEffect(()=>{const C=f.current;if(C){C.setMode("readOnly"),C.$offBoardWatcherEvents();const{element:w,staticResource:O}=c;w?(C.setData({elements:[w]}),C.centerContent()):O&&(M(!0),R(null),window.fetch(O).then(A=>A.json()).then(A=>{m.current=A,C.setData({elements:[A]}),C.centerContent()}).catch(A=>{const x=[A.name,A.message].join(", ");R(x)}).finally(()=>{M(!1)})),r==null||r({idraw:C})}},[c]),I.useMemo(()=>s.createElement(ir,{spinning:E},s.createElement("div",Object.assign({style:Object.assign(Object.assign({},o),{width:i,minHeight:a}),className:fe(v,n)},h),s.createElement(dn,{placement:"top",title:c.name},s.createElement("div",{className:g},c.name)),s.createElement("div",{ref:u}),s.createElement("div",{className:p},s.createElement(Re.Group,{size:"large"},s.createElement(Re,{size:"large",type:"primary"},s.createElement(Aa,{style:{fontSize:20},onClick:()=>{const C=m.current;C&&(C.name=c.name),l({element:C})}})),s.createElement(Re,{size:"large",type:"primary"},s.createElement(vc,{style:{fontSize:20},onClick:()=>{const C=m.current;C&&(C.name=c.name),d({element:C})}})))),y&&s.createElement(kl,{className:b,type:"error",message:y,banner:!0}))),[E,y,c,l])},Zs="detail",vu=e=>{const{data:t,canvasWidth:n,canvasHeight:o,parentModName:i,handler:a}=e,r=I.useRef(null),c=I.useRef(null),d=G(i,Zs),l=G(i,Zs,"canvas");return I.useImperativeHandle(a,()=>({resetData:h=>{var u,f;(u=c.current)===null||u===void 0||u.setData(h),(f=c.current)===null||f===void 0||f.centerContent()}}),[]),I.useEffect(()=>{if(!c.current&&r.current){const h={width:n,height:o,devicePixelRatio:window.devicePixelRatio},u=new Oa(r.current,h);u.setData(t),u.centerContent(),c.current=u}return()=>{c.current&&(c.current.destroy(),c.current=null)}},[]),s.createElement("div",{className:d},s.createElement("div",{ref:r,className:l}))};var pu=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const ho="mod-template-preview",Ml={content:{width:490},header:{padding:"10px 20px"},body:{padding:"0"}},zl=e=>{const{className:t,style:n,getTemplates:o,onSelect:i,afterChangePagination:a}=e,r=G(ho),c=G(ho,"list"),d=G(ho,"footer"),[l,h]=I.useState([]),[u,f]=I.useState(1),[m,v]=I.useState(8),[g,p]=I.useState(0),[b,E]=ar.useModal(),M=I.useRef(null),y=I.useRef(null),[R]=Sn("TemplatePreview"),C=O=>pu(void 0,void 0,void 0,function*(){var A;(A=M.current)===null||A===void 0||A.scrollTo(0,0);const x=yield o==null?void 0:o(O);Array.isArray(x==null?void 0:x.list)&&(h([...x.list]),f(x.current),v(x.pageSize),p(x.total))}),w=O=>{const{element:A}=O,x={elements:[]};A&&x.elements.push(A);const j=24,z=36,N=44,F=Math.min(720,window.innerWidth-j*2),H=Math.min(540,window.innerHeight-j*10-z-N),V=F+j*2,D=H+j*2+z+N,_=b.confirm({icon:null,width:V,styles:{content:{width:V,minHeight:D,padding:j}},closable:!0,title:(A==null?void 0:A.name)||"Unamed",content:s.createElement(vu,{data:x,parentModName:ho,handler:y,canvasWidth:F,canvasHeight:H}),okText:R.add,onOk:()=>{i({element:A})},cancelText:R.cancel,onCancel:()=>{_.destroy()}})};return I.useEffect(()=>{C({pageSize:m,current:u}).then(()=>{}).catch(()=>{})},[]),I.useMemo(()=>s.createElement("div",{ref:M,style:n,className:fe(r,t)},s.createElement("div",{className:c},l.map((O,A)=>s.createElement(gu,{key:A,width:200,height:150,parentModName:ho,item:O,onSelect:i,onPreview:x=>{w(Object.assign(Object.assign({},x),{locale:R}))}}))),s.createElement("div",{className:d},s.createElement(_l,{size:"small",pageSize:m,current:u,total:g,onChange:O=>{C({current:O,pageSize:m}),a==null||a()}})),E),[R,l,m,u,g,b,E,w])},yu={uuid:"8227861e-9ffd-c90b-6fe3-1959958afd05",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"05fd9c0a-63dc-fb63-2d50-2d8ea9c70280",name:"Splash",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#0D6EFD",borderRadius:30,borderDash:[],boxSizing:"border-box",opacity:1,overflow:"hidden",children:[]},operations:{}},{uuid:"737b2596-c70c-d90c-70d4-55af24cb1d61",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#FFFFFF",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"b8cde2a5-c0f5-ecf1-8d6e-8fab7a12b85c",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#FFFFFF",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"acadb1ff-7274-ae5c-a71e-9d4e4c18ea80",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#FFFFFF",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"d8b651a8-dad9-cfbf-7a9b-abe5983742f6",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"bbea2aa2-38ac-70b0-1355-110a4fb61484",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"0c188e29-8a38-c84d-7286-b96508908fe5",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#FFFFFF",opacity:1},operations:{}},{uuid:"ecb52e4d-2ecb-b88d-de13-708870f0061f",name:"Loading...",x:121,y:385,w:133,h:42,angle:0,type:"text",detail:{text:"Loading...",fontFamily:"Geometr415 Blk BT",fontSize:34,textAlign:"left",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:42,color:"#FFFFFF",opacity:1},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},wu={uuid:"3f827bd7-6a3a-e39c-7ec9-098895fc9f26",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#FFFFFF",borderRadius:30,borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"4c359376-7338-07dd-d533-fa43b329f948",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#1B1E28",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"baabee79-f1c0-f861-a3f0-3325d6d593c2",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#1B1E28",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"89b12005-beea-f2a6-a94b-7bfb9160bdc7",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"0abc02b1-addf-1816-5e57-cb0e3df44727",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"4335bf98-fdc8-1d55-2227-650d8e1866db",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"38d6aa8d-fd1a-963a-75b0-19645372ef26",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#1B1E28",opacity:1},operations:{}},{uuid:"5f97cb86-ef58-f353-9cb8-769f1b5aed90",name:"Home Indicator",x:121,y:799,w:134,h:5,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:100,borderDash:[],boxSizing:"center-line",borderColor:"transparent",borderWidth:0,opacity:1},operations:{}}],overflow:"hidden"},operations:{}},bu=e=>({list:[{name:"Blank Page",element:wu},{name:"Loading Page",element:yu}],pageSize:8,current:1,total:2}),Eu="add-page-button",Su=e=>{const{className:t,style:n,parentModName:o,inPageOverview:i,sharedEvent:a,sharedStore:r,getPageTemplates:c}=e,d=G(o,Eu),[l]=Sn("PanelPage"),{getContainer:h}=I.useContext(pn),[u,f]=I.useState(!1),[m,v]=Mo.useMessage();return I.useMemo(()=>s.createElement(s.Fragment,null,s.createElement(Re,{size:"small",type:"text",style:n,className:fe(d,t),onClick:g=>{g.preventDefault(),g.stopPropagation(),f(!0)}},s.createElement(zc,{style:{fontSize:18}})),s.createElement(sr,{title:l.addPage,placement:"left",onClose:()=>{f(!1)},styles:Ml,open:u,getContainer:h},s.createElement(zl,{getTemplates:c||bu,onSelect:({element:g})=>{if(!g){m==null||m.error("Unexpected data");return}const p=Eo(g),b=r.get("idraw"),E=b==null?void 0:b.getData(),M={x:0,y:0};if(b&&Array.isArray(E==null?void 0:E.elements)){const y=Na(E.elements);M.x=y.x,M.y=y.y}a.trigger("addPage",{element:Object.assign(Object.assign({},p),M),inPageOverview:i}),f(!1)}})),v),[n,t,i,l,u])},Ln="mod-panel-page",an="page-tree",Pn="element-tree",Qs=1,Js=3,Cu=e=>{const{className:t,style:n,height:o,defaultSelectedElementUUIDs:i=[],sharedStore:a,sharedEvent:r,useContextMenuOptions:c,getPageTemplates:d}=e,{state:l,dispatch:h}=I.useContext(Dt),{pageTree:u,elementTree:f,selectedUUIDs:m,editingData:v,editingDataPosition:g,data:p}=l,b=I.useRef(null),E=I.useRef(null),M=32,[y,R]=I.useState([an,Pn]),[C,w]=I.useState(0),[O,A]=I.useState(0),[x,j]=I.useState(i),z=G(Ln),N=G(Ln,"content"),F=G(Ln,"header"),H=G(Ln,"header","title"),V=G(Ln,"header","btn"),[D,_]=c({sharedEvent:r,sharedStore:a}),[T]=Sn("PanelPage"),[Q,Y]=I.useState(!1),P=I.useRef(Q),W=I.useRef([]),X=()=>{const U=[],q=Be([g[0]],l.data.elements);return q!=null&&q.uuid&&U.push(q.uuid),U},[L,k]=I.useState(X());I.useEffect(()=>{const U=a.get("idraw"),q=re=>{if(P.current===!0){const{uuids:le=[]}=re;k([...le])}};return U==null||U.on(Te.select,q),()=>{U==null||U.off(Te.select,q)}},[]),I.useEffect(()=>{var U;if(g.length===1&&u.length>0){const q=(U=u[g[0]])===null||U===void 0?void 0:U.uuid;q&&!L.includes(q)&&k([q])}},[g]);const S=U=>{const q=Qs+Js;if(U.includes(an)&&U.includes(Pn)){const re=o-M*2;w(re*Qs/q),A(re*Js/q)}else if(U.includes(an)&&!U.includes(Pn)){const re=o-M*2;w(re),A(0)}else if(!U.includes(an)&&U.includes(Pn)){const re=o-M*2;w(0),A(re)}else w(0),A(0)};I.useEffect(()=>{const U=a==null?void 0:a.get("idraw");let q=[];if(Q===!0)r.trigger("resetEditingView",{type:"back-root",position:null}),k([]),q=[an],R(q),U==null||U.disable("selectInGroup");else{const re=[];u.length>0&&(re.push(u[0].uuid),r.trigger("resetEditingView",{type:"go-to-page",position:[0]})),k(re),U==null||U.enable("selectInGroup"),q=[an,Pn],R(q)}S(q)},[o,Q]),I.useEffect(()=>{P.current=Q,r.trigger("switchPageOverview",{isPageOverview:!!Q})},[Q]);const B=()=>{if(g.length===0)return"";const U=Be(g,l.data.elements);return(U==null?void 0:U.name)||(U==null?void 0:U.type)||""},$=U=>{const q=a.get("idraw");q==null||q.selectElementsByPositions(U)};I.useEffect(()=>{const U=({uuid:q})=>{var re;q&&((re=b.current)===null||re===void 0||re.scrollTo({key:q,align:"top"}))};return r.on("scrollToLayer",U),()=>{r.off("scrollToLayer",U)}},[]),I.useEffect(()=>{var U;m.length===1&&W.current[0]!==m[0]&&((U=b.current)===null||U===void 0||U.scrollTo({key:m[0],align:"auto"})),W.current=[...m]},[m]),I.useEffect(()=>{if(m[0]&&m.length===1){const q=Da(m[0],v.elements).map(le=>le.uuid);m[0]&&q.push(m[0]);const re=[...x];q.forEach(le=>{re.includes(le)||re.push(le)}),j(re)}},[m,v]);const ae=U=>{U.stopPropagation(),g.length>1&&r.trigger("resetEditingView",{type:"go-to-group",position:[g[0]]})},oe=U=>{U.stopPropagation(),r.trigger("resetEditingView",{type:"back-one",position:null})},ce=[{key:an,collapsible:Q?"disabled":void 0,label:s.createElement("div",{className:F,style:{height:M}},s.createElement("div",{style:{display:"flex"}},s.createElement("span",{style:{marginRight:10}},T.pages),s.createElement(Re,{className:V,style:{marginLeft:"10px"},size:"small",icon:s.createElement(Nc,null),type:Q?"primary":"default",onClick:U=>{U.stopPropagation(),Y(!Q)}})),s.createElement("div",{style:{display:"flex"}},s.createElement(Su,{inPageOverview:Q,parentModName:Ln,sharedEvent:r,sharedStore:a,getPageTemplates:d}))),children:s.createElement("div",{className:N,style:{height:C}},u.length>0?s.createElement(t6,{ref:E,height:C,treeData:u,selectedKeys:L,onTitleChange:({uuid:U,value:q})=>{Xt(U,{name:q},p.elements);const le={pageTree:Io(p),data:Object.assign({},p)};if(g.length===0){le.editingData=Object.assign({},p);const Qt=Me(p);le.elementTree=Qt}h({type:"update",payload:le})},onSelect:U=>{if((U==null?void 0:U.positions.length)===1){const q=a.get("idraw");if(q==null||q.trigger(Te.select,{uuids:[]}),q==null||q.trigger(Te.clearSelect),Q){L!=null&&L.includes(U.uuids[0])||($(U.positions),k([U.uuids[0]]));return}r.trigger("resetEditingView",{type:"go-to-page",position:U.positions[0]});const re=[],le=Be(U.positions[0],l.data.elements);le!=null&&le.uuid&&(re.push(le.uuid),k(re))}},onDrop:U=>{if(!(U.from.length===1&&U.to.length===1))return;const{elements:q}=Ni(p.elements,{from:U.from,to:U.to}),le={pageTree:Io(p),data:Object.assign(Object.assign({},p),{elements:q})};if(g.length===0){le.editingData=Object.assign(Object.assign({},p),{elements:q});const Qt=Me(p);le.elementTree=Qt}h({type:"update",payload:le})},onDelete:({uuid:U})=>{r.trigger("deletePage",{uuid:U})}}):s.createElement(Yt,{image:Yt.PRESENTED_IMAGE_SIMPLE,description:!1}))},{key:Pn,collapsible:Q?"disabled":void 0,label:s.createElement("div",{className:F,style:{height:M}},s.createElement("div",{style:{display:"inline-flex"}},s.createElement(Re,{className:V,size:"small",icon:s.createElement(ur,null),disabled:!(g.length>1),onClick:ae}),s.createElement(Re,{className:V,size:"small",icon:s.createElement(vr,null),disabled:!(g.length>1),onClick:oe})),s.createElement("span",{className:H},B())),children:s.createElement(Jn,{menu:{items:D},trigger:["contextMenu"]},s.createElement("div",{className:N,style:{height:O}},f.length>0?s.createElement(yl,{ref:b,height:O,treeData:f,selectedKeys:m,onTitleChange:({uuid:U,value:q})=>{Xt(U,{name:q},l.editingData.elements);const re=Me(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:re}})},onOperationToggle:({uuid:U,operations:q})=>{Xt(U,{operations:q},l.editingData.elements);const re=Me(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:re}});const le=a.get("idraw");q.locked===!0&&(le==null||le.cancelElements())},onSelect:U=>{m!=null&&m.includes(U.uuids[0])||$(U.positions)},onContextMenu:U=>{if(!(m!=null&&m.includes(U.uuids[0]))){$(U.positions);const q=Be(U.positions[0],v.elements);q&&_({selectedElements:[q]})}},onDrop:U=>{const{elements:q}=Ni(v.elements,{from:U.from,to:U.to}),re=Be(U.to,v.elements);re&&(re.x=0,re.y=0);const le=Me(v);h({type:"update",payload:{editingData:Object.assign(Object.assign({},v),{elements:[...q]}),elementTree:le}})},onDelete:({uuid:U})=>{r.trigger("deleteElement",{uuid:U})},onGoToGroup:U=>{r.trigger("resetEditingView",{type:"go-to-next-group",position:U.position})},onExpand:(U,{node:q})=>{const re=q.key;if(re){let le=[...x];x.includes(re)?le.splice(le.indexOf(re),1):le=[...le,re],j(le)}}}):s.createElement(Yt,{image:Yt.PRESENTED_IMAGE_SIMPLE,description:!1})))}];return I.useMemo(()=>s.createElement("div",{style:n,className:fe(z,t),onContextMenu:U=>{U.preventDefault()}},s.createElement(Ma,{ghost:!0,collapsible:"icon",items:ce,size:"small",activeKey:y,onChange:U=>{if(Array.isArray(U)){const q=[...U];R(q),S(q)}}})),[o,C,O,u,f,m,x,p.elements,v.elements,g,Q,L,T])};var xu=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Mu="mod-panel-detail",zu=e=>{const{className:t,style:n}=e,{state:o,dispatch:i}=I.useContext(Dt),{selectedUUIDs:a,editingData:r,editingDataPosition:c}=o,d=G(Mu),l=I.useRef(r);I.useEffect(()=>{l.current=r},[r]);const h=()=>l.current,u=I.useCallback(p=>{if((a==null?void 0:a.length)===1&&a[0]){const b=a[0];Xt(b,p,r.elements),i({type:"update",payload:{editingData:Object.assign({},r)}})}},[r,a]),f=I.useCallback(p=>{var b;const{detail:E}=p,M=xu(p,["detail"]);delete M.operations;const y=h();if(M||E){const R=Object.assign(Object.assign(Object.assign({x:0,y:0},y.layout),M),{detail:Object.assign(Object.assign({},(b=y.layout)===null||b===void 0?void 0:b.detail),E)}),C=Object.assign(Object.assign({},y),{layout:R});i({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:C}})}},[r,a]),m=I.useCallback(p=>(a==null?void 0:a.length)>1?null:Tr(p,h().elements),[r,a[0]]),v=I.useCallback(p=>{var b,E;let M=null;return p&&un(p)&&(M=((E=(b=h().assets)===null||b===void 0?void 0:b[p])===null||E===void 0?void 0:E.value)||null),M},[r,a[0]]),g=I.useCallback(p=>{const b=Qn(p.value);return r.assets||(r.assets={}),r.assets[b]=p,{assetId:b,assetItem:p}},[r,a[0]]);return I.useMemo(()=>{const p=m(a[0]);return s.createElement("div",{style:n,className:fe(d,t),onContextMenu:b=>{b.preventDefault()}},s.createElement(J6,{element:p,onElementChange:u,getElementAsset:v,createElementAsset:g,layout:r.layout,onLayoutChange:f}))},[a[0],r.layout,c])},Ko="mod-export-image-file",_a=700,Iu=_a+48,bo=500,Au=_a-bo,qo={devicePixelRatio:1,fileName:"download.png"},Tu=e=>{const{className:t,style:n,sharedStore:o}=e,i=G(Ko),a=G(Ko,"preview"),r=G(Ko,"options"),c=G(Ko,"canvas"),[d,l]=I.useState(null),[h,u]=I.useState(!0),[f,m]=I.useState(null),[v]=K.useForm(),g=I.useCallback(b=>{const E=o.get("idraw");E&&(u(!0),E.getImageBlobURL({devicePixelRatio:b}).then(({blobURL:M,width:y,height:R,devicePixelRatio:C})=>{M&&(m(M),l({width:y,height:R,devicePixelRatio:C}))}).catch(M=>{console.log(M)}).finally(()=>{u(!1)}))},[]);I.useEffect(()=>{v.setFieldsValue({devicePixelRatio:qo.devicePixelRatio,fileName:qo.fileName}),setTimeout(()=>{g(qo.devicePixelRatio)},10)},[]);const p=()=>{if(!f)return;const b=v.getFieldsValue(),E=document.createElement("a");E.href=f,E.download=b.fileName||qo.fileName,document.body.appendChild(E),E.click(),document.body.removeChild(E)};return I.useMemo(()=>s.createElement("div",{style:Object.assign(Object.assign({},n),{width:_a}),className:fe(i,t)},s.createElement(ir,{tip:"Loading...",spinning:h},s.createElement("div",{className:a,style:{width:bo,height:bo*3/4}},f&&s.createElement("img",{className:c,style:{maxWidth:bo,maxHeight:bo*3/4},src:f}))),s.createElement("div",{className:r,style:{width:Au}},s.createElement("div",{style:{marginBottom:6}},"Width: ",d==null?void 0:d.width),s.createElement("div",null,"Height: ",d==null?void 0:d.height),s.createElement(jl,null),s.createElement("div",null,s.createElement(K,{form:v,layout:"vertical",onValuesChange:b=>{b.devicePixelRatio>0&&setTimeout(()=>{g(b.devicePixelRatio)},10)},disabled:h},s.createElement(K.Item,{label:"Device pixel ratio",name:"devicePixelRatio"},s.createElement(qe,{size:"small",options:[1,2,3,4].map(b=>({label:`x${b}`,value:b}))})),s.createElement(K.Item,{label:"File name",name:"fileName"},s.createElement(Ut,{size:"small",placeholder:"File name"})),s.createElement(Re,{type:"primary",onClick:p,disabled:h||!f,loading:h},"Download"))))),[d,h,f,g])};var Nu=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(r){r(a)})}return new(n||(n=Promise))(function(a,r){function c(h){try{l(o.next(h))}catch(u){r(u)}}function d(h){try{l(o.throw(h))}catch(u){r(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function Du(e){return new Promise(function(t,n){const o=new FileReader;o.onload=function(){t(o)},o.onerror=n,e.type==="application/json"?o.readAsText(e):o.readAsArrayBuffer(e)})}function Lu(e){Ta({accept:"application/json",success:t=>Nu(this,void 0,void 0,function*(){var n,o,i;const r=(yield Du(t.file)).result;if(typeof r=="string")try{const c=JSON.parse(r);(n=e==null?void 0:e.success)===null||n===void 0||n.call(e,{json:c})}catch(c){(o=e==null?void 0:e.error)===null||o===void 0||o.call(e,c)}else(i=e==null?void 0:e.error)===null||i===void 0||i.call(e,Error("ERROR_PICK_FILE_FAIL"))}),error:e==null?void 0:e.error})}const Pu={uuid:"b8b3fdea-d4ba-669b-803d-9aea7b86a5c8",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#0D6EFD",borderRadius:16,borderDash:[],boxSizing:"border-box",opacity:1,text:"Button",fontFamily:"SF UI Display",fontSize:20,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#FFFFFF"},operations:{}},Ru={uuid:"07ddd6e3-b6a5-f843-4229-35673c811253",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1,text:"      user@example.com",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#1B1E28"},operations:{}},Ou={uuid:"2adb5b3e-9798-a4ea-2cbe-d85c8c24eeb6",name:"Link",x:245,y:630,w:42,h:16,angle:0,type:"text",detail:{text:"Link",fontFamily:"SF UI Display",fontSize:14,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:16,color:"#0D6EFD",opacity:1},operations:{}},ku={uuid:"47186341-186f-0403-3f4e-3d467afe2016",name:"Password",x:0,y:0,w:335,h:56,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"9ff6159d-bede-8e89-baac-f91afa754a06",name:"Box",x:0,y:0,w:335,h:56,angle:0,type:"rect",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1},operations:{}},{uuid:"7a47c6df-cd8c-530f-f3b9-22b661f901eb",name:"Vector",x:297.00006103515625,y:20,w:20,h:16,angle:0,type:"path",detail:{commands:[{type:"M",params:[2.530330181121826,-.5303300619125366]},{type:"C",params:[2.2374367713928223,-.8232232928276062,1.7625631093978882,-.8232232928276062,1.4696699380874634,-.5303300619125366]},{type:"C",params:[1.176776647567749,-.23743686079978943,1.176776647567749,.23743686079978943,1.4696699380874634,.5303300619125366]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[17.469669342041016,16.530330657958984]},{type:"C",params:[17.762563705444336,16.823223114013672,18.237436294555664,16.823223114013672,18.530330657958984,16.530330657958984]},{type:"C",params:[18.823223114013672,16.237436294555664,18.823223114013672,15.76256275177002,18.530330657958984,15.469670295715332]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"Z",params:[]},{type:"M",params:[12.500185012817383,10.794958114624023]},{type:"C",params:[12.808830261230469,10.518712997436523,12.83509635925293,10.04456615447998,12.55885124206543,9.735921859741211]},{type:"C",params:[12.28260612487793,9.427276611328125,11.808459281921387,9.401010513305664,11.499814987182617,9.677255630493164]},{type:"L",params:[12.500185012817383,10.794958114624023]},{type:"Z",params:[]},{type:"M",params:[8.322744369506836,6.500185489654541]},{type:"C",params:[8.598989486694336,6.191540241241455,8.572724342346191,5.717393398284912,8.264079093933105,5.44114875793457]},{type:"C",params:[7.9554338455200195,5.1649041175842285,7.481287002563477,5.191169738769531,7.205042362213135,5.499814510345459]},{type:"L",params:[8.322744369506836,6.500185489654541]},{type:"Z",params:[]},{type:"M",params:[.8697054386138916,10.146900177001953]},{type:"L",params:[.3260757029056549,10.663588523864746]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"L",params:[.8697054386138916,10.146900177001953]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,5.8530988693237305]},{type:"L",params:[19.673925399780273,5.336410999298096]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"L",params:[19.130294799804688,5.8530988693237305]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,10.14690113067627]},{type:"L",params:[19.67392349243164,10.663589477539062]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"L",params:[19.130294799804688,10.14690113067627]},{type:"Z",params:[]},{type:"M",params:[.8697060346603394,5.853097915649414]},{type:"L",params:[.32607635855674744,5.336409568786621]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"L",params:[.8697060346603394,5.853097915649414]},{type:"Z",params:[]},{type:"M",params:[17.11528778076172,11.042052268981934]},{type:"C",params:[16.802886962890625,11.314040184020996,16.770124435424805,11.787782669067383,17.042112350463867,12.100184440612793]},{type:"C",params:[17.314102172851562,12.41258716583252,17.787843704223633,12.445348739624023,18.10024642944336,12.173359870910645]},{type:"L",params:[17.11528778076172,11.042052268981934]},{type:"Z",params:[]},{type:"M",params:[7.18831205368042,.6969932913780212]},{type:"C",params:[6.793071269989014,.8209197521209717,6.573127746582031,1.2417877912521362,6.697054386138916,1.6370283365249634]},{type:"C",params:[6.820981025695801,2.03226900100708,7.241848945617676,2.2522125244140625,7.637089252471924,2.1282858848571777]},{type:"L",params:[7.18831205368042,.6969932913780212]},{type:"Z",params:[]},{type:"M",params:[4.903543949127197,3.4355645179748535]},{type:"C",params:[5.252687454223633,3.212693214416504,5.355051517486572,2.74898362159729,5.132180690765381,2.3998398780822754]},{type:"C",params:[4.909309387207031,2.0506961345672607,4.4456000328063965,1.9483320713043213,4.096456050872803,2.171203136444092]},{type:"L",params:[4.903543949127197,3.4355645179748535]},{type:"Z",params:[]},{type:"M",params:[15.551521301269531,14.047059059143066]},{type:"C",params:[15.906437873840332,13.833499908447266,16.02103042602539,13.372659683227539,15.80747127532959,13.017744064331055]},{type:"C",params:[15.593912124633789,12.662827491760254,15.133071899414062,12.548234939575195,14.778156280517578,12.761794090270996]},{type:"L",params:[15.551521301269531,14.047059059143066]},{type:"Z",params:[]},{type:"M",params:[1.4696699380874634,.5303300619125366]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"L",params:[18.530330657958984,15.469670295715332]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"L",params:[1.4696699380874634,.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[6.25,8]},{type:"C",params:[6.25,10.071067810058594,7.928932189941406,11.75,10,11.75]},{type:"L",params:[10,10.25]},{type:"C",params:[8.757359504699707,10.25,7.75,9.242640495300293,7.75,8]},{type:"L",params:[6.25,8]},{type:"Z",params:[]},{type:"M",params:[10,11.75]},{type:"C",params:[10.959962844848633,11.75,11.837237358093262,11.388312339782715,12.500185012817383,10.794958114624023]},{type:"L",params:[11.499814987182617,9.677255630493164]},{type:"C",params:[11.101249694824219,10.033981323242188,10.576745986938477,10.25,10,10.25]},{type:"L",params:[10,11.75]},{type:"Z",params:[]},{type:"M",params:[7.205042362213135,5.499814510345459]},{type:"C",params:[6.611688137054443,6.16276216506958,6.25,7.040036678314209,6.25,8]},{type:"L",params:[7.75,8]},{type:"C",params:[7.75,7.423254489898682,7.966019153594971,6.8987507820129395,8.322744369506836,6.500185489654541]},{type:"L",params:[7.205042362213135,5.499814510345459]},{type:"Z",params:[]},{type:"M",params:[.32607579231262207,10.663588523864746]},{type:"C",params:[2.297703981399536,12.738021850585938,5.848983287811279,15.75,10,15.75]},{type:"L",params:[10,14.25]},{type:"C",params:[6.519985675811768,14.25,3.3532803058624268,11.671310424804688,1.4133350849151611,9.63021183013916]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,5.3364105224609375]},{type:"C",params:[17.70229721069336,3.261976718902588,14.151017189025879,.25,10,.25]},{type:"L",params:[10,1.75]},{type:"C",params:[13.480013847351074,1.75,16.64672088623047,4.328688621520996,18.5866641998291,6.369787216186523]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,10.663589477539062]},{type:"C",params:[21.108692169189453,9.154008865356445,21.108692169189453,6.845991611480713,19.673925399780273,5.336410999298096]},{type:"L",params:[18.5866641998291,6.369786739349365]},{type:"C",params:[19.471111297607422,7.300351619720459,19.471111297607422,8.699647903442383,18.5866641998291,9.630212783813477]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"Z",params:[]},{type:"M",params:[1.4133352041244507,9.63021183013916]},{type:"C",params:[.5288880467414856,8.699646949768066,.5288882851600647,7.300351142883301,1.4133358001708984,6.369786262512207]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"C",params:[-1.1086915731430054,6.845990180969238,-1.1086925268173218,9.154007911682129,.3260757029056549,10.663588523864746]},{type:"L",params:[1.4133352041244507,9.63021183013916]},{type:"Z",params:[]},{type:"M",params:[18.10024642944336,12.173359870910645]},{type:"C",params:[18.692087173461914,11.658082008361816,19.22022819519043,11.140942573547363,19.67392349243164,10.663589477539062]},{type:"L",params:[18.586666107177734,9.630212783813477]},{type:"C",params:[18.160234451293945,10.078877449035645,17.666166305541992,10.562438011169434,17.11528778076172,11.042052268981934]},{type:"L",params:[18.10024642944336,12.173359870910645]},{type:"Z",params:[]},{type:"M",params:[10,.25]},{type:"C",params:[9.022459983825684,.25,8.080134391784668,.4173649847507477,7.18831205368042,.6969932913780212]},{type:"L",params:[7.637089252471924,2.1282858848571777]},{type:"C",params:[8.404208183288574,1.8877582550048828,9.194794654846191,1.75,10,1.75]},{type:"L",params:[10,.25]},{type:"Z",params:[]},{type:"M",params:[4.096456050872803,2.171203136444092]},{type:"C",params:[2.570507526397705,3.1452717781066895,1.280151128768921,4.332587242126465,.32607635855674744,5.336409568786621]},{type:"L",params:[1.4133356809616089,6.369786262512207]},{type:"C",params:[2.3151214122772217,5.420979022979736,3.51236629486084,4.323603630065918,4.903543949127197,3.4355645179748535]},{type:"L",params:[4.096456050872803,2.171203136444092]},{type:"Z",params:[]},{type:"M",params:[10,15.75]},{type:"C",params:[12.047597885131836,15.75,13.940337181091309,15.016534805297852,15.551521301269531,14.047059059143066]},{type:"L",params:[14.778156280517578,12.761794090270996]},{type:"C",params:[13.313118934631348,13.643331527709961,11.688562393188477,14.25,10,14.25]},{type:"L",params:[10,15.75]},{type:"Z",params:[]}],fill:"#7D848D",originX:0,originY:0,originW:20,originH:16},operations:{}},{uuid:"f3fb01f1-c2a1-7c7b-2906-49271490ecec",name:"**********",x:16,y:20,w:97,h:20,angle:0,type:"text",detail:{text:"**********",color:"#7D848D",fontSize:16,lineHeight:20,textAlign:"left",verticalAlign:"top",wordBreak:"normal"},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},_u={uuid:"af161d19-73ae-77e3-e54d-a88be90632ba",name:"Text",x:0,y:0,w:300,h:40,angle:0,type:"text",detail:{text:"  Please fill the description",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#7D848D",opacity:1},operations:{}},ju={uuid:"81895177-c187-eefa-de59-4b9ad201343e",name:"Title",x:0,y:0,w:136,h:34,angle:0,type:"text",detail:{text:"Title",fontFamily:"SF UI Display",fontSize:26,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:34,color:"#1B1E28",opacity:1},operations:{}},Vu=e=>({list:[{name:"Button",element:Pu},{name:"Input",element:Ru},{name:"Password",element:ku},{name:"Text",element:_u},{name:"Title",element:ju},{name:"Link",element:Ou}],pageSize:8,current:1,total:8}),Bu=()=>{const[e]=Sn("NavMenu");return e},Ks="mod-nav-menu",Fu=e=>{const{className:t,style:n,sharedStore:o,sharedEvent:i,getMaterialTemplates:a}=e,[r,c]=ar.useModal(),d=G(Ks),l=G(Ks,"dropdown"),[h,u]=I.useState([]),f=Bu(),m=({key:z,domEvent:N})=>{N.preventDefault(),i.trigger("createElement",{type:z,element:{name:z}})},{state:v}=I.useContext(Dt),{getContainer:g}=I.useContext(pn),{editMode:p,pageTree:b}=v,[E,M]=I.useState(!1),[y,R]=I.useState(!1);I.useEffect(()=>{const z=N=>{const{isPageOverview:F}=N;R(!!F)};return i.on("switchPageOverview",z),()=>{i.off("switchPageOverview",z)}},[]);const C=!!(p==="page"&&(b.length===0||y)),w=z=>{const N=o.get("idraw");N==null||N.resize({devicePixelRatio:z})},O={more:[{key:"about-idraw-stuido",label:f.about,disabled:!0},{key:"line",type:"divider"},{key:"file",label:f.file,children:[{key:"import-json-file",label:f.importJSONFile,onClick:()=>{Lu({success:({json:z})=>{i.trigger("resetData",{data:z})},error:()=>{}})}},{key:"export-image",label:f.exportImage,onClick:()=>{r.info({icon:null,title:"Whole image file",width:Iu,content:s.createElement(Tu,{sharedEvent:i,sharedStore:o}),footer:null,closable:!0})}},{key:"export-json-file",label:f.exportJSONFile,onClick:()=>{const z=o.get("idraw"),N=z==null?void 0:z.getData({compact:!0});if(N){const F=JSON.stringify(N);Jc(F,{fileName:"downdown.json"})}}}]},{key:"preferences",label:f.preferences,children:[{key:"device-pixel-ratio",label:f.devicePixelRatio,type:"group",children:[{key:"device-pixel-ratio-x1",label:"x1",onClick:()=>{w(1)}},{key:"device-pixel-ratio-x2",label:"x2",onClick:()=>{w(2)}},{key:"device-pixel-ratio-x3",label:"x3",onClick:()=>{w(3)}}]}]}],element:[{key:"material",label:f.material,icon:s.createElement(dc,null),disabled:C,onClick:()=>{M(!0)}},{key:"rect",label:f.rect,icon:s.createElement(pr,null),disabled:C,onClick:m},{key:"circle",label:f.circle,icon:s.createElement(cr,null),disabled:C,onClick:m},{key:"text",label:f.text,icon:s.createElement(wr,null),disabled:C,onClick:m},{key:"image",label:f.image,icon:s.createElement(mr,null),disabled:C,onClick:m},{key:"svg",label:f.svg,disabled:C,icon:s.createElement(yr,null),onClick:m},{key:"html",label:f.html,disabled:!0,icon:s.createElement(fr,null),onClick:m},{key:"group",label:f.group,icon:s.createElement(hr,null),disabled:C,onClick:m}]},A={size:"small",type:"text"},x=[{key:"more",button:s.createElement(Lc,{style:{fontSize:20}})},{key:"element",button:s.createElement(cc,{style:{fontSize:20}})}],j=()=>{const z=o.get("idraw"),N=[];if(z){const{viewSizeInfo:F}=z.getViewInfo(),{devicePixelRatio:H}=F;N.push(`device-pixel-ratio-x${H}`)}u(N)};return I.useMemo(()=>s.createElement("div",{style:n,className:fe(d,t)},x.map((z,N)=>s.createElement(Jn,{key:N,trigger:["click","click"],menu:{items:O[z.key]||[],selectedKeys:h},placement:"bottom",overlayClassName:l,onOpenChange:F=>{F===!0&&j()}},s.createElement(Re,Object.assign({},A,{onClick:F=>F.preventDefault()}),s.createElement(Vl.Compact,null,z.button,s.createElement(Ia,{style:{fontSize:10,marginLeft:4}}))))),s.createElement(sr,{title:f.materialTempate,placement:"left",open:E,onClose:()=>{M(!1)},styles:Ml,getContainer:g},s.createElement(zl,{onSelect:z=>{z.element&&i.trigger("addElement",{element:Eo(z.element),position:[]}),M(!1)},getTemplates:a||Vu})),c),[h,f,E])},sn="mod-header",Wu=e=>{const{logo:t,navigationMenu:n,navigationCenter:o,className:i,style:a,openLeftSider:r,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u,getMaterialTemplates:f}=e,{state:m,dispatch:v}=I.useContext(Dt),g=G(sn),p=G(sn,"left"),b=G(sn,"right"),E=G(sn,"center"),M=G(sn,"locale"),y=G(sn,"scale"),R=G(sn,"switch"),{localeCode:C,scaleInfo:w}=m;return I.useMemo(()=>s.createElement("div",{style:a,className:fe(g,i)},s.createElement("div",{className:p},t,n||s.createElement(Fu,{sharedStore:h,sharedEvent:u,getMaterialTemplates:f}),s.createElement(hu,{openLeftSider:r,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u})),o&&s.createElement("div",{className:E},o),s.createElement("div",{className:b},s.createElement(X3,{className:y,value:`${be(w.scale)}`,onChange:O=>{const A=parseFloat(O);A>0&&(v==null||v({type:"update",payload:{scaleInfo:{scale:be(A),from:"control"}}}))}}),s.createElement(Xc,{className:M,value:C,onChange:O=>{v==null||v({type:"update",payload:{localeCode:O}})}}),s.createElement(oc,{className:R,theme:m==null?void 0:m.themeMode,onChange:({theme:O})=>{v==null||v({type:"updateThemeMode",payload:{themeMode:O}})}}))),[C,w,r,c,d,l])};var qs=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Hu="mod-sketch",Gu=e=>{const t=I.useRef(null),n=I.useRef(null),o=I.useRef(!1),{className:i,style:a,width:r,height:c,sharedEvent:d,sharedStore:l,useContextMenuOptions:h}=e,{generateClassName:u}=I.useContext(pn),{state:f,dispatch:m}=I.useContext(Dt),{editingData:v}=f,g=u(Hu),p=I.useRef([]),b=I.useRef(f.editingData),E=I.useRef(f.data),M=I.useRef([]),[y,R]=h({sharedEvent:d,sharedStore:l});return I.useEffect(()=>{p.current=[...f.editingDataPosition],E.current=f.data,b.current=f.editingData,M.current=[...f.selectedUUIDs]},[f.editingDataPosition,f.data,f.editingData,f.selectedUUIDs]),I.useEffect(()=>{if(!(t!=null&&t.current)||n!=null&&n.current)return;const C={width:r,height:c,devicePixelRatio:window.devicePixelRatio},w=new Oa(t.current,C);w.enable("ruler"),n.current=w;const O=Y=>{var P;const W=b.current;let{uuids:X}=Y;if((X==null?void 0:X.length)===1&&((P=M.current)===null||P===void 0?void 0:P.length)===1&&X[0]===M.current[0])return;const{positions:L}=Y;L&&Array.isArray(L)&&(X=Dr(L,W.elements).map(S=>S.uuid)),m({type:"update",payload:{selectedUUIDs:X}})},A=Y=>{const{data:P,type:W}=Y,X=l.get("snapshotRecorder");X&&(X.hasBeforeSnapshot()||X.setBeforeData({elements:Y.data.elements}),Y.type!=="setData"&&X.do({elements:Y.data.elements}));const L=b.current;if(["addElement","updateElement","deleteElement","moveElement","dragElement","resizeElement"].includes(W)){const k={editingData:Object.assign({},P)};["addElement","deleteElement","moveElement"].includes(W)&&(k.elementTree=Me(L)),m({type:"update",payload:k})}else if(W==="changeLayout"){if(P.layout){const k=Object.assign({},P.layout);k.detail&&(k.detail=Object.assign({},k.detail)),P.layout=Object.assign({},P.layout)}m({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:Object.assign({},P)}})}},x=Y=>{const{scale:P}=Y;m({type:"update",payload:{scaleInfo:{scale:P,from:"event"}}})},j=Y=>{const{element:P}=Y;w.updateElement(P);const W=Object.assign({},w.getData()),X=Me(W);m({type:"update",payload:{editingData:Object.assign({},W),elementTree:X}})},z=Y=>{R({selectedElements:Y.selectedElements||[]})},N=Y=>{const{type:P,element:W}=Y,X=w.createElement(P,{element:W,viewCenter:!0});let L=w.getViewCenter();const k=M.current;let S=[];const B=w.getData();if(Array.isArray(k)&&k.length===1){const oe=k[0],ce=vt(oe,B.elements);let U=Be(ce,B.elements);if(ce.length>1){S=[...ce];let q=S.pop();q+=1;const re=[...S];S.push(q),U=Be(re,B.elements),L=lt(U),X.x=L.x-X.w/2,X.y=L.y-X.h/2}}const $=w.addElement(X,{position:S}),ae=Me($);m({type:"update",payload:{editingData:Object.assign({},$),elementTree:ae}}),w.selectElements([X.uuid])},F=Y=>{const{element:P,position:W=[]}=Y;let X=w.getViewCenter();const L=M.current;let k=W;const S=w.getData();if(Array.isArray(L)&&L.length===1){const ae=L[0],oe=vt(ae,S.elements),ce=Be(oe,S.elements);oe.length>0&&(ce==null?void 0:ce.type)==="group"&&Array.isArray(ce.detail.children)&&(k=[...oe],k.push(ce.detail.children.length),X=lt(ce))}const B=w.addElement(Object.assign(Object.assign({},P),{x:X.x-P.w/2,y:X.y-P.h/2}),{position:k}),$=Me(B);m({type:"update",payload:{editingData:Object.assign({},B),elementTree:$}}),w.selectElements([P.uuid])},H=Y=>{const{uuid:P}=Y;w==null||w.deleteElement(P);const W=w==null?void 0:w.getData();if(W){const X=Me(W);m({type:"update",payload:{editingData:Object.assign({},W),elementTree:X}}),w.trigger(Te.CLEAR_SELECT,{})}},V=Y=>{const{element:P,inPageOverview:W}=Y,{w:X,h:L,detail:k}=P,S=E.current;S.elements=[...S.elements,P];const B=qs(k,["children"]);let $={elements:P.detail.children,layout:{x:0,y:0,w:X,h:L,detail:B,operations:{position:"relative"}}};const ae=Me(S);let oe=[ae.length-1];W===!0&&($=S,oe=[]);const ce=Me($);w.cancelElements(),w.centerContent({data:$}),m({type:"update",payload:{data:Object.assign({},S),editingData:$,elementTree:ce,pageTree:ae,editingDataPosition:oe}})},D=Y=>{var P,W,X,L;const{uuid:k}=Y;if(!k)return;const S=E.current;let B=-1;const $={pageTree:[]};for(let oe=0;oe<S.elements.length;oe++)if(((P=S.elements[oe])===null||P===void 0?void 0:P.uuid)===k){S.elements.splice(oe,1),S.elements=[...S.elements],B=oe;break}const ae=Me(S);if($.data=Object.assign({},S),$.pageTree=ae,p.current.length===1&&B===p.current[0]){let oe=(W=S==null?void 0:S.elements)===null||W===void 0?void 0:W[B],ce=B;for(;!(!((X=oe==null?void 0:oe.extends)===null||X===void 0)&&X.isPage)&&ce>0;)ce--,oe=(L=S==null?void 0:S.elements)===null||L===void 0?void 0:L[ce];if(oe){const U=oe.detail,{children:q}=U,re=qs(U,["children"]),le={elements:q||[],layout:{x:0,y:0,w:oe.w,h:oe.h,detail:re,operations:{position:"relative"}}},Qt=Me(le);$.editingData=le,$.editingDataPosition=[ce],$.elementTree=Qt,w.centerContent({data:le})}else $.editingData={elements:[]},$.editingDataPosition=[],$.elementTree=[]}else p.current.length===0&&($.editingData=Object.assign({},S));ae.length===0&&($.elementTree=[],$.editingDataPosition=[],$.editingData={elements:[]}),m({type:"update",payload:$})},_=Y=>{const{type:P,position:W}=Y,X=n==null?void 0:n.current;if(!X)return;const L=p.current,k=b.current;let S=E.current;if(L.length>0?eu(L,k,S):L.length===0&&(S=k),P==="go-to-page"&&W){const B=[...W],$=Wt(B,S),ae=Me($);m({type:"update",payload:{data:Object.assign({},S),editingData:Object.assign({},$),editingDataPosition:B,elementTree:ae}}),X.centerContent({data:$}),X.trigger(Te.CLEAR_SELECT,{})}else if(P==="go-to-group"&&W){const B=[...W],$=Wt(B,S),ae=Me($);m({type:"update",payload:{data:Object.assign({},S),editingData:Object.assign({},$),editingDataPosition:B,elementTree:ae}}),X.centerContent({data:$}),X.trigger(Te.CLEAR_SELECT,{})}else if(P==="go-to-next-group"&&W){const B=[...L,...W],$=Wt(B,S),ae=Me($);m({type:"update",payload:{data:Object.assign({},S),editingData:Object.assign({},$),editingDataPosition:B,elementTree:ae}}),X.centerContent({data:$}),X.trigger(Te.CLEAR_SELECT,{})}else if(P==="back-one"&&L.length>0){const B=[...L];B.pop();const $=Wt(B,S),ae=Me($);m({type:"update",payload:{data:Object.assign({},S),editingData:Object.assign({},$),editingDataPosition:[...B],elementTree:ae}}),X.centerContent({data:$}),X.trigger(Te.CLEAR_SELECT,{})}else if(P==="back-root"){const B=[],$=Wt(B,S),ae=Me($);m({type:"update",payload:{data:Object.assign({},S),editingData:$,editingDataPosition:B,elementTree:ae}}),X.centerContent({data:$}),X.trigger(Te.CLEAR_SELECT,{})}},T=Y=>{let{data:P}=Y,W=[],X=Io(P);if(f.editMode==="page"&&(P=El(P),X=Io(P),X.length>0)){const S=X[0].uuid;W=vt(S,P.elements)}let L=Wt(W,P);const k=Me(L);m({type:"update",payload:{data:Object.assign({},P),editingData:Object.assign({},L),editingDataPosition:W,elementTree:k,pageTree:X}}),w.centerContent({data:L}),w.trigger(Te.CLEAR_SELECT,{})},Q=Y=>{const{editingData:P}=Y,W=Me(P);m({type:"update",payload:{editingData:Object.assign({},P),elementTree:W}}),w.trigger(Te.CLEAR_SELECT,{})};if(w.on(Te.SELECT,O),w.on(Te.CHANGE,A),w.on(Te.SCALE,x),w.on(Te.TEXT_CHANGE,j),w.on(Te.CONTEXT_MENU,z),d.on("createElement",N),d.on("addElement",F),d.on("deleteElement",H),d.on("addPage",V),d.on("deletePage",D),d.on("resetEditingView",_),d.on("resetData",T),d.on("resetEditingData",Q),d.on("dispatch",m),!o.current){if(f.scaleInfo){const{scale:Y,offsetX:P,offsetY:W}=f.scaleInfo;Y&&P&&W?w.setViewScale({scale:Y,offsetX:P,offsetY:W}):w.centerContent({data:f.editingData})}o.current=!0}return l.set("idraw",w),()=>{o.current=!1,w.off(Te.SELECT,O),w.off(Te.CHANGE,A),w.off(Te.SCALE,x),w.off(Te.TEXT_CHANGE,j),w.off(Te.CONTEXT_MENU,z),l.set("idraw",null),l.set("snapshotRecorder",null)}},[]),I.useEffect(()=>{n!=null&&n.current&&n.current.setData(v)},[v]),I.useEffect(()=>{if(n!=null&&n.current){const C=n.current;f.scaleInfo.from==="control"&&C.scale({scale:f.scaleInfo.scale,point:{x:r/2,y:c/2}})}},[f.scaleInfo]),I.useEffect(()=>{const C=n.current,w=t.current;C&&C.resize({width:r,height:c}),w&&(w.style.width=`${r}px`,w.style.height=`${c}px`)},[r,c]),I.useMemo(()=>s.createElement(Jn,{menu:{items:y},trigger:["contextMenu"]},s.createElement("div",{ref:t,className:fe(g,i),style:Object.assign(Object.assign({},a),{width:r,height:c,padding:0})})),[y])},Rn="mod-dashboard",ei=240,ti=240,On=36,Yu=I.forwardRef((e,t)=>{const{className:n,style:o,width:i,height:a,logo:r,navigationMenu:c,navigationCenter:d,defaultSelectedElementUUIDs:l,sharedStore:h,sharedEvent:u,useContextMenuOptions:f,handleKeyboard:m,getPageTemplates:v,getMaterialTemplates:g}=e,{state:p}=I.useContext(Dt),{editMode:b}=p,[E,M]=I.useState(!0),[y,R]=I.useState(!0);I.useEffect(()=>{const F=H=>{["INPUT","TEXTAREA"].includes(H.target.nodeName)||m(H,{sharedEvent:u,sharedStore:h})};return window.addEventListener("keydown",F),()=>{window.removeEventListener("keydown",F)}},[]);const[C,w]=I.useState({leftWidth:E?ei:0,rightWidth:y?ti:0,centerWidth:i-(E?ei:0)-(y?ti:0)});I.useEffect(()=>{const F=E?ei:0,H=y?ti:0,V=i-F-H;w({leftWidth:F,rightWidth:H,centerWidth:V})},[a,i,E,y]);const O=G(Rn),A=G(Rn,"header"),x=G(Rn,"content"),j=G(Rn,"left"),z=G(Rn,"right"),N=G(Rn,"right");return I.useMemo(()=>{const{leftWidth:F,rightWidth:H,centerWidth:V}=C;return s.createElement("div",{ref:t,className:fe(O,n),style:Object.assign(Object.assign({},o),{width:i,height:a,padding:0})},s.createElement("div",{className:A,style:{height:On}},s.createElement(Wu,{sharedEvent:u,sharedStore:h,logo:r,navigationMenu:c,navigationCenter:d,openLeftSider:E,openRightSider:y,getMaterialTemplates:g,onClickToggleLayer:()=>{const D=!E;let _=F;D?_=ei:_=0,w({leftWidth:_,rightWidth:H,centerWidth:i-_-H}),M(D)},onClickToggleSetting:()=>{const D=!y;let _=H;D?_=ti:_=0,w({leftWidth:F,rightWidth:_,centerWidth:i-F-_}),R(D)}})),s.createElement("div",{className:x,style:{top:On}},s.createElement(Mi,{split:"vertical",defaultSize:V+H,allowResize:!0,onChange:D=>{const _=i-D,T=D-H;T<100||w({leftWidth:_,rightWidth:H,centerWidth:T})},pane1Style:{width:F},pane2Style:{width:V+H}},s.createElement("div",null,E&&(b==="page"?s.createElement(Cu,{height:a-On,className:j,defaultSelectedElementUUIDs:l,sharedEvent:u,sharedStore:h,useContextMenuOptions:f,getPageTemplates:v}):s.createElement(fu,{height:a-On,className:j,sharedEvent:u,sharedStore:h,useContextMenuOptions:f}))),s.createElement("div",{style:{width:C.centerWidth+C.rightWidth,display:"flex",flexDirection:"row"}},s.createElement(Gu,{className:N,width:V,height:a-On,sharedStore:h,sharedEvent:u,useContextMenuOptions:f}),s.createElement("div",{className:z,style:{width:H,height:a-On}},s.createElement(zu,null))))))},[n,b,E,y,C,a])});function er(){return{idraw:null,clipboard:{type:"default",data:null},selectedUUIDs:[],snapshotRecorder:null}}function $u(e){const{sharedEvent:t,sharedStore:n}=e;t.on("copy",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const r=si(i,a.elements);r.length>0&&n.set("clipboard",{type:"copy-elements",data:r})}}),t.on("paste",()=>{const o=n.get("idraw"),i=n.get("clipboard"),a=n.get("selectedUUIDs");if(o&&["copy-elements","cut-elements"].includes(i==null?void 0:i.type)&&Array.isArray(i.data)){const r=i.data,c=[];if(i.type==="copy-elements"){for(let f=0;f<r.length;f++)if(r[f]){const m=r[f],v=Eo(m);v.name=`${v.name} copy`,c.push(v)}}else if(i.type==="cut-elements"){for(let f=0;f<r.length;f++)if(r[f]){const m=r[f],v=Eo(m);v.name=`${v.name}`,c.push(v)}}const d=o==null?void 0:o.getData(),l=vt(a[0],(d==null?void 0:d.elements)||[]);l.length>0&&l[l.length-1]++,c.forEach(f=>{o.addElement(f,{position:l})});const h=o==null?void 0:o.getData(),u=Me(h);t.trigger("dispatch",{type:"update",payload:{editingData:h,elementTree:u}}),o.selectElement(c[0].uuid),setTimeout(()=>{t.trigger("scrollToLayer",{uuid:c[0].uuid})},100)}}),t.on("cut",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const d=si(i,a.elements);d.length>0&&n.set("clipboard",{type:"cut-elements",data:d.map(l=>Eo(l))}),d.forEach(l=>{o==null||o.deleteElement(l.uuid)})}const r=o==null?void 0:o.getData(),c=Me(r);t.trigger("dispatch",{type:"update",payload:{editingData:r,elementTree:c}}),o==null||o.trigger(Te.clearSelect)}),t.on("delete",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const r=si(i,a.elements);if(r.length>0){for(let l=0;l<r.length;l++)o==null||o.deleteElement(r[l].uuid);const c=o==null?void 0:o.getData(),d=Me(c);t.trigger("dispatch",{type:"update",payload:{editingData:c,elementTree:d}}),o==null||o.trigger(Te.clearSelect)}}}),t.on("undo",()=>{const o=n==null?void 0:n.get("idraw"),i=n.get("snapshotRecorder"),a=i==null?void 0:i.undo(o==null?void 0:o.getData());a&&(t==null||t.trigger("resetEditingData",{editingData:Object.assign(Object.assign({},o==null?void 0:o.getData()),a)}),o==null||o.cancelElements())}),t.on("redo",()=>{const o=n==null?void 0:n.get("idraw"),i=n.get("snapshotRecorder"),a=i==null?void 0:i.redo(o==null?void 0:o.getData());a&&(t==null||t.trigger("resetEditingData",{editingData:Object.assign(Object.assign({},o==null?void 0:o.getData()),a)}),o==null||o.cancelElements())})}const ni=e=>{const{label:t,suffix:n}=e;return s.createElement("span",{style:{display:"inline-flex",width:180,flexDirection:"row",justifyContent:"space-between"}},s.createElement("span",{style:{display:"inline-flex"}},t),s.createElement("span",{style:{display:"inline-flex",opacity:.5}},n))},Xu=e=>{const[t]=Sn("contextMenu"),{sharedEvent:n}=e,o=[{label:s.createElement(ni,{label:t.copy,suffix:s.createElement("span",null,"Ctrl+C")}),key:"copy",disabled:!0,onClick:()=>{n.trigger("copy")}},{label:s.createElement(ni,{label:t.paste,suffix:s.createElement("span",null,"Ctrl+V")}),key:"paste",disabled:!0,onClick:()=>{n.trigger("paste")}},{label:s.createElement(ni,{label:t.cut,suffix:s.createElement("span",null,"Ctrl+X")}),key:"cut",disabled:!0,onClick:()=>{n.trigger("cut")}},{label:s.createElement(ni,{label:t.delete,suffix:s.createElement("span",null,"Del")}),key:"delete",disabled:!0,onClick:()=>{n.trigger("delete")}}],[i,a]=I.useState(o);return[i,c=>{const{selectedElements:d}=c;i==null||i.forEach(l=>{l&&["copy","paste","cut","delete"].includes(l==null?void 0:l.key)&&(l.disabled=!((d==null?void 0:d.length)>0))}),a([...i])}]};var Lt={};Object.defineProperty(Lt,"__esModule",{value:!0});var Uu=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ca={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Il={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Uu?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},ja={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var oi=1;oi<20;oi++)ja["f"+oi]=111+oi;function Fi(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var o=e.map(function(r){return Al(r,t)}),i=function(c){return o.some(function(d){return Tl(d,c)})},a=n==null?i:i(n);return a}function Zu(e,t){return Fi(e,t)}function Qu(e,t){return Fi(e,{byKey:!0},t)}function Al(e,t){var n=t&&t.byKey,o={};e=e.replace("++","+add");var i=e.split("+"),a=i.length;for(var r in ca)o[ca[r]]=!1;var c=!0,d=!1,l=void 0;try{for(var h=i[Symbol.iterator](),u;!(c=(u=h.next()).done);c=!0){var f=u.value,m=f.endsWith("?")&&f.length>1;m&&(f=f.slice(0,-1));var v=Va(f),g=ca[v];if(f.length>1&&!g&&!Il[f]&&!ja[v])throw new TypeError('Unknown modifier: "'+f+'"');(a===1||!g)&&(n?o.key=v:o.which=Nl(f)),g&&(o[g]=m?null:!0)}}catch(p){d=!0,l=p}finally{try{!c&&h.return&&h.return()}finally{if(d)throw l}}return o}function Tl(e,t){for(var n in e){var o=e[n],i=void 0;if(o!=null&&(n==="key"&&t.key!=null?i=t.key.toLowerCase():n==="which"?i=o===91&&t.which===93?91:t.which:i=t[n],!(i==null&&o===!1)&&i!==o))return!1}return!0}function Nl(e){e=Va(e);var t=ja[e]||e.toUpperCase().charCodeAt(0);return t}function Va(e){return e=e.toLowerCase(),e=Il[e]||e,e}var kn=Lt.default=Fi;Lt.isHotkey=Fi;Lt.isCodeHotkey=Zu;Lt.isKeyHotkey=Qu;Lt.parseHotkey=Al;Lt.compareHotkey=Tl;Lt.toKeyCode=Nl;Lt.toKeyName=Va;const Ju=(e,t)=>{const{sharedEvent:n}=t;kn("mod+c",e)?n.trigger("copy",void 0):kn("mod+v",e)?n.trigger("paste",void 0):kn("mod+x",e)?n.trigger("cut",void 0):kn("del",e)||kn("backspace",e)?n.trigger("delete",void 0):kn("mod+s",e)&&console.log("Save ... ")};var Bt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ye=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ke,Mt,Ft,Gn,ht;class Ku{constructor(){Ke.set(this,void 0),Bt(this,Ke,new Map,"f")}on(t,n){if(ye(this,Ke,"f").has(t)){const o=ye(this,Ke,"f").get(t)||[];o==null||o.push(n),ye(this,Ke,"f").set(t,o)}else ye(this,Ke,"f").set(t,[n])}off(t,n){if(ye(this,Ke,"f").has(t)){const o=ye(this,Ke,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}ye(this,Ke,"f").set(t,o||[])}}trigger(t,n){const o=ye(this,Ke,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(ye(this,Ke,"f").has(t)){const n=ye(this,Ke,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){ye(this,Ke,"f").clear()}}Ke=new WeakMap;class qu{constructor(){Mt.set(this,[]),Ft.set(this,[]),Gn.set(this,null),ht.set(this,void 0),Bt(this,ht,new Ku,"f")}on(t,n){ye(this,ht,"f").on(t,n)}off(t,n){ye(this,ht,"f").off(t,n)}hasBeforeSnapshot(){return!!ye(this,Gn,"f")}setBeforeData(t){if(t){const n={data:gt(t),time:Date.now()};Bt(this,Gn,n,"f")}}canUndo(){return ye(this,Mt,"f").length>0}canRedo(){return ye(this,Ft,"f").length>0}clear(){Bt(this,Mt,[],"f"),Bt(this,Ft,[],"f")}destroy(){this.clear(),Bt(this,Mt,null,"f"),Bt(this,Ft,null,"f"),ye(this,ht,"f").clear(),ye(this,ht,"f").destroy(),Bt(this,ht,null,"f")}do(t){if(ye(this,Gn,"f")){const n=ye(this,Gn,"f");ye(this,Mt,"f").push(n),this.setBeforeData(t)}ye(this,ht,"f").trigger("do",{canRedo:this.canRedo(),canUndo:this.canUndo()})}undo(t){if(ye(this,Mt,"f").length===0)return null;const n=ye(this,Mt,"f").pop();return n?(t&&ye(this,Ft,"f").push({data:gt(t),time:Date.now()}),ye(this,ht,"f").trigger("undo",{canRedo:this.canRedo(),canUndo:this.canUndo()}),n.data):null}redo(t){if(ye(this,Ft,"f").length===0)return null;const n=ye(this,Ft,"f").pop();return n?(t&&ye(this,Mt,"f").push({data:gt(t),time:Date.now()}),ye(this,ht,"f").trigger("redo",{canRedo:this.canRedo(),canUndo:this.canUndo()}),n.data):null}}Mt=new WeakMap,Ft=new WeakMap,Gn=new WeakMap,ht=new WeakMap;const o1=s.forwardRef((e,t)=>{var n,o;const{width:i=1e3,height:a=600,style:r,className:c,logo:d,navigationMenu:l,navigationCenter:h,defaultSelectedElementUUIDs:u,defaultEditMode:f,prefiexName:m,onEditGroupElement:v,useContextMenuOptions:g=Xu,handleKeyboard:p=Ju,getPageTemplates:b,getMaterialTemplates:E}=e,[M,y]=I.useReducer(iu,nu(e)),R=I.useRef(null),C=I.useRef(new hn),w=I.useRef(new fn({defaultStorage:er()})),O=I.useRef(new qu);return!((n=w.current)===null||n===void 0)&&n.get("snapshotRecorder")||(o=w.current)===null||o===void 0||o.set("snapshotRecorder",O.current),I.useEffect(()=>{if(f!=="page"){const A=Be(M.editingDataPosition,M.data.elements);v==null||v({uuid:A==null?void 0:A.uuid,position:[...M.editingDataPosition]})}},[M.editingDataPosition]),I.useImperativeHandle(t,()=>({getSharedEvent(){return C.current},getSharedStore(){return w.current},dispatch(x){const{type:j,payload:z}=x;y({type:j,payload:z})}}),[]),I.useEffect(()=>(C.current||(C.current=new hn),w.current||(w.current=new fn({defaultStorage:er()})),$u({sharedEvent:C.current,sharedStore:w.current}),()=>{var A,x;(A=w.current)===null||A===void 0||A.clear(),(x=C.current)===null||x===void 0||x.destroy(),C.current=null,w.current=null}),[]),I.useEffect(()=>{const A=w.current;A&&A.set("selectedUUIDs",[...M.selectedUUIDs])},[M.selectedUUIDs]),I.useEffect(()=>{const A=C.current;A==null||A.trigger("switchTheme",{theme:M.themeMode})},[M.themeMode]),I.useEffect(()=>{const A=C.current;A==null||A.trigger("changeLocale",{locale:M.localeCode})},[M.localeCode]),I.useEffect(()=>{const A=C.current;A==null||A.trigger("trackDataChange",{data:M.data})},[M.data]),I.useEffect(()=>{const A=C.current;A==null||A.trigger("trackEditingDataChange",{editingData:M.editingData,editingDataPosition:M.editingDataPosition})},[M.editingData,M.editingDataPosition]),I.useMemo(()=>s.createElement(Hl,{localeCode:M.localeCode,topPrefix:m,themeMode:M.themeMode,getContainer:()=>R.current||document.body},s.createElement(au,{value:{state:M,dispatch:y}},s.createElement(Yu,{logo:d,navigationMenu:l,navigationCenter:h,ref:R,width:i,height:a,style:r,className:c,defaultSelectedElementUUIDs:u,sharedEvent:C.current,sharedStore:w.current,useContextMenuOptions:g,handleKeyboard:p,getPageTemplates:b,getMaterialTemplates:E}))),[m,i,a,M,y])});export{o1 as S};
