import{r as T,R as r}from"./react.D016eMnP.js";import{c as ue,C as Nl,t as Fa,S as Ks,a as He,T as de,D as yo,B as Re,I as Bt,b as qs,F as q,R as he,d as K,e as Dl,f as Pl,g as Ll,h as nt,P as er,s as go,E as jt,i as Ea,j as Ol,k as zn,l as tr,A as Rl,M as nr,m as kl,n as or,o as jl,p as _l}from"./antd.CZQqUoQG.js";let Ti="idraw-studio";function Wa(e){Ti=e}function Ha(){return Ti}function ir(e){return(...t)=>[Ti,e,...t].join("-")}function W(...e){return[Ti,...e].join("-")}const Vl={locale:"en-US",Header:{},LayoutDetail:{layout:"Layout",groupLayout:"Group Layout",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible"},ElementDesign:{element:"Element",layout:"Layout",global:"Global"},ElementDetail:{basicAttributes:"Basic",borderAttribute:"Border",contentAttribute:"Content",shadowAttribute:"Shadow",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible",deepResizeInGroup:"Deep resize in group",fill:"Fill",stroke:"Stroke"},Menu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio"}},Bl={locale:"zh-CN",Header:{},LayoutDetail:{layout:"布局",groupLayout:"组布局",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视"},ElementDesign:{element:"元素",layout:"布局",global:"全局"},ElementDetail:{basicAttributes:"基础",borderAttribute:"边框",contentAttribute:"内容",shadowAttribute:"阴影",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视",deepResizeInGroup:"组内尺寸关联调整",fill:"填充",stroke:"描边"},Menu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例"}},Ga={"en-US":Vl,"zh-CN":Bl},oa="en-US",Ca=e=>{const{localeCode:t}=T.useContext(rn);return[T.useMemo(()=>{const i=(Ga[t||oa]||Ga[oa])[e];return Object.assign({},i)},[t,e])]},Fl=e=>{const{themeMode:t}=e,n="theme",o=W(n),i=W(n,"dark"),a=ue({[o]:!0,[i]:t==="dark"});return{themeMode:t,className:a}},ar=e=>(e!=null&&e.topPrefix&&typeof(e==null?void 0:e.topPrefix)=="string"&&Wa(e.topPrefix),Object.assign({topPrefix:Ha(),createPrefixName:ir,generateClassName:W,getClassNameTopPrefix:Ha,setClassNameTopPrefix:Wa,localeCode:oa,getContainer:()=>(e==null?void 0:e.container)||document.body},e||{})),rn=T.createContext(ar()),Wl=e=>{const{children:t,topPrefix:n,localeCode:o,container:i,themeMode:a,getContainer:s}=e,c=ar({topPrefix:n,localeCode:o,getContainer:s}),[d,l]=T.useState(c),{className:h}=Fl({themeMode:a});return T.useEffect(()=>{l(Object.assign(Object.assign({},d),{localeCode:o,container:i}))},[o,i]),r.createElement(rn.Provider,{value:Object.assign({},d)},r.createElement(Nl,{theme:{algorithm:a==="dark"?Fa.darkAlgorithm:Fa.defaultAlgorithm}},r.createElement("div",{className:h},t)))};class Ya extends r.PureComponent{render(){const{children:t,className:n,split:o,style:i,size:a,eleRef:s}=this.props,c=["Pane",o,n];let d={flex:1,position:"relative",outline:"none"};return a!==void 0&&(o==="vertical"?d.width=a:(d.height=a,d.display="flex"),d.flex="none"),d=Object.assign({},d,i||{}),r.createElement("div",{ref:s,className:c.join(" "),style:d},t)}}const Hl="base-split-pane",Gl=()=>{const{generateClassName:e}=T.useContext(rn);return{modClassName:e(Hl)}};function Yl(e){const{modClassName:t}=Gl(),{className:n,onClick:o,onDoubleClick:i,onMouseDown:a,onTouchEnd:s,onTouchStart:c,resizerClassName:d=t,split:l,style:h}=e,u=[d,l,n];return T.useMemo(()=>r.createElement("span",{role:"presentation",className:u.join(" "),style:h,onMouseDown:m=>a(m),onTouchStart:m=>{m.preventDefault(),c(m)},onTouchEnd:m=>{m.preventDefault(),s(m)},onClick:m=>{o&&(m.preventDefault(),o(m))},onDoubleClick:m=>{i&&(m.preventDefault(),i(m))}}),[])}const $l="xxxxx";function $a(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch{}}function Xa(e,t,n,o){if(typeof o=="number"){const i=typeof t=="number"?t:0,a=typeof n=="number"&&n>=0?n:1/0;return Math.max(i,Math.min(a,o))}return e!==void 0?e:t}function Xl(e){return r.Children.toArray(e).filter(t=>t)}class vi extends r.Component{constructor(t){super(t),this.onMouseDown=this.onMouseDown.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this);const{size:n,defaultSize:o,minSize:i,maxSize:a,primary:s}=t,c=n!==void 0?n:Xa(o,i,a,null);this.state={active:!1,resized:!1,pane1Size:s==="first"?c:void 0,pane2Size:s==="second"?c:void 0,instanceProps:{size:n}}}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(vi.getSizeUpdate(this.props,this.state))}static getDerivedStateFromProps(t,n){return vi.getSizeUpdate(t,n)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}onMouseDown(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchStart(n)}onTouchStart(t){const{allowResize:n,onDragStarted:o,split:i}=this.props;if(n){$a(document,window);const a=i==="vertical"?t.touches[0].clientX:t.touches[0].clientY;typeof o=="function"&&o(),this.setState({active:!0,position:a})}}onMouseMove(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchMove(n)}onTouchMove(t){const{allowResize:n,maxSize:o,minSize:i,onChange:a,split:s,step:c}=this.props,{active:d,position:l}=this.state;if(n&&d){$a(document,window);const h=this.props.primary==="first",u=h?this.pane1:this.pane2,m=h?this.pane2:this.pane1;if(u){const f=u,v=m;if(f.getBoundingClientRect){const g=f.getBoundingClientRect().width,p=f.getBoundingClientRect().height,y=s==="vertical"?t.touches[0].clientX:t.touches[0].clientY,S=s==="vertical"?g:p;let E=l-y;if(c){if(Math.abs(E)<c)return;E=~~(E/c)*c}let w=h?E:-E;const D=parseInt(window.getComputedStyle(f).order),b=parseInt(window.getComputedStyle(v).order);D>b&&(w=-w);let x=o;if(o!==void 0&&o<=0){const z=this.splitPane;s==="vertical"?x=z.getBoundingClientRect().width+o:x=z.getBoundingClientRect().height+o}let j=S-w;const P=l-E;j<i?j=i:o!==void 0&&j>x?j=x:this.setState({position:P,resized:!0}),a&&a(j),this.setState({draggedSize:j,[h?"pane1Size":"pane2Size"]:j})}}}}onMouseUp(){const{allowResize:t,onDragFinished:n}=this.props,{active:o,draggedSize:i}=this.state;t&&o&&(typeof n=="function"&&n(i),this.setState({active:!1}))}static getSizeUpdate(t,n){const o={},{instanceProps:i}=n;if(i.size===t.size&&t.size!==void 0)return{};const a=t.size!==void 0?t.size:Xa(t.defaultSize,t.minSize,t.maxSize,n.draggedSize);t.size!==void 0&&(o.draggedSize=a);const s=t.primary==="first";return o[s?"pane1Size":"pane2Size"]=a,o[s?"pane2Size":"pane1Size"]=void 0,o.instanceProps={size:t.size},o}render(){const{allowResize:t,children:n,className:o,onResizerClick:i,onResizerDoubleClick:a,paneClassName:s,pane1ClassName:c,pane2ClassName:d,paneStyle:l,pane1Style:h,pane2Style:u,resizerClassName:m,resizerStyle:f,split:v,style:g}=this.props,{pane1Size:p,pane2Size:y}=this.state,S=t?"":"disabled",E=m&&`${m} ${$l}`,w=Xl(n),D=Object.assign({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},g);v==="vertical"?Object.assign(D,{flexDirection:"row",left:0,right:0}):Object.assign(D,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});const b=["SplitPane",o,v,S],x=Object.assign(Object.assign({},l),h),j=Object.assign(Object.assign({},l),u),P=["Pane1",s,c].join(" "),z=["Pane2",s,d].join(" ");return r.createElement("div",{className:b.join(" "),ref:V=>{this.splitPane=V},style:D},r.createElement(Ya,{className:P,key:"pane1",eleRef:V=>{this.pane1=V},size:p,split:v,style:x},w[0]),r.createElement(Yl,{className:S,onClick:i,onDoubleClick:a,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:E,split:v,style:f||{}}),r.createElement(Ya,{className:z,key:"pane2",eleRef:V=>{this.pane2=V},size:y,split:v,style:j},w[1]))}}var Ul=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Zl="icon",Ql=()=>({iconClassName:W(Zl)}),ne=e=>{const{className:t,style:n,children:o}=e,i=Ul(e,["className","style","children"]),{iconClassName:a}=Ql();return T.useMemo(()=>r.createElement("span",Object.assign({className:ue([a,t]),style:n},i),o),[a,n,t])},Jl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M516.266667 938.666667h-38.4c-234.666667-21.333333-405.333333-230.4-384-465.066667 17.066667-204.8 179.2-366.933333 384-384 17.066667 0 34.133333 8.533333 42.666666 21.333333 8.533333 12.8 8.533333 34.133333-4.266666 46.933334-85.333333 115.2-59.733333 273.066667 55.466666 358.4 89.6 68.266667 213.333333 68.266667 302.933334 0 12.8-8.533333 29.866667-12.8 46.933333-4.266667 12.8 8.533333 21.333333 25.6 21.333333 42.666667-8.533333 115.2-64 217.6-153.6 290.133333-81.066667 59.733333-174.933333 93.866667-273.066666 93.866667zM396.8 187.733333c-123.733333 42.666667-213.333333 153.6-221.866667 290.133334-17.066667 187.733333 119.466667 354.133333 307.2 371.2 89.6 8.533333 179.2-17.066667 247.466667-76.8 46.933333-38.4 81.066667-89.6 102.4-145.066667-106.666667 38.4-226.133333 21.333333-320-46.933333-119.466667-93.866667-166.4-251.733333-115.2-392.533334z"}))),Kl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 768c-141.376 0-256-114.624-256-256s114.624-256 256-256 256 114.624 256 256-114.624 256-256 256z m0-85.333333a170.666667 170.666667 0 1 0 0-341.333334 170.666667 170.666667 0 0 0 0 341.333334zM469.333333 85.333333a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0V85.333333z m0 768a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0v-85.333334zM85.333333 554.666667a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334H85.333333z m768 0a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334h-85.333334zM161.834667 222.165333a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m576 576a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m-515.669334 64a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z m576-576a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z"}))),ql="base-theme-switch",ec=ir(ql),Ua=e=>{if(!(typeof e>"u"))return e==="light"};function tc(e){return e===!0?"light":"dark"}const nc=e=>{const{className:t,style:n,onChange:o,theme:i,defaultTheme:a}=e;return r.createElement(Ks,{className:ue([ec(),t]),style:n,checkedChildren:r.createElement(Kl,{style:{height:"100%"}}),unCheckedChildren:r.createElement(Jl,{style:{height:"100%"}}),checked:Ua(a),defaultChecked:Ua(i),onChange:s=>{const c=tc(s);o==null||o({theme:c})}})},Za=He.Option,oc="base-locale-selector",ic=e=>{const{className:t,style:n,defaultValue:o,value:i,onChange:a}=e;return T.useMemo(()=>r.createElement(He,{style:n,className:ue(W(oc),t),size:"small",defaultValue:o,value:i,onChange:a},r.createElement(Za,{value:"en-US"},"English"),r.createElement(Za,{value:"zh-CN"},"中文")),[t,n,o,i,a])};function xa(e){const{accept:t,success:n,error:o}=e;let i=document.createElement("input");i.type="file",t&&(i.accept=t),i.addEventListener("change",function(){var a;const s=(a=i.files)===null||a===void 0?void 0:a[0];n({file:s}),i=null}),i.addEventListener("error",function(a){typeof o=="function"&&o(a),i=null}),i.click()}function ac(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsDataURL(e)})}function sc(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsText(e)})}function rc(e){const t=new TextEncoder().encode(e),n=new Blob([t],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(n)}function lc(e,t){const{fileName:n}=t,o=rc(e);let i=document.createElement("a");i.href=o,i.download=n,i.click(),i=null}function pi(e){return typeof e=="string"&&(/^\#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(e)||/^[a-z]{1,}$/i.test(e))}function cc(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="linear-gradient"){const n=[];typeof e.angle=="number"?n.push(`${e.angle}deg`):n.push("180deg"),Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(${n.join(", ")})`}else if((e==null?void 0:e.type)==="radial-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`radial-gradient(circle, ${n.join(", ")})`}return t}function yi(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="radial-gradient"||(e==null?void 0:e.type)==="linear-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.length>0&&(e.stops.forEach((o,i)=>{n.push(`${o.color} ${o.offset*100}%`),i===e.stops.length-1&&o.offset<1&&n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(90deg, ${n.join(", ")})`)}return t}function Qa(e,t){if(t===1)return e;let n=1;const o=/^\#[0-9a-f]{6,6}$/i,i=/^\#[0-9a-f]{8,8}$/i;let a=e;if(o.test(e)?n=parseInt(e.substring(5,7).replace(/^\#/,"0x")):i.test(e)&&(n=parseInt(e.substring(7,9).replace(/^\#/,"0x")),a=e.substring(0,7)),n=n*t,o.test(a)&&n>0&&n<1){const s=Math.max(0,Math.min(255,Math.ceil(n*256)));a=`${a.toUpperCase()}${s.toString(16).toUpperCase()}`}return a}function _t(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}function It(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)*e.charCodeAt(n)*n*n;return t.toString(16).substring(0,4)}function Vn(e){const t=e.length,n=Math.floor(t/2),o=e.substring(0,4).padEnd(4,"0"),i=e.substring(0,4).padEnd(4,"0"),a=It(t.toString(16).padEnd(4,o)),s=It(e.substring(n-4,n).padEnd(4,o)).padEnd(4,"f"),c=It(e.substring(n-8,n-4).padEnd(4,o)).padEnd(4,"f"),d=It(e.substring(n-12,n-8).padEnd(4,o)).padEnd(4,"f"),l=It(e.substring(n-16,n-12).padEnd(4,i)).padEnd(4,"f"),h=It(e.substring(n,n+4).padEnd(4,i)).padEnd(4,"f"),u=It(e.substring(n+4,n+8).padEnd(4,i)).padEnd(4,"f"),m=It(i.padEnd(4,o).padEnd(4,i));return`@assets/${a}${s}-${c}-${d}-${l}-${h}${u}${m}`}function qt(e){return/^@assets\/[0-9a-z]{8,8}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{12,12}$/.test(`${e}`)}function en(e){function t(n){const o=dc(n);if(["Null","Number","String","Boolean","Undefined"].indexOf(o)>=0)return n;if(o==="Array"){const i=[];return n.forEach(a=>{i.push(t(a))}),i}else if(o==="Object"){const i={};return Object.keys(n).forEach(c=>{i[c]=t(n[c])}),Object.getOwnPropertySymbols(n).forEach(c=>{i[c]=t(n[c])}),i}}return t(e)}function uo(e){const t=en(e),n=o=>{o.uuid=_t(),o.type==="group"&&o.detail.children&&o.detail.children.forEach(i=>{n(i)})};return n(t),t}function dc(e){return Object.prototype.toString.call(e).replace(/[\]|\[]{1,1}/gi,"").split(" ")[1]}function uc(e,t){const n=e.assets||{},o=en(e),i=(t==null?void 0:t.loadItemMap)||{},a=s=>{s.forEach(c=>{var d,l,h;if(c.type==="image"&&c.detail.src){const u=c.detail.src;if(qt(u)&&!n[u]&&i[u]&&typeof((d=i[u])===null||d===void 0?void 0:d.source)=="string")n[u]={type:"image",value:i[u].source};else if(!n[u]){const m=Vn(u);n[m]||(n[m]={type:"image",value:u}),c.detail.src=m}}else if(c.type==="svg"){const u=c.detail.svg;if(qt(u)&&!n[u]&&i[u]&&typeof((l=i[u])===null||l===void 0?void 0:l.source)=="string")n[u]={type:"svg",value:i[u].source};else if(!n[u]){const m=Vn(u);n[m]||(n[m]={type:"svg",value:u}),c.detail.svg=m}}else if(c.type==="html"){const u=c.detail.html;if(qt(u)&&!n[u]&&i[u]&&typeof((h=i[u])===null||h===void 0?void 0:h.source)=="string")n[u]={type:"html",value:i[u].source};else if(!n[u]){const m=Vn(u);n[m]||(n[m]={type:"html",value:u}),c.detail.html=m}}else if(c.type==="group"&&Array.isArray(c.detail.children)){const u=c.detail.assets||{};Object.keys(u).forEach(m=>{n[m]||(n[m]=u[m])}),delete c.detail.assets,a(c.detail.children)}})};return a(o.elements),o.assets=n,o}function st(e){return(Object.prototype.toString.call(e)||"").replace(/(\[object|\])/gi,"").trim()}const ze={type(e,t){const n=st(e);return t===!0?n.toLocaleLowerCase():n},array(e){return st(e)==="Array"},json(e){return st(e)==="Object"},function(e){return st(e)==="Function"},asyncFunction(e){return st(e)==="AsyncFunction"},boolean(e){return st(e)==="Boolean"},string(e){return st(e)==="String"},number(e){return st(e)==="Number"},undefined(e){return st(e)==="Undefined"},null(e){return st(e)==="Null"},promise(e){return st(e)==="Promise"}};function hc(e,t){const{width:n,height:o}=t;return new Promise((i,a)=>{const s=`
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      width="${n||""}" 
      height = "${o||""}">
      <foreignObject width="100%" height="100%">
        <div xmlns = "http://www.w3.org/1999/xhtml">
          ${e}
        </div>
      </foreignObject>
    </svg>
    `,c=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),d=new FileReader;d.readAsDataURL(c),d.onload=function(l){var h;const u=(h=l==null?void 0:l.target)===null||h===void 0?void 0:h.result;i(u)},d.onerror=function(l){a(l)}})}function mc(e){return new Promise((t,n)=>{const o=e,i=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=new FileReader;a.readAsDataURL(i),a.onload=function(s){var c;const d=(c=s==null?void 0:s.target)===null||c===void 0?void 0:c.result;t(d)},a.onerror=function(s){n(s)}})}var sr=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{Image:fc}=window;function Ni(e){return new Promise((t,n)=>{const o=new fc;o.crossOrigin="anonymous",o.onload=function(){t(o)},o.onabort=n,o.onerror=n,o.src=e})}function gc(e){return sr(this,void 0,void 0,function*(){const t=yield mc(e);return yield Ni(t)})}function vc(e){return e.replace(/\&/gi,"&amp;")}function pc(e,t){return sr(this,void 0,void 0,function*(){e=vc(e);const n=yield hc(e,t);return yield Ni(n)})}function ln(e){return typeof e=="number"&&(e>0||e<=0)}function yc(e){return ln(e)}function wc(e){return ln(e)}function rr(e){return typeof e=="number"&&e>=0}function bc(e){return typeof e=="number"&&e>=0}function Sc(e){return typeof e=="number"&&e>=-360&&e<=360}function Ec(e){return rr(e)}function Cc(e){return ln(e)&&e>=0}function xc(e){return pi(e)}function lr(e){return typeof e=="string"&&/^(http:\/\/|https:\/\/|\.\/|\/)/.test(`${e}`)}function cr(e){return typeof e=="string"&&/^(data:image\/)/.test(`${e}`)}function Mc(e){return cr(e)||lr(e)}function zc(e){return typeof e=="string"&&/^(<svg[\s]{1,}|<svg>)/i.test(`${e}`.trim())&&/<\/[\s]{0,}svg>$/i.test(`${e}`.trim())}function Ic(e){let t=!1;if(typeof e=="string"){let n=document.createElement("div");n.innerHTML=e,n.children.length>0&&(t=!0),n=null}return t}function Ac(e){return typeof e=="string"}function Tc(e){return ln(e)&&e>0}function Nc(e){return ln(e)&&e>0}function Dc(e){return ln(e)&&e>0}function Pc(e){return["center","left","right"].includes(e)}function Lc(e){return typeof e=="string"&&e.length>0}function Oc(e){return["bold"].includes(e)}function Rc(e){return/^(-?\d+(?:\.\d+)?)$/.test(`${e}`)}const xe={x:yc,y:wc,w:rr,h:bc,angle:Sc,number:ln,numberStr:Rc,borderWidth:Ec,borderRadius:Cc,color:xc,imageSrc:Mc,imageURL:lr,imageBase64:cr,svg:zc,html:Ic,text:Ac,fontSize:Tc,lineHeight:Nc,textAlign:Pc,fontFamily:Lc,fontWeight:Oc,strokeWidth:Dc};var xo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ee=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},te,ft;const kc=12,jc="400",_c="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'";class dr{constructor(t,n){te.set(this,void 0),ft.set(this,void 0),xo(this,te,t,"f"),xo(this,ft,Object.assign({devicePixelRatio:1,offscreenCanvas:null},n),"f"),this.$resetFont()}$undoPixelRatio(t){return t/ee(this,ft,"f").devicePixelRatio}$doPixelRatio(t){return ee(this,ft,"f").devicePixelRatio*t}$getContext(){return ee(this,te,"f")}$setContext(t){xo(this,te,t,"f")}$setFont(t){const n=[];t.fontWeight&&n.push(`${t.fontWeight}`),n.push(`${this.$doPixelRatio(t.fontSize||12)}px`),n.push(`${t.fontFamily||"sans-serif"}`),ee(this,te,"f").font=`${n.join(" ")}`}$resetFont(){this.$setFont({fontSize:kc,fontFamily:_c,fontWeight:jc})}$getOffscreenCanvas(){return ee(this,ft,"f").offscreenCanvas}$resize(t){const{width:n,height:o,devicePixelRatio:i,resetStyle:a}=t,{canvas:s}=ee(this,te,"f");s.width=n*i,s.height=o*i,xo(this,ft,Object.assign(Object.assign({},ee(this,ft,"f")),{devicePixelRatio:i}),"f"),a===!0&&(s.style.width=`${n}px`,s.style.height=`${o}px`)}$getSize(){const{devicePixelRatio:t}=ee(this,ft,"f"),{width:n,height:o}=ee(this,te,"f").canvas;return{width:n/t,height:o/t,devicePixelRatio:t}}get canvas(){return ee(this,te,"f").canvas}get fillStyle(){return ee(this,te,"f").fillStyle}set fillStyle(t){ee(this,te,"f").fillStyle=t}get strokeStyle(){return ee(this,te,"f").strokeStyle}set strokeStyle(t){ee(this,te,"f").strokeStyle=t}get lineWidth(){return this.$undoPixelRatio(ee(this,te,"f").lineWidth)}set lineWidth(t){ee(this,te,"f").lineWidth=this.$doPixelRatio(t)}get textAlign(){return ee(this,te,"f").textAlign}set textAlign(t){ee(this,te,"f").textAlign=t}get textBaseline(){return ee(this,te,"f").textBaseline}set textBaseline(t){ee(this,te,"f").textBaseline=t}get globalAlpha(){return ee(this,te,"f").globalAlpha}set globalAlpha(t){ee(this,te,"f").globalAlpha=t}get shadowColor(){return ee(this,te,"f").shadowColor}set shadowColor(t){ee(this,te,"f").shadowColor=t}get shadowOffsetX(){return this.$undoPixelRatio(ee(this,te,"f").shadowOffsetX)}set shadowOffsetX(t){ee(this,te,"f").shadowOffsetX=this.$doPixelRatio(t)}get shadowOffsetY(){return this.$undoPixelRatio(ee(this,te,"f").shadowOffsetY)}set shadowOffsetY(t){ee(this,te,"f").shadowOffsetY=this.$doPixelRatio(t)}get shadowBlur(){return this.$undoPixelRatio(ee(this,te,"f").shadowBlur)}set shadowBlur(t){ee(this,te,"f").shadowBlur=this.$doPixelRatio(t)}get lineCap(){return ee(this,te,"f").lineCap}set lineCap(t){ee(this,te,"f").lineCap=t}get globalCompositeOperation(){return ee(this,te,"f").globalCompositeOperation}set globalCompositeOperation(t){ee(this,te,"f").globalCompositeOperation=t}fill(...t){return ee(this,te,"f").fill(...t)}arc(t,n,o,i,a,s){return ee(this,te,"f").arc(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),i,a,s)}rect(t,n,o,i){return ee(this,te,"f").rect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}fillRect(t,n,o,i){return ee(this,te,"f").fillRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}clearRect(t,n,o,i){return ee(this,te,"f").clearRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}beginPath(){return ee(this,te,"f").beginPath()}closePath(){return ee(this,te,"f").closePath()}lineTo(t,n){return ee(this,te,"f").lineTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}moveTo(t,n){return ee(this,te,"f").moveTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}arcTo(t,n,o,i,a){return ee(this,te,"f").arcTo(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a))}getLineDash(){return ee(this,te,"f").getLineDash()}setLineDash(t){const n=t.map(o=>this.$doPixelRatio(o));return ee(this,te,"f").setLineDash(n)}stroke(t){return t?ee(this,te,"f").stroke(t):ee(this,te,"f").stroke()}translate(t,n){return ee(this,te,"f").translate(this.$doPixelRatio(t),this.$doPixelRatio(n))}rotate(t){return ee(this,te,"f").rotate(t)}drawImage(...t){const n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[t.length-4],d=t[t.length-3],l=t[t.length-2],h=t[t.length-1];return t.length===9?ee(this,te,"f").drawImage(n,this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s),this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h)):ee(this,te,"f").drawImage(n,this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(l),this.$doPixelRatio(h))}createPattern(t,n){return ee(this,te,"f").createPattern(t,n)}measureText(t){return ee(this,te,"f").measureText(t)}fillText(t,n,o,i){return i!==void 0?ee(this,te,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):ee(this,te,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}strokeText(t,n,o,i){return i!==void 0?ee(this,te,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):ee(this,te,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}save(){ee(this,te,"f").save()}restore(){ee(this,te,"f").restore()}scale(t,n){ee(this,te,"f").scale(t,n)}circle(t,n,o,i,a,s,c,d){ee(this,te,"f").ellipse(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),a,s,c,d)}isPointInPath(t,n){return ee(this,te,"f").isPointInPath(this.$doPixelRatio(t),this.$doPixelRatio(n))}clip(...t){return ee(this,te,"f").clip(...t)}setTransform(t,n,o,i,a,s){return ee(this,te,"f").setTransform(t,n,o,i,a,s)}getTransform(){return ee(this,te,"f").getTransform()}createLinearGradient(t,n,o,i){return ee(this,te,"f").createLinearGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}createRadialGradient(t,n,o,i,a,s){return ee(this,te,"f").createRadialGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s))}createConicGradient(t,n,o){return ee(this,te,"f").createConicGradient(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}}te=new WeakMap,ft=new WeakMap;function hn(e){const{width:t,height:n,ctx:o,devicePixelRatio:i}=e;let a=o;if(!a){const c=document.createElement("canvas");c.width=t*i,c.height=n*i,a=c.getContext("2d")}return new dr(a,e)}function Uo(e){const{width:t,height:n,devicePixelRatio:o}=e,i=new OffscreenCanvas(t*o,n*o),s=i.getContext("2d").canvas.getContext("2d");return new dr(s,{devicePixelRatio:o,offscreenCanvas:i})}function Vc(e,t){const{width:n,height:o,devicePixelRatio:i,offscreen:a,createCustomContext2D:s}=t,c={width:n,height:o,devicePixelRatio:i},d=e.getContext("2d");if(s){const l=s(c),h=s(c),u=s(c),m=hn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:m,drawView:()=>{const{width:g,height:p}=l.$getSize();m.clearRect(0,0,g,p),m.drawImage(u.canvas,0,0,g,p),m.drawImage(l.canvas,0,0,g,p),m.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}if(a===!0){const l=Uo(c),h=Uo(c),u=Uo(c),m=hn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:m,drawView:()=>{const{width:g,height:p}=l.$getSize();m.clearRect(0,0,g,p),m.drawImage(u.canvas,0,0,g,p),m.drawImage(l.canvas,0,0,g,p),m.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),l.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}else{const l=hn(c),h=hn(c),u=hn(c),m=hn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:l,overlayContext:h,boardContext:m,drawView:()=>{m.clearRect(0,0,n,o),m.drawImage(u.canvas,0,0,n,o),m.drawImage(l.canvas,0,0,n,o),m.drawImage(h.canvas,0,0,n,o),u.clearRect(0,0,n,o),l.clearRect(0,0,n,o),h.clearRect(0,0,n,o)}}}}var Bc=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},rt=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ze;class tn{constructor(){Ze.set(this,void 0),Bc(this,Ze,new Map,"f")}on(t,n){if(rt(this,Ze,"f").has(t)){const o=rt(this,Ze,"f").get(t)||[];o==null||o.push(n),rt(this,Ze,"f").set(t,o)}else rt(this,Ze,"f").set(t,[n])}off(t,n){if(rt(this,Ze,"f").has(t)){const o=rt(this,Ze,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}rt(this,Ze,"f").set(t,o||[])}}trigger(t,n){const o=rt(this,Ze,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(rt(this,Ze,"f").has(t)){const n=rt(this,Ze,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){rt(this,Ze,"f").clear()}}Ze=new WeakMap;function Fc(e,t){const n=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);return n===0?n:Math.sqrt(n)}function qe(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var Mo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Qt=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Zo,gt,wi,ia;class nn{constructor(t){Zo.add(this),gt.set(this,void 0),wi.set(this,void 0),Mo(this,wi,en(t.defaultStorage),"f"),Mo(this,gt,Qt(this,Zo,"m",ia).call(this),"f")}set(t,n){Qt(this,gt,"f")[t]=n}get(t){return Qt(this,gt,"f")[t]}getSnapshot(t){return(t==null?void 0:t.deepClone)===!0?en(Qt(this,gt,"f")):Object.assign({},Qt(this,gt,"f"))}clear(){Mo(this,gt,Qt(this,Zo,"m",ia).call(this),"f")}destroy(){Mo(this,gt,null,"f")}}gt=new WeakMap,wi=new WeakMap,Zo=new WeakSet,ia=function(){return en(Qt(this,wi,"f"))};function wo(e){const{activeStore:t}=e;return{scale:t==null?void 0:t.scale,offsetTop:t==null?void 0:t.offsetTop,offsetBottom:t==null?void 0:t.offsetBottom,offsetLeft:t==null?void 0:t.offsetLeft,offsetRight:t==null?void 0:t.offsetRight}}function Di(e){const{activeStore:t}=e;return{devicePixelRatio:t.devicePixelRatio,width:t==null?void 0:t.width,height:t==null?void 0:t.height,contextWidth:t==null?void 0:t.contextWidth,contextHeight:t==null?void 0:t.contextHeight}}function Wc(e){return e/Math.PI*180}function Ct(e){return e/180*Math.PI}function bo(e,t,n,o){const i=Ct(t||0);n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(i),e.translate(-n.x,-n.y)),o(e),n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(-i),e.translate(-n.x,-n.y))}function mt(e,t,n){const o=at(t);bo(e,t.angle||0,o,()=>{n(e)})}function at(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function ur(e){const t=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),n=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),o=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),i=Math.max(e[0].y,e[1].y,e[2].y,e[3].y),a={x:t,y:n,w:o-t,h:i-n};return at(a)}function Hc(e,t,n){const o=aa(e,t),i=aa(e,n);return i!==null&&o!==null?o>Math.PI*3/2&&i<Math.PI/2?i+(Math.PI*2-o):i>Math.PI*3/2&&o<Math.PI/2?o+(Math.PI*2-i):i-o:0}function aa(e,t){const n=t.x-e.x,o=t.y-e.y;if(n===0){if(o<0)return 0;if(o>0)return Math.PI}else if(o===0){if(n<0)return Math.PI*3/2;if(n>0)return Math.PI/2}return n>0&&o<0?Math.atan(Math.abs(n)/Math.abs(o)):n>0&&o>0?Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o>0?Math.PI+Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o<0?2*Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):0}function Ie(e,t,n){let a=aa(e,t)+n;a>Math.PI*2?a=a-Math.PI*2:a<0-Math.PI*2&&(a=a+Math.PI*2),a<0&&(a=a+Math.PI*2);const s=Fc(e,t);let c=0,d=0;return a===0?(c=0,d=0-s):a>0&&a<Math.PI/2?(c=Math.sin(a)*s,d=0-Math.cos(a)*s):a===Math.PI/2?(c=s,d=0):a>Math.PI/2&&a<Math.PI?(c=Math.sin(Math.PI-a)*s,d=Math.cos(Math.PI-a)*s):a===Math.PI?(c=0,d=s):a>Math.PI&&a<3/2*Math.PI?(c=0-Math.sin(a-Math.PI)*s,d=Math.cos(a-Math.PI)*s):a===3/2*Math.PI?(c=0-s,d=0):a>3/2*Math.PI&&a<2*Math.PI?(c=0-Math.sin(2*Math.PI-a)*s,d=0-Math.cos(2*Math.PI-a)*s):a===2*Math.PI&&(c=0,d=0-s),c+=e.x,d+=e.y,{x:c,y:d}}function bi(e,t){if((t==null?void 0:t.length)>0){let n=e.x,o=e.y;return t.forEach(i=>{const{x:a,y:s,w:c,h:d,angle:l=0}=i,h=at({x:a,y:s,w:c,h:d,angle:l}),u=Ie(h,{x:n,y:o},Ct(l));n=u.x,o=u.y}),{x:n,y:o}}return e}function hr(e,t,n){const{x:o,y:i,w:a,h:s}=e;let c={x:o,y:i},d={x:o+a,y:i},l={x:o+a,y:i+s},h={x:o,y:i+s};if(n&&(n>0||n<0)){const u=Ct(ct(n));c=Ie(t,c,u),d=Ie(t,d,u),l=Ie(t,l,u),h=Ie(t,h,u)}return[c,d,l,h]}function Bn(e){const{angle:t=0}=e,n=at(e);return hr(e,n,t)}function Ja(e,t,n){return[Ie(e,{x:t[0].x,y:t[0].y},n),Ie(e,{x:t[1].x,y:t[1].y},n),Ie(e,{x:t[2].x,y:t[2].y},n),Ie(e,{x:t[3].x,y:t[3].y},n)]}function ct(e){if(!(e>0||e<0)||e===0)return 0;let t=e%360;return t<0&&(t+=360),t}function mr(e){let t=!0;if(Array.isArray(e)){const n=[];e.forEach(o=>{var i;typeof o.uuid=="string"&&o.uuid?n.includes(o.uuid)?(t=!1,console.warn(`Duplicate uuids: ${o.uuid}`)):n.push(o.uuid):(t=!1,console.warn("Element missing uuid",o)),o.type==="group"&&(t=mr((i=o==null?void 0:o.detail)===null||i===void 0?void 0:i.children))})}return t}function Ma(e){var t;const n={x:0,y:0,w:0,h:0};let o=null;for(let a=0;a<e.length;a++){const s=e[a];if(!((t=s==null?void 0:s.operations)===null||t===void 0)&&t.invisible)continue;const c={x:s.x,y:s.y,w:s.w,h:s.h,angle:s.angle||0};if(c.angle&&(c.angle>0||c.angle<0)){const d=Bn(c);if(d.length===4){const l=[d[0].x,d[1].x,d[2].x,d[3].x],h=[d[0].y,d[1].y,d[2].y,d[3].y];c.x=Math.min(...l),c.y=Math.min(...h),c.w=Math.abs(Math.max(...l)-Math.min(...l)),c.h=Math.abs(Math.max(...h)-Math.min(...h))}}if(o){const d=Math.min(c.x,n.x),l=Math.min(c.y,n.y),h=Math.max(c.x+c.w,n.x+n.w),u=Math.max(c.y+c.h,n.y+n.h);n.x=d,n.y=l,n.w=Math.abs(h-d),n.h=Math.abs(u-l)}else n.x=c.x,n.y=c.y,n.w=c.w,n.h=c.h;o=c}return{x:Math.floor(n.x),y:Math.floor(n.y),w:Math.ceil(n.w),h:Math.ceil(n.h)}}function fr(e,t){const n={x:0,y:0,w:0,h:0};e.forEach(i=>{const a={x:i.x,y:i.y,w:i.w,h:i.h,angle:i.angle};if(a.angle&&(a.angle>0||a.angle<0)){const h=Bn(a);if(h.length===4){const u=[h[0].x,h[1].x,h[2].x,h[3].x],m=[h[0].y,h[1].y,h[2].y,h[3].y];a.x=Math.min(...u),a.y=Math.min(...m),a.w=Math.abs(Math.max(...u)-Math.min(...u)),a.h=Math.abs(Math.max(...m)-Math.min(...m))}}const s=Math.min(a.x,n.x),c=Math.min(a.y,n.y),d=Math.max(a.x+a.w,n.x+n.w),l=Math.max(a.y+a.h,n.y+n.h);n.x=s,n.y=c,n.w=Math.abs(d-s),n.h=Math.abs(l-c)}),t!=null&&t.extend&&(n.x=Math.min(n.x,0),n.y=Math.min(n.y,0));const o={contextWidth:n.w,contextHeight:n.h};return t!=null&&t.viewWidth&&(t!=null&&t.viewHeight)&&(t==null?void 0:t.viewWidth)>0&&(t==null?void 0:t.viewHeight)>0&&(t.viewWidth>n.x+n.w&&(o.contextWidth=t.viewWidth-n.x),t.viewHeight>n.y+n.h&&(o.contextHeight=t.viewHeight-n.y)),o}function Gc(e,t,n){const o=fr(e,{viewWidth:t.width,viewHeight:t.height,extend:n==null?void 0:n.extend});return(n==null?void 0:n.extend)===!0&&(o.contextWidth=Math.max(o.contextWidth,t.contextWidth),o.contextHeight=Math.max(o.contextHeight,t.contextHeight)),{contextSize:o}}function gr(e,t){var n;let o=null;for(let i=0;i<t.length;i++){const a=t[i];if(a.uuid===e){o=a;break}else if(!o&&a.type==="group"){const s=gr(e,((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.children)||[]);if((s==null?void 0:s.uuid)===e){o=s;break}}}return o}function Qo(e,t){const n=[];function o(i){var a;for(let s=0;s<i.length;s++){const c=i[s];e.includes(c.uuid)?n.push(c):c.type==="group"&&o(((a=c==null?void 0:c.detail)===null||a===void 0?void 0:a.children)||[])}}return o(t),n}function za(e,t){const n=[];function o(i,a){var s;let c=null;for(let d=0;d<a.length;d++){const l=a[d];if(l.uuid===i){c=l;break}else if(!c&&l.type==="group"){n.push(l);const h=o(i,((s=l==null?void 0:l.detail)===null||s===void 0?void 0:s.children)||[]);if((h==null?void 0:h.uuid)===i){c=h;break}n.pop()}}return c}return o(e,t),n}function vr(e,t){var n;const o=[];let i=e;if(t.length>1)for(let a=0;a<t.length-1;a++){const s=t[a],c=i[s];if((c==null?void 0:c.type)==="group"&&Array.isArray((n=c==null?void 0:c.detail)===null||n===void 0?void 0:n.children))o.push(c),i=c.detail.children;else return null}return o}function on(e){const{x:t,y:n,w:o,h:i,angle:a}=e;return{x:t,y:n,w:o,h:i,angle:a}}function pr(e,t){const n=[];return e.forEach(o=>{const i=Ge(o,t);i&&n.push(i)}),n}function Ge(e,t){let n=null,o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i<e.length-1&&s.type==="group")o=s.detail.children;else if(i===e.length-1)n=s;else break}return n}function ht(e,t){const n=[];let o=!1;const i=a=>{var s;for(let c=0;c<a.length&&o!==!0;c++){n.push(c);const d=a[c];if(d.uuid===e){o=!0;break}else d.type==="group"&&i(((s=d==null?void 0:d.detail)===null||s===void 0?void 0:s.children)||[]);if(o)break;n.pop()}};return i(t),n}function yr(e){const{x:t,y:n,h:o,w:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]}function Le(e){const{x:t,y:n,w:o,h:i,angle:a=0}=e;return a===0?yr(e):hr(e,at({x:t,y:n,w:o,h:i,angle:a}),a)}function Ia(e){const t=[];let n=0,o=0;const i=[],a=[...e];for(let s=0;s<a.length;s++){const{x:c,y:d,w:l,h,angle:u=0}=a[s];n+=c,o+=d;let m;if(s===0){const f={x:n,y:o,w:l,h,angle:u};m=Le({x:c,y:d,w:l,h,angle:u}),i.push({center:at(f),angle:u,radian:Ct(u)})}else{m=yr({x:n,y:o,w:l,h,angle:u});for(let g=0;g<i.length;g++){const{center:p,radian:y}=i[g];m=Ja(p,m,y)}const v=ur(m);if(u>0||u<0){const g=Ct(u);m=Ja(v,m,g)}i.push({center:v,angle:u,radian:Ct(u)})}t.push(m)}return t}function Yc(e,t){const{groupQueue:n}=t;if(!(n.length>0))return[Le(e)];const o=[...n,e];return Ia(o)}function vo(e,t){return Yc(e,t).pop()||null}function $c(e,t){const{scale:n,offsetX:o,offsetY:i}=e,{viewSizeInfo:a}=t,{width:s,height:c,contextWidth:d,contextHeight:l}=a,h=d*n,u=l*n,m=0-o*n,f=0-i*n,v=s-(h+m/n),g=c-(u+f/n);return{scale:n,offsetLeft:m,offsetTop:f,offsetRight:v,offsetBottom:g}}function Xc(e){const{scale:t,point:n,viewScaleInfo:o}=e,{offsetLeft:i,offsetTop:a}=o,s=t/o.scale,c=n.x,d=n.y,l=c-c*s+(i*s-i),h=d-d*s+(a*s-a);return{moveX:l,moveY:h}}function Uc(e){const{moveX:t=0,moveY:n=0,viewScaleInfo:o,viewSizeInfo:i}=e,{scale:a}=o,{width:s,height:c,contextWidth:d,contextHeight:l}=i;let h=o.offsetLeft,u=o.offsetRight,m=o.offsetTop,f=o.offsetBottom;h+=t,m+=n;const v=d*a,g=l*a;return u=s-(v+h),f=c-(g+m),{scale:a,offsetTop:m,offsetLeft:h,offsetRight:u,offsetBottom:f}}function Ye(e,t){const{viewScaleInfo:n}=t,{x:o,y:i,w:a,h:s,angle:c}=e,{scale:d,offsetTop:l,offsetLeft:h}=n;return{x:o*d+h,y:i*d+l,w:a*d,h:s*d,angle:c}}function pe(e,t){const{viewScaleInfo:n}=t,{x:o,y:i}=e,{scale:a,offsetTop:s,offsetLeft:c}=n;return{x:o*a+c,y:i*a+s}}function Fe(e,t){return[pe(e[0],t),pe(e[1],t),pe(e[2],t),pe(e[3],t)]}function sa(e,t){const{context2d:n,element:o,viewScaleInfo:i}=t,{angle:a=0}=o,{x:s,y:c,w:d,h:l}=Ye(o,{viewScaleInfo:i}),h=Bn({x:s,y:c,w:d,h:l,angle:a});if(h.length>=2){n.beginPath(),n.moveTo(h[0].x,h[0].y);for(let u=1;u<h.length;u++)n.lineTo(h[u].x,h[u].y);n.closePath()}return!!n.isPointInPath(e.x,e.y)}function Zc(e,t,n){const o=Le(t);return wr(e,o)}function wr(e,t,n){const o=[t[0].x,t[1].x,t[2].x,t[3].x],i=[t[0].y,t[1].y,t[2].y,t[3].y],a=Math.min(...o),s=Math.max(...o),c=Math.min(...i),d=Math.max(...i);return e.x>a&&e.x<s&&e.y>c&&e.y<d}function Qc(e,t){var n,o,i;const{context2d:a,data:s,viewScaleInfo:c,viewSizeInfo:d,groupQueue:l}=t,h={index:-1,element:null,groupQueueIndex:-1};if(l&&Array.isArray(l)&&(l==null?void 0:l.length)>0)for(let u=l.length-1;u>=0;u--){let m=0,f=0,v=0;for(let p=0;p<=u;p++)m+=l[p].x,f+=l[p].y,v+=l[p].angle||0;const g=l[u];if(g&&g.type==="group"&&Array.isArray((n=g.detail)===null||n===void 0?void 0:n.children))for(let p=0;p<g.detail.children.length;p++){const y=g.detail.children[p];if(((o=y==null?void 0:y.operations)===null||o===void 0?void 0:o.invisible)!==!0)if(y){const S={x:m+y.x,y:f+y.y,w:y.w,h:y.h,angle:v+(y.angle||0)};if(sa(e,{context2d:a,element:S,viewScaleInfo:c,viewSizeInfo:d})){h.element=y,(u<l.length-1||y.type!=="group")&&(h.groupQueueIndex=u);break}}else break}if(h.element)break}if(h.element)return h;for(let u=s.elements.length-1;u>=0;u--){const m=s.elements[u];if(((i=m==null?void 0:m.operations)===null||i===void 0?void 0:i.invisible)!==!0&&sa(e,{context2d:a,element:m,viewScaleInfo:c,viewSizeInfo:d})){h.index=u,h.element=m;break}}return h}function br(e,t){const{groupQueue:n}=t,o=vo(e,{groupQueue:n}),i=qe(o[0],o[1]),a=qe(o[1],o[2]),s=qe(o[2],o[3]),c=qe(o[3],o[0]),d=o[0],l=o[1],h=o[2],u=o[3],m=Math.max(d.x,l.x,h.x,u.x),f=Math.max(d.y,l.y,h.y,u.y),v=Math.min(d.x,l.x,h.x,u.x),g=Math.min(d.y,l.y,h.y,u.y);return{center:{x:(m+v)/2,y:(f+g)/2},topLeft:d,topRight:l,bottomLeft:u,bottomRight:h,top:i,right:a,left:c,bottom:s}}function Sr(e){const t=Math.max(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),n=Math.max(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),o=Math.min(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),a={x:e.center.x,y:e.center.y},s={x:o,y:i},c={x:t,y:i},d={x:t,y:n},l={x:o,y:n},h=qe(s,c),u=qe(l,d),m=qe(s,l),f=qe(c,d);return{center:a,topLeft:s,topRight:c,bottomLeft:l,bottomRight:d,top:h,right:f,left:m,bottom:u}}function Jc(e,t){const n={},o=[],i=a=>{const s={isVisibleInView:!0,isGroup:a.type==="group",position:[...o]};let c=null;const d=vr(e,o);c=br(a,{groupQueue:d||[]}),n[a.uuid]=Object.assign(Object.assign({},s),{originRectInfo:c,rangeRectInfo:xe.angle(a.angle)?Sr(c):c}),a.type==="group"&&a.detail.children.forEach((l,h)=>{o.push(h),i(l),o.pop()})};return e.forEach((a,s)=>{o.push(s),i(a),o.pop()}),Er(n,t)}function Kc(e,t){const n=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),o=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),a=Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),s=Math.min(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),c=Math.max(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),d=Math.min(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y),l=Math.max(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y);return n<=c&&o>=s&&i<=l&&a>=d||c<=a&&c>=a&&c<=a&&c>=a}function Er(e,t){const n=qc(t);let o=0,i=0;return Object.keys(e).forEach(a=>{const s=e[a];s.isVisibleInView=Kc(s.rangeRectInfo,n),s.isVisibleInView?o++:i++}),{viewVisibleInfoMap:e,visibleCount:o,invisibleCount:i}}function qc(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i,offsetLeft:a}=t,{width:s,height:c}=n,d=0-a/o,l=0-i/o,h=s/o,u=c/o,m=at({x:d,y:l,w:h,h:u}),f={x:d,y:l},v={x:d+h,y:l},g={x:d,y:l+u},p={x:d+h,y:l+u},y={x:d,y:m.y},S={x:m.x,y:l},E={x:d+h,y:m.y},w={x:m.x,y:l+u};return{center:m,topLeft:f,topRight:v,bottomLeft:g,bottomRight:p,left:y,top:S,right:E,bottom:w}}function je(e,t){const{x:n,y:o}=e,{size:i,angle:a}=t;return{x:n-i/2,y:o-i/2,w:i,h:i,angle:a}}function zo(e,t){const{groupQueue:n,controllerSize:o,viewScaleInfo:i}=t,a=(o&&o>0?o:8)/i.scale,{x:s,y:c,w:d,h:l,angle:h=0}=e,u=[{uuid:_t(),x:s,y:c,w:d,h:l,angle:h,type:"group",detail:{children:[]}},...n];let m=0;u.forEach(({angle:re=0})=>{m+=re});const f=vo(e,{groupQueue:n}),v=vo({x:s-a*2,y:c-a*2,h:l+a*4,w:d+a*4,angle:h},{groupQueue:[...n]}),g=qe(f[0],f[1]),p=qe(f[1],f[2]),y=qe(f[2],f[3]),S=qe(f[3],f[0]),E=f[0],w=f[1],D=f[2],b=f[3],x=je(g,{size:a,angle:m}),j=je(p,{size:a,angle:m}),P=je(y,{size:a,angle:m}),z=je(S,{size:a,angle:m}),V=je(E,{size:a,angle:m}),O=je(w,{size:a,angle:m}),N=je(b,{size:a,angle:m}),B=je(D,{size:a,angle:m}),H=Le(V),_=Le(O),L=Le(N),k=Le(B),C=[H[1],_[0],_[3],H[2]],Y=[_[3],_[2],k[1],k[0]],G=[L[1],k[0],k[3],L[2]],R=[H[3],H[2],L[1],L[0]],$=Le(x),Q=Le(j),I=Le(P),A=Le(z),M=qe(v[0],v[1]),F=je(M,{size:a,angle:m}),Z=Le(F);return{elementWrapper:f,left:{type:"left",vertexes:R,center:S},right:{type:"right",vertexes:Y,center:p},top:{type:"top",vertexes:C,center:g},bottom:{type:"bottom",vertexes:G,center:y},topLeft:{type:"top-left",vertexes:H,center:E},topRight:{type:"top-right",vertexes:_,center:w},bottomLeft:{type:"bottom-left",vertexes:L,center:b},bottomRight:{type:"bottom-right",vertexes:k,center:D},leftMiddle:{type:"left-middle",vertexes:A,center:S},rightMiddle:{type:"right-middle",vertexes:Q,center:p},topMiddle:{type:"top-middle",vertexes:$,center:g},bottomMiddle:{type:"bottom-middle",vertexes:I,center:y},rotate:{type:"rotate",vertexes:Z,center:M}}}function Ka(e,t){const{controllerSize:n,viewScaleInfo:o}=t,i=n&&n>0?n:8,{x:a,y:s,w:c,h:d}=Ye(e,{viewScaleInfo:o}),l=at({x:a,y:s,w:c,h:d}),h={x:l.x,y:s},u={x:a+c,y:l.y},m={x:l.x,y:s+d},f={x:a,y:l.y},v={x:a,y:s},g={x:a+c,y:s},p={x:a+c,y:s+d},y={x:a,y:s+d},S=je(h,{size:i,angle:0}),E=je(u,{size:i,angle:0}),w=je(m,{size:i,angle:0}),D=je(f,{size:i,angle:0}),b=je(v,{size:i,angle:0}),x=je(g,{size:i,angle:0}),j=je(y,{size:i,angle:0}),P=je(p,{size:i,angle:0}),z=Le(b),V=Le(x),O=Le(j),N=Le(P),B=[z[1],V[0],V[3],z[2]],H=[V[3],V[2],N[1],N[0]],_=[O[1],N[0],N[3],O[2]],L=[z[3],z[2],O[1],O[0]],k=Le(S),C=Le(E),Y=Le(w),G=Le(D);return{left:{type:"left",vertexes:L,center:f},right:{type:"right",vertexes:H,center:u},top:{type:"top",vertexes:B,center:h},bottom:{type:"bottom",vertexes:_,center:m},topLeft:{type:"top-left",vertexes:z,center:v},topRight:{type:"top-right",vertexes:V,center:g},bottomLeft:{type:"bottom-left",vertexes:O,center:y},bottomRight:{type:"bottom-right",vertexes:N,center:p},leftMiddle:{type:"left-middle",vertexes:G,center:f},rightMiddle:{type:"right-middle",vertexes:C,center:u},topMiddle:{type:"top-middle",vertexes:k,center:h},bottomMiddle:{type:"bottom-middle",vertexes:Y,center:m}}}function Aa(e){let t="";return e.forEach(n=>{t+=n.type+n.params.join(" ")}),t}function ye(e,t){let n=2;return typeof(t==null?void 0:t.decimalPlaces)<"u"&&(t==null?void 0:t.decimalPlaces)>=0&&(n=t.decimalPlaces),parseFloat(e.toFixed(n))}const Jo="Text Element";function cn(){return{boxSizing:"border-box",borderWidth:0,borderColor:"#000000",shadowColor:"#000000",borderRadius:0,borderDash:[],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,opacity:1,color:"#000000",textAlign:"left",verticalAlign:"top",fontSize:16,fontFamily:"sans-serif",fontWeight:400,minInlineSize:"auto",wordBreak:"break-all",overflow:"hidden"}}function e0(){return{background:"#D9D9D9"}}function t0(){return{background:"#D9D9D9",radius:0}}function n0(e){const t=cn();return{text:Jo,color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,lineHeight:e.w/Jo.length,fontSize:e.w/Jo.length,textAlign:"center",verticalAlign:"middle"}}function o0(){return{svg:'<svg t="1701004189871" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"   width="200" height="200"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"   fill="#2c2c2c"></path></svg>'}}function i0(){return{src:"data:image/svg+xml;base64,PHN2ZyAgIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxwYXRoIGQ9Ik05MjggMTYwSDk2Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY2NDBjMCAxNy43IDE0LjMgMzIgMzIgMzJoODMyYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE5MmMwLTE3LjctMTQuMy0zMi0zMi0zMnogbS00MCA2MzJIMTM2di0zOS45bDEzOC41LTE2NC4zIDE1MC4xIDE3OEw2NTguMSA0ODkgODg4IDc2MS42Vjc5MnogbTAtMTI5LjhMNjY0LjIgMzk2LjhjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDQyNC42IDY2Ni40bC0xNDQtMTcwLjdjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDEzNiA2NTIuN1YyMzJoNzUydjQzMC4yeiIgIGZpbGw9IiM1MTUxNTEiPjwvcGF0aD48cGF0aCBkPSJNMzA0IDQ1NmM0OC42IDAgODgtMzkuNCA4OC04OHMtMzkuNC04OC04OC04OC04OCAzOS40LTg4IDg4IDM5LjQgODggODggODh6IG0wLTExNmMxNS41IDAgMjggMTIuNSAyOCAyOHMtMTIuNSAyOC0yOCAyOC0yOC0xMi41LTI4LTI4IDEyLjUtMjggMjgtMjh6IiAgZmlsbD0iIzUxNTE1MSI+PC9wYXRoPjwvc3ZnPg=="}}function a0(){return{children:[],background:"#D9D9D9",overflow:"hidden"}}const s0=cn();function Pi(e,t){const{viewScaleInfo:n}=t,{scale:o}=n;let{borderRadius:i,borderDash:a}=e.detail;const s=Array.isArray(a)&&a.length>0,{boxSizing:c=s0.boxSizing,borderWidth:d}=e.detail;Array.isArray(d)&&(i=0);let{x:l,y:h,w:u,h:m}=e,f=[0,0,0,0];if(typeof i=="number"){const g=i*o;f=[g,g,g,g]}else Array.isArray(i)&&(i==null?void 0:i.length)===4&&(f=[i[0]*o,i[1]*o,i[2]*o,i[3]*o]);let v=0;return typeof d=="number"&&(v=(d||0)*o),c==="border-box"&&!s?(l=e.x+v/2,h=e.y+v/2,u=e.w-v,m=e.h-v):c==="content-box"?(l=e.x-v/2,h=e.y-v/2,u=e.w+v,m=e.h+v):(l=e.x,h=e.y,u=e.w,m=e.h),u=Math.max(u,1),m=Math.max(m,1),f=f.map(g=>Math.min(g,u/2,m/2)),{x:l,y:h,w:u,h:m,radiusList:f}}const Be=e=>ye(e,{decimalPlaces:4});function Cr(e,t){const{detail:n}=e,{xRatio:o,yRatio:i,maxRatio:a}=t,s=(o+i)/2,{borderWidth:c,borderRadius:d,borderDash:l,shadowOffsetX:h,shadowOffsetY:u,shadowBlur:m}=n;if(typeof c=="number")n.borderWidth=Be(c*s);else if(Array.isArray(n.borderWidth)){const f=c;n.borderWidth=[Be(f[0]*i),Be(f[1]*o),Be(f[2]*i),Be(f[3]*o)]}if(typeof d=="number")n.borderRadius=Be(d*s);else if(Array.isArray(n.borderRadius)){const f=d;n.borderRadius=[f[0]*o,f[1]*o,f[2]*i,f[3]*i]}Array.isArray(l)&&l.forEach((f,v)=>{n.borderDash[v]=Be(f*a)}),typeof h=="number"&&(n.shadowOffsetX=Be(h*a)),typeof u=="number"&&(n.shadowOffsetX=Be(u*a)),typeof m=="number"&&(n.shadowOffsetX=Be(m*a))}function r0(e,t){const{xRatio:n,yRatio:o}=t,{x:i,y:a,w:s,h:c}=e;e.x=Be(i*n),e.y=Be(a*o),e.w=Be(s*n),e.h=Be(c*o),Cr(e,t)}function l0(e,t){const{minRatio:n,maxRatio:o}=t,{fontSize:i,lineHeight:a}=e.detail,s=(n+o)/2;i&&i>0&&(e.detail.fontSize=Be(i*s)),a&&a>0&&(e.detail.lineHeight=Be(a*s))}function xr(e,t){const{type:n}=e;r0(e,t),n==="circle"||(n==="text"?l0(e,t):n==="image"||n==="svg"||n==="html"||n==="path"||n==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(o=>{xr(o,t)}))}function Mr(e,t){const n=t.w&&t.w>0?t.w:e.w,o=t.h&&t.h>0?t.h:e.h,i=n/e.w,a=o/e.h;if(i===a&&i===1)return e;const s=Math.min(i,a),c=Math.max(i,a);e.w=n,e.h=o;const d={xRatio:i,yRatio:a,minRatio:s,maxRatio:c};return e.type==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(l=>{xr(l,d)}),Cr(e,d),e}const Vi=200,Bi=200;function c0(e,t){let n=0,o=0,i=Vi,a=Bi;if(t){const{viewScaleInfo:c,viewSizeInfo:d}=t,{scale:l,offsetLeft:h,offsetTop:u}=c,{width:m,height:f}=d,v=m/4,g=f/4;Vi>=v?i=v/l:i=Vi/l,Bi>=g?a=g/l:a=Bi/l,["circle","svg","image"].includes(e)?i=a=Math.max(i,a):e==="text"&&(a=i/Jo.length*2),n=(0-h+m/2-i*l/2)/l,o=(0-u+f/2-a*l/2)/l}return{x:n,y:o,w:i,h:a}}function d0(e,t,n){const o=c0(e,n);let i={};return e==="rect"?i=e0():e==="circle"?i=t0():e==="text"?i=n0(o):e==="svg"?i=o0():e==="image"?i=i0():e==="group"&&(i=a0()),Object.assign(Object.assign(Object.assign({},o),t),{uuid:_t(),type:e,detail:Object.assign(Object.assign({},i),t.detail||{})})}function zr(e,t,n){let o=!1;if(t.length===1){const i=t[0];n.splice(i,0,e),o=!0}else if(t.length>1){let i=n;for(let a=0;a<t.length;a++){const s=t[a],c=i[s];if(a===t.length-1){const d=t[a];i.splice(d,0,e),o=!0}else if(a<t.length-1&&c.type==="group")i=c.detail.children;else break}}return o}function Ir(e,t){let n=!1;if(e.length===1){const o=e[0];t.splice(o,1),n=!0}else if(e.length>1){let o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i===e.length-1){const c=e[i];o.splice(c,1),n=!0}else if(i<e.length-1&&s.type==="group")o=s.detail.children;else break}}return n}function u0(e,t){const n=ht(e,t);return Ir(n,t)}function Si(e,t){const n=[...t.from],o=[...t.to];if(n.length===0||o.length===0)return{elements:e,from:n,to:o};if(n.length<=o.length){for(let a=0;a<n.length;a++)if(o[a]===n[a]){if(a===n.length-1)return{elements:e,from:n,to:o};continue}}const i=Ge(n,e);if(i){if(!zr(i,o,e))return{elements:e,from:n,to:o};let s=-1,c=!1;if(n.length>=1&&o.length>=1){if(n.length<=o.length){if(n.length===1)n[0]<o[0]&&(c=!0);else for(let d=0;d<n.length&&n[d]===o[d];d++)if(n.length===n.length-1){c=!0;break}}if(n.length>=o.length)if(o.length===1)o[0]<n[0]&&(c=!0);else for(let d=0;d<o.length&&(d===o.length-1&&o[d]<n[d]&&(c=!0),n[d]===o[d]);d++);}if(c===!0)for(let d=0;d<n.length&&o[d]>=0;d++)o[d]!==n[d]&&o[d]<n[d]&&d==o.length-1&&(s=d);s>=0&&(n[s]=n[s]+1),Ir(n,e)}return{elements:e,from:n,to:o}}function h0(e,t){var n;const o=Object.keys(t);for(let i=0;i<o.length;i++){const a=o[i];["x","y","w","h","angle","name"].includes(a)?e[a]=t[a]:["detail","operations"].includes(a)&&(ze.json(t[a])?(e!=null&&e.hasOwnProperty(a)||(e[a]={}),ze.json(e[a])&&(e[a]=Object.assign(Object.assign({},e[a]),t[a]))):ze.array(t[a])&&(e!=null&&e.hasOwnProperty(a)||(e[a]=[]),ze.array(e[a])&&((n=t==null?void 0:t[a])===null||n===void 0||n.forEach((s,c)=>{e[a][c]=s}),e[a]=[...e[a],...t[a]])))}return e}function Vt(e,t,n){var o,i;let a=null;for(let s=0;s<n.length;s++){const c=n[s];if(c.uuid===e){c.type==="group"&&((o=c.operations)===null||o===void 0?void 0:o.deepResize)===!0&&(t.w&&t.w>0||t.h&&t.h>0)&&Mr(c,{w:t.w,h:t.h}),h0(c,t),a=c;break}else c.type==="group"&&(a=Vt(e,t,((i=c==null?void 0:c.detail)===null||i===void 0?void 0:i.children)||[]))}return a}function m0(e,t){var n,o,i,a,s,c,d,l,h,u;let m=0,f=0,v=1,g=((o=(n=e==null?void 0:e.elements)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.x)||0,p=((a=(i=e==null?void 0:e.elements)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.y)||0,y=((c=(s=e==null?void 0:e.elements)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.w)||0,S=((l=(d=e==null?void 0:e.elements)===null||d===void 0?void 0:d[0])===null||l===void 0?void 0:l.h)||0;const{width:E,height:w}=t.viewSizeInfo;if(e.layout&&((u=(h=e.layout)===null||h===void 0?void 0:h.detail)===null||u===void 0?void 0:u.overflow)==="hidden"?(g=0,p=0,y=e.layout.w||0,S=e.layout.h||0):e.elements.forEach(b=>{const x={x:b.x,y:b.y,w:b.w,h:b.h,angle:b.angle};if(x.angle&&(x.angle>0||x.angle<0)){const O=Bn(x);if(O.length===4){const N=[O[0].x,O[1].x,O[2].x,O[3].x],B=[O[0].y,O[1].y,O[2].y,O[3].y];x.x=Math.min(...N),x.y=Math.min(...B),x.w=Math.abs(Math.max(...N)-Math.min(...N)),x.h=Math.abs(Math.max(...B)-Math.min(...B))}}const j=Math.min(x.x,g),P=Math.min(x.y,p),z=Math.max(x.x+x.w,g+y),V=Math.max(x.y+x.h,p+S);g=j,p=P,y=Math.abs(z-j),S=Math.abs(V-P)}),e.layout){const{x:b,y:x,w:j,h:P}=e.layout;xe.x(b)&&xe.y(x)&&xe.w(j)&&xe.h(P)&&(g=Math.min(g,b),p=Math.min(p,x),y=Math.max(y,j),S=Math.max(S,P))}if(y>0&&S>0){const b=ye(E/y,{decimalPlaces:4}),x=ye(w/S,{decimalPlaces:4});v=Math.min(b,x,1),m=(y*v-E)/2/v+g,f=(S*v-w)/2/v+p}return{offsetX:ye(m,{decimalPlaces:0}),offsetY:ye(f,{decimalPlaces:0}),scale:v}}function f0(e){let t=0,n=0;if(e){const{viewScaleInfo:i,viewSizeInfo:a}=e,{offsetLeft:s,offsetTop:c,scale:d}=i,{width:l,height:h}=a;t=0-s+l/d/2,n=0-c+h/d/2}return{x:t,y:n}}const g0=["-apple-system",'"system-ui"',' "Segoe UI"'," Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"'," sans-serif"];function Ar(e){return[e,...g0].join(", ")}function ra(e,t,n){if(typeof t=="string")return t;const{viewElementSize:o,viewScaleInfo:i,opacity:a=1}=n,{x:s,y:c}=o,{scale:d}=i;if((t==null?void 0:t.type)==="linear-gradient"){const{start:l,end:h,stops:u}=t,m={x:s+l.x*d,y:c+l.y*d},f={x:s+h.x*d,y:c+h.y*d},v=e.createLinearGradient(m.x,m.y,f.x,f.y);return u.forEach(g=>{v.addColorStop(g.offset,Qa(g.color,a))}),v}if((t==null?void 0:t.type)==="radial-gradient"){const{inner:l,outer:h,stops:u}=t,m={x:s+l.x*d,y:c+l.y*d,radius:l.radius*d},f={x:s+h.x*d,y:c+h.y*d,radius:h.radius*d},v=e.createRadialGradient(m.x,m.y,m.radius,f.x,f.y,f.radius);return u.forEach(g=>{v.addColorStop(g.offset,Qa(g.color,a))}),v}return"#000000"}const la=cn();function an(e){var t,n,o,i;let a=1;return((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.opacity)!==void 0&&((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.opacity)>=0&&((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.opacity)<=1&&(a=(i=e==null?void 0:e.detail)===null||i===void 0?void 0:i.opacity),a}function So(e,t,n){const{pattern:o,renderContent:i,originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d}=n||{},{parentOpacity:l}=n,h=an(a)*l,{clipPath:u,clipPathStrokeColor:m,clipPathStrokeWidth:f}=a.detail,v=()=>{e.globalAlpha=h,Tr(e,t,{pattern:o,viewScaleInfo:c,viewSizeInfo:d}),i==null||i(),Nr(e,t,{viewScaleInfo:c,viewSizeInfo:d}),e.globalAlpha=l};u?(v0(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,renderContent:()=>{v()}}),typeof f=="number"&&f>0&&m&&p0(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,parentOpacity:l})):v()}function v0(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s}=n,c=s.devicePixelRatio,{clipPath:d}=(i==null?void 0:i.detail)||{};if(d&&a&&d.commands){const{x:l,y:h,w:u,h:m}=a,{originW:f,originH:v,originX:g,originY:p}=d,y=u/f,S=m/v,E=g*y,w=p*S,D=l-E,b=h-w;e.save(),e.translate(D,b),e.scale(c*y,c*S);const x=Aa(d.commands||[]),j=new Path2D(x);e.clip(j),e.translate(0-D,0-b),e.setTransform(1,0,0,1,0,0),mt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function p0(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s,parentOpacity:c}=n,d=s.devicePixelRatio,{clipPath:l,clipPathStrokeColor:h,clipPathStrokeWidth:u}=(i==null?void 0:i.detail)||{};if(l&&a&&l.commands&&typeof u=="number"&&u>0&&h){const{x:m,y:f,w:v,h:g}=a,{originW:p,originH:y,originX:S,originY:E}=l,w=v/p,D=g/y,b=S*w,x=E*D,j=m-b,P=f-x;e.save(),e.globalAlpha=c,e.translate(j,P),e.scale(d*w,d*D);const z=Aa(l.commands||[]),V=new Path2D(z);e.strokeStyle=h,e.lineWidth=u,e.stroke(V),e.translate(0-j,0-P),e.setTransform(1,0,0,1,0,0),mt(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function Tr(e,t,n){var o,i;const{pattern:a,viewScaleInfo:s,viewSizeInfo:c}=n,d=[];if(t.detail.background||a){const{x:l,y:h,w:u,h:m,radiusList:f}=Pi(t,{viewScaleInfo:s,viewSizeInfo:c});if(e.beginPath(),e.moveTo(l+f[0],h),e.arcTo(l+u,h,l+u,h+m,f[1]),e.arcTo(l+u,h+m,l,h+m,f[2]),e.arcTo(l,h+m,l,h,f[3]),e.arcTo(l,h,l+u,h,f[0]),e.closePath(),typeof a=="string")e.fillStyle=a;else if(["CanvasPattern"].includes(ze.type(a)))e.fillStyle=a;else if(typeof t.detail.background=="string")e.fillStyle=t.detail.background;else if(((o=t.detail.background)===null||o===void 0?void 0:o.type)==="linear-gradient"){const v=ra(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:m},viewScaleInfo:s,opacity:e.globalAlpha});e.fillStyle=v}else if(((i=t.detail.background)===null||i===void 0?void 0:i.type)==="radial-gradient"){const v=ra(e,t.detail.background,{viewElementSize:{x:l,y:h,w:u,h:m},viewScaleInfo:s,opacity:e.globalAlpha});if(e.fillStyle=v,d&&d.length>0)for(let g=0;g<(d==null?void 0:d.length);g++){const p=d[g];p.method==="translate"?e.translate(p.args[0]+l,p.args[1]+h):p.method==="rotate"?e.rotate(...p.args):p.method==="scale"&&e.scale(...p.args)}}e.fill(),d&&d.length>0&&e.setTransform(1,0,0,1,0,0)}}function Nr(e,t,n){if(t.detail.borderWidth===0||!pi(t.detail.borderColor))return;const{viewScaleInfo:o}=n,{scale:i}=o;let a=la.borderColor;pi(t.detail.borderColor)===!0&&(a=t.detail.borderColor);const{borderWidth:s,borderRadius:c,borderDash:d,boxSizing:l=la.boxSizing}=t.detail;let h=0;typeof s=="number"&&(h=s||1),h=h*i;let u=[0,0,0,0];if(typeof c=="number"){const y=c*i;u=[y,y,y,y]}else Array.isArray(c)&&(c==null?void 0:c.length)===4&&(u=[c[0]*i,c[1]*i,c[2]*i,c[3]*i]);e.strokeStyle=a;let m=[];Array.isArray(d)&&d.length>0&&(m=d.map(y=>Math.ceil(y*i)));let f=0,v=0,g=0,p=0;if(Array.isArray(s)&&(f=(s[0]||0)*i,v=(s[1]||0)*i,g=(s[2]||0)*i,p=(s[3]||0)*i),p||v||f||g){e.lineCap="butt";let{x:y,y:S,w:E,h:w}=t;l==="border-box"?(y=y+p/2,S=S+f/2,E=E-p/2-v/2,w=w-f/2-g/2):l==="content-box"?(y=y-p/2,S=S-f/2,E=E+p/2+v/2,w=w+f/2+g/2):(y=t.x,S=t.y,E=t.w,w=t.h),f&&(e.beginPath(),e.lineWidth=f,e.moveTo(y-p/2,S),e.lineTo(y+E+v/2,S),e.closePath(),e.stroke()),v&&(e.beginPath(),e.lineWidth=v,e.moveTo(y+E,S-f/2),e.lineTo(y+E,S+w+g/2),e.closePath(),e.stroke()),g&&(e.beginPath(),e.lineWidth=g,e.moveTo(y-p/2,S+w),e.lineTo(y+E+v/2,S+w),e.closePath(),e.stroke()),p&&(e.beginPath(),e.lineWidth=p,e.moveTo(y,S-f/2),e.lineTo(y,S+w+g/2),e.closePath(),e.stroke())}else{let{x:y,y:S,w:E,h:w}=t;l==="border-box"?(y=t.x+h/2,S=t.y+h/2,E=t.w-h,w=t.h-h):l==="content-box"?(y=t.x-h/2,S=t.y-h/2,E=t.w+h,w=t.h+h):(y=t.x,S=t.y,E=t.w,w=t.h),m.length>0?e.lineCap="butt":e.lineCap="square",E=Math.max(E,1),w=Math.max(w,1),u=u.map(D=>Math.min(D,E/2,w/2)),e.setLineDash(m),e.lineWidth=h,e.beginPath(),e.moveTo(y+u[0],S),e.arcTo(y+E,S,y+E,S+w,u[1]),e.arcTo(y+E,S+w,y,S+w,u[2]),e.arcTo(y,S+w,y,S,u[3]),e.arcTo(y,S,y+E,S,u[0]),e.closePath(),e.stroke()}e.setLineDash([])}function dn(e,t,n){const{detail:o}=t,{viewScaleInfo:i,renderContent:a}=n,{shadowColor:s,shadowOffsetX:c,shadowOffsetY:d,shadowBlur:l}=o;xe.number(l)?(e.save(),e.shadowColor=s||la.shadowColor,e.shadowOffsetX=(c||0)*i.scale,e.shadowOffsetY=(d||0)*i.scale,e.shadowBlur=(l||0)*i.scale,a(),e.restore()):(e.save(),e.shadowColor="transparent",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,a(),e.restore())}function y0(e,t,n){const{detail:o,angle:i}=t,{viewScaleInfo:a,viewSizeInfo:s,parentOpacity:c}=n,{background:d="#000000",borderColor:l="#000000",boxSizing:h,borderWidth:u=0,borderDash:m}=o;let f=0;typeof u=="number"&&u>0?f=u:Array.isArray(u)&&typeof u[0]=="number"&&u[0]>0&&(f=u[0]),f=f*a.scale;const{x:v,y:g,w:p,h:y}=Ye({x:t.x,y:t.y,w:t.w,h:t.h},{viewScaleInfo:a})||t,S=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:y,angle:i});mt(e,{x:v,y:g,w:p,h:y,angle:i},()=>{dn(e,S,{viewScaleInfo:a,viewSizeInfo:s,renderContent:()=>{let E=p/2,w=y/2;const D=v+E,b=g+w,x=E,j=w;if(f>0&&(h==="content-box"?(E=E,w=w):h==="center-line"?(E=E-f/2,w=w-f/2):(E=E-f,w=w-f)),E>=0&&w>=0){const P=an(S)*c;e.globalAlpha=P,e.beginPath();const z=ra(e,d,{viewElementSize:{x:v,y:g,w:p,h:y},viewScaleInfo:a,opacity:e.globalAlpha});if(e.fillStyle=z,e.circle(D,b,x,j,0,0,2*Math.PI),e.closePath(),e.fill(),e.globalAlpha=c,typeof f=="number"&&f>0){const V=f/2+E,O=f/2+w;if(e.beginPath(),m){const N=m.map(B=>B*a.scale);e.setLineDash(N)}e.strokeStyle=l,e.lineWidth=f,e.circle(D,b,V,O,0,0,2*Math.PI),e.closePath(),e.stroke(),e.setLineDash([])}}}})})}function w0(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Ye(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});mt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{dn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{So(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{}})}})})}function b0(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Ye(t,{viewScaleInfo:i})||t,m=Object.assign(Object.assign({},t),{x:c,y:d,w:l,h,angle:u});mt(e,{x:c,y:d,w:l,h,angle:u},()=>{dn(e,m,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{So(e,m,{originElem:t,calcElemSize:{x:c,y:d,w:l,h,angle:u},viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s,renderContent:()=>{if(!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="image"&&o){e.globalAlpha=an(t)*s;const{x:f,y:v,w:g,h:p,radiusList:y}=Pi(m,{viewScaleInfo:i,viewSizeInfo:a}),{detail:S}=t,{scaleMode:E,originW:w=0,originH:D=0}=S,b=e.$undoPixelRatio(w),x=e.$undoPixelRatio(D);if(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(f+y[0],v),e.arcTo(f+g,v,f+g,v+p,y[1]),e.arcTo(f+g,v+p,f,v+p,y[2]),e.arcTo(f,v+p,f,v,y[3]),e.arcTo(f,v,f+g,v,y[0]),e.closePath(),e.fill(),e.clip(),E&&D&&w){let j=0,P=0,z=b,V=x;const O=f,N=v,B=g,H=p;if(b>t.w||x>t.h){if(E==="fill"){const _=Math.max(t.w/b,t.h/x),L=b*_,k=x*_;j=(L-t.w)/2/_,P=(k-t.h)/2/_,z=t.w/_,V=t.h/_}else if(E==="tile")j=0,P=0,z=t.w,V=t.h;else if(E==="fit"){const _=Math.min(t.w/b,t.h/x);j=(b-t.w/_)/2,P=(x-t.h/_)/2,z=t.w/_,V=t.h/_}}e.drawImage(o,j,P,z,V,O,N,B,H)}else e.drawImage(o,f,v,g,p);e.globalAlpha=s,e.restore()}}})}})})}function S0(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Ye(t,{viewScaleInfo:i,viewSizeInfo:a})||t;mt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="svg"&&o&&(e.globalAlpha=an(t)*s,e.drawImage(o,c,d,l,h),e.globalAlpha=s)})}function E0(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:l,h,angle:u}=Ye(t,{viewScaleInfo:i,viewSizeInfo:a})||t;mt(e,{x:c,y:d,w:l,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="html"&&o&&(e.globalAlpha=an(t)*s,e.drawImage(o,c,d,l,h),e.globalAlpha=s)})}const Fi=cn();function C0(e,t,n){return n<.5&&e<t&&(e-t)/e>-.15?!0:e>=t}function x0(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Ye(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});mt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{dn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{So(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a})}});{const m=Object.assign(Object.assign({},Fi),t.detail),f=m.fontSize||Fi.fontSize,v=f*o.scale;if(v<2)return;const p=(m.lineHeight||f)*o.scale;e.fillStyle=t.detail.color||Fi.color,e.textBaseline="top",e.$setFont({fontWeight:m.fontWeight,fontSize:v,fontFamily:Ar(m.fontFamily)});let y=m.text.replace(/\r\n/gi,`
`);m.textTransform==="lowercase"?y=y.toLowerCase():m.textTransform==="uppercase"&&(y=y.toUpperCase());const S=p,E=y.split(`
`),w=[];let D=0;E.forEach((j,P)=>{if(m.minInlineSize==="maxContent")w.push({text:j,width:e.$undoPixelRatio(e.measureText(j).width)});else{let z="",O=j.split("");if(m.wordBreak==="normal"){const N=" ",B=j.split(N);O=[],B.forEach((H,_)=>{O.push(H),_<B.length-1&&O.push(N)})}if(O.length===1&&m.overflow==="visible")w.push({text:O[0],width:e.$undoPixelRatio(e.measureText(O[0]).width)});else if(O.length>0){for(let N=0;N<O.length&&(C0(e.$doPixelRatio(d),e.measureText(z+O[N]).width,o.scale)?z+=O[N]||"":(w.push({text:z,width:e.$undoPixelRatio(e.measureText(z).width)}),z=O[N]||"",D++),!((D+1)*S>l&&m.overflow==="hidden"));N++)if(O.length-1===N&&(D+1)*S<=l){w.push({text:z,width:e.$undoPixelRatio(e.measureText(z).width)}),P<E.length-1&&D++;break}}else w.push({text:"",width:0})}});let b=0,x=0;S>v&&(x=(S-v)/2),w.length*S<l&&(t.detail.verticalAlign==="top"?b=0:t.detail.verticalAlign==="bottom"?b+=l-w.length*S:b+=(l-w.length*S)/2);{const j=c+b;m.textShadowColor!==void 0&&pi(m.textShadowColor)&&(e.shadowColor=m.textShadowColor),m.textShadowOffsetX!==void 0&&xe.number(m.textShadowOffsetX)&&(e.shadowOffsetX=m.textShadowOffsetX),m.textShadowOffsetY!==void 0&&xe.number(m.textShadowOffsetY)&&(e.shadowOffsetY=m.textShadowOffsetY),m.textShadowBlur!==void 0&&xe.number(m.textShadowBlur)&&(e.shadowBlur=m.textShadowBlur),w.forEach((P,z)=>{let V=s;m.textAlign==="center"?V=s+(d-P.width)/2:m.textAlign==="right"&&(V=s+(d-P.width)),e.fillText(P.text,V,j+S*z+x)})}}})}var M0=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function z0(e,t,n){var o,i;const{detail:a}=t,{originX:s,originY:c,originW:d,originH:l,fillRule:h}=a,{viewScaleInfo:u,viewSizeInfo:m,parentOpacity:f}=n,{x:v,y:g,w:p,h:y,angle:S}=Ye(t,{viewScaleInfo:u})||t,E=p/d,w=y/l,D=s*E,b=c*w,x=v-D,j=g-b,P=t.detail,z=M0(P,["clipPath","clipPathStrokeColor","clipPathStrokeWidth"]),V=u.scale*m.devicePixelRatio,O=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:y,angle:S});let N=Object.assign({},O);N.detail=z;let B=Object.assign({},t);B.detail=z,a.fill&&a.fill!=="string"&&(!((i=(o=a.fill)===null||o===void 0?void 0:o.type)===null||i===void 0)&&i.includes("gradient"))&&(N=Object.assign(Object.assign({},O),{detail:Object.assign(Object.assign({},O.detail),{background:a.fill,clipPath:{commands:a.commands,originX:s,originY:c,originW:d,originH:l}})}),B.detail=Object.assign({},N.detail)),mt(e,{x:v,y:g,w:p,h:y,angle:S},()=>{So(e,N,{originElem:B,calcElemSize:{x:v,y:g,w:p,h:y,angle:S},viewScaleInfo:u,viewSizeInfo:m,parentOpacity:f,renderContent:()=>{dn(e,O,{viewScaleInfo:u,viewSizeInfo:m,renderContent:()=>{e.save(),e.translate(x,j),e.scale(V*E/u.scale,V*w/u.scale);const H=Aa(a.commands||[]),_=new Path2D(H);a.fill&&(typeof a.fill=="string"?e.fillStyle=a.fill:e.fillStyle="transparent"),a.fill&&e.fill(_,h),a.stroke&&a.strokeWidth!==0&&(e.strokeStyle=a.stroke,e.lineWidth=(a.strokeWidth||1)/m.devicePixelRatio,e.lineCap=a.strokeLineCap||"square",e.stroke(_)),e.translate(-x,-j),e.restore()}})}})})}const qa=.4;function Dr(e,t,n){var o,i,a;if(((o=t==null?void 0:t.operations)===null||o===void 0?void 0:o.invisible)===!0)return;const{w:s,h:c}=t,{scale:d}=n.viewScaleInfo;if(d<1&&(s*d<qa||c*d<qa)||n.parentOpacity===0)return;const{overrideElementMap:l}=n;if(!(!((a=(i=l==null?void 0:l[t.uuid])===null||i===void 0?void 0:i.operations)===null||a===void 0)&&a.invisible))try{switch(t.type){case"rect":{w0(e,t,n);break}case"circle":{y0(e,t,n);break}case"text":{x0(e,t,n);break}case"image":{b0(e,t,n);break}case"svg":{S0(e,t,n);break}case"html":{E0(e,t,n);break}case"path":{z0(e,t,n);break}case"group":{const h=Object.assign(Object.assign({},n.elementAssets||{}),t.detail.assets||{});I0(e,t,Object.assign(Object.assign({},n),{elementAssets:h}));break}default:break}}catch(h){console.error(h)}}function I0(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:l,angle:h}=Ye({x:t.x,y:t.y,w:t.w,h:t.h,angle:t.angle},{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:l,angle:h});mt(e,{x:s,y:c,w:d,h:l,angle:h},()=>{e.globalAlpha=an(t)*a,dn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{So(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:l,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{const{x:m,y:f,w:v,h:g,radiusList:p}=Pi(u,{viewScaleInfo:o,viewSizeInfo:i});if(t.detail.overflow==="hidden"&&(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(m+p[0],f),e.arcTo(m+v,f,m+v,f+g,p[1]),e.arcTo(m+v,f+g,m,f+g,p[2]),e.arcTo(m,f+g,m,f,p[3]),e.arcTo(m,f,m+v,f,p[0]),e.closePath(),e.fill(),e.clip()),Array.isArray(t.detail.children)){const{parentElementSize:y}=n,S={x:y.x+t.x,y:y.y+t.y,w:t.w||y.w,h:t.h||y.h,angle:t.angle},{calculator:E}=n;for(let w=0;w<t.detail.children.length;w++){let D=t.detail.children[w];if(D=Object.assign(Object.assign({},D),{x:S.x+D.x,y:S.y+D.y}),!(n.forceDrawAll!==!0&&!(E!=null&&E.needRender(D))))try{Dr(e,D,Object.assign(Object.assign({},n),{parentOpacity:a*an(t)}))}catch(b){console.error(b)}}}t.detail.overflow==="hidden"&&e.restore()}})}}),e.globalAlpha=a})}const A0=cn();function es(e,t,n){var o;const{elements:i=[]}=t,{parentOpacity:a}=n;for(let s=0;s<i.length;s++){const c=i[s],d=Object.assign(Object.assign({},c),{detail:Object.assign(Object.assign({},A0),c==null?void 0:c.detail)});if(!(n.forceDrawAll!==!0&&!(!((o=n.calculator)===null||o===void 0)&&o.needRender(d))))try{Dr(e,d,Object.assign(Object.assign({},n),{parentOpacity:a}))}catch(l){console.error(l)}}}function T0(e,t,n,o){const{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,c=Object.assign({uuid:"layout",type:"group"},t),{x:d,y:l,w:h,h:u}=Ye(c,{viewScaleInfo:i})||c,f=Object.assign(Object.assign({},c),{x:d,y:l,w:h,h:u,angle:0});if(e.globalAlpha=1,dn(e,f,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{Tr(e,f,{viewScaleInfo:i,viewSizeInfo:a})}}),t.detail.overflow==="hidden"){const{viewScaleInfo:v,viewSizeInfo:g}=n,p=Object.assign({uuid:"layout",type:"group"},t),y=Ye(p,{viewScaleInfo:v})||p,S=Object.assign(Object.assign({},p),y),{x:E,y:w,w:D,h:b,radiusList:x}=Pi(S,{viewScaleInfo:v,viewSizeInfo:g});e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(E+x[0],w),e.arcTo(E+D,w,E+D,w+b,x[1]),e.arcTo(E+D,w+b,E,w+b,x[2]),e.arcTo(E,w+b,E,w,x[3]),e.arcTo(E,w,E+D,w,x[0]),e.closePath(),e.fill(),e.clip()}o(e),t.detail.overflow==="hidden"&&e.restore(),Nr(e,f,{viewScaleInfo:i,viewSizeInfo:a}),e.globalAlpha=s}function N0(e,t,n){if(typeof(t==null?void 0:t.background)=="string"){const{viewSizeInfo:o}=n,{width:i,height:a}=o;e.globalAlpha=1,e.fillStyle=t.background,e.fillRect(0,0,i,a)}}var Wi=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},we=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Wn=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},it,ho,On,ot,Et,Ko,Hi,ts,ns,os,Pr,Lr;const D0=["image","svg","html"],no=e=>{var t,n,o;let i=null;return e.type==="image"?i=((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.src)||null:e.type==="svg"?i=((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.svg)||null:e.type==="html"&&(i=((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.html)||null),typeof i=="string"&&i?qt(i)?i:Vn(i):Vn(`${_t()}-${e.uuid}-${_t()}-${_t()}`)};class P0 extends tn{constructor(){super(),it.add(this),ho.set(this,{}),On.set(this,{}),ot.set(this,{}),Et.set(this,!1),we(this,it,"m",Ko).call(this,"image",(t,n)=>Wi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.src])===null||o===void 0?void 0:o.value)||t.detail.src,a=yield Ni(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}})),we(this,it,"m",Ko).call(this,"html",(t,n)=>Wi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.html])===null||o===void 0?void 0:o.value)||t.detail.html,a=yield pc(i,{width:t.detail.originW||t.w,height:t.detail.originH||t.h});return{uuid:t.uuid,lastModified:Date.now(),content:a}})),we(this,it,"m",Ko).call(this,"svg",(t,n)=>Wi(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.svg])===null||o===void 0?void 0:o.value)||t.detail.svg,a=yield gc(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}}))}isDestroyed(){return we(this,Et,"f")}destroy(){Wn(this,Et,!0,"f"),this.clear(),Wn(this,ho,null,"f"),Wn(this,On,null,"f"),Wn(this,ot,null,"f")}load(t,n){we(this,Et,"f")!==!0&&(we(this,it,"m",Lr).call(this,t)||D0.includes(t.type)&&we(this,it,"m",Pr).call(this,t,n))}getContent(t){var n,o;const i=no(t);return((o=(n=we(this,ot,"f"))===null||n===void 0?void 0:n[i])===null||o===void 0?void 0:o.content)||null}getLoadItemMap(){return we(this,ot,"f")}setLoadItemMap(t){Wn(this,ot,t,"f")}}ho=new WeakMap,On=new WeakMap,ot=new WeakMap,Et=new WeakMap,it=new WeakSet,Ko=function(t,n){we(this,ho,"f")[t]=n},Hi=function(t){var n,o,i;let a=null;return t.type==="image"?a=((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.src)||null:t.type==="svg"?a=((o=t==null?void 0:t.detail)===null||o===void 0?void 0:o.svg)||null:t.type==="html"&&(a=((i=t==null?void 0:t.detail)===null||i===void 0?void 0:i.html)||null),a},ts=function(t){return{element:t,status:"null",content:null,error:null,startTime:-1,endTime:-1,source:we(this,it,"m",Hi).call(this,t)}},ns=function(t){const n=no(t.element),o=we(this,ot,"f")[n];we(this,Et,"f")||(o?o.startTime<t.startTime&&(we(this,ot,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(we(this,ot,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},os=function(t){var n;const o=no(t.element),i=(n=we(this,ot,"f"))===null||n===void 0?void 0:n[o];we(this,Et,"f")||(i?i.startTime<t.startTime&&(we(this,ot,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(we(this,ot,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},Pr=function(t,n){const o=we(this,it,"m",ts).call(this,t),i=no(t);if(we(this,On,"f")[i])return;we(this,On,"f")[i]=o;const a=we(this,ho,"f")[t.type];typeof a=="function"&&!we(this,Et,"f")&&(o.startTime=Date.now(),a(t,n).then(s=>{we(this,Et,"f")||(o.content=s.content,o.endTime=Date.now(),o.status="load",we(this,it,"m",ns).call(this,o))}).catch(s=>{console.warn(`Load element source "${o.source}" fail`,s,t),o.endTime=Date.now(),o.status="error",o.error=s,we(this,it,"m",os).call(this,o)}))},Lr=function(t){var n;const o=no(t),i=(n=we(this,On,"f"))===null||n===void 0?void 0:n[o];return!!(i&&i.status==="error"&&i.source&&i.source===we(this,it,"m",Hi).call(this,t))};var Hn=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},lt=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ca,Dt,bt,qo,Or;class Rr extends tn{constructor(t){super(),ca.add(this),Dt.set(this,void 0),bt.set(this,new P0),qo.set(this,!1),Hn(this,Dt,t,"f"),lt(this,ca,"m",Or).call(this)}isDestroyed(){return lt(this,qo,"f")}destroy(){this.clear(),Hn(this,Dt,null,"f"),lt(this,bt,"f").destroy(),Hn(this,bt,null,"f"),Hn(this,qo,!0,"f")}updateOptions(t){Hn(this,Dt,t,"f")}drawData(t,n){const o=lt(this,bt,"f"),{calculator:i,sharer:a}=lt(this,Dt,"f"),s=lt(this,Dt,"f").viewContext;s.clearRect(0,0,s.canvas.width,s.canvas.height);const c={x:0,y:0,w:n.viewSizeInfo.width,h:n.viewSizeInfo.height},d=Object.assign({loader:o,calculator:i,parentElementSize:c,elementAssets:t.assets,parentOpacity:1,overrideElementMap:a==null?void 0:a.getActiveOverrideElemenentMap()},n);N0(s,t.global,d),t.layout?T0(s,t.layout,d,()=>{es(s,t,d)}):es(s,t,d)}scale(t){const{sharer:n}=lt(this,Dt,"f");if(!n)return;const{data:o,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c,width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:m}=n.getActiveStoreSnapshot();o&&this.drawData(o,{viewScaleInfo:{scale:t,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c},viewSizeInfo:{width:d,height:l,contextHeight:h,contextWidth:u,devicePixelRatio:m}})}setLoadItemMap(t){lt(this,bt,"f").setLoadItemMap(t)}getLoadItemMap(){return lt(this,bt,"f").getLoadItemMap()}getLoader(){return lt(this,bt,"f")}}Dt=new WeakMap,bt=new WeakMap,qo=new WeakMap,ca=new WeakSet,Or=function(){const t=lt(this,bt,"f");t.on("load",n=>{this.trigger("load",n)}),t.on("error",n=>{console.error(n)})};var Gi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},$e=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},In,_e;class kr{constructor(t){In.set(this,void 0),_e.set(this,void 0),Gi(this,In,t,"f"),Gi(this,_e,new nn({defaultStorage:{viewVisibleInfoMap:{},visibleCount:0,invisibleCount:0}}),"f")}toGridNum(t,n){return(n==null?void 0:n.ignore)===!0?t:Math.round(t)}destroy(){Gi(this,In,null,"f")}needRender(t){const o=$e(this,_e,"f").get("viewVisibleInfoMap")[t.uuid];return o?o.isVisibleInView:!0}isPointInElement(t,n,o,i){const a=$e(this,In,"f").viewContext;return sa(t,{context2d:a,element:n,viewScaleInfo:o,viewSizeInfo:i})}getPointElement(t,n){const o=$e(this,In,"f").viewContext;return Qc(t,Object.assign(Object.assign({},n),{context2d:o}))}resetViewVisibleInfoMap(t,n){if(t){const{viewVisibleInfoMap:o,invisibleCount:i,visibleCount:a}=Jc(t.elements,n);$e(this,_e,"f").set("viewVisibleInfoMap",o),$e(this,_e,"f").set("invisibleCount",i),$e(this,_e,"f").set("visibleCount",a)}}updateVisiableStatus(t){const{viewVisibleInfoMap:n,invisibleCount:o,visibleCount:i}=Er($e(this,_e,"f").get("viewVisibleInfoMap"),t);$e(this,_e,"f").set("viewVisibleInfoMap",n),$e(this,_e,"f").set("invisibleCount",o),$e(this,_e,"f").set("visibleCount",i)}calcViewRectInfoFromOrigin(t,n){const o=$e(this,_e,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:m,topRight:f,bottomLeft:v,bottomRight:g}=o.originRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:pe(c,p),left:pe(d,p),right:pe(l,p),bottom:pe(h,p),top:pe(u,p),topLeft:pe(m,p),topRight:pe(f,p),bottomLeft:pe(v,p),bottomRight:pe(g,p)}}calcViewRectInfoFromRange(t,n){const o=$e(this,_e,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:l,bottom:h,top:u,topLeft:m,topRight:f,bottomLeft:v,bottomRight:g}=o.rangeRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:pe(c,p),left:pe(d,p),right:pe(l,p),bottom:pe(h,p),top:pe(u,p),topLeft:pe(m,p),topRight:pe(f,p),bottomLeft:pe(v,p),bottomRight:pe(g,p)}}modifyViewVisibleInfoMap(t,n){const{modifyOptions:o,viewScaleInfo:i,viewSizeInfo:a}=n,{type:s,content:c}=o,d=t.elements,l=$e(this,_e,"f").get("viewVisibleInfoMap");if(s==="deleteElement"){const{element:h}=c,u=[],m=f=>{u.push(f.uuid),f.type==="group"&&Array.isArray(f.detail.children)&&f.detail.children.forEach(v=>{m(v)})};m(h),u.forEach(f=>{delete l[f]}),$e(this,_e,"f").set("viewVisibleInfoMap",l)}else if(s==="addElement"||s==="updateElement"){const{position:h}=c,u=Ge(h,t.elements),m=vr(d,h);if(u)if(s==="updateElement"&&u.type==="group")this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a});else{const f=br(u,{groupQueue:m||[]}),v={originRectInfo:f,rangeRectInfo:xe.angle(u.angle)?Sr(f):f,isVisibleInView:!0,isGroup:(u==null?void 0:u.type)==="group",position:[...h]};l[u.uuid]=v,$e(this,_e,"f").set("viewVisibleInfoMap",l),s==="updateElement"&&this.updateVisiableStatus({viewScaleInfo:i,viewSizeInfo:a})}}else s==="moveElement"&&this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a})}}In=new WeakMap,_e=new WeakMap;var Yi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},oe=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Me,Rn,tt,ei,jr,ti,ni,oi,ii,ai,si,ri,li,vt,pt,Jt;function is(e){return e>0||e<0||e===0}class L0 extends tn{constructor(t){super(),Me.add(this),Rn.set(this,void 0),tt.set(this,void 0),ei.set(this,!1),ti.set(this,o=>{if(!oe(this,Me,"m",vt).call(this,o))return;const i=oe(this,Me,"m",pt).call(this,o);if(!oe(this,Me,"m",Jt).call(this,i))return;o.preventDefault(),o.stopPropagation();const a=o.deltaX>0||o.deltaX<0?o.deltaX:0,s=o.deltaY>0||o.deltaY<0?o.deltaY:0;o.ctrlKey===!0&&this.has("wheelScale")?this.trigger("wheelScale",{deltaX:a,deltaY:s,point:i}):this.has("wheel")&&this.trigger("wheel",{deltaX:a,deltaY:s,point:i})}),ni.set(this,o=>{if(!oe(this,Me,"m",vt).call(this,o))return;o.preventDefault();const i=oe(this,Me,"m",pt).call(this,o);oe(this,Me,"m",Jt).call(this,i)}),oi.set(this,o=>{if(!oe(this,Me,"m",vt).call(this,o))return;o.preventDefault();const i=oe(this,Me,"m",pt).call(this,o);if(!oe(this,Me,"m",Jt).call(this,i))return;const a=500,s=Date.now(),c=oe(this,tt,"f").get("prevClickPoint");c&&s-c.t<=a&&Math.abs(c.x-i.x)<=5&&Math.abs(c.y-i.y)<=5?this.trigger("doubleClick",{point:i}):oe(this,tt,"f").set("prevClickPoint",i)}),ii.set(this,o=>{if(oe(this,tt,"f").set("hasPointDown",!1),!oe(this,Me,"m",vt).call(this,o))return;o.preventDefault();const i=oe(this,Me,"m",pt).call(this,o);this.trigger("pointLeave",{point:i})}),ai.set(this,o=>{if(oe(this,tt,"f").set("hasPointDown",!1),!oe(this,Me,"m",vt).call(this,o))return;o.preventDefault();const i=oe(this,Me,"m",pt).call(this,o);this.trigger("pointEnd",{point:i})}),si.set(this,o=>{if(!oe(this,Me,"m",vt).call(this,o))return;o.preventDefault(),o.stopPropagation();const i=oe(this,Me,"m",pt).call(this,o);if(!oe(this,Me,"m",Jt).call(this,i)){oe(this,tt,"f").get("hasPointDown")&&(this.trigger("pointLeave",{point:i}),oe(this,tt,"f").set("hasPointDown",!1));return}oe(this,tt,"f").get("hasPointDown")===!0&&this.trigger("pointMove",{point:i})}),ri.set(this,o=>{if(!oe(this,Me,"m",vt).call(this,o))return;o.preventDefault();const i=oe(this,Me,"m",pt).call(this,o);oe(this,Me,"m",Jt).call(this,i)&&(oe(this,tt,"f").set("hasPointDown",!0),this.trigger("pointStart",{point:i}))}),li.set(this,o=>{if(!oe(this,Me,"m",vt).call(this,o))return;o.preventDefault();const i=oe(this,Me,"m",pt).call(this,o);oe(this,Me,"m",Jt).call(this,i)&&this.trigger("hover",{point:i})});const n=new nn({defaultStorage:{hasPointDown:!1,prevClickPoint:null}});Yi(this,tt,n,"f"),Yi(this,Rn,t,"f"),oe(this,Me,"m",jr).call(this)}onEvents(){if(oe(this,ei,"f"))return;const t=window;t.addEventListener("mousemove",oe(this,li,"f")),t.addEventListener("mousedown",oe(this,ri,"f")),t.addEventListener("mousemove",oe(this,si,"f")),t.addEventListener("mouseup",oe(this,ai,"f")),t.addEventListener("mouseleave",oe(this,ii,"f")),t.addEventListener("wheel",oe(this,ti,"f"),{passive:!1}),t.addEventListener("click",oe(this,oi,"f")),t.addEventListener("contextmenu",oe(this,ni,"f"))}offEvents(){const t=window;t.removeEventListener("mousemove",oe(this,li,"f")),t.removeEventListener("mousedown",oe(this,ri,"f")),t.removeEventListener("mousemove",oe(this,si,"f")),t.removeEventListener("mouseup",oe(this,ai,"f")),t.removeEventListener("mouseleave",oe(this,ii,"f")),t.removeEventListener("wheel",oe(this,ti,"f")),t.removeEventListener("click",oe(this,oi,"f")),t.removeEventListener("contextmenu",oe(this,ni,"f"))}destroy(){this.offEvents(),oe(this,tt,"f").destroy(),Yi(this,ei,!0,"f")}}Rn=new WeakMap,tt=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni=new WeakMap,oi=new WeakMap,ii=new WeakMap,ai=new WeakMap,si=new WeakMap,ri=new WeakMap,li=new WeakMap,Me=new WeakSet,jr=function(){this.onEvents()},vt=function(t){return t.target===oe(this,Rn,"f").boardContent.boardContext.canvas},pt=function(t){const o=oe(this,Rn,"f").boardContent.boardContext.canvas.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top,t:Date.now()}},Jt=function(t){const n=oe(this,Rn,"f").sharer.getActiveViewSizeInfo(),{width:o,height:i}=n;return!!(is(t.x)&&is(t.y)&&t.x<=o&&t.y<=i)};var as=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},be=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Se,An;const O0={width:0,height:0,devicePixelRatio:1,contextWidth:0,contextHeight:0,data:null,scale:1,offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0,overrideElementMap:null};class R0{constructor(){Se.set(this,void 0),An.set(this,void 0);const t=new nn({defaultStorage:O0}),n=new nn({defaultStorage:{}});as(this,Se,t,"f"),as(this,An,n,"f")}getActiveStorage(t){return be(this,Se,"f").get(t)}setActiveStorage(t,n){return be(this,Se,"f").set(t,n)}getActiveStoreSnapshot(t){return be(this,Se,"f").getSnapshot(t)}getSharedStorage(t){return be(this,An,"f").get(t)}setSharedStorage(t,n){return be(this,An,"f").set(t,n)}getSharedStoreSnapshot(t){return be(this,An,"f").getSnapshot(t)}getActiveViewScaleInfo(){return{scale:be(this,Se,"f").get("scale"),offsetTop:be(this,Se,"f").get("offsetTop"),offsetBottom:be(this,Se,"f").get("offsetBottom"),offsetLeft:be(this,Se,"f").get("offsetLeft"),offsetRight:be(this,Se,"f").get("offsetRight")}}setActiveViewScaleInfo(t){const{scale:n,offsetTop:o,offsetBottom:i,offsetLeft:a,offsetRight:s}=t;be(this,Se,"f").set("scale",n),be(this,Se,"f").set("offsetTop",o),be(this,Se,"f").set("offsetBottom",i),be(this,Se,"f").set("offsetLeft",a),be(this,Se,"f").set("offsetRight",s)}setActiveViewSizeInfo(t){be(this,Se,"f").set("width",t.width),be(this,Se,"f").set("height",t.height),be(this,Se,"f").set("devicePixelRatio",t.devicePixelRatio),be(this,Se,"f").set("contextWidth",t.contextWidth),be(this,Se,"f").set("contextHeight",t.contextHeight)}getActiveViewSizeInfo(){return{width:be(this,Se,"f").get("width"),height:be(this,Se,"f").get("height"),devicePixelRatio:be(this,Se,"f").get("devicePixelRatio"),contextWidth:be(this,Se,"f").get("contextWidth"),contextHeight:be(this,Se,"f").get("contextHeight")}}getActiveOverrideElemenentMap(){return be(this,Se,"f").get("overrideElementMap")}setActiveOverrideElemenentMap(t){be(this,Se,"f").set("overrideElementMap",t)}}Se=new WeakMap,An=new WeakMap;var ci=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},De=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},mo,Ve,kn,Tn,_r,Vr;const{requestAnimationFrame:k0}=window;class j0 extends tn{constructor(t){super(),mo.add(this),Ve.set(this,void 0),kn.set(this,[]),Tn.set(this,"FREE"),ci(this,Ve,t,"f"),De(this,mo,"m",_r).call(this)}resetViewVisibleInfoMap(t,n){t&&De(this,Ve,"f").calculator.resetViewVisibleInfoMap(t,n)}drawFrame(){const{sharer:t}=De(this,Ve,"f"),n=t.getActiveStoreSnapshot(),o=t.getSharedStoreSnapshot();De(this,kn,"f").push({activeStore:n,sharedStore:o}),De(this,mo,"m",Vr).call(this)}scale(t){const{scale:n,point:o,ignoreUpdateVisibleStatus:i}=t,{sharer:a}=De(this,Ve,"f"),{moveX:s,moveY:c}=Xc({scale:n,point:o,viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()});return a.setActiveStorage("scale",n),i||De(this,Ve,"f").calculator.updateVisiableStatus({viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()}),{moveX:s,moveY:c}}scroll(t){const{sharer:n}=De(this,Ve,"f"),o=n.getActiveViewScaleInfo(),{moveX:i,moveY:a,ignoreUpdateVisibleStatus:s}=t,c=n.getActiveViewSizeInfo(),d=Uc({moveX:i,moveY:a,viewScaleInfo:o,viewSizeInfo:c});return n.setActiveViewScaleInfo(d),s||De(this,Ve,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),d}updateViewScaleInfo(t){const{sharer:n}=De(this,Ve,"f"),o=$c(t,{viewSizeInfo:n.getActiveViewSizeInfo()});return n.setActiveViewScaleInfo(o),De(this,Ve,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),o}resize(t={},n){const{sharer:o}=De(this,Ve,"f"),i=o.getActiveViewSizeInfo(),a=Object.assign(Object.assign({},i),t),{width:s,height:c,devicePixelRatio:d}=a,{underlayContext:l,boardContext:h,overlayContext:u,viewContext:m}=De(this,Ve,"f").boardContent;return h.canvas.width=s*d,h.canvas.height=c*d,h.canvas.style.width=`${s}px`,h.canvas.style.height=`${c}px`,l.canvas.width=s*d,l.canvas.height=c*d,u.canvas.width=s*d,u.canvas.height=c*d,m.canvas.width=s*d,m.canvas.height=c*d,o.setActiveViewSizeInfo(a),n!=null&&n.ignoreUpdateVisibleStatus||De(this,Ve,"f").calculator.updateVisiableStatus({viewScaleInfo:o.getActiveViewScaleInfo(),viewSizeInfo:o.getActiveViewSizeInfo()}),a}}Ve=new WeakMap,kn=new WeakMap,Tn=new WeakMap,mo=new WeakSet,_r=function(){const{renderer:t}=De(this,Ve,"f");t.on("load",()=>{this.drawFrame()})},Vr=function e(){if(De(this,Tn,"f")==="DRAWING"||De(this,kn,"f").length===0)return;ci(this,Tn,"DRAWING","f");const t=De(this,kn,"f").shift(),{renderer:n,boardContent:o,beforeDrawFrame:i,afterDrawFrame:a}=De(this,Ve,"f");if(t){const{scale:s,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h,width:u,height:m,contextHeight:f,contextWidth:v,devicePixelRatio:g}=t.activeStore,p={scale:s,offsetTop:c,offsetBottom:d,offsetLeft:l,offsetRight:h},y={width:u,height:m,contextHeight:f,contextWidth:v,devicePixelRatio:g};t!=null&&t.activeStore.data&&n.drawData(t.activeStore.data,{viewScaleInfo:p,viewSizeInfo:y}),i({snapshot:t}),o.drawView(),a({snapshot:t})}if(De(this,kn,"f").length===0){ci(this,Tn,"COMPLETE","f");return}ci(this,Tn,"DRAWING","f")&&k0(()=>{De(this,mo,"m",e).call(this)})};var Pt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},U=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Pe,Nn,St,Ei,ve,ke,jn,dt,Je,Dn,_n,di,Br,ss,rs,ls,cs,ds,us,hs,ms,fs,gs,Fr,Wr,Hr,oo;class _0{constructor(t){Pe.add(this),Nn.set(this,void 0),St.set(this,new WeakMap),Ei.set(this,[]),ve.set(this,[]),ke.set(this,void 0),jn.set(this,void 0),dt.set(this,void 0),Je.set(this,void 0),Dn.set(this,void 0),_n.set(this,new tn),di.set(this,!1);const{boardContent:n}=t,o=new R0,i=new kr({viewContext:n.viewContext}),a=new L0({boardContent:n,sharer:o}),s=new Rr({viewContext:n.viewContext,sharer:o,calculator:i});Pt(this,Nn,t,"f"),Pt(this,dt,o,"f"),Pt(this,ke,a,"f"),Pt(this,jn,s,"f"),Pt(this,Dn,i,"f"),Pt(this,Je,new j0({boardContent:t.boardContent,sharer:o,renderer:s,calculator:U(this,Dn,"f"),beforeDrawFrame:c=>{U(this,Pe,"m",Wr).call(this,c)},afterDrawFrame:c=>{U(this,Pe,"m",Hr).call(this,c)}}),"f"),U(this,Pe,"m",Br).call(this),U(this,Pe,"m",oo).call(this)}isDestroyed(){return U(this,di,"f")}destroy(){U(this,ke,"f").destroy(),U(this,jn,"f").destroy(),U(this,Dn,"f").destroy(),U(this,_n,"f").destroy(),Pt(this,di,!0,"f")}getSharer(){return U(this,dt,"f")}getViewer(){return U(this,Je,"f")}getRenderer(){return U(this,jn,"f")}setData(t,n){const{modifiedOptions:o}=n||{},i=U(this,dt,"f");U(this,dt,"f").setActiveStorage("data",t);const a=i.getActiveViewSizeInfo(),s=i.getActiveViewScaleInfo(),c=fr(t.elements,{viewWidth:a.width,viewHeight:a.height,extend:!0});o?U(this,Je,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}):U(this,Je,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}),U(this,Je,"f").drawFrame();const d=Object.assign(Object.assign({},a),c);return U(this,dt,"f").setActiveViewSizeInfo(d),{viewSizeInfo:d}}getData(){const{data:t}=U(this,dt,"f").getActiveStoreSnapshot();return t}use(t,n){var o,i,a;if(U(this,St,"f").has(t)){const f=U(this,St,"f").get(t);if(f){(i=(o=f.middlewareObject).use)===null||i===void 0||i.call(o),f.status="enable",U(this,St,"f").set(t,f),U(this,Pe,"m",oo).call(this);return}}const{boardContent:s,container:c}=U(this,Nn,"f"),d=U(this,dt,"f"),l=U(this,Je,"f"),h=U(this,Dn,"f"),u=U(this,_n,"f"),m=t({boardContent:s,sharer:d,viewer:l,calculator:h,eventHub:u,container:c},n);(a=m.use)===null||a===void 0||a.call(m),U(this,Ei,"f").push(t),U(this,ve,"f").push(m),U(this,St,"f").set(t,{status:"enable",middlewareObject:m,config:n}),U(this,Pe,"m",oo).call(this)}disuse(t){var n,o;const i=U(this,St,"f").get(t);i&&((o=(n=i.middlewareObject).disuse)===null||o===void 0||o.call(n),i.status="disable",U(this,St,"f").set(t,i),U(this,Pe,"m",oo).call(this))}scale(t){const n=U(this,Je,"f"),{ignoreUpdateVisibleStatus:o}=t,{moveX:i,moveY:a}=n.scale(Object.assign(Object.assign({},t),{ignoreUpdateVisibleStatus:!0}));n.scroll({moveX:i,moveY:a,ignoreUpdateVisibleStatus:o})}scroll(t){return U(this,Je,"f").scroll(t)}updateViewScaleInfo(t){return U(this,Je,"f").updateViewScaleInfo(t)}resize(t,n){const o=U(this,Je,"f").resize(t,n),{width:i,height:a,devicePixelRatio:s}=t,{boardContent:c}=U(this,Nn,"f");c.viewContext.$resize({width:i,height:a,devicePixelRatio:s}),c.overlayContext.$resize({width:i,height:a,devicePixelRatio:s}),c.boardContext.$resize({width:i,height:a,devicePixelRatio:s}),c.underlayContext.$resize({width:i,height:a,devicePixelRatio:s}),U(this,Je,"f").drawFrame(),U(this,ke,"f").trigger("resize",o),U(this,dt,"f").setActiveViewSizeInfo(t)}clear(){const{boardContent:t}=U(this,Nn,"f"),{underlayContext:n,overlayContext:o,viewContext:i,boardContext:a}=t;n.clearRect(0,0,n.canvas.width,n.canvas.height),o.clearRect(0,0,o.canvas.width,o.canvas.height),i.clearRect(0,0,i.canvas.width,i.canvas.height),a.clearRect(0,0,a.canvas.width,a.canvas.height),U(this,Pe,"m",Fr).call(this)}getEventHub(){return U(this,_n,"f")}onWatcherEvents(){U(this,ke,"f").onEvents()}offWatcherEvents(){U(this,ke,"f").offEvents()}}Nn=new WeakMap,St=new WeakMap,Ei=new WeakMap,ve=new WeakMap,ke=new WeakMap,jn=new WeakMap,dt=new WeakMap,Je=new WeakMap,Dn=new WeakMap,_n=new WeakMap,di=new WeakMap,Pe=new WeakSet,Br=function(){U(this,ke,"f").on("pointStart",U(this,Pe,"m",ss).bind(this)),U(this,ke,"f").on("pointEnd",U(this,Pe,"m",rs).bind(this)),U(this,ke,"f").on("pointMove",U(this,Pe,"m",ls).bind(this)),U(this,ke,"f").on("hover",U(this,Pe,"m",cs).bind(this)),U(this,ke,"f").on("wheel",U(this,Pe,"m",us).bind(this)),U(this,ke,"f").on("wheelScale",U(this,Pe,"m",hs).bind(this)),U(this,ke,"f").on("scrollX",U(this,Pe,"m",ms).bind(this)),U(this,ke,"f").on("scrollY",U(this,Pe,"m",fs).bind(this)),U(this,ke,"f").on("resize",U(this,Pe,"m",gs).bind(this)),U(this,ke,"f").on("doubleClick",U(this,Pe,"m",ds).bind(this)),U(this,jn,"f").on("load",()=>{U(this,_n,"f").trigger("loadResource")})},ss=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.pointStart)===null||n===void 0?void 0:n.call(i,t))===!1)return}},rs=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.pointEnd)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ls=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.pointMove)===null||n===void 0?void 0:n.call(i,t))===!1)return}},cs=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.hover)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ds=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.doubleClick)===null||n===void 0?void 0:n.call(i,t))===!1)return}},us=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.wheel)===null||n===void 0?void 0:n.call(i,t))===!1)return}},hs=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.wheelScale)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ms=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.scrollX)===null||n===void 0?void 0:n.call(i,t))===!1)return}},fs=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.scrollY)===null||n===void 0?void 0:n.call(i,t))===!1)return}},gs=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.resize)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Fr=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.clear)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Wr=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.beforeDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Hr=function(t){var n;for(let o=0;o<U(this,ve,"f").length;o++){const i=U(this,ve,"f")[o];if(((n=i==null?void 0:i.afterDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},oo=function(){const t=[],n=U(this,St,"f");U(this,Ei,"f").forEach(o=>{const i=n.get(o);(i==null?void 0:i.status)==="enable"&&(i!=null&&i.middlewareObject)&&t.push(i.middlewareObject)}),Pt(this,ve,t,"f")};const V0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MDc6MjYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjliMGM0MzI2LWU4ZTQtNDlkNy04MmUzLTgxODkwYTE2ZmU1YSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjMzOGFhZDBmLWZkZjMtODE0MS1iMTZmLWNiZWIzNTQyYTJhMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUwODAxNzc1LWZlNGEtNDQyMy05NDQ3LThkYWRhNzZhYTllOSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTA4MDE3NzUtZmU0YS00NDIzLTk0NDctOGRhZGE3NmFhOWU5IiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjA3OjI2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWIwYzQzMjYtZThlNC00OWQ3LTgyZTMtODE4OTBhMTZmZTVhIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7W6XrzAAAGLklEQVRYhb2Xf2iUdRzHX/txtfXLplZ6Wblm6fzRmG6r7Uou1AxKRjQKYUqgaLBACFogppcK1h8aLRkMSYaJIA5hYMomZpskEfPOufCaDpZ6t7rbre263U3vzn3643meu+eu3XNzvz7w4bbdc/e89nl/Pu/v50HUCAQCx1tbW0uAx4CHgSwggxkKERkziUQif2mQ0WjU53a7vwSeBB4BTEDmTICmBBwYGDivVlDjlFAo9KvT6dwIPAHkANkq6MwDXr169bCISENDg9TX14s+BgcHf2hubi5mBmRPCXj06NFPREQ6OjoEkPLycrl06VIMMhKJeFwu1xdMs+wpAYuLi9eIiIyOjkpeXp4AAsj27dvF7/fHQIPB4C9dXV0fME2ypwQEXvX7/bdFRNauXRsDBMRkMsnhw4cTZB8YGGhsamp6hSmW3Qhw1Y0bN86LiNTW1iYAallWViZtbW162ftcLtdO/i/7tAAWtba2ficicvLkyTEBtdy6dasMDg7GQIeHh9s7OzvfBx5nkrIbAS7du3fvxyIiPT09hoBa1tXVJcv+fWNj4zLgUeAhJiC7EeDLwOsiMioisnDhwnFBrlixQi5evKiX/c6tW7c+R5E9lweU3QjwReDV/v7+bhGRqqqqcQFquWnTJvH5fHrZLzocjkoSZU9bTSPA54GV165daxYROXDgwAMBannw4MFk2RsaGhqWME7ZjQDNwIrTp09/JSLS0tIyIUBACgoK5MKFCzHIcDj85+3btz8FZpFGdiPAZ4DCmpqaTSIiPp9vwoBaVlVVidfr1ct+/sqVK+9iILsR4FzgJcASDoeHRUSKioomDQnI/v37E2T3+Xz1hw4dWjSW7EaAeUA+UNbX12cXEdmyZcuUAAJiNpvlzJkzetl73G53rVrN2EmUCjATuA9EgYjL5eoGKCkpGatNHijmz5/Pxo0b2blzJ2azOfZ3k8lUYDabv45Go/Y7d+6sIY0VZQOjGqDT6bxeWlrKqlWrJgRlsVhYv349FRUVWCwWcnJyEt4PBoOuoaEhu9frvdzR0fHTtm3buolvRpLqe3OBp4EllZWV74mIRKNRyc3NTSvf7Nmzpbq6Wk6cOCFut1uSY2RkJOB0Ou3Nzc3Ha2trPwPWAGXAEuBZFFPPAbKMevBhYA6wCKgIBoP9IiKrV682hLPZbP8DEpH7vb29N1paWn602WwHFyxYsAX4EKgE3gIsQBFQgOIeT6j3z0wFqEkc60OPx9Odn58/t6SkhPb29jFLbrVa2bNnDwBer7fv5s2bPQ6Ho7upqcnZ1tbmASJq3gPC6utdYESXYfWeo6mkBaUHRQ/odrv/yM/Pt5SWlqb8kAbncDh+W7lyZYN683u6DOvAwipsOOnniA4wZf9lqhdoVYzY7fbrQMpBsdlsWK1WRkZGAtXV1d8D/wA+wKNLr5o+YEC9ZggIAEHiFbyfDhCUCcoFngIWFxYWrtMaat68eQl9V15eHmu2+vr6OuAd4A2gGFgMLERp/mdQ+noWyuadi9Jr2aQ4k42GBPXDs1Ga97WhoaFbIiIbNmxIANTWq87Ozp9VuApgGfACihPkoRjwI+p3mlSgtA9ZRkYNYwwKJBr2rl27sFqthEKhwZqamqOAX5f/AsPE5btLvM/GJWO6yFb/82eBonPnztWJiJw9e1YAWb58eUzaI0eOfAO8CbwCPIfiZZN+eEoncSaKLPOApbt3794uIuL1ehOktdvtF4C3gRKURXcOSn9lTRRsvIAZKI4+l/gjQFREZMeOHSIiEggE+tetW/cRitkuRhmERxnnxjxZQFDWnzzURwCv1+vUHxHHjh37lri0C1Am9KGpgDMC1G8SQnxxCHs8Hqf2RldX10+bN28+i+JjwyT62KSaP13oAfWTHO7t7f0dIBQK/b1v375GlEnVjPYuyoQaHlNTDahVMALca29vdwBcvnz5+KlTp26OATft1UuODBS7yEOxj0K/329HOSWWopjxlE1tchhtM7FriPfgXSDDbrfXo0gbJr4QzIi0WiRPYBbKZJrUV23b0dYn7XSYcsBkS9EiO/k6lApq1cwiPjzaAM1Y9cYC1G6uAWrPCtrvMwoHqU02Q5caIEzj1KaS+D+vIjxtLug31gAAAABJRU5ErkJggg==",Gr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MzE6MjMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0MTBhYjUzLWM0ZjEtNDVhNS04MjhkLTIxOTczOWFjOTk3MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBkMDNmNjM5LTE5MzctY2Y0MC1hMTg0LTIyMjg0NzczNWNmYSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjgyYjQwZGRmLWE0ZGEtNDY3MC1iYzc2LTBhYjY3ZmI5M2I0ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODJiNDBkZGYtYTRkYS00NjcwLWJjNzYtMGFiNjdmYjkzYjRlIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjMxOjIzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjQxMGFiNTMtYzRmMS00NWE1LTgyOGQtMjE5NzM5YWM5OTcxIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz57vRudAAAEk0lEQVRYhe3ZW0jbVxzA8e8/MX+NYnG9uI4xE3bvoLt0FzradRfGBtsYo32YdAhb6WQyBqV7KOylpYjzZShDGfjmyxgbgjjwyRm16SYMhgiNKDhbL3VtNF4xJOnf3x7+59i/Wf4aTbInf3AwJMdzPjnnf/n9/jFEhGzDMIxMb3uAIsDs6ek5urS05Dtz5syE+uwekAQS6u89YD19gC0NIpJ1c8GZQHlXV9fJRCIxGo/HxxoaGj4CngWOAEGgEihXfT07MeQC3MB1dna+lkgkRkXF6urq3xcuXPgUOAE8DzwGPOiGLARwEy4ej4+JiITD4elr167NiIgsLi7eqq2trQPeBI4Bj7sh8w10xZmmeds0zdn+/v5/RERisdjUuXPnvgLeAl50Q+YTaAA+oKy7u/uE3laNAwSQ4uLiu6FQ6G4G5DG13YeAMjWWkU+gBygJhULHNe769etTTpwDGXUiz58//yXwujp5qoAHgBLAk0+gNxKJHEulUiMKN2ma5gwgPp/vjhOXjlxYWJisq6urBV5RW30IKAW8eQPGYrGjlmXdEBEZHBy8aZrmFCCmac729fVtAHt7e6MO5N2+vr47IiJLS0s3L126dBZ4Sh2LZUBRwVdwYGBgVuwOYh/zsoF0bnPBVzDTMRgOh6dFhROokSIi8/Pz0+pEeaPQx+DGWdzV1XVSX2LcgCIic3NzMzU1NV8D7wIvq9WrLNRZvOk62NHRccqJTAdGo9Hb1dXV3wAfYt9VjgAPFfI66EQWAxU9PT0fuwEvXrzYBJwF3gFeAAJAhfrfrO4k/7lxZxnr2JlJqry8POnWyePx6H4JR0vhktVkHGOXQI20SkpKLLcOhmGsA5YCaZiVLS5XoADi9XpdkznDMERhnE0fCgUHZhvOW+CO4/8A5hR7wFxjD5hr7AFzjZyBlmVlrOYdYaS1HUUuQA/gWV9fd51URDyqn1c1j6MVFGjoidfW1oq2ABrYj0V82OmVzwHNajVdB88C5wOKTdM87NaxsrKyQsFKHC2BnTDo+/TWt8Bd5INeVC44NDT0xXYZdXNz8w/AaeyS8yjwCPdzQu92ht2m/OUjIyOfS1pkAoqItLS0fA+8D7wKPA0cxs6qC1O4T0xMfKYnb21tnXEDNjc3z+nXbW1t3wFvYz9dCAL7KUThHovFPtGTNjU1jQFSX18/lg68cuXKLUAaGxs3vkB7e/u3wHHgCQpUdnpTqdQvesJgMDisUVevXh3Xry9fvnxTv66qqprQ/cfHx/vVNj/J/couv0DAv7q6+pMDeYPNSalkwkUikX7s4ukl4FHgAODPN1CXnPsWFxd/dCAjW+GGhoZCwAfYpeczwMPAPjVW3gv3IvXN98disZ8dyBGNCwQC4/r94eHhfuy6+JS6zATUCeJXY+W9cNfIUuDAwsLCr05kIBDYeBQ8Ojr6h8Lpx25BtbWlGpfv62BG5PLy8m+SFpOTk38C76mVe84NVyhgOvLgysrK7xoXjUb/Uqt2XG1rEDiYCbcd0MgwsWtk+J1EI03An0wmw5Zlefx+/2n1eRKIO5r+rWTTpFsZ/gWFrGMmeObuqwAAAABJRU5ErkJggg==",B0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAEvUlEQVRYhc2Y20/cVRDHP8v+uKzAWkpDCtZq8BYhJkq8PBoJxgj7I2m0ryaSyFN9IT74pI8+8WJiggRj/APApFkSTGRJ+qKGUiyxbGPEWsUSuVhYC12Wy8+HmeMeYPe3d3WSye/k/M7le+bMzJkZ+J9ToEJreGVYN+vihcytstjQocUlAw0WCSoIVCv3Ae8CXwIt+u8XHVeOG8qLqgAHqAFCQCNwGugCthBJGd7S/tM6LqTzHI5KuqzgaoAHgEvAtwrkG2AG8FzXvep5nue67lX9N6P/PR1/SefXlBtkFXKNDUA/RyX1D9uUbYzOb9D1ygbSQU7eDMxhSSsSiVz3AxiJRK57nuf19/fPad8coqONFCBJPyUOIKc1OvcbgiY9ICDT8+0DHge2gR0gBeyTtviM5HeKAGlrrfMZVwhdAVaAr4F3KNF4gkA9cBbowOc68+3LwDn1Mhdy4/OcYk54nPr6+m54nofruvPa9SFQ6wfQTweNgTwInAGuQWk6mEUvHwb+Au4Dexx7ffK9+0q+CHWIBIOZ9skHYKWfK9tQ8gZoLDjIyWCg3ORY+2T8aYOyg4EaRIFrkCs4QU1NTSvabC20zyIDzuyfkYzEahHX8jHwE/LwXwHeJ4P7KIVIu5ouxFDC+HgLAy4MfEF2v1UpgOezATSiNVf6EvAWsD01NXVtdnb2bk9Pz81sp/q3KIi8t83Ae4DX0tJy0z7t8PDwD4FAYIX/WILVwKMAzc3Nu/agoaGhzmg0ugcsV0hIvlSNoH8IuIiebHJycrls4sotwaxGYvueAPAjEg3jum79yMjIr5WUjFLOxMpBIopWoBN4GfhOJ+4NDg4ulVt6i4uLm7r+BvAscA4fCXrAAfJQJ5Fg8gPgMuCMjo62d3V1LW1sbKRKlpXSxMTEmjZ/5qQrOwHwUAGmkIjiHhJdfKrM/Pz8Y+3t7RvT09Ob5QAYi8X2tbmke2cEZwAaCdoAt5QvIzEbiUSitbe3tyoej++UCnBhYSGkzdu6d1aQxkgOkfwgieQMCeCu8iwSnpNKpcIdHR3BZDJ5UCy4SCSyvL6+/giiSou67wE+eYmhAKKkIaAJUdynkdflNcQF3dFTpooxjmg0aozDAz4DXkB8bxPy1OYM7QzIOuAU0AY8pQu9CrwJ3AK8UCj0RyHgZmZmli1w3wOvAM/oHo1kiZiygbSDh7PAE8DzQA/wBqKnnuM4a2NjY7dygbtw4cICRy31deBFJA09o7eWsU7kJ1KTLJmyRyOSn5zS70fAkwBtbW2/DwwMHHR3d9d3dnY2rK6u7o2Pj2/GYrH9eDzurK2tndM1vwI+QXT7T2BTD5skQz6SCyAcLRoZkGEFGQbeRqpbubK+BPA5MI14h00L3I6Cy2h4+eQbJsKuRa6iQcGFFfB5oBt4DpFsI+Ky7iDBxW3gBhBH/GtC+R7i1lKk3UxRAG2QpvxWr0AbtB3SA5jkx36djH/dVlDbyibN3M8GDvJPyI2PSulixm/u6kZ1OQCaJ/S+tndJX6tvsFBIxcCUdA3vW5ubxMrObc0hDMhd/Rqp5QQHxeW8dubnHGM7tzVv/IECMlxQ/bpcRfRMqaNRheNcUGG9XFWDACfzWs/6Fl3t/xtO//8gpbCORQAAAABJRU5ErkJggg==",F0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAER0lEQVRYhe2YT2hjRRjAf8lL22xsNsm6EWKrSKvuIkIh+O9QRFxEW18KUsoe7FHoRaWCN1FPetOrIHgVKS0q9P5OxaJbodkalgVrtVZjS7Ntd02z6abPw3yzmaT585q+elj2g2HmvZn35jffN/PNNwP35R6XgM/fuif4n+dO2klQvgsaZRc4NJJvoJbHdhrIAkJAN2ADHwFfAw9J3ZoB/b9I0AA6A0SBc0Aa2EVpSqddeZ+QdmfkO+u0gIPSQQR4HfhRQH4AHMDNZDJXXNd1M5nMFalzdB3wJTAOPAD0yEB9066G6wXepVZTd5MpTdporZ6jVqsatmMJoTR3HvgJQ1u2bS+3ArRte9l1XXdsbGyJo1pdBN6Wf3d3ChlAmSQO9LeC8fquQRpDWaerHWSjSr1iu4BkJyOsF9u2s67rkslkluTVxygltAVsJBZqdCngEj5osIlW+4EYytRNF04jeu3vulCT+7QkLH20dEOhumft97pQI4s3+iiRSPwtxVSbd39J8eEGvzFXc1NAs8KSFAZeBt4AHgNeBFDWObkEAne7HAK2gT2gCFQatdca1GbtBj4E3veFprVYVLXXcg4GqM6588BbAMlkcm1qamqzr6/v6ikBet5RgiizJoDPAXdgYGDZXHkzMzPrrk9CdRWngUeAsxxdCzVwpgZ/BigWiz1mo4mJif7jqMajeJrU5hywgGvAej6fvzA0NLThN1Eul9uT4g5VTbYFNKUIfAbsZ7PZvuHh4Wt+As7Ozu5IcY2j219TQB0NV4A7qODgO4CFhYWLg4ODOb8AHccpG4A68m6pRQ1YAQ6A28A+8BXwBcDq6upTqVTquh+AuVyuW4q/opRRaQdZD1gCbgE3ge+BT4HdfD7/ZDwe/z2bzRY6hRsfH1/e3Nx8FDX/sgbgoZfvg6jo4ixqW7oIPA+8CrwHrAJuJBLJd+JaHMf5k6qmPgGeQe1SCenXk0/U21xcIC8AzwGvAJPAEuAmEon1xcXFba9w8/Pz5oqdB14CnpY+oij35km0qwmjwqAU8ISM9hIwBeQA17KsG9PT07+1gxsZGdmgdqW+BjwLDAAPoo4ALU+W9arVwWoIpXp9kouKZpPAO8AwQCwW+2d0dLQ0OTkZSafT0UKhUJ6bm9t2HKeysrIS3tra0g7+KvABUJC0g5rrJdRcbLpImtleRzYashc1P2OSXwbebDVykX3gW+Ab1AHqhuQ3pe6AJlFMO0CoPROHDcio5I8DL1A9C8dQbmod+APYAK4DvwjQnsDdErgyVTfTEaCG1GFYGHXG7TVSo2OkdvhlAflXoHSuNdfStFqaRhEi2kfdprrj6M5LAt0I8EDaaMdflPal48CB95hMr3Bt8h4jD0kyL5E0pN6dysZzW7N2AqjbmhdIZjJvufTOpE19x3g+9s1XJ/ck5tVbfdhu+rxDfLiSO+lFToCjZwrXyH2/0Lwv95z8B1jAqXmDnj4YAAAAAElFTkSuQmCC",W0="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAIiklEQVRYhe2YW2yUxxmGn7W96zXGNnZsr2FJHQyYBHNIU1ttAqVUVjlJUAtxQyUXhKgQktUDdSUkuEDtBVJ9UQXRC0RJRblrq/SCIARpFImWQ8VBIZQinJpQYozNyWaxiw/rfXsx3+z+6xNOe9tPGv2nOTzzffPPvDMhSXwJC1nKAXIDV/9ellLAqF1T9o5A2Ry7J5A/Fbh3mUMh8qYJ5kHCQATID6QIkBcAHAVGgKFAStq33EB53/ao5Rm064i9g0CmqcDyrNICYCZQBJTYdaa9j1jelDUwCAwAz4F+ex61DhZauXzr1CDwDHhq1wFg2Do1KWAo0NsCAyoDKoGYXcuBWdZY1PKnzAsDQB/wBOg1yKTVN8vqmoHz6nOgC7gHdFrbCasrNRFgyMCj5qVXgDlANfAaMA/4ir2rMI+MtSHgEdAN9BjsiNVZYR0sNq8+AtqB69Z2MuDBcYA+pAXW0yoDWgTUWXrd8k1l+cBcSxjIIBlPB63G8uUB/8Z57znwAkgGAX1YC4BSK7QIWA7UWwoDJJNJzp49y4ULF2hvb6e7u5tEIkFhYSGVlZXMmzePhoYGNmzYQElJCVZv2tPt7e3s2bOHvr4+9u3bx/r16+PWjg/zQ9x4BEk+5UkqklQt6ZuSdkn6jaRbMhsYGFBbW5uWLVvmp5MpU3V1tVpbW9XV1aWgbdy4MZ2npqbGvx6W9DtJ35e0RFJREDBX0gxJcUnfkPQDScck3fGlz549q7q6ummBjU2xWEzvvfdeGvCtt95Kf6uoqAiyfyBpt6SvSZrlAUOSIpLKJS2X9D1Jv5Z025d69913FQqFJmy8rKxMS5YsUUNDg5YvX67Zs2dPCrpjxw6NjIxoxYoV6XdVVVVBwI8l/UTS1yWVesBcC+18SRsk/ULS33yJtra2CRtramrSiRMn1NXVpWQyKUlKpVJ6+vSpTp48qZ07dyo/P39cua1bt6q+vn4ywL9IapX0tqQyDxiRFDPq3ZL+JCklSadOnRrXwMKFC3X69GlNx65du6aVK1eOqyMYjTGAf50IsNC8t1FSm6TPJOn+/fuKxWJZFb/zzjvjBvx0bO/evQqHwxNG4mUe9MtYMZk5bwHA4cOH6enpSc9BixYt4uTJk5SVlflXfcBN4DFuapoHLPQfz58/z9WrVwmFQsTjceLxOHfv3uUlNlZcpFeMEtzsXg2QSCQ4duxYulQoFOLQoUNBuE7gvAE+x82b/VZHyblz52hsbCSZTL4MCGWrqUECq0gQsBi3ts4B+PDDD3n48GG61OrVq1mzZo1/fGZw54HbVmGV1bMAWPbRRx9NC24CwD7cajLiAXNwIS7ELW3lAGfOnMmqZPv27cHHvwM3gH8AnwH/wnn0C+AuwLZt25g/f/5L4cLhMNu2bfOPnbh1+xkZ9UMebvmKGmQEoLOzM11JQUEBK1eu9I/JAFAPTqnk4hTNY9xS1V5TU1N7+fJlOjo6SKXS+jPLJFFUVMTixYsxmJtW/inOi2nAXDI/C0BWeMvKyojFYv6xz1LCKhnCRSEBPMCFfBaQKi0tfb2+vn5qFzp7AnwCXAM+t45mAUJGfgMwOpoWtIRCWZ/89BB8TuJ+lG5cNEatkXYgjtN+BYG2ktaxBE4U3AP+iRsud3EeHCTwk6Ss0IhvtaKiIk3Q19dHb28vhYWF4H6mYtxwiBrQIE4aPTHgIVzoO3E/TzlOV4YD3/stj9eMPj2xzg4HAYMSPQnkxePxNGB/fz+XLl1iy5Yt4HTeq+aZTtyA9h18Yb33G6aRQBqyDiUNLihmH1q54LAZ9ZHKISPRn1loaGxsJGjHjx8PPi6xtAgnNufgVHcRmf1J2DpTiJsjvYout3c5gQ49Ns89s3fpOdB70I+Hx7iBXrV27VqKi4tJJBKAm3auXLmCDfpy4G3rZSHur/aSPg83BCpx24MFuNUlbnkHcGMubEDdxpG0lBn8AcBBsgfsVysqKti6dStHjhwBYGRkhJaWFs6dO0ckEgGYj9v0xIA71rkha7jUgBYCb5hHGRoaIj8/f4Z5s8jafUpmN/diLBwAkmZKWiipSdKvJN2VpI6ODhUVFWUt7Js2bdLAwMBYLdAt6VNJlyV9IumLsRkOHjyo2tparVixQrdvp2Xmn00YrJI0R05VBRV+GjAiqcoUxA8lnfI1HD16dJz6WLVqla5fvz4tFdPZ2anm5uas8s3Nzf7zp5J+LmmNpFcl5U8GmCupWFKtpO9K+qWkG76W3bt3j4OMRqNqaWnRhQsXNDQ0lAWVTCZ169YtHThwQFVVVePKtrS0+Kw3pgsYso+Vkuol7ZD0W0ldvsHW1tZJZXxtba0aGxvV1NSkdevWaenSpYpGoxPmXb9+vXp6ejzgx5J+ZiGeLSk8GaD34ky5Hd23JP1I0h8kPQmGu7y8/L/aNEUiEe3fv1/Dw8Pp6Es6KqlZ0puSXpHbVU4KiPVglqQFkr4j6aeSfi/pvq/13r172rVrlyorK6cFFo1GtXnzZl25ciU4Ch5J+qOkH0v6tqTXzDk5EwGGlNFjOWQOd8px4vUN4E3cpn2pz/jgwQPef/99Ll68yJ07d+jt7WVwcJBIJEJJSQlz586loaGBTZs2UVdXF5w0OoDLwFWcbPsct6r04+bRLHEYCoWyAD1kBDfHleHmsxrccccS3NFHNV/eenBy6iZwCycMOnHz5wBuDh2nyyY6H0zhFmoF7vtxk+l9q3ieQfrDo8msF7cy3cN56g7ZWnKcep7IxnrQmz+wHKu2K3EKJWbPpWSUTQ4ZtRJc23sC6ZGB9ZM52JwcboIQjzUvZvNxYfeHlyVkZFcBbux6wKA6ShjoM5yM8uH0Xpuy8ekAQuZc2W8P8nEei9p9mMmPgAfJHO0O27e0lHppw9MEDJo//A4eoE91iB48SJ80lFMB/t/+V/sPGZfTmtMFR4EAAAAASUVORK5CYII=";var Ci=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ae=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ke,xi,fo,Pn,ui,Kt,Yr,$r,At,vs,ps;class H0{constructor(t,n){Ke.add(this),xi.set(this,void 0),fo.set(this,void 0),Pn.set(this,null),ui.set(this,null),Kt.set(this,{auto:V0,"drag-default":B0,"drag-active":F0,"rotate-0":Gr,rotate:W0}),Ci(this,fo,t,"f"),Ci(this,xi,n.eventHub,"f"),Ae(this,Ke,"m",Yr).call(this),Ae(this,Ke,"m",$r).call(this)}}xi=new WeakMap,fo=new WeakMap,Pn=new WeakMap,ui=new WeakMap,Kt=new WeakMap,Ke=new WeakSet,Yr=function(){const t=Ae(this,xi,"f");Ae(this,Ke,"m",At).call(this,"default"),t.on("cursor",n=>{var o;n.type==="over-element"||!n.type?Ae(this,Ke,"m",At).call(this,"auto"):n.type==="resize-rotate"?Ae(this,Ke,"m",At).call(this,"rotate"):typeof n.type=="string"&&(!((o=n.type)===null||o===void 0)&&o.startsWith("resize-"))?Ae(this,Ke,"m",vs).call(this,n):n.type==="drag-default"?Ae(this,Ke,"m",At).call(this,"drag-default"):n.type==="drag-active"?Ae(this,Ke,"m",At).call(this,"drag-active"):Ae(this,Ke,"m",At).call(this,"auto")})},$r=function(){Ni(Gr).then(t=>{Ci(this,ui,t,"f")}).catch(t=>{console.error(t)})},At=function(t){if(Ae(this,Pn,"f")===t)return;Ci(this,Pn,t,"f");const n=Ae(this,Kt,"f")[Ae(this,Pn,"f")]||Ae(this,Kt,"f").auto;let o=0,i=0;(t.startsWith("rotate-")&&Ae(this,Kt,"f")[Ae(this,Pn,"f")]||t==="rotate")&&(o=10,i=10),t==="default"?Ae(this,fo,"f").style.cursor="default":Ae(this,fo,"f").style.cursor=`image-set(url(${n})2x) ${o} ${i}, auto`},vs=function(t){var n;let o=0;t.type==="resize-top"?o+=0:t.type==="resize-top-right"?o+=45:t.type==="resize-right"?o+=90:t.type==="resize-bottom-right"?o+=135:t.type==="resize-bottom"?o+=180:t.type==="resize-bottom-left"?o+=225:t.type==="resize-left"?o+=270:t.type==="resize-top-left"&&(o+=315),o+=ct(((n=t==null?void 0:t.element)===null||n===void 0?void 0:n.angle)||0),Array.isArray(t.groupQueue)&&t.groupQueue.length>0&&t.groupQueue.forEach(a=>{o+=ct(a.angle||0)}),o=ct(o);const i=Ae(this,Ke,"m",ps).call(this,o);Ae(this,Ke,"m",At).call(this,i)},ps=function(t){const n=`rotate-${t}`;if(!Ae(this,Kt,"f")[n]){const o=Ae(this,ui,"f");if(o){const i=document.createElement("canvas"),a=o.width,s=o.height,c={x:a/2,y:s/2};i.width=a,i.height=s;const d=i.getContext("2d"),l=Ct(t);d.translate(c.x,c.y),d.rotate(l),d.translate(-c.x,-c.y),d.drawImage(o,0,0,a,s),d.translate(c.x,c.y),d.rotate(-l),d.translate(-c.x,-c.y);const h=i.toDataURL("image/png");Ae(this,Kt,"f")[n]=h}}return n};const Ta="change",Xe="SELECT",Ee=Symbol(`${Xe}_actionType`),Ht=Symbol(`${Xe}_resizeType`),Gn=Symbol(`${Xe}_areaStart`),Io=Symbol(`${Xe}_areaEnd`),ut=Symbol(`${Xe}_hoverElement`),Yn=Symbol(`${Xe}_hoverElementVertexes`),Lt=Symbol(`${Xe}_selectedElementList`),G0=Symbol(`${Xe}_selectedElementListVertexes`),mn=Symbol(`${Xe}_selectedElementController`),fn=Symbol(`${Xe}_selectedElementPosition`),Qe=Symbol(`${Xe}_groupQueue`),$i=Symbol(`${Xe}_groupQueueVertexesList`),Ao=Symbol(`${Xe}_isMoving`),ys=Symbol(`${Xe}_enableSelectInGroup`),To=Symbol(`${Xe}_enableSnapToGrid`),Xr=2,Y0=4,Ur=1,Zr=10,$0="#1973ba",X0="#1976d21c",U0="#5b5959b5",Z0="#f7276e",Q0={activeColor:$0,activeAreaColor:X0,lockedColor:U0,referenceColor:Z0},hi="@middleware/select",Mi="@middleware/select-clear",da="@middleware/select-in-group",ua="@middleware/snap-to-grid";function Rt(e,t,n){const{borderColor:o,borderWidth:i,background:a,lineDash:s}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.fillStyle=a,e.setLineDash(s),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.lineTo(t[0].x,t[0].y),e.closePath(),e.stroke(),e.fill()}function ha(e,t,n,o){const{borderColor:i,borderWidth:a,lineDash:s}=o;e.setLineDash([]),e.lineWidth=a,e.strokeStyle=i,e.setLineDash(s),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath(),e.stroke()}function J0(e,t,n){const{size:o,borderColor:i,borderWidth:a,background:s}=n,c=t,d=o/2,l=d,h=d;if(l>=0&&h>=0){if(typeof a=="number"&&a>0){const u=a/2+l,m=a/2+h;e.beginPath(),e.strokeStyle=i,e.lineWidth=a,e.circle(c.x,c.y,u,m,0,0,2*Math.PI),e.closePath(),e.stroke()}e.beginPath(),e.fillStyle=s,e.circle(c.x,c.y,l,h,0,0,2*Math.PI),e.closePath(),e.fill()}}function yt(e,t,n){const{borderColor:o,borderWidth:i,lineDash:a}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.setLineDash(a),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[2].x,t[2].y),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(t[1].x,t[1].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function ws(e,t,n){const{size:o,borderColor:i,borderWidth:a,lineDash:s}=n,c=t.x-o/2,d=t.x+o/2,l=t.y-o/2,h=t.y+o/2;yt(e,[{x:c,y:l},{x:d,y:l},{x:d,y:h},{x:c,y:h}],{borderColor:i,borderWidth:a,lineDash:s})}function bs(e,t,n){if(!t)return;const{style:o}=n,{activeColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Rt(e,Fe(t,n),a)}function Ss(e,t,n){if(!t)return;const{style:o}=n,{lockedColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Rt(e,Fe(t,n),a);const{controller:s}=n;if(s){const{topLeft:c,topRight:d,bottomLeft:l,bottomRight:h,topMiddle:u,bottomMiddle:m,leftMiddle:f,rightMiddle:v}=s,g=Object.assign(Object.assign({},a),{borderWidth:1,background:i});yt(e,Fe(u.vertexes,n),g),yt(e,Fe(m.vertexes,n),g),yt(e,Fe(f.vertexes,n),g),yt(e,Fe(v.vertexes,n),g),yt(e,Fe(c.vertexes,n),g),yt(e,Fe(d.vertexes,n),g),yt(e,Fe(l.vertexes,n),g),yt(e,Fe(h.vertexes,n),g)}}function Es(e,t,n){if(!t)return;const{hideControllers:o,style:i}=n,{activeColor:a}=i,{elementWrapper:s,topLeft:c,topRight:d,bottomLeft:l,bottomRight:h,top:u,rotate:m}=t,f={borderColor:a,borderWidth:Xr,background:"transparent",lineDash:[]},v=Object.assign(Object.assign({},f),{borderWidth:Y0,background:"#FFFFFF"});Rt(e,Fe(s,n),f),o||(ha(e,pe(u.center,n),pe(m.center,n),Object.assign(Object.assign({},v),{borderWidth:2})),Rt(e,Fe(c.vertexes,n),v),Rt(e,Fe(d.vertexes,n),v),Rt(e,Fe(l.vertexes,n),v),Rt(e,Fe(h.vertexes,n),v),J0(e,pe(m.center,n),Object.assign(Object.assign({},v),{size:Zr,borderWidth:2})))}function K0(e,t){const{start:n,end:o,style:i}=t,{activeColor:a,activeAreaColor:s}=i;e.setLineDash([]),e.lineWidth=Ur,e.strokeStyle=a,e.fillStyle=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,n.y),e.lineTo(o.x,o.y),e.lineTo(n.x,o.y),e.closePath(),e.stroke(),e.fill()}function q0(e,t){const{areaSize:n,style:o}=t,{activeColor:i,activeAreaColor:a}=o,{x:s,y:c,w:d,h:l}=n;e.setLineDash([]),e.lineWidth=Ur,e.strokeStyle=i,e.fillStyle=a,e.beginPath(),e.moveTo(s,c),e.lineTo(s+d,c),e.lineTo(s+d,c+l),e.lineTo(s,c+l),e.closePath(),e.stroke(),e.fill()}function ed(e,t,n){const{style:o}=n,{activeColor:i}=o;for(let a=0;a<t.length;a++){const s=t[a],c={borderColor:i,borderWidth:Xr,background:"transparent",lineDash:[4,4]};Rt(e,Fe(s,n),c)}}function Cs(e,t){const{xLines:n,yLines:o,style:i}=t,{referenceColor:a}=i,s={borderColor:a,borderWidth:1,lineDash:[]},c=Object.assign(Object.assign({},s),{size:6});n&&n.forEach(d=>{d.forEach((l,h)=>{ws(e,l,c),d[h+1]&&ha(e,d[h],d[h+1],s)})}),o&&o.forEach(d=>{d.forEach((l,h)=>{ws(e,l,c),d[h+1]&&ha(e,d[h],d[h+1],s)})})}function me(e){return e*Math.PI/180}function No(e,t){return Math.sqrt(e*e+t*t)}function ie(e,t){return t>0?Math.abs(e):0-Math.abs(e)}function ma(e,t){const{ctx:n,viewScaleInfo:o,vertexes:i}=t,a=pe(i[0],{viewScaleInfo:o}),s=pe(i[1],{viewScaleInfo:o}),c=pe(i[2],{viewScaleInfo:o}),d=pe(i[3],{viewScaleInfo:o});return n.beginPath(),n.moveTo(a.x,a.y),n.lineTo(s.x,s.y),n.lineTo(c.x,c.y),n.lineTo(d.x,d.y),n.lineTo(a.x,a.y),n.closePath(),!!n.isPointInPath(e.x,e.y)}function xs(e,t){const{ctx:n,viewScaleInfo:o,viewSizeInfo:i,groupQueue:a}=t;if(!a||!((a==null?void 0:a.length)>0))return!1;const s=Ia(a),c=s[s.length-1];return c?ma(e,{ctx:n,vertexes:c,viewScaleInfo:o,viewSizeInfo:i}):!1}function $n(e,t){var n,o,i;const a={type:null,elements:[],elementVertexesList:[],groupQueue:[],groupQueueVertexesList:[]},{ctx:s,data:c,calculator:d,selectedElements:l,viewScaleInfo:h,viewSizeInfo:u,areaSize:m,groupQueue:f,selectedElementController:v}=t;if(v){const{left:g,right:p,top:y,bottom:S,topLeft:E,topRight:w,bottomLeft:D,bottomRight:b,rotate:x}=v,j=[g,p,y,S,E,w,D,b,x];for(let P=0;P<j.length;P++){const z=j[P];if(ma(e,{ctx:s,vertexes:z.vertexes,viewSizeInfo:u,viewScaleInfo:h})){a.type=`resize-${z.type}`,l&&(l==null?void 0:l.length)>0&&(a.groupQueue=f||[],a.elements=[l[0]]);break}}}if(f&&Array.isArray(f)&&f.length>0){const g=f[f.length-1];if(!((n=g==null?void 0:g.detail)===null||n===void 0)&&n.children&&Array.isArray((o=g==null?void 0:g.detail)===null||o===void 0?void 0:o.children))for(let p=g.detail.children.length-1;p>=0;p--){const y=g.detail.children[p],S=vo(y,{groupQueue:f});if(S&&ma(e,{ctx:s,vertexes:S,viewScaleInfo:h,viewSizeInfo:u}))return a.type||(a.type="over-element"),a.groupQueue=f,a.elements=[y],a}return a}if(a.type!==null)return a;if(m&&Array.isArray(l)&&(l==null?void 0:l.length)>1){const{x:g,y:p,w:y,h:S}=m;if(e.x>=g&&e.x<=g+y&&e.y>=p&&e.y<=p+S)return a.type="list-area",a.elements=l,a}if(c){const{index:g,element:p}=d.getPointElement(e,{data:c,viewScaleInfo:h,viewSizeInfo:u});if(g>=0&&p&&((i=p==null?void 0:p.operations)===null||i===void 0?void 0:i.invisible)!==!0)return a.elements=[p],a.type="over-element",a}return a}function td(e,t){var n,o,i,a,s,c,d,l,h;let{x:u,y:m,w:f,h:v,angle:g=0}=e;const p=at({x:u,y:m,w:f,h:v,angle:g});g=ct(g);const y=Ct(g),S=!!(!((n=e==null?void 0:e.operations)===null||n===void 0)&&n.limitRatio),{start:E,end:w,resizeType:D,scale:b}=t;let x=Object.assign({},E),j=Object.assign({},w),P={x:x.x,y:p.y},z={x:j.x,y:p.y},V=Object.assign({},P),O=Object.assign({},z),N={x:p.x,y:x.y},B={x:p.x,y:j.y},H=Object.assign({},N),_=Object.assign({},B),L=(O.x-V.x)/b,k=(O.y-V.y)/b,C=No(L,k),Y=(_.x-H.x)/b,G=(_.y-H.y)/b,R=No(Y,G);(g>0||g<0)&&(x=Ie(p,E,0-y),j=Ie(p,w,0-y),P={x:x.x,y:p.y},z={x:j.x,y:p.y},V=Ie(p,P,y),O=Ie(p,z,y),N={x:p.x,y:x.y},B={x:p.x,y:j.y},H=Ie(p,N,y),_=Ie(p,B,y),L=(O.x-V.x)/b,k=(O.y-V.y)/b,C=No(L,k),C=ie(C,k),Y=(_.x-H.x)/b,G=(_.y-H.y)/b,R=No(Y,G),R=ie(R,G));let $=(w.x-E.x)/b,Q=(w.y-E.y)/b;if(S===!0){if(["resize-top","resize-bottom","resize-left","resize-right"].includes(D)){const I=Math.max(Math.abs($),Math.abs(Q));$=($>=0?1:-1)*I,Q=(Q>=0?1:-1)*I/e.w*e.h;const A=Math.max(Math.abs(Y),Math.abs(G));Y=(Y>=0?1:-1)*A,G=(G>=0?1:-1)*A/e.w*e.h;const M=Math.max(Math.abs(L),Math.abs(k));L=(L>=0?1:-1)*M,k=(k>=0?1:-1)*M/e.w*e.h}else if(["resize-top-left","resize-top-right","resize-bottom-left","resize-bottom-right"].includes(D)){{const I=Math.abs($);$=($>=0?1:-1)*I;const A=I/e.w*e.h;D==="resize-top-left"||D==="resize-bottom-right"?Q=$>0?A:-A:(D==="resize-top-right"||D==="resize-bottom-left")&&(Q=$>0?-A:A)}C=Math.abs(C),R=C/e.w*e.h}}switch(D){case"resize-top":{if(g===0)v-Q>0&&(m+=Q,v-=Q,((o=e.operations)===null||o===void 0?void 0:o.limitRatio)===!0&&(u+=Q/e.h*e.w/2,f-=Q/e.h*e.w));else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){R=0-ie(R,G);const M=me(g),F=R/2;I=I+F*Math.sin(M),A=A-F*Math.cos(M)}else if(g<180){R=ie(R,Y);const M=me(g-90),F=R/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M)}else if(g<270){R=ie(R,G);const M=me(g-180),F=R/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M)}else if(g<360){R=0-ie(R,Y);const M=me(g-270),F=R/2;I=I-F*Math.cos(M),A=A-F*Math.sin(M)}v+R>0&&(((i=e.operations)===null||i===void 0?void 0:i.limitRatio)===!0&&(f=f+R/e.h*e.w),v=v+R,u=I-f/2,m=A-v/2)}break}case"resize-bottom":{if(g===0)e.h+Q>0&&(v+=Q,((a=e.operations)===null||a===void 0?void 0:a.limitRatio)===!0&&(u-=Q/e.h*e.w/2,f+=Q/e.h*e.w));else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){R=ie(R,G);const M=me(g),F=R/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M)}else if(g<180){R=0-ie(R,Y);const M=me(g-90),F=R/2;I=I-F*Math.cos(M),A=A-F*Math.sin(M)}else if(g<270){R=ie(R,Y);const M=me(g-180),F=R/2;I=I+F*Math.sin(M),A=A-F*Math.cos(M)}else if(g<360){R=ie(R,Y);const M=me(g-270),F=R/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M)}v+R>0&&(((s=e.operations)===null||s===void 0?void 0:s.limitRatio)===!0&&(f=f+R/e.h*e.w),v=v+R,u=I-f/2,m=A-v/2)}break}case"resize-left":{if(g===0)e.w-$>0&&(u+=$,f-=$,((c=e.operations)===null||c===void 0?void 0:c.limitRatio)===!0&&(v-=$/e.w*e.h,m+=$/e.w*e.h/2));else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){C=0-ie(C,L);const M=me(g),F=C/2;I=I-F*Math.cos(M),A=A-F*Math.sin(M)}else if(g<180){C=ie(C,L);const M=me(g-90),F=C/2;I=I+F*Math.sin(M),A=A-F*Math.cos(M)}else if(g<270){C=ie(C,k);const M=me(g-180),F=C/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M)}else if(g<360){C=ie(C,k);const M=me(g-270),F=C/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M)}f+C>0&&(((d=e.operations)===null||d===void 0?void 0:d.limitRatio)===!0&&(v=v+C/e.w*e.h),f=f+C,u=I-f/2,m=A-v/2)}break}case"resize-right":{if(g===0)e.w+$>0&&(f+=$,((l=e.operations)===null||l===void 0?void 0:l.limitRatio)===!0&&(m-=$*e.h/e.w/2,v+=$*e.h/e.w));else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){C=ie(C,k);const M=me(g),F=C/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M)}else if(g<180){C=ie(C,Q);const M=me(g-90),F=C/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M)}else if(g<270){C=ie(C,Q);const M=me(g-180),F=C/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M),C=0-C}else if(g<360){C=ie(C,$);const M=me(g-270),F=C/2;I=I+F*Math.sin(M),A=A-F*Math.cos(M)}f+C>0&&(((h=e.operations)===null||h===void 0?void 0:h.limitRatio)===!0&&(v=v+C/e.w*e.h),f=f+C,u=I-f/2,m=A-v/2)}break}case"resize-top-left":{if(g===0)f-$>0&&(u+=$,f-=$),v-Q>0&&(m+=Q,v-=Q);else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){R=0-ie(R,G),C=0-ie(C,S?0-R:L);const M=R/2;I=I+M*Math.sin(y),A=A-M*Math.cos(y);const F=C/2;I=I-F*Math.cos(y),A=A-F*Math.sin(y)}else if(g<180){R=ie(R,Y),C=ie(C,S?R:L);const M=me(g-90),F=R/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M);const Z=C/2;I=I+Z*Math.sin(M),A=A-Z*Math.cos(M)}else if(g<270){R=ie(R,G),C=ie(C,S?R:k);const M=me(g-180),F=R/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M);const Z=C/2;I=I+Z*Math.cos(M),A=A+Z*Math.sin(M)}else if(g<360){R=0-ie(R,Y),C=ie(C,S?R:k);const M=me(g-270),F=R/2;I=I-F*Math.cos(M),A=A-F*Math.sin(M);const Z=C/2;I=I-Z*Math.sin(M),A=A+Z*Math.cos(M)}v+R>0&&(v=v+R),f+C>0&&(f=f+C),u=I-f/2,m=A-v/2}break}case"resize-top-right":{if(g===0)f+$>0&&(f+=$),v-Q>0&&(m+=Q,v-=Q);else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){R=0-ie(R,G),C=ie(C,S?R:k);const M=me(g),F=R/2;I=I+F*Math.sin(M),A=A-F*Math.cos(M);const Z=C/2;I=I+Z*Math.cos(M),A=A+Z*Math.sin(M)}else if(g<180){R=ie(R,Y),C=ie(C,S?R:k);const M=me(g-90),F=R/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M);const Z=C/2;I=I-Z*Math.sin(M),A=A+Z*Math.cos(M)}else if(g<270){const M=me(g-180);R=ie(R,G),C=ie(C,S?R:0-L);const F=R/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M);const Z=C/2;I=I-Z*Math.cos(M),A=A-Z*Math.sin(M)}else if(g<360){R=0-ie(R,Y),C=ie(C,S?R:L);const M=me(g-270),F=R/2;I=I-F*Math.cos(M),A=A-F*Math.sin(M);const Z=C/2;I=I+Z*Math.sin(M),A=A-Z*Math.cos(M)}v+R>0&&(v=v+R),f+C>0&&(f=f+C),u=I-f/2,m=A-v/2}break}case"resize-bottom-left":{if(g===0)e.h+Q>0&&(v+=Q),e.w-$>0&&(u+=$,f-=$);else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){R=ie(R,G),C=0-ie(C,S?0-R:L);const M=me(g),F=R/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M);const Z=C/2;I=I-Z*Math.cos(M),A=A-Z*Math.sin(M)}else if(g<180){R=0-ie(R,Y),C=ie(C,S?R:L);const M=me(g-90),F=R/2;I=I-F*Math.cos(M),A=A-F*Math.sin(M);const Z=C/2;I=I+Z*Math.sin(M),A=A-Z*Math.cos(M)}else if(g<270){R=ie(R,Y),C=ie(C,S?R:k);const M=me(g-180),F=R/2;I=I+F*Math.sin(M),A=A-F*Math.cos(M);const Z=C/2;I=I+Z*Math.cos(M),A=A+Z*Math.sin(M)}else if(g<360){R=ie(R,Y),C=ie(C,S?R:k);const M=me(g-270),F=R/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M);const Z=C/2;I=I-Z*Math.sin(M),A=A+Z*Math.cos(M)}v+R>0&&(v=v+R),f+C>0&&(f=f+C),u=I-f/2,m=A-v/2}break}case"resize-bottom-right":{if(g===0)e.h+Q>0&&(v+=Q),e.w+$>0&&(f+=$);else if(g>0||g<0){let I=p.x,A=p.y;if(g<90){R=ie(R,G),C=ie(C,S?R:k);const M=me(g),F=R/2;I=I-F*Math.sin(M),A=A+F*Math.cos(M);const Z=C/2;I=I+Z*Math.cos(M),A=A+Z*Math.sin(M)}else if(g<180){R=0-ie(R,Y),C=ie(C,S?R:Q);const M=me(g-90),F=R/2;I=I-F*Math.cos(M),A=A-F*Math.sin(M);const Z=C/2;I=I-Z*Math.sin(M),A=A+Z*Math.cos(M)}else if(g<270){R=ie(R,Y),C=ie(C,S?R:0-k);const M=me(g-180),F=R/2;I=I+F*Math.sin(M),A=A-F*Math.cos(M);const Z=C/2;I=I-Z*Math.cos(M),A=A-Z*Math.sin(M)}else if(g<360){R=ie(R,Y),C=ie(C,S?R:L);const M=me(g-270),F=R/2;I=I+F*Math.cos(M),A=A+F*Math.sin(M);const Z=C/2;I=I+Z*Math.sin(M),A=A-Z*Math.cos(M)}v+R>0&&(v=v+R),f+C>0&&(f=f+C),u=I-f/2,m=A-v/2}break}}return{x:u,y:m,w:f,h:v,angle:e.angle}}function nd(e,t){const{x:n,y:o,w:i,h:a,angle:s=0}=e,{center:c,start:d,end:l,viewScaleInfo:h}=t,u=pe(c,{viewScaleInfo:h}),m=ct(s),f=Hc(u,d,l),v=m+Wc(f);return{x:n,y:o,w:i,h:a,angle:v}}function od(e,t){var n;const o=[],i=[],a=[],{viewScaleInfo:s,viewSizeInfo:c,start:d,end:l}=t;if(!(Array.isArray(e.elements)&&d&&l))return{indexes:o,uuids:i,elements:a};const h=Math.min(d.x,l.x),u=Math.max(d.x,l.x),m=Math.min(d.y,l.y),f=Math.max(d.y,l.y);for(let v=0;v<e.elements.length;v++){const g=e.elements[v];if(((n=g==null?void 0:g.operations)===null||n===void 0?void 0:n.locked)===!0)continue;const p=Ye(g,{viewScaleInfo:s}),y=at(p);if(y.x>=h&&y.x<=u&&y.y>=m&&y.y<=f&&(o.push(v),i.push(g.uuid),a.push(g),p.angle&&(p.angle>0||p.angle<0))){const S=Bn(p);if(S.length===4){const E=[S[0].x,S[1].x,S[2].x,S[3].x],w=[S[0].y,S[1].y,S[2].y,S[3].y];p.x=Math.min(...E),p.y=Math.min(...w),p.w=Math.abs(Math.max(...E)-Math.min(...E)),p.h=Math.abs(Math.max(...w)-Math.min(...w))}}}return{indexes:o,uuids:i,elements:a}}function Xi(e,t){var n;if(!Array.isArray(e))return null;const o={x:0,y:0,w:0,h:0},{viewScaleInfo:i}=t;let a=null;for(let s=0;s<e.length;s++){const c=e[s];if(!((n=c==null?void 0:c.operations)===null||n===void 0)&&n.invisible)continue;const d=Ye(c,{viewScaleInfo:i});if(d.angle&&(d.angle>0||d.angle<0)){const l=Bn(d);if(l.length===4){const h=[l[0].x,l[1].x,l[2].x,l[3].x],u=[l[0].y,l[1].y,l[2].y,l[3].y];d.x=Math.min(...h),d.y=Math.min(...u),d.w=Math.abs(Math.max(...h)-Math.min(...h)),d.h=Math.abs(Math.max(...u)-Math.min(...u))}}if(a){const l=Math.min(d.x,o.x),h=Math.min(d.y,o.y),u=Math.max(d.x+d.w,o.x+o.w),m=Math.max(d.y+d.h,o.y+o.h);o.x=l,o.y=h,o.w=Math.abs(u-l),o.h=Math.abs(m-h)}else o.x=d.x,o.y=d.y,o.w=d.w,o.h=d.h;a=d}return o}function id(e,t){var n;if((t==null?void 0:t.type)==="group"&&Array.isArray((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.children))for(let o=0;o<t.detail.children.length;o++){const i=t.detail.children[o];if(e.uuid===i.uuid)return!0}return!1}function ad(e,t,n){let o=t.x-e.x,i=t.y-e.y;const a=[];if(n.forEach(s=>{const{x:c,y:d,w:l,h,angle:u=0}=s;a.push({x:c,y:d,w:l,h,angle:0-u})}),(n==null?void 0:n.length)>0){const s=bi(e,a),c=bi(t,a);o=c.x-s.x,i=c.y-s.y}return{moveX:o,moveY:i}}const Ms=2;function zs(e){return{minX:e.topLeft.x,minY:e.topLeft.y,maxX:e.bottomRight.x,maxY:e.bottomRight.y,midX:e.center.x,midY:e.center.y}}const gn=(e,t)=>{if(e.length===0)throw null;if(e.length===1)return e[0];let n=0,o=e.length-1;for(;n<=o;){const i=Math.floor((n+o)/2);if(e[i]===t)return e[i];e[i]<t?n=i+1:o=i-1}return n>=e.length?e[o]:o<0?e[n]:Math.abs(e[o]-t)<=Math.abs(e[n]-t)?e[o]:e[n]},et=(e,t)=>Math.abs(e-t)<1e-5;function Ui(e,t){var n,o;const{data:i,groupQueue:a,calculator:s,viewScaleInfo:c,viewSizeInfo:d}=t;let l=i.elements||[];(a==null?void 0:a.length)>0&&(l=((o=(n=a[a.length-1])===null||n===void 0?void 0:n.detail)===null||o===void 0?void 0:o.children)||[]);const h=[];l.forEach(_=>{if(_.uuid!==e){const L=s.calcViewRectInfoFromRange(_.uuid,{checkVisible:!0,viewScaleInfo:c,viewSizeInfo:d});L&&h.push(L)}});const u=s.calcViewRectInfoFromRange(e,{viewScaleInfo:c,viewSizeInfo:d});if(!u)return null;const m={},f={},v={},g={},p=[],y=[];let S=[],E=[];const w=zs(u);m[w.minX]=[w.minY,w.midY,w.maxY],m[w.midX]=[w.minY,w.midY,w.maxY],m[w.maxX]=[w.minY,w.midY,w.maxY],f[w.minY]=[w.minX,w.midX,w.maxX],f[w.midY]=[w.minX,w.midX,w.maxX],f[w.maxY]=[w.minX,w.midX,w.maxX],h.forEach(_=>{const L=zs(_);v[L.minX]||(v[L.minX]=[]),v[L.midX]||(v[L.midX]=[]),v[L.maxX]||(v[L.maxX]=[]),g[L.minY]||(g[L.minY]=[]),g[L.midY]||(g[L.midY]=[]),g[L.maxY]||(g[L.maxY]=[]),v[L.minX]=[L.minY,L.midY,L.maxY],v[L.midX]=[L.minY,L.midY,L.maxY],v[L.maxX]=[L.minY,L.midY,L.maxY],S.push(L.minX),S.push(L.midX),S.push(L.maxX),g[L.minY]=[L.minX,L.midX,L.maxX],g[L.midY]=[L.minX,L.midX,L.maxX],g[L.maxY]=[L.minX,L.midX,L.maxX],E.push(L.minY),E.push(L.midY),E.push(L.maxY)}),S=S.sort((_,L)=>_-L),E=E.sort((_,L)=>_-L);let D=null,b=null,x=null,j=null,P=null,z=null,V=null,O=null;if(S.length>0){x=gn(S,w.minX),j=gn(S,w.midX),P=gn(S,w.maxX);const _=Math.abs(x-w.minX),L=Math.abs(j-w.midX),k=Math.abs(P-w.maxX),C=Math.min(_,L,k);C<=Ms/c.scale&&(et(C,_)?D=x-w.minX:et(C,L)?D=j-w.midX:et(C,k)&&(D=P-w.maxX))}if(E.length>0){z=gn(E,w.minY),V=gn(E,w.midY),O=gn(E,w.maxY);const _=Math.abs(z-w.minY),L=Math.abs(V-w.midY),k=Math.abs(O-w.maxY),C=Math.min(_,L,k);C<=Ms/c.scale&&(et(C,_)?b=z-w.minY:et(C,L)?b=V-w.midY:et(C,k)&&(b=O-w.maxY))}const N=Object.assign({},w);if(D!==null&&(N.minX+=D,N.midX+=D,N.maxX+=D),b!==null&&(N.minY+=b,N.midY+=b,N.maxY+=b),xe.x(D)&&D!==null&&x!==null&&j!==null&&P!==null){if(et(D,x-w.minX)){const _={x,yList:[]};_.yList.push(N.minY),_.yList.push(N.maxY),_.yList.push(...(g==null?void 0:g[x])||[]),p.push(_)}if(et(D,j-w.minX)){const _={x:j,yList:[]};_.yList.push(N.minY),_.yList.push(N.maxY),_.yList.push(...(g==null?void 0:g[j])||[]),p.push(_)}if(et(D,P-w.minX)){const _={x:P,yList:[]};_.yList.push(N.minY),_.yList.push(N.maxY),_.yList.push(...(g==null?void 0:g[P])||[]),p.push(_)}}if(xe.y(b)&&b!==null&&z!==null&&V!==null&&O!==null){if(et(b,z-w.minY)){const _={y:z,xList:[]};_.xList.push(N.minX),_.xList.push(N.maxX),_.xList.push(...(v==null?void 0:v[z])||[]),y.push(_)}if(et(b,V-w.midY)){const _={y:V,xList:[]};_.xList.push(N.minX),_.xList.push(N.maxX),_.xList.push(...(v==null?void 0:v[z])||[]),y.push(_)}if(et(b,O-w.maxY)){const _={y:O,xList:[]};_.xList.push(N.minX),_.xList.push(N.maxX),_.xList.push(...(v==null?void 0:v[O])||[]),y.push(_)}}const B=[];(p==null?void 0:p.length)>0&&p.forEach((_,L)=>{B.push([]),_.yList.forEach(k=>{B[L].push({x:_.x,y:k})})});const H=[];return(y==null?void 0:y.length)>0&&y.forEach((_,L)=>{H.push([]),_.xList.forEach(k=>{H[L].push({x:k,y:_.y})})}),{offsetX:D,offsetY:b,yLines:B,xLines:H}}const zi="@middleware/text-edit",fa="@middleware/text-change",sd=cn(),Is=e=>{const{eventHub:t,boardContent:n,viewer:o,sharer:i}=e,a=n.boardContext.canvas,s=document.createElement("div");s.setAttribute("contenteditable","true");const c=document.createElement("div"),d=e.container||document.body,l=document.createElement("div");let h=null,u=[];c.appendChild(s),c.style.position="absolute",l.appendChild(c),l.style.position="fixed",l.style.top="0",l.style.bottom="0",l.style.left="0",l.style.right="0",l.style.display="none",d.appendChild(l);const m=E=>{y(),p(E),l.style.display="block",h!=null&&h.uuid&&(i.setActiveOverrideElemenentMap({[h.uuid]:{operations:{invisible:!0}}}),o.drawFrame())},f=()=>{if(h!=null&&h.uuid){const E=i.getActiveOverrideElemenentMap();E&&delete E[h.uuid],i.setActiveOverrideElemenentMap(E),o.drawFrame()}l.style.display="none",h=null,u=[]},v=()=>{const E=a.getBoundingClientRect(),{left:w,top:D,width:b,height:x}=E;return{left:w,top:D,width:b,height:x}},g=E=>{const{size:w,parent:D}=E,b=document.createElement("div"),{x,y:j,w:P,h:z}=w,V=ct(w.angle||0);return b.style.position="absolute",b.style.left=`${x}px`,b.style.top=`${j}px`,b.style.width=`${P}px`,b.style.height=`${z}px`,b.style.transform=`rotate(${V}deg)`,D.appendChild(b),b},p=E=>{const{viewScaleInfo:w,element:D,groupQueue:b}=E,{scale:x,offsetTop:j,offsetLeft:P}=w;c.children&&Array.from(c.children).forEach(k=>{k.remove()});let z=c;for(let k=0;k<b.length;k++){const C=b[k],{x:Y,y:G,w:R,h:$}=C,Q=ct(C.angle||0),I={x:Y*x,y:G*x,w:R*x,h:$*x,angle:Q};k===0&&(I.x+=P,I.y+=j),z=g({size:I,parent:z})}const V=Object.assign(Object.assign({},sd),D.detail);let O=D.x*x+P,N=D.y*x+j,B=D.w*x,H=D.h*x;b.length>0&&(O=D.x*x,N=D.y*x,B=D.w*x,H=D.h*x);let _="center",L="center";V.textAlign==="left"?_="start":V.textAlign==="right"&&(_="end"),V.verticalAlign==="top"?L="start":V.verticalAlign==="bottom"&&(L="end"),s.style.display="inline-flex",s.style.justifyContent=_,s.style.alignItems=L,s.style.position="absolute",s.style.left=`${O-1}px`,s.style.top=`${N-1}px`,s.style.width=`${B+2}px`,s.style.height=`${H+2}px`,s.style.transform=`rotate(${ct(D.angle||0)}deg)`,s.style.boxSizing="border-box",s.style.border="1px solid #1973ba",s.style.resize="none",s.style.overflow="hidden",s.style.wordBreak="break-all",s.style.borderRadius=`${(typeof V.borderRadius=="number"?V.borderRadius:0)*x}px`,s.style.background=`${V.background||"transparent"}`,s.style.color=`${V.color||"#333333"}`,s.style.fontSize=`${V.fontSize*x}px`,s.style.lineHeight=`${(V.lineHeight||V.fontSize)*x}px`,s.style.fontFamily=Ar(V.fontFamily),s.style.fontWeight=`${V.fontWeight}`,s.style.padding="0",s.style.margin="0",s.style.outline="none",s.innerText=V.text||"",z.appendChild(s)},y=()=>{const{left:E,top:w,width:D,height:b}=v();c.style.position="absolute",c.style.overflow="hidden",c.style.top=`${w}px`,c.style.left=`${E}px`,c.style.width=`${D}px`,c.style.height=`${b}px`};l.addEventListener("click",()=>{f()}),s.addEventListener("click",E=>{E.stopPropagation()}),s.addEventListener("input",()=>{h&&u&&(h.detail.text=s.innerText||"",t.trigger(fa,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u||[]]}),o.drawFrame())}),s.addEventListener("blur",()=>{h&&u&&t.trigger(fa,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u]}),f()}),s.addEventListener("keydown",E=>{E.stopPropagation()}),s.addEventListener("keypress",E=>{E.stopPropagation()}),s.addEventListener("keyup",E=>{E.stopPropagation()}),s.addEventListener("wheel",E=>{E.stopPropagation(),E.preventDefault()});const S=E=>{var w;E!=null&&E.position&&(E!=null&&E.element)&&((w=E==null?void 0:E.element)===null||w===void 0?void 0:w.type)==="text"&&(h=E.element,u=E.position),m(E)};return{name:"@middleware/text-editor",use(){t.on(zi,S)},disuse(){t.off(zi,S)}}},Eo="LAYOUT_SELECT",Gt=Symbol(`${Eo}_layoutActionType`),Do=Symbol(`${Eo}_layoutControlType`),Po=Symbol(`${Eo}_layoutController`),vn=Symbol(`${Eo}_layoutIsHover`),wt=Symbol(`${Eo}_layoutIsSelected`),Xn=10,rd={activeColor:"#b331c9"};function Lo(e,t,n){const{activeColor:o}=n;e.setLineDash([]),e.fillStyle="#FFFFFF",e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.fill(),e.strokeStyle=o,e.lineWidth=2,e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Oo(e,t){const{start:n,end:o,style:i}=t,{activeColor:a}=i,s=2,c=a;e.setLineDash([]),e.strokeStyle=c,e.lineWidth=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,o.y),e.closePath(),e.stroke()}function ld(e,t){const{controller:n,style:o}=t,{topLeft:i,topRight:a,bottomLeft:s,bottomRight:c,topMiddle:d,rightMiddle:l,bottomMiddle:h,leftMiddle:u}=n;Oo(e,{start:i.center,end:a.center,centerVertexes:d.vertexes,style:o}),Oo(e,{start:a.center,end:c.center,centerVertexes:l.vertexes,style:o}),Oo(e,{start:c.center,end:s.center,centerVertexes:h.vertexes,style:o}),Oo(e,{start:s.center,end:i.center,centerVertexes:u.vertexes,style:o}),Lo(e,i.vertexes,o),Lo(e,a.vertexes,o),Lo(e,c.vertexes,o),Lo(e,s.vertexes,o)}function cd(e,t){const{layoutSize:n,style:o}=t,{activeColor:i}=o,{x:a,y:s,w:c,h:d}=n;e.setLineDash([]),e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.moveTo(a,s),e.lineTo(a+c,s),e.lineTo(a+c,s+d),e.lineTo(a,s+d),e.lineTo(a,s),e.closePath(),e.stroke()}const As=(e,t)=>{const{sharer:n,boardContent:o,calculator:i,viewer:a,eventHub:s}=e,{overlayContext:c}=o,d=Object.assign(Object.assign({},rd),t),{activeColor:l}=d,h={activeColor:l};let u=null,m=null,f=null,v=null;const g=()=>{u=null,n.setSharedStorage(Gt,null),n.setSharedStorage(Do,null),n.setSharedStorage(Po,null),n.setSharedStorage(vn,null),n.setSharedStorage(wt,null),m=null,f=null,v=null},p=()=>n.getSharedStorage(ut)?(g(),!0):!1,y=()=>{const x=n.getSharedStorage(Ee);return x&&x!=="area"?(g(),!0):!1},S=()=>{const x=n.getActiveStorage("data");if(x!=null&&x.layout){const{x:j,y:P,w:z,h:V}=x.layout;return{x:j,y:P,w:z,h:V}}return null},E=x=>{const j=S();if(j){const{x:P,y:z,w:V,h:O}=j,N=n.getActiveViewScaleInfo(),B=Ye({x:P-Xn/2,y:z-Xn/2,w:V+Xn,h:O+Xn},{viewScaleInfo:N});return Zc(x,B)}return!1},w=()=>{const x=n.getActiveViewScaleInfo(),j=S();if(j){const P=Ka(j,{viewScaleInfo:x,controllerSize:10});n.setSharedStorage(Po,P)}else n.setSharedStorage(Po,null)},D=x=>{const j=n.getActiveStorage("data"),P=n.getSharedStorage(Po);if(P&&(j!=null&&j.layout)&&(x!=null&&x.point)){let z=null;if(P){const{topLeft:V,top:O,topRight:N,right:B,bottomRight:H,bottom:_,bottomLeft:L,left:k}=P,C=[V,O,N,B,H,_,L,k];for(let Y=0;Y<C.length;Y++){const G=C[Y];if(wr(x.point,G.vertexes)){z=`${G.type}`;break}}if(z)return n.setSharedStorage(Do,z),s.trigger(Mi,{}),z}}return null},b=x=>{v!==!0&&s.trigger("cursor",{type:x&&`resize-${x}`,groupQueue:[],element:S()})};return{name:"@middleware/layout-selector",use:()=>{g(),w()},hover:x=>{if(v!==!0&&!y()&&!p()){if(E(x.point)?n.setSharedStorage(vn,!0):(n.setSharedStorage(vn,!1),m===!0&&(a.drawFrame(),m=!1)),n.getSharedStorage(wt)===!0){const j=n.getSharedStorage(Gt),P=n.getActiveStorage("data");if(P!=null&&P.layout)if(j!=="resize"){w();const z=D(x);z?b(z):(b(),n.setSharedStorage(Gt,null))}else{const z=D(x);b(z)}return}n.getSharedStorage(vn)&&!m&&a.drawFrame(),m=n.getSharedStorage(vn)}},pointStart:x=>{if(y())return;E(x.point)?n.setSharedStorage(wt,!0):(f===!0&&(g(),a.drawFrame()),n.setSharedStorage(wt,!1)),w();const j=D(x);u=x.point,j&&n.setSharedStorage(Gt,"resize"),n.getSharedStorage(wt)===!0&&!f&&a.drawFrame(),f=n.getSharedStorage(wt)},pointMove:x=>{if(!n.getSharedStorage(wt)&&y())return;const j=n.getSharedStorage(Gt),P=n.getSharedStorage(Do),z=n.getActiveStorage("data");if(j==="resize"&&P&&(z!=null&&z.layout)){if(u){v=!0;const V=n.getActiveStorage("scale"),O=x.point.x-u.x,N=x.point.y-u.y,B=O/V,H=N/V,{x:_,y:L,w:k,h:C,operations:Y={}}=z.layout,{position:G="absolute"}=Y;P==="top"?G==="relative"?(z.layout.h=i.toGridNum(C-H),a.scroll({moveY:N})):(z.layout.y=i.toGridNum(L+H),z.layout.h=i.toGridNum(C-H)):P==="right"?z.layout.w=i.toGridNum(k+B):P==="bottom"?z.layout.h=i.toGridNum(C+H):P==="left"?G==="relative"?(z.layout.w=i.toGridNum(k-B),a.scroll({moveX:O})):(z.layout.x=i.toGridNum(_+B),z.layout.w=i.toGridNum(k-B)):P==="top-left"?G==="relative"?(z.layout.w=i.toGridNum(k-B),z.layout.h=i.toGridNum(C-H),a.scroll({moveX:O,moveY:N})):(z.layout.x=i.toGridNum(_+B),z.layout.y=i.toGridNum(L+H),z.layout.w=i.toGridNum(k-B),z.layout.h=i.toGridNum(C-H)):P==="top-right"?G==="relative"?(a.scroll({moveY:N}),z.layout.w=i.toGridNum(k+B),z.layout.h=i.toGridNum(C-H)):(z.layout.y=i.toGridNum(L+H),z.layout.w=i.toGridNum(k+B),z.layout.h=i.toGridNum(C-H)):P==="bottom-right"?(z.layout.w=i.toGridNum(k+B),z.layout.h=i.toGridNum(C+H)):P==="bottom-left"&&(G==="relative"?(a.scroll({moveX:O}),z.layout.w=i.toGridNum(k-B),z.layout.h=i.toGridNum(C+H)):(z.layout.x=i.toGridNum(_+B),z.layout.w=i.toGridNum(k-B),z.layout.h=i.toGridNum(C+H)))}return u=x.point,w(),a.drawFrame(),!1}if(["resize"].includes(j))return!1},pointEnd:()=>{v=!1;const x=n.getSharedStorage(Gt),j=n.getSharedStorage(Do),P=n.getActiveStorage("data");P&&x==="resize"&&j&&s.trigger(Ta,{type:"changeLayout",data:P})},beforeDrawFrame:({snapshot:x})=>{var j;if(y())return;const{sharedStore:P,activeStore:z}=x,V=P[Gt],O=P[vn],N=P[wt];if(!((j=z.data)===null||j===void 0)&&j.layout){const{x:B,y:H,w:_,h:L}=z.data.layout,k=wo(x),C={x:B,y:H,w:_,h:L},Y=Ka(C,{viewScaleInfo:k,controllerSize:Xn});if(O===!0){const G=Ye(C,{viewScaleInfo:k});cd(c,{layoutSize:G,style:h})}(V&&["resize"].includes(V)||N===!0)&&ld(c,{controller:Y,style:h})}},scrollX:()=>{g()},scrollY:()=>{g()},wheelScale:()=>{g()}}},Ts=(e,t)=>{const n=Object.assign(Object.assign({},Q0),t),{activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s}=n,c={activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s},{viewer:d,sharer:l,boardContent:h,calculator:u,eventHub:m}=e,{overlayContext:f}=h;let v=null,g=null,p=null,y=null;l.setSharedStorage(Ee,null),l.setSharedStorage(To,!0);const S=()=>l.getSharedStorage(Lt),E=O=>{let N=l.getSharedStorage(Qe);Array.isArray(N)||(N=[]),N.length>0?id(O,N[N.length-1])?N.push(O):N=[]:N.length===0&&N.push(O);const B=Ia(N);return l.setSharedStorage(Qe,N),l.setSharedStorage($i,B),N.length>0},w=O=>{l.setSharedStorage(ut,O);let N=null;O&&(N=vo(O,{groupQueue:l.getSharedStorage(Qe)})),l.setSharedStorage(Yn,N)},D=(O,N)=>{var B;if(l.setSharedStorage(Lt,O),O.length===1){const H=zo(O[0],{groupQueue:l.getSharedStorage(Qe),controllerSize:Zr,viewScaleInfo:l.getActiveViewScaleInfo()});l.setSharedStorage(mn,H),l.setSharedStorage(fn,ht(O[0].uuid,((B=l.getActiveStorage("data"))===null||B===void 0?void 0:B.elements)||[]))}else l.setSharedStorage(mn,null),l.setSharedStorage(fn,[]);(N==null?void 0:N.triggerEvent)===!0&&m.trigger(hi,{uuids:O.map(H=>H.uuid)})},b=()=>({ctx:f,calculator:u,data:l.getActiveStorage("data"),selectedElements:S(),viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Qe),areaSize:null,selectedElementController:l.getSharedStorage(mn),selectedElementPosition:l.getSharedStorage(fn)}),x=()=>{l.setSharedStorage(Ee,null),l.setSharedStorage(Ht,null),l.setSharedStorage(Gn,null),l.setSharedStorage(Io,null),l.setSharedStorage(Qe,[]),l.setSharedStorage($i,[]),l.setSharedStorage(ut,null),l.setSharedStorage(Yn,null),l.setSharedStorage(Lt,[]),l.setSharedStorage(G0,null),l.setSharedStorage(mn,null),l.setSharedStorage(fn,[]),l.setSharedStorage(Ao,null)};x();const j=({uuids:O,positions:N})=>{let B=[];const H=l.getSharedStorage(Ee),_=l.getActiveStorage("data");N&&Array.isArray(N)?B=pr(N,(_==null?void 0:_.elements)||[]):B=Qo(O,(_==null?void 0:_.elements)||[]);let L=!1;if(!H&&B.length===1?(l.setSharedStorage(Ee,"select"),L=!0):H==="select"&&B.length===1&&(L=!0),L){const k=B[0],C=za(k.uuid,(_==null?void 0:_.elements)||[]);l.setSharedStorage(Qe,C),D(B),d.drawFrame()}},P=()=>{x(),d.drawFrame()},z=O=>{l.setSharedStorage(To,!!O.enable)},V=O=>{l.setSharedStorage(ys,!!O.enable)};return{name:"@middleware/selector",use(){m.on(hi,j),m.on(Mi,P),m.on(da,V),m.on(ua,z)},disuse(){m.off(hi,j),m.off(Mi,P),m.off(da,V),m.off(ua,z)},hover:O=>{var N,B,H,_,L;const k=l.getSharedStorage(wt),C=l.getSharedStorage(Ht),Y=l.getSharedStorage(Ee),G=l.getSharedStorage(Qe),R=M=>{if(k===!0)return;const F=M.type;y===null&&m.trigger("cursor",{type:F,groupQueue:M.groupQueue,element:M.elements[0]})};if((G==null?void 0:G.length)>0){if(!xs(O.point,{ctx:f,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:l.getSharedStorage(Qe)})){w(null),d.drawFrame();return}const F=$n(O.point,b());if(R(F),C||["area","drag","drag-list"].includes(Y)){w(null),d.drawFrame();return}if(((N=F==null?void 0:F.elements)===null||N===void 0?void 0:N.length)===1){w(F.elements[0]),d.drawFrame();return}w(null),d.drawFrame();return}if(C||["area","drag","drag-list"].includes(Y)){w(null);return}if(Y==="drag"){w(null);return}const $=S(),Q=l.getActiveViewScaleInfo(),I=l.getActiveViewSizeInfo(),A=$n(O.point,Object.assign(Object.assign({},b()),{areaSize:Xi($,{viewScaleInfo:Q,viewSizeInfo:I,calculator:u})}));if(R(A),A.type===null){(l.getSharedStorage(ut)||l.getSharedStorage(Yn))&&(l.setSharedStorage(ut,null),l.setSharedStorage(Yn,null),d.drawFrame());return}if(!(A.type==="over-element"&&l.getSharedStorage(Ee)==="select"&&A.elements.length===1&&A.elements[0].uuid===((H=(B=S())===null||B===void 0?void 0:B[0])===null||H===void 0?void 0:H.uuid))&&!(A.type==="over-element"&&l.getSharedStorage(Ee)===null&&A.elements.length===1&&A.elements[0].uuid===((_=l.getSharedStorage(ut))===null||_===void 0?void 0:_.uuid))){if(A.type==="over-element"&&((L=A==null?void 0:A.elements)===null||L===void 0?void 0:L.length)===1){w(A.elements[0]),d.drawFrame();return}if(l.getSharedStorage(ut)){w(null),d.drawFrame();return}}},pointStart:O=>{var N,B,H,_,L,k,C,Y,G,R,$,Q;v=O.point,g=O.point;const I=l.getSharedStorage(Qe);if((I==null?void 0:I.length)>0){if(xs(O.point,{ctx:f,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),groupQueue:I})){const Z=$n(O.point,b());if(((N=Z==null?void 0:Z.elements)===null||N===void 0?void 0:N.length)===1&&((H=(B=Z.elements[0])===null||B===void 0?void 0:B.operations)===null||H===void 0?void 0:H.locked)===!0)return;w(null),((_=Z==null?void 0:Z.elements)===null||_===void 0?void 0:_.length)===1&&(p=on(Z==null?void 0:Z.elements[0])),Z.type==="over-element"&&((L=Z==null?void 0:Z.elements)===null||L===void 0?void 0:L.length)===1?(D([Z.elements[0]],{triggerEvent:!0}),l.setSharedStorage(Ee,"drag")):!((k=Z.type)===null||k===void 0)&&k.startsWith("resize-")?(l.setSharedStorage(Ht,Z.type),l.setSharedStorage(Ee,"resize")):D([],{triggerEvent:!0})}else x();d.drawFrame();return}const A=Xi(S(),{viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo(),calculator:u}),M=$n(O.point,Object.assign(Object.assign({},b()),{areaSize:A,groupQueue:[]})),F=((C=M==null?void 0:M.elements)===null||C===void 0?void 0:C.length)===1&&((G=(Y=M.elements[0])===null||Y===void 0?void 0:Y.operations)===null||G===void 0?void 0:G.locked)===!0;F||w(null),((R=M==null?void 0:M.elements)===null||R===void 0?void 0:R.length)===1&&(p=on(M==null?void 0:M.elements[0])),F?(x(),l.setSharedStorage(Ee,"area"),l.setSharedStorage(Gn,O.point),D([],{triggerEvent:!0})):M.type==="list-area"?l.setSharedStorage(Ee,"drag-list"):M.type==="over-element"&&(($=M==null?void 0:M.elements)===null||$===void 0?void 0:$.length)===1?(D([M.elements[0]],{triggerEvent:!0}),l.setSharedStorage(Ee,"drag")):!((Q=M.type)===null||Q===void 0)&&Q.startsWith("resize-")?(l.setSharedStorage(Ht,M.type),l.setSharedStorage(Ee,"resize")):(x(),l.setSharedStorage(Ee,"area"),l.setSharedStorage(Gn,O.point),D([],{triggerEvent:!0})),d.drawFrame()},pointMove:O=>{var N,B,H;l.setSharedStorage(Ao,!0);const _=l.getActiveStorage("data"),L=S(),k=l.getActiveStorage("scale")||1,C=l.getActiveViewScaleInfo(),Y=l.getActiveViewSizeInfo(),G=v,R=g,$=O.point,Q=l.getSharedStorage(Ht),I=l.getSharedStorage(Ee),A=l.getSharedStorage(Qe),M=l.getSharedStorage(To);if(I==="drag"){if(y="drag",_&&(L==null?void 0:L.length)===1&&p&&R&&$&&((B=(N=L[0])===null||N===void 0?void 0:N.operations)===null||B===void 0?void 0:B.locked)!==!0){const{moveX:F,moveY:Z}=ad(R,$,A);let se=u.toGridNum(F/k),re=u.toGridNum(Z/k);if(M===!0){const X=Ui(L[0].uuid,{calculator:u,data:_,groupQueue:A,viewScaleInfo:C,viewSizeInfo:Y});try{X&&(xe.x(X.offsetX)&&X.offsetX!==null&&(se=u.toGridNum(se+X.offsetX)),xe.y(X.offsetY)&&X.offsetY!==null&&(re=u.toGridNum(re+X.offsetY)))}catch(J){console.error(J)}}L[0].x=u.toGridNum(p.x+se),L[0].y=u.toGridNum(p.y+re),D([L[0]]),u.modifyViewVisibleInfoMap(_,{modifyOptions:{type:"updateElement",content:{element:L[0],position:l.getSharedStorage(fn)||[]}},viewSizeInfo:Y,viewScaleInfo:C})}d.drawFrame()}else if(I==="drag-list"){if(y="drag-list",_&&R&&G&&$&&(L==null?void 0:L.length)>1){const F=($.x-G.x)/k,Z=($.y-G.y)/k;L.forEach(se=>{var re;se&&((re=se==null?void 0:se.operations)===null||re===void 0?void 0:re.locked)!==!0&&(se.x=u.toGridNum(se.x+F),se.y=u.toGridNum(se.y+Z),u.modifyViewVisibleInfoMap(_,{modifyOptions:{type:"updateElement",content:{element:se,position:ht(se.uuid,_.elements)||[]}},viewSizeInfo:Y,viewScaleInfo:C}))}),l.setActiveStorage("data",_)}d.drawFrame()}else if(I==="resize"){if(_&&(L==null?void 0:L.length)===1&&R&&p&&(Q!=null&&Q.startsWith("resize-"))){y="resize";const F=[];A.forEach(re=>{const{x:X,y:J,w:ae,h:le,angle:Ue=0}=re;F.push({x:X,y:J,w:ae,h:le,angle:0-Ue})});let Z=R,se=$;if(A.length>0&&(Z=bi(R,F),se=bi($,F)),Q==="resize-rotate"){const re=l.getSharedStorage(mn),X=[re.topLeft.center,re.topRight.center,re.bottomLeft.center,re.bottomRight.center],J=ur(X),ae=nd(p,{center:J,viewScaleInfo:C,viewSizeInfo:Y,start:R,end:$,resizeType:Q,sharer:l});L[0].angle=u.toGridNum(ae.angle||0)}else{const re=td(p,{scale:k,start:Z,end:se,resizeType:Q,sharer:l}),X={ignore:!!p.angle};L[0].x=u.toGridNum(re.x,X),L[0].y=u.toGridNum(re.y,X),L[0].type==="group"&&((H=L[0].operations)===null||H===void 0?void 0:H.deepResize)===!0?Mr(L[0],{w:u.toGridNum(re.w,X),h:u.toGridNum(re.h,X)}):(L[0].w=u.toGridNum(re.w,X),L[0].h=u.toGridNum(re.h,X))}D([L[0]]),u.modifyViewVisibleInfoMap(_,{modifyOptions:{type:"updateElement",content:{element:L[0],position:l.getSharedStorage(fn)||[]}},viewSizeInfo:Y,viewScaleInfo:C}),d.drawFrame()}}else I==="area"&&(y="area",l.setSharedStorage(Io,O.point),d.drawFrame());v=O.point},pointEnd(O){y=null,l.setSharedStorage(Ao,!1);const N=l.getActiveStorage("data"),B=l.getSharedStorage(Lt),H=l.getSharedStorage(ut),_=l.getSharedStorage(Ht),L=l.getSharedStorage(Ee),k=l.getActiveViewSizeInfo();let C=!1;if(v=null,g=null,p=null,L==="resize"&&_)l.setSharedStorage(Ht,null),C=!0;else if(L==="area"){if(l.setSharedStorage(Ee,null),N){const G=l.getSharedStorage(Gn),R=l.getSharedStorage(Io);if(G&&R){const{elements:$}=od(N,{start:G,end:R,calculator:u,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()});$.length>0&&(l.setSharedStorage(Ee,"drag-list"),D($,{triggerEvent:!0}),C=!0)}}}else L==="drag-list"?(l.setSharedStorage(Ee,"drag-list-end"),C=!0):N&&(u.getPointElement(O.point,{data:N,viewScaleInfo:l.getActiveViewScaleInfo(),viewSizeInfo:l.getActiveViewSizeInfo()}).element?(l.setSharedStorage(Ee,"select"),C=!0):l.setSharedStorage(Ee,null));l.getSharedStorage(Ee)===null&&(x(),C=!0),(()=>{if(C){if(N&&Array.isArray(N==null?void 0:N.elements)&&["drag","drag-list"].includes(L)){const G=Gc(N.elements,k,{extend:!0});l.setActiveStorage("contextHeight",G.contextSize.contextHeight),l.setActiveStorage("contextWidth",G.contextSize.contextWidth)}N&&["drag","drag-list","drag-list-end","resize"].includes(L)&&m.trigger(Ta,{data:N,type:"dragElement",selectedElements:B,hoverElement:H}),d.drawFrame()}})()},pointLeave(){v=null,g=null,p=null,x(),d.drawFrame()},doubleClick(O){var N,B,H,_,L,k,C,Y;if(l.getSharedStorage(ys)===!1)return;const G=$n(O.point,b());if(l.setSharedStorage(mn,null),l.setSharedStorage(Lt,[]),!(G.elements.length===1&&((B=(N=G.elements[0])===null||N===void 0?void 0:N.operations)===null||B===void 0?void 0:B.locked)===!0)){if(G.elements.length===1&&((H=G.elements[0])===null||H===void 0?void 0:H.type)==="group"){if(E(G.elements[0])===!0){l.setSharedStorage(Ee,null),d.drawFrame();return}}else G.elements.length===1&&((_=G.elements[0])===null||_===void 0?void 0:_.type)==="text"&&!(!((k=(L=G.elements[0])===null||L===void 0?void 0:L.operations)===null||k===void 0)&&k.invisible)&&m.trigger(zi,{element:G.elements[0],groupQueue:l.getSharedStorage(Qe)||[],position:ht((C=G.elements[0])===null||C===void 0?void 0:C.uuid,((Y=l.getActiveStorage("data"))===null||Y===void 0?void 0:Y.elements)||[]),viewScaleInfo:l.getActiveViewScaleInfo()});l.setSharedStorage(Ee,null)}},beforeDrawFrame({snapshot:O}){var N;const{activeStore:B,sharedStore:H}=O,{scale:_,offsetLeft:L,offsetTop:k,offsetRight:C,offsetBottom:Y,width:G,height:R,contextHeight:$,contextWidth:Q,devicePixelRatio:I}=B,A=e.sharer,M={scale:_,offsetLeft:L,offsetTop:k,offsetRight:C,offsetBottom:Y},F={width:G,height:R,contextHeight:$,contextWidth:Q,devicePixelRatio:I},se=H[Lt][0],re=H[ut],X=H[Yn],J=H[Ee],ae=H[Gn],le=H[Io],Ue=H[Qe],Tl=H[$i],_a=H[Ao],Va=H[To],Wt={calculator:u,viewScaleInfo:M,viewSizeInfo:F,style:c},Ba=se?zo(se,{groupQueue:Ue,controllerSize:10,viewScaleInfo:M}):null,Co=!!(!((N=re==null?void 0:re.operations)===null||N===void 0)&&N.locked);if((Ue==null?void 0:Ue.length)>0){if(ed(f,Tl,Wt),re&&J!=="drag"&&(Co?Ss(f,X,Object.assign(Object.assign({},Wt),{controller:zo(re,{groupQueue:Ue,controllerSize:10,viewScaleInfo:M}),style:c})):bs(f,X,Wt)),!Co&&se&&["select","drag","resize"].includes(J)&&(Es(f,Ba,Object.assign(Object.assign({},Wt),{element:se,calculator:u,hideControllers:!!_a&&J==="drag",style:c})),J==="drag"&&Va===!0)){const zt=Ui(se.uuid,{calculator:u,data:B.data,groupQueue:Ue,viewScaleInfo:M,viewSizeInfo:F});if(zt){const{offsetX:Ri,offsetY:ki,xLines:ji,yLines:_i}=zt;(Ri===0||ki===0)&&Cs(f,{xLines:ji,yLines:_i,style:c})}}}else if(re&&J!=="drag"&&(Co?Ss(f,X,Object.assign(Object.assign({},Wt),{controller:zo(re,{groupQueue:Ue,controllerSize:10,viewScaleInfo:M}),style:c})):bs(f,X,Wt)),!Co&&se&&["select","drag","resize"].includes(J)){if(Es(f,Ba,Object.assign(Object.assign({},Wt),{element:se,calculator:u,hideControllers:!!_a&&J==="drag",style:c})),J==="drag"&&Va===!0){const zt=Ui(se.uuid,{calculator:u,data:B.data,groupQueue:Ue,viewScaleInfo:M,viewSizeInfo:F});if(zt){const{offsetX:Ri,offsetY:ki,xLines:ji,yLines:_i}=zt;(Ri===0||ki===0)&&Cs(f,{xLines:ji,yLines:_i,style:c})}}}else if(J==="area"&&ae&&le)K0(f,{start:ae,end:le,style:c});else if(["drag-list","drag-list-end"].includes(J)){const zt=Xi(S(),{viewScaleInfo:A.getActiveViewScaleInfo(),viewSizeInfo:A.getActiveViewSizeInfo(),calculator:u});zt&&q0(f,{areaSize:zt,style:c})}}}},un="SCROLL",mi=Symbol(`${un}_xThumbRect`),fi=Symbol(`${un}_yThumbRect`),io=Symbol(`${un}_hoverXThumbRect`),ao=Symbol(`${un}_hoverYThumbRect`),Ln=Symbol(`${un}_prevPoint`),ga=Symbol(`${un}_activePoint`),so=Symbol(`${un}_activeThumbType`),dd={thumbBackground:"#0000003A",thumbBorderColor:"#0000008A",hoverThumbBackground:"#0000005F",hoverThumbBorderColor:"#000000EE",activeThumbBackground:"#0000005E",activeThumbBorderColor:"#000000F0"},Qr=16,ud=Qr*2.5;function Ns(e,t,n){const o=e,{x:i,y:a,w:s,h:c}=n;return o.beginPath(),o.rect(i,a,s,c),o.closePath(),!!o.isPointInPath(t.x,t.y)}function hd(e,t,n){let o=null;const{xThumbRect:i,yThumbRect:a}=n;return i&&Ns(e,t,i)?o="X":a&&Ns(e,t,a)&&(o="Y"),o}function md(e){const{sharedStore:t}=e;return{activePoint:t[ga]||null,prevPoint:t[Ln]||null,activeThumbType:t[so]||null,xThumbRect:t[mi]||null,yThumbRect:t[fi]||null,hoverXThumb:t[io],hoverYThumb:t[ao]}}function fd(e){const{viewScaleInfo:t,viewSizeInfo:n,hoverXThumb:o,hoverYThumb:i,style:a}=e,{width:s,height:c}=n,{offsetTop:d,offsetBottom:l,offsetLeft:h,offsetRight:u}=t,m=ud,f=Qr,{thumbBackground:v,thumbBorderColor:g,hoverThumbBackground:p,hoverThumbBorderColor:y}=a;let S=0,E=0;S=Math.max(m,s-f*2-(Math.abs(h)+Math.abs(u))),S>=s&&(S=s),E=Math.max(m,c-f*2-(Math.abs(d)+Math.abs(l))),E>=c&&(E=c);const w=f,D=s-S-f;let b=w;h>0?b=w:u>0?b=D:h<=0&&S>0&&!(h===0&&u===0)&&(b=w+(s-S)*Math.abs(h)/(Math.abs(h)+Math.abs(u)),b=Math.min(Math.max(0,b-w),s-S));const x=f,j=c-E-f;let P=x;d>0?P=x:l>0?P=j:d<=0&&E>0&&!(d===0&&l===0)&&(P=x+(c-E)*Math.abs(d)/(Math.abs(d)+Math.abs(l)),P=Math.min(Math.max(0,P-x),c-E));const z={x:b,y:c-f,w:S,h:f},V={x:s-f,y:P,w:f,h:E};return{lineSize:f,xSize:S,ySize:E,translateY:P,translateX:b,xThumbBackground:o?p:v,yThumbBackground:i?p:v,xThumbBorderColor:o?y:g,yThumbBorderColor:i?y:g,xThumbRect:z,yThumbRect:V}}function Ds(e,t){let{x:n,y:o,h:i,w:a,background:s,borderColor:c}=t;e.save(),e.shadowColor="#FFFFFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=1;{const{axis:d}=t;d==="X"?(o=o+i/4+0,i=i/2):d==="Y"&&(n=n+a/4+0,a=a/2);let l=t.r;l=Math.min(l,a/2,i/2),(a<l*2||i<l*2)&&(l=0),e.globalAlpha=1,e.beginPath(),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.fillStyle=s,e.fill(),e.beginPath(),e.lineWidth=1,e.strokeStyle=c,e.setLineDash([]),e.moveTo(n+l,o),e.arcTo(n+a,o,n+a,o+i,l),e.arcTo(n+a,o+i,n,o+i,l),e.arcTo(n,o+i,n,o,l),e.arcTo(n,o,n+a,o,l),e.closePath(),e.stroke()}e.restore()}function gd(e,t){const n=e,{viewScaleInfo:o,viewSizeInfo:i,scrollInfo:a,style:s}=t,{activeThumbType:c,prevPoint:d,activePoint:l,hoverXThumb:h,hoverYThumb:u}=a,m=fd({viewScaleInfo:o,viewSizeInfo:i,hoverXThumb:h,hoverYThumb:u,style:s});let f=Object.assign({},m.xThumbRect),v=Object.assign({},m.yThumbRect);return c&&d&&l&&(c==="X"&&a.xThumbRect?(f=Object.assign({},a.xThumbRect),f.x=f.x+(l.x-d.x)):c==="Y"&&a.yThumbRect&&(v=Object.assign({},a.yThumbRect),v.y=v.y+(l.y-d.y))),Ds(n,Object.assign(Object.assign({axis:"X"},f),{r:m.lineSize/2,background:m.xThumbBackground,borderColor:m.xThumbBorderColor})),Ds(n,Object.assign(Object.assign({axis:"Y"},v),{r:m.lineSize/2,background:m.yThumbBackground,borderColor:m.yThumbBorderColor})),{xThumbRect:f,yThumbRect:v}}function vd(e,t){const{snapshot:n,style:o}=t,i=Di(n),a=wo(n),s=md(n),{xThumbRect:c,yThumbRect:d}=gd(e,{viewSizeInfo:i,viewScaleInfo:a,scrollInfo:s,style:o});return{xThumbRect:c,yThumbRect:d}}const Ps=(e,t)=>{const{viewer:n,boardContent:o,sharer:i,eventHub:a}=e,{overlayContext:s}=o;i.setSharedStorage(mi,null),i.setSharedStorage(fi,null);let c=!1;const d=Object.assign(Object.assign({},dd),t),{thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:m,activeThumbBackground:f,activeThumbBorderColor:v}=d,g={thumbBackground:l,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:m,activeThumbBackground:f,activeThumbBorderColor:v},p=()=>{i.setSharedStorage(Ln,null),i.setSharedStorage(ga,null),i.setSharedStorage(so,null),i.setSharedStorage(io,null),i.setSharedStorage(ao,null),c=!1};p();const y=w=>{const D=i.getSharedStorage(Ln);if(D){const{offsetLeft:b,offsetRight:x}=i.getActiveViewScaleInfo(),{width:j}=i.getActiveViewSizeInfo(),P=-(w.x-D.x),z=j+Math.abs(b)+Math.abs(x),V=P*z/j;n.scroll({moveX:V}),n.drawFrame()}},S=w=>{const D=i.getSharedStorage(Ln);if(D){const{offsetTop:b,offsetBottom:x}=i.getActiveViewScaleInfo(),{height:j}=i.getActiveViewSizeInfo(),P=-(w.y-D.y),z=j+Math.abs(b)+Math.abs(x),V=P*z/j;n.scroll({moveY:V}),n.drawFrame()}},E=w=>hd(s,w,{xThumbRect:i.getSharedStorage(mi),yThumbRect:i.getSharedStorage(fi)});return{name:"@middleware/scroller",wheel:w=>{n.scroll({moveX:0-w.deltaX,moveY:0-w.deltaY}),n.drawFrame()},hover:w=>{if(c===!0)return!1;const{point:D}=w,b=E(D);if(b==="X"||b==="Y")return b==="X"?(i.setSharedStorage(io,!0),i.setSharedStorage(ao,!1)):(i.setSharedStorage(io,!1),i.setSharedStorage(ao,!0)),a.trigger("cursor",{type:"default"}),!1;i.setSharedStorage(io,!1),i.setSharedStorage(ao,!1)},pointStart:w=>{const{point:D}=w,b=E(D);if(b==="X"||b==="Y")return c=!0,i.setSharedStorage(so,b),i.setSharedStorage(Ln,D),!1},pointMove:w=>{const{point:D}=w,b=i.getSharedStorage(so);if(b==="X"||b==="Y")return i.setSharedStorage(ga,D),b==="X"?y(D):b==="Y"&&S(D),i.setSharedStorage(Ln,D),!1},pointEnd:()=>{c=!1;const w=i.getSharedStorage(so);if(p(),w==="X"||w==="Y")return n.scroll({moveX:0,moveY:0}),n.drawFrame(),!1},beforeDrawFrame({snapshot:w}){const{xThumbRect:D,yThumbRect:b}=vd(s,{snapshot:w,style:g});i.setSharedStorage(mi,D),i.setSharedStorage(fi,b)}}},Jr="@middleware/scale",Ls=e=>{const{viewer:t,sharer:n,eventHub:o}=e,i=50,a=.05;return{name:"@middleware/scaler",wheelScale(s){const{deltaY:c,point:d}=s,{scale:l}=n.getActiveViewScaleInfo();let h=l;if(c<0?h=l*1.1:c>0&&(h=l*.9),h<a||h>i)return;const{moveX:u,moveY:m}=t.scale({scale:h,point:d});t.scroll({moveX:u,moveY:m}),t.drawFrame();const f=ye(l);o.trigger(Jr,{scale:f})}}},Oe=16,va=10,Kr=100,Li=1,qr="monospace",pd="#FFFFFFA8",yd="#00000080",wd="#000000",bd="#00000080",Sd="#AAAAAA20",Ed="#AAAAAA40",Cd="#196097",xd={background:pd,borderColor:yd,scaleColor:wd,textColor:bd,gridColor:Sd,gridPrimaryColor:Ed,selectedAreaColor:Cd},pn=[1,2,5,10,20,50,100,200,500];function Md(e){e=Math.max(pn[0],Math.min(e,pn[pn.length-1]));for(let t=0;t<pn.length-1;t++){const n=pn[t],o=pn[t+1];if(e>o)continue;if(e===n||e===o)return e;const i=(n+o)/2;return e<=i?n:o}return e}function el(e){const{scale:t,viewLength:n,viewOffset:o}=e,i=[];let a=10;a=ye(a/t,{decimalPlaces:0}),a=Md(a);const s=a*10,c=a*5;let d=0;const l=a*t,h=0-o,u=0,m=h%l,f=(h-m+l)/t,v=u+(l-m);for(;v+d*l<n;){const g=ye(f+d*a,{decimalPlaces:0}),p=ye(v+d*l,{decimalPlaces:0}),y={num:g,position:p,showNum:g%s===0,isKeyNum:g%s===0,isSubKeyNum:g%c===0};i.push(y),d++}return{list:i,rulerUnit:a}}function zd(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetLeft:i}=t,{width:a}=n;return el({axis:"X",scale:o,viewLength:a,viewOffset:i})}function Id(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i}=t,{height:a}=n;return el({axis:"Y",scale:o,viewLength:a,viewOffset:i})}function Ad(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=Oe,c=Oe*4/5,d=Oe*2/5,l=Oe*1/5,h=Oe/5;for(let u=0;u<n.length;u++){const m=n[u];m.position<Oe||(e.beginPath(),e.moveTo(m.position,s),e.lineTo(m.position,m.isKeyNum?l:m.isSubKeyNum?d:c),e.closePath(),e.lineWidth=Li,e.setLineDash([]),e.fillStyle=i,e.stroke(),m.isKeyNum&&(e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:Kr,fontSize:va,fontFamily:qr}),e.fillText(`${m.num}`,m.position+h,h)))}}function Td(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=Oe,c=Oe*4/5,d=Oe*2/5,l=Oe*1/5,h=Oe/5;for(let u=0;u<n.length;u++){const m=n[u];if(!(m.position<Oe)&&(e.beginPath(),e.moveTo(s,m.position),e.lineTo(m.isKeyNum?l:m.isSubKeyNum?d:c,m.position),e.closePath(),e.fillStyle=i,e.lineWidth=Li,e.setLineDash([]),e.stroke(),m.showNum===!0)){const f=h,v=m.position+h,g=`${m.num}`;bo(e,-90,{x:f,y:v},()=>{e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:Kr,fontSize:va,fontFamily:qr}),e.fillText(g,h+va,m.position+h)})}}}function Nd(e,t){const{viewSizeInfo:n,style:o}=t,{width:i,height:a}=n,{background:s,borderColor:c}=o;e.beginPath(),e.moveTo(0,0),e.lineTo(i+1,0),e.lineTo(i+1,Oe),e.lineTo(Oe,Oe),e.lineTo(Oe,a+1),e.lineTo(0,a+1),e.lineTo(0,0),e.closePath(),e.fillStyle=s,e.fill(),e.lineWidth=Li,e.setLineDash([]),e.strokeStyle=c,e.stroke()}function Dd(e,t){const{xList:n,yList:o,viewSizeInfo:i,style:a}=t,{width:s,height:c}=i,{gridColor:d,gridPrimaryColor:l}=a;for(let h=0;h<n.length;h++){const u=n[h];e.beginPath(),e.moveTo(u.position,0),e.lineTo(u.position,c),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.closePath(),e.lineWidth=Li,e.setLineDash([]),e.stroke()}for(let h=0;h<o.length;h++){const u=o[h];e.beginPath(),e.moveTo(0,u.position),e.lineTo(s,u.position),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=l:e.strokeStyle=d,e.lineWidth=1,e.closePath(),e.stroke()}}function Pd(e,t){const{snapshot:n,calculator:o,style:i}=t,{sharedStore:a}=n,{selectedAreaColor:s}=i,c=a[Lt],d=a[Ee];if(["select","drag","drag-list","drag-list-end"].includes(d)&&c.length>0){const l=wo(n),h=Di(n),u=[],m=[],f=[],v=[],g=[];if(c.forEach(w=>{const D=o.calcViewRectInfoFromRange(w.uuid,{viewScaleInfo:l,viewSizeInfo:h});D&&(u.push(D),m.push(D.left.x),f.push(D.right.x),v.push(D.top.y),g.push(D.bottom.y))}),!(u.length>0))return;const p=Math.min(...m),y=Math.max(...f),S=Math.min(...v),E=Math.max(...g);e.globalAlpha=1,e.beginPath(),e.moveTo(p,0),e.lineTo(y,0),e.lineTo(y,Oe),e.lineTo(p,Oe),e.fillStyle=s,e.closePath(),e.fill(),e.beginPath(),e.moveTo(0,S),e.lineTo(Oe,S),e.lineTo(Oe,E),e.lineTo(0,E),e.fillStyle=s,e.closePath(),e.fill()}}const pa="@middleware/show-ruler",Os=(e,t)=>{const{boardContent:n,viewer:o,eventHub:i,calculator:a}=e,{overlayContext:s,underlayContext:c}=n,d=Object.assign(Object.assign({},xd),t),{background:l,borderColor:h,scaleColor:u,textColor:m,gridColor:f,gridPrimaryColor:v,selectedAreaColor:g}=d,p={background:l,borderColor:h,scaleColor:u,textColor:m,gridColor:f,gridPrimaryColor:v,selectedAreaColor:g};let y=!0,S=!0;const E=w=>{typeof(w==null?void 0:w.show)=="boolean"&&(y=w.show),typeof(w==null?void 0:w.showGrid)=="boolean"&&(S=w.showGrid),(typeof(w==null?void 0:w.show)=="boolean"||typeof(w==null?void 0:w.showGrid)=="boolean")&&o.drawFrame()};return{name:"@middleware/ruler",use(){i.on(pa,E)},disuse(){i.off(pa,E)},beforeDrawFrame:({snapshot:w})=>{if(y===!0){const D=wo(w),b=Di(w);Pd(s,{snapshot:w,calculator:a,style:p}),Nd(s,{viewScaleInfo:D,viewSizeInfo:b,style:p});const{list:x,rulerUnit:j}=zd({viewScaleInfo:D,viewSizeInfo:b});Ad(s,{scaleList:x,style:p});const{list:P}=Id({viewScaleInfo:D,viewSizeInfo:b});Td(s,{scaleList:P,style:p}),S===!0&&Dd(j===1?s:c,{xList:x,yList:P,viewScaleInfo:D,viewSizeInfo:b,style:p})}}}},Ld="DRAG",Ro=Symbol(`${Ld}_prevPoint`),Rs=e=>{const{eventHub:t,sharer:n,viewer:o}=e;let i=!1;return{name:"@middleware/dragger",hover(){i!==!0&&t.trigger("cursor",{type:"drag-default"})},pointStart(a){const{point:s}=a;n.setSharedStorage(Ro,s),i=!0,t.trigger("cursor",{type:"drag-active"})},pointMove(a){const{point:s}=a,c=n.getSharedStorage(Ro);if(s&&c){const d=s.x-c.x,l=s.y-c.y;o.scroll({moveX:d,moveY:l}),o.drawFrame()}n.setSharedStorage(Ro,s)},pointEnd(){i=!1,n.setSharedStorage(Ro,null),t.trigger("cursor",{type:"drag-default"})}}},Na="monospace";function Od(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textColor:l,textBackground:h}=s;bo(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Na});const u=(d-c)/2,m=e.$undoPixelRatio(e.measureText(a).width),f={x:n.x-m/2-u,y:n.y},v={x:f.x+m+u*2,y:f.y+c+u},g={x:n.x-m/2,y:n.y};e.setLineDash([]),e.fillStyle=h,e.beginPath(),e.moveTo(f.x,f.y),e.lineTo(v.x,f.y),e.lineTo(v.x,v.y),e.lineTo(f.x,v.y),e.closePath(),e.fill(),e.fillStyle=l,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function Rd(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=s;bo(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Na});const u=(d-c)/2,m=e.$undoPixelRatio(e.measureText(a).width),f={x:n.x,y:n.y},v={x:f.x+m+u*2,y:f.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(f.x,f.y),e.lineTo(v.x,f.y),e.lineTo(v.x,v.y),e.lineTo(f.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function kd(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:l,textColor:h}=s;bo(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Na});const u=(d-c)/2,m=e.$undoPixelRatio(e.measureText(a).width),f={x:n.x,y:n.y},v={x:f.x+m+u*2,y:f.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=l,e.beginPath(),e.moveTo(f.x,f.y),e.lineTo(v.x,f.y),e.lineTo(v.x,v.y),e.lineTo(f.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}const jd="#1973bac6",_d="#ffffff",Vd={textBackground:jd,textColor:_d},Yt=10,Zi=16,ks=(e,t)=>{const{boardContent:n,calculator:o}=e,{overlayContext:i}=n,a=Object.assign(Object.assign({},Vd),t),{textBackground:s,textColor:c}=a,d={textBackground:s,textColor:c};return{name:"@middleware/info",beforeDrawFrame({snapshot:l}){var h;const{sharedStore:u}=l,m=u[Lt],f=u[ut],v=u[Ee],g=u[Qe]||[];if(m.length===1&&!(!((h=f==null?void 0:f.operations)===null||h===void 0)&&h.locked)){const p=m[0];if(p&&["select","drag","resize"].includes(v)){const y=wo(l),S=Di(l),{x:E,y:w,w:D,h:b,angle:x}=p,j=[...g,{uuid:_t(),x:E,y:w,w:D,h:b,angle:x,type:"group",detail:{children:[]}}],P={viewScaleInfo:y,viewSizeInfo:S},z=o.calcViewRectInfoFromOrigin(p.uuid,P);let V=0;j.forEach(N=>{V+=N.angle||0});const O=Ct(ct(0-V));if(z){const N=z==null?void 0:z.center,B={topLeft:Ie(N,z.topLeft,O),topRight:Ie(N,z.topRight,O),bottomRight:Ie(N,z.bottomRight,O),bottomLeft:Ie(N,z.bottomLeft,O),center:Ie(N,z.center,O),top:Ie(N,z.top,O),right:Ie(N,z.right,O),bottom:Ie(N,z.bottom,O),left:Ie(N,z.left,O)},H=ye(p.x,{decimalPlaces:2}),_=ye(p.y,{decimalPlaces:2}),L=ye(p.w,{decimalPlaces:2}),k=ye(p.h,{decimalPlaces:2}),C=`${ye(H,{decimalPlaces:0})},${ye(_,{decimalPlaces:0})}`,Y=`${ye(L,{decimalPlaces:0})}x${ye(k,{decimalPlaces:0})}`,G=`${ye(p.angle||0,{decimalPlaces:0})}°`;Od(i,{point:{x:B.bottom.x,y:B.bottom.y+Yt},rotateCenter:B.center,angle:V,text:Y,fontSize:Yt,lineHeight:Zi,style:d}),Rd(i,{point:{x:B.topLeft.x,y:B.topLeft.y-Yt*2},rotateCenter:B.center,angle:V,text:C,fontSize:Yt,lineHeight:Zi,style:d}),kd(i,{point:{x:B.top.x+Yt,y:B.top.y-Yt*2},rotateCenter:B.center,angle:V,text:G,fontSize:Yt,lineHeight:Zi,style:d})}}}}}};var Qi=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Te=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ya,Ne,gi,Ii,tl;class Bd{constructor(t,n){ya.add(this),Ne.set(this,void 0),gi.set(this,void 0),Ii.set(this,void 0);const{devicePixelRatio:o=1,width:i,height:a,createCustomContext2D:s}=n;Qi(this,Ii,t,"f");const c=document.createElement("canvas");Qi(this,gi,c,"f"),Te(this,ya,"m",tl).call(this),t.appendChild(c);const d=Vc(c,{width:i,height:a,devicePixelRatio:o,offscreen:!0,createCustomContext2D:s}),l=new _0({boardContent:d,container:t}),h=l.getSharer();h.setActiveViewSizeInfo({width:i,height:a,devicePixelRatio:o,contextWidth:i,contextHeight:a}),Qi(this,Ne,l,"f"),this.resize(h.getActiveViewSizeInfo());const u=l.getEventHub();new H0(t,{eventHub:u})}isDestroyed(){return Te(this,Ne,"f").isDestroyed()}destroy(){Te(this,Ne,"f").destroy(),Te(this,gi,"f").remove()}use(t,n){Te(this,Ne,"f").use(t,n)}disuse(t){Te(this,Ne,"f").disuse(t)}setData(t,n){mr((t==null?void 0:t.elements)||[]),Te(this,Ne,"f").setData(t,n)}getData(){return Te(this,Ne,"f").getData()}scale(t){Te(this,Ne,"f").scale(t),Te(this,Ne,"f").getViewer().drawFrame()}resize(t){const n=Te(this,Ne,"f"),i=n.getSharer().getActiveViewSizeInfo();n.resize(Object.assign(Object.assign({},i),t))}clear(){Te(this,Ne,"f").clear()}on(t,n){Te(this,Ne,"f").getEventHub().on(t,n)}off(t,n){Te(this,Ne,"f").getEventHub().off(t,n)}trigger(t,n){Te(this,Ne,"f").getEventHub().trigger(t,n)}getViewInfo(){const n=Te(this,Ne,"f").getSharer(),o=n.getActiveViewSizeInfo(),i=n.getActiveViewScaleInfo();return{viewSizeInfo:o,viewScaleInfo:i}}refresh(){Te(this,Ne,"f").getViewer().drawFrame()}setViewScale(t){Te(this,Ne,"f").updateViewScaleInfo(t)}getLoadItemMap(){return Te(this,Ne,"f").getRenderer().getLoadItemMap()}onBoardWatcherEvents(){Te(this,Ne,"f").onWatcherEvents()}offBoardWatcherEvents(){Te(this,Ne,"f").offWatcherEvents()}}Ne=new WeakMap,gi=new WeakMap,Ii=new WeakMap,ya=new WeakSet,tl=function(){const t=Te(this,Ii,"f");t.style.position="relative"};const Ai="select",Fd={mode:Ai};function Wd(){return{mode:Ai,enableRuler:!1,enableScale:!1,enableScroll:!1,enableSelect:!1,enableTextEdit:!1,enableDrag:!1,enableInfo:!1,middlewareStyles:{selector:{},info:{},ruler:{},scroller:{},layoutSelector:{}}}}function Hd(e){const t={selector:{},ruler:{},info:{},scroller:{},layoutSelector:{}};if(e.styles){const{selector:n,info:o,ruler:i,scroller:a,layoutSelector:s}=e.styles;ze.string(n==null?void 0:n.activeColor)&&(t.selector.activeColor=n==null?void 0:n.activeColor),ze.string(n==null?void 0:n.activeAreaColor)&&(t.selector.activeAreaColor=n==null?void 0:n.activeAreaColor),ze.string(n==null?void 0:n.lockedColor)&&(t.selector.lockedColor=n==null?void 0:n.lockedColor),ze.string(n==null?void 0:n.referenceColor)&&(t.selector.referenceColor=n==null?void 0:n.referenceColor),ze.string(o==null?void 0:o.textBackground)&&(t.info.textBackground=o==null?void 0:o.textBackground),ze.string(o==null?void 0:o.textColor)&&(t.info.textColor=o==null?void 0:o.textColor),ze.string(i==null?void 0:i.background)&&(t.ruler.background=i==null?void 0:i.background),ze.string(i==null?void 0:i.borderColor)&&(t.ruler.borderColor=i==null?void 0:i.borderColor),ze.string(i==null?void 0:i.scaleColor)&&(t.ruler.scaleColor=i==null?void 0:i.scaleColor),ze.string(i==null?void 0:i.textColor)&&(t.ruler.textColor=i==null?void 0:i.textColor),ze.string(i==null?void 0:i.gridColor)&&(t.ruler.gridColor=i==null?void 0:i.gridColor),ze.string(i==null?void 0:i.gridPrimaryColor)&&(t.ruler.gridPrimaryColor=i==null?void 0:i.gridPrimaryColor),ze.string(i==null?void 0:i.selectedAreaColor)&&(t.ruler.selectedAreaColor=i==null?void 0:i.selectedAreaColor),ze.string(a==null?void 0:a.thumbBackground)&&(t.scroller.thumbBackground=a==null?void 0:a.thumbBackground),ze.string(a==null?void 0:a.thumbBorderColor)&&(t.scroller.thumbBorderColor=a==null?void 0:a.thumbBorderColor),ze.string(a==null?void 0:a.hoverThumbBackground)&&(t.scroller.hoverThumbBackground=a==null?void 0:a.hoverThumbBackground),ze.string(a==null?void 0:a.hoverThumbBorderColor)&&(t.scroller.hoverThumbBorderColor=a==null?void 0:a.hoverThumbBorderColor),ze.string(a==null?void 0:a.activeThumbBackground)&&(t.scroller.activeThumbBackground=a==null?void 0:a.activeThumbBackground),ze.string(a==null?void 0:a.activeThumbBorderColor)&&(t.scroller.activeThumbBorderColor=a==null?void 0:a.activeThumbBorderColor),ze.string(s==null?void 0:s.activeColor)&&(t.layoutSelector.activeColor=s==null?void 0:s.activeColor)}return t}var Gd=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function Yd(e){return Gd(this,void 0,void 0,function*(){const{data:t,width:n,height:o,devicePixelRatio:i,viewScaleInfo:a,viewSizeInfo:s,loadItemMap:c}=e;let d=Uo({width:n,height:o,devicePixelRatio:i}),l=new kr({viewContext:d}),h=new Rr({viewContext:d,calculator:l});h.setLoadItemMap(c),h.drawData(t,{viewScaleInfo:a,viewSizeInfo:s,forceDrawAll:!0});let u=null,m=d.$getOffscreenCanvas();if(m){const f=yield m.convertToBlob();u=window.URL.createObjectURL(f)}return m=null,d=null,l=null,h=null,{blobURL:u,width:n,height:o,devicePixelRatio:i}})}const $d=Ta,js={change:$d,ruler:pa,scale:Jr,select:hi,clearSelect:Mi,textEdit:zi,textChange:fa},ge={};Object.keys(js).forEach(e=>{Object.defineProperty(ge,e,{value:js[e],writable:!1})});function Xd(e){return["select","drag","readOnly"].includes(e)}function nl(e,t){const{enableRuler:n,enableScale:o,enableScroll:i,enableSelect:a,enableTextEdit:s,enableDrag:c,enableInfo:d}=t.getSnapshot(),l=t.get("middlewareStyles");i===!0?e.use(Ps,l==null?void 0:l.scroller):i===!1&&e.disuse(Ps),a===!0?(e.use(As,l==null?void 0:l.layoutSelector),e.use(Ts,l==null?void 0:l.selector)):a===!1&&(e.disuse(As),e.disuse(Ts)),o===!0?e.use(Ls):o===!1&&e.disuse(Ls),n===!0?e.use(Os,l==null?void 0:l.ruler):n===!1&&e.disuse(Os),s===!0?e.use(Is):s===!1&&e.disuse(Is),c===!0?e.use(Rs):c===!1&&e.disuse(Rs),d===!0?e.use(ks,l==null?void 0:l.info):d===!1&&e.disuse(ks)}function wa(e,t,n){let o=!1,i=!1,a=!1,s=!1,c=!1,d=!1,l=!1,h="select";n.set("mode",h),Xd(e)?h=e:console.warn(`${e} is invalid mode of iDraw.js`),h==="select"?(o=!0,i=!0,a=!0,l=!0,s=!0,c=!1,d=!0):h==="drag"?(o=!0,i=!0,a=!1,s=!1,c=!0,d=!0):h==="readOnly"&&(o=!1,i=!1,a=!1,s=!1,c=!1,d=!1),n.set("enableScale",o),n.set("enableScroll",i),n.set("enableSelect",a),n.set("enableTextEdit",s),n.set("enableDrag",c),n.set("enableRuler",d),n.set("enableInfo",l),nl(t,n)}var Ud=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})},ce=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ji=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ro,fe,lo,kt,ol,ba;class Da{constructor(t,n){ro.add(this),fe.set(this,void 0),lo.set(this,void 0),kt.set(this,new nn({defaultStorage:Wd()}));const o=Object.assign(Object.assign({},Fd),n);ce(this,kt,"f").set("middlewareStyles",Hd(o));const{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c}=o,d=new Bd(t,{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c});Ji(this,fe,d,"f"),Ji(this,lo,o,"f"),ce(this,ro,"m",ol).call(this)}reset(t){const n=ce(this,fe,"f"),o=ce(this,kt,"f");o.clear(),wa(t.mode||Ai,n,o),n.refresh(),Ji(this,lo,Object.assign(Object.assign({},ce(this,lo,"f")),t),"f")}setMode(t){const n=ce(this,fe,"f"),o=ce(this,kt,"f");wa(t||Ai,n,o),n.refresh()}enable(t){ce(this,ro,"m",ba).call(this,t,!0)}disable(t){ce(this,ro,"m",ba).call(this,t,!1)}setData(t){const n=ce(this,fe,"f");n.setData(t),n.trigger(ge.change,{data:t,type:"setData"})}getData(t){const n=ce(this,fe,"f").getData();return n&&(t==null?void 0:t.compact)===!0?uc(n,{loadItemMap:ce(this,fe,"f").getLoadItemMap()}):n}getViewInfo(){return ce(this,fe,"f").getViewInfo()}scale(t){ce(this,fe,"f").scale(t)}setViewScale(t){const n=ce(this,fe,"f");n.setViewScale(t),n.refresh()}centerContent(t){const n=(t==null?void 0:t.data)||ce(this,fe,"f").getData(),{viewSizeInfo:o}=this.getViewInfo();if(n!=null&&n.layout||Array.isArray(n==null?void 0:n.elements)&&(n==null?void 0:n.elements.length)>0){const i=m0(n,{viewSizeInfo:o});this.setViewScale(i)}}resize(t){ce(this,fe,"f").resize(t)}on(t,n){ce(this,fe,"f").on(t,n)}off(t,n){ce(this,fe,"f").off(t,n)}trigger(t,n){ce(this,fe,"f").trigger(t,n)}selectElement(t){this.selectElements([t])}selectElements(t){this.trigger(ge.select,{uuids:t})}selectElementByPosition(t){this.selectElementsByPositions([t])}selectElementsByPositions(t){this.trigger(ge.select,{positions:t})}cancelElements(){this.trigger(ge.clearSelect,{uuids:[]})}createElement(t,n){const{viewScaleInfo:o,viewSizeInfo:i}=ce(this,fe,"f").getViewInfo();return d0(t,(n==null?void 0:n.element)||{},(n==null?void 0:n.viewCenter)===!0?{viewScaleInfo:o,viewSizeInfo:i}:void 0)}updateElement(t){const n=ce(this,fe,"f"),o=n.getData()||{elements:[]};Vt(t.uuid,t,o.elements),n.setData(o),n.refresh(),n.trigger(ge.change,{data:o,type:"updateElement"})}addElement(t,n){var o;const i=ce(this,fe,"f"),a=i.getData()||{elements:[]};if(!n||!(!((o=n==null?void 0:n.position)===null||o===void 0)&&o.length))a.elements.push(t);else if(n!=null&&n.position){const s=[...n==null?void 0:n.position];zr(t,s,a.elements)}return i.setData(a),i.refresh(),i.trigger(ge.change,{data:a,type:"addElement"}),a}deleteElement(t){const n=ce(this,fe,"f"),o=n.getData()||{elements:[]};u0(t,o.elements),n.setData(o),n.refresh(),n.trigger(ge.change,{data:o,type:"deleteElement"})}moveElement(t,n){const o=ce(this,fe,"f"),i=o.getData()||{elements:[]},a=ht(t,i.elements),{elements:s}=Si(i.elements,{from:a,to:n});i.elements=s,o.setData(i),o.refresh(),o.trigger(ge.change,{data:i,type:"moveElement"})}getImageBlobURL(t){return Ud(this,void 0,void 0,function*(){const n=this.getData()||{elements:[]},{devicePixelRatio:o}=t||{devicePixelRatio:1},i=Ma(n.elements),{viewSizeInfo:a}=this.getViewInfo();return yield Yd({width:i.w,height:i.h,devicePixelRatio:o,data:n,viewScaleInfo:{scale:1,offsetLeft:-i.x,offsetTop:-i.y,offsetBottom:0,offsetRight:0},viewSizeInfo:Object.assign(Object.assign({},a),{devicePixelRatio:o}),loadItemMap:ce(this,fe,"f").getLoadItemMap()})})}isDestroyed(){return ce(this,fe,"f").isDestroyed()}destroy(){const t=ce(this,fe,"f"),n=ce(this,kt,"f");t.destroy(),n.destroy()}getViewCenter(){const{viewScaleInfo:t,viewSizeInfo:n}=this.getViewInfo();return f0({viewScaleInfo:t,viewSizeInfo:n})}$onBoardWatcherEvents(){ce(this,fe,"f").onBoardWatcherEvents()}$offBoardWatcherEvents(){ce(this,fe,"f").offBoardWatcherEvents()}}fe=new WeakMap,lo=new WeakMap,kt=new WeakMap,ro=new WeakSet,ol=function(){const t=ce(this,fe,"f"),n=ce(this,kt,"f");wa("select",t,n)},ba=function(t,n){const o=ce(this,kt,"f");if(["ruler","scroll","scale","info"].includes(t)){const i={ruler:"enableRuler",scroll:"enableScroll",scale:"enableScale",info:"enableInfo"};o.set(i[t],!!n),nl(ce(this,fe,"f"),o),ce(this,fe,"f").refresh()}else t==="selectInGroup"?ce(this,fe,"f").trigger(da,{enable:!!n}):t==="snapToGrid"&&ce(this,fe,"f").trigger(ua,{enable:!!n})};const Zd=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}),r.createElement("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}))),Ki="base-scale-selector",Qd=e=>{const{className:t,style:n,defaultValue:o,value:i,onChange:a}=e,s=W(Ki),c=W(Ki,"menu-item"),d=W(Ki,"input"),[l,h]=T.useState(100);T.useEffect(()=>{const g=ye(parseFloat(i||"1")*100);h(g)},[i]);const u=g=>{const{key:p}=g;a==null||a(p)},m=g=>{g.stopPropagation()},v={items:[{label:r.createElement("span",{className:c},r.createElement(de,{className:d,size:"small",value:l,suffix:"%",onClick:m,step:1,min:10,max:1e4,controls:!1,onChange:g=>{if(g&&g>0){const p=ye(g/100);a==null||a(`${p}`)}}})),key:"custom"},...[.5,1,2,3].map(g=>({key:`${g}`,label:r.createElement("span",{className:c},`${ye(g*100)}%`)}))],onClick:u,selectedKeys:[`${i||o}`]};return T.useMemo(()=>r.createElement(yo,{className:ue(s,t),menu:v},r.createElement(Re,{icon:r.createElement(Zd,null),size:"small"},`${ye(parseFloat(i||"1")*100)}%`)),[t,n,o,i,a,l])},Pa=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M508 512m-112 0a112 112 0 1 0 224 0 112 112 0 1 0-224 0Z"}),r.createElement("path",{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3-7.7 16.2-7.7 35.2 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}))),il=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M942.3 486.4l-0.1-0.1-0.1-0.1c-36.4-76.7-80-138.7-130.7-186L760.7 351c43.7 40.2 81.5 93.7 114.1 160.9C791.5 684.2 673.4 766 512 766c-51.3 0-98.3-8.3-141.2-25.1l-54.7 54.7C374.6 823.8 439.8 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0.1-51.3zM878.3 154.2l-42.4-42.4c-3.1-3.1-8.2-3.1-11.3 0L707.8 228.5C649.4 200.2 584.2 186 512 186c-192.2 0-335.4 100.5-430.2 300.3v0.1c-7.7 16.2-7.7 35.2 0 51.5 36.4 76.7 80 138.7 130.7 186.1L111.8 824.5c-3.1 3.1-3.1 8.2 0 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0l712.8-712.8c3.1-3 3.1-8.1 0-11.2zM398.9 537.4c-1.9-8.2-2.9-16.7-2.9-25.4 0-61.9 50.1-112 112-112 8.7 0 17.3 1 25.4 2.9L398.9 537.4z m184.5-184.5C560.5 342.1 535 336 508 336c-97.2 0-176 78.8-176 176 0 27 6.1 52.5 16.9 75.4L263.3 673c-43.7-40.2-81.5-93.7-114.1-160.9C232.6 339.8 350.7 258 512 258c51.3 0 98.3 8.3 141.2 25.1l-69.8 69.8z"}),r.createElement("path",{d:"M508 624c-6.4 0-12.7-0.5-18.8-1.6l-51.1 51.1c21.4 9.3 45.1 14.4 69.9 14.4 97.2 0 176-78.8 176-176 0-24.8-5.1-48.5-14.4-69.9l-51.1 51.1c1 6.1 1.6 12.4 1.6 18.8C620 573.9 569.9 624 508 624z"}))),al=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"}))),sl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),rl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M853.333333 170.666667H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v128a42.666667 42.666667 0 0 0 85.333333 0V256h256v554.666667H384a42.666667 42.666667 0 0 0 0 85.333333h256a42.666667 42.666667 0 0 0 0-85.333333h-85.333333V256h256v85.333333a42.666667 42.666667 0 0 0 85.333333 0V213.333333a42.666667 42.666667 0 0 0-42.666667-42.666666z"}))),ll=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M0.00592 521.157814v-103.646801l430.267025 235.101281c36.191582 13.567843 70.207188 15.615819 111.870706 0.191998l440.986902-258.365013v103.614802l-435.386966 258.877007c-42.175512 18.303788-91.326944 18.303788-126.398539 0L0.00592 521.157814z"}),r.createElement("path",{d:"M0.00592 743.651242v-104.798789l406.427301 221.43744c17.2798 9.439891 40.511532 17.599797 65.119247 20.383764h27.999676c32.511624-5.023942 47.103455-10.207882 67.615218-22.943735l415.931191-258.173014v98.974855l-430.875018 268.95689c-42.111513 17.439798-95.806892 18.079791-130.878487 0.575994L0.00592 743.619242zM20.069688 246.024995L399.073306 20.971598c41.279523-26.303696 90.430954-27.967677 133.342458-4.35195l421.083131 198.621703c35.743587 17.599797 37.18357 61.311291 2.655969 81.151062l-414.043212 226.205384a165.758083 165.758083 0 0 1-133.374458 4.415949L22.725657 327.208057C9.157814 318.664155 0.90191 303.56033 0.229917 285.000545c-0.607993-18.911781 10.719876-32.159628 19.807771-38.94355z"})," ")),cl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}))),dl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792z m0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z"}),r.createElement("path",{d:"M304 456c48.6 0 88-39.4 88-88s-39.4-88-88-88-88 39.4-88 88 39.4 88 88 88z m0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}))),Jd=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M256 682.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0zM768 170.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0z"}),r.createElement("path",{d:"M707.84 316.16a42.666667 42.666667 0 0 1 0 60.330667l-331.178667 331.178666a42.666667 42.666667 0 0 1-60.330666-60.330666l331.178666-331.178667a42.666667 42.666667 0 0 1 60.330667 0z"}))),ul=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M145 96l66 746.6L511.8 928l299.6-85.4L878.7 96H145z m610.9 700.6l-244.1 69.6-245.2-69.6-56.7-641.2h603.8l-57.8 641.2z"}),r.createElement("path",{d:"M281 249l1.7 24.3 22.7 253.5h206.5v-0.1h112.9l-11.4 118.5L511 672.9v0.2h-0.8l-102.4-27.7-6.5-73.2h-91l11.3 144.7 188.6 52h1.7v-0.4l187.7-51.7 1.7-16.3 21.2-242.2 3.2-24.3H511v0.2H389.9l-8.2-94.2h352.1l1.7-19.5 4.8-47.2L742 249H511z"}))),Kd=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-0.7 5.2-2L869 536.2c14.7-12.8 14.7-35.6 0-48.4z"}))),qd=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53c-12.1-8.7-20-22.9-20-39 0-26.5 21.5-48 48-48s48 21.5 48 48c0 16.1-7.9 30.3-20 39z m152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z"}))),e3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32z m-40 376H232V536h560v304z"}),r.createElement("path",{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53c12.1-8.7 20-22.9 20-39 0-26.5-21.5-48-48-48s-48 21.5-48 48c0 16.1 7.9 30.3 20 39z"}))),hl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 0.3L512 465.6l-99.3-118.4-66.1-0.3c-4.4 0-8 3.5-8 8 0 1.9 0.7 3.7 1.9 5.2l130.1 155L340.5 670c-1.2 1.5-1.9 3.3-1.9 5.2 0 4.4 3.6 8 8 8l66.1-0.3L512 564.4l99.3 118.4 66 0.3c4.4 0 8-3.5 8-8 0-1.9-0.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}),r.createElement("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),$t="node",t3=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:m,onSelect:f,onGoToGroup:v,operations:g,isSelected:p}=e,[y,S]=T.useState(!1),[E,w]=T.useState(!1),D=T.useRef(s),b=l(d,$t),x=l(d,$t,"icon"),j=l(d,$t,"title"),P=l(d,$t,"title","input"),z=l(d,$t,"title","icon"),V=l(d,$t,"action"),O=l(d,$t,"selected"),N=T.useRef(0),B=T.useRef(null);T.useEffect(()=>{var A;y===!0&&((A=B.current)===null||A===void 0||A.focus())},[y]);const H=A=>{S(!1),h==null||h({uuid:a,value:A.target.value||""})},_=A=>{D.current=A.target.value||""},L=A=>{var M;A.code==="Enter"&&(S(!1),h==null||h({uuid:a,value:((M=A==null?void 0:A.target)===null||M===void 0?void 0:M.value)||""}))},k=A=>{A.stopPropagation(),A.preventDefault()},C=A=>{A.stopPropagation(),w(!0)},Y=A=>{A.stopPropagation(),w(!1)},G=A=>{const M=Date.now(),F=M-N.current;N.current=M,f==null||f({uuids:[i],positions:[c]}),F<=300&&F>0&&(A.stopPropagation(),A.preventDefault(),S(!0))},R=A=>{A.stopPropagation(),A.preventDefault(),m==null||m({uuid:a})},$=A=>{A.stopPropagation(),A.preventDefault(),u==null||u({uuid:a,operations:{invisible:!g.invisible}})},Q=A=>{A.stopPropagation(),A.preventDefault(),v==null||v({uuid:i,position:c})},I=A=>{A.stopPropagation(),A.preventDefault(),u==null||u({uuid:a,operations:{locked:!g.locked}})};return T.useMemo(()=>{D.current=s;function A(M){return M==="rect"?r.createElement(al,{className:z}):M==="circle"?r.createElement(sl,{className:z}):M==="text"?r.createElement(rl,{className:z}):M==="path"?r.createElement(Jd,{className:z}):M==="image"?r.createElement(dl,{className:z}):M==="svg"?r.createElement(cl,{className:z}):M==="group"?r.createElement(ll,{className:z}):M==="html"?r.createElement(ul,{className:z}):r.createElement("span",{className:z})}return r.createElement("span",{key:a,style:n,className:ue(b,t,p?O:null),onClick:G,onMouseOver:C,onMouseLeave:Y},r.createElement("span",{className:j},A(o),r.createElement("span",null,s)),E&&r.createElement("span",{className:V},o==="group"&&r.createElement(Kd,{className:x,onClick:Q}),g.invisible?r.createElement(il,{className:x,onClick:$}):r.createElement(Pa,{className:x,onClick:$}),g.locked?r.createElement(qd,{className:x,onClick:I}):r.createElement(e3,{className:x,onClick:I}),r.createElement(hl,{className:x,onClick:R})),y&&r.createElement("span",{className:P},r.createElement(Bt,{ref:B,size:"small",defaultValue:s,onBlur:H,onClick:k,onKeyDown:L,onChange:_})))},[a,s,y,o,E,g,p])};function n3(e,t){const n=[],{position:o}=t;if(Array.isArray(e)){const i=[...o];e.forEach((a,s)=>{i.push(s),n.push(ml(a,Object.assign(Object.assign({},t),{position:[...i]}))),i.pop()})}return n}const ml=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onGoToGroup:c,position:d,selectedKeys:l}=t,h={key:e.key,title:r.createElement(t3,{parentModName:n,uuid:e.key,title:e.title,position:d,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onGoToGroup:c,isSelected:l==null?void 0:l.includes(e.key)}),children:[]};if(Array.isArray(e.children)){const u=[...d];e.children.forEach((m,f)=>{u.push(f),h.children.push(ml(m,Object.assign(Object.assign({},t),{position:[...u]}))),u.pop()})}return h},o3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}),r.createElement("path",{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8C574.1 404.4 544.1 392 512 392z"}))),i3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),a3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),s3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),r3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}))),l3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H212V612h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200z"}))),c3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333zM128 469.333333v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM128 640v85.333333h85.333333v-85.333333z m0-341.333333v85.333333h85.333333v-85.333333z m341.333333 341.333333v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128zM128 810.666667v85.333333h768v-85.333333z"}))),d3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M592 928H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96zM976 0H784a48 48 0 1 0 0 96h144v144.016a48 48 0 1 0 96 0V48a48 48 0 0 0-48-48zM240 928H96v-144a48 48 0 1 0-96 0v192a48 48 0 0 0 48 48h192a48 48 0 1 0 0-96zM48 640a48 48 0 0 0 48-48V432a48 48 0 1 0-96 0v160a48 48 0 0 0 48 48zM240 0H48a48 48 0 0 0-48 48v192a48 48 0 1 0 96 0V96h144a48 48 0 1 0 0-96z m784 592V432a48 48 0 1 0-96 0v160a48 48 0 1 0 96 0zM592 0H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96z m384 736a48 48 0 0 0-48 48v144h-144a48 48 0 1 0 0 96h192a48 48 0 0 0 48-48V784a48 48 0 0 0-48-48z"}))),u3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333z m-512-170.666667v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM469.333333 640v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v768h85.333333V128z m170.666667 0v85.333333h85.333333V128z m170.666666 682.666667v85.333333h85.333334v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m-512 0v85.333333h85.333333v-85.333333z"}))),h3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333zM128 213.333333h85.333333V128H128v85.333333z m170.666667 0h85.333333V128h-85.333333v85.333333z m0 341.333334h85.333333v-85.333334h-85.333333v85.333334zM128 896h85.333333v-85.333333H128v85.333333z m341.333333 0h85.333334v-85.333333h-85.333334v85.333333zM128 554.666667h85.333333v-85.333334H128v85.333334z m0 170.666666h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m170.666667-170.666666h85.333333v-85.333334h-85.333333v85.333334z m170.666667-426.666667v768h85.333333V128h-85.333333z m-170.666667 768h85.333333v-85.333333h-85.333333v85.333333z m0-682.666667h85.333333V128h-85.333333v85.333333z m-170.666667 341.333334h85.333334v-85.333334h-85.333334v85.333334z m0-341.333334h85.333334V128h-85.333334v85.333333z m0 170.666667h85.333334v-85.333333h-85.333334v85.333333z"}))),m3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333z m0-341.333333h85.333333v-85.333334h-85.333333v85.333334z m170.666666 0h85.333334v-85.333334h-85.333334v85.333334z m0 341.333333h85.333334v-85.333333h-85.333334v85.333333zM128 725.333333h85.333333v-85.333333H128v85.333333z m0 170.666667h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333334H128v85.333334z m0-170.666667h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m341.333334-341.333333h85.333333v-85.333333h-85.333333v85.333333z m0 170.666667h85.333333v-85.333334h-85.333333v85.333334zM128 128v85.333333h768V128H128z m682.666667 597.333333h85.333333v-85.333333h-85.333333v85.333333z m-170.666667 170.666667h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-512h85.333334v-85.333333h-85.333334v85.333333z m341.333334 512h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-341.333333h85.333333v-85.333334h-85.333333v85.333334z"}))),f3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8c12.7 17.7 39 17.7 51.7 0l210.6-292c3.9-5.3 0.1-12.7-6.4-12.7z"}),r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),g3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M341.333333 512a42.666667 42.666667 0 0 0 42.666667 42.666667h256a42.666667 42.666667 0 0 0 0-85.333334H384a42.666667 42.666667 0 0 0-42.666667 42.666667z"}),r.createElement("path",{d:"M384 682.666667H307.626667A176.213333 176.213333 0 0 1 128 527.786667 170.666667 170.666667 0 0 1 298.666667 341.333333h85.333333a42.666667 42.666667 0 0 0 0-85.333333H307.626667a262.4 262.4 0 0 0-262.826667 222.293333A256 256 0 0 0 298.666667 768h85.333333a42.666667 42.666667 0 0 0 0-85.333333zM981.333333 479.573333A262.826667 262.826667 0 0 0 715.093333 256h-64.426666C616.106667 256 597.333333 275.2 597.333333 298.666667a42.666667 42.666667 0 0 0 42.666667 42.666666h76.373333A176.213333 176.213333 0 0 1 896 496.213333 170.666667 170.666667 0 0 1 725.333333 682.666667h-85.333333a42.666667 42.666667 0 0 0 0 85.333333h85.333333a256 256 0 0 0 256-288.426667z"}))),v3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M712 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM136 374h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM136 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM540 824H358c-87.3 0-158-70.7-158-158V484c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v182c0 127 103 230 230 230h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),p3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M368 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM484 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM658 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 476h-56c-4.4 0-8 3.6-8 8v182c0 87.3-70.7 158-158 158H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c127 0 230-103 230-230V484c0-4.4-3.6-8-8-8z"}))),y3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M656 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128H358c-127 0-230 103-230 230v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-87.3 70.7-158 158-158h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),w3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M368 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM666 128H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c87.3 0 158 70.7 158 158v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-127-103-230-230-230z"}))),_s=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M896 810.666667v85.333333h-85.333333v-85.333333h85.333333z m-170.666667 0v85.333333h-85.333333v-85.333333h85.333333z m-170.666666 0v85.333333h-85.333334v-85.333333h85.333334z m-170.666667 0v85.333333H298.666667v-85.333333h85.333333z m-170.666667 0v85.333333H128v-85.333333h85.333333z m682.666667-170.666667v85.333333h-85.333333v-85.333333h85.333333zM213.333333 640v85.333333H128v-85.333333h85.333333z m0-170.666667v85.333334H128v-85.333334h85.333333z m469.333334-341.333333a213.418667 213.418667 0 0 1 213.12 204.074667L896 341.333333v213.333334h-85.333333V341.333333a128.426667 128.426667 0 0 0-120.490667-127.786666L682.666667 213.333333h-213.333334V128h213.333334zM213.333333 298.666667v85.333333H128V298.666667h85.333333z m0-170.666667v85.333333H128V128h85.333333z m170.666667 0v85.333333H298.666667V128h85.333333z"}))),b3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72z"}),r.createElement("path",{d:"M864 256H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}))),S3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M510.762667 970.666667A458.666667 458.666667 0 1 1 969.429333 512a459.178667 459.178667 0 0 1-458.666666 458.666667z m0-853.333334a394.666667 394.666667 0 1 0 394.666666 394.666667 395.093333 395.093333 0 0 0-394.666666-394.666667z"}),r.createElement("path",{d:"M512 724.48A212.48 212.48 0 1 1 724.48 512 212.736 212.736 0 0 1 512 724.48z m0-360.96A148.48 148.48 0 1 0 660.48 512 148.608 148.608 0 0 0 512 363.52z"}))),fl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M272.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512z"}),r.createElement("path",{d:"M576.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}))),La=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3 0.1-12.7-6.4-12.7z"}))),E3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M841.065412 337.317647v352.015059c0 46.802824-23.070118 74.752-39.936 95.111529-14.095059 17.106824-21.443765 26.684235-21.443765 41.803294V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-107.39953c0-37.526588 19.576471-61.199059 35.297882-80.173176 14.576941-17.648941 26.142118-31.563294 26.142118-56.681412V337.317647c0-18.793412-16.143059-36.502588-33.189647-36.502588-19.817412 0-24.033882 3.072-24.214588 3.19247-3.975529 5.360941-3.855059 34.273882-3.794824 57.584942 0.060235 11.384471 0.120471 24.094118-0.12047 38.068705-0.240941 16.504471-12.830118 28.792471-30.358589 29.696a30.117647 30.117647 0 0 1-29.876706-30.117647v-127.698823c0-18.492235-13.372235-32.406588-31.081411-32.406588-16.263529 0-28.190118 12.107294-29.635765 29.394823v120.651294a30.117647 30.117647 0 0 1-60.235294 0V268.047059l-0.120471-0.602353v-46.561882c0-3.975529-0.843294-38.671059-28.551529-38.671059-27.105882 0-31.201882 24.214588-31.201883 38.671059v42.345411c0 1.686588-0.662588 3.252706-0.963764 4.879059v156.250353a30.117647 30.117647 0 0 1-60.235294 0V262.686118c-2.891294-11.685647-11.324235-23.491765-28.069647-23.491765-17.227294 0-31.744 15.721412-31.744 34.334118v201.788235c0 0.421647-0.361412 0.783059-0.361412 1.204706v66.319059a30.117647 30.117647 0 0 1-60.235294 0v-50.236236c-10.601412-3.855059-25.961412-6.987294-34.755765-4.999529-7.107765 1.385412-14.275765 7.649882-18.733176 16.323765a43.309176 43.309176 0 0 0-0.542118 38.369882L345.148235 766.192941a31.563294 31.563294 0 0 1 2.108236 6.505412 32.888471 32.888471 0 0 0 35.418353 25.961412 30.238118 30.238118 0 0 1 33.310117 29.936941V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-77.462588a92.521412 92.521412 0 0 1-66.680471-67.764706L187.934118 567.055059a104.448 104.448 0 0 1 1.927529-90.774588c12.890353-24.877176 35.418353-42.706824 60.295529-47.766589 12.649412-2.590118 29.756235-1.867294 46.682353 1.566118v-43.369412c0-0.602353 0.301176-1.144471 0.361412-1.746823v-111.435294c0-52.163765 41.321412-94.569412 91.979294-94.569412 12.047059 0 23.612235 2.409412 34.093177 6.746353 11.986824-38.791529 44.152471-63.668706 86.317176-63.668706 40.237176 0 71.800471 25.419294 83.666824 63.909647 10.721882-4.517647 22.467765-6.987294 34.876235-6.987294 41.502118 0 75.776 26.744471 87.160471 64.572235 11.023059-2.409412 22.226824-2.951529 32.286117-2.951529 50.718118 0 93.485176 44.272941 93.485177 96.737882z"}))),C3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}))),x3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}),r.createElement("path",{d:"M544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}))),M3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M170.666667 298.666667a42.666667 42.666667 0 1 1-85.333334 0V256a170.666667 170.666667 0 0 1 170.666667-170.666667h42.666667a42.666667 42.666667 0 1 1 0 85.333334H256a85.333333 85.333333 0 0 0-85.333333 85.333333v42.666667z m554.666666-128a42.666667 42.666667 0 0 1 0-85.333334h42.666667a170.666667 170.666667 0 0 1 170.666667 170.666667v42.666667a42.666667 42.666667 0 0 1-85.333334 0V256a85.333333 85.333333 0 0 0-85.333333-85.333333h-42.666667z m128 554.666666a42.666667 42.666667 0 0 1 85.333334 0v42.666667a170.666667 170.666667 0 0 1-170.666667 170.666667h-42.666667a42.666667 42.666667 0 0 1 0-85.333334h42.666667a85.333333 85.333333 0 0 0 85.333333-85.333333v-42.666667zM298.666667 853.333333a42.666667 42.666667 0 0 1 0 85.333334H256a170.666667 170.666667 0 0 1-170.666667-170.666667v-42.666667a42.666667 42.666667 0 0 1 85.333334 0v42.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h42.666667z"}))),z3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M118.979048 637.074286l137.99619 66.243047 255.171048 123.587048 246.076952-119.222857 147.163429-70.485334a73.142857 73.142857 0 0 1-34.230857 97.109334l-327.119239 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 734.305524A73.142857 73.142857 0 0 1 118.979048 637.074286z m786.090666-153.063619a73.142857 73.142857 0 0 1-33.913904 97.767619L544.01219 740.205714a73.142857 73.142857 0 0 1-63.780571 0L153.136762 581.778286A73.142857 73.142857 0 0 1 117.51619 487.862857l362.300953 170.886095 32.329143 15.652572 327.119238-158.427429 65.80419-31.939047zM544.036571 139.190857l327.094858 158.403048a73.142857 73.142857 0 0 1 0 131.657143l-327.094858 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 429.251048a73.142857 73.142857 0 0 1 0-131.657143L480.256 139.215238a73.142857 73.142857 0 0 1 63.780571 0z m-31.890285 65.828572L185.027048 363.422476l327.119238 158.427429 327.119238-158.427429L512.146286 205.04381z"}))),I3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-696 72h136v656H184V184z m656 656H384V384h456v456zM384 320V184h456v136H384z"}))),gl=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8c-16.4 12.8-16.4 37.5 0 50.3l450.8 352.1c5.3 4.1 12.9 0.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}))),A3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 42.666667a469.333333 469.333333 0 1 0 469.333333 469.333333A469.333333 469.333333 0 0 0 512 42.666667z m0 864a394.666667 394.666667 0 1 1 394.666667-394.666667 395.146667 395.146667 0 0 1-394.666667 394.666667z"}),r.createElement("path",{d:"M304.906667 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}),r.createElement("path",{d:"M512 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333334 0 66.666667 66.666667 0 1 0-133.333334 0Z"}),r.createElement("path",{d:"M719.093333 512m-66.666666 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}))),T3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M935.253333 111.786667a42.666667 42.666667 0 0 0-23.04-23.04A42.666667 42.666667 0 0 0 896 85.333333h-256a42.666667 42.666667 0 0 0 0 85.333334h153.173333L170.666667 793.173333V640a42.666667 42.666667 0 0 0-85.333334 0v256a42.666667 42.666667 0 0 0 3.413334 16.213333 42.666667 42.666667 0 0 0 23.04 23.04A42.666667 42.666667 0 0 0 128 938.666667h256a42.666667 42.666667 0 0 0 0-85.333334H230.826667L853.333333 230.826667V384a42.666667 42.666667 0 0 0 85.333334 0V128a42.666667 42.666667 0 0 0-3.413334-16.213333z"}))),N3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M128 128h64v389.312A384.32 384.32 0 0 1 506.688 832H896v64H192a64 64 0 0 1-64-64V128z m313.6 704A320.384 320.384 0 0 0 192 582.4V832h249.6z"}))),D3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M929.19 352.19c3.12 3.12 3.12 8.19 0 11.31L363.51 929.19c-3.12 3.12-8.19 3.12-11.31 0L94.81 671.81c-3.12-3.12-3.12-8.19 0-11.31L660.49 94.81c3.12-3.12 8.19-3.12 11.31 0l257.39 257.38z m-424.26 5.66l108.89 108.89c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0L456.85 405.93l-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-62.23 62.23 161.22 161.22 469.52-469.52-161.23-161.21-62.23 62.23 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91z"}))),P3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M725.333333 341.333333a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666666a42.666667 42.666667 0 1 0 42.666667 42.666666 42.666667 42.666667 0 0 0-42.666667-42.666666z"}),r.createElement("path",{d:"M640 256H85.333333a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM938.666667 256h-128a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333zM512 640a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666667 42.666667 42.666667 42.666667 0 0 0-42.666667-42.666667z"}),r.createElement("path",{d:"M426.666667 554.666667H85.333333a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM938.666667 554.666667h-341.333334a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM298.666667 938.666667a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666666 42.666667 42.666667 42.666667 0 0 0-42.666666-42.666667z"}),r.createElement("path",{d:"M938.666667 853.333333H384a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM213.333333 853.333333H85.333333a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333z"}))),L3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M802.742857 777.485714c49.942857 0 90.742857-41.371429 90.742857-92 0-61.142857-90.742857-160.914286-90.742857-160.914285S712 624.342857 712 685.485714c0 50.628571 40.8 92 90.742857 92z m-430.971428-50.4c8.114286 8.114286 21.257143 8.114286 29.257142 0l292.685715-292.571428c8.114286-8.114286 8.114286-21.257143 0-29.257143l-292.571429-292.571429c-0.685714-0.685714-1.485714-1.371429-2.285714-1.942857l-89.371429-89.371428a10.411429 10.411429 0 0 0-14.628571 0l-54.857143 54.857142a10.411429 10.411429 0 0 0 0 14.628572l76.8 76.8-237.485714 237.6c-8.114286 8.114286-8.114286 21.257143 0 29.257143l292.457143 292.571428z m14.742857-512.685714l204.457143 204.457143H182.171429l204.342857-204.457143zM960 859.428571H64c-5.028571 0-9.142857 4.114286-9.142857 9.142858v91.428571c0 5.028571 4.114286 9.142857 9.142857 9.142857h896c5.028571 0 9.142857-4.114286 9.142857-9.142857v-91.428571c0-5.028571-4.114286-9.142857-9.142857-9.142858z"}))),O3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}))),R3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM506.3 399.3c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zM517.7 624.7c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"}))),k3=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355c-3.2-4.1-9.4-4.1-12.6 0l-112 141.7c-4.1 5.2-0.4 12.9 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}))),{DirectoryTree:j3}=qs,Vs="base-element-tree",qi=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},vl=r.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,selectedKeys:l,onDrop:h,defaultExpandedKeys:u,onDelete:m,onExpand:f,onGoToGroup:v}=e,g=(y,S)=>{const w=[qi(S.node.pos)],D=[y[0]];d==null||d({uuids:D,positions:w})},p=({uuid:y})=>{m==null||m({uuid:y})};return T.useMemo(()=>{const y=n3(a||[],{parentModName:Vs,generateClassName:W,onTitleChange:s,onOperationToggle:c,onDelete:p,onGoToGroup:v,position:[],selectedKeys:l||[]});return r.createElement(j3,{ref:t,height:n,style:i,className:ue(W(Vs),o),showLine:!0,blockNode:!0,selectedKeys:l,switcherIcon:r.createElement(La,null),icon:null,onSelect:g,treeData:y,defaultExpandedKeys:u,onExpand:f,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:S=>{const{dragNode:E,node:w,dropToGap:D,dropPosition:b}=S,x=qi(E.pos),j=qi(w.pos);D===!0&&b>=0?j[j.length-1]=b:w.dragOverGapBottom===!0?j[j.length-1]=j[j.length-1]+1:w.dragOverGapTop===!0?j[j.length-1]=Math.max(0,j[j.length-1]-1):w.dragOver===!0&&j.push(0),h==null||h({from:x,to:j})}})},[o,i,g,a,l])}),Xt="node",_3=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:l,onTitleChange:h,onOperationToggle:u,onDelete:m,onSelect:f,operations:v,isSelected:g}=e,[p,y]=T.useState(!1),[S,E]=T.useState(!1),w=T.useRef(s),D=l(d,Xt),b=l(d,Xt,"icon"),x=l(d,Xt,"title"),j=l(d,Xt,"title","input"),P=l(d,Xt,"title","icon"),z=l(d,Xt,"action"),V=l(d,Xt,"selected"),O=T.useRef(0),N=T.useRef(null);T.useEffect(()=>{var $;p===!0&&(($=N.current)===null||$===void 0||$.focus())},[p]);const B=$=>{y(!1),h==null||h({uuid:a,value:$.target.value||""})},H=$=>{w.current=$.target.value||""},_=$=>{var Q;$.code==="Enter"&&(y(!1),h==null||h({uuid:a,value:((Q=$==null?void 0:$.target)===null||Q===void 0?void 0:Q.value)||""}))},L=$=>{$.stopPropagation(),$.preventDefault()},k=$=>{$.stopPropagation(),E(!0)},C=$=>{$.stopPropagation(),E(!1)},Y=$=>{const Q=Date.now(),I=Q-O.current;O.current=Q,f==null||f({uuids:[i],positions:[c]}),I<=300&&I>0&&($.stopPropagation(),$.preventDefault(),y(!0))},G=$=>{$.stopPropagation(),$.preventDefault(),m==null||m({uuid:a})},R=$=>{$.stopPropagation(),$.preventDefault(),u==null||u({uuid:a,operations:{invisible:!v.invisible}})};return T.useMemo(()=>(w.current=s,r.createElement("span",{key:a,style:n,className:ue(D,t,g?V:null),onClick:Y,onMouseOver:k,onMouseLeave:C},r.createElement("span",{className:x},r.createElement(C3,{className:P}),r.createElement("span",null,s)),S&&r.createElement("span",{className:z},v.invisible?r.createElement(il,{className:b,onClick:R}):r.createElement(Pa,{className:b,onClick:R}),r.createElement(hl,{className:b,onClick:G})),p&&r.createElement("span",{className:j},r.createElement(Bt,{ref:N,size:"small",defaultValue:s,onBlur:B,onClick:L,onKeyDown:_,onChange:H})))),[a,s,p,o,S,v,g])};function V3(e,t){const n=[],{position:o}=t;if(Array.isArray(e)){const i=[...o];e.forEach((a,s)=>{i.push(s),n.push(B3(a,Object.assign(Object.assign({},t),{position:[...i]}))),i.pop()})}return n}const B3=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,position:c,selectedKeys:d}=t;return{key:e.key,title:r.createElement(_3,{parentModName:n,uuid:e.key,title:e.title,position:c,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,isSelected:d==null?void 0:d.includes(e.key)})}},{DirectoryTree:F3}=qs,Bs="base-page-tree",ea=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},W3=r.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,selectedKeys:l,onDrop:h,defaultExpandedKeys:u,expandedKeys:m,onDelete:f}=e,v=(p,y)=>{const E=[ea(y.node.pos)],w=[p[0]];d==null||d({uuids:w,positions:E})},g=({uuid:p})=>{f==null||f({uuid:p})};return T.useMemo(()=>{const p=V3(a||[],{parentModName:Bs,generateClassName:W,onTitleChange:s,onOperationToggle:c,onDelete:g,position:[],selectedKeys:l||[]});return r.createElement(F3,{ref:t,height:n,style:i,className:ue(W(Bs),o),showLine:!0,blockNode:!0,multiple:!0,selectedKeys:l,switcherIcon:r.createElement(La,null),icon:null,onSelect:v,treeData:p,defaultExpandedKeys:u,expandedKeys:m,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:y=>{const{dragNode:S,node:E,dropToGap:w,dropPosition:D}=y,b=ea(S.pos),x=ea(E.pos);w===!0&&D>=0?x[x.length-1]=D:E.dragOverGapBottom===!0?x[x.length-1]=x[x.length-1]+1:E.dragOverGapTop===!0?x[x.length-1]=Math.max(0,x[x.length-1]-1):E.dragOver===!0&&x.push(0),h==null||h({from:b,to:x})}})},[o,i,v,a,l])});var H3=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const G3=e=>{const{value:t,onChange:n}=e,o=H3(e,["value","onChange"]),i=s=>{n==null||n(s)},a=()=>{i(!t)};return r.createElement(Re,Object.assign({},o,{type:t?"primary":"default",onClick:a}))},Y3="ElementDetail",Ft=()=>{const[e]=Ca(Y3);return e},Un="base-element-basic-attribute",Tt=e=>xe.number(e*1)?ye(e*1):e,Fs=e=>{if(xe.number(e*1)){const t=ye(e*1);return ct(t)}return e},$3=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=T.useRef(null),c=W(Un),d=W(Un,"row"),l=W(Un,"col"),h=W(Un,"input"),u=W(Un,"form-item"),m=Ft(),f=v=>{var g;((g=o==null?void 0:o.operations)===null||g===void 0?void 0:g.limitRatio)===!0&&(v!=null&&v.hasOwnProperty("w")?v.h=ye(v.w/o.w*o.h):v!=null&&v.hasOwnProperty("h")&&(v.w=ye(v.h/o.h*o.w))),i==null||i(v)};return T.useEffect(()=>{var v;const{type:g,x:p,y,w:S,h:E,angle:w=0,operations:D={}}=o||{},b={x:p,y,w:S,h:E,angle:w,operations:{limitRatio:D.limitRatio}};g==="group"&&(b.operations.deepResize=D.deepResize),(v=s.current)===null||v===void 0||v.setFieldsValue(b)},[o]),T.useMemo(()=>r.createElement(q,{ref:s,style:n,className:ue(c,t),onValuesChange:f},r.createElement(he,{className:d},r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"x"},r.createElement(de,{className:h,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:Tt,parser:Tt}))),r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"y"},r.createElement(de,{className:h,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:Tt,parser:Tt})))),r.createElement(he,{className:d},r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"w"},r.createElement(de,{className:h,size:"small",placeholder:"Width",prefix:m.w,disabled:a,formatter:Tt,parser:Tt}))),r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"h"},r.createElement(de,{className:h,size:"small",placeholder:"Height",prefix:m.h,disabled:a,formatter:Tt,parser:Tt}))),r.createElement(K,{span:4,className:l},r.createElement(q.Item,{className:u,name:["operations","limitRatio"]},r.createElement(G3,{icon:r.createElement(g3,null),size:"small",disabled:a})))),r.createElement(he,{className:d},r.createElement(K,{span:10,className:l},r.createElement(q.Item,{className:u,name:"angle"},r.createElement(de,{className:h,size:"small",placeholder:"Angle",prefix:r.createElement(N3,{style:{fontSize:14}}),disabled:a,formatter:Fs,parser:Fs,suffix:"°"})))),(o==null?void 0:o.type)==="group"&&r.createElement(he,{className:d},r.createElement(K,{span:18,className:l},m.deepResizeInGroup),r.createElement(K,{span:6,className:l},r.createElement(q.Item,{className:u,name:["operations","deepResize"]},r.createElement(Ks,{size:"small"}))))),[m,a,o])},We="base-element-field-multiple-color-picker",X3=["transparent","#FFFFFF","#000000","#AAAAAA","#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"],U3=({value:e="",onChange:t,className:n,diabledColorBlocks:o=!0})=>{const i=W(We,"color-block"),a=W(We,"color-block-active");return r.createElement(r.Fragment,null,!o&&r.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:10,paddingBottom:0}},X3.map(s=>r.createElement(Dl,{className:ue(i,{[a]:s.toUpperCase()===(e==null?void 0:e.toUpperCase())}),key:s,color:s,prefixCls:"rc-color-picker",onClick:()=>{t==null||t(s)}}))),r.createElement(Pl,{className:n,value:new Ll(e),onChange:s=>{const c=`#${s.toHex8().toUpperCase()}`,d=c.endsWith("FF")?`#${s.toHex().toUpperCase()}`:c;t==null||t(d)}}))},pl=16,Ws=e=>{var t,n;const o=(t=e.currentTarget.parentElement)===null||t===void 0?void 0:t.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),a=e.clientX-o.x-pl/2;let s=parseFloat((n=a/i.width)===null||n===void 0?void 0:n.toFixed(2));return s=Math.min(Math.max(s,0),1),s};function Z3(e){const{mode:t,value:n,internalColor:o,internalLinearGradient:i,internalRadialGradient:a,currentPickedColor:s,onChange:c,onSelectStop:d}=e,[l,h]=T.useState(yi(n)),[u,m]=T.useState(null),f=T.useRef(!1),v=W(We,"gradient-root"),g=W(We,"gradient-delete"),p=W(We,"gradient"),y=W(We,"gradient-bar"),S=W(We,"gradient-point"),E=W(We,"gradient-point-active");T.useEffect(()=>{var z;const V=yi(n);h(V),["linear-gradient","radial-gradient"].includes(n==null?void 0:n.type)&&(u||m((z=n==null?void 0:n.stops)===null||z===void 0?void 0:z[0]))},[n]),T.useEffect(()=>{u?d==null||d(Object.assign({},u)):d==null||d(u)},[u]);const w=z=>{z.stopPropagation(),f.current=!0;const V=Ws(z);let O=null;if(t==="linear-gradient"?O=i:t==="radial-gradient"&&(O=a),O){const N=[...O.stops];for(let H=0;H<N.length;H++){const _=N[H],L=N[H+1],k={offset:V,color:s};if(_.offset===V)break;if(V<_.offset){N.unshift(k),m(k);break}else if(_.offset<V&&V<(L==null?void 0:L.offset)){N.splice(H+1,0,k),m(k);break}else if(V>_.offset&&!L){N.push(k),m(k);break}if(!L)break}const B=Object.assign(Object.assign({},O),{stops:N});c==null||c(B)}},D=z=>{if(f.current===!0&&u){const V=Ws(z);let O=null;if(t==="linear-gradient"?O=i:t==="radial-gradient"&&(O=a),O){const N=[...O.stops];for(let _=0;_<N.length;_++){const L=N[_];if(L.offset===u.offset){L.offset=V,m(Object.assign({},L));break}}const B=N.sort((_,L)=>_.offset-L.offset),H=Object.assign(Object.assign({},O),{stops:B});c==null||c(H)}}},b=z=>{z.stopPropagation(),f.current=!1},x=(z,V)=>{z.stopPropagation(),m(V),f.current=!0},j=()=>{let z=null;t==="linear-gradient"?z=i:t==="radial-gradient"&&(z=a);let V=-1;if(z&&u){const O=[...z.stops];for(let N=0;N<O.length;N++)if(O[N].offset===u.offset){V=N;break}if(V>=0){O.splice(V,1);const N=Object.assign(Object.assign({},z),{stops:O});c==null||c(N)}}},P=()=>{f.current=!1};return T.useMemo(()=>{var z,V,O;return r.createElement(r.Fragment,null,(t==="linear-gradient"||t==="radial-gradient")&&r.createElement("div",{className:v},r.createElement("div",{className:p,"data-css":l,style:{background:l}},r.createElement("div",{className:y,onMouseDown:w,onMouseUp:b,onMouseMove:D,onMouseLeave:b},(O=(V=(z=t==="linear-gradient"?i:a)===null||z===void 0?void 0:z.stops)===null||V===void 0?void 0:V.map)===null||O===void 0?void 0:O.call(V,(N,B)=>r.createElement("span",{key:B,className:ue({[S]:!0,[E]:(u==null?void 0:u.offset)===N.offset}),style:{left:`calc(${N.offset*100}% - ${pl/2}px)`,background:N.color},onMouseDown:H=>{x(H,N)},onMouseUp:P})))),r.createElement("div",{className:g,onClick:N=>{N.stopPropagation(),j()}},r.createElement(b3,null))))},[t,l,s,o,i,a,u])}function Hs(e){let t="solid";return e&&(e!=null&&e.type)&&(t=e.type),t}function Q3(e){const{className:t,value:n,onChange:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,[c,d]=T.useState(yi(n)),[l,h]=T.useState(Hs(n)),[u,m]=T.useState("#000000"),[f,v]=T.useState(null),[g,p]=T.useState(null),[y,S]=T.useState(null),E=T.useRef(null),w=T.useRef(null),D=T.useRef(null),b=W(We),x=W(We,"header"),j=W(We,"internal-picker"),P=W(We,"radio-group"),z=W(We,"row"),V=W(We,"col"),O=W(We,"input"),N=W(We,"form-item");T.useEffect(()=>{d(yi(n)),h(Hs(n)),typeof n=="string"?(v(n),m(n)):(n==null?void 0:n.type)==="linear-gradient"?p(n):(n==null?void 0:n.type)==="radial-gradient"&&S(n)},[n]),T.useEffect(()=>{var k,C;l==="linear-gradient"&&(n==null?void 0:n.type)===l?(k=w.current)===null||k===void 0||k.setFieldsValue(n):l==="radial-gradient"&&(n==null?void 0:n.type)===l&&((C=D.current)===null||C===void 0||C.setFieldsValue(n))},[l,n]);const B=k=>{var C,Y,G,R,$,Q;let I;k==="linear-gradient"?(I={type:"linear-gradient",start:{x:0,y:0},end:{x:0,y:(i==null?void 0:i.h)||0},stops:[]},typeof n=="string"?(I.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],p(I)):(n==null?void 0:n.type)==="radial-gradient"&&(I.stops=[...(n==null?void 0:n.stops)||[]],p(I)),(C=w.current)===null||C===void 0||C.setFieldsValue(I)):k==="radial-gradient"?(I={type:"radial-gradient",inner:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:0},outer:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:Math.min(((i==null?void 0:i.w)||0)/2,((i==null?void 0:i.h)||0)/2)},stops:[]},typeof n=="string"?(I.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],S(I)):(n==null?void 0:n.type)==="linear-gradient"&&(I.stops=[...(n==null?void 0:n.stops)||[]],S(I)),(Y=D.current)===null||Y===void 0||Y.setFieldsValue(I)):k==="solid"&&(I=n,(n==null?void 0:n.type)==="linear-gradient"?(I=((R=(G=n==null?void 0:n.stops)===null||G===void 0?void 0:G[0])===null||R===void 0?void 0:R.color)||"#000000",v(I)):(n==null?void 0:n.type)==="radial-gradient"&&(I=((Q=($=n==null?void 0:n.stops)===null||$===void 0?void 0:$[0])===null||Q===void 0?void 0:Q.color)||"#000000",v(I))),I&&(o==null||o(I))},H=k=>{if(l==="solid")o==null||o(k.color);else if(E.current){if(l==="linear-gradient"&&g&&Array.isArray(g==null?void 0:g.stops)){const C=[...g.stops];for(let G=0;G<C.length;G++)if(C[G].offset===E.current.offset){C[G].color=k.color;break}const Y=Object.assign(Object.assign({},g),{stops:C});p(Y),o==null||o(Y)}else if(l==="radial-gradient"&&y&&Array.isArray(y==null?void 0:y.stops)){const C=[...y.stops];for(let G=0;G<C.length;G++)if(C[G].offset===E.current.offset){C[G].color=k.color;break}const Y=Object.assign(Object.assign({},y),{stops:C});S(Y),o==null||o(Y)}}},_=k=>{const C=Object.assign({},g);k!=null&&k.start&&(C.start=Object.assign(Object.assign({},C.start),k.start)),k!=null&&k.end&&(C.end=Object.assign(Object.assign({},C.end),k.end)),o==null||o(C)},L=k=>{const C=Object.assign({},y);k!=null&&k.inner&&(C.inner=Object.assign(Object.assign({},C.inner),k.inner)),k!=null&&k.outer&&(C.outer=Object.assign(Object.assign({},C.outer),k.outer)),o==null||o(C)};return T.useMemo(()=>r.createElement("div",{className:ue(b,t)},!a&&!s&&r.createElement("div",{className:x},r.createElement(nt.Group,{className:P,size:"small",buttonStyle:"solid",value:l,onChange:({target:{value:k}})=>{B(k)}},r.createElement(nt.Button,{value:"solid"},r.createElement(L3,null)),!a&&r.createElement(nt.Button,{value:"linear-gradient"},r.createElement(T3,null)),!s&&r.createElement(nt.Button,{value:"radial-gradient"},r.createElement(S3,null)))),!a&&l==="linear-gradient"&&r.createElement("div",{style:{marginBottom:10}},r.createElement(q,{ref:w,onValuesChange:_},r.createElement(he,{className:z},r.createElement(K,{className:V,span:"4"},"Start"),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["start","x"]},r.createElement(de,{className:O,size:"small",prefix:"X"}))),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["start","y"]},r.createElement(de,{className:O,size:"small",prefix:"Y"})))),r.createElement(he,{className:z},r.createElement(K,{className:V,span:"4"},"End"),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["end","x"]},r.createElement(de,{className:O,size:"small",prefix:"X"}))),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["end","y"]},r.createElement(de,{className:O,size:"small",prefix:"Y"})))))),!s&&l==="radial-gradient"&&r.createElement("div",{style:{marginBottom:10}},r.createElement(q,{ref:D,onValuesChange:L},r.createElement(he,{className:z},r.createElement(K,{className:V,span:"4"},"Inner"),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["inner","x"]},r.createElement(de,{className:O,size:"small",prefix:"X"}))),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["inner","y"]},r.createElement(de,{className:O,size:"small",prefix:"Y"})))),r.createElement(he,{className:z},r.createElement(K,{className:V,span:"4"}),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["inner","radius"]},r.createElement(de,{className:O,size:"small",prefix:"R"})))),r.createElement(he,{className:z},r.createElement(K,{className:V,span:"4"},"Outer"),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["outer","x"]},r.createElement(de,{className:O,size:"small",prefix:"X"}))),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["outer","y"]},r.createElement(de,{className:O,size:"small",prefix:"Y"})))),r.createElement(he,{className:z},r.createElement(K,{className:V,span:"4"}),r.createElement(K,{className:V,span:"10"},r.createElement(q.Item,{className:N,name:["outer","radius"]},r.createElement(de,{className:O,size:"small",prefix:"R"})))))),(!a||!s)&&(l==="linear-gradient"||l==="radial-gradient")&&r.createElement(Z3,{mode:l,value:n,currentPickedColor:u,internalColor:f,internalLinearGradient:g,internalRadialGradient:y,onChange:k=>{(k==null?void 0:k.type)==="linear-gradient"?(p(k),o==null||o(k)):(k==null?void 0:k.type)==="radial-gradient"&&(S(k),o==null||o(k))},onSelectStop:k=>{k!=null&&k.color&&m(k.color),E.current=k}}),r.createElement(U3,{diabledColorBlocks:["linear-gradient","radial-gradient"].includes(l),value:u,className:j,onChange:k=>{m(k),H({color:k})}})),[l,c,f,g,y,u,a,s])}const Gs="base-element-field-multiple-color";function sn(e){const{value:t,onChange:n,disabled:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,c=Ft(),l=(p=>{let y="";return typeof p=="string"?y=p:["linear-gradient","radial-gradient"].includes(p==null?void 0:p.type)&&(y=c.gradient),y})(t),h=typeof t=="string",{container:u,getContainer:m}=T.useContext(rn),f=W(Gs),v=W(Gs,"preview"),g=T.useRef(u);return T.useEffect(()=>{!g.current&&u&&(g.current=u)},[u]),T.useMemo(()=>{const p=cc(t||"transparent");return r.createElement(r.Fragment,null,r.createElement(Bt,{className:f,size:"small",disabled:o,prefix:o?r.createElement("span",null):r.createElement(er,{placement:"left",getPopupContainer:m,style:{padding:0},content:r.createElement(Q3,{value:t,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s,onChange:n}),trigger:"click"},r.createElement("span",{className:v,style:{background:p}})),readOnly:!h,value:l,onChange:y=>{n==null||n(y.target.value)}}))},[t,n,o,i])}const ta=e=>r.createElement(ne,Object.assign({},e),r.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},r.createElement("path",{d:"M512 384a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m0 170.666667a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m170.666667 0a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m-170.666667 170.666666a42.666667 42.666667 0 1 0-42.666667-42.666666 42.666667 42.666667 0 0 0 42.666667 42.666666z m341.333333-597.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v682.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h682.666666a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667z m-42.666666 682.666667H213.333333V213.333333h597.333334zM341.333333 554.666667a42.666667 42.666667 0 1 0-42.666666-42.666667 42.666667 42.666667 0 0 0 42.666666 42.666667z"}))),Zn="base-element-border-attribute",Sa=4;function Qn(e){const{borderRadius:t,borderWidth:n,borderColor:o,boxSizing:i,borderDash:a}=(e==null?void 0:e.detail)||{};let s="solid",c=Sa;Array.isArray(a)&&(a==null?void 0:a.length)>0&&a[0]>=1&&typeof n=="number"&&(s="dash",c=Math.ceil(a[0]));const d={borderRadiusList:[0,0,0,0],borderWidthList:[0,0,0,0],borderColor:o,borderType:s,boxSizing:i,borderDashNum:c};return typeof t=="number"?(d.borderRadius=t,d.borderRadiusList=[t,t,t,t]):Array.isArray(t)?d.borderRadiusList=[t[0]||0,t[1]||0,t[2]||0,t[3]||0]:d.borderRadius=0,typeof n=="number"?(d.borderWidth=n,d.borderWidthList=[n,n,n,n]):Array.isArray(n)?d.borderWidthList=[n[0]||0,n[1]||0,n[2]||0,n[3]||0]:d.borderWidth=0,d}const J3=e=>{var t,n;const{className:o,style:i,element:a,disabled:s,onChange:c}=e,d=T.useRef(null),l=W(Zn),h=W(Zn,"row"),u=W(Zn,"col"),m=W(Zn,"input"),f=W(Zn,"form-item"),[v,g]=T.useState(Array.isArray((t=a==null?void 0:a.detail)===null||t===void 0?void 0:t.borderRadius)),[p,y]=T.useState(Array.isArray((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.borderWidth)),[S,E]=T.useState(p),w=Ft(),D=b=>{var x,j;const P=Qn(a),{borderColor:z,boxSizing:V,borderType:O,borderDashNum:N}=b,B={};if(z&&(B.borderColor=z),V&&(B.boxSizing=V),p===!0&&b.borderWidthList){const H=[0,0,0,0],_=Array.from((b==null?void 0:b.borderWidthList)||[null,null,null,null]);for(let L=0;L<4;L++){const k=_[L];typeof k=="number"?H[L]=k:H[L]=((x=P==null?void 0:P.borderWidthList)===null||x===void 0?void 0:x[L])||0,B.borderWidth=H}}else typeof b.borderWidth=="number"&&(B.borderWidth=b.borderWidth);if(v===!0&&b.borderRadiusList){const H=[0,0,0,0],_=Array.from((b==null?void 0:b.borderRadiusList)||[null,null,null,null]);for(let L=0;L<4;L++){const k=_[L];typeof k=="number"?H[L]=k:H[L]=((j=P==null?void 0:P.borderRadiusList)===null||j===void 0?void 0:j[L])||0,B.borderRadius=H}}else typeof b.borderRadius=="number"&&(B.borderRadius=b.borderRadius);p===!0?B.borderDash=[]:O==="solid"?B.borderDash=[]:O==="dash"?B.borderDash=[Sa,Sa]:N&&N>0&&(B.borderDash=[N,N]),c==null||c({detail:B})};return T.useEffect(()=>{var b,x,j;const P=Array.isArray((b=a==null?void 0:a.detail)===null||b===void 0?void 0:b.borderWidth),z=Array.isArray((x=a==null?void 0:a.detail)===null||x===void 0?void 0:x.borderRadius);y(P),g(z),E(P);const V=Qn(a);(j=d.current)===null||j===void 0||j.setFieldsValue(V)},[a]),T.useMemo(()=>{const b=Qn(a);return r.createElement(q,{ref:d,style:i,className:ue(l,o),onValuesChange:D},r.createElement(r.Fragment,null,r.createElement(he,{className:h},r.createElement(K,{span:16,className:u},p?r.createElement(Bt,{className:m,size:"small",prefix:r.createElement(ta,{style:{fontSize:14}}),disabled:!0,value:w.mixedBorderWidth}):r.createElement(q.Item,{className:f,name:"borderWidth"},r.createElement(de,{className:m,size:"small",min:0,placeholder:"Border Width",prefix:r.createElement(ta,{style:{fontSize:14}}),disabled:s||p}))),r.createElement(K,{span:4,className:u},r.createElement(Re,{icon:r.createElement(ta,null),size:"small",disabled:s,type:p?"primary":"default",onClick:()=>{var x;const j=!p;if(y(j),E(j),!j){const P=Qn(a),z=P.borderWidth||((x=P.borderWidthList)===null||x===void 0?void 0:x[0])||0;D({borderWidth:z})}}}))),p&&r.createElement(r.Fragment,null,r.createElement(he,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderWidthList",0]},r.createElement(de,{className:m,size:"small",prefix:r.createElement(m3,null),disabled:s||!p,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderWidthList",1]},r.createElement(de,{className:m,size:"small",prefix:r.createElement(h3,null),disabled:s||!p,min:0})))),r.createElement(he,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderWidthList",2]},r.createElement(de,{className:m,size:"small",prefix:r.createElement(c3,null),disabled:s||!p,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderWidthList",3]},r.createElement(de,{className:m,size:"small",prefix:r.createElement(u3,null),disabled:s||!p,min:0})))))),!["circle"].includes(a==null?void 0:a.type)&&r.createElement(r.Fragment,null,r.createElement(he,{className:h},r.createElement(K,{span:16,className:u},v?r.createElement(Bt,{className:m,size:"small",prefix:r.createElement(_s,{style:{fontSize:14}}),disabled:!0,value:w.mixedBorderRadius}):r.createElement(q.Item,{className:f,name:"borderRadius"},r.createElement(de,{className:m,size:"small",placeholder:"Radius",prefix:r.createElement(_s,{style:{fontSize:14}}),disabled:s||v||S,min:0}))),r.createElement(K,{span:4,className:u},r.createElement(Re,{icon:r.createElement(M3,null),size:"small",disabled:s||S,type:v?"primary":"default",onClick:()=>{var x;const j=!v;if(g(j),!j){const P=Qn(a),z=P.borderRadius||((x=P.borderRadiusList)===null||x===void 0?void 0:x[0])||0;D({borderRadius:z})}}}))),v&&r.createElement(r.Fragment,null,r.createElement(he,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderRadiusList",0]},r.createElement(de,{className:m,size:"small",placeholder:"",prefix:r.createElement(y3,null),disabled:s||!v||S,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderRadiusList",1]},r.createElement(de,{className:m,size:"small",placeholder:"",prefix:r.createElement(w3,null),disabled:s||!v||S,min:0})))),r.createElement(he,{className:h},r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderRadiusList",2]},r.createElement(de,{className:m,size:"small",placeholder:"",prefix:r.createElement(v3,null),disabled:s||!v||S,min:0}))),r.createElement(K,{span:12,className:u},r.createElement(q.Item,{className:f,name:["borderRadiusList",3]},r.createElement(de,{className:m,size:"small",placeholder:"",prefix:r.createElement(p3,null),disabled:s||!v||S,min:0})))))),r.createElement(he,{className:h},r.createElement(K,{className:u,span:"11"},r.createElement(q.Item,{className:f,name:"boxSizing"},r.createElement(He,{size:"small",disabled:s},r.createElement(He.Option,{value:"border-box"},w.inside),r.createElement(He.Option,{value:"content-box"},w.outside),r.createElement(He.Option,{value:"center-line"},w.centerLine)))),r.createElement(K,{className:u,span:"13"},r.createElement(q.Item,{className:f,name:"borderColor"},r.createElement(sn,{elementSize:a?on(a):void 0,disabled:s,disabledLinearGradient:!0,disabledRadialGradient:!0})))),r.createElement(he,{className:h},r.createElement(K,{className:u,span:"11"},r.createElement(q.Item,{className:f,name:"borderType"},r.createElement(He,{size:"small",disabled:s||p},r.createElement(He.Option,{value:"solid"},w.solid),r.createElement(He.Option,{value:"dash"},w.dash)))),r.createElement(K,{className:u,span:"13"},b.borderType==="dash"&&r.createElement(q.Item,{className:f,name:"borderDashNum"},r.createElement(de,{disabled:s||p,className:m,size:"small",style:{width:"100%"},prefix:r.createElement(d3,{style:{fontSize:14}})})))))},[w,a,s,v,p,S])},K3="base-element-detail-circle",q3=e=>{const{className:t,style:n}=e,o=W(K3);return T.useMemo(()=>r.createElement("div",{style:n,className:ue(o,t)}),[n,t])};var e6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const{TextArea:t6}=Bt,yn="base-element-field-image-picker",{useCallback:Ys}=r,n6=["image/png","image/jpeg","image/jpg","image/png"],o6=({value:e="",onChange:t})=>{const[n,o]=T.useState(e),[i,a]=T.useState("free"),s=W(yn),c=W(yn,"box"),d=W(yn,"entity"),l=W(yn,"action"),h=W(yn,"action-text"),u=W(yn,"action-upload"),m=Ys(p=>{const y=p||"";let S=3;const E=300;return y.length>128&&(S=10),{rows:S,width:E}},[n]),f=p=>{t==null||t(p||e)},v=p=>{o(p),xe.imageSrc(p)&&f(p)},g=Ys(()=>{i!=="picking"&&(xa({success:p=>e6(void 0,void 0,void 0,function*(){if(n6.includes(p.file.type)!==!0){go.error(`File's type "${p.file.type}" is not supported!`);return}try{const y=yield ac(p.file);v(y.toString())}catch{go.error(`Failed to parse file ${p.file.name}`)}a("free")}),error:p=>{console.log(p),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return T.useMemo(()=>r.createElement("div",{className:s},r.createElement("div",{className:c},r.createElement("img",{className:d,src:e||n}),r.createElement("div",{className:l},r.createElement("div",{className:h},r.createElement(er,{content:()=>r.createElement("div",null,r.createElement(t6,{value:e||n,style:{width:m(e||n).width},rows:m(e||n).rows,onChange:p=>{v(p.target.value||"")}})),trigger:"click"},r.createElement("span",{style:{display:"inline-block",width:"100%",height:"100%",lineHeight:"50px"}},"URL"))),r.createElement("div",{onClick:g,className:u},r.createElement("span",null,"Upload"))))),[e,n])},i6="base-element-detail-image",a6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=W(i6),l=T.useRef(null),h=m=>{const{src:f=""}=(m==null?void 0:m.detail)||{};return{src:f,imageResource:(a==null?void 0:a(f))||""}},u=m=>{const f={};if(m!=null&&m.imageResource){const{assetId:v}=s({type:"image",value:m.imageResource});v&&qt(v)&&(f.src=v)}i==null||i({detail:f})};return T.useEffect(()=>{var m;const f=h(o);(m=l.current)===null||m===void 0||m.setFieldsValue(f)},[o]),T.useMemo(()=>r.createElement("div",{style:n,className:ue(d,t)},r.createElement(q,{ref:l,onValuesChange:u},r.createElement(q.Item,{name:"imageResource"},r.createElement(o6,null)))),[o,c])},ko="base-element-detail-path",s6=e=>{const{fill:t,stroke:n}=(e==null?void 0:e.detail)||{};return{fill:t,stroke:n}},r6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=T.useRef(null),c=W(ko),d=W(ko,"row"),l=W(ko,"col"),h=W(ko,"form-item"),u=Ft(),m=f=>{const v=f;i==null||i({detail:v})};return T.useEffect(()=>{var f;const v=s6(o);(f=s.current)===null||f===void 0||f.setFieldsValue(v)},[o]),T.useMemo(()=>r.createElement("div",{style:n,className:ue(c,t)},r.createElement(q,{ref:s,onValuesChange:m},r.createElement(he,{className:d},r.createElement(K,{className:l,span:"10"},u.fill),r.createElement(K,{className:l,span:"14"},r.createElement(q.Item,{className:h,name:"fill"},r.createElement(sn,{disabled:a})))),r.createElement(he,{className:d},r.createElement(K,{className:l,span:"10"},u.stroke),r.createElement(K,{className:l,span:"14"},r.createElement(q.Item,{className:h,name:"stroke"},r.createElement(sn,{disabled:a})))))),[n,t])},l6="base-element-detail-rect",c6=e=>{const{className:t,style:n}=e,o=W(l6);return T.useMemo(()=>r.createElement("div",{style:n,className:ue(o,t)}),[n,t])};var d6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const Jn="base-element-field-svg-picker",u6=["image/svg+xml"];function h6(e){const t=document.createElement("div");return t.innerHTML=e,document.querySelector("svg").setAttribute("_t",Date.now()+""),{__html:t.innerHTML}}const m6=({value:e="",onChange:t})=>{const[n,o]=T.useState(e),[i,a]=T.useState("free"),s=W(Jn),c=W(Jn,"box"),d=W(Jn,"entity"),l=W(Jn,"action"),h=W(Jn,"action-upload"),u=v=>{t==null||t(v||e)},m=v=>{o(v),xe.svg(v)&&u(v)},f=T.useCallback(()=>{i!=="picking"&&(xa({success:v=>d6(void 0,void 0,void 0,function*(){if(u6.includes(v.file.type)!==!0){go.error(`File's type "${v.file.type}" is not supported!`);return}try{let g=(yield sc(v.file)).toString();g=g.substring(g.indexOf("<svg")),m(g)}catch{go.error(`Failed to parse file ${v.file.name}`)}a("free")}),error:v=>{console.log(v),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return T.useMemo(()=>r.createElement("div",{className:s},r.createElement("div",{className:c},r.createElement("div",{className:d,dangerouslySetInnerHTML:h6(e||n)}),r.createElement("div",{className:l},r.createElement("div",{onClick:f,className:h},r.createElement("span",null,"Upload"))))),[e,n])},f6="base-element-detail-svg",g6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=W(f6),l=T.useRef(null),h=m=>{const{svg:f=""}=(m==null?void 0:m.detail)||{};return{svg:f,svgResource:(a==null?void 0:a(f))||""}},u=m=>{const f={};if(m!=null&&m.svgResource){const{assetId:v}=s({type:"svg",value:m.svgResource});v&&qt(v)&&(f.svg=v)}i==null||i({detail:f})};return T.useEffect(()=>{var m;const f=h(o);(m=l.current)===null||m===void 0||m.setFieldsValue(f)},[o]),T.useMemo(()=>r.createElement("div",{style:n,className:ue(d,t)},r.createElement(q,{ref:l,onValuesChange:u},r.createElement(q.Item,{name:"svgResource"},r.createElement(m6,null)))),[o,c])},Kn="base-element-detail-text",wn={fontSize:20},{TextArea:v6}=Bt,bn=e=>xe.number(e*1)?ye(e*1):e,p6=e=>{const{color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s,text:c=""}=(e==null?void 0:e.detail)||{};return{text:c,color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s}},y6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=W(Kn),c=W(Kn,"row"),d=W(Kn,"col"),l=W(Kn,"switch"),h=W(Kn,"form-item"),u=T.useRef(null);T.useEffect(()=>{var f;const v=p6(o);(f=u.current)===null||f===void 0||f.setFieldsValue(v)},[o]);const m=f=>{i==null||i({detail:f})};return T.useMemo(()=>r.createElement("div",{style:n,className:ue(s,t)},r.createElement(q,{ref:u,style:n,className:s,onValuesChange:m},r.createElement(he,{className:c},r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:h,name:"verticalAlign"},r.createElement(nt.Group,{disabled:a,className:l,size:"small"},r.createElement(nt.Button,{value:"top"},r.createElement(k3,{style:wn})),r.createElement(nt.Button,{value:"middle"},r.createElement(R3,{style:wn})),r.createElement(nt.Button,{value:"bottom"},r.createElement(O3,{style:wn}))))),r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:h,name:"textAlign"},r.createElement(nt.Group,{disabled:a,className:l,size:"small"},r.createElement(nt.Button,{value:"left"},r.createElement(a3,{style:wn})),r.createElement(nt.Button,{value:"center"},r.createElement(i3,{style:wn})),r.createElement(nt.Button,{value:"right"},r.createElement(s3,{style:wn})))))),r.createElement(he,{className:c},r.createElement(K,{span:"10",className:d},"Text Color"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"color"},r.createElement(sn,{elementSize:o?on(o):void 0,disabled:a,disabledLinearGradient:!0,disabledRadialGradient:!0})))),r.createElement(he,{className:c},r.createElement(K,{span:"10",className:d},"Font Size"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"fontSize"},r.createElement(de,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:bn,parser:bn})))),r.createElement(he,{className:c},r.createElement(K,{span:"10",className:d},"Font Weight"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"fontWeight"},r.createElement(de,{disabled:a,size:"small",style:{width:"100%"},step:100,max:1e3,min:100,formatter:bn,parser:bn})))),r.createElement(he,{className:c},r.createElement(K,{span:"10",className:d},"Line Height"),r.createElement(K,{span:"14",className:d},r.createElement(q.Item,{className:h,name:"lineHeight"},r.createElement(de,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:bn,parser:bn})))),r.createElement(he,{className:c},r.createElement(K,{span:"24",className:d},r.createElement(q.Item,{className:h,name:"text",style:{width:"100%"}},r.createElement(v6,{disabled:a,style:{width:"100%"},rows:3})))))),[n,t])},jo="base-element-detail-group",w6=e=>{const{overflow:t}=(e==null?void 0:e.detail)||{};return{overflow:t}},b6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=W(jo),c=W(jo,"row"),d=W(jo,"col"),l=W(jo,"form-item"),h=T.useRef(null),u=Ft();T.useEffect(()=>{var f;const v=w6(o);(f=h.current)===null||f===void 0||f.setFieldsValue(v)},[o]);const m=f=>{i==null||i({detail:f})};return T.useMemo(()=>r.createElement("div",{style:n,className:ue(s,t)},r.createElement(q,{ref:h,style:n,className:s,onValuesChange:m},r.createElement(he,{className:c},r.createElement(K,{className:d,span:"10"},u.overflow),r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:l,name:"overflow"},r.createElement(He,{size:"small",disabled:a},r.createElement(He.Option,{value:"visible"},u.visible),r.createElement(He.Option,{value:"hidden"},u.hidden))))))),[n,t,u])},S6="base-element-detail-attribute",E6=e=>{const{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}=e,s=W(S6);return T.useMemo(()=>r.createElement("div",{className:s},(t==null?void 0:t.type)==="circle"&&r.createElement(q3,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="image"&&r.createElement(a6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="svg"&&r.createElement(g6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="group"&&r.createElement(b6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="path"&&r.createElement(r6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="rect"&&r.createElement(c6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="text"&&r.createElement(y6,{element:t,onChange:n})),[o,t])},_o="base-element-content-attribute",C6=e=>{let{opacity:t}=(e==null?void 0:e.detail)||{};const{background:n}=(e==null?void 0:e.detail)||{};return typeof t=="number"&&t>=0&&t<=1||(t=1),{background:n,opacity:t}},x6=e=>{const{style:t,element:n,disabled:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=T.useRef(null),d=W(_o),l=W(_o,"row"),h=W(_o,"col"),u=W(_o,"form-item"),m=g=>{const p=g;i==null||i({detail:p})},f=g=>{i==null||i(g)},v=Ft();return T.useEffect(()=>{var g;const p=C6(n);(g=c.current)===null||g===void 0||g.setFieldsValue(p)},[n]),T.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(q,{ref:c,style:t,className:d,onValuesChange:m},["rect","circle","text","group"].includes(n==null?void 0:n.type)&&r.createElement(he,{className:l},r.createElement(K,{className:h,span:"10"},v.background),r.createElement(K,{className:h,span:"14"},r.createElement(q.Item,{className:u,name:"background"},r.createElement(sn,{elementSize:n?on(n):void 0,disabled:o})))),r.createElement(he,{className:l},r.createElement(K,{className:h,span:"10"},v.opacity),r.createElement(K,{className:h,span:"14"},r.createElement(q.Item,{className:u,name:"opacity"},r.createElement(de,{disabled:o,size:"small",style:{width:"100%"},step:.1}))))),r.createElement(E6,{element:n,disabled:o,onChange:f,getElementAsset:a,createElementAsset:s})),[v,n,o,i])},Vo="base-element-shadow-attribute",M6=e=>{const{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}=(e==null?void 0:e.detail)||{};return{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}},z6=e=>{const{style:t,element:n,disabled:o,onChange:i}=e,a=T.useRef(null),s=W(Vo),c=W(Vo,"row"),d=W(Vo,"col"),l=W(Vo,"form-item"),h=m=>{const f=m;i==null||i({detail:f})},u=Ft();return T.useEffect(()=>{var m;const f=M6(n);(m=a.current)===null||m===void 0||m.setFieldsValue(f)},[n]),T.useMemo(()=>r.createElement(q,{ref:a,style:t,className:s,onValuesChange:h},r.createElement(he,{className:c},r.createElement(K,{className:d,span:"14"},r.createElement(q.Item,{className:l,name:"shadowColor"},r.createElement(sn,{elementSize:n?on(n):void 0,disabled:o,disabledLinearGradient:!0,disabledRadialGradient:!0}))),r.createElement(K,{className:d,span:"10"},r.createElement(q.Item,{className:l,name:"shadowBlur"},r.createElement(de,{disabled:o,size:"small",style:{width:"100%"}})))),r.createElement(he,null,r.createElement(K,{className:d,span:"12"},r.createElement(q.Item,{className:l,name:"shadowOffsetX"},r.createElement(de,{disabled:o,size:"small",style:{width:"100%"},prefix:"X"}))),r.createElement(K,{className:d,span:"12"},r.createElement(q.Item,{className:l,name:"shadowOffsetY"},r.createElement(de,{disabled:o,size:"small",style:{width:"100%"},prefix:"Y"}))))),[u,n,o])},I6="base-element-detail",A6=cn(),T6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=Ft(),d=W(I6);let l=o;o&&(l=Object.assign(Object.assign({},o||{}),{detail:Object.assign(Object.assign({},A6),o==null?void 0:o.detail)}));const h=[{key:"basic-attribute",label:c.basicAttributes,children:r.createElement($3,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}})},{key:"border-attribute",label:c.borderAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?r.createElement(J3,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):r.createElement(jt,{image:jt.PRESENTED_IMAGE_SIMPLE,description:!1})},{key:"content-attribute",label:c.contentAttribute,children:r.createElement(x6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)},getElementAsset:a,createElementAsset:s})},{key:"shadow-attribute",label:c.shadowAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?r.createElement(z6,{element:l,disabled:!l,onChange:u=>{i==null||i(u)}}):r.createElement(jt,{image:jt.PRESENTED_IMAGE_SIMPLE,description:!1})}];return T.useMemo(()=>r.createElement("div",{style:n,className:ue(d,t)},r.createElement(Ea,{ghost:!0,items:h,size:"small",defaultActiveKey:h.map(u=>u.key)})),[l,c])},N6="LayoutDetail",Oa=()=>{const[e]=Ca(N6);return e},qn="base-element-basic-attribute",Nt=e=>xe.number(e*1)?ye(e*1):e,D6=e=>{const{className:t,style:n,layout:o,onChange:i,disabled:a,isGroupLayout:s}=e,c=T.useRef(null),d=W(qn),l=W(qn,"row"),h=W(qn,"col"),u=W(qn,"input"),m=W(qn,"form-item"),f=Oa(),v=g=>{i==null||i(g)};return T.useEffect(()=>{var g;const{x:p,y,w:S,h:E}=o||{},w={x:p,y,w:S,h:E};(g=c.current)===null||g===void 0||g.setFieldsValue(w)},[o]),T.useMemo(()=>r.createElement(q,{ref:c,style:n,className:ue(d,t),onValuesChange:v},!s&&r.createElement(he,{className:l},r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:m,name:"x"},r.createElement(de,{className:u,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:Nt,parser:Nt}))),r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:m,name:"y"},r.createElement(de,{className:u,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:Nt,parser:Nt})))),r.createElement(he,{className:l},r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:m,name:"w"},r.createElement(de,{className:u,size:"small",placeholder:"Width",prefix:f.w,disabled:a,formatter:Nt,parser:Nt}))),r.createElement(K,{span:10,className:h},r.createElement(q.Item,{className:m,name:"h"},r.createElement(de,{className:u,size:"small",placeholder:"Height",prefix:f.h,disabled:a,formatter:Nt,parser:Nt}))))),[f,a,o])},Bo="base-element-content-attribute",P6=e=>{const{background:t,overflow:n="visible"}=e||{};return{background:t,overflow:n}},L6=e=>{const{style:t,layout:n,disabled:o,onChange:i}=e,a=T.useRef(null),s=W(Bo),c=W(Bo,"row"),d=W(Bo,"col"),l=W(Bo,"form-item"),h=m=>{const f=m;i==null||i({detail:f})},u=Oa();return T.useEffect(()=>{var m;const f=P6(n==null?void 0:n.detail);(m=a.current)===null||m===void 0||m.setFieldsValue(f)},[n]),T.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(q,{ref:a,style:t,className:s,onValuesChange:h},r.createElement(he,{className:c},r.createElement(K,{className:d,span:"10"},u.background),r.createElement(K,{className:d,span:"14"},r.createElement(q.Item,{className:l,name:"background"},r.createElement(sn,{elementSize:n?on(n):void 0,disabled:o})))),r.createElement(he,{className:c},r.createElement(K,{className:d,span:"10"},u.overflow),r.createElement(K,{span:"12",className:d},r.createElement(q.Item,{className:l,name:"overflow"},r.createElement(He,{size:"small",disabled:o},r.createElement(He.Option,{value:"visible"},u.visible),r.createElement(He.Option,{value:"hidden"},u.hidden))))))),[u,n,o,i])},O6="base-layout-detail",R6=e=>{const{className:t,style:n,layout:o,onChange:i,isGroupLayout:a}=e,s=Oa(),c=W(O6),d=[{key:"layout-attribute",label:s.layout,children:r.createElement(r.Fragment,null,r.createElement(D6,{isGroupLayout:a,layout:o,onChange:l=>{i==null||i(l)}}),r.createElement(L6,{layout:o,onChange:l=>{i==null||i(l)}}))}];return T.useMemo(()=>r.createElement("div",{style:n,className:ue(c,t)},r.createElement(Ea,{ghost:!0,items:d,size:"small",defaultActiveKey:d.map(l=>l.key)})),[o,s])},k6="ElementDesign",j6="base-element-design",_6=e=>{var t;const{className:n,style:o,element:i,onElementChange:a,getElementAsset:s,createElementAsset:c,layout:d,onLayoutChange:l}=e,[h]=Ca(k6),u=[{key:"element-detail",label:h.element,children:r.createElement(T6,{element:i,onChange:a,getElementAsset:s,createElementAsset:c})},{key:"layout-detail",label:h.layout,children:r.createElement(R6,{isGroupLayout:((t=d==null?void 0:d.operations)===null||t===void 0?void 0:t.position)==="relative",layout:d,onChange:l})},{key:"global",label:h.global,children:r.createElement("div",{style:{padding:20,textAlign:"center"}},"TODO")}];return T.useMemo(()=>r.createElement("div",{style:o,className:ue(W(j6),n)},r.createElement(Ol,{size:"small",defaultActiveKey:u[0].key,items:u})),[i,a,s,c,d,l,h])},yl=e=>{var t;const n={uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,children:[],operations:e.operations||{}};return e.type==="group"&&Array.isArray((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.children)&&e.detail.children.forEach(o=>{n.children.push(yl(o))}),n};function Ce(e){const t=[];return e.elements.forEach(n=>{const o=yl(n);t.push(o)}),t}const V6=e=>({uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,operations:e.operations||{}});function po(e){const t=[];return e.elements.forEach(n=>{var o;if(n.type==="group"&&((o=n.extends)===null||o===void 0?void 0:o.isPage)===!0){const i=V6(n);t.push(i)}}),t}var B6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function Ot(e,t){if(e.length===0)return en(t);const n=Ge(e,t.elements),o={elements:[],assets:t.assets};if((n==null?void 0:n.type)==="group"){const{w:i,h:a,detail:s}=n,{children:c}=s,d=B6(s,["children"]),l={x:0,y:0,w:i,h:a,detail:Object.assign({},d),operations:{position:"relative"}};o.elements=en(c||[]),o.layout=l}return o}function F6(e,t,n){if(e.length>0){const o=Ge(e,n.elements);(o==null?void 0:o.type)==="group"&&(o.detail.children=t.elements)}}function W6(e,t,n){if(t.length>0&&(e!=null&&e.layout)){const o=e.layout,a=Ge(t,n.elements);(a==null?void 0:a.type)==="group"&&(xe.w(o.w)&&(a.w=o.w),xe.h(o.h)&&(a.h=o.h),a.detail=Object.assign(Object.assign({},a.detail),o.detail))}}function wl(e){var t,n,o,i,a,s,c,d,l,h;let u=e;for(let y=0;y<e.elements.length;y++){const S=e.elements[y];if(S.type==="group"&&((t=S.extends)===null||t===void 0?void 0:t.isPage)===!0)return u}const m=Ma(e.elements);let{x:f,y:v,w:g,h:p}=m;return xe.x((n=e==null?void 0:e.layout)===null||n===void 0?void 0:n.x)&&(f=Math.min(f,(o=e.layout)===null||o===void 0?void 0:o.x)),xe.y((i=e==null?void 0:e.layout)===null||i===void 0?void 0:i.y)&&(v=Math.min(v,(a=e.layout)===null||a===void 0?void 0:a.y)),xe.w((s=e==null?void 0:e.layout)===null||s===void 0?void 0:s.w)&&(g=Math.max(g,(c=e.layout)===null||c===void 0?void 0:c.w)),xe.h((d=e==null?void 0:e.layout)===null||d===void 0?void 0:d.h)&&(p=Math.max(p,(l=e.layout)===null||l===void 0?void 0:l.h)),e.elements.forEach(y=>{y.x-=f,y.y-=v}),u={elements:[{uuid:_t(),name:"Default page",type:"group",x:0,y:0,w:g,h:p,detail:Object.assign(Object.assign(Object.assign({},(h=e.layout)===null||h===void 0?void 0:h.detail),{children:e.elements}),g===0||p===0?{overflow:"visible"}:{}),extends:{isPage:!0}}],assets:e.assets},u}const bl="dark",Sl="en-US",El="data";function H6(e){let t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});(e==null?void 0:e.defaultEditMode)==="page"&&(t=wl(t));let n=[],o=t;const i=po(t);e!=null&&e.defaultEditingGroupUUID&&(n=ht(e.defaultEditingGroupUUID,t.elements)),(e==null?void 0:e.defaultEditMode)==="page"&&n.length!==1&&i.length>0&&(n=[0]),o=Ot(n,t);const a=Ce(o);return{localeCode:(e==null?void 0:e.defaultLocale)||Sl,themeMode:(e==null?void 0:e.defaultThemeMode)||bl,editMode:(e==null?void 0:e.defaultEditMode)||El,data:t,editingData:o,editingDataPosition:n,elementTree:a,pageTree:i,selectedUUIDs:(e==null?void 0:e.defaultSelectedElementUUIDs)||[],scaleInfo:Object.assign({scale:1,from:"init"},(e==null?void 0:e.defaultScaleInfo)||{})}}function G6(e){const t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});return{localeCode:Sl,themeMode:(e==null?void 0:e.themeMode)||bl,editMode:(e==null?void 0:e.editMode)||El,data:Object.assign({elements:[]},(e==null?void 0:e.data)||{}),editingData:Ot([],t),editingDataPosition:[],elementTree:[],pageTree:[],selectedUUIDs:[],scaleInfo:Object.assign({scale:1,from:"control"},(e==null?void 0:e.scaleInfo)||{})}}function Y6(e,t){var n,o,i;switch(t.type){case"update":return t!=null&&t.payload?Object.assign(Object.assign({},e),t==null?void 0:t.payload):e;case"updateThemeMode":return!((n=t==null?void 0:t.payload)===null||n===void 0)&&n.themeMode?Object.assign(Object.assign({},e),{themeMode:(o=t==null?void 0:t.payload)===null||o===void 0?void 0:o.themeMode}):e;case"updateEditingDataLayoutToTargetGroup":{if(!(!((i=t==null?void 0:t.payload)===null||i===void 0)&&i.editingData))return e;const{editingData:a}=t.payload;if(a.layout){const{editingDataPosition:s,data:c}=e;return W6(a,s,c),Object.assign(Object.assign({},e),{data:c,editingData:a})}return e}default:return e}}const xt=T.createContext({state:G6(),dispatch:()=>{}}),$6=xt.Provider,X6={locale:"en-US",NavMenu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",material:"Material",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio",materialTempate:"Material templates"},Toolbar:{layers:"Layers",ruler:"Ruler",attributes:"Attributes",hand:"Hand tool",centerContent:"Center content"},PanelPage:{pages:"Pages",addPage:"Add page",overview:"Overview",pcPageTemplates:"PC page templates",mobilePageTemplates:"Mobile page templates"},TemplatePreview:{add:"Add",cancel:"Cancel"},contextMenu:{copy:"Copy",paste:"Paste",cut:"Cut",delete:"Delete"}},U6={locale:"zh-CN",NavMenu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",material:"物料",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例",materialTempate:"物料模板"},Toolbar:{layers:"图层",ruler:"标尺",attributes:"属性",hand:"拖拽工具",centerContent:"内容居中"},PanelPage:{pages:"页面",addPage:"添加PC页面",overview:"预览",pcPageTemplates:"PC页面模板",mobilePageTemplates:"移动页面模板"},TemplatePreview:{add:"添加",cancel:"取消"},contextMenu:{copy:"复制",paste:"粘贴",cut:"剪切",delete:"删除"}},Z6={"en-US":X6,"zh-CN":U6},Fn=e=>{const{state:t}=T.useContext(xt),n=t.localeCode;return[T.useMemo(()=>{const a=Z6[n][e];return Object.assign({},a)},[n,e])]},Fo="mod-toolbar",Q6=()=>{const[e]=Fn("Toolbar");return e},J6=e=>{const{className:t,style:n,openLeftSider:o,openRightSider:i,onClickToggleLayer:a,onClickToggleSetting:s,sharedStore:c}=e,d={fontSize:16},l=W(Fo),h=W(Fo,"left"),u=W(Fo,"right"),m=W(Fo,"btn"),[f,v]=T.useState(!1),[g,p]=T.useState(!0),y=Q6();T.useEffect(()=>{const E=c.get("idraw");g===!0?E==null||E.enable("ruler"):E==null||E.disable("ruler")},[g]),T.useEffect(()=>{const E=c.get("idraw");E==null||E.setMode(f?"drag":"select")},[f]);const S={size:"small",className:m,shape:"default"};return T.useMemo(()=>r.createElement("div",{style:n,className:ue(l,t)},r.createElement("div",{className:h}),r.createElement("div",{className:u},r.createElement(zn,{title:y.layers},r.createElement(Re,Object.assign({},S,{type:o?"primary":"default",icon:r.createElement(z3,{style:d}),onClick:a}))),r.createElement(zn,{title:y.attributes},r.createElement(Re,Object.assign({},S,{type:i?"primary":"default",icon:r.createElement(P3,{style:d}),onClick:s}))),r.createElement(zn,{title:y.ruler},r.createElement(Re,Object.assign({},S,{type:g?"primary":"default",icon:r.createElement(D3,{style:Object.assign(Object.assign({},d),{fontSize:20})}),onClick:()=>{p(!g)}}))),r.createElement(zn,{title:y.hand},r.createElement(Re,Object.assign({},S,{type:f?"primary":"default",icon:r.createElement(E3,{style:Object.assign(Object.assign({},d),{fontSize:20})}),onClick:()=>{v(!f)}}))),r.createElement(zn,{title:y.centerContent},r.createElement(Re,Object.assign({},S,{type:"text",icon:r.createElement(o3,{style:Object.assign(Object.assign({},d),{fontSize:20})}),onClick:()=>{const E=c.get("idraw");E==null||E.centerContent()}}))))),[o,i,a,s,f,g,y])},eo="mod-panel-layer",K6=e=>{const{className:t,style:n,height:o,sharedStore:i,sharedEvent:a,useContextMenuOptions:s}=e,{state:c,dispatch:d}=T.useContext(xt),{elementTree:l,selectedUUIDs:h,editingData:u}=c,m=T.useRef(null),f=W(eo),v=W(eo,"content"),g=W(eo,"header"),p=W(eo,"header","title"),y=W(eo,"header","btn"),[S]=s({sharedEvent:a,sharedStore:i}),E=()=>{if(c.editingDataPosition.length===0)return"";const P=Ge(c.editingDataPosition,c.data.elements);return(P==null?void 0:P.name)||(P==null?void 0:P.type)||""},w=P=>{const z=i.get("idraw");z==null||z.selectElementsByPositions(P)};T.useEffect(()=>{a.on("scrollToLayer",({uuid:P})=>{var z;P&&((z=m.current)===null||z===void 0||z.scrollTo({key:P,align:"top"}))})},[]),T.useEffect(()=>{if(h[0]&&h.length===1){const z=za(h[0],u.elements).map(V=>V.uuid);h[0]&&z.push(h[0])}},[h,u]);const D=()=>{a.trigger("resetEditingView",{type:"back-root",position:null})},b=()=>{a.trigger("resetEditingView",{type:"back-one",position:null})},x=32,j=o-x;return T.useMemo(()=>Array.isArray(l)&&l.length>0?r.createElement("div",{style:n,className:ue(f,t),onContextMenu:P=>{P.preventDefault()}},r.createElement("div",{className:g,style:{height:x}},r.createElement(Re,{className:y,size:"small",icon:r.createElement(fl,null),disabled:!(c.editingDataPosition.length>0),onClick:D}),r.createElement(Re,{className:y,size:"small",icon:r.createElement(gl,null),disabled:!(c.editingDataPosition.length>0),onClick:b}),r.createElement("span",{className:p},E())),r.createElement(yo,{menu:{items:S},trigger:["contextMenu"]},r.createElement("div",{className:v},r.createElement(vl,{ref:m,height:j,treeData:l,selectedKeys:h,onTitleChange:({uuid:P,value:z})=>{Vt(P,{name:z},c.editingData.elements);const V=Ce(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:V}})},onOperationToggle:({uuid:P,operations:z})=>{Vt(P,{operations:z},c.editingData.elements);const V=Ce(u);d({type:"update",payload:{editingData:Object.assign({},u),elementTree:V}})},onSelect:P=>{h!=null&&h.includes(P.uuids[0])||w(P.positions)},onDrop:P=>{const{elements:z}=Si(u.elements,{from:P.from,to:P.to}),V=Ge(P.to,u.elements);V&&(V.x=0,V.y=0);const O=Ce(u);d({type:"update",payload:{editingData:Object.assign(Object.assign({},u),{elements:[...z]}),elementTree:O}})},onDelete:({uuid:P})=>{a.trigger("deleteElement",{uuid:P})},onGoToGroup:P=>{a.trigger("resetEditingView",{type:"go-to-next-group",position:P.position})}})))):r.createElement("div",{style:n,className:ue(f,t),onContextMenu:P=>{P.preventDefault()}},r.createElement("div",{className:g},"..."),r.createElement("div",{className:v},r.createElement("div",{style:{padding:"20px 0",textAlign:"center"}},"Empty"))),[j,l,h,u.elements,c.editingDataPosition,S])};var q6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Wo="item",eu=e=>{const{parentModName:t,className:n,style:o,width:i,height:a,onMount:s,item:c,onSelect:d,onPreview:l}=e,h=q6(e,["parentModName","className","style","width","height","onMount","item","onSelect","onPreview"]),u=T.useRef(null),m=T.useRef(null),f=T.useRef(c.element),v=W(t,Wo),g=W(t,Wo,"name"),p=W(t,Wo,"action"),y=W(t,Wo,"alert"),[S,E]=T.useState(!1),[w,D]=T.useState(null);return T.useEffect(()=>(i>0&&a>0&&u.current&&(m.current||(m.current=new Da(u.current,{width:i,height:a,devicePixelRatio:1}))),()=>{const b=m.current;b==null||b.destroy(),m.current=null}),[]),T.useEffect(()=>{const b=m.current;if(b){b.setMode("readOnly"),b.$offBoardWatcherEvents();const{element:x,staticResource:j}=c;x?(b.setData({elements:[x]}),b.centerContent()):j&&(E(!0),D(null),window.fetch(j).then(P=>P.json()).then(P=>{f.current=P,b.setData({elements:[P]}),b.centerContent()}).catch(P=>{const z=[P.name,P.message].join(", ");D(z)}).finally(()=>{E(!1)})),s==null||s({idraw:b})}},[c]),T.useMemo(()=>r.createElement(tr,{spinning:S},r.createElement("div",Object.assign({style:Object.assign(Object.assign({},o),{width:i,minHeight:a}),className:ue(v,n)},h),r.createElement(zn,{placement:"top",title:c.name},r.createElement("div",{className:g},c.name)),r.createElement("div",{ref:u}),r.createElement("div",{className:p},r.createElement(Re.Group,{size:"large"},r.createElement(Re,{size:"large",type:"primary"},r.createElement(Pa,{style:{fontSize:20},onClick:()=>{const b=f.current;b&&(b.name=c.name),l({element:b})}})),r.createElement(Re,{size:"large",type:"primary"},r.createElement(f3,{style:{fontSize:20},onClick:()=>{const b=f.current;b&&(b.name=c.name),d({element:b})}})))),w&&r.createElement(Rl,{className:y,type:"error",message:w,banner:!0}))),[S,w,c,l])},$s="detail",tu=e=>{const{data:t,canvasWidth:n,canvasHeight:o,parentModName:i,handler:a}=e,s=T.useRef(null),c=T.useRef(null),d=W(i,$s),l=W(i,$s,"canvas");return T.useImperativeHandle(a,()=>({resetData:h=>{var u,m;(u=c.current)===null||u===void 0||u.setData(h),(m=c.current)===null||m===void 0||m.centerContent()}}),[]),T.useEffect(()=>{if(!c.current&&s.current){const h={width:n,height:o,devicePixelRatio:window.devicePixelRatio},u=new Da(s.current,h);u.setData(t),u.centerContent(),c.current=u}return()=>{c.current&&(c.current.destroy(),c.current=null)}},[]),r.createElement("div",{className:d},r.createElement("div",{ref:s,className:l}))};var nu=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};const to="mod-template-preview",Cl={content:{width:490},header:{padding:"10px 20px"},body:{padding:"0"}},xl=e=>{const{className:t,style:n,getTemplates:o,onSelect:i,afterChangePagination:a}=e,s=W(to),c=W(to,"list"),d=W(to,"footer"),[l,h]=T.useState([]),[u,m]=T.useState(1),[f,v]=T.useState(8),[g,p]=T.useState(0),[y,S]=nr.useModal(),E=T.useRef(null),w=T.useRef(null),[D]=Fn("TemplatePreview"),b=j=>nu(void 0,void 0,void 0,function*(){var P;(P=E.current)===null||P===void 0||P.scrollTo(0,0);const z=yield o==null?void 0:o(j);Array.isArray(z==null?void 0:z.list)&&(h([...z.list]),m(z.current),v(z.pageSize),p(z.total))}),x=j=>{const{element:P}=j,z={elements:[]};P&&z.elements.push(P);const V=24,O=36,N=44,B=Math.min(720,window.innerWidth-V*2),H=Math.min(540,window.innerHeight-V*10-O-N),_=B+V*2,L=H+V*2+O+N,k=y.confirm({icon:null,width:_,styles:{content:{width:_,minHeight:L,padding:V}},closable:!0,title:(P==null?void 0:P.name)||"Unamed",content:r.createElement(tu,{data:z,parentModName:to,handler:w,canvasWidth:B,canvasHeight:H}),okText:D.add,onOk:()=>{i({element:P})},cancelText:D.cancel,onCancel:()=>{k.destroy()}})};return T.useEffect(()=>{b({pageSize:f,current:u}).then(()=>{}).catch(()=>{})},[]),T.useMemo(()=>r.createElement("div",{ref:E,style:n,className:ue(s,t)},r.createElement("div",{className:c},l.map((j,P)=>r.createElement(eu,{key:P,width:200,height:150,parentModName:to,item:j,onSelect:i,onPreview:z=>{x(Object.assign(Object.assign({},z),{locale:D}))}}))),r.createElement("div",{className:d},r.createElement(kl,{size:"small",pageSize:f,current:u,total:g,onChange:j=>{b({current:j,pageSize:f}),a==null||a()}})),S),[D,l,f,u,g,y,S,x])},ou={uuid:"8227861e-9ffd-c90b-6fe3-1959958afd05",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"05fd9c0a-63dc-fb63-2d50-2d8ea9c70280",name:"Splash",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#0D6EFD",borderRadius:30,borderDash:[],boxSizing:"border-box",opacity:1,overflow:"hidden",children:[]},operations:{}},{uuid:"737b2596-c70c-d90c-70d4-55af24cb1d61",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#FFFFFF",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"b8cde2a5-c0f5-ecf1-8d6e-8fab7a12b85c",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#FFFFFF",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"acadb1ff-7274-ae5c-a71e-9d4e4c18ea80",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#FFFFFF",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"d8b651a8-dad9-cfbf-7a9b-abe5983742f6",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"bbea2aa2-38ac-70b0-1355-110a4fb61484",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"0c188e29-8a38-c84d-7286-b96508908fe5",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#FFFFFF",opacity:1},operations:{}},{uuid:"ecb52e4d-2ecb-b88d-de13-708870f0061f",name:"Loading...",x:121,y:385,w:133,h:42,angle:0,type:"text",detail:{text:"Loading...",fontFamily:"Geometr415 Blk BT",fontSize:34,textAlign:"left",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:42,color:"#FFFFFF",opacity:1},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},iu={uuid:"3f827bd7-6a3a-e39c-7ec9-098895fc9f26",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#FFFFFF",borderRadius:30,borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"4c359376-7338-07dd-d533-fa43b329f948",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#1B1E28",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"baabee79-f1c0-f861-a3f0-3325d6d593c2",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#1B1E28",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"89b12005-beea-f2a6-a94b-7bfb9160bdc7",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"0abc02b1-addf-1816-5e57-cb0e3df44727",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"4335bf98-fdc8-1d55-2227-650d8e1866db",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"38d6aa8d-fd1a-963a-75b0-19645372ef26",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#1B1E28",opacity:1},operations:{}},{uuid:"5f97cb86-ef58-f353-9cb8-769f1b5aed90",name:"Home Indicator",x:121,y:799,w:134,h:5,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:100,borderDash:[],boxSizing:"center-line",borderColor:"transparent",borderWidth:0,opacity:1},operations:{}}],overflow:"hidden"},operations:{}},au=e=>({list:[{name:"Blank Page",element:iu},{name:"Loading Page",element:ou}],pageSize:8,current:1,total:2}),su="add-page-button",ru=e=>{const{className:t,style:n,parentModName:o,inPageOverview:i,sharedEvent:a,sharedStore:s,getPageTemplates:c}=e,d=W(o,su),[l]=Fn("PanelPage"),{getContainer:h}=T.useContext(rn),[u,m]=T.useState(!1),[f,v]=go.useMessage();return T.useMemo(()=>r.createElement(r.Fragment,null,r.createElement(Re,{size:"small",type:"text",style:n,className:ue(d,t),onClick:g=>{g.preventDefault(),g.stopPropagation(),m(!0)}},r.createElement(x3,{style:{fontSize:18}})),r.createElement(or,{title:l.addPage,placement:"left",onClose:()=>{m(!1)},styles:Cl,open:u,getContainer:h},r.createElement(xl,{getTemplates:c||au,onSelect:({element:g})=>{if(!g){f==null||f.error("Unexpected data");return}const p=uo(g),y=s.get("idraw"),S=y==null?void 0:y.getData(),E={x:0,y:0};if(y&&Array.isArray(S==null?void 0:S.elements)){const w=Ma(S.elements);E.x=w.x,E.y=w.y}a.trigger("addPage",{element:Object.assign(Object.assign({},p),E),inPageOverview:i}),m(!1)}})),v),[n,t,i,l,u])},Sn="mod-panel-page",Ut="page-tree",En="element-tree",Xs=1,Us=3,lu=e=>{const{className:t,style:n,height:o,defaultSelectedElementUUIDs:i=[],sharedStore:a,sharedEvent:s,useContextMenuOptions:c,getPageTemplates:d}=e,{state:l,dispatch:h}=T.useContext(xt),{pageTree:u,elementTree:m,selectedUUIDs:f,editingData:v,editingDataPosition:g,data:p}=l,y=T.useRef(null),S=T.useRef(null),E=32,[w,D]=T.useState([Ut,En]),[b,x]=T.useState(0),[j,P]=T.useState(0),[z,V]=T.useState(i),O=W(Sn),N=W(Sn,"content"),B=W(Sn,"header"),H=W(Sn,"header","title"),_=W(Sn,"header","btn"),[L]=c({sharedEvent:s,sharedStore:a}),[k]=Fn("PanelPage"),[C,Y]=T.useState(!1),G=T.useRef(C),R=T.useRef([]),$=()=>{const X=[],J=Ge([g[0]],l.data.elements);return J!=null&&J.uuid&&X.push(J.uuid),X},[Q,I]=T.useState($());T.useEffect(()=>{const X=a.get("idraw"),J=ae=>{if(G.current===!0){const{uuids:le=[]}=ae;I([...le])}};return X==null||X.on(ge.select,J),()=>{X==null||X.off(ge.select,J)}},[]),T.useEffect(()=>{var X;if(g.length===1&&u.length>0){const J=(X=u[g[0]])===null||X===void 0?void 0:X.uuid;J&&!Q.includes(J)&&I([J])}},[g]);const A=X=>{const J=Xs+Us;if(X.includes(Ut)&&X.includes(En)){const ae=o-E*2;x(ae*Xs/J),P(ae*Us/J)}else if(X.includes(Ut)&&!X.includes(En)){const ae=o-E*2;x(ae),P(0)}else if(!X.includes(Ut)&&X.includes(En)){const ae=o-E*2;x(0),P(ae)}else x(0),P(0)};T.useEffect(()=>{const X=a==null?void 0:a.get("idraw");let J=[];if(C===!0)s.trigger("resetEditingView",{type:"back-root",position:null}),I([]),J=[Ut],D(J),X==null||X.disable("selectInGroup");else{const ae=[];u.length>0&&(ae.push(u[0].uuid),s.trigger("resetEditingView",{type:"go-to-page",position:[0]})),I(ae),X==null||X.enable("selectInGroup"),J=[Ut,En],D(J)}A(J)},[o,C]),T.useEffect(()=>{G.current=C,s.trigger("switchPageOverview",{isPageOverview:!!C})},[C]);const M=()=>{if(g.length===0)return"";const X=Ge(g,l.data.elements);return(X==null?void 0:X.name)||(X==null?void 0:X.type)||""},F=X=>{const J=a.get("idraw");J==null||J.selectElementsByPositions(X)};T.useEffect(()=>{const X=({uuid:J})=>{var ae;J&&((ae=y.current)===null||ae===void 0||ae.scrollTo({key:J,align:"top"}))};return s.on("scrollToLayer",X),()=>{s.off("scrollToLayer",X)}},[]),T.useEffect(()=>{var X;f.length===1&&R.current[0]!==f[0]&&((X=y.current)===null||X===void 0||X.scrollTo({key:f[0],align:"auto"})),R.current=[...f]},[f]),T.useEffect(()=>{if(f[0]&&f.length===1){const J=za(f[0],v.elements).map(le=>le.uuid);f[0]&&J.push(f[0]);const ae=[...z];J.forEach(le=>{ae.includes(le)||ae.push(le)}),V(ae)}},[f,v]);const Z=X=>{X.stopPropagation(),g.length>1&&s.trigger("resetEditingView",{type:"go-to-group",position:[g[0]]})},se=X=>{X.stopPropagation(),s.trigger("resetEditingView",{type:"back-one",position:null})},re=[{key:Ut,collapsible:C?"disabled":void 0,label:r.createElement("div",{className:B,style:{height:E}},r.createElement("div",{style:{display:"flex"}},r.createElement("span",{style:{marginRight:10}},k.pages),r.createElement(Re,{className:_,style:{marginLeft:"10px"},size:"small",icon:r.createElement(I3,null),type:C?"primary":"default",onClick:X=>{X.stopPropagation(),Y(!C)}})),r.createElement("div",{style:{display:"flex"}},r.createElement(ru,{inPageOverview:C,parentModName:Sn,sharedEvent:s,sharedStore:a,getPageTemplates:d}))),children:r.createElement("div",{className:N,style:{height:b}},u.length>0?r.createElement(W3,{ref:S,height:b,treeData:u,selectedKeys:Q,onTitleChange:({uuid:X,value:J})=>{Vt(X,{name:J},p.elements);const le={pageTree:po(p),data:Object.assign({},p)};if(g.length===0){le.editingData=Object.assign({},p);const Ue=Ce(p);le.elementTree=Ue}h({type:"update",payload:le})},onSelect:X=>{if((X==null?void 0:X.positions.length)===1){const J=a.get("idraw");if(J==null||J.trigger(ge.select,{uuids:[]}),J==null||J.trigger(ge.clearSelect),C){Q!=null&&Q.includes(X.uuids[0])||(F(X.positions),I([X.uuids[0]]));return}s.trigger("resetEditingView",{type:"go-to-page",position:X.positions[0]});const ae=[],le=Ge(X.positions[0],l.data.elements);le!=null&&le.uuid&&(ae.push(le.uuid),I(ae))}},onDrop:X=>{if(!(X.from.length===1&&X.to.length===1))return;const{elements:J}=Si(p.elements,{from:X.from,to:X.to}),le={pageTree:po(p),data:Object.assign(Object.assign({},p),{elements:J})};if(g.length===0){le.editingData=Object.assign(Object.assign({},p),{elements:J});const Ue=Ce(p);le.elementTree=Ue}h({type:"update",payload:le})},onDelete:({uuid:X})=>{s.trigger("deletePage",{uuid:X})}}):r.createElement(jt,{image:jt.PRESENTED_IMAGE_SIMPLE,description:!1}))},{key:En,collapsible:C?"disabled":void 0,label:r.createElement("div",{className:B,style:{height:E}},r.createElement("div",{style:{display:"inline-flex"}},r.createElement(Re,{className:_,size:"small",icon:r.createElement(fl,null),disabled:!(g.length>1),onClick:Z}),r.createElement(Re,{className:_,size:"small",icon:r.createElement(gl,null),disabled:!(g.length>1),onClick:se})),r.createElement("span",{className:H},M())),children:r.createElement(yo,{menu:{items:L},trigger:["contextMenu"]},r.createElement("div",{className:N,style:{height:j}},m.length>0?r.createElement(vl,{ref:y,height:j,treeData:m,selectedKeys:f,onTitleChange:({uuid:X,value:J})=>{Vt(X,{name:J},l.editingData.elements);const ae=Ce(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:ae}})},onOperationToggle:({uuid:X,operations:J})=>{Vt(X,{operations:J},l.editingData.elements);const ae=Ce(v);h({type:"update",payload:{editingData:Object.assign({},v),elementTree:ae}});const le=a.get("idraw");J.locked===!0&&(le==null||le.cancelElements())},onSelect:X=>{f!=null&&f.includes(X.uuids[0])||F(X.positions)},onDrop:X=>{const{elements:J}=Si(v.elements,{from:X.from,to:X.to}),ae=Ge(X.to,v.elements);ae&&(ae.x=0,ae.y=0);const le=Ce(v);h({type:"update",payload:{editingData:Object.assign(Object.assign({},v),{elements:[...J]}),elementTree:le}})},onDelete:({uuid:X})=>{s.trigger("deleteElement",{uuid:X})},onGoToGroup:X=>{s.trigger("resetEditingView",{type:"go-to-next-group",position:X.position})},onExpand:(X,{node:J})=>{const ae=J.key;if(ae){let le=[...z];z.includes(ae)?le.splice(le.indexOf(ae),1):le=[...le,ae],V(le)}}}):r.createElement(jt,{image:jt.PRESENTED_IMAGE_SIMPLE,description:!1})))}];return T.useMemo(()=>r.createElement("div",{style:n,className:ue(O,t),onContextMenu:X=>{X.preventDefault()}},r.createElement(Ea,{ghost:!0,collapsible:"icon",items:re,size:"small",activeKey:w,onChange:X=>{if(Array.isArray(X)){const J=[...X];D(J),A(J)}}})),[o,b,j,u,m,f,z,p.elements,v.elements,g,C,Q,k])};var cu=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const du="mod-panel-detail",uu=e=>{const{className:t,style:n}=e,{state:o,dispatch:i}=T.useContext(xt),{selectedUUIDs:a,editingData:s,editingDataPosition:c}=o,d=W(du),l=T.useRef(s);T.useEffect(()=>{l.current=s},[s]);const h=()=>l.current,u=T.useCallback(p=>{if((a==null?void 0:a.length)===1&&a[0]){const y=a[0];Vt(y,p,s.elements),i({type:"update",payload:{editingData:Object.assign({},s)}})}},[s,a]),m=T.useCallback(p=>{var y;const{detail:S}=p,E=cu(p,["detail"]);delete E.operations;const w=h();if(E||S){const D=Object.assign(Object.assign(Object.assign({x:0,y:0},w.layout),E),{detail:Object.assign(Object.assign({},(y=w.layout)===null||y===void 0?void 0:y.detail),S)}),b=Object.assign(Object.assign({},w),{layout:D});i({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:b}})}},[s,a]),f=T.useCallback(p=>(a==null?void 0:a.length)>1?null:gr(p,h().elements),[s,a[0]]),v=T.useCallback(p=>{var y,S;let E=null;return p&&qt(p)&&(E=((S=(y=h().assets)===null||y===void 0?void 0:y[p])===null||S===void 0?void 0:S.value)||null),E},[s,a[0]]),g=T.useCallback(p=>{const y=Vn(p.value);return s.assets||(s.assets={}),s.assets[y]=p,{assetId:y,assetItem:p}},[s,a[0]]);return T.useMemo(()=>{const p=f(a[0]);return r.createElement("div",{style:n,className:ue(d,t),onContextMenu:y=>{y.preventDefault()}},r.createElement(_6,{element:p,onElementChange:u,getElementAsset:v,createElementAsset:g,layout:s.layout,onLayoutChange:m}))},[a[0],s.layout,c])},Ho="mod-export-image-file",Ra=700,hu=Ra+48,co=500,mu=Ra-co,Go={devicePixelRatio:1,fileName:"download.png"},fu=e=>{const{className:t,style:n,sharedStore:o}=e,i=W(Ho),a=W(Ho,"preview"),s=W(Ho,"options"),c=W(Ho,"canvas"),[d,l]=T.useState(null),[h,u]=T.useState(!0),[m,f]=T.useState(null),[v]=q.useForm(),g=T.useCallback(y=>{const S=o.get("idraw");S&&(u(!0),S.getImageBlobURL({devicePixelRatio:y}).then(({blobURL:E,width:w,height:D,devicePixelRatio:b})=>{E&&(f(E),l({width:w,height:D,devicePixelRatio:b}))}).catch(E=>{console.log(E)}).finally(()=>{u(!1)}))},[]);T.useEffect(()=>{v.setFieldsValue({devicePixelRatio:Go.devicePixelRatio,fileName:Go.fileName}),setTimeout(()=>{g(Go.devicePixelRatio)},10)},[]);const p=()=>{if(!m)return;const y=v.getFieldsValue(),S=document.createElement("a");S.href=m,S.download=y.fileName||Go.fileName,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return T.useMemo(()=>r.createElement("div",{style:Object.assign(Object.assign({},n),{width:Ra}),className:ue(i,t)},r.createElement(tr,{tip:"Loading...",spinning:h},r.createElement("div",{className:a,style:{width:co,height:co*3/4}},m&&r.createElement("img",{className:c,style:{maxWidth:co,maxHeight:co*3/4},src:m}))),r.createElement("div",{className:s,style:{width:mu}},r.createElement("div",{style:{marginBottom:6}},"Width: ",d==null?void 0:d.width),r.createElement("div",null,"Height: ",d==null?void 0:d.height),r.createElement(jl,null),r.createElement("div",null,r.createElement(q,{form:v,layout:"vertical",onValuesChange:y=>{y.devicePixelRatio>0&&setTimeout(()=>{g(y.devicePixelRatio)},10)},disabled:h},r.createElement(q.Item,{label:"Device pixel ratio",name:"devicePixelRatio"},r.createElement(He,{size:"small",options:[1,2,3,4].map(y=>({label:`x${y}`,value:y}))})),r.createElement(q.Item,{label:"File name",name:"fileName"},r.createElement(Bt,{size:"small",placeholder:"File name"})),r.createElement(Re,{type:"primary",onClick:p,disabled:h||!m,loading:h},"Download"))))),[d,h,m,g])};var gu=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{l(o.next(h))}catch(u){s(u)}}function d(h){try{l(o.throw(h))}catch(u){s(u)}}function l(h){h.done?a(h.value):i(h.value).then(c,d)}l((o=o.apply(e,t||[])).next())})};function vu(e){return new Promise(function(t,n){const o=new FileReader;o.onload=function(){t(o)},o.onerror=n,e.type==="application/json"?o.readAsText(e):o.readAsArrayBuffer(e)})}function pu(e){xa({accept:"application/json",success:t=>gu(this,void 0,void 0,function*(){var n,o,i;const s=(yield vu(t.file)).result;if(typeof s=="string")try{const c=JSON.parse(s);(n=e==null?void 0:e.success)===null||n===void 0||n.call(e,{json:c})}catch(c){(o=e==null?void 0:e.error)===null||o===void 0||o.call(e,c)}else(i=e==null?void 0:e.error)===null||i===void 0||i.call(e,Error("ERROR_PICK_FILE_FAIL"))}),error:e==null?void 0:e.error})}const yu={uuid:"b8b3fdea-d4ba-669b-803d-9aea7b86a5c8",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#0D6EFD",borderRadius:16,borderDash:[],boxSizing:"border-box",opacity:1,text:"Button",fontFamily:"SF UI Display",fontSize:20,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#FFFFFF"},operations:{}},wu={uuid:"07ddd6e3-b6a5-f843-4229-35673c811253",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1,text:"      user@example.com",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#1B1E28"},operations:{}},bu={uuid:"2adb5b3e-9798-a4ea-2cbe-d85c8c24eeb6",name:"Link",x:245,y:630,w:42,h:16,angle:0,type:"text",detail:{text:"Link",fontFamily:"SF UI Display",fontSize:14,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:16,color:"#0D6EFD",opacity:1},operations:{}},Su={uuid:"47186341-186f-0403-3f4e-3d467afe2016",name:"Password",x:0,y:0,w:335,h:56,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"9ff6159d-bede-8e89-baac-f91afa754a06",name:"Box",x:0,y:0,w:335,h:56,angle:0,type:"rect",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1},operations:{}},{uuid:"7a47c6df-cd8c-530f-f3b9-22b661f901eb",name:"Vector",x:297.00006103515625,y:20,w:20,h:16,angle:0,type:"path",detail:{commands:[{type:"M",params:[2.530330181121826,-.5303300619125366]},{type:"C",params:[2.2374367713928223,-.8232232928276062,1.7625631093978882,-.8232232928276062,1.4696699380874634,-.5303300619125366]},{type:"C",params:[1.176776647567749,-.23743686079978943,1.176776647567749,.23743686079978943,1.4696699380874634,.5303300619125366]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[17.469669342041016,16.530330657958984]},{type:"C",params:[17.762563705444336,16.823223114013672,18.237436294555664,16.823223114013672,18.530330657958984,16.530330657958984]},{type:"C",params:[18.823223114013672,16.237436294555664,18.823223114013672,15.76256275177002,18.530330657958984,15.469670295715332]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"Z",params:[]},{type:"M",params:[12.500185012817383,10.794958114624023]},{type:"C",params:[12.808830261230469,10.518712997436523,12.83509635925293,10.04456615447998,12.55885124206543,9.735921859741211]},{type:"C",params:[12.28260612487793,9.427276611328125,11.808459281921387,9.401010513305664,11.499814987182617,9.677255630493164]},{type:"L",params:[12.500185012817383,10.794958114624023]},{type:"Z",params:[]},{type:"M",params:[8.322744369506836,6.500185489654541]},{type:"C",params:[8.598989486694336,6.191540241241455,8.572724342346191,5.717393398284912,8.264079093933105,5.44114875793457]},{type:"C",params:[7.9554338455200195,5.1649041175842285,7.481287002563477,5.191169738769531,7.205042362213135,5.499814510345459]},{type:"L",params:[8.322744369506836,6.500185489654541]},{type:"Z",params:[]},{type:"M",params:[.8697054386138916,10.146900177001953]},{type:"L",params:[.3260757029056549,10.663588523864746]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"L",params:[.8697054386138916,10.146900177001953]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,5.8530988693237305]},{type:"L",params:[19.673925399780273,5.336410999298096]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"L",params:[19.130294799804688,5.8530988693237305]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,10.14690113067627]},{type:"L",params:[19.67392349243164,10.663589477539062]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"L",params:[19.130294799804688,10.14690113067627]},{type:"Z",params:[]},{type:"M",params:[.8697060346603394,5.853097915649414]},{type:"L",params:[.32607635855674744,5.336409568786621]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"L",params:[.8697060346603394,5.853097915649414]},{type:"Z",params:[]},{type:"M",params:[17.11528778076172,11.042052268981934]},{type:"C",params:[16.802886962890625,11.314040184020996,16.770124435424805,11.787782669067383,17.042112350463867,12.100184440612793]},{type:"C",params:[17.314102172851562,12.41258716583252,17.787843704223633,12.445348739624023,18.10024642944336,12.173359870910645]},{type:"L",params:[17.11528778076172,11.042052268981934]},{type:"Z",params:[]},{type:"M",params:[7.18831205368042,.6969932913780212]},{type:"C",params:[6.793071269989014,.8209197521209717,6.573127746582031,1.2417877912521362,6.697054386138916,1.6370283365249634]},{type:"C",params:[6.820981025695801,2.03226900100708,7.241848945617676,2.2522125244140625,7.637089252471924,2.1282858848571777]},{type:"L",params:[7.18831205368042,.6969932913780212]},{type:"Z",params:[]},{type:"M",params:[4.903543949127197,3.4355645179748535]},{type:"C",params:[5.252687454223633,3.212693214416504,5.355051517486572,2.74898362159729,5.132180690765381,2.3998398780822754]},{type:"C",params:[4.909309387207031,2.0506961345672607,4.4456000328063965,1.9483320713043213,4.096456050872803,2.171203136444092]},{type:"L",params:[4.903543949127197,3.4355645179748535]},{type:"Z",params:[]},{type:"M",params:[15.551521301269531,14.047059059143066]},{type:"C",params:[15.906437873840332,13.833499908447266,16.02103042602539,13.372659683227539,15.80747127532959,13.017744064331055]},{type:"C",params:[15.593912124633789,12.662827491760254,15.133071899414062,12.548234939575195,14.778156280517578,12.761794090270996]},{type:"L",params:[15.551521301269531,14.047059059143066]},{type:"Z",params:[]},{type:"M",params:[1.4696699380874634,.5303300619125366]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"L",params:[18.530330657958984,15.469670295715332]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"L",params:[1.4696699380874634,.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[6.25,8]},{type:"C",params:[6.25,10.071067810058594,7.928932189941406,11.75,10,11.75]},{type:"L",params:[10,10.25]},{type:"C",params:[8.757359504699707,10.25,7.75,9.242640495300293,7.75,8]},{type:"L",params:[6.25,8]},{type:"Z",params:[]},{type:"M",params:[10,11.75]},{type:"C",params:[10.959962844848633,11.75,11.837237358093262,11.388312339782715,12.500185012817383,10.794958114624023]},{type:"L",params:[11.499814987182617,9.677255630493164]},{type:"C",params:[11.101249694824219,10.033981323242188,10.576745986938477,10.25,10,10.25]},{type:"L",params:[10,11.75]},{type:"Z",params:[]},{type:"M",params:[7.205042362213135,5.499814510345459]},{type:"C",params:[6.611688137054443,6.16276216506958,6.25,7.040036678314209,6.25,8]},{type:"L",params:[7.75,8]},{type:"C",params:[7.75,7.423254489898682,7.966019153594971,6.8987507820129395,8.322744369506836,6.500185489654541]},{type:"L",params:[7.205042362213135,5.499814510345459]},{type:"Z",params:[]},{type:"M",params:[.32607579231262207,10.663588523864746]},{type:"C",params:[2.297703981399536,12.738021850585938,5.848983287811279,15.75,10,15.75]},{type:"L",params:[10,14.25]},{type:"C",params:[6.519985675811768,14.25,3.3532803058624268,11.671310424804688,1.4133350849151611,9.63021183013916]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,5.3364105224609375]},{type:"C",params:[17.70229721069336,3.261976718902588,14.151017189025879,.25,10,.25]},{type:"L",params:[10,1.75]},{type:"C",params:[13.480013847351074,1.75,16.64672088623047,4.328688621520996,18.5866641998291,6.369787216186523]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,10.663589477539062]},{type:"C",params:[21.108692169189453,9.154008865356445,21.108692169189453,6.845991611480713,19.673925399780273,5.336410999298096]},{type:"L",params:[18.5866641998291,6.369786739349365]},{type:"C",params:[19.471111297607422,7.300351619720459,19.471111297607422,8.699647903442383,18.5866641998291,9.630212783813477]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"Z",params:[]},{type:"M",params:[1.4133352041244507,9.63021183013916]},{type:"C",params:[.5288880467414856,8.699646949768066,.5288882851600647,7.300351142883301,1.4133358001708984,6.369786262512207]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"C",params:[-1.1086915731430054,6.845990180969238,-1.1086925268173218,9.154007911682129,.3260757029056549,10.663588523864746]},{type:"L",params:[1.4133352041244507,9.63021183013916]},{type:"Z",params:[]},{type:"M",params:[18.10024642944336,12.173359870910645]},{type:"C",params:[18.692087173461914,11.658082008361816,19.22022819519043,11.140942573547363,19.67392349243164,10.663589477539062]},{type:"L",params:[18.586666107177734,9.630212783813477]},{type:"C",params:[18.160234451293945,10.078877449035645,17.666166305541992,10.562438011169434,17.11528778076172,11.042052268981934]},{type:"L",params:[18.10024642944336,12.173359870910645]},{type:"Z",params:[]},{type:"M",params:[10,.25]},{type:"C",params:[9.022459983825684,.25,8.080134391784668,.4173649847507477,7.18831205368042,.6969932913780212]},{type:"L",params:[7.637089252471924,2.1282858848571777]},{type:"C",params:[8.404208183288574,1.8877582550048828,9.194794654846191,1.75,10,1.75]},{type:"L",params:[10,.25]},{type:"Z",params:[]},{type:"M",params:[4.096456050872803,2.171203136444092]},{type:"C",params:[2.570507526397705,3.1452717781066895,1.280151128768921,4.332587242126465,.32607635855674744,5.336409568786621]},{type:"L",params:[1.4133356809616089,6.369786262512207]},{type:"C",params:[2.3151214122772217,5.420979022979736,3.51236629486084,4.323603630065918,4.903543949127197,3.4355645179748535]},{type:"L",params:[4.096456050872803,2.171203136444092]},{type:"Z",params:[]},{type:"M",params:[10,15.75]},{type:"C",params:[12.047597885131836,15.75,13.940337181091309,15.016534805297852,15.551521301269531,14.047059059143066]},{type:"L",params:[14.778156280517578,12.761794090270996]},{type:"C",params:[13.313118934631348,13.643331527709961,11.688562393188477,14.25,10,14.25]},{type:"L",params:[10,15.75]},{type:"Z",params:[]}],fill:"#7D848D",originX:0,originY:0,originW:20,originH:16},operations:{}},{uuid:"f3fb01f1-c2a1-7c7b-2906-49271490ecec",name:"**********",x:16,y:20,w:97,h:20,angle:0,type:"text",detail:{text:"**********",color:"#7D848D",fontSize:16,lineHeight:20,textAlign:"left",verticalAlign:"top",wordBreak:"normal"},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},Eu={uuid:"af161d19-73ae-77e3-e54d-a88be90632ba",name:"Text",x:0,y:0,w:300,h:40,angle:0,type:"text",detail:{text:"  Please fill the description",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#7D848D",opacity:1},operations:{}},Cu={uuid:"81895177-c187-eefa-de59-4b9ad201343e",name:"Title",x:0,y:0,w:136,h:34,angle:0,type:"text",detail:{text:"Title",fontFamily:"SF UI Display",fontSize:26,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:34,color:"#1B1E28",opacity:1},operations:{}},xu=e=>({list:[{name:"Button",element:yu},{name:"Input",element:wu},{name:"Password",element:Su},{name:"Text",element:Eu},{name:"Title",element:Cu},{name:"Link",element:bu}],pageSize:8,current:1,total:8}),Mu=()=>{const[e]=Fn("NavMenu");return e},Zs="mod-nav-menu",zu=e=>{const{className:t,style:n,sharedStore:o,sharedEvent:i,getMaterialTemplates:a}=e,[s,c]=nr.useModal(),d=W(Zs),l=W(Zs,"dropdown"),[h,u]=T.useState([]),m=Mu(),f=({key:O,domEvent:N})=>{N.preventDefault(),i.trigger("createElement",{type:O,element:{name:O}})},{state:v}=T.useContext(xt),{getContainer:g}=T.useContext(rn),{editMode:p,pageTree:y}=v,[S,E]=T.useState(!1),[w,D]=T.useState(!1);T.useEffect(()=>{const O=N=>{const{isPageOverview:B}=N;D(!!B)};return i.on("switchPageOverview",O),()=>{i.off("switchPageOverview",O)}},[]);const b=!!(p==="page"&&(y.length===0||w)),x=O=>{const N=o.get("idraw");N==null||N.resize({devicePixelRatio:O})},j={more:[{key:"about-idraw-stuido",label:m.about,disabled:!0},{key:"line",type:"divider"},{key:"file",label:m.file,children:[{key:"import-json-file",label:m.importJSONFile,onClick:()=>{pu({success:({json:O})=>{i.trigger("resetData",{data:O})},error:()=>{}})}},{key:"export-image",label:m.exportImage,onClick:()=>{s.info({icon:null,title:"Whole image file",width:hu,content:r.createElement(fu,{sharedEvent:i,sharedStore:o}),footer:null,closable:!0})}},{key:"export-json-file",label:m.exportJSONFile,onClick:()=>{const O=o.get("idraw"),N=O==null?void 0:O.getData({compact:!0});if(N){const B=JSON.stringify(N);lc(B,{fileName:"downdown.json"})}}}]},{key:"preferences",label:m.preferences,children:[{key:"device-pixel-ratio",label:m.devicePixelRatio,type:"group",children:[{key:"device-pixel-ratio-x1",label:"x1",onClick:()=>{x(1)}},{key:"device-pixel-ratio-x2",label:"x2",onClick:()=>{x(2)}},{key:"device-pixel-ratio-x3",label:"x3",onClick:()=>{x(3)}}]}]}],element:[{key:"material",label:m.material,icon:r.createElement(l3,null),disabled:b,onClick:()=>{E(!0)}},{key:"rect",label:m.rect,icon:r.createElement(al,null),disabled:b,onClick:f},{key:"circle",label:m.circle,icon:r.createElement(sl,null),disabled:b,onClick:f},{key:"text",label:m.text,icon:r.createElement(rl,null),disabled:b,onClick:f},{key:"image",label:m.image,icon:r.createElement(dl,null),disabled:b,onClick:f},{key:"svg",label:m.svg,disabled:b,icon:r.createElement(cl,null),onClick:f},{key:"html",label:m.html,disabled:!0,icon:r.createElement(ul,null),onClick:f},{key:"group",label:m.group,icon:r.createElement(ll,null),disabled:b,onClick:f}]},P={size:"small",type:"text"},z=[{key:"more",button:r.createElement(A3,{style:{fontSize:20}})},{key:"element",button:r.createElement(r3,{style:{fontSize:20}})}],V=()=>{const O=o.get("idraw"),N=[];if(O){const{viewSizeInfo:B}=O.getViewInfo(),{devicePixelRatio:H}=B;N.push(`device-pixel-ratio-x${H}`)}u(N)};return T.useMemo(()=>r.createElement("div",{style:n,className:ue(d,t)},z.map((O,N)=>r.createElement(yo,{key:N,trigger:["click","click"],menu:{items:j[O.key]||[],selectedKeys:h},placement:"bottom",overlayClassName:l,onOpenChange:B=>{B===!0&&V()}},r.createElement(Re,Object.assign({},P,{onClick:B=>B.preventDefault()}),r.createElement(_l.Compact,null,O.button,r.createElement(La,{style:{fontSize:10,marginLeft:4}}))))),r.createElement(or,{title:m.materialTempate,placement:"left",open:S,onClose:()=>{E(!1)},styles:Cl,getContainer:g},r.createElement(xl,{onSelect:O=>{O.element&&i.trigger("addElement",{element:uo(O.element),position:[]}),E(!1)},getTemplates:a||xu})),c),[h,m,S])},Zt="mod-header",Iu=e=>{const{logo:t,navigationMenu:n,navigationCenter:o,className:i,style:a,openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u,getMaterialTemplates:m}=e,{state:f,dispatch:v}=T.useContext(xt),g=W(Zt),p=W(Zt,"left"),y=W(Zt,"right"),S=W(Zt,"center"),E=W(Zt,"locale"),w=W(Zt,"scale"),D=W(Zt,"switch"),{localeCode:b,scaleInfo:x}=f;return T.useMemo(()=>r.createElement("div",{style:a,className:ue(g,i)},r.createElement("div",{className:p},t,n||r.createElement(zu,{sharedStore:h,sharedEvent:u,getMaterialTemplates:m}),r.createElement(J6,{openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:l,sharedStore:h,sharedEvent:u})),o&&r.createElement("div",{className:S},o),r.createElement("div",{className:y},r.createElement(Qd,{className:w,value:`${ye(x.scale)}`,onChange:j=>{const P=parseFloat(j);P>0&&(v==null||v({type:"update",payload:{scaleInfo:{scale:ye(P),from:"control"}}}))}}),r.createElement(ic,{className:E,value:b,onChange:j=>{v==null||v({type:"update",payload:{localeCode:j}})}}),r.createElement(nc,{className:D,theme:f==null?void 0:f.themeMode,onChange:({theme:j})=>{v==null||v({type:"updateThemeMode",payload:{themeMode:j}})}}))),[b,x,s,c,d,l])};var Qs=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Au="mod-sketch",Tu=e=>{const t=T.useRef(null),n=T.useRef(null),o=T.useRef(!1),{className:i,style:a,width:s,height:c,sharedEvent:d,sharedStore:l,useContextMenuOptions:h}=e,{generateClassName:u}=T.useContext(rn),{state:m,dispatch:f}=T.useContext(xt),{editingData:v}=m,g=u(Au),p=T.useRef([]),y=T.useRef(m.editingData),S=T.useRef(m.data),E=T.useRef([]),[w]=h({sharedEvent:d,sharedStore:l});return T.useEffect(()=>{p.current=[...m.editingDataPosition],S.current=m.data,y.current=m.editingData,E.current=[...m.selectedUUIDs]},[m.editingDataPosition,m.data,m.editingData,m.selectedUUIDs]),T.useEffect(()=>{if(!(t!=null&&t.current)||n!=null&&n.current)return;const D={width:s,height:c,devicePixelRatio:window.devicePixelRatio},b=new Da(t.current,D);b.enable("ruler"),n.current=b;const x=C=>{var Y;const G=y.current;let{uuids:R}=C;if((R==null?void 0:R.length)===1&&((Y=E.current)===null||Y===void 0?void 0:Y.length)===1&&R[0]===E.current[0])return;const{positions:$}=C;$&&Array.isArray($)&&(R=pr($,G.elements).map(I=>I.uuid)),f({type:"update",payload:{selectedUUIDs:R}})},j=C=>{const{data:Y,type:G}=C,R=y.current;if(["addElement","updateElement","deleteElement","moveElement","dragElement","resizeElement"].includes(G)){const $={editingData:Object.assign({},Y)};["addElement","deleteElement","moveElement"].includes(G)&&($.elementTree=Ce(R)),f({type:"update",payload:$})}else if(G==="changeLayout"){if(Y.layout){const $=Object.assign({},Y.layout);$.detail&&($.detail=Object.assign({},$.detail)),Y.layout=Object.assign({},Y.layout)}f({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:Object.assign({},Y)}})}},P=C=>{const{scale:Y}=C;f({type:"update",payload:{scaleInfo:{scale:Y,from:"event"}}})},z=C=>{const{element:Y}=C;b.updateElement(Y);const G=Object.assign({},b.getData()),R=Ce(G);f({type:"update",payload:{editingData:Object.assign({},G),elementTree:R}})},V=C=>{const{type:Y,element:G}=C,R=b.createElement(Y,{element:G,viewCenter:!0});let $=b.getViewCenter();const Q=E.current;let I=[];const A=b.getData();if(Array.isArray(Q)&&Q.length===1){const Z=Q[0],se=ht(Z,A.elements);let re=Ge(se,A.elements);if(se.length>1){I=[...se];let X=I.pop();X+=1;const J=[...I];I.push(X),re=Ge(J,A.elements),$=at(re),R.x=$.x-R.w/2,R.y=$.y-R.h/2}}const M=b.addElement(R,{position:I}),F=Ce(M);f({type:"update",payload:{editingData:Object.assign({},M),elementTree:F}}),b.selectElements([R.uuid])},O=C=>{const{element:Y,position:G=[]}=C;let R=b.getViewCenter();const $=E.current;let Q=G;const I=b.getData();if(Array.isArray($)&&$.length===1){const F=$[0],Z=ht(F,I.elements),se=Ge(Z,I.elements);Z.length>0&&(se==null?void 0:se.type)==="group"&&Array.isArray(se.detail.children)&&(Q=[...Z],Q.push(se.detail.children.length),R=at(se))}const A=b.addElement(Object.assign(Object.assign({},Y),{x:R.x-Y.w/2,y:R.y-Y.h/2}),{position:Q}),M=Ce(A);f({type:"update",payload:{editingData:Object.assign({},A),elementTree:M}}),b.selectElements([Y.uuid])},N=C=>{const{uuid:Y}=C;b==null||b.deleteElement(Y);const G=b==null?void 0:b.getData();if(G){const R=Ce(G);f({type:"update",payload:{editingData:Object.assign({},G),elementTree:R}}),b.trigger(ge.clearSelect,{})}},B=C=>{const{element:Y,inPageOverview:G}=C,{w:R,h:$,detail:Q}=Y,I=S.current;I.elements=[...I.elements,Y];const A=Qs(Q,["children"]);let M={elements:Y.detail.children,layout:{x:0,y:0,w:R,h:$,detail:A,operations:{position:"relative"}}};const F=Ce(I);let Z=[F.length-1];G===!0&&(M=I,Z=[]);const se=Ce(M);b.cancelElements(),b.centerContent({data:M}),f({type:"update",payload:{data:Object.assign({},I),editingData:M,elementTree:se,pageTree:F,editingDataPosition:Z}})},H=C=>{var Y,G,R,$;const{uuid:Q}=C;if(!Q)return;const I=S.current;let A=-1;const M={pageTree:[]};for(let Z=0;Z<I.elements.length;Z++)if(((Y=I.elements[Z])===null||Y===void 0?void 0:Y.uuid)===Q){I.elements.splice(Z,1),I.elements=[...I.elements],A=Z;break}const F=Ce(I);if(M.data=Object.assign({},I),M.pageTree=F,p.current.length===1&&A===p.current[0]){let Z=(G=I==null?void 0:I.elements)===null||G===void 0?void 0:G[A],se=A;for(;!(!((R=Z==null?void 0:Z.extends)===null||R===void 0)&&R.isPage)&&se>0;)se--,Z=($=I==null?void 0:I.elements)===null||$===void 0?void 0:$[se];if(Z){const re=Z.detail,{children:X}=re,J=Qs(re,["children"]),ae={elements:X||[],layout:{x:0,y:0,w:Z.w,h:Z.h,detail:J,operations:{position:"relative"}}},le=Ce(ae);M.editingData=ae,M.editingDataPosition=[se],M.elementTree=le,b.centerContent({data:ae})}else M.editingData={elements:[]},M.editingDataPosition=[],M.elementTree=[]}else p.current.length===0&&(M.editingData=Object.assign({},I));F.length===0&&(M.elementTree=[],M.editingDataPosition=[],M.editingData={elements:[]}),f({type:"update",payload:M})},_=C=>{const{type:Y,position:G}=C,R=n==null?void 0:n.current;if(!R)return;const $=p.current,Q=y.current;let I=S.current;if($.length>0?F6($,Q,I):$.length===0&&(I=Q),Y==="go-to-page"&&G){const A=[...G],M=Ot(A,I),F=Ce(M);f({type:"update",payload:{data:Object.assign({},I),editingData:Object.assign({},M),editingDataPosition:A,elementTree:F}}),R.centerContent({data:M}),R.trigger(ge.clearSelect,{})}else if(Y==="go-to-group"&&G){const A=[...G],M=Ot(A,I),F=Ce(M);f({type:"update",payload:{data:Object.assign({},I),editingData:Object.assign({},M),editingDataPosition:A,elementTree:F}}),R.centerContent({data:M}),R.trigger(ge.clearSelect,{})}else if(Y==="go-to-next-group"&&G){const A=[...$,...G],M=Ot(A,I),F=Ce(M);f({type:"update",payload:{data:Object.assign({},I),editingData:Object.assign({},M),editingDataPosition:A,elementTree:F}}),R.centerContent({data:M}),R.trigger(ge.clearSelect,{})}else if(Y==="back-one"&&$.length>0){const A=[...$];A.pop();const M=Ot(A,I),F=Ce(M);f({type:"update",payload:{data:Object.assign({},I),editingData:Object.assign({},M),editingDataPosition:[...A],elementTree:F}}),R.centerContent({data:M}),R.trigger(ge.clearSelect,{})}else if(Y==="back-root"){const A=[],M=Ot(A,I),F=Ce(M);f({type:"update",payload:{data:Object.assign({},I),editingData:M,editingDataPosition:A,elementTree:F}}),R.centerContent({data:M}),R.trigger(ge.clearSelect,{})}},L=C=>{let{data:Y}=C,G=[],R=po(Y);if(m.editMode==="page"&&(Y=wl(Y),R=po(Y),R.length>0)){const I=R[0].uuid;G=ht(I,Y.elements)}let $=Ot(G,Y);const Q=Ce($);f({type:"update",payload:{data:Object.assign({},Y),editingData:Object.assign({},$),editingDataPosition:G,elementTree:Q,pageTree:R}}),b.centerContent({data:$}),b.trigger(ge.clearSelect,{})},k=C=>{const{editingData:Y}=C,G=Ce(Y);f({type:"update",payload:{editingData:Object.assign({},Y),elementTree:G}}),b.trigger(ge.clearSelect,{})};if(b.on(ge.select,x),b.on(ge.change,j),b.on(ge.scale,P),b.on(ge.textChange,z),d.on("createElement",V),d.on("addElement",O),d.on("deleteElement",N),d.on("addPage",B),d.on("deletePage",H),d.on("resetEditingView",_),d.on("resetData",L),d.on("resetEditingData",k),d.on("dispatch",f),!o.current){if(m.scaleInfo){const{scale:C,offsetX:Y,offsetY:G}=m.scaleInfo;C&&Y&&G?b.setViewScale({scale:C,offsetX:Y,offsetY:G}):b.centerContent({data:m.editingData})}o.current=!0}return l.set("idraw",b),()=>{o.current=!1,b.off(ge.select,x),b.off(ge.change,j),b.off(ge.scale,P),b.off(ge.textChange,z),l.set("idraw",null)}},[]),T.useEffect(()=>{n!=null&&n.current&&n.current.setData(v)},[v]),T.useEffect(()=>{if(n!=null&&n.current){const D=n.current;m.scaleInfo.from==="control"&&D.scale({scale:m.scaleInfo.scale,point:{x:s/2,y:c/2}})}},[m.scaleInfo]),T.useEffect(()=>{const D=n.current,b=t.current;D&&D.resize({width:s,height:c}),b&&(b.style.width=`${s}px`,b.style.height=`${c}px`)},[s,c]),T.useMemo(()=>r.createElement(yo,{menu:{items:w},trigger:["contextMenu"]},r.createElement("div",{ref:t,className:ue(g,i),style:Object.assign(Object.assign({},a),{width:s,height:c,padding:0})})),[w])},Cn="mod-dashboard",Yo=240,$o=240,xn=36,Nu=T.forwardRef((e,t)=>{const{className:n,style:o,width:i,height:a,logo:s,navigationMenu:c,navigationCenter:d,defaultSelectedElementUUIDs:l,sharedStore:h,sharedEvent:u,useContextMenuOptions:m,handleKeyboard:f,getPageTemplates:v,getMaterialTemplates:g}=e,{state:p}=T.useContext(xt),{editMode:y}=p,[S,E]=T.useState(!0),[w,D]=T.useState(!0);T.useEffect(()=>{const B=H=>{["INPUT","TEXTAREA"].includes(H.target.nodeName)||f(H,{sharedEvent:u,sharedStore:h})};return window.addEventListener("keydown",B),()=>{window.removeEventListener("keydown",B)}},[]);const[b,x]=T.useState({leftWidth:S?Yo:0,rightWidth:w?$o:0,centerWidth:i-(S?Yo:0)-(w?$o:0)});T.useEffect(()=>{const B=S?Yo:0,H=w?$o:0,_=i-B-H;x({leftWidth:B,rightWidth:H,centerWidth:_})},[a,i,S,w]);const j=W(Cn),P=W(Cn,"header"),z=W(Cn,"content"),V=W(Cn,"left"),O=W(Cn,"right"),N=W(Cn,"right");return T.useMemo(()=>{const{leftWidth:B,rightWidth:H,centerWidth:_}=b;return r.createElement("div",{ref:t,className:ue(j,n),style:Object.assign(Object.assign({},o),{width:i,height:a,padding:0})},r.createElement("div",{className:P,style:{height:xn}},r.createElement(Iu,{sharedEvent:u,sharedStore:h,logo:s,navigationMenu:c,navigationCenter:d,openLeftSider:S,openRightSider:w,getMaterialTemplates:g,onClickToggleLayer:()=>{const L=!S;let k=B;L?k=Yo:k=0,x({leftWidth:k,rightWidth:H,centerWidth:i-k-H}),E(L)},onClickToggleSetting:()=>{const L=!w;let k=H;L?k=$o:k=0,x({leftWidth:B,rightWidth:k,centerWidth:i-B-k}),D(L)}})),r.createElement("div",{className:z,style:{top:xn}},r.createElement(vi,{split:"vertical",defaultSize:_+H,allowResize:!0,onChange:L=>{const k=i-L,C=L-H;C<100||x({leftWidth:k,rightWidth:H,centerWidth:C})},pane1Style:{width:B},pane2Style:{width:_+H}},r.createElement("div",null,S&&(y==="page"?r.createElement(lu,{height:a-xn,className:V,defaultSelectedElementUUIDs:l,sharedEvent:u,sharedStore:h,useContextMenuOptions:m,getPageTemplates:v}):r.createElement(K6,{height:a-xn,className:V,sharedEvent:u,sharedStore:h,useContextMenuOptions:m}))),r.createElement("div",{style:{width:b.centerWidth+b.rightWidth,display:"flex",flexDirection:"row"}},r.createElement(Tu,{className:N,width:_,height:a-xn,sharedStore:h,sharedEvent:u,useContextMenuOptions:m}),r.createElement("div",{className:O,style:{width:H,height:a-xn}},r.createElement(uu,null))))))},[n,y,S,w,b,a])});function Js(){return{idraw:null,clipboard:{type:"default",data:null},selectedUUIDs:[]}}function Du(e){const{sharedEvent:t,sharedStore:n}=e;t.on("copy",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const s=Qo(i,a.elements);s.length>0&&n.set("clipboard",{type:"copy-elements",data:s})}}),t.on("paste",()=>{const o=n.get("idraw"),i=n.get("clipboard"),a=n.get("selectedUUIDs");if(o&&["copy-elements","cut-elements"].includes(i==null?void 0:i.type)&&Array.isArray(i.data)){const s=i.data,c=[];if(i.type==="copy-elements"){for(let m=0;m<s.length;m++)if(s[m]){const f=s[m],v=uo(f);v.name=`${v.name} copy`,c.push(v)}}else if(i.type==="cut-elements"){for(let m=0;m<s.length;m++)if(s[m]){const f=s[m],v=uo(f);v.name=`${v.name}`,c.push(v)}}const d=o==null?void 0:o.getData(),l=ht(a[0],(d==null?void 0:d.elements)||[]);l.length>0&&l[l.length-1]++,c.forEach(m=>{o.addElement(m,{position:l})});const h=o==null?void 0:o.getData(),u=Ce(h);t.trigger("dispatch",{type:"update",payload:{editingData:h,elementTree:u}}),o.selectElement(c[0].uuid),setTimeout(()=>{t.trigger("scrollToLayer",{uuid:c[0].uuid})},100)}}),t.on("cut",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const d=Qo(i,a.elements);d.length>0&&n.set("clipboard",{type:"cut-elements",data:d.map(l=>uo(l))}),d.forEach(l=>{o==null||o.deleteElement(l.uuid)})}const s=o==null?void 0:o.getData(),c=Ce(s);t.trigger("dispatch",{type:"update",payload:{editingData:s,elementTree:c}}),o==null||o.trigger(ge.clearSelect)}),t.on("delete",()=>{const o=n.get("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const s=Qo(i,a.elements);if(s.length>0){for(let l=0;l<s.length;l++)o==null||o.deleteElement(s[l].uuid);const c=o==null?void 0:o.getData(),d=Ce(c);t.trigger("dispatch",{type:"update",payload:{editingData:c,elementTree:d}}),o==null||o.trigger(ge.clearSelect)}}})}const Pu=e=>{const[t]=Fn("contextMenu"),{sharedEvent:n}=e;return[[{label:t.copy,key:"copy",onClick:()=>{n.trigger("copy")}},{label:t.paste,key:"paste-here",onClick:()=>{n.trigger("paste")}},{label:t.cut,key:"cut",onClick:()=>{n.trigger("cut")}},{label:t.delete,key:"delete",onClick:()=>{n.trigger("delete")}}]]};var Mt={};Object.defineProperty(Mt,"__esModule",{value:!0});var Lu=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),na={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Ml={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Lu?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},ka={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var Xo=1;Xo<20;Xo++)ka["f"+Xo]=111+Xo;function Oi(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var o=e.map(function(s){return zl(s,t)}),i=function(c){return o.some(function(d){return Il(d,c)})},a=n==null?i:i(n);return a}function Ou(e,t){return Oi(e,t)}function Ru(e,t){return Oi(e,{byKey:!0},t)}function zl(e,t){var n=t&&t.byKey,o={};e=e.replace("++","+add");var i=e.split("+"),a=i.length;for(var s in na)o[na[s]]=!1;var c=!0,d=!1,l=void 0;try{for(var h=i[Symbol.iterator](),u;!(c=(u=h.next()).done);c=!0){var m=u.value,f=m.endsWith("?")&&m.length>1;f&&(m=m.slice(0,-1));var v=ja(m),g=na[v];if(m.length>1&&!g&&!Ml[m]&&!ka[v])throw new TypeError('Unknown modifier: "'+m+'"');(a===1||!g)&&(n?o.key=v:o.which=Al(m)),g&&(o[g]=f?null:!0)}}catch(p){d=!0,l=p}finally{try{!c&&h.return&&h.return()}finally{if(d)throw l}}return o}function Il(e,t){for(var n in e){var o=e[n],i=void 0;if(o!=null&&(n==="key"&&t.key!=null?i=t.key.toLowerCase():n==="which"?i=o===91&&t.which===93?91:t.which:i=t[n],!(i==null&&o===!1)&&i!==o))return!1}return!0}function Al(e){e=ja(e);var t=ka[e]||e.toUpperCase().charCodeAt(0);return t}function ja(e){return e=e.toLowerCase(),e=Ml[e]||e,e}var Mn=Mt.default=Oi;Mt.isHotkey=Oi;Mt.isCodeHotkey=Ou;Mt.isKeyHotkey=Ru;Mt.parseHotkey=zl;Mt.compareHotkey=Il;Mt.toKeyCode=Al;Mt.toKeyName=ja;const ku=(e,t)=>{const{sharedEvent:n}=t;Mn("mod+c",e)?n.trigger("copy",void 0):Mn("mod+v",e)?n.trigger("paste",void 0):Mn("mod+x",e)?n.trigger("cut",void 0):Mn("del",e)||Mn("backspace",e)?n.trigger("delete",void 0):Mn("mod+s",e)&&console.log("Save ... ")},Vu=r.forwardRef((e,t)=>{const{width:n=1e3,height:o=600,style:i,className:a,logo:s,navigationMenu:c,navigationCenter:d,defaultSelectedElementUUIDs:l,defaultEditMode:h,prefiexName:u,onEditGroupElement:m,useContextMenuOptions:f=Pu,handleKeyboard:v=ku,getPageTemplates:g,getMaterialTemplates:p}=e,[y,S]=T.useReducer(Y6,H6(e)),E=T.useRef(null),w=T.useRef(new tn),D=T.useRef(new nn({defaultStorage:Js()}));return T.useEffect(()=>{if(h!=="page"){const b=Ge(y.editingDataPosition,y.data.elements);m==null||m({uuid:b==null?void 0:b.uuid,position:[...y.editingDataPosition]})}},[y.editingDataPosition]),T.useImperativeHandle(t,()=>({getSharedEvent(){return w.current},getSharedStore(){return D.current},dispatch(x){const{type:j,payload:P}=x;S({type:j,payload:P})}}),[]),T.useEffect(()=>(w.current||(w.current=new tn),D.current||(D.current=new nn({defaultStorage:Js()})),Du({sharedEvent:w.current,sharedStore:D.current}),()=>{var b,x;(b=D.current)===null||b===void 0||b.clear(),(x=w.current)===null||x===void 0||x.destroy(),w.current=null,D.current=null}),[]),T.useEffect(()=>{const b=D.current;b&&b.set("selectedUUIDs",[...y.selectedUUIDs])},[y.selectedUUIDs]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("switchTheme",{theme:y.themeMode})},[y.themeMode]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("changeLocale",{locale:y.localeCode})},[y.localeCode]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("trackDataChange",{data:y.data})},[y.data]),T.useEffect(()=>{const b=w.current;b==null||b.trigger("trackEditingDataChange",{editingData:y.editingData,editingDataPosition:y.editingDataPosition})},[y.editingData,y.editingDataPosition]),T.useMemo(()=>r.createElement(Wl,{localeCode:y.localeCode,topPrefix:u,themeMode:y.themeMode,getContainer:()=>E.current||document.body},r.createElement($6,{value:{state:y,dispatch:S}},r.createElement(Nu,{logo:s,navigationMenu:c,navigationCenter:d,ref:E,width:n,height:o,style:i,className:a,defaultSelectedElementUUIDs:l,sharedEvent:w.current,sharedStore:D.current,useContextMenuOptions:f,handleKeyboard:v,getPageTemplates:g,getMaterialTemplates:p}))),[u,n,o,y,S])});export{Vu as S};
