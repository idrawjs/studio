import{r as z,R as l}from"./react.D016eMnP.js";import{c as fe,C as Fl,t as Ja,S as ur,D as oo,B as ke,T as he,I as qt,a as hr,F as q,R as me,b as K,d as Wl,e as Hl,f as Gl,g as rt,P as fr,h as tt,s as Do,E as Jt,i as La,j as Yl,k as gn,l as mr,A as $l,M as gr,m as Xl,n as vr,o as Ul,p as Zl}from"./antd.Bw8FNF3J.js";let Wi="idraw-studio";function Ka(e){Wi=e}function qa(){return Wi}function pr(e){return(...t)=>[Wi,e,...t].join("-")}function H(...e){return[Wi,...e].join("-")}const Ql={locale:"en-US",Header:{},LayoutDetail:{layout:"Layout",groupLayout:"Group Layout",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible"},ElementDesign:{element:"Element",layout:"Layout",global:"Global"},ElementDetail:{basicAttributes:"Basic",borderAttribute:"Border",contentAttribute:"Content",shadowAttribute:"Shadow",x:"X",y:"Y",w:"W",h:"H",background:"Background",solid:"Solid",dash:"Dash",inside:"Inside",outside:"Outside",centerLine:"Center",gradient:"Gradient",opacity:"Opacity",mixedBorderWidth:"Mixed",mixedBorderRadius:"Mixed",overflow:"Overflow",hidden:"Hidden",visible:"Visible",deepResizeInGroup:"Deep resize in group",fill:"Fill",stroke:"Stroke"},Menu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio"}},Jl={locale:"zh-CN",Header:{},LayoutDetail:{layout:"布局",groupLayout:"组布局",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视"},ElementDesign:{element:"元素",layout:"布局",global:"全局"},ElementDetail:{basicAttributes:"基础",borderAttribute:"边框",contentAttribute:"内容",shadowAttribute:"阴影",x:"X",y:"Y",w:"宽",h:"高",background:"背景色",solid:"实线",dash:"虚线",inside:"内线",outside:"外线",centerLine:"中线",gradient:"渐变",opacity:"透明度",mixedBorderWidth:"混合边框",mixedBorderRadius:"混合圆角",overflow:"溢出",hidden:"隐藏",visible:"可视",deepResizeInGroup:"组内尺寸关联调整",fill:"填充",stroke:"描边"},Menu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例"}},es={"en-US":Ql,"zh-CN":Jl},pa="en-US",Da=e=>{const{localeCode:t}=z.useContext(Sn);return[z.useMemo(()=>{const i=(es[t||pa]||es[pa])[e];return Object.assign({},i)},[t,e])]},Kl=e=>{const{themeMode:t}=e,n="theme",o=H(n),i=H(n,"dark"),a=fe({[o]:!0,[i]:t==="dark"});return{themeMode:t,className:a}},yr=e=>(e!=null&&e.topPrefix&&typeof(e==null?void 0:e.topPrefix)=="string"&&Ka(e.topPrefix),Object.assign({topPrefix:qa(),createPrefixName:pr,generateClassName:H,getClassNameTopPrefix:qa,setClassNameTopPrefix:Ka,localeCode:pa,getContainer:()=>(e==null?void 0:e.container)||document.body},e||{})),Sn=z.createContext(yr()),ql=e=>{const{children:t,topPrefix:n,localeCode:o,container:i,themeMode:a,getContainer:s}=e,c=yr({topPrefix:n,localeCode:o,getContainer:s}),[d,r]=z.useState(c),{className:h}=Kl({themeMode:a});return z.useEffect(()=>{r(Object.assign(Object.assign({},d),{localeCode:o,container:i}))},[o,i]),l.createElement(Sn.Provider,{value:Object.assign({},d)},l.createElement(Fl,{theme:{algorithm:a==="dark"?Ja.darkAlgorithm:Ja.defaultAlgorithm}},l.createElement("div",{className:h},t)))};class ts extends l.PureComponent{render(){const{children:t,className:n,split:o,style:i,size:a,eleRef:s}=this.props,c=["Pane",o,n];let d={flex:1,position:"relative",outline:"none"};return a!==void 0&&(o==="vertical"?d.width=a:(d.height=a,d.display="flex"),d.flex="none"),d=Object.assign({},d,i||{}),l.createElement("div",{ref:s,className:c.join(" "),style:d},t)}}const ec="base-split-pane",tc=()=>{const{generateClassName:e}=z.useContext(Sn);return{modClassName:e(ec)}};function nc(e){const{modClassName:t}=tc(),{className:n,onClick:o,onDoubleClick:i,onMouseDown:a,onTouchEnd:s,onTouchStart:c,resizerClassName:d=t,split:r,style:h}=e,u=[d,r,n];return z.useMemo(()=>l.createElement("span",{role:"presentation",className:u.join(" "),style:h,onMouseDown:f=>a(f),onTouchStart:f=>{f.preventDefault(),c(f)},onTouchEnd:f=>{f.preventDefault(),s(f)},onClick:f=>{o&&(f.preventDefault(),o(f))},onDoubleClick:f=>{i&&(f.preventDefault(),i(f))}}),[])}const oc="xxxxx";function ns(e,t){if(e.selection)e.selection.empty();else try{t.getSelection().removeAllRanges()}catch{}}function os(e,t,n,o){if(typeof o=="number"){const i=typeof t=="number"?t:0,a=typeof n=="number"&&n>=0?n:1/0;return Math.max(i,Math.min(a,o))}return e!==void 0?e:t}function ic(e){return l.Children.toArray(e).filter(t=>t)}class Ti extends l.Component{constructor(t){super(t),this.onMouseDown=this.onMouseDown.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this);const{size:n,defaultSize:o,minSize:i,maxSize:a,primary:s}=t,c=n!==void 0?n:os(o,i,a,null);this.state={active:!1,resized:!1,pane1Size:s==="first"?c:void 0,pane2Size:s==="second"?c:void 0,instanceProps:{size:n}}}componentDidMount(){document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("touchmove",this.onTouchMove),this.setState(Ti.getSizeUpdate(this.props,this.state))}static getDerivedStateFromProps(t,n){return Ti.getSizeUpdate(t,n)}componentWillUnmount(){document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("touchmove",this.onTouchMove)}onMouseDown(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchStart(n)}onTouchStart(t){const{allowResize:n,onDragStarted:o,split:i}=this.props;if(n){ns(document,window);const a=i==="vertical"?t.touches[0].clientX:t.touches[0].clientY;typeof o=="function"&&o(),this.setState({active:!0,position:a})}}onMouseMove(t){const n=Object.assign({},t,{touches:[{clientX:t.clientX,clientY:t.clientY}]});this.onTouchMove(n)}onTouchMove(t){const{allowResize:n,maxSize:o,minSize:i,onChange:a,split:s,step:c}=this.props,{active:d,position:r}=this.state;if(n&&d){ns(document,window);const h=this.props.primary==="first",u=h?this.pane1:this.pane2,f=h?this.pane2:this.pane1;if(u){const m=u,v=f;if(m.getBoundingClientRect){const g=m.getBoundingClientRect().width,p=m.getBoundingClientRect().height,w=s==="vertical"?t.touches[0].clientX:t.touches[0].clientY,S=s==="vertical"?g:p;let A=r-w;if(c){if(Math.abs(A)<c)return;A=~~(A/c)*c}let y=h?A:-A;const I=parseInt(window.getComputedStyle(m).order),b=parseInt(window.getComputedStyle(v).order);I>b&&(y=-y);let E=o;if(o!==void 0&&o<=0){const T=this.splitPane;s==="vertical"?E=T.getBoundingClientRect().width+o:E=T.getBoundingClientRect().height+o}let C=S-y;const V=r-A;C<i?C=i:o!==void 0&&C>E?C=E:this.setState({position:V,resized:!0}),a&&a(C),this.setState({draggedSize:C,[h?"pane1Size":"pane2Size"]:C})}}}}onMouseUp(){const{allowResize:t,onDragFinished:n}=this.props,{active:o,draggedSize:i}=this.state;t&&o&&(typeof n=="function"&&n(i),this.setState({active:!1}))}static getSizeUpdate(t,n){const o={},{instanceProps:i}=n;if(i.size===t.size&&t.size!==void 0)return{};const a=t.size!==void 0?t.size:os(t.defaultSize,t.minSize,t.maxSize,n.draggedSize);t.size!==void 0&&(o.draggedSize=a);const s=t.primary==="first";return o[s?"pane1Size":"pane2Size"]=a,o[s?"pane2Size":"pane1Size"]=void 0,o.instanceProps={size:t.size},o}render(){const{allowResize:t,children:n,className:o,onResizerClick:i,onResizerDoubleClick:a,paneClassName:s,pane1ClassName:c,pane2ClassName:d,paneStyle:r,pane1Style:h,pane2Style:u,resizerClassName:f,resizerStyle:m,split:v,style:g}=this.props,{pane1Size:p,pane2Size:w}=this.state,S=t?"":"disabled",A=f&&`${f} ${oc}`,y=ic(n),I=Object.assign({display:"flex",flex:1,height:"100%",position:"absolute",outline:"none",overflow:"hidden",MozUserSelect:"text",WebkitUserSelect:"text",msUserSelect:"text",userSelect:"text"},g);v==="vertical"?Object.assign(I,{flexDirection:"row",left:0,right:0}):Object.assign(I,{bottom:0,flexDirection:"column",minHeight:"100%",top:0,width:"100%"});const b=["SplitPane",o,v,S],E=Object.assign(Object.assign({},r),h),C=Object.assign(Object.assign({},r),u),V=["Pane1",s,c].join(" "),T=["Pane2",s,d].join(" ");return l.createElement("div",{className:b.join(" "),ref:P=>{this.splitPane=P},style:I},l.createElement(ts,{className:V,key:"pane1",eleRef:P=>{this.pane1=P},size:p,split:v,style:E},y[0]),l.createElement(nc,{className:S,onClick:i,onDoubleClick:a,onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onTouchEnd:this.onMouseUp,key:"resizer",resizerClassName:A,split:v,style:m||{}}),l.createElement(ts,{className:T,key:"pane2",eleRef:P=>{this.pane2=P},size:w,split:v,style:C},y[1]))}}var ac=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const sc="icon",rc=()=>({iconClassName:H(sc)}),ie=e=>{const{className:t,style:n,children:o}=e,i=ac(e,["className","style","children"]),{iconClassName:a}=rc();return z.useMemo(()=>l.createElement("span",Object.assign({className:fe([a,t]),style:n},i),o),[a,n,t])},lc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M516.266667 938.666667h-38.4c-234.666667-21.333333-405.333333-230.4-384-465.066667 17.066667-204.8 179.2-366.933333 384-384 17.066667 0 34.133333 8.533333 42.666666 21.333333 8.533333 12.8 8.533333 34.133333-4.266666 46.933334-85.333333 115.2-59.733333 273.066667 55.466666 358.4 89.6 68.266667 213.333333 68.266667 302.933334 0 12.8-8.533333 29.866667-12.8 46.933333-4.266667 12.8 8.533333 21.333333 25.6 21.333333 42.666667-8.533333 115.2-64 217.6-153.6 290.133333-81.066667 59.733333-174.933333 93.866667-273.066666 93.866667zM396.8 187.733333c-123.733333 42.666667-213.333333 153.6-221.866667 290.133334-17.066667 187.733333 119.466667 354.133333 307.2 371.2 89.6 8.533333 179.2-17.066667 247.466667-76.8 46.933333-38.4 81.066667-89.6 102.4-145.066667-106.666667 38.4-226.133333 21.333333-320-46.933333-119.466667-93.866667-166.4-251.733333-115.2-392.533334z"}))),cc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M512 768c-141.376 0-256-114.624-256-256s114.624-256 256-256 256 114.624 256 256-114.624 256-256 256z m0-85.333333a170.666667 170.666667 0 1 0 0-341.333334 170.666667 170.666667 0 0 0 0 341.333334zM469.333333 85.333333a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0V85.333333z m0 768a42.666667 42.666667 0 1 1 85.333334 0v85.333334a42.666667 42.666667 0 1 1-85.333334 0v-85.333334zM85.333333 554.666667a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334H85.333333z m768 0a42.666667 42.666667 0 1 1 0-85.333334h85.333334a42.666667 42.666667 0 1 1 0 85.333334h-85.333334zM161.834667 222.165333a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m576 576a42.666667 42.666667 0 0 1 60.330666-60.330666l64 64a42.666667 42.666667 0 0 1-60.330666 60.330666l-64-64z m-515.669334 64a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z m576-576a42.666667 42.666667 0 0 1-60.330666-60.330666l64-64a42.666667 42.666667 0 0 1 60.330666 60.330666l-64 64z"}))),dc="base-theme-switch",uc=pr(dc),is=e=>{if(!(typeof e>"u"))return e==="light"};function hc(e){return e===!0?"light":"dark"}const fc=e=>{const{className:t,style:n,onChange:o,theme:i,defaultTheme:a}=e;return l.createElement(ur,{className:fe([uc(),t]),style:n,checkedChildren:l.createElement(cc,{style:{height:"100%"}}),unCheckedChildren:l.createElement(lc,{style:{height:"100%"}}),checked:is(a),defaultChecked:is(i),onChange:s=>{const c=hc(s);o==null||o({theme:c})}})},mc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z"}),l.createElement("path",{d:"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8C574.1 404.4 544.1 392 512 392z"}))),gc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),vc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),pc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),yc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M869 487.8L491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-0.7 5.2-2L869 536.2c14.7-12.8 14.7-35.6 0-48.4z"}))),wc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200zM424 712H296V584c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v128H104c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h128v128c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V776h128c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}))),bc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M464 144H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H212V212h200v200zM864 144H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V160c0-8.8-7.2-16-16-16z m-52 268H612V212h200v200zM464 544H160c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H212V612h200v200zM864 544H560c-8.8 0-16 7.2-16 16v304c0 8.8 7.2 16 16 16h304c8.8 0 16-7.2 16-16V560c0-8.8-7.2-16-16-16z m-52 268H612V612h200v200z"}))),Ec=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333zM128 469.333333v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM128 640v85.333333h85.333333v-85.333333z m0-341.333333v85.333333h85.333333v-85.333333z m341.333333 341.333333v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128zM128 810.666667v85.333333h768v-85.333333z"}))),Sc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M592 928H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96zM976 0H784a48 48 0 1 0 0 96h144v144.016a48 48 0 1 0 96 0V48a48 48 0 0 0-48-48zM240 928H96v-144a48 48 0 1 0-96 0v192a48 48 0 0 0 48 48h192a48 48 0 1 0 0-96zM48 640a48 48 0 0 0 48-48V432a48 48 0 1 0-96 0v160a48 48 0 0 0 48 48zM240 0H48a48 48 0 0 0-48 48v192a48 48 0 1 0 96 0V96h144a48 48 0 1 0 0-96z m784 592V432a48 48 0 1 0-96 0v160a48 48 0 1 0 96 0zM592 0H432a48 48 0 1 0 0 96h160a48 48 0 1 0 0-96z m384 736a48 48 0 0 0-48 48v144h-144a48 48 0 1 0 0 96h192a48 48 0 0 0 48-48V784a48 48 0 0 0-48-48z"}))),Cc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M554.666667 469.333333v85.333334h-85.333334v-85.333334z m85.333333 0v85.333334h85.333333v-85.333334z m170.666667 0v85.333334h85.333333v-85.333334z m0 170.666667v85.333333h85.333333v-85.333333z m-512-170.666667v85.333334h85.333333v-85.333334z m170.666666-341.333333v85.333333h85.333334V128z m170.666667 0v85.333333h85.333333V128z m170.666667 0v85.333333h85.333333V128z m0 170.666667v85.333333h85.333333v-85.333333zM469.333333 640v85.333333h85.333334v-85.333333z m0-341.333333v85.333333h85.333334v-85.333333zM128 128v768h85.333333V128z m170.666667 0v85.333333h85.333333V128z m170.666666 682.666667v85.333333h85.333334v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m170.666667 0v85.333333h85.333333v-85.333333z m-512 0v85.333333h85.333333v-85.333333z"}))),xc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333zM128 213.333333h85.333333V128H128v85.333333z m170.666667 0h85.333333V128h-85.333333v85.333333z m0 341.333334h85.333333v-85.333334h-85.333333v85.333334zM128 896h85.333333v-85.333333H128v85.333333z m341.333333 0h85.333334v-85.333333h-85.333334v85.333333zM128 554.666667h85.333333v-85.333334H128v85.333334z m0 170.666666h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m170.666667-170.666666h85.333333v-85.333334h-85.333333v85.333334z m170.666667-426.666667v768h85.333333V128h-85.333333z m-170.666667 768h85.333333v-85.333333h-85.333333v85.333333z m0-682.666667h85.333333V128h-85.333333v85.333333z m-170.666667 341.333334h85.333334v-85.333334h-85.333334v85.333334z m0-341.333334h85.333334V128h-85.333334v85.333333z m0 170.666667h85.333334v-85.333333h-85.333334v85.333333z"}))),Mc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M298.666667 896h85.333333v-85.333333h-85.333333v85.333333z m0-341.333333h85.333333v-85.333334h-85.333333v85.333334z m170.666666 0h85.333334v-85.333334h-85.333334v85.333334z m0 341.333333h85.333334v-85.333333h-85.333334v85.333333zM128 725.333333h85.333333v-85.333333H128v85.333333z m0 170.666667h85.333333v-85.333333H128v85.333333z m0-341.333333h85.333333v-85.333334H128v85.333334z m0-170.666667h85.333333v-85.333333H128v85.333333z m341.333333 341.333333h85.333334v-85.333333h-85.333334v85.333333z m341.333334-341.333333h85.333333v-85.333333h-85.333333v85.333333z m0 170.666667h85.333333v-85.333334h-85.333333v85.333334zM128 128v85.333333h768V128H128z m682.666667 597.333333h85.333333v-85.333333h-85.333333v85.333333z m-170.666667 170.666667h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-512h85.333334v-85.333333h-85.333334v85.333333z m341.333334 512h85.333333v-85.333333h-85.333333v85.333333z m-170.666667-341.333333h85.333333v-85.333334h-85.333333v85.333334z"}))),zc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8c12.7 17.7 39 17.7 51.7 0l210.6-292c3.9-5.3 0.1-12.7-6.4-12.7z"}),l.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),wr=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),br=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M685.4 354.8c0-4.4-3.6-8-8-8l-66 0.3L512 465.6l-99.3-118.4-66.1-0.3c-4.4 0-8 3.5-8 8 0 1.9 0.7 3.7 1.9 5.2l130.1 155L340.5 670c-1.2 1.5-1.9 3.3-1.9 5.2 0 4.4 3.6 8 8 8l66.1-0.3L512 564.4l99.3 118.4 66 0.3c4.4 0 8-3.5 8-8 0-1.9-0.7-3.7-1.9-5.2L553.5 515l130.1-155c1.2-1.4 1.8-3.3 1.8-5.2z"}),l.createElement("path",{d:"M512 65C264.6 65 64 265.6 64 513s200.6 448 448 448 448-200.6 448-448S759.4 65 512 65z m0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}))),Ic=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M341.333333 512a42.666667 42.666667 0 0 0 42.666667 42.666667h256a42.666667 42.666667 0 0 0 0-85.333334H384a42.666667 42.666667 0 0 0-42.666667 42.666667z"}),l.createElement("path",{d:"M384 682.666667H307.626667A176.213333 176.213333 0 0 1 128 527.786667 170.666667 170.666667 0 0 1 298.666667 341.333333h85.333333a42.666667 42.666667 0 0 0 0-85.333333H307.626667a262.4 262.4 0 0 0-262.826667 222.293333A256 256 0 0 0 298.666667 768h85.333333a42.666667 42.666667 0 0 0 0-85.333333zM981.333333 479.573333A262.826667 262.826667 0 0 0 715.093333 256h-64.426666C616.106667 256 597.333333 275.2 597.333333 298.666667a42.666667 42.666667 0 0 0 42.666667 42.666666h76.373333A176.213333 176.213333 0 0 1 896 496.213333 170.666667 170.666667 0 0 1 725.333333 682.666667h-85.333333a42.666667 42.666667 0 0 0 0 85.333333h85.333333a256 256 0 0 0 256-288.426667z"}))),Ac=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M712 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM136 374h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM136 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM540 824H358c-87.3 0-158-70.7-158-158V484c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v182c0 127 103 230 230 230h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),Tc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M368 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM310 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM484 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM658 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM888 476h-56c-4.4 0-8 3.6-8 8v182c0 87.3-70.7 158-158 158H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c127 0 230-103 230-230V484c0-4.4-3.6-8-8-8z"}))),Nc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M656 200h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 128H358c-127 0-230 103-230 230v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-87.3 70.7-158 158-158h182c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}))),Lc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M368 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM366 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM888 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 128h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 302h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 476h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 650h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM192 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM540 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM714 824h-56c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM666 128H484c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h182c87.3 0 158 70.7 158 158v182c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V358c0-127-103-230-230-230z"}))),as=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M896 810.666667v85.333333h-85.333333v-85.333333h85.333333z m-170.666667 0v85.333333h-85.333333v-85.333333h85.333333z m-170.666666 0v85.333333h-85.333334v-85.333333h85.333334z m-170.666667 0v85.333333H298.666667v-85.333333h85.333333z m-170.666667 0v85.333333H128v-85.333333h85.333333z m682.666667-170.666667v85.333333h-85.333333v-85.333333h85.333333zM213.333333 640v85.333333H128v-85.333333h85.333333z m0-170.666667v85.333334H128v-85.333334h85.333333z m469.333334-341.333333a213.418667 213.418667 0 0 1 213.12 204.074667L896 341.333333v213.333334h-85.333333V341.333333a128.426667 128.426667 0 0 0-120.490667-127.786666L682.666667 213.333333h-213.333334V128h213.333334zM213.333333 298.666667v85.333333H128V298.666667h85.333333z m0-170.666667v85.333333H128V128h85.333333z m170.666667 0v85.333333H298.666667V128h85.333333z"}))),Dc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72z"}),l.createElement("path",{d:"M864 256H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}))),Rc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M510.762667 970.666667A458.666667 458.666667 0 1 1 969.429333 512a459.178667 459.178667 0 0 1-458.666666 458.666667z m0-853.333334a394.666667 394.666667 0 1 0 394.666666 394.666667 395.093333 395.093333 0 0 0-394.666666-394.666667z"}),l.createElement("path",{d:"M512 724.48A212.48 212.48 0 1 1 724.48 512 212.736 212.736 0 0 1 512 724.48z m0-360.96A148.48 148.48 0 1 0 660.48 512 148.608 148.608 0 0 0 512 363.52z"}))),Er=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M272.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L186.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H532c6.7 0 10.4-7.7 6.3-12.9L272.9 512z"}),l.createElement("path",{d:"M576.9 512l265.4-339.1c4.1-5.2 0.4-12.9-6.3-12.9h-77.3c-4.9 0-9.6 2.3-12.6 6.1L490.8 492.3c-9.1 11.6-9.1 27.9 0 39.5l255.3 326.1c3 3.9 7.7 6.1 12.6 6.1H836c6.7 0 10.4-7.7 6.3-12.9L576.9 512z"}))),Ra=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3 0.1-12.7-6.4-12.7z"}))),Pc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M841.065412 337.317647v352.015059c0 46.802824-23.070118 74.752-39.936 95.111529-14.095059 17.106824-21.443765 26.684235-21.443765 41.803294V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-107.39953c0-37.526588 19.576471-61.199059 35.297882-80.173176 14.576941-17.648941 26.142118-31.563294 26.142118-56.681412V337.317647c0-18.793412-16.143059-36.502588-33.189647-36.502588-19.817412 0-24.033882 3.072-24.214588 3.19247-3.975529 5.360941-3.855059 34.273882-3.794824 57.584942 0.060235 11.384471 0.120471 24.094118-0.12047 38.068705-0.240941 16.504471-12.830118 28.792471-30.358589 29.696a30.117647 30.117647 0 0 1-29.876706-30.117647v-127.698823c0-18.492235-13.372235-32.406588-31.081411-32.406588-16.263529 0-28.190118 12.107294-29.635765 29.394823v120.651294a30.117647 30.117647 0 0 1-60.235294 0V268.047059l-0.120471-0.602353v-46.561882c0-3.975529-0.843294-38.671059-28.551529-38.671059-27.105882 0-31.201882 24.214588-31.201883 38.671059v42.345411c0 1.686588-0.662588 3.252706-0.963764 4.879059v156.250353a30.117647 30.117647 0 0 1-60.235294 0V262.686118c-2.891294-11.685647-11.324235-23.491765-28.069647-23.491765-17.227294 0-31.744 15.721412-31.744 34.334118v201.788235c0 0.421647-0.361412 0.783059-0.361412 1.204706v66.319059a30.117647 30.117647 0 0 1-60.235294 0v-50.236236c-10.601412-3.855059-25.961412-6.987294-34.755765-4.999529-7.107765 1.385412-14.275765 7.649882-18.733176 16.323765a43.309176 43.309176 0 0 0-0.542118 38.369882L345.148235 766.192941a31.563294 31.563294 0 0 1 2.108236 6.505412 32.888471 32.888471 0 0 0 35.418353 25.961412 30.238118 30.238118 0 0 1 33.310117 29.936941V933.647059a30.117647 30.117647 0 0 1-60.235294 0v-77.462588a92.521412 92.521412 0 0 1-66.680471-67.764706L187.934118 567.055059a104.448 104.448 0 0 1 1.927529-90.774588c12.890353-24.877176 35.418353-42.706824 60.295529-47.766589 12.649412-2.590118 29.756235-1.867294 46.682353 1.566118v-43.369412c0-0.602353 0.301176-1.144471 0.361412-1.746823v-111.435294c0-52.163765 41.321412-94.569412 91.979294-94.569412 12.047059 0 23.612235 2.409412 34.093177 6.746353 11.986824-38.791529 44.152471-63.668706 86.317176-63.668706 40.237176 0 71.800471 25.419294 83.666824 63.909647 10.721882-4.517647 22.467765-6.987294 34.876235-6.987294 41.502118 0 75.776 26.744471 87.160471 64.572235 11.023059-2.409412 22.226824-2.951529 32.286117-2.951529 50.718118 0 93.485176 44.272941 93.485177 96.737882z"}))),Oc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}))),kc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"}),l.createElement("path",{d:"M544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}))),_c=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M170.666667 298.666667a42.666667 42.666667 0 1 1-85.333334 0V256a170.666667 170.666667 0 0 1 170.666667-170.666667h42.666667a42.666667 42.666667 0 1 1 0 85.333334H256a85.333333 85.333333 0 0 0-85.333333 85.333333v42.666667z m554.666666-128a42.666667 42.666667 0 0 1 0-85.333334h42.666667a170.666667 170.666667 0 0 1 170.666667 170.666667v42.666667a42.666667 42.666667 0 0 1-85.333334 0V256a85.333333 85.333333 0 0 0-85.333333-85.333333h-42.666667z m128 554.666666a42.666667 42.666667 0 0 1 85.333334 0v42.666667a170.666667 170.666667 0 0 1-170.666667 170.666667h-42.666667a42.666667 42.666667 0 0 1 0-85.333334h42.666667a85.333333 85.333333 0 0 0 85.333333-85.333333v-42.666667zM298.666667 853.333333a42.666667 42.666667 0 0 1 0 85.333334H256a170.666667 170.666667 0 0 1-170.666667-170.666667v-42.666667a42.666667 42.666667 0 0 1 85.333334 0v42.666667a85.333333 85.333333 0 0 0 85.333333 85.333333h42.666667z"}))),Sr=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M0.00592 521.157814v-103.646801l430.267025 235.101281c36.191582 13.567843 70.207188 15.615819 111.870706 0.191998l440.986902-258.365013v103.614802l-435.386966 258.877007c-42.175512 18.303788-91.326944 18.303788-126.398539 0L0.00592 521.157814z"}),l.createElement("path",{d:"M0.00592 743.651242v-104.798789l406.427301 221.43744c17.2798 9.439891 40.511532 17.599797 65.119247 20.383764h27.999676c32.511624-5.023942 47.103455-10.207882 67.615218-22.943735l415.931191-258.173014v98.974855l-430.875018 268.95689c-42.111513 17.439798-95.806892 18.079791-130.878487 0.575994L0.00592 743.619242zM20.069688 246.024995L399.073306 20.971598c41.279523-26.303696 90.430954-27.967677 133.342458-4.35195l421.083131 198.621703c35.743587 17.599797 37.18357 61.311291 2.655969 81.151062l-414.043212 226.205384a165.758083 165.758083 0 0 1-133.374458 4.415949L22.725657 327.208057C9.157814 318.664155 0.90191 303.56033 0.229917 285.000545c-0.607993-18.911781 10.719876-32.159628 19.807771-38.94355z"})," ")),Cr=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M145 96l66 746.6L511.8 928l299.6-85.4L878.7 96H145z m610.9 700.6l-244.1 69.6-245.2-69.6-56.7-641.2h603.8l-57.8 641.2z"}),l.createElement("path",{d:"M281 249l1.7 24.3 22.7 253.5h206.5v-0.1h112.9l-11.4 118.5L511 672.9v0.2h-0.8l-102.4-27.7-6.5-73.2h-91l11.3 144.7 188.6 52h1.7v-0.4l187.7-51.7 1.7-16.3 21.2-242.2 3.2-24.3H511v0.2H389.9l-8.2-94.2h352.1l1.7-19.5 4.8-47.2L742 249H511z"}))),jc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M540.245333 645.888L426.410667 522.069333l1.365333-1.536a889.770667 889.770667 0 0 0 166.314667-322.048h131.413333V99.669333H411.562667V1.109333h-89.6v98.645334H7.850667v98.730666h500.906666a797.696 797.696 0 0 1-142.165333 263.936 778.581333 778.581333 0 0 1-103.594667-165.290666h-89.6c33.621333 82.176 78.677333 158.037333 133.546667 224.938666L78.848 769.706667l63.658667 69.973333 224.170666-246.613333 139.52 153.429333 34.133334-100.608z m252.501334-250.026667H703.061333l-201.813333 591.872h89.685333l50.261334-147.968h212.992l50.688 147.968h89.685333L792.746667 395.776zM675.242667 741.034667l72.618666-213.674667 72.704 213.674667H675.242667z"}))),xr=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792z m0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z"}),l.createElement("path",{d:"M304 456c48.6 0 88-39.4 88-88s-39.4-88-88-88-88 39.4-88 88 39.4 88 88 88z m0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z"}))),Mr=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M942.3 486.4l-0.1-0.1-0.1-0.1c-36.4-76.7-80-138.7-130.7-186L760.7 351c43.7 40.2 81.5 93.7 114.1 160.9C791.5 684.2 673.4 766 512 766c-51.3 0-98.3-8.3-141.2-25.1l-54.7 54.7C374.6 823.8 439.8 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0.1-51.3zM878.3 154.2l-42.4-42.4c-3.1-3.1-8.2-3.1-11.3 0L707.8 228.5C649.4 200.2 584.2 186 512 186c-192.2 0-335.4 100.5-430.2 300.3v0.1c-7.7 16.2-7.7 35.2 0 51.5 36.4 76.7 80 138.7 130.7 186.1L111.8 824.5c-3.1 3.1-3.1 8.2 0 11.3l42.4 42.4c3.1 3.1 8.2 3.1 11.3 0l712.8-712.8c3.1-3 3.1-8.1 0-11.2zM398.9 537.4c-1.9-8.2-2.9-16.7-2.9-25.4 0-61.9 50.1-112 112-112 8.7 0 17.3 1 25.4 2.9L398.9 537.4z m184.5-184.5C560.5 342.1 535 336 508 336c-97.2 0-176 78.8-176 176 0 27 6.1 52.5 16.9 75.4L263.3 673c-43.7-40.2-81.5-93.7-114.1-160.9C232.6 339.8 350.7 258 512 258c51.3 0 98.3 8.3 141.2 25.1l-69.8 69.8z"}),l.createElement("path",{d:"M508 624c-6.4 0-12.7-0.5-18.8-1.6l-51.1 51.1c21.4 9.3 45.1 14.4 69.9 14.4 97.2 0 176-78.8 176-176 0-24.8-5.1-48.5-14.4-69.9l-51.1 51.1c1 6.1 1.6 12.4 1.6 18.8C620 573.9 569.9 624 508 624z"}))),Vc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M118.979048 637.074286l137.99619 66.243047 255.171048 123.587048 246.076952-119.222857 147.163429-70.485334a73.142857 73.142857 0 0 1-34.230857 97.109334l-327.119239 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 734.305524A73.142857 73.142857 0 0 1 118.979048 637.074286z m786.090666-153.063619a73.142857 73.142857 0 0 1-33.913904 97.767619L544.01219 740.205714a73.142857 73.142857 0 0 1-63.780571 0L153.136762 581.778286A73.142857 73.142857 0 0 1 117.51619 487.862857l362.300953 170.886095 32.329143 15.652572 327.119238-158.427429 65.80419-31.939047zM544.036571 139.190857l327.094858 158.403048a73.142857 73.142857 0 0 1 0 131.657143l-327.094858 158.427428a73.142857 73.142857 0 0 1-63.780571 0L153.136762 429.251048a73.142857 73.142857 0 0 1 0-131.657143L480.256 139.215238a73.142857 73.142857 0 0 1 63.780571 0z m-31.890285 65.828572L185.027048 363.422476l327.119238 158.427429 327.119238-158.427429L512.146286 205.04381z"}))),Bc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-696 72h136v656H184V184z m656 656H384V384h456v456zM384 320V184h456v136H384z"}))),zr=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8c-16.4 12.8-16.4 37.5 0 50.3l450.8 352.1c5.3 4.1 12.9 0.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281 360-281.1c3.8-3 6.1-7.7 6.1-12.6z"}))),Fc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM540 701v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53c-12.1-8.7-20-22.9-20-39 0-26.5 21.5-48 48-48s48 21.5 48 48c0 16.1-7.9 30.3-20 39z m152-237H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224z"}))),Wc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M512 42.666667a469.333333 469.333333 0 1 0 469.333333 469.333333A469.333333 469.333333 0 0 0 512 42.666667z m0 864a394.666667 394.666667 0 1 1 394.666667-394.666667 395.146667 395.146667 0 0 1-394.666667 394.666667z"}),l.createElement("path",{d:"M304.906667 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}),l.createElement("path",{d:"M512 512m-66.666667 0a66.666667 66.666667 0 1 0 133.333334 0 66.666667 66.666667 0 1 0-133.333334 0Z"}),l.createElement("path",{d:"M719.093333 512m-66.666666 0a66.666667 66.666667 0 1 0 133.333333 0 66.666667 66.666667 0 1 0-133.333333 0Z"}))),Hc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M256 682.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0zM768 170.666667a85.333333 85.333333 0 1 0 0 170.666666 85.333333 85.333333 0 0 0 0-170.666666z m-170.666667 85.333333a170.666667 170.666667 0 1 1 341.333334 0 170.666667 170.666667 0 0 1-341.333334 0z"}),l.createElement("path",{d:"M707.84 316.16a42.666667 42.666667 0 0 1 0 60.330667l-331.178667 331.178666a42.666667 42.666667 0 0 1-60.330666-60.330666l331.178666-331.178667a42.666667 42.666667 0 0 1 60.330667 0z"}))),Gc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M1000.65998 0.00002h-94.819998a24 24 0 0 0-23.999999 25.14l8 165.519996A494.83999 494.83999 0 0 0 511.99999 16.00002C238.679995 16.00002 15.8 239.060015 16 512.38001 16.2 786.140005 238.199995 1008 511.99999 1008a494.19999 494.19999 0 0 0 332.359994-127.819997 24 24 0 0 0 0.959999-34.86l-67.999998-67.999998a24 24 0 0 0-32.76-1.1A351.999993 351.999993 0 1 1 804.199984 315.600014l-203.059996-9.74a24 24 0 0 0-25.139999 24v94.819998a24 24 0 0 0 23.999999 23.999999h400.659992a24 24 0 0 0 24-23.999999V24.00002a24 24 0 0 0-24-24z"}))),Ir=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z"}))),Yc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M935.253333 111.786667a42.666667 42.666667 0 0 0-23.04-23.04A42.666667 42.666667 0 0 0 896 85.333333h-256a42.666667 42.666667 0 0 0 0 85.333334h153.173333L170.666667 793.173333V640a42.666667 42.666667 0 0 0-85.333334 0v256a42.666667 42.666667 0 0 0 3.413334 16.213333 42.666667 42.666667 0 0 0 23.04 23.04A42.666667 42.666667 0 0 0 128 938.666667h256a42.666667 42.666667 0 0 0 0-85.333334H230.826667L853.333333 230.826667V384a42.666667 42.666667 0 0 0 85.333334 0V128a42.666667 42.666667 0 0 0-3.413334-16.213333z"}))),$c=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M128 128h64v389.312A384.32 384.32 0 0 1 506.688 832H896v64H192a64 64 0 0 1-64-64V128z m313.6 704A320.384 320.384 0 0 0 192 582.4V832h249.6z"}))),Xc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M929.19 352.19c3.12 3.12 3.12 8.19 0 11.31L363.51 929.19c-3.12 3.12-8.19 3.12-11.31 0L94.81 671.81c-3.12-3.12-3.12-8.19 0-11.31L660.49 94.81c3.12-3.12 8.19-3.12 11.31 0l257.39 257.38z m-424.26 5.66l108.89 108.89c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0L456.85 405.93l-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-62.23 62.23 161.22 161.22 469.52-469.52-161.23-161.21-62.23 62.23 62.23 62.23c3.12 3.12 3.12 8.19 0 11.31l-36.77 36.77c-3.12 3.12-8.19 3.12-11.31 0l-62.23-62.23-50.91 50.91z"}))),Uc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}),l.createElement("path",{d:"M921 867L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}))),Zc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M725.333333 341.333333a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666666a42.666667 42.666667 0 1 0 42.666667 42.666666 42.666667 42.666667 0 0 0-42.666667-42.666666z"}),l.createElement("path",{d:"M640 256H85.333333a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM938.666667 256h-128a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333zM512 640a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666667 42.666667 42.666667 42.666667 0 0 0-42.666667-42.666667z"}),l.createElement("path",{d:"M426.666667 554.666667H85.333333a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM938.666667 554.666667h-341.333334a42.666667 42.666667 0 0 1 0-85.333334h341.333334a42.666667 42.666667 0 0 1 0 85.333334zM298.666667 938.666667a128 128 0 1 1 128-128 128 128 0 0 1-128 128z m0-170.666667a42.666667 42.666667 0 1 0 42.666666 42.666667 42.666667 42.666667 0 0 0-42.666666-42.666667z"}),l.createElement("path",{d:"M938.666667 853.333333H384a42.666667 42.666667 0 0 1 0-85.333333h554.666667a42.666667 42.666667 0 0 1 0 85.333333zM213.333333 853.333333H85.333333a42.666667 42.666667 0 0 1 0-85.333333h128a42.666667 42.666667 0 0 1 0 85.333333z"}))),Qc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M802.742857 777.485714c49.942857 0 90.742857-41.371429 90.742857-92 0-61.142857-90.742857-160.914286-90.742857-160.914285S712 624.342857 712 685.485714c0 50.628571 40.8 92 90.742857 92z m-430.971428-50.4c8.114286 8.114286 21.257143 8.114286 29.257142 0l292.685715-292.571428c8.114286-8.114286 8.114286-21.257143 0-29.257143l-292.571429-292.571429c-0.685714-0.685714-1.485714-1.371429-2.285714-1.942857l-89.371429-89.371428a10.411429 10.411429 0 0 0-14.628571 0l-54.857143 54.857142a10.411429 10.411429 0 0 0 0 14.628572l76.8 76.8-237.485714 237.6c-8.114286 8.114286-8.114286 21.257143 0 29.257143l292.457143 292.571428z m14.742857-512.685714l204.457143 204.457143H182.171429l204.342857-204.457143zM960 859.428571H64c-5.028571 0-9.142857 4.114286-9.142857 9.142858v91.428571c0 5.028571 4.114286 9.142857 9.142857 9.142857h896c5.028571 0 9.142857-4.114286 9.142857-9.142857v-91.428571c0-5.028571-4.114286-9.142857-9.142857-9.142858z"}))),Ar=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"}))),Tr=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M853.333333 170.666667H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666666v128a42.666667 42.666667 0 0 0 85.333333 0V256h256v554.666667H384a42.666667 42.666667 0 0 0 0 85.333333h256a42.666667 42.666667 0 0 0 0-85.333333h-85.333333V256h256v85.333333a42.666667 42.666667 0 0 0 85.333333 0V213.333333a42.666667 42.666667 0 0 0-42.666667-42.666666z"}))),Jc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M424.666 448.666H24c-13.254 0-24-10.746-24-24V24C0 10.746 10.746 0 24 0h96c13.254 0 24 10.746 24 24v156.224C235.546 78.558 368.52 14.94 516.35 16.014c273.812 1.988 492.896 223.246 492.314 497.064C1008.082 786.516 786.24 1008 512.666 1008c-128.178 0-244.992-48.626-333.02-128.43-10.198-9.244-10.668-25.108-0.934-34.84l67.934-67.934c8.948-8.948 23.324-9.434 32.802-1.05C341.52 830.672 423.16 864 512.666 864c194.536 0 352-157.432 352-352 0-194.534-157.432-352-352-352-116.992 0-220.56 56.952-284.548 144.666h196.548c13.254 0 24 10.746 24 24v96c0 13.254-10.746 24-24 24z"}))),Kc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M832 464H332V240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v68c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-68c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32z m-40 376H232V536h560v304z"}),l.createElement("path",{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53c12.1-8.7 20-22.9 20-39 0-26.5-21.5-48-48-48s-48 21.5-48 48c0 16.1 7.9 30.3 20 39z"}))),qc=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M859.9 780H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM505.7 669c3.2 4.1 9.4 4.1 12.6 0l112-141.7c4.1-5.2 0.4-12.9-6.3-12.9h-74.1V176c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8z"}))),e0=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M859.9 474H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM506.3 399.3c2.9 3.7 8.5 3.7 11.3 0l100.8-127.5c3.7-4.7 0.4-11.7-5.7-11.7H550V104c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v156h-62.8c-6 0-9.4 7-5.7 11.7l100.8 127.6zM517.7 624.7c-2.9-3.7-8.5-3.7-11.3 0L405.6 752.3c-3.7 4.7-0.4 11.7 5.7 11.7H474v156c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V764h62.8c6 0 9.4-7 5.7-11.7L517.7 624.7z"}))),t0=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M859.9 168H164.1c-4.5 0-8.1 3.6-8.1 8v60c0 4.4 3.6 8 8.1 8h695.8c4.5 0 8.1-3.6 8.1-8v-60c0-4.4-3.6-8-8.1-8zM518.3 355c-3.2-4.1-9.4-4.1-12.6 0l-112 141.7c-4.1 5.2-0.4 12.9 6.3 12.9h73.9V848c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V509.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 355z"}))),Pa=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M508 512m-112 0a112 112 0 1 0 224 0 112 112 0 1 0-224 0Z"}),l.createElement("path",{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3-7.7 16.2-7.7 35.2 0 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM508 688c-97.2 0-176-78.8-176-176s78.8-176 176-176 176 78.8 176 176-78.8 176-176 176z"}))),n0="base-locale-selector",o0=e=>{var t;const{className:n,style:o,defaultValue:i,value:a,onChange:s}=e,c=[{label:"English",key:"en-US"},{label:"中文",key:"zh-CN"}],d={items:c,selectedKeys:[i||a||((t=c[0])===null||t===void 0?void 0:t.key)],onClick:({key:r})=>{s==null||s(r)}};return z.useMemo(()=>l.createElement(oo,{menu:d,placement:"bottom"},l.createElement(ke,{style:o,className:fe(H(n0),n),size:"small",type:"text"},l.createElement(jc,null))),[n,o,i,a,s,d])};function Oa(e){const{accept:t,success:n,error:o}=e;let i=document.createElement("input");i.type="file",t&&(i.accept=t),i.addEventListener("change",function(){var a;const s=(a=i.files)===null||a===void 0?void 0:a[0];n({file:s}),i=null}),i.addEventListener("error",function(a){typeof o=="function"&&o(a),i=null}),i.click()}function Nr(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsDataURL(e)})}function i0(e){return new Promise(function(t,n){let o=new FileReader;o.addEventListener("load",function(){t(o.result),o=null}),o.addEventListener("error",function(i){n(i),o=null}),o.addEventListener("abort",function(){n(new Error("abort")),o=null}),o.readAsText(e)})}function a0(e){const t=new TextEncoder().encode(e),n=new Blob([t],{type:"text/plain;charset=utf-8"});return window.URL.createObjectURL(n)}function s0(e,t){const{fileName:n}=t,o=a0(e);let i=document.createElement("a");i.href=o,i.download=n,i.click(),i=null}function Ni(e){return typeof e=="string"&&(/^\#([0-9a-f]{3}|[0-9a-f]{6}|[0-9a-f]{8})$/i.test(e)||/^[a-z]{1,}$/i.test(e))}function r0(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="linear-gradient"){const n=[];typeof e.angle=="number"?n.push(`${e.angle}deg`):n.push("180deg"),Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(${n.join(", ")})`}else if((e==null?void 0:e.type)==="radial-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.forEach(o=>{n.push(`${o.color} ${o.offset*100}%`)}),t=`radial-gradient(circle, ${n.join(", ")})`}return t}function Li(e){let t="transparent";if(typeof e=="string")t=e;else if((e==null?void 0:e.type)==="radial-gradient"||(e==null?void 0:e.type)==="linear-gradient"){const n=[];Array.isArray(e.stops)&&e.stops.length>0&&(e.stops.forEach((o,i)=>{n.push(`${o.color} ${o.offset*100}%`),i===e.stops.length-1&&o.offset<1&&n.push(`${o.color} ${o.offset*100}%`)}),t=`linear-gradient(90deg, ${n.join(", ")})`)}return t}function ss(e,t){if(t===1)return e;let n=1;const o=/^\#[0-9a-f]{6,6}$/i,i=/^\#[0-9a-f]{8,8}$/i;let a=e;if(o.test(e)?n=parseInt(e.substring(5,7).replace(/^\#/,"0x")):i.test(e)&&(n=parseInt(e.substring(7,9).replace(/^\#/,"0x")),a=e.substring(0,7)),n=n*t,o.test(a)&&n>0&&n<1){const s=Math.max(0,Math.min(255,Math.ceil(n*256)));a=`${a.toUpperCase()}${s.toString(16).toUpperCase()}`}return a}function yt(){function e(){return((1+Math.random())*65536|0).toString(16).substring(1)}return`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}function _t(e){let t=0;for(let n=0;n<e.length;n++)t+=e.charCodeAt(n)*e.charCodeAt(n)*n*n;return t.toString(16).substring(0,4)}function no(e){const t=e.length,n=Math.floor(t/2),o=e.substring(0,4).padEnd(4,"0"),i=e.substring(0,4).padEnd(4,"0"),a=_t(t.toString(16).padEnd(4,o)),s=_t(e.substring(n-4,n).padEnd(4,o)).padEnd(4,"f"),c=_t(e.substring(n-8,n-4).padEnd(4,o)).padEnd(4,"f"),d=_t(e.substring(n-12,n-8).padEnd(4,o)).padEnd(4,"f"),r=_t(e.substring(n-16,n-12).padEnd(4,i)).padEnd(4,"f"),h=_t(e.substring(n,n+4).padEnd(4,i)).padEnd(4,"f"),u=_t(e.substring(n+4,n+8).padEnd(4,i)).padEnd(4,"f"),f=_t(i.padEnd(4,o).padEnd(4,i));return`@assets/${a}${s}-${c}-${d}-${r}-${h}${u}${f}`}function vn(e){return/^@assets\/[0-9a-z]{8,8}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{4,4}\-[0-9a-z]{12,12}$/.test(`${e}`)}function wt(e){function t(n){const o=l0(n);if(["Null","Number","String","Boolean","Undefined"].indexOf(o)>=0)return n;if(o==="Array"){const i=[];return n.forEach(a=>{i.push(t(a))}),i}else if(o==="Object"){const i={};return Object.keys(n).forEach(c=>{i[c]=t(n[c])}),Object.getOwnPropertySymbols(n).forEach(c=>{i[c]=t(n[c])}),i}}return t(e)}function ka(e){const t=wt(e),n=o=>{o.uuid=yt(),o.type==="group"&&o.detail.children&&o.detail.children.forEach(i=>{n(i)})};return n(t),t}function l0(e){return Object.prototype.toString.call(e).replace(/[\]|\[]{1,1}/gi,"").split(" ")[1]}function c0(e,t){const n=e.assets||{},o=wt(e),i=(t==null?void 0:t.loadItemMap)||{},a=s=>{s.forEach(c=>{var d,r,h;if(c.type==="image"&&c.detail.src){const u=c.detail.src;if(vn(u)&&!n[u]&&i[u]&&typeof((d=i[u])===null||d===void 0?void 0:d.source)=="string")n[u]={type:"image",value:i[u].source};else if(!n[u]){const f=no(u);n[f]||(n[f]={type:"image",value:u}),c.detail.src=f}}else if(c.type==="svg"){const u=c.detail.svg;if(vn(u)&&!n[u]&&i[u]&&typeof((r=i[u])===null||r===void 0?void 0:r.source)=="string")n[u]={type:"svg",value:i[u].source};else if(!n[u]){const f=no(u);n[f]||(n[f]={type:"svg",value:u}),c.detail.svg=f}}else if(c.type==="html"){const u=c.detail.html;if(vn(u)&&!n[u]&&i[u]&&typeof((h=i[u])===null||h===void 0?void 0:h.source)=="string")n[u]={type:"html",value:i[u].source};else if(!n[u]){const f=no(u);n[f]||(n[f]={type:"html",value:u}),c.detail.html=f}}else if(c.type==="group"&&Array.isArray(c.detail.children)){const u=c.detail.assets||{};Object.keys(u).forEach(f=>{n[f]||(n[f]=u[f])}),delete c.detail.assets,a(c.detail.children)}})};return a(o.elements),o.assets=n,o}function ht(e){return(Object.prototype.toString.call(e)||"").replace(/(\[object|\])/gi,"").trim()}const Ae={type(e,t){const n=ht(e);return t===!0?n.toLocaleLowerCase():n},array(e){return ht(e)==="Array"},json(e){return ht(e)==="Object"},function(e){return ht(e)==="Function"},asyncFunction(e){return ht(e)==="AsyncFunction"},boolean(e){return ht(e)==="Boolean"},string(e){return ht(e)==="String"},number(e){return ht(e)==="Number"},undefined(e){return ht(e)==="Undefined"},null(e){return ht(e)==="Null"},promise(e){return ht(e)==="Promise"}};function d0(e,t){const{width:n,height:o}=t;return new Promise((i,a)=>{const s=`
    <svg 
      xmlns="http://www.w3.org/2000/svg" 
      width="${n||""}" 
      height = "${o||""}">
      <foreignObject width="100%" height="100%">
        <div xmlns = "http://www.w3.org/1999/xhtml">
          ${e}
        </div>
      </foreignObject>
    </svg>
    `,c=new Blob([s],{type:"image/svg+xml;charset=utf-8"}),d=new FileReader;d.readAsDataURL(c),d.onload=function(r){var h;const u=(h=r==null?void 0:r.target)===null||h===void 0?void 0:h.result;i(u)},d.onerror=function(r){a(r)}})}function u0(e){return new Promise((t,n)=>{const o=e,i=new Blob([o],{type:"image/svg+xml;charset=utf-8"}),a=new FileReader;a.readAsDataURL(i),a.onload=function(s){var c;const d=(c=s==null?void 0:s.target)===null||c===void 0?void 0:c.result;t(d)},a.onerror=function(s){n(s)}})}var Lr=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};const{Image:h0}=window;function Oo(e){return new Promise((t,n)=>{const o=new h0;o.crossOrigin="anonymous",o.onload=function(){t(o)},o.onabort=n,o.onerror=n,o.src=e})}function f0(e){return Lr(this,void 0,void 0,function*(){const t=yield u0(e);return yield Oo(t)})}function m0(e){return e.replace(/\&/gi,"&amp;")}function g0(e,t){return Lr(this,void 0,void 0,function*(){e=m0(e);const n=yield d0(e,t);return yield Oo(n)})}function Cn(e){return typeof e=="number"&&(e>0||e<=0)}function v0(e){return Cn(e)}function p0(e){return Cn(e)}function Dr(e){return typeof e=="number"&&e>=0}function y0(e){return typeof e=="number"&&e>=0}function w0(e){return typeof e=="number"&&e>=-360&&e<=360}function b0(e){return Dr(e)}function E0(e){return Cn(e)&&e>=0}function S0(e){return Ni(e)}function Rr(e){return typeof e=="string"&&/^(http:\/\/|https:\/\/|\.\/|\/)/.test(`${e}`)}function Pr(e){return typeof e=="string"&&/^(data:image\/)/.test(`${e}`)}function C0(e){return Pr(e)||Rr(e)}function x0(e){return typeof e=="string"&&/^(<svg[\s]{1,}|<svg>)/i.test(`${e}`.trim())&&/<\/[\s]{0,}svg>$/i.test(`${e}`.trim())}function M0(e){let t=!1;if(typeof e=="string"){let n=document.createElement("div");n.innerHTML=e,n.children.length>0&&(t=!0),n=null}return t}function z0(e){return typeof e=="string"}function I0(e){return Cn(e)&&e>0}function A0(e){return Cn(e)&&e>0}function T0(e){return Cn(e)&&e>0}function N0(e){return["center","left","right"].includes(e)}function L0(e){return typeof e=="string"&&e.length>0}function D0(e){return["bold"].includes(e)}function R0(e){return/^(-?\d+(?:\.\d+)?)$/.test(`${e}`)}const Ie={x:v0,y:p0,w:Dr,h:y0,angle:w0,number:Cn,numberStr:R0,borderWidth:b0,borderRadius:E0,color:S0,imageSrc:C0,imageURL:Rr,imageBase64:Pr,svg:x0,html:M0,text:z0,fontSize:I0,lineHeight:A0,textAlign:N0,fontFamily:L0,fontWeight:D0,strokeWidth:T0};var Bo=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ee=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},te,St;const P0=12,O0="400",k0="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji'";class Or{constructor(t,n){te.set(this,void 0),St.set(this,void 0),Bo(this,te,t,"f"),Bo(this,St,Object.assign({devicePixelRatio:1,offscreenCanvas:null},n),"f"),this.$resetFont()}$undoPixelRatio(t){return t/ee(this,St,"f").devicePixelRatio}$doPixelRatio(t){return ee(this,St,"f").devicePixelRatio*t}$getContext(){return ee(this,te,"f")}$setContext(t){Bo(this,te,t,"f")}$setFont(t){const n=[];t.fontWeight&&n.push(`${t.fontWeight}`),n.push(`${this.$doPixelRatio(t.fontSize||12)}px`),n.push(`${t.fontFamily||"sans-serif"}`),ee(this,te,"f").font=`${n.join(" ")}`}$resetFont(){this.$setFont({fontSize:P0,fontFamily:k0,fontWeight:O0})}$getOffscreenCanvas(){return ee(this,St,"f").offscreenCanvas}$resize(t){const{width:n,height:o,devicePixelRatio:i,resetStyle:a}=t,{canvas:s}=ee(this,te,"f");s.width=n*i,s.height=o*i,Bo(this,St,Object.assign(Object.assign({},ee(this,St,"f")),{devicePixelRatio:i}),"f"),a===!0&&(s.style.width=`${n}px`,s.style.height=`${o}px`)}$getSize(){const{devicePixelRatio:t}=ee(this,St,"f"),{width:n,height:o}=ee(this,te,"f").canvas;return{width:n/t,height:o/t,devicePixelRatio:t}}get canvas(){return ee(this,te,"f").canvas}get fillStyle(){return ee(this,te,"f").fillStyle}set fillStyle(t){ee(this,te,"f").fillStyle=t}get strokeStyle(){return ee(this,te,"f").strokeStyle}set strokeStyle(t){ee(this,te,"f").strokeStyle=t}get lineWidth(){return this.$undoPixelRatio(ee(this,te,"f").lineWidth)}set lineWidth(t){ee(this,te,"f").lineWidth=this.$doPixelRatio(t)}get textAlign(){return ee(this,te,"f").textAlign}set textAlign(t){ee(this,te,"f").textAlign=t}get textBaseline(){return ee(this,te,"f").textBaseline}set textBaseline(t){ee(this,te,"f").textBaseline=t}get globalAlpha(){return ee(this,te,"f").globalAlpha}set globalAlpha(t){ee(this,te,"f").globalAlpha=t}get shadowColor(){return ee(this,te,"f").shadowColor}set shadowColor(t){ee(this,te,"f").shadowColor=t}get shadowOffsetX(){return this.$undoPixelRatio(ee(this,te,"f").shadowOffsetX)}set shadowOffsetX(t){ee(this,te,"f").shadowOffsetX=this.$doPixelRatio(t)}get shadowOffsetY(){return this.$undoPixelRatio(ee(this,te,"f").shadowOffsetY)}set shadowOffsetY(t){ee(this,te,"f").shadowOffsetY=this.$doPixelRatio(t)}get shadowBlur(){return this.$undoPixelRatio(ee(this,te,"f").shadowBlur)}set shadowBlur(t){ee(this,te,"f").shadowBlur=this.$doPixelRatio(t)}get lineCap(){return ee(this,te,"f").lineCap}set lineCap(t){ee(this,te,"f").lineCap=t}get globalCompositeOperation(){return ee(this,te,"f").globalCompositeOperation}set globalCompositeOperation(t){ee(this,te,"f").globalCompositeOperation=t}fill(...t){return ee(this,te,"f").fill(...t)}arc(t,n,o,i,a,s){return ee(this,te,"f").arc(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),i,a,s)}rect(t,n,o,i){return ee(this,te,"f").rect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}fillRect(t,n,o,i){return ee(this,te,"f").fillRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}clearRect(t,n,o,i){return ee(this,te,"f").clearRect(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}beginPath(){return ee(this,te,"f").beginPath()}closePath(){return ee(this,te,"f").closePath()}lineTo(t,n){return ee(this,te,"f").lineTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}moveTo(t,n){return ee(this,te,"f").moveTo(this.$doPixelRatio(t),this.$doPixelRatio(n))}arcTo(t,n,o,i,a){return ee(this,te,"f").arcTo(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a))}getLineDash(){return ee(this,te,"f").getLineDash()}setLineDash(t){const n=t.map(o=>this.$doPixelRatio(o));return ee(this,te,"f").setLineDash(n)}stroke(t){return t?ee(this,te,"f").stroke(t):ee(this,te,"f").stroke()}translate(t,n){return ee(this,te,"f").translate(this.$doPixelRatio(t),this.$doPixelRatio(n))}rotate(t){return ee(this,te,"f").rotate(t)}drawImage(...t){const n=t[0],o=t[1],i=t[2],a=t[3],s=t[4],c=t[t.length-4],d=t[t.length-3],r=t[t.length-2],h=t[t.length-1];return t.length===9?ee(this,te,"f").drawImage(n,this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s),this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(r),this.$doPixelRatio(h)):ee(this,te,"f").drawImage(n,this.$doPixelRatio(c),this.$doPixelRatio(d),this.$doPixelRatio(r),this.$doPixelRatio(h))}createPattern(t,n){return ee(this,te,"f").createPattern(t,n)}measureText(t){return ee(this,te,"f").measureText(t)}fillText(t,n,o,i){return i!==void 0?ee(this,te,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):ee(this,te,"f").fillText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}strokeText(t,n,o,i){return i!==void 0?ee(this,te,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i)):ee(this,te,"f").strokeText(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}save(){ee(this,te,"f").save()}restore(){ee(this,te,"f").restore()}scale(t,n){ee(this,te,"f").scale(t,n)}circle(t,n,o,i,a,s,c,d){ee(this,te,"f").ellipse(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),a,s,c,d)}isPointInPath(t,n){return ee(this,te,"f").isPointInPath(this.$doPixelRatio(t),this.$doPixelRatio(n))}clip(...t){return ee(this,te,"f").clip(...t)}setTransform(t,n,o,i,a,s){return ee(this,te,"f").setTransform(t,n,o,i,a,s)}getTransform(){return ee(this,te,"f").getTransform()}createLinearGradient(t,n,o,i){return ee(this,te,"f").createLinearGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i))}createRadialGradient(t,n,o,i,a,s){return ee(this,te,"f").createRadialGradient(this.$doPixelRatio(t),this.$doPixelRatio(n),this.$doPixelRatio(o),this.$doPixelRatio(i),this.$doPixelRatio(a),this.$doPixelRatio(s))}createConicGradient(t,n,o){return ee(this,te,"f").createConicGradient(t,this.$doPixelRatio(n),this.$doPixelRatio(o))}}te=new WeakMap,St=new WeakMap;function Tn(e){const{width:t,height:n,ctx:o,devicePixelRatio:i}=e;let a=o;if(!a){const c=document.createElement("canvas");c.width=t*i,c.height=n*i,a=c.getContext("2d")}return new Or(a,e)}function Ao(e){const{width:t,height:n,devicePixelRatio:o}=e,i=new OffscreenCanvas(t*o,n*o),s=i.getContext("2d").canvas.getContext("2d");return new Or(s,{devicePixelRatio:o,offscreenCanvas:i})}function _0(e,t){const{width:n,height:o,devicePixelRatio:i,offscreen:a,createCustomContext2D:s}=t,c={width:n,height:o,devicePixelRatio:i},d=e.getContext("2d");if(s){const r=s(c),h=s(c),u=s(c),f=Tn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:r,overlayContext:h,boardContext:f,drawView:()=>{const{width:g,height:p}=r.$getSize();f.clearRect(0,0,g,p),f.drawImage(u.canvas,0,0,g,p),f.drawImage(r.canvas,0,0,g,p),f.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),r.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}if(a===!0){const r=Ao(c),h=Ao(c),u=Ao(c),f=Tn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:r,overlayContext:h,boardContext:f,drawView:()=>{const{width:g,height:p}=r.$getSize();f.clearRect(0,0,g,p),f.drawImage(u.canvas,0,0,g,p),f.drawImage(r.canvas,0,0,g,p),f.drawImage(h.canvas,0,0,g,p),u.clearRect(0,0,g,p),r.clearRect(0,0,g,p),h.clearRect(0,0,g,p)}}}else{const r=Tn(c),h=Tn(c),u=Tn(c),f=Tn(Object.assign({ctx:d},c));return{underlayContext:u,viewContext:r,overlayContext:h,boardContext:f,drawView:()=>{f.clearRect(0,0,n,o),f.drawImage(u.canvas,0,0,n,o),f.drawImage(r.canvas,0,0,n,o),f.drawImage(h.canvas,0,0,n,o),u.clearRect(0,0,n,o),r.clearRect(0,0,n,o),h.clearRect(0,0,n,o)}}}}var j0=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ft=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},qe;let pn=class{constructor(){qe.set(this,void 0),j0(this,qe,new Map,"f")}on(t,n){if(ft(this,qe,"f").has(t)){const o=ft(this,qe,"f").get(t)||[];o==null||o.push(n),ft(this,qe,"f").set(t,o)}else ft(this,qe,"f").set(t,[n])}off(t,n){if(ft(this,qe,"f").has(t)){const o=ft(this,qe,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}ft(this,qe,"f").set(t,o||[])}}trigger(t,n){const o=ft(this,qe,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(ft(this,qe,"f").has(t)){const n=ft(this,qe,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){ft(this,qe,"f").clear()}};qe=new WeakMap;function V0(e,t){const n=(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y);return n===0?n:Math.sqrt(n)}function it(e,t){return{x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}}var Nn=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ct=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ci,xt,Di,Wn,ya;class yn{constructor(t){ci.add(this),xt.set(this,void 0),Di.set(this,void 0),Wn.set(this,void 0),Nn(this,Di,wt(t.defaultStorage),"f"),Nn(this,xt,Ct(this,ci,"m",ya).call(this),"f"),Nn(this,Wn,t.defaultStatic||{},"f")}set(t,n){Ct(this,xt,"f")[t]=n}get(t){return Ct(this,xt,"f")[t]}setStatic(t,n){Ct(this,Wn,"f")[t]=n}getStatic(t){return Ct(this,Wn,"f")[t]}getSnapshot(t){return(t==null?void 0:t.deepClone)===!0?wt(Ct(this,xt,"f")):Object.assign({},Ct(this,xt,"f"))}clear(){Nn(this,xt,Ct(this,ci,"m",ya).call(this),"f")}destroy(){Nn(this,xt,null,"f"),Nn(this,Wn,null,"f")}}xt=new WeakMap,Di=new WeakMap,Wn=new WeakMap,ci=new WeakSet,ya=function(){return wt(Ct(this,Di,"f"))};function ko(e){const{activeStore:t}=e;return{scale:t==null?void 0:t.scale,offsetTop:t==null?void 0:t.offsetTop,offsetBottom:t==null?void 0:t.offsetBottom,offsetLeft:t==null?void 0:t.offsetLeft,offsetRight:t==null?void 0:t.offsetRight}}function Hi(e){const{activeStore:t}=e;return{devicePixelRatio:t.devicePixelRatio,width:t==null?void 0:t.width,height:t==null?void 0:t.height,contextWidth:t==null?void 0:t.contextWidth,contextHeight:t==null?void 0:t.contextHeight}}function B0(e){return e/Math.PI*180}function Dt(e){return e/180*Math.PI}function _o(e,t,n,o){const i=Dt(t||0);n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(i),e.translate(-n.x,-n.y)),o(e),n&&(i>0||i<0)&&(e.translate(n.x,n.y),e.rotate(-i),e.translate(-n.x,-n.y))}function Et(e,t,n){const o=ut(t);_o(e,t.angle||0,o,()=>{n(e)})}function ut(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function kr(e){const t=Math.min(e[0].x,e[1].x,e[2].x,e[3].x),n=Math.min(e[0].y,e[1].y,e[2].y,e[3].y),o=Math.max(e[0].x,e[1].x,e[2].x,e[3].x),i=Math.max(e[0].y,e[1].y,e[2].y,e[3].y),a={x:t,y:n,w:o-t,h:i-n};return ut(a)}function F0(e,t,n){const o=wa(e,t),i=wa(e,n);return i!==null&&o!==null?i-o:0}function wa(e,t){const n=t.x-e.x,o=t.y-e.y;if(n===0){if(o<0)return 0;if(o>0)return Math.PI}else if(o===0){if(n<0)return Math.PI*3/2;if(n>0)return Math.PI/2}return n>0&&o<0?Math.atan(Math.abs(n)/Math.abs(o)):n>0&&o>0?Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o>0?Math.PI+Math.atan(Math.abs(n)/Math.abs(o)):n<0&&o<0?2*Math.PI-Math.atan(Math.abs(n)/Math.abs(o)):0}function Le(e,t,n){let a=wa(e,t)+n;a>Math.PI*2?a=a-Math.PI*2:a<0-Math.PI*2&&(a=a+Math.PI*2),a<0&&(a=a+Math.PI*2);const s=V0(e,t);let c=0,d=0;return a===0?(c=0,d=0-s):a>0&&a<Math.PI/2?(c=Math.sin(a)*s,d=0-Math.cos(a)*s):a===Math.PI/2?(c=s,d=0):a>Math.PI/2&&a<Math.PI?(c=Math.sin(Math.PI-a)*s,d=Math.cos(Math.PI-a)*s):a===Math.PI?(c=0,d=s):a>Math.PI&&a<3/2*Math.PI?(c=0-Math.sin(a-Math.PI)*s,d=Math.cos(a-Math.PI)*s):a===3/2*Math.PI?(c=0-s,d=0):a>3/2*Math.PI&&a<2*Math.PI?(c=0-Math.sin(2*Math.PI-a)*s,d=0-Math.cos(2*Math.PI-a)*s):a===2*Math.PI&&(c=0,d=0-s),c+=e.x,d+=e.y,{x:c,y:d}}function Ri(e,t){if((t==null?void 0:t.length)>0){let n=e.x,o=e.y;return t.forEach(i=>{const{x:a,y:s,w:c,h:d,angle:r=0}=i,h=ut({x:a,y:s,w:c,h:d,angle:r}),u=Le(h,{x:n,y:o},Dt(r));n=u.x,o=u.y}),{x:n,y:o}}return e}function _r(e,t,n){const{x:o,y:i,w:a,h:s}=e;let c={x:o,y:i},d={x:o+a,y:i},r={x:o+a,y:i+s},h={x:o,y:i+s};if(n&&(n>0||n<0)){const u=Dt(dt(n));c=Le(t,c,u),d=Le(t,d,u),r=Le(t,r,u),h=Le(t,h,u)}return[c,d,r,h]}function io(e){const{angle:t=0}=e,n=ut(e);return _r(e,n,t)}function rs(e,t,n){return[Le(e,{x:t[0].x,y:t[0].y},n),Le(e,{x:t[1].x,y:t[1].y},n),Le(e,{x:t[2].x,y:t[2].y},n),Le(e,{x:t[3].x,y:t[3].y},n)]}function dt(e){if(!(e>0||e<0)||e===0||e===360)return 0;let t=e%360;return t<0?t+=360:e===360&&(t=0),t}function jr(e){let t=!0;if(Array.isArray(e)){const n=[];e.forEach(o=>{var i;typeof o.uuid=="string"&&o.uuid?n.includes(o.uuid)?(t=!1,console.warn(`Duplicate uuids: ${o.uuid}`)):n.push(o.uuid):(t=!1,console.warn("Element missing uuid",o)),o.type==="group"&&(t=jr((i=o==null?void 0:o.detail)===null||i===void 0?void 0:i.children))})}return t}function _a(e){var t;const n={x:0,y:0,w:0,h:0};let o=null;for(let a=0;a<e.length;a++){const s=e[a];if(!((t=s==null?void 0:s.operations)===null||t===void 0)&&t.invisible)continue;const c={x:s.x,y:s.y,w:s.w,h:s.h,angle:s.angle||0};if(c.angle&&(c.angle>0||c.angle<0)){const d=io(c);if(d.length===4){const r=[d[0].x,d[1].x,d[2].x,d[3].x],h=[d[0].y,d[1].y,d[2].y,d[3].y];c.x=Math.min(...r),c.y=Math.min(...h),c.w=Math.abs(Math.max(...r)-Math.min(...r)),c.h=Math.abs(Math.max(...h)-Math.min(...h))}}if(o){const d=Math.min(c.x,n.x),r=Math.min(c.y,n.y),h=Math.max(c.x+c.w,n.x+n.w),u=Math.max(c.y+c.h,n.y+n.h);n.x=d,n.y=r,n.w=Math.abs(h-d),n.h=Math.abs(u-r)}else n.x=c.x,n.y=c.y,n.w=c.w,n.h=c.h;o=c}return{x:Math.floor(n.x),y:Math.floor(n.y),w:Math.ceil(n.w),h:Math.ceil(n.h)}}function Vr(e,t){const n={x:0,y:0,w:0,h:0};e.forEach(i=>{const a={x:i.x,y:i.y,w:i.w,h:i.h,angle:i.angle};if(a.angle&&(a.angle>0||a.angle<0)){const h=io(a);if(h.length===4){const u=[h[0].x,h[1].x,h[2].x,h[3].x],f=[h[0].y,h[1].y,h[2].y,h[3].y];a.x=Math.min(...u),a.y=Math.min(...f),a.w=Math.abs(Math.max(...u)-Math.min(...u)),a.h=Math.abs(Math.max(...f)-Math.min(...f))}}const s=Math.min(a.x,n.x),c=Math.min(a.y,n.y),d=Math.max(a.x+a.w,n.x+n.w),r=Math.max(a.y+a.h,n.y+n.h);n.x=s,n.y=c,n.w=Math.abs(d-s),n.h=Math.abs(r-c)}),t!=null&&t.extend&&(n.x=Math.min(n.x,0),n.y=Math.min(n.y,0));const o={contextWidth:n.w,contextHeight:n.h};return t!=null&&t.viewWidth&&(t!=null&&t.viewHeight)&&(t==null?void 0:t.viewWidth)>0&&(t==null?void 0:t.viewHeight)>0&&(t.viewWidth>n.x+n.w&&(o.contextWidth=t.viewWidth-n.x),t.viewHeight>n.y+n.h&&(o.contextHeight=t.viewHeight-n.y)),o}function W0(e,t,n){const o=Vr(e,{viewWidth:t.width,viewHeight:t.height,extend:n==null?void 0:n.extend});return(n==null?void 0:n.extend)===!0&&(o.contextWidth=Math.max(o.contextWidth,t.contextWidth),o.contextHeight=Math.max(o.contextHeight,t.contextHeight)),{contextSize:o}}function Br(e,t){var n;let o=null;for(let i=0;i<t.length;i++){const a=t[i];if(a.uuid===e){o=a;break}else if(!o&&a.type==="group"){const s=Br(e,((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.children)||[]);if((s==null?void 0:s.uuid)===e){o=s;break}}}return o}function di(e,t){const n=[];function o(i){var a;for(let s=0;s<i.length;s++){const c=i[s];e.includes(c.uuid)?n.push(c):c.type==="group"&&o(((a=c==null?void 0:c.detail)===null||a===void 0?void 0:a.children)||[])}}return o(t),n}function ja(e,t){const n=[];function o(i,a){var s;let c=null;for(let d=0;d<a.length;d++){const r=a[d];if(r.uuid===i){c=r;break}else if(!c&&r.type==="group"){n.push(r);const h=o(i,((s=r==null?void 0:r.detail)===null||s===void 0?void 0:s.children)||[]);if((h==null?void 0:h.uuid)===i){c=h;break}n.pop()}}return c}return o(e,t),n}function Fr(e,t){var n;const o=[];let i=e;if(t.length>1)for(let a=0;a<t.length-1;a++){const s=t[a],c=i[s];if((c==null?void 0:c.type)==="group"&&Array.isArray((n=c==null?void 0:c.detail)===null||n===void 0?void 0:n.children))o.push(c),i=c.detail.children;else return null}return o}function wn(e){const{x:t,y:n,w:o,h:i,angle:a}=e;return{x:t,y:n,w:o,h:i,angle:a}}function Wr(e,t){const n=[];return e.forEach(o=>{const i=Fe(o,t);i&&n.push(i)}),n}function Fe(e,t){let n=null,o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i<e.length-1&&s.type==="group")o=s.detail.children;else if(i===e.length-1)n=s;else break}return n}function bt(e,t){const n=[];let o=!1;const i=a=>{var s;for(let c=0;c<a.length&&o!==!0;c++){n.push(c);const d=a[c];if(d.uuid===e){o=!0;break}else d.type==="group"&&i(((s=d==null?void 0:d.detail)===null||s===void 0?void 0:s.children)||[]);if(o)break;n.pop()}};return i(t),n}function H0(e,t){const n=[],o={};let i=!1;const a=s=>{var c;for(let d=0;d<s.length&&i!==!0;d++){n.push(d);const r=s[d];if(e.includes(r.uuid)){if(o[r.uuid]=[...n],Object.keys(o).length===e.length){i=!0;break}}else r.type==="group"&&a(((c=r==null?void 0:r.detail)===null||c===void 0?void 0:c.children)||[]);if(i)break;n.pop()}};return a(t),o}function Hr(e){const{x:t,y:n,h:o,w:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t+i,y:n+o},{x:t,y:n+o}]}function je(e){const{x:t,y:n,w:o,h:i,angle:a=0}=e;return a===0?Hr(e):_r(e,ut({x:t,y:n,w:o,h:i,angle:a}),a)}function Va(e){const t=[];let n=0,o=0;const i=[],a=[...e];for(let s=0;s<a.length;s++){const{x:c,y:d,w:r,h,angle:u=0}=a[s];n+=c,o+=d;let f;if(s===0){const m={x:n,y:o,w:r,h,angle:u};f=je({x:c,y:d,w:r,h,angle:u}),i.push({center:ut(m),angle:u,radian:Dt(u)})}else{f=Hr({x:n,y:o,w:r,h,angle:u});for(let g=0;g<i.length;g++){const{center:p,radian:w}=i[g];f=rs(p,f,w)}const v=kr(f);if(u>0||u<0){const g=Dt(u);f=rs(v,f,g)}i.push({center:v,angle:u,radian:Dt(u)})}t.push(f)}return t}function G0(e,t){const{groupQueue:n}=t;if(!(n.length>0))return[je(e)];const o=[...n,e];return Va(o)}function Ro(e,t){return G0(e,t).pop()||null}function Y0(e,t){const{scale:n,offsetX:o,offsetY:i}=e,{viewSizeInfo:a}=t,{width:s,height:c,contextWidth:d,contextHeight:r}=a,h=d*n,u=r*n,f=0-o*n,m=0-i*n,v=s-(h+f/n),g=c-(u+m/n);return{scale:n,offsetLeft:f,offsetTop:m,offsetRight:v,offsetBottom:g}}function $0(e){const{scale:t,point:n,viewScaleInfo:o}=e,{offsetLeft:i,offsetTop:a}=o,s=t/o.scale,c=n.x,d=n.y,r=c-c*s+(i*s-i),h=d-d*s+(a*s-a);return{moveX:r,moveY:h}}function X0(e){const{moveX:t=0,moveY:n=0,viewScaleInfo:o,viewSizeInfo:i}=e,{scale:a}=o,{width:s,height:c,contextWidth:d,contextHeight:r}=i;let h=o.offsetLeft,u=o.offsetRight,f=o.offsetTop,m=o.offsetBottom;h+=t,f+=n;const v=d*a,g=r*a;return u=s-(v+h),m=c-(g+f),{scale:a,offsetTop:f,offsetLeft:h,offsetRight:u,offsetBottom:m}}function Ue(e,t){const{viewScaleInfo:n}=t,{x:o,y:i,w:a,h:s,angle:c}=e,{scale:d,offsetTop:r,offsetLeft:h}=n;return{x:o*d+h,y:i*d+r,w:a*d,h:s*d,angle:c}}function Se(e,t){const{viewScaleInfo:n}=t,{x:o,y:i}=e,{scale:a,offsetTop:s,offsetLeft:c}=n;return{x:o*a+c,y:i*a+s}}function $e(e,t){return[Se(e[0],t),Se(e[1],t),Se(e[2],t),Se(e[3],t)]}function ba(e,t){const{context2d:n,element:o,viewScaleInfo:i}=t,{angle:a=0}=o,{x:s,y:c,w:d,h:r}=Ue(o,{viewScaleInfo:i}),h=io({x:s,y:c,w:d,h:r,angle:a});if(h.length>=2){n.beginPath(),n.moveTo(h[0].x,h[0].y);for(let u=1;u<h.length;u++)n.lineTo(h[u].x,h[u].y);n.closePath()}return!!n.isPointInPath(e.x,e.y)}function U0(e,t,n){const o=je(t);return Gr(e,o)}function Gr(e,t,n){const o=[t[0].x,t[1].x,t[2].x,t[3].x],i=[t[0].y,t[1].y,t[2].y,t[3].y],a=Math.min(...o),s=Math.max(...o),c=Math.min(...i),d=Math.max(...i);return e.x>a&&e.x<s&&e.y>c&&e.y<d}function Z0(e,t){var n,o,i;const{context2d:a,data:s,viewScaleInfo:c,viewSizeInfo:d,groupQueue:r}=t,h={index:-1,element:null,groupQueueIndex:-1};if(r&&Array.isArray(r)&&(r==null?void 0:r.length)>0)for(let u=r.length-1;u>=0;u--){let f=0,m=0,v=0;for(let p=0;p<=u;p++)f+=r[p].x,m+=r[p].y,v+=r[p].angle||0;const g=r[u];if(g&&g.type==="group"&&Array.isArray((n=g.detail)===null||n===void 0?void 0:n.children))for(let p=0;p<g.detail.children.length;p++){const w=g.detail.children[p];if(((o=w==null?void 0:w.operations)===null||o===void 0?void 0:o.invisible)!==!0)if(w){const S={x:f+w.x,y:m+w.y,w:w.w,h:w.h,angle:v+(w.angle||0)};if(ba(e,{context2d:a,element:S,viewScaleInfo:c,viewSizeInfo:d})){h.element=w,(u<r.length-1||w.type!=="group")&&(h.groupQueueIndex=u);break}}else break}if(h.element)break}if(h.element)return h;for(let u=s.elements.length-1;u>=0;u--){const f=s.elements[u];if(((i=f==null?void 0:f.operations)===null||i===void 0?void 0:i.invisible)!==!0&&ba(e,{context2d:a,element:f,viewScaleInfo:c,viewSizeInfo:d})){h.index=u,h.element=f;break}}return h}function Yr(e,t){const{groupQueue:n}=t,o=Ro(e,{groupQueue:n}),i=it(o[0],o[1]),a=it(o[1],o[2]),s=it(o[2],o[3]),c=it(o[3],o[0]),d=o[0],r=o[1],h=o[2],u=o[3],f=Math.max(d.x,r.x,h.x,u.x),m=Math.max(d.y,r.y,h.y,u.y),v=Math.min(d.x,r.x,h.x,u.x),g=Math.min(d.y,r.y,h.y,u.y);return{center:{x:(f+v)/2,y:(m+g)/2},topLeft:d,topRight:r,bottomLeft:u,bottomRight:h,top:i,right:a,left:c,bottom:s}}function $r(e){const t=Math.max(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),n=Math.max(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),o=Math.min(e.topLeft.x,e.topRight.x,e.bottomRight.x,e.bottomLeft.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomRight.y,e.bottomLeft.y),a={x:e.center.x,y:e.center.y},s={x:o,y:i},c={x:t,y:i},d={x:t,y:n},r={x:o,y:n},h=it(s,c),u=it(r,d),f=it(s,r),m=it(c,d);return{center:a,topLeft:s,topRight:c,bottomLeft:r,bottomRight:d,top:h,right:m,left:f,bottom:u}}function Q0(e,t){const n={},o=[],i=a=>{const s={isVisibleInView:!0,isGroup:a.type==="group",position:[...o]};let c=null;const d=Fr(e,o);c=Yr(a,{groupQueue:d||[]}),n[a.uuid]=Object.assign(Object.assign({},s),{originRectInfo:c,rangeRectInfo:Ie.angle(a.angle)?$r(c):c}),a.type==="group"&&a.detail.children.forEach((r,h)=>{o.push(h),i(r),o.pop()})};return e.forEach((a,s)=>{o.push(s),i(a),o.pop()}),Xr(n,t)}function J0(e,t){const n=Math.min(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),o=Math.max(e.topLeft.x,e.topRight.x,e.bottomLeft.x,e.bottomRight.x),i=Math.min(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),a=Math.max(e.topLeft.y,e.topRight.y,e.bottomLeft.y,e.bottomRight.y),s=Math.min(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),c=Math.max(t.topLeft.x,t.topRight.x,t.bottomLeft.x,t.bottomRight.x),d=Math.min(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y),r=Math.max(t.topLeft.y,t.topRight.y,t.bottomLeft.y,t.bottomRight.y);return n<=c&&o>=s&&i<=r&&a>=d||c<=a&&c>=a&&c<=a&&c>=a}function Xr(e,t){const n=K0(t);let o=0,i=0;return Object.keys(e).forEach(a=>{const s=e[a];s.isVisibleInView=J0(s.rangeRectInfo,n),s.isVisibleInView?o++:i++}),{viewVisibleInfoMap:e,visibleCount:o,invisibleCount:i}}function K0(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i,offsetLeft:a}=t,{width:s,height:c}=n,d=0-a/o,r=0-i/o,h=s/o,u=c/o,f=ut({x:d,y:r,w:h,h:u}),m={x:d,y:r},v={x:d+h,y:r},g={x:d,y:r+u},p={x:d+h,y:r+u},w={x:d,y:f.y},S={x:f.x,y:r},A={x:d+h,y:f.y},y={x:f.x,y:r+u};return{center:f,topLeft:m,topRight:v,bottomLeft:g,bottomRight:p,left:w,top:S,right:A,bottom:y}}function We(e,t){const{x:n,y:o}=e,{size:i,angle:a}=t;return{x:n-i/2,y:o-i/2,w:i,h:i,angle:a}}function q0(e,t){const{groupQueue:n,controllerSize:o,viewScaleInfo:i,rotateControllerSize:a,rotateControllerPosition:s}=t,c=(o&&o>0?o:8)/i.scale,{x:d,y:r,w:h,h:u,angle:f=0}=e,m=a,v=s,g=[{uuid:yt(),x:d,y:r,w:h,h:u,angle:f,type:"group",detail:{children:[]}},...n];let p=0;g.forEach(({angle:ae=0})=>{p+=ae});const w=Ro(e,{groupQueue:n}),S=Ro({x:d,y:r-(v+m/2)/i.scale,h:u+(v*2+m)/i.scale,w:h,angle:f},{groupQueue:[...n]}),A=it(w[0],w[1]),y=it(w[1],w[2]),I=it(w[2],w[3]),b=it(w[3],w[0]),E=w[0],C=w[1],V=w[2],T=w[3],P=We(A,{size:c,angle:p}),R=We(y,{size:c,angle:p}),_=We(I,{size:c,angle:p}),Z=We(b,{size:c,angle:p}),W=We(E,{size:c,angle:p}),D=We(C,{size:c,angle:p}),k=We(T,{size:c,angle:p}),j=We(V,{size:c,angle:p}),M=je(W),$=je(D),B=je(k),N=je(j),U=[M[1],$[0],$[3],M[2]],G=[$[3],$[2],N[1],N[0]],x=[B[1],N[0],N[3],B[2]],L=[M[3],M[2],B[1],B[0]],O=je(P),F=je(R),Q=je(_),oe=je(Z),ne=it(S[0],S[1]),ve=We(ne,{size:a*1.1/i.scale,angle:p}),Y=je(ve);return{elementWrapper:w,left:{type:"left",vertexes:L,center:b,size:c},right:{type:"right",vertexes:G,center:y,size:c},top:{type:"top",vertexes:U,center:A,size:c},bottom:{type:"bottom",vertexes:x,center:I,size:c},topLeft:{type:"top-left",vertexes:M,center:E,size:c},topRight:{type:"top-right",vertexes:$,center:C,size:c},bottomLeft:{type:"bottom-left",vertexes:B,center:T,size:c},bottomRight:{type:"bottom-right",vertexes:N,center:V,size:c},leftMiddle:{type:"left-middle",vertexes:oe,center:b,size:c},rightMiddle:{type:"right-middle",vertexes:F,center:y,size:c},topMiddle:{type:"top-middle",vertexes:O,center:A,size:c},bottomMiddle:{type:"bottom-middle",vertexes:Q,center:I,size:c},rotate:{type:"rotate",vertexes:Y,center:ne,size:a}}}function ls(e,t){const{controllerSize:n,viewScaleInfo:o}=t,i=n&&n>0?n:8,{x:a,y:s,w:c,h:d}=Ue(e,{viewScaleInfo:o}),r=ut({x:a,y:s,w:c,h:d}),h={x:r.x,y:s},u={x:a+c,y:r.y},f={x:r.x,y:s+d},m={x:a,y:r.y},v={x:a,y:s},g={x:a+c,y:s},p={x:a+c,y:s+d},w={x:a,y:s+d},S=We(h,{size:i,angle:0}),A=We(u,{size:i,angle:0}),y=We(f,{size:i,angle:0}),I=We(m,{size:i,angle:0}),b=We(v,{size:i,angle:0}),E=We(g,{size:i,angle:0}),C=We(w,{size:i,angle:0}),V=We(p,{size:i,angle:0}),T=je(b),P=je(E),R=je(C),_=je(V),Z=[T[1],P[0],P[3],T[2]],W=[P[3],P[2],_[1],_[0]],D=[R[1],_[0],_[3],R[2]],k=[T[3],T[2],R[1],R[0]],j=je(S),M=je(A),$=je(y),B=je(I);return{left:{type:"left",vertexes:k,center:m,size:i},right:{type:"right",vertexes:W,center:u,size:i},top:{type:"top",vertexes:Z,center:h,size:i},bottom:{type:"bottom",vertexes:D,center:f,size:i},topLeft:{type:"top-left",vertexes:T,center:v,size:i},topRight:{type:"top-right",vertexes:P,center:g,size:i},bottomLeft:{type:"bottom-left",vertexes:R,center:w,size:i},bottomRight:{type:"bottom-right",vertexes:_,center:p,size:i},leftMiddle:{type:"left-middle",vertexes:B,center:m,size:i},rightMiddle:{type:"right-middle",vertexes:M,center:u,size:i},topMiddle:{type:"top-middle",vertexes:j,center:h,size:i},bottomMiddle:{type:"bottom-middle",vertexes:$,center:f,size:i}}}function Ba(e){let t="";return e.forEach(n=>{t+=n.type+n.params.join(" ")}),t}function be(e,t){let n=2;return typeof(t==null?void 0:t.decimalPlaces)<"u"&&(t==null?void 0:t.decimalPlaces)>=0&&(n=t.decimalPlaces),parseFloat(e.toFixed(n))}const ui="Text Element";function xn(){return{boxSizing:"border-box",borderWidth:0,borderColor:"#000000",shadowColor:"#000000",borderRadius:0,borderDash:[],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,opacity:1,color:"#000000",textAlign:"left",verticalAlign:"top",fontSize:16,fontFamily:"sans-serif",fontWeight:400,minInlineSize:"auto",wordBreak:"break-all",overflow:"hidden"}}function ed(){return{background:"#D9D9D9"}}function td(){return{background:"#D9D9D9",radius:0}}function nd(e){const t=xn();return{text:ui,color:t.color,fontFamily:t.fontFamily,fontWeight:t.fontWeight,lineHeight:e.w/ui.length,fontSize:e.w/ui.length,textAlign:"center",verticalAlign:"middle"}}function od(){return{svg:'<svg t="1701004189871" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"   width="200" height="200"><path d="M908.1 353.1l-253.9-36.9L540.7 86.1c-3.1-6.3-8.2-11.4-14.5-14.5-15.8-7.8-35-1.3-42.9 14.5L369.8 316.2l-253.9 36.9c-7 1-13.4 4.3-18.3 9.3-12.3 12.7-12.1 32.9 0.6 45.3l183.7 179.1-43.4 252.9c-1.2 6.9-0.1 14.1 3.2 20.3 8.2 15.6 27.6 21.7 43.2 13.4L512 754l227.1 119.4c6.2 3.3 13.4 4.4 20.3 3.2 17.4-3 29.1-19.5 26.1-36.9l-43.4-252.9 183.7-179.1c5-4.9 8.3-11.3 9.3-18.3 2.7-17.5-9.5-33.7-27-36.3zM664.8 561.6l36.1 210.3L512 672.7 323.1 772l36.1-210.3-152.8-149L417.6 382 512 190.7 606.4 382l211.2 30.7-152.8 148.9z"   fill="#2c2c2c"></path></svg>'}}function id(){return{src:"data:image/svg+xml;base64,PHN2ZyAgIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjIwMCIgaGVpZ2h0PSIyMDAiPjxwYXRoIGQ9Ik05MjggMTYwSDk2Yy0xNy43IDAtMzIgMTQuMy0zMiAzMnY2NDBjMCAxNy43IDE0LjMgMzIgMzIgMzJoODMyYzE3LjcgMCAzMi0xNC4zIDMyLTMyVjE5MmMwLTE3LjctMTQuMy0zMi0zMi0zMnogbS00MCA2MzJIMTM2di0zOS45bDEzOC41LTE2NC4zIDE1MC4xIDE3OEw2NTguMSA0ODkgODg4IDc2MS42Vjc5MnogbTAtMTI5LjhMNjY0LjIgMzk2LjhjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDQyNC42IDY2Ni40bC0xNDQtMTcwLjdjLTMuMi0zLjgtOS0zLjgtMTIuMiAwTDEzNiA2NTIuN1YyMzJoNzUydjQzMC4yeiIgIGZpbGw9IiM1MTUxNTEiPjwvcGF0aD48cGF0aCBkPSJNMzA0IDQ1NmM0OC42IDAgODgtMzkuNCA4OC04OHMtMzkuNC04OC04OC04OC04OCAzOS40LTg4IDg4IDM5LjQgODggODggODh6IG0wLTExNmMxNS41IDAgMjggMTIuNSAyOCAyOHMtMTIuNSAyOC0yOCAyOC0yOC0xMi41LTI4LTI4IDEyLjUtMjggMjgtMjh6IiAgZmlsbD0iIzUxNTE1MSI+PC9wYXRoPjwvc3ZnPg=="}}function ad(){return{children:[],background:"#D9D9D9",overflow:"hidden"}}const sd=xn();function Gi(e,t){const{viewScaleInfo:n}=t,{scale:o}=n;let{borderRadius:i,borderDash:a}=e.detail;const s=Array.isArray(a)&&a.length>0,{boxSizing:c=sd.boxSizing,borderWidth:d}=e.detail;Array.isArray(d)&&(i=0);let{x:r,y:h,w:u,h:f}=e,m=[0,0,0,0];if(typeof i=="number"){const g=i*o;m=[g,g,g,g]}else Array.isArray(i)&&(i==null?void 0:i.length)===4&&(m=[i[0]*o,i[1]*o,i[2]*o,i[3]*o]);let v=0;return typeof d=="number"&&(v=(d||0)*o),c==="border-box"&&!s?(r=e.x+v/2,h=e.y+v/2,u=e.w-v,f=e.h-v):c==="content-box"?(r=e.x-v/2,h=e.y-v/2,u=e.w+v,f=e.h+v):(r=e.x,h=e.y,u=e.w,f=e.h),u=Math.max(u,1),f=Math.max(f,1),m=m.map(g=>Math.min(g,u/2,f/2)),{x:r,y:h,w:u,h:f,radiusList:m}}const Ye=e=>be(e,{decimalPlaces:4});function Ur(e,t){const{detail:n}=e,{xRatio:o,yRatio:i,maxRatio:a}=t,s=(o+i)/2,{borderWidth:c,borderRadius:d,borderDash:r,shadowOffsetX:h,shadowOffsetY:u,shadowBlur:f}=n;if(typeof c=="number")n.borderWidth=Ye(c*s);else if(Array.isArray(n.borderWidth)){const m=c;n.borderWidth=[Ye(m[0]*i),Ye(m[1]*o),Ye(m[2]*i),Ye(m[3]*o)]}if(typeof d=="number")n.borderRadius=Ye(d*s);else if(Array.isArray(n.borderRadius)){const m=d;n.borderRadius=[m[0]*o,m[1]*o,m[2]*i,m[3]*i]}Array.isArray(r)&&r.forEach((m,v)=>{n.borderDash[v]=Ye(m*a)}),typeof h=="number"&&(n.shadowOffsetX=Ye(h*a)),typeof u=="number"&&(n.shadowOffsetX=Ye(u*a)),typeof f=="number"&&(n.shadowOffsetX=Ye(f*a))}function rd(e,t){const{xRatio:n,yRatio:o}=t,{x:i,y:a,w:s,h:c}=e;e.x=Ye(i*n),e.y=Ye(a*o),e.w=Ye(s*n),e.h=Ye(c*o),Ur(e,t)}function ld(e,t){const{minRatio:n,maxRatio:o}=t,{fontSize:i,lineHeight:a}=e.detail,s=(n+o)/2;i&&i>0&&(e.detail.fontSize=Ye(i*s)),a&&a>0&&(e.detail.lineHeight=Ye(a*s))}function Zr(e,t){const{type:n}=e;rd(e,t),n==="circle"||(n==="text"?ld(e,t):n==="image"||n==="svg"||n==="html"||n==="path"||n==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(o=>{Zr(o,t)}))}function Qr(e,t){const n=t.w&&t.w>0?t.w:e.w,o=t.h&&t.h>0?t.h:e.h,i=n/e.w,a=o/e.h;if(i===a&&i===1)return e;const s=Math.min(i,a),c=Math.max(i,a);e.w=n,e.h=o;const d={xRatio:i,yRatio:a,minRatio:s,maxRatio:c};return e.type==="group"&&Array.isArray(e.detail.children)&&e.detail.children.forEach(r=>{Zr(r,d)}),Ur(e,d),e}const Ji=200,Ki=200;function cd(e,t){let n=0,o=0,i=Ji,a=Ki;if(t){const{viewScaleInfo:c,viewSizeInfo:d}=t,{scale:r,offsetLeft:h,offsetTop:u}=c,{width:f,height:m}=d,v=f/4,g=m/4;Ji>=v?i=v/r:i=Ji/r,Ki>=g?a=g/r:a=Ki/r,["circle","svg","image"].includes(e)?i=a=Math.max(i,a):e==="text"&&(a=i/ui.length*2),n=(0-h+f/2-i*r/2)/r,o=(0-u+m/2-a*r/2)/r}return{x:n,y:o,w:i,h:a}}function dd(e,t,n){const o=cd(e,n);let i={};return e==="rect"?i=ed():e==="circle"?i=td():e==="text"?i=nd(o):e==="svg"?i=od():e==="image"?i=id():e==="group"&&(i=ad()),Object.assign(Object.assign(Object.assign({},o),t),{uuid:yt(),type:e,detail:Object.assign(Object.assign({},i),t.detail||{})})}function Jr(e,t,n){let o=!1;if(t.length===1){const i=t[0];n.splice(i,0,e),o=!0}else if(t.length>1){let i=n;for(let a=0;a<t.length;a++){const s=t[a],c=i[s];if(a===t.length-1){const d=t[a];i.splice(d,0,e),o=!0}else if(a<t.length-1&&c.type==="group")i=c.detail.children;else break}}return o}function Kr(e,t){let n=!1;if(e.length===1){const o=e[0];t.splice(o,1),n=!0}else if(e.length>1){let o=t;for(let i=0;i<e.length;i++){const a=e[i],s=o[a];if(i===e.length-1){const c=e[i];o.splice(c,1),n=!0}else if(i<e.length-1&&s.type==="group")o=s.detail.children;else break}}return n}function ud(e,t){const n=bt(e,t);return Kr(n,t)}function Pi(e,t){const n=[...t.from],o=[...t.to];if(n.length===0||o.length===0)return{elements:e,from:n,to:o};if(n.length<=o.length){for(let a=0;a<n.length;a++)if(o[a]===n[a]){if(a===n.length-1)return{elements:e,from:n,to:o};continue}}const i=Fe(n,e);if(i){if(!Jr(i,o,e))return{elements:e,from:n,to:o};let s=-1,c=!1;if(n.length>=1&&o.length>=1){if(n.length<=o.length){if(n.length===1)n[0]<o[0]&&(c=!0);else for(let d=0;d<n.length&&n[d]===o[d];d++)if(n.length===n.length-1){c=!0;break}}if(n.length>=o.length)if(o.length===1)o[0]<n[0]&&(c=!0);else for(let d=0;d<o.length&&(d===o.length-1&&o[d]<n[d]&&(c=!0),n[d]===o[d]);d++);}if(c===!0)for(let d=0;d<n.length&&o[d]>=0;d++)o[d]!==n[d]&&o[d]<n[d]&&d==o.length-1&&(s=d);s>=0&&(n[s]=n[s]+1),Kr(n,e)}return{elements:e,from:n,to:o}}function hd(e,t){var n;const o=Object.keys(t);for(let i=0;i<o.length;i++){const a=o[i];["x","y","w","h","angle","name"].includes(a)?e[a]=t[a]:["detail","operations"].includes(a)&&(Ae.json(t[a])?(e!=null&&e.hasOwnProperty(a)||(e[a]={}),Ae.json(e[a])&&(e[a]=Object.assign(Object.assign({},e[a]),t[a]))):Ae.array(t[a])&&(e!=null&&e.hasOwnProperty(a)||(e[a]=[]),Ae.array(e[a])&&((n=t==null?void 0:t[a])===null||n===void 0||n.forEach((s,c)=>{e[a][c]=s}),e[a]=[...e[a],...t[a]])))}return e}function Kt(e,t,n){var o,i;let a=null;for(let s=0;s<n.length;s++){const c=n[s];if(c.uuid===e){c.type==="group"&&((o=c.operations)===null||o===void 0?void 0:o.deepResize)===!0&&(t.w&&t.w>0||t.h&&t.h>0)&&Qr(c,{w:t.w,h:t.h}),hd(c,t),a=c;break}else c.type==="group"&&(a=Kt(e,t,((i=c==null?void 0:c.detail)===null||i===void 0?void 0:i.children)||[]))}return a}function fd(e,t){var n,o,i,a,s,c,d,r,h,u;let f=0,m=0,v=1,g=((o=(n=e==null?void 0:e.elements)===null||n===void 0?void 0:n[0])===null||o===void 0?void 0:o.x)||0,p=((a=(i=e==null?void 0:e.elements)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.y)||0,w=((c=(s=e==null?void 0:e.elements)===null||s===void 0?void 0:s[0])===null||c===void 0?void 0:c.w)||0,S=((r=(d=e==null?void 0:e.elements)===null||d===void 0?void 0:d[0])===null||r===void 0?void 0:r.h)||0;const{width:A,height:y}=t.viewSizeInfo;if(e.layout&&((u=(h=e.layout)===null||h===void 0?void 0:h.detail)===null||u===void 0?void 0:u.overflow)==="hidden"?(g=0,p=0,w=e.layout.w||0,S=e.layout.h||0):e.elements.forEach(b=>{const E={x:b.x,y:b.y,w:b.w,h:b.h,angle:b.angle};if(E.angle&&(E.angle>0||E.angle<0)){const R=io(E);if(R.length===4){const _=[R[0].x,R[1].x,R[2].x,R[3].x],Z=[R[0].y,R[1].y,R[2].y,R[3].y];E.x=Math.min(..._),E.y=Math.min(...Z),E.w=Math.abs(Math.max(..._)-Math.min(..._)),E.h=Math.abs(Math.max(...Z)-Math.min(...Z))}}const C=Math.min(E.x,g),V=Math.min(E.y,p),T=Math.max(E.x+E.w,g+w),P=Math.max(E.y+E.h,p+S);g=C,p=V,w=Math.abs(T-C),S=Math.abs(P-V)}),e.layout){const{x:b,y:E,w:C,h:V}=e.layout;Ie.x(b)&&Ie.y(E)&&Ie.w(C)&&Ie.h(V)&&(g=Math.min(g,b),p=Math.min(p,E),w=Math.max(w,C),S=Math.max(S,V))}if(w>0&&S>0){const b=be(A/w,{decimalPlaces:4}),E=be(y/S,{decimalPlaces:4});v=Math.min(b,E,1),f=(w*v-A)/2/v+g,m=(S*v-y)/2/v+p}return{offsetX:be(f,{decimalPlaces:0}),offsetY:be(m,{decimalPlaces:0}),scale:v}}function md(e){let t=0,n=0;if(e){const{viewScaleInfo:i,viewSizeInfo:a}=e,{offsetLeft:s,offsetTop:c,scale:d}=i,{width:r,height:h}=a;t=0-s+r/d/2,n=0-c+h/d/2}return{x:t,y:n}}const gd=["-apple-system",'"system-ui"',' "Segoe UI"'," Roboto",'"Helvetica Neue"',"Arial",'"Noto Sans"'," sans-serif"];function qr(e){return[e,...gd].join(", ")}function Ea(e,t,n){if(typeof t=="string")return t;const{viewElementSize:o,viewScaleInfo:i,opacity:a=1}=n,{x:s,y:c}=o,{scale:d}=i;if((t==null?void 0:t.type)==="linear-gradient"){const{start:r,end:h,stops:u}=t,f={x:s+r.x*d,y:c+r.y*d},m={x:s+h.x*d,y:c+h.y*d},v=e.createLinearGradient(f.x,f.y,m.x,m.y);return u.forEach(g=>{v.addColorStop(g.offset,ss(g.color,a))}),v}if((t==null?void 0:t.type)==="radial-gradient"){const{inner:r,outer:h,stops:u}=t,f={x:s+r.x*d,y:c+r.y*d,radius:r.radius*d},m={x:s+h.x*d,y:c+h.y*d,radius:h.radius*d},v=e.createRadialGradient(f.x,f.y,f.radius,m.x,m.y,m.radius);return u.forEach(g=>{v.addColorStop(g.offset,ss(g.color,a))}),v}return"#000000"}const Sa=xn();function bn(e){var t,n,o,i;let a=1;return((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.opacity)!==void 0&&((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.opacity)>=0&&((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.opacity)<=1&&(a=(i=e==null?void 0:e.detail)===null||i===void 0?void 0:i.opacity),a}function jo(e,t,n){const{pattern:o,renderContent:i,originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d}=n||{},{parentOpacity:r}=n,h=bn(a)*r,{clipPath:u,clipPathStrokeColor:f,clipPathStrokeWidth:m}=a.detail,v=()=>{e.globalAlpha=h,el(e,t,{pattern:o,viewScaleInfo:c,viewSizeInfo:d}),i==null||i(),tl(e,t,{viewScaleInfo:c,viewSizeInfo:d}),e.globalAlpha=r};u?(vd(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,renderContent:()=>{v()}}),typeof m=="number"&&m>0&&f&&pd(e,t,{originElem:a,calcElemSize:s,viewScaleInfo:c,viewSizeInfo:d,parentOpacity:r})):v()}function vd(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s}=n,c=s.devicePixelRatio,{clipPath:d}=(i==null?void 0:i.detail)||{};if(d&&a&&d.commands){const{x:r,y:h,w:u,h:f}=a,{originW:m,originH:v,originX:g,originY:p}=d,w=u/m,S=f/v,A=g*w,y=p*S,I=r-A,b=h-y;e.save(),e.translate(I,b),e.scale(c*w,c*S);const E=Ba(d.commands||[]),C=new Path2D(E);e.clip(C),e.translate(0-I,0-b),e.setTransform(1,0,0,1,0,0),Et(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function pd(e,t,n){const{renderContent:o,originElem:i,calcElemSize:a,viewSizeInfo:s,parentOpacity:c}=n,d=s.devicePixelRatio,{clipPath:r,clipPathStrokeColor:h,clipPathStrokeWidth:u}=(i==null?void 0:i.detail)||{};if(r&&a&&r.commands&&typeof u=="number"&&u>0&&h){const{x:f,y:m,w:v,h:g}=a,{originW:p,originH:w,originX:S,originY:A}=r,y=v/p,I=g/w,b=S*y,E=A*I,C=f-b,V=m-E;e.save(),e.globalAlpha=c,e.translate(C,V),e.scale(d*y,d*I);const T=Ba(r.commands||[]),P=new Path2D(T);e.strokeStyle=h,e.lineWidth=u,e.stroke(P),e.translate(0-C,0-V),e.setTransform(1,0,0,1,0,0),Et(e,Object.assign({},t),()=>{o==null||o()}),e.restore()}else o==null||o()}function el(e,t,n){var o,i;const{pattern:a,viewScaleInfo:s,viewSizeInfo:c}=n,d=[];if(t.detail.background||a){const{x:r,y:h,w:u,h:f,radiusList:m}=Gi(t,{viewScaleInfo:s,viewSizeInfo:c});if(e.beginPath(),e.moveTo(r+m[0],h),e.arcTo(r+u,h,r+u,h+f,m[1]),e.arcTo(r+u,h+f,r,h+f,m[2]),e.arcTo(r,h+f,r,h,m[3]),e.arcTo(r,h,r+u,h,m[0]),e.closePath(),typeof a=="string")e.fillStyle=a;else if(["CanvasPattern"].includes(Ae.type(a)))e.fillStyle=a;else if(typeof t.detail.background=="string")e.fillStyle=t.detail.background;else if(((o=t.detail.background)===null||o===void 0?void 0:o.type)==="linear-gradient"){const v=Ea(e,t.detail.background,{viewElementSize:{x:r,y:h,w:u,h:f},viewScaleInfo:s,opacity:e.globalAlpha});e.fillStyle=v}else if(((i=t.detail.background)===null||i===void 0?void 0:i.type)==="radial-gradient"){const v=Ea(e,t.detail.background,{viewElementSize:{x:r,y:h,w:u,h:f},viewScaleInfo:s,opacity:e.globalAlpha});if(e.fillStyle=v,d&&d.length>0)for(let g=0;g<(d==null?void 0:d.length);g++){const p=d[g];p.method==="translate"?e.translate(p.args[0]+r,p.args[1]+h):p.method==="rotate"?e.rotate(...p.args):p.method==="scale"&&e.scale(...p.args)}}e.fill(),d&&d.length>0&&e.setTransform(1,0,0,1,0,0)}}function tl(e,t,n){if(t.detail.borderWidth===0||!Ni(t.detail.borderColor))return;const{viewScaleInfo:o}=n,{scale:i}=o;let a=Sa.borderColor;Ni(t.detail.borderColor)===!0&&(a=t.detail.borderColor);const{borderWidth:s,borderRadius:c,borderDash:d,boxSizing:r=Sa.boxSizing}=t.detail;let h=0;typeof s=="number"&&(h=s||1),h=h*i;let u=[0,0,0,0];if(typeof c=="number"){const w=c*i;u=[w,w,w,w]}else Array.isArray(c)&&(c==null?void 0:c.length)===4&&(u=[c[0]*i,c[1]*i,c[2]*i,c[3]*i]);e.strokeStyle=a;let f=[];Array.isArray(d)&&d.length>0&&(f=d.map(w=>Math.ceil(w*i)));let m=0,v=0,g=0,p=0;if(Array.isArray(s)&&(m=(s[0]||0)*i,v=(s[1]||0)*i,g=(s[2]||0)*i,p=(s[3]||0)*i),p||v||m||g){e.lineCap="butt";let{x:w,y:S,w:A,h:y}=t;r==="border-box"?(w=w+p/2,S=S+m/2,A=A-p/2-v/2,y=y-m/2-g/2):r==="content-box"?(w=w-p/2,S=S-m/2,A=A+p/2+v/2,y=y+m/2+g/2):(w=t.x,S=t.y,A=t.w,y=t.h),m&&(e.beginPath(),e.lineWidth=m,e.moveTo(w-p/2,S),e.lineTo(w+A+v/2,S),e.closePath(),e.stroke()),v&&(e.beginPath(),e.lineWidth=v,e.moveTo(w+A,S-m/2),e.lineTo(w+A,S+y+g/2),e.closePath(),e.stroke()),g&&(e.beginPath(),e.lineWidth=g,e.moveTo(w-p/2,S+y),e.lineTo(w+A+v/2,S+y),e.closePath(),e.stroke()),p&&(e.beginPath(),e.lineWidth=p,e.moveTo(w,S-m/2),e.lineTo(w,S+y+g/2),e.closePath(),e.stroke())}else{let{x:w,y:S,w:A,h:y}=t;r==="border-box"?(w=t.x+h/2,S=t.y+h/2,A=t.w-h,y=t.h-h):r==="content-box"?(w=t.x-h/2,S=t.y-h/2,A=t.w+h,y=t.h+h):(w=t.x,S=t.y,A=t.w,y=t.h),f.length>0?e.lineCap="butt":e.lineCap="square",A=Math.max(A,1),y=Math.max(y,1),u=u.map(I=>Math.min(I,A/2,y/2)),e.setLineDash(f),e.lineWidth=h,e.beginPath(),e.moveTo(w+u[0],S),e.arcTo(w+A,S,w+A,S+y,u[1]),e.arcTo(w+A,S+y,w,S+y,u[2]),e.arcTo(w,S+y,w,S,u[3]),e.arcTo(w,S,w+A,S,u[0]),e.closePath(),e.stroke()}e.setLineDash([])}function Mn(e,t,n){const{detail:o}=t,{viewScaleInfo:i,renderContent:a}=n,{shadowColor:s,shadowOffsetX:c,shadowOffsetY:d,shadowBlur:r}=o;Ie.number(r)?(e.save(),e.shadowColor=s||Sa.shadowColor,e.shadowOffsetX=(c||0)*i.scale,e.shadowOffsetY=(d||0)*i.scale,e.shadowBlur=(r||0)*i.scale,a(),e.restore()):(e.save(),e.shadowColor="transparent",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,a(),e.restore())}function yd(e,t,n){const{detail:o,angle:i}=t,{viewScaleInfo:a,viewSizeInfo:s,parentOpacity:c}=n,{background:d="#000000",borderColor:r="#000000",boxSizing:h,borderWidth:u=0,borderDash:f}=o;let m=0;typeof u=="number"&&u>0?m=u:Array.isArray(u)&&typeof u[0]=="number"&&u[0]>0&&(m=u[0]),m=m*a.scale;const{x:v,y:g,w:p,h:w}=Ue({x:t.x,y:t.y,w:t.w,h:t.h},{viewScaleInfo:a})||t,S=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:w,angle:i});Et(e,{x:v,y:g,w:p,h:w,angle:i},()=>{Mn(e,S,{viewScaleInfo:a,viewSizeInfo:s,renderContent:()=>{let A=p/2,y=w/2;const I=v+A,b=g+y,E=A,C=y;if(m>0&&(h==="content-box"?(A=A,y=y):h==="center-line"?(A=A-m/2,y=y-m/2):(A=A-m,y=y-m)),A>=0&&y>=0){const V=bn(S)*c;e.globalAlpha=V,e.beginPath();const T=Ea(e,d,{viewElementSize:{x:v,y:g,w:p,h:w},viewScaleInfo:a,opacity:e.globalAlpha});if(e.fillStyle=T,e.circle(I,b,E,C,0,0,2*Math.PI),e.closePath(),e.fill(),e.globalAlpha=c,typeof m=="number"&&m>0){const P=m/2+A,R=m/2+y;if(e.beginPath(),f){const _=f.map(Z=>Z*a.scale);e.setLineDash(_)}e.strokeStyle=r,e.lineWidth=m,e.circle(I,b,P,R,0,0,2*Math.PI),e.closePath(),e.stroke(),e.setLineDash([])}}}})})}function wd(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:r,angle:h}=Ue(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:r,angle:h});Et(e,{x:s,y:c,w:d,h:r,angle:h},()=>{Mn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{jo(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:r,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{}})}})})}function bd(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:r,h,angle:u}=Ue(t,{viewScaleInfo:i})||t,f=Object.assign(Object.assign({},t),{x:c,y:d,w:r,h,angle:u});Et(e,{x:c,y:d,w:r,h,angle:u},()=>{Mn(e,f,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{jo(e,f,{originElem:t,calcElemSize:{x:c,y:d,w:r,h,angle:u},viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s,renderContent:()=>{if(!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="image"&&o){e.globalAlpha=bn(t)*s;const{x:m,y:v,w:g,h:p,radiusList:w}=Gi(f,{viewScaleInfo:i,viewSizeInfo:a}),{detail:S}=t,{scaleMode:A,originW:y=0,originH:I=0}=S,b=e.$undoPixelRatio(y),E=e.$undoPixelRatio(I);if(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(m+w[0],v),e.arcTo(m+g,v,m+g,v+p,w[1]),e.arcTo(m+g,v+p,m,v+p,w[2]),e.arcTo(m,v+p,m,v,w[3]),e.arcTo(m,v,m+g,v,w[0]),e.closePath(),e.fill(),e.clip(),A&&I&&y){let C=0,V=0,T=b,P=E;const R=m,_=v,Z=g,W=p;if(b>t.w||E>t.h){if(A==="fill"){const D=Math.max(t.w/b,t.h/E),k=b*D,j=E*D;C=(k-t.w)/2/D,V=(j-t.h)/2/D,T=t.w/D,P=t.h/D}else if(A==="tile")C=0,V=0,T=t.w,P=t.h;else if(A==="fit"){const D=Math.min(t.w/b,t.h/E);C=(b-t.w/D)/2,V=(E-t.h/D)/2,T=t.w/D,P=t.h/D}}e.drawImage(o,C,V,T,P,R,_,Z,W)}else e.drawImage(o,m,v,g,p);e.globalAlpha=s,e.restore()}}})}})})}function Ed(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:r,h,angle:u}=Ue(t,{viewScaleInfo:i,viewSizeInfo:a})||t;Et(e,{x:c,y:d,w:r,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="svg"&&o&&(e.globalAlpha=bn(t)*s,e.drawImage(o,c,d,r,h),e.globalAlpha=s)})}function Sd(e,t,n){const o=n.loader.getContent(t),{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,{x:c,y:d,w:r,h,angle:u}=Ue(t,{viewScaleInfo:i,viewSizeInfo:a})||t;Et(e,{x:c,y:d,w:r,h,angle:u},()=>{!o&&!n.loader.isDestroyed()&&n.loader.load(t,n.elementAssets||{}),t.type==="html"&&o&&(e.globalAlpha=bn(t)*s,e.drawImage(o,c,d,r,h),e.globalAlpha=s)})}const qi=xn();function Cd(e,t,n){return n<.5&&e<t&&(e-t)/e>-.15?!0:e>=t}function xd(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:r,angle:h}=Ue(t,{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:r,angle:h});Et(e,{x:s,y:c,w:d,h:r,angle:h},()=>{Mn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{jo(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:r,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a})}});{const f=Object.assign(Object.assign({},qi),t.detail),m=f.fontSize||qi.fontSize,v=m*o.scale;if(v<2)return;const p=(f.lineHeight||m)*o.scale;e.fillStyle=t.detail.color||qi.color,e.textBaseline="top",e.$setFont({fontWeight:f.fontWeight,fontSize:v,fontFamily:qr(f.fontFamily)});let w=f.text.replace(/\r\n/gi,`
`);f.textTransform==="lowercase"?w=w.toLowerCase():f.textTransform==="uppercase"&&(w=w.toUpperCase());const S=p,A=w.split(`
`),y=[];let I=0;A.forEach((C,V)=>{if(f.minInlineSize==="maxContent")y.push({text:C,width:e.$undoPixelRatio(e.measureText(C).width)});else{let T="",R=C.split("");if(f.wordBreak==="normal"){const _=" ",Z=C.split(_);R=[],Z.forEach((W,D)=>{R.push(W),D<Z.length-1&&R.push(_)})}if(R.length===1&&f.overflow==="visible")y.push({text:R[0],width:e.$undoPixelRatio(e.measureText(R[0]).width)});else if(R.length>0){for(let _=0;_<R.length&&(Cd(e.$doPixelRatio(d),e.measureText(T+R[_]).width,o.scale)?T+=R[_]||"":(y.push({text:T,width:e.$undoPixelRatio(e.measureText(T).width)}),T=R[_]||"",I++),!((I+1)*S>r&&f.overflow==="hidden"));_++)if(R.length-1===_&&(I+1)*S<=r){y.push({text:T,width:e.$undoPixelRatio(e.measureText(T).width)}),V<A.length-1&&I++;break}}else y.push({text:"",width:0})}});let b=0,E=0;S>v&&(E=(S-v)/2),y.length*S<r&&(t.detail.verticalAlign==="top"?b=0:t.detail.verticalAlign==="bottom"?b+=r-y.length*S:b+=(r-y.length*S)/2);{const C=c+b;f.textShadowColor!==void 0&&Ni(f.textShadowColor)&&(e.shadowColor=f.textShadowColor),f.textShadowOffsetX!==void 0&&Ie.number(f.textShadowOffsetX)&&(e.shadowOffsetX=f.textShadowOffsetX),f.textShadowOffsetY!==void 0&&Ie.number(f.textShadowOffsetY)&&(e.shadowOffsetY=f.textShadowOffsetY),f.textShadowBlur!==void 0&&Ie.number(f.textShadowBlur)&&(e.shadowBlur=f.textShadowBlur),y.forEach((V,T)=>{let P=s;f.textAlign==="center"?P=s+(d-V.width)/2:f.textAlign==="right"&&(P=s+(d-V.width)),e.fillText(V.text,P,C+S*T+E)})}}})}var Md=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function zd(e,t,n){var o,i;const{detail:a}=t,{originX:s,originY:c,originW:d,originH:r,fillRule:h}=a,{viewScaleInfo:u,viewSizeInfo:f,parentOpacity:m}=n,{x:v,y:g,w:p,h:w,angle:S}=Ue(t,{viewScaleInfo:u})||t,A=p/d,y=w/r,I=s*A,b=c*y,E=v-I,C=g-b,V=t.detail,T=Md(V,["clipPath","clipPathStrokeColor","clipPathStrokeWidth"]),P=u.scale*f.devicePixelRatio,R=Object.assign(Object.assign({},t),{x:v,y:g,w:p,h:w,angle:S});let _=Object.assign({},R);_.detail=T;let Z=Object.assign({},t);Z.detail=T,a.fill&&a.fill!=="string"&&(!((i=(o=a.fill)===null||o===void 0?void 0:o.type)===null||i===void 0)&&i.includes("gradient"))&&(_=Object.assign(Object.assign({},R),{detail:Object.assign(Object.assign({},R.detail),{background:a.fill,clipPath:{commands:a.commands,originX:s,originY:c,originW:d,originH:r}})}),Z.detail=Object.assign({},_.detail)),Et(e,{x:v,y:g,w:p,h:w,angle:S},()=>{jo(e,_,{originElem:Z,calcElemSize:{x:v,y:g,w:p,h:w,angle:S},viewScaleInfo:u,viewSizeInfo:f,parentOpacity:m,renderContent:()=>{Mn(e,R,{viewScaleInfo:u,viewSizeInfo:f,renderContent:()=>{e.save(),e.translate(E,C),e.scale(P*A/u.scale,P*y/u.scale);const W=Ba(a.commands||[]),D=new Path2D(W);a.fill&&(typeof a.fill=="string"?e.fillStyle=a.fill:e.fillStyle="transparent"),a.fill&&e.fill(D,h),a.stroke&&a.strokeWidth!==0&&(e.strokeStyle=a.stroke,e.lineWidth=(a.strokeWidth||1)/f.devicePixelRatio,e.lineCap=a.strokeLineCap||"square",e.stroke(D)),e.translate(-E,-C),e.restore()}})}})})}const cs=.4;function Fa(e,t,n){var o,i,a;if(((o=t==null?void 0:t.operations)===null||o===void 0?void 0:o.invisible)===!0)return;const{w:s,h:c}=t,{scale:d}=n.viewScaleInfo;if(d<1&&(s*d<cs||c*d<cs)||n.parentOpacity===0)return;const{overrideElementMap:r}=n;if(!(!((a=(i=r==null?void 0:r[t.uuid])===null||i===void 0?void 0:i.operations)===null||a===void 0)&&a.invisible))try{switch(t.type){case"rect":{wd(e,t,n);break}case"circle":{yd(e,t,n);break}case"text":{xd(e,t,n);break}case"image":{bd(e,t,n);break}case"svg":{Ed(e,t,n);break}case"html":{Sd(e,t,n);break}case"path":{zd(e,t,n);break}case"group":{const h=Object.assign(Object.assign({},n.elementAssets||{}),t.detail.assets||{});Id(e,t,Object.assign(Object.assign({},n),{elementAssets:h}));break}default:break}}catch(h){console.error(h)}}function Id(e,t,n){const{viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a}=n,{x:s,y:c,w:d,h:r,angle:h}=Ue({x:t.x,y:t.y,w:t.w,h:t.h,angle:t.angle},{viewScaleInfo:o})||t,u=Object.assign(Object.assign({},t),{x:s,y:c,w:d,h:r,angle:h});Et(e,{x:s,y:c,w:d,h:r,angle:h},()=>{e.globalAlpha=bn(t)*a,Mn(e,u,{viewScaleInfo:o,viewSizeInfo:i,renderContent:()=>{jo(e,u,{originElem:t,calcElemSize:{x:s,y:c,w:d,h:r,angle:h},viewScaleInfo:o,viewSizeInfo:i,parentOpacity:a,renderContent:()=>{const{x:f,y:m,w:v,h:g,radiusList:p}=Gi(u,{viewScaleInfo:o,viewSizeInfo:i});if(t.detail.overflow==="hidden"&&(e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(f+p[0],m),e.arcTo(f+v,m,f+v,m+g,p[1]),e.arcTo(f+v,m+g,f,m+g,p[2]),e.arcTo(f,m+g,f,m,p[3]),e.arcTo(f,m,f+v,m,p[0]),e.closePath(),e.fill(),e.clip()),Array.isArray(t.detail.children)){const{parentElementSize:w}=n,S={x:w.x+t.x,y:w.y+t.y,w:t.w||w.w,h:t.h||w.h,angle:t.angle},{calculator:A}=n;for(let y=0;y<t.detail.children.length;y++){let I=t.detail.children[y];if(I=Object.assign(Object.assign({},I),{x:S.x+I.x,y:S.y+I.y}),!(n.forceDrawAll!==!0&&!(A!=null&&A.needRender(I))))try{Fa(e,I,Object.assign(Object.assign({},n),{parentOpacity:a*bn(t)}))}catch(b){console.error(b)}}}t.detail.overflow==="hidden"&&e.restore()}})}}),e.globalAlpha=a})}const Ad=xn();function ds(e,t,n){var o;const{elements:i=[]}=t,{parentOpacity:a}=n;for(let s=0;s<i.length;s++){const c=i[s],d=Object.assign(Object.assign({},c),{detail:Object.assign(Object.assign({},Ad),c==null?void 0:c.detail)});if(!(n.forceDrawAll!==!0&&!(!((o=n.calculator)===null||o===void 0)&&o.needRender(d))))try{Fa(e,d,Object.assign(Object.assign({},n),{parentOpacity:a}))}catch(r){console.error(r)}}}function Td(e,t,n,o){const{viewScaleInfo:i,viewSizeInfo:a,parentOpacity:s}=n,c=Object.assign({uuid:"layout",type:"group"},t),{x:d,y:r,w:h,h:u}=Ue(c,{viewScaleInfo:i})||c,m=Object.assign(Object.assign({},c),{x:d,y:r,w:h,h:u,angle:0});if(e.globalAlpha=1,Mn(e,m,{viewScaleInfo:i,viewSizeInfo:a,renderContent:()=>{el(e,m,{viewScaleInfo:i,viewSizeInfo:a})}}),t.detail.overflow==="hidden"){const{viewScaleInfo:v,viewSizeInfo:g}=n,p=Object.assign({uuid:"layout",type:"group"},t),w=Ue(p,{viewScaleInfo:v})||p,S=Object.assign(Object.assign({},p),w),{x:A,y,w:I,h:b,radiusList:E}=Gi(S,{viewScaleInfo:v,viewSizeInfo:g});e.save(),e.fillStyle="transparent",e.beginPath(),e.moveTo(A+E[0],y),e.arcTo(A+I,y,A+I,y+b,E[1]),e.arcTo(A+I,y+b,A,y+b,E[2]),e.arcTo(A,y+b,A,y,E[3]),e.arcTo(A,y,A+I,y,E[0]),e.closePath(),e.fill(),e.clip()}o(e),t.detail.overflow==="hidden"&&e.restore(),tl(e,m,{viewScaleInfo:i,viewSizeInfo:a}),e.globalAlpha=s}function Nd(e,t,n){if(typeof(t==null?void 0:t.background)=="string"){const{viewSizeInfo:o}=n,{width:i,height:a}=o;e.globalAlpha=1,e.fillStyle=t.background,e.fillRect(0,0,i,a)}}var ea=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})},Ee=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ao=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ct,To,Jn,lt,Lt,hi,ta,us,hs,fs,nl,ol;const Ld=["image","svg","html"],bo=e=>{var t,n,o;let i=null;return e.type==="image"?i=((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.src)||null:e.type==="svg"?i=((n=e==null?void 0:e.detail)===null||n===void 0?void 0:n.svg)||null:e.type==="html"&&(i=((o=e==null?void 0:e.detail)===null||o===void 0?void 0:o.html)||null),typeof i=="string"&&i?vn(i)?i:no(i):no(`${yt()}-${e.uuid}-${yt()}-${yt()}`)};class Dd extends pn{constructor(){super(),ct.add(this),To.set(this,{}),Jn.set(this,{}),lt.set(this,{}),Lt.set(this,!1),Ee(this,ct,"m",hi).call(this,"image",(t,n)=>ea(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.src])===null||o===void 0?void 0:o.value)||t.detail.src,a=yield Oo(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}})),Ee(this,ct,"m",hi).call(this,"html",(t,n)=>ea(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.html])===null||o===void 0?void 0:o.value)||t.detail.html,a=yield g0(i,{width:t.detail.originW||t.w,height:t.detail.originH||t.h});return{uuid:t.uuid,lastModified:Date.now(),content:a}})),Ee(this,ct,"m",hi).call(this,"svg",(t,n)=>ea(this,void 0,void 0,function*(){var o;const i=((o=n[t.detail.svg])===null||o===void 0?void 0:o.value)||t.detail.svg,a=yield f0(i);return{uuid:t.uuid,lastModified:Date.now(),content:a}}))}isDestroyed(){return Ee(this,Lt,"f")}destroy(){ao(this,Lt,!0,"f"),this.clear(),ao(this,To,null,"f"),ao(this,Jn,null,"f"),ao(this,lt,null,"f")}load(t,n){Ee(this,Lt,"f")!==!0&&(Ee(this,ct,"m",ol).call(this,t)||Ld.includes(t.type)&&Ee(this,ct,"m",nl).call(this,t,n))}getContent(t){var n,o;const i=bo(t);return((o=(n=Ee(this,lt,"f"))===null||n===void 0?void 0:n[i])===null||o===void 0?void 0:o.content)||null}getLoadItemMap(){return Ee(this,lt,"f")}setLoadItemMap(t){ao(this,lt,t,"f")}}To=new WeakMap,Jn=new WeakMap,lt=new WeakMap,Lt=new WeakMap,ct=new WeakSet,hi=function(t,n){Ee(this,To,"f")[t]=n},ta=function(t){var n,o,i;let a=null;return t.type==="image"?a=((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.src)||null:t.type==="svg"?a=((o=t==null?void 0:t.detail)===null||o===void 0?void 0:o.svg)||null:t.type==="html"&&(a=((i=t==null?void 0:t.detail)===null||i===void 0?void 0:i.html)||null),a},us=function(t){return{element:t,status:"null",content:null,error:null,startTime:-1,endTime:-1,source:Ee(this,ct,"m",ta).call(this,t)}},hs=function(t){const n=bo(t.element),o=Ee(this,lt,"f")[n];Ee(this,Lt,"f")||(o?o.startTime<t.startTime&&(Ee(this,lt,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(Ee(this,lt,"f")[n]=t,this.trigger("load",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},fs=function(t){var n;const o=bo(t.element),i=(n=Ee(this,lt,"f"))===null||n===void 0?void 0:n[o];Ee(this,Lt,"f")||(i?i.startTime<t.startTime&&(Ee(this,lt,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))):(Ee(this,lt,"f")[o]=t,this.trigger("error",Object.assign(Object.assign({},t),{countTime:t.endTime-t.startTime}))))},nl=function(t,n){const o=Ee(this,ct,"m",us).call(this,t),i=bo(t);if(Ee(this,Jn,"f")[i])return;Ee(this,Jn,"f")[i]=o;const a=Ee(this,To,"f")[t.type];typeof a=="function"&&!Ee(this,Lt,"f")&&(o.startTime=Date.now(),a(t,n).then(s=>{Ee(this,Lt,"f")||(o.content=s.content,o.endTime=Date.now(),o.status="load",Ee(this,ct,"m",hs).call(this,o))}).catch(s=>{console.warn(`Load element source "${o.source}" fail`,s,t),o.endTime=Date.now(),o.status="error",o.error=s,Ee(this,ct,"m",fs).call(this,o)}))},ol=function(t){var n;const o=bo(t),i=(n=Ee(this,Jn,"f"))===null||n===void 0?void 0:n[o];return!!(i&&i.status==="error"&&i.source&&i.source===Ee(this,ct,"m",ta).call(this,t))};var so=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},mt=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ca,Ht,Tt,fi,il;class al extends pn{constructor(t){super(),Ca.add(this),Ht.set(this,void 0),Tt.set(this,new Dd),fi.set(this,!1),so(this,Ht,t,"f"),mt(this,Ca,"m",il).call(this)}isDestroyed(){return mt(this,fi,"f")}destroy(){this.clear(),so(this,Ht,null,"f"),mt(this,Tt,"f").destroy(),so(this,Tt,null,"f"),so(this,fi,!0,"f")}updateOptions(t){so(this,Ht,t,"f")}drawData(t,n){const o=mt(this,Tt,"f"),{calculator:i,sharer:a}=mt(this,Ht,"f"),s=mt(this,Ht,"f").viewContext;s.clearRect(0,0,s.canvas.width,s.canvas.height);const c={x:0,y:0,w:n.viewSizeInfo.width,h:n.viewSizeInfo.height},d=Object.assign({loader:o,calculator:i,parentElementSize:c,elementAssets:t.assets,parentOpacity:1,overrideElementMap:a==null?void 0:a.getActiveOverrideElemenentMap()},n);Nd(s,t.global,d),t.layout?Td(s,t.layout,d,()=>{ds(s,t,d)}):ds(s,t,d)}scale(t){const{sharer:n}=mt(this,Ht,"f");if(!n)return;const{data:o,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c,width:d,height:r,contextHeight:h,contextWidth:u,devicePixelRatio:f}=n.getActiveStoreSnapshot();o&&this.drawData(o,{viewScaleInfo:{scale:t,offsetTop:i,offsetBottom:a,offsetLeft:s,offsetRight:c},viewSizeInfo:{width:d,height:r,contextHeight:h,contextWidth:u,devicePixelRatio:f}})}setLoadItemMap(t){mt(this,Tt,"f").setLoadItemMap(t)}getLoadItemMap(){return mt(this,Tt,"f").getLoadItemMap()}getLoader(){return mt(this,Tt,"f")}}Ht=new WeakMap,Tt=new WeakMap,fi=new WeakMap,Ca=new WeakSet,il=function(){const t=mt(this,Tt,"f");t.on("load",n=>{this.trigger("load",n)}),t.on("error",n=>{console.error(n)})};var na=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ze=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Hn,He;class sl{constructor(t){Hn.set(this,void 0),He.set(this,void 0),na(this,Hn,t,"f"),na(this,He,new yn({defaultStorage:{viewVisibleInfoMap:{},visibleCount:0,invisibleCount:0}}),"f")}toGridNum(t,n){return(n==null?void 0:n.ignore)===!0?t:Math.round(t)}destroy(){na(this,Hn,null,"f")}needRender(t){const o=Ze(this,He,"f").get("viewVisibleInfoMap")[t.uuid];return o?o.isVisibleInView:!0}isPointInElement(t,n,o,i){const a=Ze(this,Hn,"f").viewContext;return ba(t,{context2d:a,element:n,viewScaleInfo:o,viewSizeInfo:i})}getPointElement(t,n){const o=Ze(this,Hn,"f").viewContext;return Z0(t,Object.assign(Object.assign({},n),{context2d:o}))}resetViewVisibleInfoMap(t,n){if(t){const{viewVisibleInfoMap:o,invisibleCount:i,visibleCount:a}=Q0(t.elements,n);Ze(this,He,"f").set("viewVisibleInfoMap",o),Ze(this,He,"f").set("invisibleCount",i),Ze(this,He,"f").set("visibleCount",a)}}updateVisiableStatus(t){const{viewVisibleInfoMap:n,invisibleCount:o,visibleCount:i}=Xr(Ze(this,He,"f").get("viewVisibleInfoMap"),t);Ze(this,He,"f").set("viewVisibleInfoMap",n),Ze(this,He,"f").set("invisibleCount",o),Ze(this,He,"f").set("visibleCount",i)}calcViewRectInfoFromOrigin(t,n){const o=Ze(this,He,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:r,bottom:h,top:u,topLeft:f,topRight:m,bottomLeft:v,bottomRight:g}=o.originRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:Se(c,p),left:Se(d,p),right:Se(r,p),bottom:Se(h,p),top:Se(u,p),topLeft:Se(f,p),topRight:Se(m,p),bottomLeft:Se(v,p),bottomRight:Se(g,p)}}calcViewRectInfoFromRange(t,n){const o=Ze(this,He,"f").get("viewVisibleInfoMap")[t];if(!(o!=null&&o.originRectInfo))return null;const{checkVisible:i,viewScaleInfo:a,viewSizeInfo:s}=n,{center:c,left:d,right:r,bottom:h,top:u,topLeft:f,topRight:m,bottomLeft:v,bottomRight:g}=o.rangeRectInfo;if(i===!0&&o.isVisibleInView===!1)return null;const p={viewScaleInfo:a,viewSizeInfo:s};return{center:Se(c,p),left:Se(d,p),right:Se(r,p),bottom:Se(h,p),top:Se(u,p),topLeft:Se(f,p),topRight:Se(m,p),bottomLeft:Se(v,p),bottomRight:Se(g,p)}}modifyViewVisibleInfoMap(t,n){const{modifyOptions:o,viewScaleInfo:i,viewSizeInfo:a}=n,{type:s,content:c}=o,d=t.elements,r=Ze(this,He,"f").get("viewVisibleInfoMap");if(s==="deleteElement"){const{element:h}=c,u=[],f=m=>{u.push(m.uuid),m.type==="group"&&Array.isArray(m.detail.children)&&m.detail.children.forEach(v=>{f(v)})};f(h),u.forEach(m=>{delete r[m]}),Ze(this,He,"f").set("viewVisibleInfoMap",r)}else if(s==="addElement"||s==="updateElement"){const{position:h}=c,u=Fe(h,t.elements),f=Fr(d,h);if(u)if(s==="updateElement"&&u.type==="group")this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a});else{const m=Yr(u,{groupQueue:f||[]}),v={originRectInfo:m,rangeRectInfo:Ie.angle(u.angle)?$r(m):m,isVisibleInView:!0,isGroup:(u==null?void 0:u.type)==="group",position:[...h]};r[u.uuid]=v,Ze(this,He,"f").set("viewVisibleInfoMap",r),s==="updateElement"&&this.updateVisiableStatus({viewScaleInfo:i,viewSizeInfo:a})}}else s==="moveElement"&&this.resetViewVisibleInfoMap(t,{viewScaleInfo:i,viewSizeInfo:a})}}Hn=new WeakMap,He=new WeakMap;var oa=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},se=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Te,Kn,Qe,mi,rl,gi,vi,pi,yi,wi,bi,Ei,Si,Gt,Mt,fn;function ms(e){return e>0||e<0||e===0}class Rd extends pn{constructor(t){super(),Te.add(this),Kn.set(this,void 0),Qe.set(this,void 0),mi.set(this,!1),gi.set(this,o=>{if(!se(this,Te,"m",Gt).call(this,o))return;const i=se(this,Te,"m",Mt).call(this,o);if(!se(this,Te,"m",fn).call(this,i))return;o.preventDefault(),o.stopPropagation();const a=o.deltaX>0||o.deltaX<0?o.deltaX:0,s=o.deltaY>0||o.deltaY<0?o.deltaY:0;o.ctrlKey===!0&&this.has("wheelScale")?this.trigger("wheelScale",{deltaX:a,deltaY:s,point:i}):this.has("wheel")&&this.trigger("wheel",{deltaX:a,deltaY:s,point:i})}),vi.set(this,o=>{if(o.button!==2||!se(this,Te,"m",Gt).call(this,o))return;o.preventDefault();const i=se(this,Te,"m",Mt).call(this,o);se(this,Te,"m",fn).call(this,i)&&this.trigger("contextMenu",{point:i})}),pi.set(this,o=>{if(!se(this,Te,"m",Gt).call(this,o))return;o.preventDefault();const i=se(this,Te,"m",Mt).call(this,o);if(!se(this,Te,"m",fn).call(this,i))return;const a=500,s=Date.now(),c=se(this,Qe,"f").get("prevClickPoint");c&&s-c.t<=a&&Math.abs(c.x-i.x)<=5&&Math.abs(c.y-i.y)<=5?this.trigger("doubleClick",{point:i}):se(this,Qe,"f").set("prevClickPoint",i)}),yi.set(this,o=>{se(this,Qe,"f").set("hasPointDown",!1),o.preventDefault();const i=se(this,Te,"m",Mt).call(this,o);this.trigger("pointLeave",{point:i})}),wi.set(this,o=>{if(se(this,Qe,"f").set("hasPointDown",!1),!se(this,Te,"m",Gt).call(this,o))return;o.preventDefault();const i=se(this,Te,"m",Mt).call(this,o);this.trigger("pointEnd",{point:i})}),bi.set(this,o=>{if(!se(this,Te,"m",Gt).call(this,o))return;o.preventDefault(),o.stopPropagation();const i=se(this,Te,"m",Mt).call(this,o);if(!se(this,Te,"m",fn).call(this,i)){se(this,Qe,"f").get("hasPointDown")&&(this.trigger("pointLeave",{point:i}),se(this,Qe,"f").set("hasPointDown",!1));return}se(this,Qe,"f").get("hasPointDown")===!0&&this.trigger("pointMove",{point:i})}),Ei.set(this,o=>{if(o.button!==0||!se(this,Te,"m",Gt).call(this,o))return;o.preventDefault();const i=se(this,Te,"m",Mt).call(this,o);se(this,Te,"m",fn).call(this,i)&&(se(this,Qe,"f").set("hasPointDown",!0),this.trigger("pointStart",{point:i}))}),Si.set(this,o=>{if(!se(this,Te,"m",Gt).call(this,o)){se(this,Qe,"f").get("inCanvas")===!0&&(se(this,Qe,"f").set("inCanvas",!1),se(this,yi,"f").call(this,o));return}se(this,Qe,"f").set("inCanvas",!0),o.preventDefault();const i=se(this,Te,"m",Mt).call(this,o);se(this,Te,"m",fn).call(this,i)&&this.trigger("hover",{point:i})});const n=new yn({defaultStorage:{hasPointDown:!1,prevClickPoint:null,inCanvas:!0}});oa(this,Qe,n,"f"),oa(this,Kn,t,"f"),se(this,Te,"m",rl).call(this)}onEvents(){if(se(this,mi,"f"))return;const t=window;t.addEventListener("mousemove",se(this,Si,"f")),t.addEventListener("mousedown",se(this,Ei,"f")),t.addEventListener("mousemove",se(this,bi,"f")),t.addEventListener("mouseup",se(this,wi,"f")),t.addEventListener("wheel",se(this,gi,"f"),{passive:!1}),t.addEventListener("click",se(this,pi,"f")),t.addEventListener("contextmenu",se(this,vi,"f"))}offEvents(){const t=window;t.removeEventListener("mousemove",se(this,Si,"f")),t.removeEventListener("mousedown",se(this,Ei,"f")),t.removeEventListener("mousemove",se(this,bi,"f")),t.removeEventListener("mouseup",se(this,wi,"f")),t.removeEventListener("mouseleave",se(this,yi,"f")),t.removeEventListener("wheel",se(this,gi,"f")),t.removeEventListener("click",se(this,pi,"f")),t.removeEventListener("contextmenu",se(this,vi,"f"))}destroy(){this.offEvents(),se(this,Qe,"f").destroy(),oa(this,mi,!0,"f")}}Kn=new WeakMap,Qe=new WeakMap,mi=new WeakMap,gi=new WeakMap,vi=new WeakMap,pi=new WeakMap,yi=new WeakMap,wi=new WeakMap,bi=new WeakMap,Ei=new WeakMap,Si=new WeakMap,Te=new WeakSet,rl=function(){this.onEvents()},Gt=function(t){return t.target===se(this,Kn,"f").boardContent.boardContext.canvas},Mt=function(t){const o=se(this,Kn,"f").boardContent.boardContext.canvas.getBoundingClientRect();return{x:t.clientX-o.left,y:t.clientY-o.top,t:Date.now()}},fn=function(t){const n=se(this,Kn,"f").sharer.getActiveViewSizeInfo(),{width:o,height:i}=n;return!!(ms(t.x)&&ms(t.y)&&t.x<=o&&t.y<=i)};var gs=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Ce=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},xe,Gn;const Pd={width:0,height:0,devicePixelRatio:1,contextWidth:0,contextHeight:0,data:null,scale:1,offsetLeft:0,offsetRight:0,offsetTop:0,offsetBottom:0,overrideElementMap:null};class Od{constructor(){xe.set(this,void 0),Gn.set(this,void 0);const t=new yn({defaultStorage:Pd}),n=new yn({defaultStorage:{}});gs(this,xe,t,"f"),gs(this,Gn,n,"f")}getActiveStorage(t){return Ce(this,xe,"f").get(t)}setActiveStorage(t,n){return Ce(this,xe,"f").set(t,n)}getActiveStoreSnapshot(t){return Ce(this,xe,"f").getSnapshot(t)}getSharedStorage(t){return Ce(this,Gn,"f").get(t)}setSharedStorage(t,n){return Ce(this,Gn,"f").set(t,n)}getSharedStoreSnapshot(t){return Ce(this,Gn,"f").getSnapshot(t)}getActiveViewScaleInfo(){return{scale:Ce(this,xe,"f").get("scale"),offsetTop:Ce(this,xe,"f").get("offsetTop"),offsetBottom:Ce(this,xe,"f").get("offsetBottom"),offsetLeft:Ce(this,xe,"f").get("offsetLeft"),offsetRight:Ce(this,xe,"f").get("offsetRight")}}setActiveViewScaleInfo(t){const{scale:n,offsetTop:o,offsetBottom:i,offsetLeft:a,offsetRight:s}=t;Ce(this,xe,"f").set("scale",n),Ce(this,xe,"f").set("offsetTop",o),Ce(this,xe,"f").set("offsetBottom",i),Ce(this,xe,"f").set("offsetLeft",a),Ce(this,xe,"f").set("offsetRight",s)}setActiveViewSizeInfo(t){Ce(this,xe,"f").set("width",t.width),Ce(this,xe,"f").set("height",t.height),Ce(this,xe,"f").set("devicePixelRatio",t.devicePixelRatio),Ce(this,xe,"f").set("contextWidth",t.contextWidth),Ce(this,xe,"f").set("contextHeight",t.contextHeight)}getActiveViewSizeInfo(){return{width:Ce(this,xe,"f").get("width"),height:Ce(this,xe,"f").get("height"),devicePixelRatio:Ce(this,xe,"f").get("devicePixelRatio"),contextWidth:Ce(this,xe,"f").get("contextWidth"),contextHeight:Ce(this,xe,"f").get("contextHeight")}}getActiveOverrideElemenentMap(){return Ce(this,xe,"f").get("overrideElementMap")}setActiveOverrideElemenentMap(t){Ce(this,xe,"f").set("overrideElementMap",t)}}xe=new WeakMap,Gn=new WeakMap;var Ci=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},_e=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},No,Ge,qn,Yn,ll,cl;const{requestAnimationFrame:kd}=window;class _d extends pn{constructor(t){super(),No.add(this),Ge.set(this,void 0),qn.set(this,[]),Yn.set(this,"FREE"),Ci(this,Ge,t,"f"),_e(this,No,"m",ll).call(this)}resetViewVisibleInfoMap(t,n){t&&_e(this,Ge,"f").calculator.resetViewVisibleInfoMap(t,n)}drawFrame(){const{sharer:t}=_e(this,Ge,"f"),n=t.getActiveStoreSnapshot(),o=t.getSharedStoreSnapshot();_e(this,qn,"f").push({activeStore:n,sharedStore:o}),_e(this,No,"m",cl).call(this)}scale(t){const{scale:n,point:o,ignoreUpdateVisibleStatus:i}=t,{sharer:a}=_e(this,Ge,"f"),{moveX:s,moveY:c}=$0({scale:n,point:o,viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()});return a.setActiveStorage("scale",n),i||_e(this,Ge,"f").calculator.updateVisiableStatus({viewScaleInfo:a.getActiveViewScaleInfo(),viewSizeInfo:a.getActiveViewSizeInfo()}),{moveX:s,moveY:c}}scroll(t){const{sharer:n}=_e(this,Ge,"f"),o=n.getActiveViewScaleInfo(),{moveX:i,moveY:a,ignoreUpdateVisibleStatus:s}=t,c=n.getActiveViewSizeInfo(),d=X0({moveX:i,moveY:a,viewScaleInfo:o,viewSizeInfo:c});return n.setActiveViewScaleInfo(d),s||_e(this,Ge,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),d}updateViewScaleInfo(t){const{sharer:n}=_e(this,Ge,"f"),o=Y0(t,{viewSizeInfo:n.getActiveViewSizeInfo()});return n.setActiveViewScaleInfo(o),_e(this,Ge,"f").calculator.updateVisiableStatus({viewScaleInfo:n.getActiveViewScaleInfo(),viewSizeInfo:n.getActiveViewSizeInfo()}),o}resize(t={},n){const{sharer:o}=_e(this,Ge,"f"),i=o.getActiveViewSizeInfo(),a=Object.assign(Object.assign({},i),t),{width:s,height:c,devicePixelRatio:d}=a,{underlayContext:r,boardContext:h,overlayContext:u,viewContext:f}=_e(this,Ge,"f").boardContent;return h.canvas.width=s*d,h.canvas.height=c*d,h.canvas.style.width=`${s}px`,h.canvas.style.height=`${c}px`,r.canvas.width=s*d,r.canvas.height=c*d,u.canvas.width=s*d,u.canvas.height=c*d,f.canvas.width=s*d,f.canvas.height=c*d,o.setActiveViewSizeInfo(a),n!=null&&n.ignoreUpdateVisibleStatus||_e(this,Ge,"f").calculator.updateVisiableStatus({viewScaleInfo:o.getActiveViewScaleInfo(),viewSizeInfo:o.getActiveViewSizeInfo()}),a}}Ge=new WeakMap,qn=new WeakMap,Yn=new WeakMap,No=new WeakSet,ll=function(){const{renderer:t}=_e(this,Ge,"f");t.on("load",()=>{this.drawFrame()})},cl=function e(){if(_e(this,Yn,"f")==="DRAWING"||_e(this,qn,"f").length===0)return;Ci(this,Yn,"DRAWING","f");const t=_e(this,qn,"f").shift(),{renderer:n,boardContent:o,beforeDrawFrame:i,afterDrawFrame:a}=_e(this,Ge,"f");if(t){const{scale:s,offsetTop:c,offsetBottom:d,offsetLeft:r,offsetRight:h,width:u,height:f,contextHeight:m,contextWidth:v,devicePixelRatio:g}=t.activeStore,p={scale:s,offsetTop:c,offsetBottom:d,offsetLeft:r,offsetRight:h},w={width:u,height:f,contextHeight:m,contextWidth:v,devicePixelRatio:g};t!=null&&t.activeStore.data&&n.drawData(t.activeStore.data,{viewScaleInfo:p,viewSizeInfo:w}),i({snapshot:t}),o.drawView(),a({snapshot:t})}if(_e(this,qn,"f").length===0){Ci(this,Yn,"COMPLETE","f");return}Ci(this,Yn,"DRAWING","f")&&kd(()=>{_e(this,No,"m",e).call(this)})};var Yt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},X=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Oe,$n,Nt,Oi,ge,Be,eo,gt,nt,Xn,to,xi,dl,vs,ps,ys,ws,bs,Es,Ss,Cs,xs,Ms,zs,Is,ul,hl,fl,Eo;class jd{constructor(t){Oe.add(this),$n.set(this,void 0),Nt.set(this,new WeakMap),Oi.set(this,[]),ge.set(this,[]),Be.set(this,void 0),eo.set(this,void 0),gt.set(this,void 0),nt.set(this,void 0),Xn.set(this,void 0),to.set(this,new pn),xi.set(this,!1);const{boardContent:n}=t,o=new Od,i=new sl({viewContext:n.viewContext}),a=new Rd({boardContent:n,sharer:o}),s=new al({viewContext:n.viewContext,sharer:o,calculator:i});Yt(this,$n,t,"f"),Yt(this,gt,o,"f"),Yt(this,Be,a,"f"),Yt(this,eo,s,"f"),Yt(this,Xn,i,"f"),Yt(this,nt,new _d({boardContent:t.boardContent,sharer:o,renderer:s,calculator:X(this,Xn,"f"),beforeDrawFrame:c=>{X(this,Oe,"m",hl).call(this,c)},afterDrawFrame:c=>{X(this,Oe,"m",fl).call(this,c)}}),"f"),X(this,Oe,"m",dl).call(this),X(this,Oe,"m",Eo).call(this)}isDestroyed(){return X(this,xi,"f")}destroy(){X(this,Be,"f").destroy(),X(this,eo,"f").destroy(),X(this,Xn,"f").destroy(),X(this,to,"f").destroy(),Yt(this,xi,!0,"f")}getSharer(){return X(this,gt,"f")}getViewer(){return X(this,nt,"f")}getRenderer(){return X(this,eo,"f")}setData(t,n){const{modifiedOptions:o}=n||{},i=X(this,gt,"f");X(this,gt,"f").setActiveStorage("data",t);const a=i.getActiveViewSizeInfo(),s=i.getActiveViewScaleInfo(),c=Vr(t.elements,{viewWidth:a.width,viewHeight:a.height,extend:!0});o?X(this,nt,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}):X(this,nt,"f").resetViewVisibleInfoMap(t,{viewSizeInfo:a,viewScaleInfo:s}),X(this,nt,"f").drawFrame();const d=Object.assign(Object.assign({},a),c);return X(this,gt,"f").setActiveViewSizeInfo(d),{viewSizeInfo:d}}getData(){const{data:t}=X(this,gt,"f").getActiveStoreSnapshot();return t}use(t,n){var o,i,a;if(X(this,Nt,"f").has(t)){const m=X(this,Nt,"f").get(t);if(m){(i=(o=m.middlewareObject).use)===null||i===void 0||i.call(o),m.status="enable",X(this,Nt,"f").set(t,m),X(this,Oe,"m",Eo).call(this);return}}const{boardContent:s,container:c}=X(this,$n,"f"),d=X(this,gt,"f"),r=X(this,nt,"f"),h=X(this,Xn,"f"),u=X(this,to,"f"),f=t({boardContent:s,sharer:d,viewer:r,calculator:h,eventHub:u,container:c},n);(a=f.use)===null||a===void 0||a.call(f),X(this,Oi,"f").push(t),X(this,ge,"f").push(f),X(this,Nt,"f").set(t,{status:"enable",middlewareObject:f,config:n}),X(this,Oe,"m",Eo).call(this)}disuse(t){var n,o;const i=X(this,Nt,"f").get(t);i&&((o=(n=i.middlewareObject).disuse)===null||o===void 0||o.call(n),i.status="disable",X(this,Nt,"f").set(t,i),X(this,Oe,"m",Eo).call(this))}scale(t){const n=X(this,nt,"f"),{ignoreUpdateVisibleStatus:o}=t,{moveX:i,moveY:a}=n.scale(Object.assign(Object.assign({},t),{ignoreUpdateVisibleStatus:!0}));n.scroll({moveX:i,moveY:a,ignoreUpdateVisibleStatus:o})}scroll(t){return X(this,nt,"f").scroll(t)}updateViewScaleInfo(t){return X(this,nt,"f").updateViewScaleInfo(t)}resize(t,n){const o=X(this,nt,"f").resize(t,n),{width:i,height:a,devicePixelRatio:s}=t,{boardContent:c}=X(this,$n,"f");c.viewContext.$resize({width:i,height:a,devicePixelRatio:s}),c.overlayContext.$resize({width:i,height:a,devicePixelRatio:s}),c.boardContext.$resize({width:i,height:a,devicePixelRatio:s}),c.underlayContext.$resize({width:i,height:a,devicePixelRatio:s}),X(this,nt,"f").drawFrame(),X(this,Be,"f").trigger("resize",o),X(this,gt,"f").setActiveViewSizeInfo(t)}clear(){const{boardContent:t}=X(this,$n,"f"),{underlayContext:n,overlayContext:o,viewContext:i,boardContext:a}=t;n.clearRect(0,0,n.canvas.width,n.canvas.height),o.clearRect(0,0,o.canvas.width,o.canvas.height),i.clearRect(0,0,i.canvas.width,i.canvas.height),a.clearRect(0,0,a.canvas.width,a.canvas.height),X(this,Oe,"m",ul).call(this)}getEventHub(){return X(this,to,"f")}onWatcherEvents(){X(this,Be,"f").onEvents()}offWatcherEvents(){X(this,Be,"f").offEvents()}}$n=new WeakMap,Nt=new WeakMap,Oi=new WeakMap,ge=new WeakMap,Be=new WeakMap,eo=new WeakMap,gt=new WeakMap,nt=new WeakMap,Xn=new WeakMap,to=new WeakMap,xi=new WeakMap,Oe=new WeakSet,dl=function(){X(this,Be,"f").on("pointStart",X(this,Oe,"m",vs).bind(this)),X(this,Be,"f").on("pointEnd",X(this,Oe,"m",ps).bind(this)),X(this,Be,"f").on("pointMove",X(this,Oe,"m",ys).bind(this)),X(this,Be,"f").on("pointLeave",X(this,Oe,"m",ws).bind(this)),X(this,Be,"f").on("hover",X(this,Oe,"m",bs).bind(this)),X(this,Be,"f").on("wheel",X(this,Oe,"m",Cs).bind(this)),X(this,Be,"f").on("wheelScale",X(this,Oe,"m",xs).bind(this)),X(this,Be,"f").on("scrollX",X(this,Oe,"m",Ms).bind(this)),X(this,Be,"f").on("scrollY",X(this,Oe,"m",zs).bind(this)),X(this,Be,"f").on("resize",X(this,Oe,"m",Is).bind(this)),X(this,Be,"f").on("doubleClick",X(this,Oe,"m",Es).bind(this)),X(this,Be,"f").on("contextMenu",X(this,Oe,"m",Ss).bind(this)),X(this,eo,"f").on("load",()=>{X(this,to,"f").trigger("loadResource")})},vs=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.pointStart)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ps=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.pointEnd)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ys=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.pointMove)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ws=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.pointLeave)===null||n===void 0?void 0:n.call(i,t))===!1)return}},bs=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.hover)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Es=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.doubleClick)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Ss=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.contextMenu)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Cs=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.wheel)===null||n===void 0?void 0:n.call(i,t))===!1)return}},xs=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.wheelScale)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Ms=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollX)===null||n===void 0?void 0:n.call(i,t))===!1)return}},zs=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.scrollY)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Is=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.resize)===null||n===void 0?void 0:n.call(i,t))===!1)return}},ul=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.clear)===null||n===void 0?void 0:n.call(i,t))===!1)return}},hl=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.beforeDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},fl=function(t){var n;for(let o=0;o<X(this,ge,"f").length;o++){const i=X(this,ge,"f")[o];if(((n=i==null?void 0:i.afterDrawFrame)===null||n===void 0?void 0:n.call(i,t))===!1)return}},Eo=function(){const t=[],n=X(this,Nt,"f");X(this,Oi,"f").forEach(o=>{const i=n.get(o);(i==null?void 0:i.status)==="enable"&&(i!=null&&i.middlewareObject)&&t.push(i.middlewareObject)}),Yt(this,ge,t,"f")};const Vd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MDc6MjYrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjliMGM0MzI2LWU4ZTQtNDlkNy04MmUzLTgxODkwYTE2ZmU1YSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjMzOGFhZDBmLWZkZjMtODE0MS1iMTZmLWNiZWIzNTQyYTJhMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjUwODAxNzc1LWZlNGEtNDQyMy05NDQ3LThkYWRhNzZhYTllOSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTA4MDE3NzUtZmU0YS00NDIzLTk0NDctOGRhZGE3NmFhOWU5IiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjA3OjI2KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OWIwYzQzMjYtZThlNC00OWQ3LTgyZTMtODE4OTBhMTZmZTVhIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjEyOjUwKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7W6XrzAAAGLklEQVRYhb2Xf2iUdRzHX/txtfXLplZ6Wblm6fzRmG6r7Uou1AxKRjQKYUqgaLBACFogppcK1h8aLRkMSYaJIA5hYMomZpskEfPOufCaDpZ6t7rbre263U3vzn3643meu+eu3XNzvz7w4bbdc/e89nl/Pu/v50HUCAQCx1tbW0uAx4CHgSwggxkKERkziUQif2mQ0WjU53a7vwSeBB4BTEDmTICmBBwYGDivVlDjlFAo9KvT6dwIPAHkANkq6MwDXr169bCISENDg9TX14s+BgcHf2hubi5mBmRPCXj06NFPREQ6OjoEkPLycrl06VIMMhKJeFwu1xdMs+wpAYuLi9eIiIyOjkpeXp4AAsj27dvF7/fHQIPB4C9dXV0fME2ypwQEXvX7/bdFRNauXRsDBMRkMsnhw4cTZB8YGGhsamp6hSmW3Qhw1Y0bN86LiNTW1iYAallWViZtbW162ftcLtdO/i/7tAAWtba2ficicvLkyTEBtdy6dasMDg7GQIeHh9s7OzvfBx5nkrIbAS7du3fvxyIiPT09hoBa1tXVJcv+fWNj4zLgUeAhJiC7EeDLwOsiMioisnDhwnFBrlixQi5evKiX/c6tW7c+R5E9lweU3QjwReDV/v7+bhGRqqqqcQFquWnTJvH5fHrZLzocjkoSZU9bTSPA54GV165daxYROXDgwAMBannw4MFk2RsaGhqWME7ZjQDNwIrTp09/JSLS0tIyIUBACgoK5MKFCzHIcDj85+3btz8FZpFGdiPAZ4DCmpqaTSIiPp9vwoBaVlVVidfr1ct+/sqVK+9iILsR4FzgJcASDoeHRUSKioomDQnI/v37E2T3+Xz1hw4dWjSW7EaAeUA+UNbX12cXEdmyZcuUAAJiNpvlzJkzetl73G53rVrN2EmUCjATuA9EgYjL5eoGKCkpGatNHijmz5/Pxo0b2blzJ2azOfZ3k8lUYDabv45Go/Y7d+6sIY0VZQOjGqDT6bxeWlrKqlWrJgRlsVhYv349FRUVWCwWcnJyEt4PBoOuoaEhu9frvdzR0fHTtm3buolvRpLqe3OBp4EllZWV74mIRKNRyc3NTSvf7Nmzpbq6Wk6cOCFut1uSY2RkJOB0Ou3Nzc3Ha2trPwPWAGXAEuBZFFPPAbKMevBhYA6wCKgIBoP9IiKrV682hLPZbP8DEpH7vb29N1paWn602WwHFyxYsAX4EKgE3gIsQBFQgOIeT6j3z0wFqEkc60OPx9Odn58/t6SkhPb29jFLbrVa2bNnDwBer7fv5s2bPQ6Ho7upqcnZ1tbmASJq3gPC6utdYESXYfWeo6mkBaUHRQ/odrv/yM/Pt5SWlqb8kAbncDh+W7lyZYN683u6DOvAwipsOOnniA4wZf9lqhdoVYzY7fbrQMpBsdlsWK1WRkZGAtXV1d8D/wA+wKNLr5o+YEC9ZggIAEHiFbyfDhCUCcoFngIWFxYWrtMaat68eQl9V15eHmu2+vr6OuAd4A2gGFgMLERp/mdQ+noWyuadi9Jr2aQ4k42GBPXDs1Ga97WhoaFbIiIbNmxIANTWq87Ozp9VuApgGfACihPkoRjwI+p3mlSgtA9ZRkYNYwwKJBr2rl27sFqthEKhwZqamqOAX5f/AsPE5btLvM/GJWO6yFb/82eBonPnztWJiJw9e1YAWb58eUzaI0eOfAO8CbwCPIfiZZN+eEoncSaKLPOApbt3794uIuL1ehOktdvtF4C3gRKURXcOSn9lTRRsvIAZKI4+l/gjQFREZMeOHSIiEggE+tetW/cRitkuRhmERxnnxjxZQFDWnzzURwCv1+vUHxHHjh37lri0C1Am9KGpgDMC1G8SQnxxCHs8Hqf2RldX10+bN28+i+JjwyT62KSaP13oAfWTHO7t7f0dIBQK/b1v375GlEnVjPYuyoQaHlNTDahVMALca29vdwBcvnz5+KlTp26OATft1UuODBS7yEOxj0K/329HOSWWopjxlE1tchhtM7FriPfgXSDDbrfXo0gbJr4QzIi0WiRPYBbKZJrUV23b0dYn7XSYcsBkS9EiO/k6lApq1cwiPjzaAM1Y9cYC1G6uAWrPCtrvMwoHqU02Q5caIEzj1KaS+D+vIjxtLug31gAAAABJRU5ErkJggg==",ml="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF92lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NzUzLCAyMDIxLzAyLzE1LTExOjUyOjEzICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMjMtMDktMTdUMTY6MzE6MjMrMDg6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjY0MTBhYjUzLWM0ZjEtNDVhNS04MjhkLTIxOTczOWFjOTk3MSIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjBkMDNmNjM5LTE5MzctY2Y0MC1hMTg0LTIyMjg0NzczNWNmYSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjgyYjQwZGRmLWE0ZGEtNDY3MC1iYzc2LTBhYjY3ZmI5M2I0ZSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODJiNDBkZGYtYTRkYS00NjcwLWJjNzYtMGFiNjdmYjkzYjRlIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjMxOjIzKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NjQxMGFiNTMtYzRmMS00NWE1LTgyOGQtMjE5NzM5YWM5OTcxIiBzdEV2dDp3aGVuPSIyMDIzLTA5LTE3VDE2OjQ0OjIyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMyAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz57vRudAAAEk0lEQVRYhe3ZW0jbVxzA8e8/MX+NYnG9uI4xE3bvoLt0FzradRfGBtsYo32YdAhb6WQyBqV7KOylpYjzZShDGfjmyxgbgjjwyRm16SYMhgiNKDhbL3VtNF4xJOnf3x7+59i/Wf4aTbInf3AwJMdzPjnnf/n9/jFEhGzDMIxMb3uAIsDs6ek5urS05Dtz5syE+uwekAQS6u89YD19gC0NIpJ1c8GZQHlXV9fJRCIxGo/HxxoaGj4CngWOAEGgEihXfT07MeQC3MB1dna+lkgkRkXF6urq3xcuXPgUOAE8DzwGPOiGLARwEy4ej4+JiITD4elr167NiIgsLi7eqq2trQPeBI4Bj7sh8w10xZmmeds0zdn+/v5/RERisdjUuXPnvgLeAl50Q+YTaAA+oKy7u/uE3laNAwSQ4uLiu6FQ6G4G5DG13YeAMjWWkU+gBygJhULHNe769etTTpwDGXUiz58//yXwujp5qoAHgBLAk0+gNxKJHEulUiMKN2ma5gwgPp/vjhOXjlxYWJisq6urBV5RW30IKAW8eQPGYrGjlmXdEBEZHBy8aZrmFCCmac729fVtAHt7e6MO5N2+vr47IiJLS0s3L126dBZ4Sh2LZUBRwVdwYGBgVuwOYh/zsoF0bnPBVzDTMRgOh6dFhROokSIi8/Pz0+pEeaPQx+DGWdzV1XVSX2LcgCIic3NzMzU1NV8D7wIvq9WrLNRZvOk62NHRccqJTAdGo9Hb1dXV3wAfYt9VjgAPFfI66EQWAxU9PT0fuwEvXrzYBJwF3gFeAAJAhfrfrO4k/7lxZxnr2JlJqry8POnWyePx6H4JR0vhktVkHGOXQI20SkpKLLcOhmGsA5YCaZiVLS5XoADi9XpdkznDMERhnE0fCgUHZhvOW+CO4/8A5hR7wFxjD5hr7AFzjZyBlmVlrOYdYaS1HUUuQA/gWV9fd51URDyqn1c1j6MVFGjoidfW1oq2ABrYj0V82OmVzwHNajVdB88C5wOKTdM87NaxsrKyQsFKHC2BnTDo+/TWt8Bd5INeVC44NDT0xXYZdXNz8w/AaeyS8yjwCPdzQu92ht2m/OUjIyOfS1pkAoqItLS0fA+8D7wKPA0cxs6qC1O4T0xMfKYnb21tnXEDNjc3z+nXbW1t3wFvYz9dCAL7KUThHovFPtGTNjU1jQFSX18/lg68cuXKLUAaGxs3vkB7e/u3wHHgCQpUdnpTqdQvesJgMDisUVevXh3Xry9fvnxTv66qqprQ/cfHx/vVNj/J/couv0DAv7q6+pMDeYPNSalkwkUikX7s4ukl4FHgAODPN1CXnPsWFxd/dCAjW+GGhoZCwAfYpeczwMPAPjVW3gv3IvXN98disZ8dyBGNCwQC4/r94eHhfuy6+JS6zATUCeJXY+W9cNfIUuDAwsLCr05kIBDYeBQ8Ojr6h8Lpx25BtbWlGpfv62BG5PLy8m+SFpOTk38C76mVe84NVyhgOvLgysrK7xoXjUb/Uqt2XG1rEDiYCbcd0MgwsWtk+J1EI03An0wmw5Zlefx+/2n1eRKIO5r+rWTTpFsZ/gWFrGMmeObuqwAAAABJRU5ErkJggg==",Bd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAYAAABHomvIAAAEvUlEQVRYhc2Y20/cVRDHP8v+uKzAWkpDCtZq8BYhJkq8PBoJxgj7I2m0ryaSyFN9IT74pI8+8WJiggRj/APApFkSTGRJ+qKGUiyxbGPEWsUSuVhYC12Wy8+HmeMeYPe3d3WSye/k/M7le+bMzJkZ+J9ToEJreGVYN+vihcytstjQocUlAw0WCSoIVCv3Ae8CXwIt+u8XHVeOG8qLqgAHqAFCQCNwGugCthBJGd7S/tM6LqTzHI5KuqzgaoAHgEvAtwrkG2AG8FzXvep5nue67lX9N6P/PR1/SefXlBtkFXKNDUA/RyX1D9uUbYzOb9D1ygbSQU7eDMxhSSsSiVz3AxiJRK57nuf19/fPad8coqONFCBJPyUOIKc1OvcbgiY9ICDT8+0DHge2gR0gBeyTtviM5HeKAGlrrfMZVwhdAVaAr4F3KNF4gkA9cBbowOc68+3LwDn1Mhdy4/OcYk54nPr6+m54nofruvPa9SFQ6wfQTweNgTwInAGuQWk6mEUvHwb+Au4Dexx7ffK9+0q+CHWIBIOZ9skHYKWfK9tQ8gZoLDjIyWCg3ORY+2T8aYOyg4EaRIFrkCs4QU1NTSvabC20zyIDzuyfkYzEahHX8jHwE/LwXwHeJ4P7KIVIu5ouxFDC+HgLAy4MfEF2v1UpgOezATSiNVf6EvAWsD01NXVtdnb2bk9Pz81sp/q3KIi8t83Ae4DX0tJy0z7t8PDwD4FAYIX/WILVwKMAzc3Nu/agoaGhzmg0ugcsV0hIvlSNoH8IuIiebHJycrls4sotwaxGYvueAPAjEg3jum79yMjIr5WUjFLOxMpBIopWoBN4GfhOJ+4NDg4ulVt6i4uLm7r+BvAscA4fCXrAAfJQJ5Fg8gPgMuCMjo62d3V1LW1sbKRKlpXSxMTEmjZ/5qQrOwHwUAGmkIjiHhJdfKrM/Pz8Y+3t7RvT09Ob5QAYi8X2tbmke2cEZwAaCdoAt5QvIzEbiUSitbe3tyoej++UCnBhYSGkzdu6d1aQxkgOkfwgieQMCeCu8iwSnpNKpcIdHR3BZDJ5UCy4SCSyvL6+/giiSou67wE+eYmhAKKkIaAJUdynkdflNcQF3dFTpooxjmg0aozDAz4DXkB8bxPy1OYM7QzIOuAU0AY8pQu9CrwJ3AK8UCj0RyHgZmZmli1w3wOvAM/oHo1kiZiygbSDh7PAE8DzQA/wBqKnnuM4a2NjY7dygbtw4cICRy31deBFJA09o7eWsU7kJ1KTLJmyRyOSn5zS70fAkwBtbW2/DwwMHHR3d9d3dnY2rK6u7o2Pj2/GYrH9eDzurK2tndM1vwI+QXT7T2BTD5skQz6SCyAcLRoZkGEFGQbeRqpbubK+BPA5MI14h00L3I6Cy2h4+eQbJsKuRa6iQcGFFfB5oBt4DpFsI+Ky7iDBxW3gBhBH/GtC+R7i1lKk3UxRAG2QpvxWr0AbtB3SA5jkx36djH/dVlDbyibN3M8GDvJPyI2PSulixm/u6kZ1OQCaJ/S+tndJX6tvsFBIxcCUdA3vW5ubxMrObc0hDMhd/Rqp5QQHxeW8dubnHGM7tzVv/IECMlxQ/bpcRfRMqaNRheNcUGG9XFWDACfzWs/6Fl3t/xtO//8gpbCORQAAAABJRU5ErkJggg==",Fd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAER0lEQVRYhe2YT2hjRRjAf8lL22xsNsm6EWKrSKvuIkIh+O9QRFxEW18KUsoe7FHoRaWCN1FPetOrIHgVKS0q9P5OxaJbodkalgVrtVZjS7Ntd02z6abPw3yzmaT585q+elj2g2HmvZn35jffN/PNNwP35R6XgM/fuif4n+dO2klQvgsaZRc4NJJvoJbHdhrIAkJAN2ADHwFfAw9J3ZoB/b9I0AA6A0SBc0Aa2EVpSqddeZ+QdmfkO+u0gIPSQQR4HfhRQH4AHMDNZDJXXNd1M5nMFalzdB3wJTAOPAD0yEB9066G6wXepVZTd5MpTdporZ6jVqsatmMJoTR3HvgJQ1u2bS+3ArRte9l1XXdsbGyJo1pdBN6Wf3d3ChlAmSQO9LeC8fquQRpDWaerHWSjSr1iu4BkJyOsF9u2s67rkslkluTVxygltAVsJBZqdCngEj5osIlW+4EYytRNF04jeu3vulCT+7QkLH20dEOhumft97pQI4s3+iiRSPwtxVSbd39J8eEGvzFXc1NAs8KSFAZeBt4AHgNeBFDWObkEAne7HAK2gT2gCFQatdca1GbtBj4E3veFprVYVLXXcg4GqM6588BbAMlkcm1qamqzr6/v6ikBet5RgiizJoDPAXdgYGDZXHkzMzPrrk9CdRWngUeAsxxdCzVwpgZ/BigWiz1mo4mJif7jqMajeJrU5hywgGvAej6fvzA0NLThN1Eul9uT4g5VTbYFNKUIfAbsZ7PZvuHh4Wt+As7Ozu5IcY2j219TQB0NV4A7qODgO4CFhYWLg4ODOb8AHccpG4A68m6pRQ1YAQ6A28A+8BXwBcDq6upTqVTquh+AuVyuW4q/opRRaQdZD1gCbgE3ge+BT4HdfD7/ZDwe/z2bzRY6hRsfH1/e3Nx8FDX/sgbgoZfvg6jo4ixqW7oIPA+8CrwHrAJuJBLJd+JaHMf5k6qmPgGeQe1SCenXk0/U21xcIC8AzwGvAJPAEuAmEon1xcXFba9w8/Pz5oqdB14CnpY+oij35km0qwmjwqAU8ISM9hIwBeQA17KsG9PT07+1gxsZGdmgdqW+BjwLDAAPoo4ALU+W9arVwWoIpXp9kouKZpPAO8AwQCwW+2d0dLQ0OTkZSafT0UKhUJ6bm9t2HKeysrIS3tra0g7+KvABUJC0g5rrJdRcbLpImtleRzYashc1P2OSXwbebDVykX3gW+Ab1AHqhuQ3pe6AJlFMO0CoPROHDcio5I8DL1A9C8dQbmod+APYAK4DvwjQnsDdErgyVTfTEaCG1GFYGHXG7TVSo2OkdvhlAflXoHSuNdfStFqaRhEi2kfdprrj6M5LAt0I8EDaaMdflPal48CB95hMr3Bt8h4jD0kyL5E0pN6dysZzW7N2AqjbmhdIZjJvufTOpE19x3g+9s1XJ/ck5tVbfdhu+rxDfLiSO+lFToCjZwrXyH2/0Lwv95z8B1jAqXmDnj4YAAAAAElFTkSuQmCC",Wd="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAIiklEQVRYhe2YW2yUxxmGn7W96zXGNnZsr2FJHQyYBHNIU1ttAqVUVjlJUAtxQyUXhKgQktUDdSUkuEDtBVJ9UQXRC0RJRblrq/SCIARpFImWQ8VBIZQinJpQYozNyWaxiw/rfXsx3+z+6xNOe9tPGv2nOTzzffPPvDMhSXwJC1nKAXIDV/9ellLAqF1T9o5A2Ry7J5A/Fbh3mUMh8qYJ5kHCQATID6QIkBcAHAVGgKFAStq33EB53/ao5Rm064i9g0CmqcDyrNICYCZQBJTYdaa9j1jelDUwCAwAz4F+ex61DhZauXzr1CDwDHhq1wFg2Do1KWAo0NsCAyoDKoGYXcuBWdZY1PKnzAsDQB/wBOg1yKTVN8vqmoHz6nOgC7gHdFrbCasrNRFgyMCj5qVXgDlANfAaMA/4ir2rMI+MtSHgEdAN9BjsiNVZYR0sNq8+AtqB69Z2MuDBcYA+pAXW0yoDWgTUWXrd8k1l+cBcSxjIIBlPB63G8uUB/8Z57znwAkgGAX1YC4BSK7QIWA7UWwoDJJNJzp49y4ULF2hvb6e7u5tEIkFhYSGVlZXMmzePhoYGNmzYQElJCVZv2tPt7e3s2bOHvr4+9u3bx/r16+PWjg/zQ9x4BEk+5UkqklQt6ZuSdkn6jaRbMhsYGFBbW5uWLVvmp5MpU3V1tVpbW9XV1aWgbdy4MZ2npqbGvx6W9DtJ35e0RFJREDBX0gxJcUnfkPQDScck3fGlz549q7q6ummBjU2xWEzvvfdeGvCtt95Kf6uoqAiyfyBpt6SvSZrlAUOSIpLKJS2X9D1Jv5Z025d69913FQqFJmy8rKxMS5YsUUNDg5YvX67Zs2dPCrpjxw6NjIxoxYoV6XdVVVVBwI8l/UTS1yWVesBcC+18SRsk/ULS33yJtra2CRtramrSiRMn1NXVpWQyKUlKpVJ6+vSpTp48qZ07dyo/P39cua1bt6q+vn4ywL9IapX0tqQyDxiRFDPq3ZL+JCklSadOnRrXwMKFC3X69GlNx65du6aVK1eOqyMYjTGAf50IsNC8t1FSm6TPJOn+/fuKxWJZFb/zzjvjBvx0bO/evQqHwxNG4mUe9MtYMZk5bwHA4cOH6enpSc9BixYt4uTJk5SVlflXfcBN4DFuapoHLPQfz58/z9WrVwmFQsTjceLxOHfv3uUlNlZcpFeMEtzsXg2QSCQ4duxYulQoFOLQoUNBuE7gvAE+x82b/VZHyblz52hsbCSZTL4MCGWrqUECq0gQsBi3ts4B+PDDD3n48GG61OrVq1mzZo1/fGZw54HbVmGV1bMAWPbRRx9NC24CwD7cajLiAXNwIS7ELW3lAGfOnMmqZPv27cHHvwM3gH8AnwH/wnn0C+AuwLZt25g/f/5L4cLhMNu2bfOPnbh1+xkZ9UMebvmKGmQEoLOzM11JQUEBK1eu9I/JAFAPTqnk4hTNY9xS1V5TU1N7+fJlOjo6SKXS+jPLJFFUVMTixYsxmJtW/inOi2nAXDI/C0BWeMvKyojFYv6xz1LCKhnCRSEBPMCFfBaQKi0tfb2+vn5qFzp7AnwCXAM+t45mAUJGfgMwOpoWtIRCWZ/89BB8TuJ+lG5cNEatkXYgjtN+BYG2ktaxBE4U3AP+iRsud3EeHCTwk6Ss0IhvtaKiIk3Q19dHb28vhYWF4H6mYtxwiBrQIE4aPTHgIVzoO3E/TzlOV4YD3/stj9eMPj2xzg4HAYMSPQnkxePxNGB/fz+XLl1iy5Yt4HTeq+aZTtyA9h18Yb33G6aRQBqyDiUNLihmH1q54LAZ9ZHKISPRn1loaGxsJGjHjx8PPi6xtAgnNufgVHcRmf1J2DpTiJsjvYout3c5gQ49Ns89s3fpOdB70I+Hx7iBXrV27VqKi4tJJBKAm3auXLmCDfpy4G3rZSHur/aSPg83BCpx24MFuNUlbnkHcGMubEDdxpG0lBn8AcBBsgfsVysqKti6dStHjhwBYGRkhJaWFs6dO0ckEgGYj9v0xIA71rkha7jUgBYCb5hHGRoaIj8/f4Z5s8jafUpmN/diLBwAkmZKWiipSdKvJN2VpI6ODhUVFWUt7Js2bdLAwMBYLdAt6VNJlyV9IumLsRkOHjyo2tparVixQrdvp2Xmn00YrJI0R05VBRV+GjAiqcoUxA8lnfI1HD16dJz6WLVqla5fvz4tFdPZ2anm5uas8s3Nzf7zp5J+LmmNpFcl5U8GmCupWFKtpO9K+qWkG76W3bt3j4OMRqNqaWnRhQsXNDQ0lAWVTCZ169YtHThwQFVVVePKtrS0+Kw3pgsYso+Vkuol7ZD0W0ldvsHW1tZJZXxtba0aGxvV1NSkdevWaenSpYpGoxPmXb9+vXp6ejzgx5J+ZiGeLSk8GaD34ky5Hd23JP1I0h8kPQmGu7y8/L/aNEUiEe3fv1/Dw8Pp6Es6KqlZ0puSXpHbVU4KiPVglqQFkr4j6aeSfi/pvq/13r172rVrlyorK6cFFo1GtXnzZl25ciU4Ch5J+qOkH0v6tqTXzDk5EwGGlNFjOWQOd8px4vUN4E3cpn2pz/jgwQPef/99Ll68yJ07d+jt7WVwcJBIJEJJSQlz586loaGBTZs2UVdXF5w0OoDLwFWcbPsct6r04+bRLHEYCoWyAD1kBDfHleHmsxrccccS3NFHNV/eenBy6iZwCycMOnHz5wBuDh2nyyY6H0zhFmoF7vtxk+l9q3ieQfrDo8msF7cy3cN56g7ZWnKcep7IxnrQmz+wHKu2K3EKJWbPpWSUTQ4ZtRJc23sC6ZGB9ZM52JwcboIQjzUvZvNxYfeHlyVkZFcBbux6wKA6ShjoM5yM8uH0Xpuy8ekAQuZc2W8P8nEei9p9mMmPgAfJHO0O27e0lHppw9MEDJo//A4eoE91iB48SJ80lFMB/t/+V/sPGZfTmtMFR4EAAAAASUVORK5CYII=",Hd="change",Gd="cursor",Yd="ruler",$d="scale",Xd="select",Ud="clearSelect",Zd="textEdit",Qd="textChange",Jd="contextMenu",As="selectInGroup",Ts={CURSOR:Gd,CHANGE:Hd,RULER:Yd,SCALE:$d,SELECT:Xd,CLEAR_SELECT:Ud,TEXT_EDIT:Zd,TEXT_CHANGE:Qd,CONTEXT_MENU:Jd,SELECT_IN_GROUP:As,SNAP_TO_GRID:As},ce={};Object.keys(Ts).forEach(e=>{Object.defineProperty(ce,e,{value:Ts[e],writable:!1})});var ki=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},De=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ot,_i,Lo,Un,Mi,mn,gl,vl,jt,Ns,Ls;class Kd{constructor(t,n){ot.add(this),_i.set(this,void 0),Lo.set(this,void 0),Un.set(this,null),Mi.set(this,null),mn.set(this,{auto:Vd,"drag-default":Bd,"drag-active":Fd,"rotate-0":ml,rotate:Wd}),ki(this,Lo,t,"f"),ki(this,_i,n.eventHub,"f"),De(this,ot,"m",gl).call(this),De(this,ot,"m",vl).call(this)}}_i=new WeakMap,Lo=new WeakMap,Un=new WeakMap,Mi=new WeakMap,mn=new WeakMap,ot=new WeakSet,gl=function(){const t=De(this,_i,"f");De(this,ot,"m",jt).call(this,"default"),t.on(ce.CURSOR,n=>{var o;n.type==="over-element"||!n.type?De(this,ot,"m",jt).call(this,"auto"):n.type==="resize-rotate"?De(this,ot,"m",jt).call(this,"rotate"):typeof n.type=="string"&&(!((o=n.type)===null||o===void 0)&&o.startsWith("resize-"))?De(this,ot,"m",Ns).call(this,n):n.type==="drag-default"?De(this,ot,"m",jt).call(this,"drag-default"):n.type==="drag-active"?De(this,ot,"m",jt).call(this,"drag-active"):De(this,ot,"m",jt).call(this,"auto")})},vl=function(){Oo(ml).then(t=>{ki(this,Mi,t,"f")}).catch(t=>{console.error(t)})},jt=function(t){if(De(this,Un,"f")===t)return;ki(this,Un,t,"f");const n=De(this,mn,"f")[De(this,Un,"f")]||De(this,mn,"f").auto;let o=0,i=0;(t.startsWith("rotate-")&&De(this,mn,"f")[De(this,Un,"f")]||t==="rotate")&&(o=10,i=10),t==="default"?De(this,Lo,"f").style.cursor="default":De(this,Lo,"f").style.cursor=`image-set(url(${n})2x) ${o} ${i}, auto`},Ns=function(t){var n;let o=0;t.type==="resize-top"?o+=0:t.type==="resize-top-right"?o+=45:t.type==="resize-right"?o+=90:t.type==="resize-bottom-right"?o+=135:t.type==="resize-bottom"?o+=180:t.type==="resize-bottom-left"?o+=225:t.type==="resize-left"?o+=270:t.type==="resize-top-left"&&(o+=315),o+=dt(((n=t==null?void 0:t.element)===null||n===void 0?void 0:n.angle)||0),Array.isArray(t.groupQueue)&&t.groupQueue.length>0&&t.groupQueue.forEach(a=>{o+=dt(a.angle||0)}),o=dt(o);const i=De(this,ot,"m",Ls).call(this,o);De(this,ot,"m",jt).call(this,i)},Ls=function(t){const n=`rotate-${t}`;if(!De(this,mn,"f")[n]){const o=De(this,Mi,"f");if(o){const i=document.createElement("canvas"),a=o.width,s=o.height,c={x:a/2,y:s/2};i.width=a,i.height=s;const d=i.getContext("2d"),r=Dt(t);d.translate(c.x,c.y),d.rotate(r),d.translate(-c.x,-c.y),d.drawImage(o,0,0,a,s),d.translate(c.x,c.y),d.rotate(-r),d.translate(-c.x,-c.y);const h=i.toDataURL("image/png");De(this,mn,"f")[n]=h}}return n};const Ke="SELECT",Me=Symbol(`${Ke}_actionType`),Vt=Symbol(`${Ke}_resizeType`),ro=Symbol(`${Ke}_areaStart`),Fo=Symbol(`${Ke}_areaEnd`),Bt=Symbol(`${Ke}_hoverElement`),lo=Symbol(`${Ke}_hoverElementVertexes`),pt=Symbol(`${Ke}_selectedElementList`),qd=Symbol(`${Ke}_selectedElementListVertexes`),on=Symbol(`${Ke}_selectedElementController`),Ln=Symbol(`${Ke}_selectedElementPosition`),Je=Symbol(`${Ke}_groupQueue`),ia=Symbol(`${Ke}_groupQueueVertexesList`),Wo=Symbol(`${Ke}_isMoving`),Ds=Symbol(`${Ke}_enableSelectInGroup`),Ho=Symbol(`${Ke}_enableSnapToGrid`),pl=2,e3=4,yl=1,t3=10,n3=20,o3=22,i3="#1973ba",a3="#1976d21c",s3="#5b5959b5",r3="#f7276e",l3={activeColor:i3,activeAreaColor:a3,lockedColor:s3,referenceColor:r3};function Zt(e,t,n){const{borderColor:o,borderWidth:i,background:a,lineDash:s}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.fillStyle=a,e.setLineDash(s),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.lineTo(t[0].x,t[0].y),e.closePath(),e.stroke(),e.fill()}function Rs(e,t,n,o){const{borderColor:i,borderWidth:a,lineDash:s}=o;e.setLineDash([]),e.lineWidth=a,e.strokeStyle=i,e.setLineDash(s),e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(n.x,n.y),e.closePath(),e.stroke()}function c3(e,t,n){const{size:o,borderColor:i,borderWidth:a,background:s}=n,c=t,d=o/2,r=d,h=d;if(r>=0&&h>=0){if(typeof a=="number"&&a>0){const u=a/2+r,f=a/2+h;e.beginPath(),e.strokeStyle=i,e.lineWidth=a,e.circle(c.x,c.y,u,f,0,0,2*Math.PI),e.closePath(),e.stroke()}e.beginPath(),e.fillStyle=s,e.circle(c.x,c.y,r,h,0,0,2*Math.PI),e.closePath(),e.fill()}}function zt(e,t,n){const{borderColor:o,borderWidth:i,lineDash:a}=n;e.setLineDash([]),e.lineWidth=i,e.strokeStyle=o,e.setLineDash(a),e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[2].x,t[2].y),e.closePath(),e.stroke(),e.beginPath(),e.moveTo(t[1].x,t[1].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Ps(e,t,n){const{size:o,borderColor:i,borderWidth:a,lineDash:s}=n,c=t.x-o/2,d=t.x+o/2,r=t.y-o/2,h=t.y+o/2;zt(e,[{x:c,y:r},{x:d,y:r},{x:d,y:h},{x:c,y:h}],{borderColor:i,borderWidth:a,lineDash:s})}function Os(e,t,n){if(!t)return;const{style:o}=n,{activeColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Zt(e,$e(t,n),a)}function ks(e,t,n){if(!t)return;const{style:o}=n,{lockedColor:i}=o,a={borderColor:i,borderWidth:1,background:"transparent",lineDash:[]};Zt(e,$e(t,n),a);const{controller:s}=n;if(s){const{topLeft:c,topRight:d,bottomLeft:r,bottomRight:h,topMiddle:u,bottomMiddle:f,leftMiddle:m,rightMiddle:v}=s,g=Object.assign(Object.assign({},a),{borderWidth:1,background:i});zt(e,$e(u.vertexes,n),g),zt(e,$e(f.vertexes,n),g),zt(e,$e(m.vertexes,n),g),zt(e,$e(v.vertexes,n),g),zt(e,$e(c.vertexes,n),g),zt(e,$e(d.vertexes,n),g),zt(e,$e(r.vertexes,n),g),zt(e,$e(h.vertexes,n),g)}}function _s(e,t,n){if(!t)return;const{hideControllers:o,style:i,rotateControllerPattern:a,viewSizeInfo:s}=n,{devicePixelRatio:c=1}=s,{activeColor:d}=i,{elementWrapper:r,topLeft:h,topRight:u,bottomLeft:f,bottomRight:m,rotate:v}=t,g={borderColor:d,borderWidth:pl,background:"transparent",lineDash:[]},p=Object.assign(Object.assign({},g),{borderWidth:e3,background:"#FFFFFF"});if(Zt(e,$e(r,n),g),!o){Zt(e,$e(h.vertexes,n),p),Zt(e,$e(u.vertexes,n),p),Zt(e,$e(f.vertexes,n),p),Zt(e,$e(m.vertexes,n),p),c3(e,Se(v.center,n),Object.assign(Object.assign({},p),{size:v.size,borderWidth:0}));const w=Se(v.center,n);e.drawImage(a.canvas,0,0,a.canvas.width/c,a.canvas.height/c,w.x-v.size/2,w.y-v.size/2,v.size,v.size)}}function d3(e,t){const{start:n,end:o,style:i}=t,{activeColor:a,activeAreaColor:s}=i;e.setLineDash([]),e.lineWidth=yl,e.strokeStyle=a,e.fillStyle=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,n.y),e.lineTo(o.x,o.y),e.lineTo(n.x,o.y),e.closePath(),e.stroke(),e.fill()}function u3(e,t){const{areaSize:n,style:o}=t,{activeColor:i,activeAreaColor:a}=o,{x:s,y:c,w:d,h:r}=n;e.setLineDash([]),e.lineWidth=yl,e.strokeStyle=i,e.fillStyle=a,e.beginPath(),e.moveTo(s,c),e.lineTo(s+d,c),e.lineTo(s+d,c+r),e.lineTo(s,c+r),e.closePath(),e.stroke(),e.fill()}function h3(e,t,n){const{style:o}=n,{activeColor:i}=o;for(let a=0;a<t.length;a++){const s=t[a],c={borderColor:i,borderWidth:pl,background:"transparent",lineDash:[4,4]};Zt(e,$e(s,n),c)}}function js(e,t){const{xLines:n,yLines:o,style:i}=t,{referenceColor:a}=i,s={borderColor:a,borderWidth:1,lineDash:[]},c=Object.assign(Object.assign({},s),{size:6});n&&n.forEach(d=>{d.forEach((r,h)=>{Ps(e,r,c),d[h+1]&&Rs(e,d[h],d[h+1],s)})}),o&&o.forEach(d=>{d.forEach((r,h)=>{Ps(e,r,c),d[h+1]&&Rs(e,d[h],d[h+1],s)})})}function pe(e){return e*Math.PI/180}function Go(e,t){return Math.sqrt(e*e+t*t)}function re(e,t){return t>0?Math.abs(e):0-Math.abs(e)}function xa(e,t){const{ctx:n,viewScaleInfo:o,vertexes:i}=t,a=Se(i[0],{viewScaleInfo:o}),s=Se(i[1],{viewScaleInfo:o}),c=Se(i[2],{viewScaleInfo:o}),d=Se(i[3],{viewScaleInfo:o});return n.beginPath(),n.moveTo(a.x,a.y),n.lineTo(s.x,s.y),n.lineTo(c.x,c.y),n.lineTo(d.x,d.y),n.lineTo(a.x,a.y),n.closePath(),!!n.isPointInPath(e.x,e.y)}function aa(e,t){const{ctx:n,viewScaleInfo:o,viewSizeInfo:i,groupQueue:a}=t;if(!a||!((a==null?void 0:a.length)>0))return!1;const s=Va(a),c=s[s.length-1];return c?xa(e,{ctx:n,vertexes:c,viewScaleInfo:o,viewSizeInfo:i}):!1}function an(e,t){var n,o,i;const a={type:null,elements:[],elementVertexesList:[],groupQueue:[],groupQueueVertexesList:[]},{ctx:s,data:c,calculator:d,selectedElements:r,viewScaleInfo:h,viewSizeInfo:u,areaSize:f,groupQueue:m,selectedElementController:v}=t;if(v){const{left:g,right:p,top:w,bottom:S,topLeft:A,topRight:y,bottomLeft:I,bottomRight:b,rotate:E}=v,C=[g,p,w,S,A,y,I,b,E];for(let V=0;V<C.length;V++){const T=C[V];if(xa(e,{ctx:s,vertexes:T.vertexes,viewSizeInfo:u,viewScaleInfo:h})){a.type=`resize-${T.type}`,r&&(r==null?void 0:r.length)>0&&(a.groupQueue=m||[],a.elements=[r[0]]);break}}}if(m&&Array.isArray(m)&&m.length>0){const g=m[m.length-1];if(!((n=g==null?void 0:g.detail)===null||n===void 0)&&n.children&&Array.isArray((o=g==null?void 0:g.detail)===null||o===void 0?void 0:o.children))for(let p=g.detail.children.length-1;p>=0;p--){const w=g.detail.children[p],S=Ro(w,{groupQueue:m});if(S&&xa(e,{ctx:s,vertexes:S,viewScaleInfo:h,viewSizeInfo:u}))return a.type||(a.type="over-element"),a.groupQueue=m,a.elements=[w],a}return a}if(a.type!==null)return a;if(f&&Array.isArray(r)&&(r==null?void 0:r.length)>1){const{x:g,y:p,w,h:S}=f;if(e.x>=g&&e.x<=g+w&&e.y>=p&&e.y<=p+S)return a.type="list-area",a.elements=r,a}if(c){const{index:g,element:p}=d.getPointElement(e,{data:c,viewScaleInfo:h,viewSizeInfo:u});if(g>=0&&p&&((i=p==null?void 0:p.operations)===null||i===void 0?void 0:i.invisible)!==!0)return a.elements=[p],a.type="over-element",a}return a}function f3(e,t){var n,o,i,a,s,c,d,r,h;let{x:u,y:f,w:m,h:v,angle:g=0}=e;const p=ut({x:u,y:f,w:m,h:v,angle:g});g=dt(g);const w=Dt(g),S=!!(!((n=e==null?void 0:e.operations)===null||n===void 0)&&n.limitRatio),{start:A,end:y,resizeType:I,scale:b}=t;let E=Object.assign({},A),C=Object.assign({},y),V={x:E.x,y:p.y},T={x:C.x,y:p.y},P=Object.assign({},V),R=Object.assign({},T),_={x:p.x,y:E.y},Z={x:p.x,y:C.y},W=Object.assign({},_),D=Object.assign({},Z),k=(R.x-P.x)/b,j=(R.y-P.y)/b,M=Go(k,j),$=(D.x-W.x)/b,B=(D.y-W.y)/b,N=Go($,B);(g>0||g<0)&&(E=Le(p,A,0-w),C=Le(p,y,0-w),V={x:E.x,y:p.y},T={x:C.x,y:p.y},P=Le(p,V,w),R=Le(p,T,w),_={x:p.x,y:E.y},Z={x:p.x,y:C.y},W=Le(p,_,w),D=Le(p,Z,w),k=(R.x-P.x)/b,j=(R.y-P.y)/b,M=Go(k,j),M=re(M,j),$=(D.x-W.x)/b,B=(D.y-W.y)/b,N=Go($,B),N=re(N,B));let U=(y.x-A.x)/b,G=(y.y-A.y)/b;if(S===!0){if(["resize-top","resize-bottom","resize-left","resize-right"].includes(I)){const x=Math.max(Math.abs(U),Math.abs(G));U=(U>=0?1:-1)*x,G=(G>=0?1:-1)*x/e.w*e.h;const L=Math.max(Math.abs($),Math.abs(B));$=($>=0?1:-1)*L,B=(B>=0?1:-1)*L/e.w*e.h;const O=Math.max(Math.abs(k),Math.abs(j));k=(k>=0?1:-1)*O,j=(j>=0?1:-1)*O/e.w*e.h}else if(["resize-top-left","resize-top-right","resize-bottom-left","resize-bottom-right"].includes(I)){{const x=Math.abs(U);U=(U>=0?1:-1)*x;const L=x/e.w*e.h;I==="resize-top-left"||I==="resize-bottom-right"?G=U>0?L:-L:(I==="resize-top-right"||I==="resize-bottom-left")&&(G=U>0?-L:L)}M=Math.abs(M),N=M/e.w*e.h}}switch(I){case"resize-top":{if(g===0)v-G>0&&(f+=G,v-=G,((o=e.operations)===null||o===void 0?void 0:o.limitRatio)===!0&&(u+=G/e.h*e.w/2,m-=G/e.h*e.w));else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){N=0-re(N,B);const O=pe(g),F=N/2;x=x+F*Math.sin(O),L=L-F*Math.cos(O)}else if(g<180){N=re(N,$);const O=pe(g-90),F=N/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O)}else if(g<270){N=re(N,B);const O=pe(g-180),F=N/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O)}else if(g<360){N=0-re(N,$);const O=pe(g-270),F=N/2;x=x-F*Math.cos(O),L=L-F*Math.sin(O)}v+N>0&&(((i=e.operations)===null||i===void 0?void 0:i.limitRatio)===!0&&(m=m+N/e.h*e.w),v=v+N,u=x-m/2,f=L-v/2)}break}case"resize-bottom":{if(g===0)e.h+G>0&&(v+=G,((a=e.operations)===null||a===void 0?void 0:a.limitRatio)===!0&&(u-=G/e.h*e.w/2,m+=G/e.h*e.w));else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){N=re(N,B);const O=pe(g),F=N/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O)}else if(g<180){N=0-re(N,$);const O=pe(g-90),F=N/2;x=x-F*Math.cos(O),L=L-F*Math.sin(O)}else if(g<270){N=re(N,$);const O=pe(g-180),F=N/2;x=x+F*Math.sin(O),L=L-F*Math.cos(O)}else if(g<360){N=re(N,$);const O=pe(g-270),F=N/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O)}v+N>0&&(((s=e.operations)===null||s===void 0?void 0:s.limitRatio)===!0&&(m=m+N/e.h*e.w),v=v+N,u=x-m/2,f=L-v/2)}break}case"resize-left":{if(g===0)e.w-U>0&&(u+=U,m-=U,((c=e.operations)===null||c===void 0?void 0:c.limitRatio)===!0&&(v-=U/e.w*e.h,f+=U/e.w*e.h/2));else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){M=0-re(M,k);const O=pe(g),F=M/2;x=x-F*Math.cos(O),L=L-F*Math.sin(O)}else if(g<180){M=re(M,k);const O=pe(g-90),F=M/2;x=x+F*Math.sin(O),L=L-F*Math.cos(O)}else if(g<270){M=re(M,j);const O=pe(g-180),F=M/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O)}else if(g<360){M=re(M,j);const O=pe(g-270),F=M/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O)}m+M>0&&(((d=e.operations)===null||d===void 0?void 0:d.limitRatio)===!0&&(v=v+M/e.w*e.h),m=m+M,u=x-m/2,f=L-v/2)}break}case"resize-right":{if(g===0)e.w+U>0&&(m+=U,((r=e.operations)===null||r===void 0?void 0:r.limitRatio)===!0&&(f-=U*e.h/e.w/2,v+=U*e.h/e.w));else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){M=re(M,j);const O=pe(g),F=M/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O)}else if(g<180){M=re(M,G);const O=pe(g-90),F=M/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O)}else if(g<270){M=re(M,G);const O=pe(g-180),F=M/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O),M=0-M}else if(g<360){M=re(M,U);const O=pe(g-270),F=M/2;x=x+F*Math.sin(O),L=L-F*Math.cos(O)}m+M>0&&(((h=e.operations)===null||h===void 0?void 0:h.limitRatio)===!0&&(v=v+M/e.w*e.h),m=m+M,u=x-m/2,f=L-v/2)}break}case"resize-top-left":{if(g===0)m-U>0&&(u+=U,m-=U),v-G>0&&(f+=G,v-=G);else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){N=0-re(N,B),M=0-re(M,S?0-N:k);const O=N/2;x=x+O*Math.sin(w),L=L-O*Math.cos(w);const F=M/2;x=x-F*Math.cos(w),L=L-F*Math.sin(w)}else if(g<180){N=re(N,$),M=re(M,S?N:k);const O=pe(g-90),F=N/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O);const Q=M/2;x=x+Q*Math.sin(O),L=L-Q*Math.cos(O)}else if(g<270){N=re(N,B),M=re(M,S?N:j);const O=pe(g-180),F=N/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O);const Q=M/2;x=x+Q*Math.cos(O),L=L+Q*Math.sin(O)}else if(g<360){N=0-re(N,$),M=re(M,S?N:j);const O=pe(g-270),F=N/2;x=x-F*Math.cos(O),L=L-F*Math.sin(O);const Q=M/2;x=x-Q*Math.sin(O),L=L+Q*Math.cos(O)}v+N>0&&(v=v+N),m+M>0&&(m=m+M),u=x-m/2,f=L-v/2}break}case"resize-top-right":{if(g===0)m+U>0&&(m+=U),v-G>0&&(f+=G,v-=G);else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){N=0-re(N,B),M=re(M,S?N:j);const O=pe(g),F=N/2;x=x+F*Math.sin(O),L=L-F*Math.cos(O);const Q=M/2;x=x+Q*Math.cos(O),L=L+Q*Math.sin(O)}else if(g<180){N=re(N,$),M=re(M,S?N:j);const O=pe(g-90),F=N/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O);const Q=M/2;x=x-Q*Math.sin(O),L=L+Q*Math.cos(O)}else if(g<270){const O=pe(g-180);N=re(N,B),M=re(M,S?N:0-k);const F=N/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O);const Q=M/2;x=x-Q*Math.cos(O),L=L-Q*Math.sin(O)}else if(g<360){N=0-re(N,$),M=re(M,S?N:k);const O=pe(g-270),F=N/2;x=x-F*Math.cos(O),L=L-F*Math.sin(O);const Q=M/2;x=x+Q*Math.sin(O),L=L-Q*Math.cos(O)}v+N>0&&(v=v+N),m+M>0&&(m=m+M),u=x-m/2,f=L-v/2}break}case"resize-bottom-left":{if(g===0)e.h+G>0&&(v+=G),e.w-U>0&&(u+=U,m-=U);else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){N=re(N,B),M=0-re(M,S?0-N:k);const O=pe(g),F=N/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O);const Q=M/2;x=x-Q*Math.cos(O),L=L-Q*Math.sin(O)}else if(g<180){N=0-re(N,$),M=re(M,S?N:k);const O=pe(g-90),F=N/2;x=x-F*Math.cos(O),L=L-F*Math.sin(O);const Q=M/2;x=x+Q*Math.sin(O),L=L-Q*Math.cos(O)}else if(g<270){N=re(N,$),M=re(M,S?N:j);const O=pe(g-180),F=N/2;x=x+F*Math.sin(O),L=L-F*Math.cos(O);const Q=M/2;x=x+Q*Math.cos(O),L=L+Q*Math.sin(O)}else if(g<360){N=re(N,$),M=re(M,S?N:j);const O=pe(g-270),F=N/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O);const Q=M/2;x=x-Q*Math.sin(O),L=L+Q*Math.cos(O)}v+N>0&&(v=v+N),m+M>0&&(m=m+M),u=x-m/2,f=L-v/2}break}case"resize-bottom-right":{if(g===0)e.h+G>0&&(v+=G),e.w+U>0&&(m+=U);else if(g>0||g<0){let x=p.x,L=p.y;if(g<90){N=re(N,B),M=re(M,S?N:j);const O=pe(g),F=N/2;x=x-F*Math.sin(O),L=L+F*Math.cos(O);const Q=M/2;x=x+Q*Math.cos(O),L=L+Q*Math.sin(O)}else if(g<180){N=0-re(N,$),M=re(M,S?N:G);const O=pe(g-90),F=N/2;x=x-F*Math.cos(O),L=L-F*Math.sin(O);const Q=M/2;x=x-Q*Math.sin(O),L=L+Q*Math.cos(O)}else if(g<270){N=re(N,$),M=re(M,S?N:0-j);const O=pe(g-180),F=N/2;x=x+F*Math.sin(O),L=L-F*Math.cos(O);const Q=M/2;x=x-Q*Math.cos(O),L=L-Q*Math.sin(O)}else if(g<360){N=re(N,$),M=re(M,S?N:k);const O=pe(g-270),F=N/2;x=x+F*Math.cos(O),L=L+F*Math.sin(O);const Q=M/2;x=x+Q*Math.sin(O),L=L-Q*Math.cos(O)}v+N>0&&(v=v+N),m+M>0&&(m=m+M),u=x-m/2,f=L-v/2}break}}return{x:u,y:f,w:m,h:v,angle:e.angle}}function m3(e,t){const{x:n,y:o,w:i,h:a,angle:s=0}=e,{center:c,start:d,end:r,viewScaleInfo:h}=t,u=Se(c,{viewScaleInfo:h}),f=dt(s),m=F0(u,d,r),v=dt(f+B0(m));return{x:n,y:o,w:i,h:a,angle:v}}function g3(e,t){var n;const o=[],i=[],a=[],{viewScaleInfo:s,viewSizeInfo:c,start:d,end:r}=t;if(!(Array.isArray(e.elements)&&d&&r))return{indexes:o,uuids:i,elements:a};const h=Math.min(d.x,r.x),u=Math.max(d.x,r.x),f=Math.min(d.y,r.y),m=Math.max(d.y,r.y);for(let v=0;v<e.elements.length;v++){const g=e.elements[v];if(((n=g==null?void 0:g.operations)===null||n===void 0?void 0:n.locked)===!0)continue;const p=Ue(g,{viewScaleInfo:s}),w=ut(p);if(w.x>=h&&w.x<=u&&w.y>=f&&w.y<=m&&(o.push(v),i.push(g.uuid),a.push(g),p.angle&&(p.angle>0||p.angle<0))){const S=io(p);if(S.length===4){const A=[S[0].x,S[1].x,S[2].x,S[3].x],y=[S[0].y,S[1].y,S[2].y,S[3].y];p.x=Math.min(...A),p.y=Math.min(...y),p.w=Math.abs(Math.max(...A)-Math.min(...A)),p.h=Math.abs(Math.max(...y)-Math.min(...y))}}}return{indexes:o,uuids:i,elements:a}}function Yo(e,t){var n;if(!Array.isArray(e))return null;const o={x:0,y:0,w:0,h:0},{viewScaleInfo:i}=t;let a=null;for(let s=0;s<e.length;s++){const c=e[s];if(!((n=c==null?void 0:c.operations)===null||n===void 0)&&n.invisible)continue;const d=Ue(c,{viewScaleInfo:i});if(d.angle&&(d.angle>0||d.angle<0)){const r=io(d);if(r.length===4){const h=[r[0].x,r[1].x,r[2].x,r[3].x],u=[r[0].y,r[1].y,r[2].y,r[3].y];d.x=Math.min(...h),d.y=Math.min(...u),d.w=Math.abs(Math.max(...h)-Math.min(...h)),d.h=Math.abs(Math.max(...u)-Math.min(...u))}}if(a){const r=Math.min(d.x,o.x),h=Math.min(d.y,o.y),u=Math.max(d.x+d.w,o.x+o.w),f=Math.max(d.y+d.h,o.y+o.h);o.x=r,o.y=h,o.w=Math.abs(u-r),o.h=Math.abs(f-h)}else o.x=d.x,o.y=d.y,o.w=d.w,o.h=d.h;a=d}return o}function v3(e,t){var n;if((t==null?void 0:t.type)==="group"&&Array.isArray((n=t==null?void 0:t.detail)===null||n===void 0?void 0:n.children))for(let o=0;o<t.detail.children.length;o++){const i=t.detail.children[o];if(e.uuid===i.uuid)return!0}return!1}function p3(e,t,n){let o=t.x-e.x,i=t.y-e.y;const a=[];if(n.forEach(s=>{const{x:c,y:d,w:r,h,angle:u=0}=s;a.push({x:c,y:d,w:r,h,angle:0-u})}),(n==null?void 0:n.length)>0){const s=Ri(e,a),c=Ri(t,a);o=c.x-s.x,i=c.y-s.y}return{moveX:o,moveY:i}}const Vs=2;function Bs(e){return{minX:e.topLeft.x,minY:e.topLeft.y,maxX:e.bottomRight.x,maxY:e.bottomRight.y,midX:e.center.x,midY:e.center.y}}const Dn=(e,t)=>{if(e.length===0)throw null;if(e.length===1)return e[0];let n=0,o=e.length-1;for(;n<=o;){const i=Math.floor((n+o)/2);if(e[i]===t)return e[i];e[i]<t?n=i+1:o=i-1}return n>=e.length?e[o]:o<0?e[n]:Math.abs(e[o]-t)<=Math.abs(e[n]-t)?e[o]:e[n]},at=(e,t)=>Math.abs(e-t)<1e-5;function sa(e,t){var n,o;const{data:i,groupQueue:a,calculator:s,viewScaleInfo:c,viewSizeInfo:d}=t;let r=i.elements||[];(a==null?void 0:a.length)>0&&(r=((o=(n=a[a.length-1])===null||n===void 0?void 0:n.detail)===null||o===void 0?void 0:o.children)||[]);const h=[];r.forEach(D=>{if(D.uuid!==e){const k=s.calcViewRectInfoFromRange(D.uuid,{checkVisible:!0,viewScaleInfo:c,viewSizeInfo:d});k&&h.push(k)}});const u=s.calcViewRectInfoFromRange(e,{viewScaleInfo:c,viewSizeInfo:d});if(!u)return null;const f={},m={},v={},g={},p=[],w=[];let S=[],A=[];const y=Bs(u);f[y.minX]=[y.minY,y.midY,y.maxY],f[y.midX]=[y.minY,y.midY,y.maxY],f[y.maxX]=[y.minY,y.midY,y.maxY],m[y.minY]=[y.minX,y.midX,y.maxX],m[y.midY]=[y.minX,y.midX,y.maxX],m[y.maxY]=[y.minX,y.midX,y.maxX],h.forEach(D=>{const k=Bs(D);v[k.minX]||(v[k.minX]=[]),v[k.midX]||(v[k.midX]=[]),v[k.maxX]||(v[k.maxX]=[]),g[k.minY]||(g[k.minY]=[]),g[k.midY]||(g[k.midY]=[]),g[k.maxY]||(g[k.maxY]=[]),v[k.minX]=[k.minY,k.midY,k.maxY],v[k.midX]=[k.minY,k.midY,k.maxY],v[k.maxX]=[k.minY,k.midY,k.maxY],S.push(k.minX),S.push(k.midX),S.push(k.maxX),g[k.minY]=[k.minX,k.midX,k.maxX],g[k.midY]=[k.minX,k.midX,k.maxX],g[k.maxY]=[k.minX,k.midX,k.maxX],A.push(k.minY),A.push(k.midY),A.push(k.maxY)}),S=S.sort((D,k)=>D-k),A=A.sort((D,k)=>D-k);let I=null,b=null,E=null,C=null,V=null,T=null,P=null,R=null;if(S.length>0){E=Dn(S,y.minX),C=Dn(S,y.midX),V=Dn(S,y.maxX);const D=Math.abs(E-y.minX),k=Math.abs(C-y.midX),j=Math.abs(V-y.maxX),M=Math.min(D,k,j);M<=Vs/c.scale&&(at(M,D)?I=E-y.minX:at(M,k)?I=C-y.midX:at(M,j)&&(I=V-y.maxX))}if(A.length>0){T=Dn(A,y.minY),P=Dn(A,y.midY),R=Dn(A,y.maxY);const D=Math.abs(T-y.minY),k=Math.abs(P-y.midY),j=Math.abs(R-y.maxY),M=Math.min(D,k,j);M<=Vs/c.scale&&(at(M,D)?b=T-y.minY:at(M,k)?b=P-y.midY:at(M,j)&&(b=R-y.maxY))}const _=Object.assign({},y);if(I!==null&&(_.minX+=I,_.midX+=I,_.maxX+=I),b!==null&&(_.minY+=b,_.midY+=b,_.maxY+=b),Ie.x(I)&&I!==null&&E!==null&&C!==null&&V!==null){if(at(I,E-y.minX)){const D={x:E,yList:[]};D.yList.push(_.minY),D.yList.push(_.maxY),D.yList.push(...(g==null?void 0:g[E])||[]),p.push(D)}if(at(I,C-y.minX)){const D={x:C,yList:[]};D.yList.push(_.minY),D.yList.push(_.maxY),D.yList.push(...(g==null?void 0:g[C])||[]),p.push(D)}if(at(I,V-y.minX)){const D={x:V,yList:[]};D.yList.push(_.minY),D.yList.push(_.maxY),D.yList.push(...(g==null?void 0:g[V])||[]),p.push(D)}}if(Ie.y(b)&&b!==null&&T!==null&&P!==null&&R!==null){if(at(b,T-y.minY)){const D={y:T,xList:[]};D.xList.push(_.minX),D.xList.push(_.maxX),D.xList.push(...(v==null?void 0:v[T])||[]),w.push(D)}if(at(b,P-y.midY)){const D={y:P,xList:[]};D.xList.push(_.minX),D.xList.push(_.maxX),D.xList.push(...(v==null?void 0:v[T])||[]),w.push(D)}if(at(b,R-y.maxY)){const D={y:R,xList:[]};D.xList.push(_.minX),D.xList.push(_.maxX),D.xList.push(...(v==null?void 0:v[R])||[]),w.push(D)}}const Z=[];(p==null?void 0:p.length)>0&&p.forEach((D,k)=>{Z.push([]),D.yList.forEach(j=>{Z[k].push({x:D.x,y:j})})});const W=[];return(w==null?void 0:w.length)>0&&w.forEach((D,k)=>{W.push([]),D.xList.forEach(j=>{W[k].push({x:j,y:D.y})})}),{offsetX:I,offsetY:b,yLines:Z,xLines:W}}const zn="LAYOUT_SELECT",sn=Symbol(`${zn}_layoutActionType`),$o=Symbol(`${zn}_layoutControlType`),Xo=Symbol(`${zn}_layoutController`),Rn=Symbol(`${zn}_layoutIsHoverContent`),rn=Symbol(`${zn}_layoutIsHoverController`),It=Symbol(`${zn}_layoutIsSelected`),Zn=Symbol(`${zn}_layoutIsSelected`),co=10,y3={activeColor:"#b331c9"};function Uo(e,t,n){const{activeColor:o}=n;e.setLineDash([]),e.fillStyle="#FFFFFF",e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.fill(),e.strokeStyle=o,e.lineWidth=2,e.beginPath(),e.moveTo(t[0].x,t[0].y),e.lineTo(t[1].x,t[1].y),e.lineTo(t[2].x,t[2].y),e.lineTo(t[3].x,t[3].y),e.closePath(),e.stroke()}function Zo(e,t){const{start:n,end:o,style:i}=t,{activeColor:a}=i,s=2,c=a;e.setLineDash([]),e.strokeStyle=c,e.lineWidth=s,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(o.x,o.y),e.closePath(),e.stroke()}function w3(e,t){const{controller:n,style:o}=t,{topLeft:i,topRight:a,bottomLeft:s,bottomRight:c,topMiddle:d,rightMiddle:r,bottomMiddle:h,leftMiddle:u}=n;Zo(e,{start:i.center,end:a.center,centerVertexes:d.vertexes,style:o}),Zo(e,{start:a.center,end:c.center,centerVertexes:r.vertexes,style:o}),Zo(e,{start:c.center,end:s.center,centerVertexes:h.vertexes,style:o}),Zo(e,{start:s.center,end:i.center,centerVertexes:u.vertexes,style:o}),Uo(e,i.vertexes,o),Uo(e,a.vertexes,o),Uo(e,c.vertexes,o),Uo(e,s.vertexes,o)}function b3(e,t){const{layoutSize:n,style:o}=t,{activeColor:i}=o,{x:a,y:s,w:c,h:d}=n;e.setLineDash([]),e.strokeStyle=i,e.lineWidth=1,e.beginPath(),e.moveTo(a,s),e.lineTo(a+c,s),e.lineTo(a+c,s+d),e.lineTo(a,s+d),e.lineTo(a,s),e.closePath(),e.stroke()}const Fs=(e,t)=>{const{sharer:n,boardContent:o,calculator:i,viewer:a,eventHub:s}=e,{overlayContext:c}=o,d=Object.assign(Object.assign({},y3),t),{activeColor:r}=d,h={activeColor:r};let u=null,f=null,m=null;const v=()=>{u=null,n.setSharedStorage(sn,null),n.setSharedStorage($o,null),n.setSharedStorage(Xo,null),n.setSharedStorage(Rn,null),n.setSharedStorage(rn,null),n.setSharedStorage(It,null),n.setSharedStorage(Zn,null),f=null,m=null},g=()=>{const I=n.getSharedStorage(Me);return I&&I!=="area"?(v(),!0):!1},p=()=>{const I=n.getActiveStorage("data");if(I!=null&&I.layout){const{x:b,y:E,w:C,h:V}=I.layout;return{x:b,y:E,w:C,h:V}}return null},w=I=>{const b=p();if(b){const{x:E,y:C,w:V,h:T}=b,P=n.getActiveViewScaleInfo(),R=Ue({x:E-co/2,y:C-co/2,w:V+co,h:T+co},{viewScaleInfo:P});return U0(I,R)}return!1},S=()=>{const I=n.getActiveViewScaleInfo(),b=p();if(b){const E=ls(b,{viewScaleInfo:I,controllerSize:10});n.setSharedStorage(Xo,E)}else n.setSharedStorage(Xo,null)},A=I=>{const b=n.getActiveStorage("data"),E=n.getSharedStorage(Xo);let C=null;if(E&&(b!=null&&b.layout)&&(I!=null&&I.point)){let V=null;if(E){const{topLeft:T,top:P,topRight:R,right:_,bottomRight:Z,bottom:W,bottomLeft:D,left:k}=E,j=[T,P,R,_,Z,W,D,k];for(let M=0;M<j.length;M++){const $=j[M];if(Gr(I.point,$.vertexes)){V=`${$.type}`;break}}V&&(n.setSharedStorage($o,V),s.trigger(ce.CLEAR_SELECT),C=V)}}return C?n.setSharedStorage(rn,!0):n.setSharedStorage(rn,!1),C},y=I=>{n.getSharedStorage(Zn)!==!0&&s.trigger(ce.CURSOR,{type:I&&`resize-${I}`,groupQueue:[],element:p()})};return{name:"@middleware/layout-selector",use:()=>{v(),S()},hover:I=>{if(n.getSharedStorage(Zn)!==!0&&!g()){if(w(I.point)?n.setSharedStorage(Rn,!0):(n.setSharedStorage(Rn,!1),f===!0&&(a.drawFrame(),f=!1)),n.getSharedStorage(It)===!0){const b=n.getSharedStorage(sn),E=n.getActiveStorage("data");if(E!=null&&E.layout)if(b!=="resize"){S();const C=A(I);C?y(C):(y(),n.setSharedStorage(sn,null))}else{const C=A(I);y(C)}return n.getSharedStorage(rn)===!0?!1:void 0}if(n.getSharedStorage(Rn)&&!f&&a.drawFrame(),f=n.getSharedStorage(Rn),n.getSharedStorage(rn)===!0)return!1}},pointStart:I=>{if(g())return;w(I.point)?n.setSharedStorage(It,!0):(m===!0&&(v(),a.drawFrame()),n.setSharedStorage(It,!1)),S();const b=A(I);if(u=I.point,b&&n.setSharedStorage(sn,"resize"),n.getSharedStorage(It)===!0&&!m&&a.drawFrame(),m=n.getSharedStorage(It),n.getSharedStorage(rn)===!0)return!1},pointMove:I=>{if(!n.getSharedStorage(It)&&g())return;const b=n.getSharedStorage(sn),E=n.getSharedStorage($o),C=n.getActiveStorage("data");if(b==="resize"&&E&&(C!=null&&C.layout)){if(u){n.setSharedStorage(Zn,!0);const V=n.getActiveStorage("scale"),T=I.point.x-u.x,P=I.point.y-u.y,R=T/V,_=P/V,{x:Z,y:W,w:D,h:k,operations:j={}}=C.layout,{position:M="absolute"}=j;E==="top"?M==="relative"?(C.layout.h=i.toGridNum(k-_),a.scroll({moveY:P})):(C.layout.y=i.toGridNum(W+_),C.layout.h=i.toGridNum(k-_)):E==="right"?C.layout.w=i.toGridNum(D+R):E==="bottom"?C.layout.h=i.toGridNum(k+_):E==="left"?M==="relative"?(C.layout.w=i.toGridNum(D-R),a.scroll({moveX:T})):(C.layout.x=i.toGridNum(Z+R),C.layout.w=i.toGridNum(D-R)):E==="top-left"?M==="relative"?(C.layout.w=i.toGridNum(D-R),C.layout.h=i.toGridNum(k-_),a.scroll({moveX:T,moveY:P})):(C.layout.x=i.toGridNum(Z+R),C.layout.y=i.toGridNum(W+_),C.layout.w=i.toGridNum(D-R),C.layout.h=i.toGridNum(k-_)):E==="top-right"?M==="relative"?(a.scroll({moveY:P}),C.layout.w=i.toGridNum(D+R),C.layout.h=i.toGridNum(k-_)):(C.layout.y=i.toGridNum(W+_),C.layout.w=i.toGridNum(D+R),C.layout.h=i.toGridNum(k-_)):E==="bottom-right"?(C.layout.w=i.toGridNum(D+R),C.layout.h=i.toGridNum(k+_)):E==="bottom-left"&&(M==="relative"?(a.scroll({moveX:T}),C.layout.w=i.toGridNum(D-R),C.layout.h=i.toGridNum(k+_)):(C.layout.x=i.toGridNum(Z+R),C.layout.w=i.toGridNum(D-R),C.layout.h=i.toGridNum(k+_)))}return u=I.point,S(),a.drawFrame(),!1}if(["resize"].includes(b))return!1},pointEnd:()=>{n.setSharedStorage(Zn,!1);const I=n.getSharedStorage(sn),b=n.getSharedStorage($o),E=n.getActiveStorage("data");if(E&&I==="resize"&&b&&s.trigger(ce.CHANGE,{type:"changeLayout",data:E}),n.getSharedStorage(rn)===!0)return!1},beforeDrawFrame:({snapshot:I})=>{var b;if(g())return;const{sharedStore:E,activeStore:C}=I,V=E[sn],T=E[Rn],P=E[It];if(!((b=C.data)===null||b===void 0)&&b.layout){const{x:R,y:_,w:Z,h:W}=C.data.layout,D=ko(I),k={x:R,y:_,w:Z,h:W},j=ls(k,{viewScaleInfo:D,controllerSize:co});if(T===!0){const M=Ue(k,{viewScaleInfo:D});b3(c,{layoutSize:M,style:h})}(V&&["resize"].includes(V)||P===!0)&&w3(c,{controller:j,style:h})}},scrollX:()=>{v()},scrollY:()=>{v()},wheelScale:()=>{v()}}},E3=e=>({uuid:yt(),type:"path",x:0,y:0,w:200,h:200,detail:Object.assign({commands:[{type:"M",params:[512,0]},{type:"c",params:[282.8,0,512,229.2,512,512]},{type:"s",params:[-229.2,512,-512,512]},{type:"S",params:[0,794.8,0,512,229.2,0,512,0]},{type:"z",params:[]},{type:"m",params:[309.8,253.8]},{type:"c",params:[0,-10.5,-6.5,-19.8,-15.7,-23.8,-9.7,-4,-21,-2,-28.2,5.6]},{type:"l",params:[-52.5,52]},{type:"c",params:[-56.9,-53.7,-133.9,-85.5,-213.4,-85.5,-170.7,0,-309.8,139.2,-309.8,309.8,0,170.6,139.2,309.8,309.8,309.8,92.4,0,179.5,-40.8,238.4,-111.8,4,-5.2,4,-12.9,-.8,-17.3]},{type:"L",params:[694.3,637]},{type:"c",params:[-2.8,-2.4,-6.5,-3.6,-10.1,-3.6,-3.6,.4,-7.3,2,-9.3,4.8,-39.5,51.2,-98.8,80.3,-163,80.3,-113.8,0,-206.5,-92.8,-206.5,-206.5,0,-113.8,92.8,-206.5,206.5,-206.5,52.8,0,102.9,20.2,140.8,55.3]},{type:"L",params:[597,416.5]},{type:"c",params:[-7.7,7.3,-9.7,18.6,-5.6,27.9,4,9.7,13.3,16.1,23.8,16.1]},{type:"H",params:[796]},{type:"c",params:[14.1,0,25.8,-11.7,25.8,-25.8]},{type:"V",params:[253.8]},{type:"z",params:[]}],fill:"#2c2c2c",stroke:"transparent",strokeWidth:0,originX:0,originY:0,originW:1024,originH:1024,opacity:1},e)});function S3(e){const{fill:t,devicePixelRatio:n}=e,o=E3({fill:t}),{w:i,h:a}=o,s=Ao({width:i,height:a,devicePixelRatio:n});return Fa(s,o,{loader:void 0,viewScaleInfo:{scale:1,offsetTop:0,offsetBottom:0,offsetLeft:0,offsetRight:0},viewSizeInfo:{width:i,height:a,devicePixelRatio:n,contextWidth:i,contextHeight:a},parentElementSize:{x:0,y:0,w:i,h:a},parentOpacity:1}),s}const Wa="monospace";function C3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textColor:r,textBackground:h}=s;_o(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Wa});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x-f/2-u,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x-f/2,y:n.y};e.setLineDash([]),e.fillStyle=h,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=r,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function x3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:r,textColor:h}=s;_o(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Wa});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=r,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}function M3(e,t){const{point:n,rotateCenter:o,angle:i,text:a,style:s,fontSize:c,lineHeight:d}=t,{textBackground:r,textColor:h}=s;_o(e,i,o,()=>{e.$setFont({fontWeight:"300",fontSize:c,fontFamily:Wa});const u=(d-c)/2,f=e.$undoPixelRatio(e.measureText(a).width),m={x:n.x,y:n.y},v={x:m.x+f+u*2,y:m.y+c+u},g={x:n.x+u,y:n.y};e.setLineDash([]),e.fillStyle=r,e.beginPath(),e.moveTo(m.x,m.y),e.lineTo(v.x,m.y),e.lineTo(v.x,v.y),e.lineTo(m.x,v.y),e.closePath(),e.fill(),e.fillStyle=h,e.textBaseline="top",e.fillText(a,g.x,g.y+u)})}const z3="#1973bac6",I3="#ffffff",ji="@middleware/internal-event/show-info-angle",A3={textBackground:z3,textColor:I3},ln=10,ra=16,Ws=(e,t)=>{const{boardContent:n,calculator:o,eventHub:i}=e,{overlayContext:a}=n,s=Object.assign(Object.assign({},A3),t),{textBackground:c,textColor:d}=s,r={textBackground:c,textColor:d};let h=!0;const u=({show:f})=>{h=f};return{name:"@middleware/info",use(){i.on(ji,u)},disuse(){i.off(ji,u)},beforeDrawFrame({snapshot:f}){const{sharedStore:m}=f,v=m[pt],g=m[Me],p=m[Je]||[];if(v.length===1){const w=v[0];if(w&&["select","drag","resize"].includes(g)){const S=ko(f),A=Hi(f),{x:y,y:I,w:b,h:E,angle:C}=w,V=[...p,{uuid:yt(),x:y,y:I,w:b,h:E,angle:C,type:"group",detail:{children:[]}}],T={viewScaleInfo:S,viewSizeInfo:A},P=o.calcViewRectInfoFromOrigin(w.uuid,T);let R=0;V.forEach(Z=>{R+=Z.angle||0});const _=Dt(dt(0-R));if(P){const Z=P==null?void 0:P.center,W={topLeft:Le(Z,P.topLeft,_),topRight:Le(Z,P.topRight,_),bottomRight:Le(Z,P.bottomRight,_),bottomLeft:Le(Z,P.bottomLeft,_),center:Le(Z,P.center,_),top:Le(Z,P.top,_),right:Le(Z,P.right,_),bottom:Le(Z,P.bottom,_),left:Le(Z,P.left,_)},D=be(w.x,{decimalPlaces:2}),k=be(w.y,{decimalPlaces:2}),j=be(w.w,{decimalPlaces:2}),M=be(w.h,{decimalPlaces:2}),$=`${be(D,{decimalPlaces:0})},${be(k,{decimalPlaces:0})}`,B=`${be(j,{decimalPlaces:0})}x${be(M,{decimalPlaces:0})}`,N=`${be(w.angle||0,{decimalPlaces:0})}°`;C3(a,{point:{x:W.bottom.x,y:W.bottom.y+ln},rotateCenter:W.center,angle:R,text:B,fontSize:ln,lineHeight:ra,style:r}),x3(a,{point:{x:W.topLeft.x,y:W.topLeft.y-ln*2},rotateCenter:W.center,angle:R,text:$,fontSize:ln,lineHeight:ra,style:r}),h&&M3(a,{point:{x:W.top.x+ln+4,y:W.top.y-ln*2-18},rotateCenter:W.center,angle:R,text:N,fontSize:ln,lineHeight:ra,style:r})}}}}}},Hs=(e,t)=>{const n=Object.assign(Object.assign({},l3),t),{activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s}=n,c={activeColor:o,activeAreaColor:i,lockedColor:a,referenceColor:s},{viewer:d,sharer:r,boardContent:h,calculator:u,eventHub:f}=e,{overlayContext:m}=h;let v=null,g=null,p=null,w=null,S=null;const A=S3({fill:c.activeColor,devicePixelRatio:r.getActiveViewSizeInfo().devicePixelRatio});r.setSharedStorage(Me,null),r.setSharedStorage(Ho,!0);const y=()=>r.getSharedStorage(pt),I=W=>{let D=r.getSharedStorage(Je);Array.isArray(D)||(D=[]),D.length>0?v3(W,D[D.length-1])?D.push(W):D=[]:D.length===0&&D.push(W);const k=Va(D);return r.setSharedStorage(Je,D),r.setSharedStorage(ia,k),D.length>0},b=W=>{r.setSharedStorage(Bt,W);let D=null;W&&(D=Ro(W,{groupQueue:r.getSharedStorage(Je)})),r.setSharedStorage(lo,D)},E=()=>{const W=r.getSharedStorage(pt);if(W.length===1){const D=q0(W[0],{groupQueue:r.getSharedStorage(Je),controllerSize:t3,viewScaleInfo:r.getActiveViewScaleInfo(),rotateControllerPosition:o3,rotateControllerSize:n3});r.setSharedStorage(on,D)}},C=(W,D)=>{var k;if(r.setSharedStorage(pt,W),W.length===1?(E(),r.setSharedStorage(Ln,bt(W[0].uuid,((k=r.getActiveStorage("data"))===null||k===void 0?void 0:k.elements)||[]))):(r.setSharedStorage(on,null),r.setSharedStorage(Ln,[])),(D==null?void 0:D.triggerEvent)===!0){const j=W.map(B=>B.uuid),M=r.getActiveStorage("data"),$=H0(j,(M==null?void 0:M.elements)||[]);f.trigger(ce.SELECT,{uuids:j,positions:W.map(B=>[...$[B.uuid]])})}},V=()=>({ctx:m,calculator:u,data:r.getActiveStorage("data"),selectedElements:y(),viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo(),groupQueue:r.getSharedStorage(Je),areaSize:null,selectedElementController:r.getSharedStorage(on),selectedElementPosition:r.getSharedStorage(Ln)}),T=()=>{r.setSharedStorage(Me,null),r.setSharedStorage(Vt,null),r.setSharedStorage(ro,null),r.setSharedStorage(Fo,null),r.setSharedStorage(Je,[]),r.setSharedStorage(ia,[]),r.setSharedStorage(Bt,null),r.setSharedStorage(lo,null),r.setSharedStorage(pt,[]),r.setSharedStorage(qd,null),r.setSharedStorage(on,null),r.setSharedStorage(Ln,[]),r.setSharedStorage(Wo,null)};T();const P=({uuids:W=[],positions:D})=>{let k=[];const j=r.getSharedStorage(Me),M=r.getActiveStorage("data");D&&Array.isArray(D)?k=Wr(D,(M==null?void 0:M.elements)||[]):k=di(W,(M==null?void 0:M.elements)||[]);let $=!1;if(!j&&k.length===1?(r.setSharedStorage(Me,"select"),$=!0):j==="select"&&k.length===1&&($=!0),$){const B=k[0],N=ja(B.uuid,(M==null?void 0:M.elements)||[]);r.setSharedStorage(Je,N),C(k),d.drawFrame()}},R=()=>{T(),d.drawFrame()},_=W=>{r.setSharedStorage(Ho,!!W.enable)},Z=W=>{r.setSharedStorage(Ds,!!W.enable)};return{name:"@middleware/selector",use(){f.on(ce.SELECT,P),f.on(ce.CLEAR_SELECT,R),f.on(ce.SELECT_IN_GROUP,Z),f.on(ce.SNAP_TO_GRID,_)},disuse(){f.off(ce.SELECT,P),f.off(ce.CLEAR_SELECT,R),f.off(ce.SELECT_IN_GROUP,Z),f.off(ce.SNAP_TO_GRID,_)},hover:W=>{var D,k,j,M,$;const B=r.getSharedStorage(It);if(r.getSharedStorage(Zn)===!0)return;const U=r.getSharedStorage(Vt),G=r.getSharedStorage(Me),x=r.getSharedStorage(Je),L=ne=>{if(B===!0)return;const le=ne.type;w===null&&f.trigger(ce.CURSOR,{type:le,groupQueue:ne.groupQueue,element:ne.elements[0]})};if((x==null?void 0:x.length)>0){if(!aa(W.point,{ctx:m,viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo(),groupQueue:r.getSharedStorage(Je)})){b(null),d.drawFrame();return}const le=an(W.point,V());if(L(le),U||["area","drag","drag-list"].includes(G)){b(null),d.drawFrame();return}if(((D=le==null?void 0:le.elements)===null||D===void 0?void 0:D.length)===1){b(le.elements[0]),d.drawFrame();return}b(null),d.drawFrame();return}if(U||["area","drag","drag-list"].includes(G)){b(null);return}if(G==="drag"){b(null);return}const O=y(),F=r.getActiveViewScaleInfo(),Q=r.getActiveViewSizeInfo(),oe=an(W.point,Object.assign(Object.assign({},V()),{areaSize:Yo(O,{viewScaleInfo:F,viewSizeInfo:Q,calculator:u})}));if(L(oe),oe.type===null){(r.getSharedStorage(Bt)||r.getSharedStorage(lo))&&(r.setSharedStorage(Bt,null),r.setSharedStorage(lo,null),d.drawFrame());return}if(!(oe.type==="over-element"&&r.getSharedStorage(Me)==="select"&&oe.elements.length===1&&oe.elements[0].uuid===((j=(k=y())===null||k===void 0?void 0:k[0])===null||j===void 0?void 0:j.uuid))&&!(oe.type==="over-element"&&r.getSharedStorage(Me)===null&&oe.elements.length===1&&oe.elements[0].uuid===((M=r.getSharedStorage(Bt))===null||M===void 0?void 0:M.uuid))){if(oe.type==="over-element"&&(($=oe==null?void 0:oe.elements)===null||$===void 0?void 0:$.length)===1){b(oe.elements[0]),d.drawFrame();return}if(r.getSharedStorage(Bt)){b(null),d.drawFrame();return}}},pointStart:W=>{var D,k,j,M,$,B,N,U,G,x,L,O;v=W.point,g=W.point;const F=r.getSharedStorage(Je);if((F==null?void 0:F.length)>0){if(aa(W.point,{ctx:m,viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo(),groupQueue:F})){const le=an(W.point,V()),ve=((D=le==null?void 0:le.elements)===null||D===void 0?void 0:D.length)===1&&((j=(k=le.elements[0])===null||k===void 0?void 0:k.operations)===null||j===void 0?void 0:j.locked)===!0;b(null),((M=le==null?void 0:le.elements)===null||M===void 0?void 0:M.length)===1&&(p=wn(le==null?void 0:le.elements[0])),ve===!0?T():le.type==="over-element"&&(($=le==null?void 0:le.elements)===null||$===void 0?void 0:$.length)===1?(C([le.elements[0]],{triggerEvent:!0}),r.setSharedStorage(Me,"drag")):!((B=le.type)===null||B===void 0)&&B.startsWith("resize-")?(r.setSharedStorage(Vt,le.type),r.setSharedStorage(Me,"resize")):C([],{triggerEvent:!0})}else T();d.drawFrame();return}const Q=Yo(y(),{viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo(),calculator:u}),oe=an(W.point,Object.assign(Object.assign({},V()),{areaSize:Q,groupQueue:[]})),ne=((N=oe==null?void 0:oe.elements)===null||N===void 0?void 0:N.length)===1&&((G=(U=oe.elements[0])===null||U===void 0?void 0:U.operations)===null||G===void 0?void 0:G.locked)===!0;b(null),((x=oe==null?void 0:oe.elements)===null||x===void 0?void 0:x.length)===1&&(p=wn(oe==null?void 0:oe.elements[0])),ne===!0?(T(),r.setSharedStorage(Me,"area"),r.setSharedStorage(ro,W.point),C([],{triggerEvent:!0})):oe.type==="list-area"?r.setSharedStorage(Me,"drag-list"):oe.type==="over-element"&&((L=oe==null?void 0:oe.elements)===null||L===void 0?void 0:L.length)===1?(C([oe.elements[0]],{triggerEvent:!0}),r.setSharedStorage(Me,"drag")):!((O=oe.type)===null||O===void 0)&&O.startsWith("resize-")?(r.setSharedStorage(Vt,oe.type),r.setSharedStorage(Me,"resize")):(T(),r.setSharedStorage(Me,"area"),r.setSharedStorage(ro,W.point),C([],{triggerEvent:!0})),d.drawFrame()},pointMove:W=>{var D,k,j;r.setSharedStorage(Wo,!0);const M=r.getActiveStorage("data"),$=y(),B=r.getActiveStorage("scale")||1,N=r.getActiveViewScaleInfo(),U=r.getActiveViewSizeInfo(),G=v,x=g,L=W.point,O=r.getSharedStorage(Vt),F=r.getSharedStorage(Me),Q=r.getSharedStorage(Je),oe=r.getSharedStorage(Ho);if(F==="drag"){if(S=!0,w="drag",f.trigger(ji,{show:!1}),M&&($==null?void 0:$.length)===1&&p&&x&&L&&((k=(D=$[0])===null||D===void 0?void 0:D.operations)===null||k===void 0?void 0:k.locked)!==!0){const{moveX:ne,moveY:le}=p3(x,L,Q);let ve=u.toGridNum(ne/B),Y=u.toGridNum(le/B);if(oe===!0){const J=sa($[0].uuid,{calculator:u,data:M,groupQueue:Q,viewScaleInfo:N,viewSizeInfo:U});try{J&&(Ie.x(J.offsetX)&&J.offsetX!==null&&(ve=u.toGridNum(ve+J.offsetX)),Ie.y(J.offsetY)&&J.offsetY!==null&&(Y=u.toGridNum(Y+J.offsetY)))}catch(ae){console.error(ae)}}$[0].x=u.toGridNum(p.x+ve),$[0].y=u.toGridNum(p.y+Y),C([$[0]]),u.modifyViewVisibleInfoMap(M,{modifyOptions:{type:"updateElement",content:{element:$[0],position:r.getSharedStorage(Ln)||[]}},viewSizeInfo:U,viewScaleInfo:N})}d.drawFrame()}else if(F==="drag-list"){if(S=!0,w="drag-list",M&&x&&G&&L&&($==null?void 0:$.length)>1){const ne=(L.x-G.x)/B,le=(L.y-G.y)/B;$.forEach(ve=>{var Y;ve&&((Y=ve==null?void 0:ve.operations)===null||Y===void 0?void 0:Y.locked)!==!0&&(ve.x=u.toGridNum(ve.x+ne),ve.y=u.toGridNum(ve.y+le),u.modifyViewVisibleInfoMap(M,{modifyOptions:{type:"updateElement",content:{element:ve,position:bt(ve.uuid,M.elements)||[]}},viewSizeInfo:U,viewScaleInfo:N}))}),r.setActiveStorage("data",M)}d.drawFrame()}else if(F==="resize"){if(M&&($==null?void 0:$.length)===1&&x&&p&&(O!=null&&O.startsWith("resize-"))){S=!0,w="resize";const ne=[];Q.forEach(Y=>{const{x:J,y:ae,w:de,h:Ot,angle:tn=0}=Y;ne.push({x:J,y:ae,w:de,h:Ot,angle:0-tn})});let le=x,ve=L;if(Q.length>0&&(le=Ri(x,ne),ve=Ri(L,ne)),O==="resize-rotate"){const Y=r.getSharedStorage(on),J=[Y.topLeft.center,Y.topRight.center,Y.bottomLeft.center,Y.bottomRight.center],ae=kr(J),de=m3(p,{center:ae,viewScaleInfo:N,viewSizeInfo:U,start:x,end:L,resizeType:O,sharer:r});$[0].angle=u.toGridNum(de.angle||0)}else{const Y=f3(p,{scale:B,start:le,end:ve,resizeType:O,sharer:r}),J={ignore:!!p.angle};$[0].x=u.toGridNum(Y.x,J),$[0].y=u.toGridNum(Y.y,J),$[0].type==="group"&&((j=$[0].operations)===null||j===void 0?void 0:j.deepResize)===!0?Qr($[0],{w:u.toGridNum(Y.w,J),h:u.toGridNum(Y.h,J)}):($[0].w=u.toGridNum(Y.w,J),$[0].h=u.toGridNum(Y.h,J))}C([$[0]]),u.modifyViewVisibleInfoMap(M,{modifyOptions:{type:"updateElement",content:{element:$[0],position:r.getSharedStorage(Ln)||[]}},viewSizeInfo:U,viewScaleInfo:N}),d.drawFrame()}}else F==="area"&&(w="area",r.setSharedStorage(Fo,W.point),d.drawFrame());v=W.point},pointEnd(W){w=null,r.setSharedStorage(Wo,!1);const D=r.getActiveStorage("data"),k=r.getSharedStorage(pt),j=r.getSharedStorage(Bt),M=r.getSharedStorage(Vt),$=r.getSharedStorage(Me),B=r.getActiveViewSizeInfo();let N=!1;if(v=null,g=null,p=null,$==="drag"&&f.trigger(ji,{show:!0}),$==="resize"&&M)r.setSharedStorage(Vt,null),N=!0;else if($==="area"){if(r.setSharedStorage(Me,null),D){const G=r.getSharedStorage(ro),x=r.getSharedStorage(Fo);if(G&&x){const{elements:L}=g3(D,{start:G,end:x,calculator:u,viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo()});L.length>0&&(r.setSharedStorage(Me,"drag-list"),C(L,{triggerEvent:!0}),N=!0)}}}else $==="drag-list"?(r.setSharedStorage(Me,"drag-list-end"),N=!0):D&&(u.getPointElement(W.point,{data:D,viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo()}).element?(r.setSharedStorage(Me,"select"),N=!0):r.setSharedStorage(Me,null));r.getSharedStorage(Me)===null&&(T(),N=!0),(()=>{if(N){if(D&&Array.isArray(D==null?void 0:D.elements)&&["drag","drag-list"].includes($)){const G=W0(D.elements,B,{extend:!0});r.setActiveStorage("contextHeight",G.contextSize.contextHeight),r.setActiveStorage("contextWidth",G.contextSize.contextWidth)}D&&["drag","drag-list","drag-list-end","resize"].includes($)&&S&&(f.trigger(ce.CHANGE,{data:D,type:"dragElement",selectedElements:k,hoverElement:j}),S=!1),d.drawFrame()}})()},pointLeave(){w=null,r.setSharedStorage(Vt,null),f.trigger(ce.CURSOR,{type:"default"})},doubleClick(W){var D,k,j,M,$,B,N,U;if(r.getSharedStorage(Ds)===!1)return;const G=an(W.point,V());if(r.setSharedStorage(on,null),r.setSharedStorage(pt,[]),!(G.elements.length===1&&((k=(D=G.elements[0])===null||D===void 0?void 0:D.operations)===null||k===void 0?void 0:k.locked)===!0)){if(G.elements.length===1&&((j=G.elements[0])===null||j===void 0?void 0:j.type)==="group"){if(I(G.elements[0])===!0){r.setSharedStorage(Me,null),d.drawFrame();return}}else G.elements.length===1&&((M=G.elements[0])===null||M===void 0?void 0:M.type)==="text"&&!(!((B=($=G.elements[0])===null||$===void 0?void 0:$.operations)===null||B===void 0)&&B.invisible)&&f.trigger(ce.TEXT_EDIT,{element:G.elements[0],groupQueue:r.getSharedStorage(Je)||[],position:bt((N=G.elements[0])===null||N===void 0?void 0:N.uuid,((U=r.getActiveStorage("data"))===null||U===void 0?void 0:U.elements)||[]),viewScaleInfo:r.getActiveViewScaleInfo()});r.setSharedStorage(Me,null)}},wheel(){E()},wheelScale(){E()},contextMenu:W=>{var D,k,j,M,$,B,N,U;const G=r.getSharedStorage(Je);if((G==null?void 0:G.length)>0){if(aa(W.point,{ctx:m,viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo(),groupQueue:G})){const O=an(W.point,V());((D=O==null?void 0:O.elements)===null||D===void 0?void 0:D.length)===1&&((j=(k=O.elements[0])===null||k===void 0?void 0:k.operations)===null||j===void 0?void 0:j.locked)!==!0?(T(),C([O.elements[0]],{triggerEvent:!0}),d.drawFrame()):!((M=O==null?void 0:O.elements)===null||M===void 0)&&M.length||T()}return}const x=Yo(y(),{viewScaleInfo:r.getActiveViewScaleInfo(),viewSizeInfo:r.getActiveViewSizeInfo(),calculator:u}),L=an(W.point,Object.assign(Object.assign({},V()),{areaSize:x,groupQueue:[]}));if((($=L==null?void 0:L.elements)===null||$===void 0?void 0:$.length)===1&&((N=(B=L.elements[0])===null||B===void 0?void 0:B.operations)===null||N===void 0?void 0:N.locked)!==!0){T(),C([L.elements[0]],{triggerEvent:!0}),d.drawFrame();return}else!((U=L==null?void 0:L.elements)===null||U===void 0)&&U.length||T()},beforeDrawFrame({snapshot:W}){var D;const{activeStore:k,sharedStore:j}=W,{scale:M,offsetLeft:$,offsetTop:B,offsetRight:N,offsetBottom:U,width:G,height:x,contextHeight:L,contextWidth:O,devicePixelRatio:F}=k,Q=e.sharer,oe={scale:M,offsetLeft:$,offsetTop:B,offsetRight:N,offsetBottom:U},ne={width:G,height:x,contextHeight:L,contextWidth:O,devicePixelRatio:F},ve=j[pt][0],Y=j[Bt],J=j[lo],ae=j[Me],de=j[ro],Ot=j[Fo],tn=j[Je],Bl=j[ia],Ua=j[Wo],Za=j[Ho],nn={calculator:u,viewScaleInfo:oe,viewSizeInfo:ne,style:c},Vo=j[on],Qa=!!(!((D=Y==null?void 0:Y.operations)===null||D===void 0)&&D.locked);if((tn==null?void 0:tn.length)>0){if(h3(m,Bl,nn),Y&&ae!=="drag"&&(Qa?ks(m,J,Object.assign(Object.assign({},nn),{controller:Vo,style:c})):Os(m,J,nn)),ve&&["select","drag","resize"].includes(ae)&&(_s(m,Vo,Object.assign(Object.assign({},nn),{element:ve,calculator:u,hideControllers:!!Ua&&ae==="drag",rotateControllerPattern:A,style:c})),ae==="drag"&&Za===!0)){const kt=sa(ve.uuid,{calculator:u,data:k.data,groupQueue:tn,viewScaleInfo:oe,viewSizeInfo:ne});if(kt){const{offsetX:Xi,offsetY:Ui,xLines:Zi,yLines:Qi}=kt;(Xi===0||Ui===0)&&js(m,{xLines:Zi,yLines:Qi,style:c})}}}else if(Y&&ae!=="drag"&&(Qa?ks(m,J,Object.assign(Object.assign({},nn),{controller:Vo,style:c})):Os(m,J,nn)),ve&&["select","drag","resize"].includes(ae)){if(_s(m,Vo,Object.assign(Object.assign({},nn),{element:ve,calculator:u,hideControllers:!!Ua&&ae==="drag",rotateControllerPattern:A,style:c})),ae==="drag"&&Za===!0){const kt=sa(ve.uuid,{calculator:u,data:k.data,groupQueue:tn,viewScaleInfo:oe,viewSizeInfo:ne});if(kt){const{offsetX:Xi,offsetY:Ui,xLines:Zi,yLines:Qi}=kt;(Xi===0||Ui===0)&&js(m,{xLines:Zi,yLines:Qi,style:c})}}}else if(ae==="area"&&de&&Ot)d3(m,{start:de,end:Ot,style:c});else if(["drag-list","drag-list-end"].includes(ae)){const kt=Yo(y(),{viewScaleInfo:Q.getActiveViewScaleInfo(),viewSizeInfo:Q.getActiveViewSizeInfo(),calculator:u});kt&&u3(m,{areaSize:kt,style:c})}}}},In="SCROLL",zi=Symbol(`${In}_xThumbRect`),Ii=Symbol(`${In}_yThumbRect`),So=Symbol(`${In}_hoverXThumbRect`),Co=Symbol(`${In}_hoverYThumbRect`),Qn=Symbol(`${In}_prevPoint`),Ma=Symbol(`${In}_activePoint`),xo=Symbol(`${In}_activeThumbType`),T3={thumbBackground:"#0000003A",thumbBorderColor:"#0000008A",hoverThumbBackground:"#0000005F",hoverThumbBorderColor:"#000000EE",activeThumbBackground:"#0000005E",activeThumbBorderColor:"#000000F0"},wl=16,N3=wl*2.5;function Gs(e,t,n){const o=e,{x:i,y:a,w:s,h:c}=n;return o.beginPath(),o.rect(i,a,s,c),o.closePath(),!!o.isPointInPath(t.x,t.y)}function L3(e,t,n){let o=null;const{xThumbRect:i,yThumbRect:a}=n;return i&&Gs(e,t,i)?o="X":a&&Gs(e,t,a)&&(o="Y"),o}function D3(e){const{sharedStore:t}=e;return{activePoint:t[Ma]||null,prevPoint:t[Qn]||null,activeThumbType:t[xo]||null,xThumbRect:t[zi]||null,yThumbRect:t[Ii]||null,hoverXThumb:t[So],hoverYThumb:t[Co]}}function R3(e){const{viewScaleInfo:t,viewSizeInfo:n,hoverXThumb:o,hoverYThumb:i,style:a}=e,{width:s,height:c}=n,{offsetTop:d,offsetBottom:r,offsetLeft:h,offsetRight:u}=t,f=N3,m=wl,{thumbBackground:v,thumbBorderColor:g,hoverThumbBackground:p,hoverThumbBorderColor:w}=a;let S=0,A=0;S=Math.max(f,s-m*2-(Math.abs(h)+Math.abs(u))),S>=s&&(S=s),A=Math.max(f,c-m*2-(Math.abs(d)+Math.abs(r))),A>=c&&(A=c);const y=m,I=s-S-m;let b=y;h>0?b=y:u>0?b=I:h<=0&&S>0&&!(h===0&&u===0)&&(b=y+(s-S)*Math.abs(h)/(Math.abs(h)+Math.abs(u)),b=Math.min(Math.max(0,b-y),s-S));const E=m,C=c-A-m;let V=E;d>0?V=E:r>0?V=C:d<=0&&A>0&&!(d===0&&r===0)&&(V=E+(c-A)*Math.abs(d)/(Math.abs(d)+Math.abs(r)),V=Math.min(Math.max(0,V-E),c-A));const T={x:b,y:c-m,w:S,h:m},P={x:s-m,y:V,w:m,h:A};return{lineSize:m,xSize:S,ySize:A,translateY:V,translateX:b,xThumbBackground:o?p:v,yThumbBackground:i?p:v,xThumbBorderColor:o?w:g,yThumbBorderColor:i?w:g,xThumbRect:T,yThumbRect:P}}function Ys(e,t){let{x:n,y:o,h:i,w:a,background:s,borderColor:c}=t;e.save(),e.shadowColor="#FFFFFF",e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=1;{const{axis:d}=t;d==="X"?(o=o+i/4+0,i=i/2):d==="Y"&&(n=n+a/4+0,a=a/2);let r=t.r;r=Math.min(r,a/2,i/2),(a<r*2||i<r*2)&&(r=0),e.globalAlpha=1,e.beginPath(),e.moveTo(n+r,o),e.arcTo(n+a,o,n+a,o+i,r),e.arcTo(n+a,o+i,n,o+i,r),e.arcTo(n,o+i,n,o,r),e.arcTo(n,o,n+a,o,r),e.closePath(),e.fillStyle=s,e.fill(),e.beginPath(),e.lineWidth=1,e.strokeStyle=c,e.setLineDash([]),e.moveTo(n+r,o),e.arcTo(n+a,o,n+a,o+i,r),e.arcTo(n+a,o+i,n,o+i,r),e.arcTo(n,o+i,n,o,r),e.arcTo(n,o,n+a,o,r),e.closePath(),e.stroke()}e.restore()}function P3(e,t){const n=e,{viewScaleInfo:o,viewSizeInfo:i,scrollInfo:a,style:s}=t,{activeThumbType:c,prevPoint:d,activePoint:r,hoverXThumb:h,hoverYThumb:u}=a,f=R3({viewScaleInfo:o,viewSizeInfo:i,hoverXThumb:h,hoverYThumb:u,style:s});let m=Object.assign({},f.xThumbRect),v=Object.assign({},f.yThumbRect);return c&&d&&r&&(c==="X"&&a.xThumbRect?(m=Object.assign({},a.xThumbRect),m.x=m.x+(r.x-d.x)):c==="Y"&&a.yThumbRect&&(v=Object.assign({},a.yThumbRect),v.y=v.y+(r.y-d.y))),Ys(n,Object.assign(Object.assign({axis:"X"},m),{r:f.lineSize/2,background:f.xThumbBackground,borderColor:f.xThumbBorderColor})),Ys(n,Object.assign(Object.assign({axis:"Y"},v),{r:f.lineSize/2,background:f.yThumbBackground,borderColor:f.yThumbBorderColor})),{xThumbRect:m,yThumbRect:v}}function O3(e,t){const{snapshot:n,style:o}=t,i=Hi(n),a=ko(n),s=D3(n),{xThumbRect:c,yThumbRect:d}=P3(e,{viewSizeInfo:i,viewScaleInfo:a,scrollInfo:s,style:o});return{xThumbRect:c,yThumbRect:d}}const $s=(e,t)=>{const{viewer:n,boardContent:o,sharer:i,eventHub:a}=e,{overlayContext:s}=o;i.setSharedStorage(zi,null),i.setSharedStorage(Ii,null);let c=!1;const d=Object.assign(Object.assign({},T3),t),{thumbBackground:r,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:f,activeThumbBackground:m,activeThumbBorderColor:v}=d,g={thumbBackground:r,thumbBorderColor:h,hoverThumbBackground:u,hoverThumbBorderColor:f,activeThumbBackground:m,activeThumbBorderColor:v},p=()=>{i.setSharedStorage(Qn,null),i.setSharedStorage(Ma,null),i.setSharedStorage(xo,null),i.setSharedStorage(So,null),i.setSharedStorage(Co,null),c=!1};p();const w=y=>{const I=i.getSharedStorage(Qn);if(I){const{offsetLeft:b,offsetRight:E}=i.getActiveViewScaleInfo(),{width:C}=i.getActiveViewSizeInfo(),V=-(y.x-I.x),T=C+Math.abs(b)+Math.abs(E),P=V*T/C;n.scroll({moveX:P}),n.drawFrame()}},S=y=>{const I=i.getSharedStorage(Qn);if(I){const{offsetTop:b,offsetBottom:E}=i.getActiveViewScaleInfo(),{height:C}=i.getActiveViewSizeInfo(),V=-(y.y-I.y),T=C+Math.abs(b)+Math.abs(E),P=V*T/C;n.scroll({moveY:P}),n.drawFrame()}},A=y=>L3(s,y,{xThumbRect:i.getSharedStorage(zi),yThumbRect:i.getSharedStorage(Ii)});return{name:"@middleware/scroller",wheel:y=>{n.scroll({moveX:0-y.deltaX,moveY:0-y.deltaY}),n.drawFrame()},hover:y=>{if(c===!0)return!1;const{point:I}=y,b=A(I);if(b==="X"||b==="Y")return b==="X"?(i.setSharedStorage(So,!0),i.setSharedStorage(Co,!1)):(i.setSharedStorage(So,!1),i.setSharedStorage(Co,!0)),a.trigger(ce.CURSOR,{type:"default"}),!1;i.setSharedStorage(So,!1),i.setSharedStorage(Co,!1)},pointStart:y=>{const{point:I}=y,b=A(I);if(b==="X"||b==="Y")return c=!0,i.setSharedStorage(xo,b),i.setSharedStorage(Qn,I),!1},pointMove:y=>{const{point:I}=y,b=i.getSharedStorage(xo);if(b==="X"||b==="Y")return i.setSharedStorage(Ma,I),b==="X"?w(I):b==="Y"&&S(I),i.setSharedStorage(Qn,I),!1},pointEnd:()=>{c=!1;const y=i.getSharedStorage(xo);if(p(),y==="X"||y==="Y")return n.scroll({moveX:0,moveY:0}),n.drawFrame(),!1},beforeDrawFrame({snapshot:y}){const{xThumbRect:I,yThumbRect:b}=O3(s,{snapshot:y,style:g});i.setSharedStorage(zi,I),i.setSharedStorage(Ii,b)}}},Xs=e=>{const{viewer:t,sharer:n,eventHub:o}=e,i=50,a=.05;return{name:"@middleware/scaler",wheelScale(s){const{deltaY:c,point:d}=s,{scale:r}=n.getActiveViewScaleInfo();let h=r;if(c<0?h=r*1.1:c>0&&(h=r*.9),h<a||h>i)return;const{moveX:u,moveY:f}=t.scale({scale:h,point:d});t.scroll({moveX:u,moveY:f}),t.drawFrame();const m=be(r);o.trigger(ce.SCALE,{scale:m})}}},Ve=16,za=10,bl=100,Yi=1,El="monospace",k3="#FFFFFFA8",_3="#00000080",j3="#000000",V3="#00000080",B3="#AAAAAA20",F3="#AAAAAA40",W3="#196097",H3={background:k3,borderColor:_3,scaleColor:j3,textColor:V3,gridColor:B3,gridPrimaryColor:F3,selectedAreaColor:W3},Pn=[1,2,5,10,20,50,100,200,500];function G3(e){e=Math.max(Pn[0],Math.min(e,Pn[Pn.length-1]));for(let t=0;t<Pn.length-1;t++){const n=Pn[t],o=Pn[t+1];if(e>o)continue;if(e===n||e===o)return e;const i=(n+o)/2;return e<=i?n:o}return e}function Sl(e){const{scale:t,viewLength:n,viewOffset:o}=e,i=[];let a=10;a=be(a/t,{decimalPlaces:0}),a=G3(a);const s=a*10,c=a*5;let d=0;const r=a*t,h=0-o,u=0,f=h%r,m=(h-f+r)/t,v=u+(r-f);for(;v+d*r<n;){const g=be(m+d*a,{decimalPlaces:0}),p=be(v+d*r,{decimalPlaces:0}),w={num:g,position:p,showNum:g%s===0,isKeyNum:g%s===0,isSubKeyNum:g%c===0};i.push(w),d++}return{list:i,rulerUnit:a}}function Y3(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetLeft:i}=t,{width:a}=n;return Sl({axis:"X",scale:o,viewLength:a,viewOffset:i})}function $3(e){const{viewScaleInfo:t,viewSizeInfo:n}=e,{scale:o,offsetTop:i}=t,{height:a}=n;return Sl({axis:"Y",scale:o,viewLength:a,viewOffset:i})}function X3(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=Ve,c=Ve*4/5,d=Ve*2/5,r=Ve*1/5,h=Ve/5;for(let u=0;u<n.length;u++){const f=n[u];f.position<Ve||(e.beginPath(),e.moveTo(f.position,s),e.lineTo(f.position,f.isKeyNum?r:f.isSubKeyNum?d:c),e.closePath(),e.lineWidth=Yi,e.setLineDash([]),e.fillStyle=i,e.stroke(),f.isKeyNum&&(e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:bl,fontSize:za,fontFamily:El}),e.fillText(`${f.num}`,f.position+h,h)))}}function U3(e,t){const{scaleList:n,style:o}=t,{scaleColor:i,textColor:a}=o,s=Ve,c=Ve*4/5,d=Ve*2/5,r=Ve*1/5,h=Ve/5;for(let u=0;u<n.length;u++){const f=n[u];if(!(f.position<Ve)&&(e.beginPath(),e.moveTo(s,f.position),e.lineTo(f.isKeyNum?r:f.isSubKeyNum?d:c,f.position),e.closePath(),e.fillStyle=i,e.lineWidth=Yi,e.setLineDash([]),e.stroke(),f.showNum===!0)){const m=h,v=f.position+h,g=`${f.num}`;_o(e,-90,{x:m,y:v},()=>{e.fillStyle=a,e.textBaseline="top",e.$setFont({fontWeight:bl,fontSize:za,fontFamily:El}),e.fillText(g,h+za,f.position+h)})}}}function Z3(e,t){const{viewSizeInfo:n,style:o}=t,{width:i,height:a}=n,{background:s,borderColor:c}=o;e.beginPath(),e.moveTo(0,0),e.lineTo(i+1,0),e.lineTo(i+1,Ve),e.lineTo(Ve,Ve),e.lineTo(Ve,a+1),e.lineTo(0,a+1),e.lineTo(0,0),e.closePath(),e.fillStyle=s,e.fill(),e.lineWidth=Yi,e.setLineDash([]),e.strokeStyle=c,e.stroke()}function Q3(e,t){const{xList:n,yList:o,viewSizeInfo:i,style:a}=t,{width:s,height:c}=i,{gridColor:d,gridPrimaryColor:r}=a;for(let h=0;h<n.length;h++){const u=n[h];e.beginPath(),e.moveTo(u.position,0),e.lineTo(u.position,c),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=r:e.strokeStyle=d,e.closePath(),e.lineWidth=Yi,e.setLineDash([]),e.stroke()}for(let h=0;h<o.length;h++){const u=o[h];e.beginPath(),e.moveTo(0,u.position),e.lineTo(s,u.position),u.isKeyNum===!0||u.isSubKeyNum===!0?e.strokeStyle=r:e.strokeStyle=d,e.lineWidth=1,e.closePath(),e.stroke()}}function J3(e,t){const{snapshot:n,calculator:o,style:i}=t,{sharedStore:a}=n,{selectedAreaColor:s}=i,c=a[pt],d=a[Me];if(["select","drag","drag-list","drag-list-end"].includes(d)&&c.length>0){const r=ko(n),h=Hi(n),u=[],f=[],m=[],v=[],g=[];if(c.forEach(y=>{const I=o.calcViewRectInfoFromRange(y.uuid,{viewScaleInfo:r,viewSizeInfo:h});I&&(u.push(I),f.push(I.left.x),m.push(I.right.x),v.push(I.top.y),g.push(I.bottom.y))}),!(u.length>0))return;const p=Math.min(...f),w=Math.max(...m),S=Math.min(...v),A=Math.max(...g);e.globalAlpha=1,e.beginPath(),e.moveTo(p,0),e.lineTo(w,0),e.lineTo(w,Ve),e.lineTo(p,Ve),e.fillStyle=s,e.closePath(),e.fill(),e.beginPath(),e.moveTo(0,S),e.lineTo(Ve,S),e.lineTo(Ve,A),e.lineTo(0,A),e.fillStyle=s,e.closePath(),e.fill()}}const Us=(e,t)=>{const{boardContent:n,viewer:o,eventHub:i,calculator:a}=e,{overlayContext:s,underlayContext:c}=n,d=Object.assign(Object.assign({},H3),t),{background:r,borderColor:h,scaleColor:u,textColor:f,gridColor:m,gridPrimaryColor:v,selectedAreaColor:g}=d,p={background:r,borderColor:h,scaleColor:u,textColor:f,gridColor:m,gridPrimaryColor:v,selectedAreaColor:g};let w=!0,S=!0;const A=y=>{typeof(y==null?void 0:y.show)=="boolean"&&(w=y.show),typeof(y==null?void 0:y.showGrid)=="boolean"&&(S=y.showGrid),(typeof(y==null?void 0:y.show)=="boolean"||typeof(y==null?void 0:y.showGrid)=="boolean")&&o.drawFrame()};return{name:"@middleware/ruler",use(){i.on(ce.RULER,A)},disuse(){i.off(ce.RULER,A)},beforeDrawFrame:({snapshot:y})=>{if(w===!0){const I=ko(y),b=Hi(y);J3(s,{snapshot:y,calculator:a,style:p}),Z3(s,{viewScaleInfo:I,viewSizeInfo:b,style:p});const{list:E,rulerUnit:C}=Y3({viewScaleInfo:I,viewSizeInfo:b});X3(s,{scaleList:E,style:p});const{list:V}=$3({viewScaleInfo:I,viewSizeInfo:b});U3(s,{scaleList:V,style:p}),S===!0&&Q3(C===1?s:c,{xList:E,yList:V,viewScaleInfo:I,viewSizeInfo:b,style:p})}}}},K3=xn(),Zs=e=>{const{eventHub:t,boardContent:n,viewer:o,sharer:i}=e,a=n.boardContext.canvas,s=document.createElement("div");s.setAttribute("contenteditable","true");const c=document.createElement("div"),d=e.container||document.body,r=document.createElement("div");let h=null,u=[];const f=`idraw-middleware-text-editor-${Math.random().toString(26).substring(2)}`;r.setAttribute("id",f),c.appendChild(s),c.style.position="absolute",r.appendChild(c),r.style.position="fixed",r.style.top="0",r.style.bottom="0",r.style.left="0",r.style.right="0",r.style.display="none",d.appendChild(r);const m=y=>{S(),w(y),r.style.display="block",h!=null&&h.uuid&&(i.setActiveOverrideElemenentMap({[h.uuid]:{operations:{invisible:!0}}}),o.drawFrame())},v=()=>{if(h!=null&&h.uuid){const y=i.getActiveOverrideElemenentMap();y&&delete y[h.uuid],i.setActiveOverrideElemenentMap(y),o.drawFrame()}r.style.display="none",h=null,u=[]},g=()=>{const y=a.getBoundingClientRect(),{left:I,top:b,width:E,height:C}=y;return{left:I,top:b,width:E,height:C}},p=y=>{const{size:I,parent:b}=y,E=document.createElement("div"),{x:C,y:V,w:T,h:P}=I,R=dt(I.angle||0);return E.style.position="absolute",E.style.left=`${C}px`,E.style.top=`${V}px`,E.style.width=`${T}px`,E.style.height=`${P}px`,E.style.transform=`rotate(${R}deg)`,b.appendChild(E),E},w=y=>{const{viewScaleInfo:I,element:b,groupQueue:E}=y,{scale:C,offsetTop:V,offsetLeft:T}=I;c.children&&Array.from(c.children).forEach(M=>{M.remove()});let P=c;for(let M=0;M<E.length;M++){const $=E[M],{x:B,y:N,w:U,h:G}=$,x=dt($.angle||0),L={x:B*C,y:N*C,w:U*C,h:G*C,angle:x};M===0&&(L.x+=T,L.y+=V),P=p({size:L,parent:P})}const R=Object.assign(Object.assign({},K3),b.detail);let _=b.x*C+T,Z=b.y*C+V,W=b.w*C,D=b.h*C;E.length>0&&(_=b.x*C,Z=b.y*C,W=b.w*C,D=b.h*C);let k="center",j="center";R.textAlign==="left"?k="start":R.textAlign==="right"&&(k="end"),R.verticalAlign==="top"?j="start":R.verticalAlign==="bottom"&&(j="end"),s.style.display="inline-flex",s.style.justifyContent=k,s.style.alignItems=j,s.style.position="absolute",s.style.left=`${_-1}px`,s.style.top=`${Z-1}px`,s.style.width=`${W+2}px`,s.style.height=`${D+2}px`,s.style.transform=`rotate(${dt(b.angle||0)}deg)`,s.style.boxSizing="border-box",s.style.border="1px solid #1973ba",s.style.resize="none",s.style.overflow="hidden",s.style.wordBreak="break-all",s.style.borderRadius=`${(typeof R.borderRadius=="number"?R.borderRadius:0)*C}px`,s.style.background=`${R.background||"transparent"}`,s.style.color=`${R.color||"#333333"}`,s.style.fontSize=`${R.fontSize*C}px`,s.style.lineHeight=`${(R.lineHeight||R.fontSize)*C}px`,s.style.fontFamily=qr(R.fontFamily),s.style.fontWeight=`${R.fontWeight}`,s.style.padding="0",s.style.margin="0",s.style.outline="none",s.innerText=R.text||"",P.appendChild(s)},S=()=>{const{left:y,top:I,width:b,height:E}=g();c.style.position="absolute",c.style.overflow="hidden",c.style.top=`${I}px`,c.style.left=`${y}px`,c.style.width=`${b}px`,c.style.height=`${E}px`};r.addEventListener("click",()=>{v()}),s.addEventListener("click",y=>{y.stopPropagation()}),s.addEventListener("input",()=>{h&&u&&(h.detail.text=s.innerText||"",t.trigger(ce.TEXT_CHANGE,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u||[]]}),o.drawFrame())}),s.addEventListener("blur",()=>{h&&u&&t.trigger(ce.TEXT_CHANGE,{element:{uuid:h.uuid,detail:{text:h.detail.text}},position:[...u]}),v()}),s.addEventListener("keydown",y=>{y.stopPropagation()}),s.addEventListener("keypress",y=>{y.stopPropagation()}),s.addEventListener("keyup",y=>{y.stopPropagation()}),s.addEventListener("wheel",y=>{y.stopPropagation(),y.preventDefault()});const A=y=>{var I;y!=null&&y.position&&(y!=null&&y.element)&&((I=y==null?void 0:y.element)===null||I===void 0?void 0:I.type)==="text"&&(h=y.element,u=y.position),m(y)};return{name:"@middleware/text-editor",use(){t.on(ce.TEXT_EDIT,A)},disuse(){t.off(ce.TEXT_EDIT,A)}}},q3="DRAG",Qo=Symbol(`${q3}_prevPoint`),Qs=e=>{const{eventHub:t,sharer:n,viewer:o}=e;let i=!1;return{name:"@middleware/dragger",hover(){i!==!0&&t.trigger(ce.CURSOR,{type:"drag-default"})},pointStart(a){const{point:s}=a;n.setSharedStorage(Qo,s),i=!0,t.trigger(ce.CURSOR,{type:"drag-active"})},pointMove(a){const{point:s}=a,c=n.getSharedStorage(Qo);if(s&&c){const d=s.x-c.x,r=s.y-c.y;o.scroll({moveX:d,moveY:r}),o.drawFrame()}n.setSharedStorage(Qo,s)},pointEnd(){i=!1,n.setSharedStorage(Qo,null),t.trigger(ce.CURSOR,{type:"drag-default"})}}},e6=e=>{const{boardContent:t,eventHub:n,sharer:o}=e,i=t.boardContext.canvas,a=e.container||document.body,s=`idraw-middleware-pointer-${Math.random().toString(26).substring(2)}`,c=()=>{const r=i.getBoundingClientRect(),{left:h,top:u,width:f,height:m}=r;return{left:h,top:u,width:f,height:m}},d=document.createElement("div");return d.setAttribute("id",s),d.style.position="fixed",d.style.top="0",d.style.bottom="unset",d.style.left="0",d.style.right="unset",a.appendChild(d),{name:"@middleware/pointer",use(){},disuse(){},pointStart(r){},pointEnd(){},contextMenu(r){const{point:h}=r,{left:u,top:f}=c();d.style.left=`${u+h.x}px`,d.style.top=`${f+h.y}px`;const m=o.getSharedStorage(pt);n.trigger(ce.CONTEXT_MENU,{pointerContainer:d,selectedElements:m||[]})}}};var la=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Re=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},Ia,Pe,Ai,Vi,Cl;class t6{constructor(t,n){Ia.add(this),Pe.set(this,void 0),Ai.set(this,void 0),Vi.set(this,void 0);const{devicePixelRatio:o=1,width:i,height:a,createCustomContext2D:s}=n;la(this,Vi,t,"f");const c=document.createElement("canvas");c.setAttribute("tabindex","0"),la(this,Ai,c,"f"),Re(this,Ia,"m",Cl).call(this),t.appendChild(c);const d=_0(c,{width:i,height:a,devicePixelRatio:o,offscreen:!0,createCustomContext2D:s}),r=new jd({boardContent:d,container:t}),h=r.getSharer();h.setActiveViewSizeInfo({width:i,height:a,devicePixelRatio:o,contextWidth:i,contextHeight:a}),la(this,Pe,r,"f"),this.resize(h.getActiveViewSizeInfo());const u=r.getEventHub();new Kd(t,{eventHub:u})}isDestroyed(){return Re(this,Pe,"f").isDestroyed()}destroy(){Re(this,Pe,"f").destroy(),Re(this,Ai,"f").remove()}use(t,n){Re(this,Pe,"f").use(t,n)}disuse(t){Re(this,Pe,"f").disuse(t)}setData(t,n){jr((t==null?void 0:t.elements)||[]),Re(this,Pe,"f").setData(t,n)}getData(){return Re(this,Pe,"f").getData()}scale(t){Re(this,Pe,"f").scale(t),Re(this,Pe,"f").getViewer().drawFrame()}resize(t){const n=Re(this,Pe,"f"),i=n.getSharer().getActiveViewSizeInfo();n.resize(Object.assign(Object.assign({},i),t))}clear(){Re(this,Pe,"f").clear()}on(t,n){Re(this,Pe,"f").getEventHub().on(t,n)}off(t,n){Re(this,Pe,"f").getEventHub().off(t,n)}trigger(t,n){Re(this,Pe,"f").getEventHub().trigger(t,n)}getViewInfo(){const n=Re(this,Pe,"f").getSharer(),o=n.getActiveViewSizeInfo(),i=n.getActiveViewScaleInfo();return{viewSizeInfo:o,viewScaleInfo:i}}refresh(){Re(this,Pe,"f").getViewer().drawFrame()}setViewScale(t){Re(this,Pe,"f").updateViewScaleInfo(t)}getLoadItemMap(){return Re(this,Pe,"f").getRenderer().getLoadItemMap()}onBoardWatcherEvents(){Re(this,Pe,"f").onWatcherEvents()}offBoardWatcherEvents(){Re(this,Pe,"f").offWatcherEvents()}}Pe=new WeakMap,Ai=new WeakMap,Vi=new WeakMap,Ia=new WeakSet,Cl=function(){const t=Re(this,Vi,"f");t.style.position="relative"};const Bi="select",n6={mode:Bi};function o6(){return{mode:Bi,enableRuler:!1,enableScale:!1,enableScroll:!1,enableSelect:!1,enableTextEdit:!1,enableDrag:!1,enableInfo:!1,middlewareStyles:{selector:{},info:{},ruler:{},scroller:{},layoutSelector:{}}}}function i6(e){const t={selector:{},ruler:{},info:{},scroller:{},layoutSelector:{}};if(e.styles){const{selector:n,info:o,ruler:i,scroller:a,layoutSelector:s}=e.styles;Ae.string(n==null?void 0:n.activeColor)&&(t.selector.activeColor=n==null?void 0:n.activeColor),Ae.string(n==null?void 0:n.activeAreaColor)&&(t.selector.activeAreaColor=n==null?void 0:n.activeAreaColor),Ae.string(n==null?void 0:n.lockedColor)&&(t.selector.lockedColor=n==null?void 0:n.lockedColor),Ae.string(n==null?void 0:n.referenceColor)&&(t.selector.referenceColor=n==null?void 0:n.referenceColor),Ae.string(o==null?void 0:o.textBackground)&&(t.info.textBackground=o==null?void 0:o.textBackground),Ae.string(o==null?void 0:o.textColor)&&(t.info.textColor=o==null?void 0:o.textColor),Ae.string(i==null?void 0:i.background)&&(t.ruler.background=i==null?void 0:i.background),Ae.string(i==null?void 0:i.borderColor)&&(t.ruler.borderColor=i==null?void 0:i.borderColor),Ae.string(i==null?void 0:i.scaleColor)&&(t.ruler.scaleColor=i==null?void 0:i.scaleColor),Ae.string(i==null?void 0:i.textColor)&&(t.ruler.textColor=i==null?void 0:i.textColor),Ae.string(i==null?void 0:i.gridColor)&&(t.ruler.gridColor=i==null?void 0:i.gridColor),Ae.string(i==null?void 0:i.gridPrimaryColor)&&(t.ruler.gridPrimaryColor=i==null?void 0:i.gridPrimaryColor),Ae.string(i==null?void 0:i.selectedAreaColor)&&(t.ruler.selectedAreaColor=i==null?void 0:i.selectedAreaColor),Ae.string(a==null?void 0:a.thumbBackground)&&(t.scroller.thumbBackground=a==null?void 0:a.thumbBackground),Ae.string(a==null?void 0:a.thumbBorderColor)&&(t.scroller.thumbBorderColor=a==null?void 0:a.thumbBorderColor),Ae.string(a==null?void 0:a.hoverThumbBackground)&&(t.scroller.hoverThumbBackground=a==null?void 0:a.hoverThumbBackground),Ae.string(a==null?void 0:a.hoverThumbBorderColor)&&(t.scroller.hoverThumbBorderColor=a==null?void 0:a.hoverThumbBorderColor),Ae.string(a==null?void 0:a.activeThumbBackground)&&(t.scroller.activeThumbBackground=a==null?void 0:a.activeThumbBackground),Ae.string(a==null?void 0:a.activeThumbBorderColor)&&(t.scroller.activeThumbBorderColor=a==null?void 0:a.activeThumbBorderColor),Ae.string(s==null?void 0:s.activeColor)&&(t.layoutSelector.activeColor=s==null?void 0:s.activeColor)}return t}var a6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};function s6(e){return a6(this,void 0,void 0,function*(){const{data:t,width:n,height:o,devicePixelRatio:i,viewScaleInfo:a,viewSizeInfo:s,loadItemMap:c}=e;let d=Ao({width:n,height:o,devicePixelRatio:i}),r=new sl({viewContext:d}),h=new al({viewContext:d,calculator:r});h.setLoadItemMap(c),h.drawData(t,{viewScaleInfo:a,viewSizeInfo:s,forceDrawAll:!0});let u=null,f=d.$getOffscreenCanvas();if(f){const m=yield f.convertToBlob();u=window.URL.createObjectURL(m)}return f=null,d=null,r=null,h=null,{blobURL:u,width:n,height:o,devicePixelRatio:i}})}function r6(e){return["select","drag","readOnly"].includes(e)}function xl(e,t){const{enableRuler:n,enableScale:o,enableScroll:i,enableSelect:a,enableTextEdit:s,enableDrag:c,enableInfo:d}=t.getSnapshot(),r=t.get("middlewareStyles");i===!0?e.use($s,r==null?void 0:r.scroller):i===!1&&e.disuse($s),a===!0?(e.use(Fs,r==null?void 0:r.layoutSelector),e.use(Hs,r==null?void 0:r.selector)):a===!1&&(e.disuse(Fs),e.disuse(Hs)),o===!0?e.use(Xs):o===!1&&e.disuse(Xs),n===!0?e.use(Us,r==null?void 0:r.ruler):n===!1&&e.disuse(Us),s===!0?e.use(Zs):s===!1&&e.disuse(Zs),c===!0?e.use(Qs):c===!1&&e.disuse(Qs),d===!0?e.use(Ws,r==null?void 0:r.info):d===!1&&e.disuse(Ws),e.use(e6)}function Aa(e,t,n){let o=!1,i=!1,a=!1,s=!1,c=!1,d=!1,r=!1,h="select";n.set("mode",h),r6(e)?h=e:console.warn(`${e} is invalid mode of iDraw.js`),h==="select"?(o=!0,i=!0,a=!0,r=!0,s=!0,c=!1,d=!0):h==="drag"?(o=!0,i=!0,a=!1,s=!1,c=!0,d=!0):h==="readOnly"&&(o=!1,i=!1,a=!1,s=!1,c=!1,d=!1),n.set("enableScale",o),n.set("enableScroll",i),n.set("enableSelect",a),n.set("enableTextEdit",s),n.set("enableDrag",c),n.set("enableRuler",d),n.set("enableInfo",r),xl(t,n)}var l6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})},ue=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},ca=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Mo,ye,zo,Qt,Ml,Ta;class Ha{constructor(t,n){Mo.add(this),ye.set(this,void 0),zo.set(this,void 0),Qt.set(this,new yn({defaultStorage:o6()}));const o=Object.assign(Object.assign({},n6),n);ue(this,Qt,"f").set("middlewareStyles",i6(o));const{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c}=o,d=new t6(t,{width:i,height:a,devicePixelRatio:s,createCustomContext2D:c});ca(this,ye,d,"f"),ca(this,zo,o,"f"),ue(this,Mo,"m",Ml).call(this)}reset(t){const n=ue(this,ye,"f"),o=ue(this,Qt,"f");o.clear(),Aa(t.mode||Bi,n,o),n.refresh(),ca(this,zo,Object.assign(Object.assign({},ue(this,zo,"f")),t),"f")}setMode(t){const n=ue(this,ye,"f"),o=ue(this,Qt,"f");Aa(t||Bi,n,o),n.refresh()}enable(t){ue(this,Mo,"m",Ta).call(this,t,!0)}disable(t){ue(this,Mo,"m",Ta).call(this,t,!1)}setData(t){const n=ue(this,ye,"f");n.setData(t),n.trigger(ce.CHANGE,{data:t,type:"setData"})}getData(t){const n=ue(this,ye,"f").getData();return n&&(t==null?void 0:t.compact)===!0?c0(n,{loadItemMap:ue(this,ye,"f").getLoadItemMap()}):n}getViewInfo(){return ue(this,ye,"f").getViewInfo()}scale(t){ue(this,ye,"f").scale(t)}setViewScale(t){const n=ue(this,ye,"f");n.setViewScale(t),n.refresh()}centerContent(t){const n=(t==null?void 0:t.data)||ue(this,ye,"f").getData(),{viewSizeInfo:o}=this.getViewInfo();if(n!=null&&n.layout||Array.isArray(n==null?void 0:n.elements)&&(n==null?void 0:n.elements.length)>0){const i=fd(n,{viewSizeInfo:o});this.setViewScale(i)}}resize(t){ue(this,ye,"f").resize(t)}on(t,n){ue(this,ye,"f").on(t,n)}off(t,n){ue(this,ye,"f").off(t,n)}trigger(t,n){ue(this,ye,"f").trigger(t,n)}selectElement(t){this.selectElements([t])}selectElements(t){this.trigger(ce.SELECT,{uuids:t})}selectElementByPosition(t){this.selectElementsByPositions([t])}selectElementsByPositions(t){this.trigger(ce.SELECT,{positions:t})}cancelElements(){this.trigger(ce.CLEAR_SELECT,{uuids:[]})}createElement(t,n){const{viewScaleInfo:o,viewSizeInfo:i}=ue(this,ye,"f").getViewInfo();return dd(t,(n==null?void 0:n.element)||{},(n==null?void 0:n.viewCenter)===!0?{viewScaleInfo:o,viewSizeInfo:i}:void 0)}updateElement(t){const n=ue(this,ye,"f"),o=n.getData()||{elements:[]};Kt(t.uuid,t,o.elements),n.setData(o),n.refresh(),n.trigger(ce.CHANGE,{data:o,type:"updateElement"})}addElement(t,n){var o;const i=ue(this,ye,"f"),a=i.getData()||{elements:[]};if(!n||!(!((o=n==null?void 0:n.position)===null||o===void 0)&&o.length))a.elements.push(t);else if(n!=null&&n.position){const s=[...n==null?void 0:n.position];Jr(t,s,a.elements)}return i.setData(a),i.refresh(),i.trigger(ce.CHANGE,{data:a,type:"addElement"}),a}deleteElement(t){const n=ue(this,ye,"f"),o=n.getData()||{elements:[]};ud(t,o.elements),n.setData(o),n.refresh(),n.trigger(ce.CHANGE,{data:o,type:"deleteElement"})}moveElement(t,n){const o=ue(this,ye,"f"),i=o.getData()||{elements:[]},a=bt(t,i.elements),{elements:s}=Pi(i.elements,{from:a,to:n});i.elements=s,o.setData(i),o.refresh(),o.trigger(ce.CHANGE,{data:i,type:"moveElement"})}getImageBlobURL(t){return l6(this,void 0,void 0,function*(){const n=this.getData()||{elements:[]},{devicePixelRatio:o}=t||{devicePixelRatio:1},i=_a(n.elements),{viewSizeInfo:a}=this.getViewInfo();return yield s6({width:i.w,height:i.h,devicePixelRatio:o,data:n,viewScaleInfo:{scale:1,offsetLeft:-i.x,offsetTop:-i.y,offsetBottom:0,offsetRight:0},viewSizeInfo:Object.assign(Object.assign({},a),{devicePixelRatio:o}),loadItemMap:ue(this,ye,"f").getLoadItemMap()})})}isDestroyed(){return ue(this,ye,"f").isDestroyed()}destroy(){const t=ue(this,ye,"f"),n=ue(this,Qt,"f");t.destroy(),n.destroy()}getViewCenter(){const{viewScaleInfo:t,viewSizeInfo:n}=this.getViewInfo();return md({viewScaleInfo:t,viewSizeInfo:n})}$onBoardWatcherEvents(){ue(this,ye,"f").onBoardWatcherEvents()}$offBoardWatcherEvents(){ue(this,ye,"f").offBoardWatcherEvents()}}ye=new WeakMap,zo=new WeakMap,Qt=new WeakMap,Mo=new WeakSet,Ml=function(){const t=ue(this,ye,"f"),n=ue(this,Qt,"f");Aa("select",t,n)},Ta=function(t,n){const o=ue(this,Qt,"f");if(["ruler","scroll","scale","info"].includes(t)){const i={ruler:"enableRuler",scroll:"enableScroll",scale:"enableScale",info:"enableInfo"};o.set(i[t],!!n),xl(ue(this,ye,"f"),o),ue(this,ye,"f").refresh()}else t==="selectInGroup"?ue(this,ye,"f").trigger(ce.SELECT_IN_GROUP,{enable:!!n}):t==="snapToGrid"&&ue(this,ye,"f").trigger(ce.SNAP_TO_GRID,{enable:!!n})};const Ne=ce,da="base-scale-selector",c6=e=>{const{className:t,style:n,defaultValue:o,value:i,onChange:a}=e,s=H(da),c=H(da,"menu-item"),d=H(da,"input"),[r,h]=z.useState(100);z.useEffect(()=>{const g=be(parseFloat(i||"1")*100);h(g)},[i]);const u=g=>{const{key:p}=g;a==null||a(p)},f=g=>{g.stopPropagation()},v={items:[{label:l.createElement("span",{className:c},l.createElement(he,{className:d,size:"small",value:r,suffix:"%",onClick:f,step:1,min:10,max:1e4,controls:!1,onChange:g=>{if(g&&g>0){const p=be(g/100);a==null||a(`${p}`)}}})),key:"custom"},...[.5,1,2,3].map(g=>({key:`${g}`,label:l.createElement("span",{className:c},`${be(g*100)}%`)}))],onClick:u,selectedKeys:[`${i||o}`]};return z.useMemo(()=>l.createElement(oo,{className:fe(s,t),menu:v,placement:"bottom"},l.createElement(ke,{icon:l.createElement(Uc,null),size:"small"},`${be(parseFloat(i||"1")*100)}%`)),[t,n,o,i,a,r])},cn="node",d6=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:r,onTitleChange:h,onOperationToggle:u,onDelete:f,onContextMenu:m,onGoToGroup:v,operations:g,isSelected:p}=e,[w,S]=z.useState(!1),[A,y]=z.useState(!1),I=z.useRef(s),b=r(d,cn),E=r(d,cn,"icon"),C=r(d,cn,"title"),V=r(d,cn,"title","input"),T=r(d,cn,"title","icon"),P=r(d,cn,"action"),R=r(d,cn,"selected"),_=z.useRef(0),Z=z.useRef(null);z.useEffect(()=>{var x;w===!0&&((x=Z.current)===null||x===void 0||x.focus())},[w]);const W=x=>{S(!1),h==null||h({uuid:a,value:x.target.value||""})},D=x=>{I.current=x.target.value||""},k=x=>{var L;x.code==="Enter"&&(S(!1),h==null||h({uuid:a,value:((L=x==null?void 0:x.target)===null||L===void 0?void 0:L.value)||""}))},j=x=>{x.stopPropagation(),x.preventDefault()},M=x=>{const L=Date.now(),O=L-_.current;_.current=L,O<=300&&O>0&&(x.stopPropagation(),x.preventDefault(),S(!0))},$=x=>{x.stopPropagation(),x.preventDefault(),f==null||f({uuid:a})},B=x=>{x.stopPropagation(),x.preventDefault(),u==null||u({uuid:a,operations:{invisible:!g.invisible}})},N=x=>{x.stopPropagation(),x.preventDefault(),v==null||v({uuid:i,position:c})},U=x=>{x.stopPropagation(),x.preventDefault(),u==null||u({uuid:a,operations:{locked:!g.locked}})},G=x=>{x.preventDefault(),m==null||m({uuids:[i],positions:[c]})};return z.useMemo(()=>{I.current=s;function x(L){return L==="rect"?l.createElement(Ir,{className:T}):L==="circle"?l.createElement(wr,{className:T}):L==="text"?l.createElement(Tr,{className:T}):L==="path"?l.createElement(Hc,{className:T}):L==="image"?l.createElement(xr,{className:T}):L==="svg"?l.createElement(Ar,{className:T}):L==="group"?l.createElement(Sr,{className:T}):L==="html"?l.createElement(Cr,{className:T}):l.createElement("span",{className:T})}return l.createElement("span",{key:a,style:n,className:fe(b,t,p?R:null),onClick:M,onContextMenu:G},l.createElement("span",{className:C},x(o),l.createElement("span",null,s)),A&&l.createElement("span",{className:P},o==="group"&&l.createElement(yc,{className:E,onClick:N}),g.invisible?l.createElement(Mr,{className:E,onClick:B}):l.createElement(Pa,{className:E,onClick:B}),g.locked?l.createElement(Fc,{className:E,onClick:U}):l.createElement(Kc,{className:E,onClick:U}),l.createElement(br,{className:E,onClick:$})),w&&l.createElement("span",{className:V},l.createElement(qt,{ref:Z,size:"small",defaultValue:s,onBlur:W,onClick:j,onKeyDown:k,onChange:D,onContextMenu:L=>{L.stopPropagation(),L.preventDefault()}})))},[a,s,w,o,A,g,p])};function u6(e,t){const n=[],{position:o,reverse:i}=t;if(Array.isArray(e)){const a=[...o];if(i===!0)for(let s=e.length-1;s>=0;s--){const c=e[s];a.push(s),n.push(Fi(c,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()}else e.forEach((s,c)=>{a.push(c),n.push(Fi(s,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()})}return n}const Fi=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onContextMenu:c,onGoToGroup:d,position:r,selectedKeys:h}=t,u={key:e.key,title:l.createElement(d6,{parentModName:n,uuid:e.key,title:e.title,position:r,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,onContextMenu:c,onGoToGroup:d,isSelected:h==null?void 0:h.includes(e.key)}),children:[]};if(Array.isArray(e.children)){const f=[...r];if(t.reverse===!0)for(let m=e.children.length-1;m>=0;m--){const v=e.children[m];f.push(m),u.children.push(Fi(v,Object.assign(Object.assign({},t),{position:[...f]}))),f.pop()}else e.children.forEach((m,v)=>{f.push(v),u.children.push(Fi(m,Object.assign(Object.assign({},t),{position:[...f]}))),f.pop()})}return u},{DirectoryTree:h6}=hr,Js="base-element-tree";function ua(e,t,n){var o;const i=[];let a=t;for(let s=0;s<e.length;s++){const c=e[s];let d=-1;c===0?d=a.length-1:c>=a.length-1?d=0:d=a.length-1-c,i.push(d),a=(o=a[d])===null||o===void 0?void 0:o.children}return(n==null?void 0:n.isToPosition)===!0&&i.length>0&&(i[i.length-1]+=1),i}const ha=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t},zl=l.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,onContextMenu:r,selectedKeys:h,onDrop:u,defaultExpandedKeys:f,onDelete:m,onExpand:v,onGoToGroup:g,reverse:p}=e,w=(A,y)=>{const I=ha(y.node.pos);let b=[I];p===!0&&(b=[ua(I,a||[])]);const E=[A[0]];d==null||d({uuids:E,positions:b})},S=({uuid:A})=>{m==null||m({uuid:A})};return z.useMemo(()=>{const A=u6(a||[],{parentModName:Js,generateClassName:H,onSelect:y=>{d==null||d(y)},onContextMenu:r,onTitleChange:s,onOperationToggle:c,onDelete:S,onGoToGroup:g,position:[],selectedKeys:h||[],reverse:!!p});return l.createElement(h6,{ref:t,height:n,style:i,className:fe(H(Js),o),showLine:!0,blockNode:!0,selectedKeys:h,switcherIcon:l.createElement(Ra,null),icon:null,onSelect:w,treeData:A,defaultExpandedKeys:f,onExpand:v,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:y=>{const{dragNode:I,node:b,dropToGap:E,dropPosition:C}=y,V=ha(I.pos),T=ha(b.pos);E===!0&&C>=0?T[T.length-1]=C:b.dragOverGapBottom===!0?T[T.length-1]=T[T.length-1]+1:b.dragOverGapTop===!0?T[T.length-1]=Math.max(0,T[T.length-1]-1):b.dragOver===!0&&T.push(0);let P=V,R=T;p===!0&&(P=ua(V,a||[]),R=ua(T,a||[],{isToPosition:!0})),u==null||u({from:P,to:R})}})},[o,i,w,a,h])}),dn="node",f6=e=>{const{className:t,style:n,type:o,uuid:i,nodeKey:a,title:s,position:c,parentModName:d,generateClassName:r,onTitleChange:h,onOperationToggle:u,onDelete:f,onSelect:m,operations:v,isSelected:g}=e,[p,w]=z.useState(!1),[S,A]=z.useState(!1),y=z.useRef(s),I=r(d,dn),b=r(d,dn,"icon"),E=r(d,dn,"title"),C=r(d,dn,"title","input"),V=r(d,dn,"title","icon"),T=r(d,dn,"action"),P=r(d,dn,"selected"),R=z.useRef(0),_=z.useRef(null);z.useEffect(()=>{var B;p===!0&&((B=_.current)===null||B===void 0||B.focus())},[p]);const Z=B=>{w(!1),h==null||h({uuid:a,value:B.target.value||""})},W=B=>{y.current=B.target.value||""},D=B=>{var N;B.code==="Enter"&&(w(!1),h==null||h({uuid:a,value:((N=B==null?void 0:B.target)===null||N===void 0?void 0:N.value)||""}))},k=B=>{B.stopPropagation(),B.preventDefault()},j=B=>{const N=Date.now(),U=N-R.current;R.current=N,m==null||m({uuids:[i],positions:[c]}),U<=300&&U>0&&(B.stopPropagation(),B.preventDefault(),w(!0))},M=B=>{B.stopPropagation(),B.preventDefault(),f==null||f({uuid:a})},$=B=>{B.stopPropagation(),B.preventDefault(),u==null||u({uuid:a,operations:{invisible:!v.invisible}})};return z.useMemo(()=>(y.current=s,l.createElement("span",{key:a,style:n,className:fe(I,t,g?P:null),onClick:j},l.createElement("span",{className:E},l.createElement(Oc,{className:V}),l.createElement("span",null,s)),S&&l.createElement("span",{className:T},v.invisible?l.createElement(Mr,{className:b,onClick:$}):l.createElement(Pa,{className:b,onClick:$}),l.createElement(br,{className:b,onClick:M})),p&&l.createElement("span",{className:C},l.createElement(qt,{ref:_,size:"small",defaultValue:s,onBlur:Z,onClick:k,onKeyDown:D,onChange:W})))),[a,s,p,o,S,v,g])};function m6(e,t){const n=[],{position:o,reverse:i}=t;if(Array.isArray(e)){const a=[...o];if(i===!0)for(let s=e.length-1;s>=0;s--){const c=e[s];a.push(s),n.push(Ks(c,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()}else e.forEach((s,c)=>{a.push(c),n.push(Ks(s,Object.assign(Object.assign({},t),{position:[...a]}))),a.pop()})}return n}const Ks=(e,t)=>{const{parentModName:n,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,position:c,selectedKeys:d}=t;return{key:e.key,title:l.createElement(f6,{parentModName:n,uuid:e.key,title:e.title,position:c,operations:e.operations,nodeKey:e.key,type:e.type,generateClassName:t.generateClassName,onTitleChange:o,onOperationToggle:i,onDelete:a,onSelect:s,isSelected:d==null?void 0:d.includes(e.key)})}},{DirectoryTree:g6}=hr,qs="base-page-tree",fa=e=>{const t=e.split("-").map(n=>parseInt(n));return t.shift(),t};function ma(e,t,n){const o=[];for(let i=0;i<e.length;i++){const a=e[i];let s=-1;a===0?s=t.length-1:a>=t.length-1?s=0:s=t.length-1-a,o.push(s)}return(n==null?void 0:n.isToPosition)===!0&&o.length>0&&(o[o.length-1]+=1),o}const v6=l.forwardRef((e,t)=>{const{height:n,className:o,style:i,treeData:a,onTitleChange:s,onOperationToggle:c,onSelect:d,selectedKeys:r,onDrop:h,defaultExpandedKeys:u,expandedKeys:f,onDelete:m,reverse:v=!0}=e,g=(w,S)=>{const A=fa(S.node.pos);let y=[A];v===!0&&(y=[ma(A,a||[])]);const I=[w[0]];d==null||d({uuids:I,positions:y})},p=({uuid:w})=>{m==null||m({uuid:w})};return z.useMemo(()=>{const w=m6(a||[],{parentModName:qs,generateClassName:H,onTitleChange:s,onOperationToggle:c,onDelete:p,position:[],selectedKeys:r||[],reverse:!!v});return l.createElement(g6,{ref:t,height:n,style:i,className:fe(H(qs),o),showLine:!0,blockNode:!0,multiple:!0,selectedKeys:r,switcherIcon:l.createElement(Ra,null),icon:null,onSelect:g,treeData:w,defaultExpandedKeys:u,expandedKeys:f,draggable:{icon:!1,nodeDraggable:()=>!0},onDrop:S=>{const{dragNode:A,node:y,dropToGap:I,dropPosition:b}=S,E=fa(A.pos),C=fa(y.pos);I===!0&&b>=0?C[C.length-1]=b:y.dragOverGapBottom===!0?C[C.length-1]=C[C.length-1]+1:y.dragOverGapTop===!0?C[C.length-1]=Math.max(0,C[C.length-1]-1):y.dragOver===!0&&C.push(0);let V=E,T=C;v===!0&&(V=ma(E,a||[]),T=ma(C,a||[],{isToPosition:!0})),h==null||h({from:V,to:T})}})},[o,i,g,a,r])});var p6=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const y6=e=>{const{value:t,onChange:n}=e,o=p6(e,["value","onChange"]),i=s=>{n==null||n(s)},a=()=>{i(!t)};return l.createElement(ke,Object.assign({},o,{type:t?"primary":"default",onClick:a}))},w6="ElementDetail",en=()=>{const[e]=Da(w6);return e},uo="base-element-basic-attribute",Ft=e=>Ie.number(e*1)?be(e*1):e,er=e=>{if(Ie.number(e*1)){const t=be(e*1);return dt(t)}return e},b6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=z.useRef(null),c=H(uo),d=H(uo,"row"),r=H(uo,"col"),h=H(uo,"input"),u=H(uo,"form-item"),f=en(),m=v=>{var g;((g=o==null?void 0:o.operations)===null||g===void 0?void 0:g.limitRatio)===!0&&(v!=null&&v.hasOwnProperty("w")?v.h=be(v.w/o.w*o.h):v!=null&&v.hasOwnProperty("h")&&(v.w=be(v.h/o.h*o.w))),i==null||i(v)};return z.useEffect(()=>{var v;const{type:g,x:p,y:w,w:S,h:A,angle:y=0,operations:I={}}=o||{},b={x:p,y:w,w:S,h:A,angle:y,operations:{limitRatio:I.limitRatio}};g==="group"&&(b.operations.deepResize=I.deepResize),(v=s.current)===null||v===void 0||v.setFieldsValue(b)},[o]),z.useMemo(()=>l.createElement(q,{ref:s,style:n,className:fe(c,t),onValuesChange:m},l.createElement(me,{className:d},l.createElement(K,{span:10,className:r},l.createElement(q.Item,{className:u,name:"x"},l.createElement(he,{className:h,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:Ft,parser:Ft}))),l.createElement(K,{span:10,className:r},l.createElement(q.Item,{className:u,name:"y"},l.createElement(he,{className:h,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:Ft,parser:Ft})))),l.createElement(me,{className:d},l.createElement(K,{span:10,className:r},l.createElement(q.Item,{className:u,name:"w"},l.createElement(he,{className:h,size:"small",placeholder:"Width",prefix:f.w,disabled:a,formatter:Ft,parser:Ft}))),l.createElement(K,{span:10,className:r},l.createElement(q.Item,{className:u,name:"h"},l.createElement(he,{className:h,size:"small",placeholder:"Height",prefix:f.h,disabled:a,formatter:Ft,parser:Ft}))),l.createElement(K,{span:4,className:r},l.createElement(q.Item,{className:u,name:["operations","limitRatio"]},l.createElement(y6,{icon:l.createElement(Ic,null),size:"small",disabled:a})))),l.createElement(me,{className:d},l.createElement(K,{span:10,className:r},l.createElement(q.Item,{className:u,name:"angle"},l.createElement(he,{className:h,size:"small",placeholder:"Angle",prefix:l.createElement($c,{style:{fontSize:14}}),disabled:a,formatter:er,parser:er,suffix:"°"})))),(o==null?void 0:o.type)==="group"&&l.createElement(me,{className:d},l.createElement(K,{span:18,className:r},f.deepResizeInGroup),l.createElement(K,{span:6,className:r},l.createElement(q.Item,{className:u,name:["operations","deepResize"]},l.createElement(ur,{size:"small"}))))),[f,a,o])},Xe="base-element-field-multiple-color-picker",E6=["transparent","#FFFFFF","#000000","#AAAAAA","#F5222D","#FA8C16","#FADB14","#8BBB11","#52C41A","#13A8A8","#1677FF","#2F54EB","#722ED1","#EB2F96","#F5222D4D","#FA8C164D","#FADB144D","#8BBB114D","#52C41A4D","#13A8A84D","#1677FF4D","#2F54EB4D","#722ED14D","#EB2F964D"],S6=({value:e="",onChange:t,className:n,diabledColorBlocks:o=!0})=>{const i=H(Xe,"color-block"),a=H(Xe,"color-block-active");return l.createElement(l.Fragment,null,!o&&l.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:10,paddingBottom:0}},E6.map(s=>l.createElement(Wl,{className:fe(i,{[a]:s.toUpperCase()===(e==null?void 0:e.toUpperCase())}),key:s,color:s,prefixCls:"rc-color-picker",onClick:()=>{t==null||t(s)}}))),l.createElement(Hl,{className:n,value:new Gl(e),onChange:s=>{const c=`${s.toHexString().toUpperCase()}`,d=c.length===9&&c.endsWith("FF")?`${s.toHexString().toUpperCase()}`:c;t==null||t(d)}}))},Il=16,tr=e=>{var t,n;const o=(t=e.currentTarget.parentElement)===null||t===void 0?void 0:t.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),a=e.clientX-o.x-Il/2;let s=parseFloat((n=a/i.width)===null||n===void 0?void 0:n.toFixed(2));return s=Math.min(Math.max(s,0),1),s};function C6(e){const{mode:t,value:n,internalColor:o,internalLinearGradient:i,internalRadialGradient:a,currentPickedColor:s,onChange:c,onSelectStop:d}=e,[r,h]=z.useState(Li(n)),[u,f]=z.useState(null),m=z.useRef(!1),v=H(Xe,"gradient-root"),g=H(Xe,"gradient-delete"),p=H(Xe,"gradient"),w=H(Xe,"gradient-bar"),S=H(Xe,"gradient-point"),A=H(Xe,"gradient-point-active");z.useEffect(()=>{var T;const P=Li(n);h(P),["linear-gradient","radial-gradient"].includes(n==null?void 0:n.type)&&(u||f((T=n==null?void 0:n.stops)===null||T===void 0?void 0:T[0]))},[n]),z.useEffect(()=>{u?d==null||d(Object.assign({},u)):d==null||d(u)},[u]);const y=T=>{T.stopPropagation(),m.current=!0;const P=tr(T);let R=null;if(t==="linear-gradient"?R=i:t==="radial-gradient"&&(R=a),R){const _=[...R.stops];for(let W=0;W<_.length;W++){const D=_[W],k=_[W+1],j={offset:P,color:s};if(D.offset===P)break;if(P<D.offset){_.unshift(j),f(j);break}else if(D.offset<P&&P<(k==null?void 0:k.offset)){_.splice(W+1,0,j),f(j);break}else if(P>D.offset&&!k){_.push(j),f(j);break}if(!k)break}const Z=Object.assign(Object.assign({},R),{stops:_});c==null||c(Z)}},I=T=>{if(m.current===!0&&u){const P=tr(T);let R=null;if(t==="linear-gradient"?R=i:t==="radial-gradient"&&(R=a),R){const _=[...R.stops];for(let D=0;D<_.length;D++){const k=_[D];if(k.offset===u.offset){k.offset=P,f(Object.assign({},k));break}}const Z=_.sort((D,k)=>D.offset-k.offset),W=Object.assign(Object.assign({},R),{stops:Z});c==null||c(W)}}},b=T=>{T.stopPropagation(),m.current=!1},E=(T,P)=>{T.stopPropagation(),f(P),m.current=!0},C=()=>{let T=null;t==="linear-gradient"?T=i:t==="radial-gradient"&&(T=a);let P=-1;if(T&&u){const R=[...T.stops];for(let _=0;_<R.length;_++)if(R[_].offset===u.offset){P=_;break}if(P>=0){R.splice(P,1);const _=Object.assign(Object.assign({},T),{stops:R});c==null||c(_)}}},V=()=>{m.current=!1};return z.useMemo(()=>{var T,P,R;return l.createElement(l.Fragment,null,(t==="linear-gradient"||t==="radial-gradient")&&l.createElement("div",{className:v},l.createElement("div",{className:p,"data-css":r,style:{background:r}},l.createElement("div",{className:w,onMouseDown:y,onMouseUp:b,onMouseMove:I,onMouseLeave:b},(R=(P=(T=t==="linear-gradient"?i:a)===null||T===void 0?void 0:T.stops)===null||P===void 0?void 0:P.map)===null||R===void 0?void 0:R.call(P,(_,Z)=>l.createElement("span",{key:Z,className:fe({[S]:!0,[A]:(u==null?void 0:u.offset)===_.offset}),style:{left:`calc(${_.offset*100}% - ${Il/2}px)`,background:_.color},onMouseDown:W=>{E(W,_)},onMouseUp:V})))),l.createElement("div",{className:g,onClick:_=>{_.stopPropagation(),C()}},l.createElement(Dc,null))))},[t,r,s,o,i,a,u])}function nr(e){let t="solid";return e&&(e!=null&&e.type)&&(t=e.type),t}function x6(e){const{className:t,value:n,onChange:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,[c,d]=z.useState(Li(n)),[r,h]=z.useState(nr(n)),[u,f]=z.useState("#000000"),[m,v]=z.useState(null),[g,p]=z.useState(null),[w,S]=z.useState(null),A=z.useRef(null),y=z.useRef(null),I=z.useRef(null),b=H(Xe),E=H(Xe,"header"),C=H(Xe,"internal-picker"),V=H(Xe,"radio-group"),T=H(Xe,"row"),P=H(Xe,"col"),R=H(Xe,"input"),_=H(Xe,"form-item");z.useEffect(()=>{d(Li(n)),h(nr(n)),typeof n=="string"?(v(n),f(n)):(n==null?void 0:n.type)==="linear-gradient"?p(n):(n==null?void 0:n.type)==="radial-gradient"&&S(n)},[n]),z.useEffect(()=>{var j,M;r==="linear-gradient"&&(n==null?void 0:n.type)===r?(j=y.current)===null||j===void 0||j.setFieldsValue(n):r==="radial-gradient"&&(n==null?void 0:n.type)===r&&((M=I.current)===null||M===void 0||M.setFieldsValue(n))},[r,n]);const Z=j=>{var M,$,B,N,U,G;let x;j==="linear-gradient"?(x={type:"linear-gradient",start:{x:0,y:0},end:{x:0,y:(i==null?void 0:i.h)||0},stops:[]},typeof n=="string"?(x.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],p(x)):(n==null?void 0:n.type)==="radial-gradient"&&(x.stops=[...(n==null?void 0:n.stops)||[]],p(x)),(M=y.current)===null||M===void 0||M.setFieldsValue(x)):j==="radial-gradient"?(x={type:"radial-gradient",inner:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:0},outer:{x:((i==null?void 0:i.w)||0)/2,y:((i==null?void 0:i.h)||0)/2,radius:Math.min(((i==null?void 0:i.w)||0)/2,((i==null?void 0:i.h)||0)/2)},stops:[]},typeof n=="string"?(x.stops=[{offset:0,color:n},{offset:.5,color:n},{offset:1,color:n}],S(x)):(n==null?void 0:n.type)==="linear-gradient"&&(x.stops=[...(n==null?void 0:n.stops)||[]],S(x)),($=I.current)===null||$===void 0||$.setFieldsValue(x)):j==="solid"&&(x=n,(n==null?void 0:n.type)==="linear-gradient"?(x=((N=(B=n==null?void 0:n.stops)===null||B===void 0?void 0:B[0])===null||N===void 0?void 0:N.color)||"#000000",v(x)):(n==null?void 0:n.type)==="radial-gradient"&&(x=((G=(U=n==null?void 0:n.stops)===null||U===void 0?void 0:U[0])===null||G===void 0?void 0:G.color)||"#000000",v(x))),x&&(o==null||o(x))},W=j=>{if(r==="solid")o==null||o(j.color);else if(A.current){if(r==="linear-gradient"&&g&&Array.isArray(g==null?void 0:g.stops)){const M=[...g.stops];for(let B=0;B<M.length;B++)if(M[B].offset===A.current.offset){M[B].color=j.color;break}const $=Object.assign(Object.assign({},g),{stops:M});p($),o==null||o($)}else if(r==="radial-gradient"&&w&&Array.isArray(w==null?void 0:w.stops)){const M=[...w.stops];for(let B=0;B<M.length;B++)if(M[B].offset===A.current.offset){M[B].color=j.color;break}const $=Object.assign(Object.assign({},w),{stops:M});S($),o==null||o($)}}},D=j=>{const M=Object.assign({},g);j!=null&&j.start&&(M.start=Object.assign(Object.assign({},M.start),j.start)),j!=null&&j.end&&(M.end=Object.assign(Object.assign({},M.end),j.end)),o==null||o(M)},k=j=>{const M=Object.assign({},w);j!=null&&j.inner&&(M.inner=Object.assign(Object.assign({},M.inner),j.inner)),j!=null&&j.outer&&(M.outer=Object.assign(Object.assign({},M.outer),j.outer)),o==null||o(M)};return z.useMemo(()=>l.createElement("div",{className:fe(b,t)},!a&&!s&&l.createElement("div",{className:E},l.createElement(rt.Group,{className:V,size:"small",buttonStyle:"solid",value:r,onChange:({target:{value:j}})=>{Z(j)}},l.createElement(rt.Button,{value:"solid"},l.createElement(Qc,null)),!a&&l.createElement(rt.Button,{value:"linear-gradient"},l.createElement(Yc,null)),!s&&l.createElement(rt.Button,{value:"radial-gradient"},l.createElement(Rc,null)))),!a&&r==="linear-gradient"&&l.createElement("div",{style:{marginBottom:10}},l.createElement(q,{ref:y,onValuesChange:D},l.createElement(me,{className:T},l.createElement(K,{className:P,span:"4"},"Start"),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["start","x"]},l.createElement(he,{className:R,size:"small",prefix:"X"}))),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["start","y"]},l.createElement(he,{className:R,size:"small",prefix:"Y"})))),l.createElement(me,{className:T},l.createElement(K,{className:P,span:"4"},"End"),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["end","x"]},l.createElement(he,{className:R,size:"small",prefix:"X"}))),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["end","y"]},l.createElement(he,{className:R,size:"small",prefix:"Y"})))))),!s&&r==="radial-gradient"&&l.createElement("div",{style:{marginBottom:10}},l.createElement(q,{ref:I,onValuesChange:k},l.createElement(me,{className:T},l.createElement(K,{className:P,span:"4"},"Inner"),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["inner","x"]},l.createElement(he,{className:R,size:"small",prefix:"X"}))),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["inner","y"]},l.createElement(he,{className:R,size:"small",prefix:"Y"})))),l.createElement(me,{className:T},l.createElement(K,{className:P,span:"4"}),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["inner","radius"]},l.createElement(he,{className:R,size:"small",prefix:"R"})))),l.createElement(me,{className:T},l.createElement(K,{className:P,span:"4"},"Outer"),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["outer","x"]},l.createElement(he,{className:R,size:"small",prefix:"X"}))),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["outer","y"]},l.createElement(he,{className:R,size:"small",prefix:"Y"})))),l.createElement(me,{className:T},l.createElement(K,{className:P,span:"4"}),l.createElement(K,{className:P,span:"10"},l.createElement(q.Item,{className:_,name:["outer","radius"]},l.createElement(he,{className:R,size:"small",prefix:"R"})))))),(!a||!s)&&(r==="linear-gradient"||r==="radial-gradient")&&l.createElement(C6,{mode:r,value:n,currentPickedColor:u,internalColor:m,internalLinearGradient:g,internalRadialGradient:w,onChange:j=>{(j==null?void 0:j.type)==="linear-gradient"?(p(j),o==null||o(j)):(j==null?void 0:j.type)==="radial-gradient"&&(S(j),o==null||o(j))},onSelectStop:j=>{j!=null&&j.color&&f(j.color),A.current=j}}),l.createElement(S6,{diabledColorBlocks:["linear-gradient","radial-gradient"].includes(r),value:u,className:C,onChange:j=>{f(j),W({color:j})}})),[r,c,m,g,w,u,a,s])}const or="base-element-field-multiple-color";function En(e){const{value:t,onChange:n,disabled:o,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s}=e,c=en(),r=(p=>{let w="";return typeof p=="string"?w=p:["linear-gradient","radial-gradient"].includes(p==null?void 0:p.type)&&(w=c.gradient),w})(t),h=typeof t=="string",{container:u,getContainer:f}=z.useContext(Sn),m=H(or),v=H(or,"preview"),g=z.useRef(u);return z.useEffect(()=>{!g.current&&u&&(g.current=u)},[u]),z.useMemo(()=>{const p=r0(t||"transparent");return l.createElement(l.Fragment,null,l.createElement(qt,{className:m,size:"small",disabled:o,prefix:o?l.createElement("span",null):l.createElement(fr,{placement:"left",getPopupContainer:f,style:{padding:0},content:l.createElement(x6,{value:t,elementSize:i,disabledLinearGradient:a,disabledRadialGradient:s,onChange:n}),trigger:"click"},l.createElement("span",{className:v,style:{background:p}})),readOnly:!h,value:r,onChange:w=>{n==null||n(w.target.value)}}))},[t,n,o,i])}const ga=e=>l.createElement(ie,Object.assign({},e),l.createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor"},l.createElement("path",{d:"M512 384a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m0 170.666667a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m170.666667 0a42.666667 42.666667 0 1 0-42.666667-42.666667 42.666667 42.666667 0 0 0 42.666667 42.666667z m-170.666667 170.666666a42.666667 42.666667 0 1 0-42.666667-42.666666 42.666667 42.666667 0 0 0 42.666667 42.666666z m341.333333-597.333333H170.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v682.666666a42.666667 42.666667 0 0 0 42.666667 42.666667h682.666666a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667z m-42.666666 682.666667H213.333333V213.333333h597.333334zM341.333333 554.666667a42.666667 42.666667 0 1 0-42.666666-42.666667 42.666667 42.666667 0 0 0 42.666666 42.666667z"}))),ho="base-element-border-attribute",Na=4;function fo(e){const{borderRadius:t,borderWidth:n,borderColor:o,boxSizing:i,borderDash:a}=(e==null?void 0:e.detail)||{};let s="solid",c=Na;Array.isArray(a)&&(a==null?void 0:a.length)>0&&a[0]>=1&&typeof n=="number"&&(s="dash",c=Math.ceil(a[0]));const d={borderRadiusList:[0,0,0,0],borderWidthList:[0,0,0,0],borderColor:o,borderType:s,boxSizing:i,borderDashNum:c};return typeof t=="number"?(d.borderRadius=t,d.borderRadiusList=[t,t,t,t]):Array.isArray(t)?d.borderRadiusList=[t[0]||0,t[1]||0,t[2]||0,t[3]||0]:d.borderRadius=0,typeof n=="number"?(d.borderWidth=n,d.borderWidthList=[n,n,n,n]):Array.isArray(n)?d.borderWidthList=[n[0]||0,n[1]||0,n[2]||0,n[3]||0]:d.borderWidth=0,d}const M6=e=>{var t,n;const{className:o,style:i,element:a,disabled:s,onChange:c}=e,d=z.useRef(null),r=H(ho),h=H(ho,"row"),u=H(ho,"col"),f=H(ho,"input"),m=H(ho,"form-item"),[v,g]=z.useState(Array.isArray((t=a==null?void 0:a.detail)===null||t===void 0?void 0:t.borderRadius)),[p,w]=z.useState(Array.isArray((n=a==null?void 0:a.detail)===null||n===void 0?void 0:n.borderWidth)),[S,A]=z.useState(p),y=en(),I=b=>{var E,C;const V=fo(a),{borderColor:T,boxSizing:P,borderType:R,borderDashNum:_}=b,Z={};if(T&&(Z.borderColor=T),P&&(Z.boxSizing=P),p===!0&&b.borderWidthList){const W=[0,0,0,0],D=Array.from((b==null?void 0:b.borderWidthList)||[null,null,null,null]);for(let k=0;k<4;k++){const j=D[k];typeof j=="number"?W[k]=j:W[k]=((E=V==null?void 0:V.borderWidthList)===null||E===void 0?void 0:E[k])||0,Z.borderWidth=W}}else typeof b.borderWidth=="number"&&(Z.borderWidth=b.borderWidth);if(v===!0&&b.borderRadiusList){const W=[0,0,0,0],D=Array.from((b==null?void 0:b.borderRadiusList)||[null,null,null,null]);for(let k=0;k<4;k++){const j=D[k];typeof j=="number"?W[k]=j:W[k]=((C=V==null?void 0:V.borderRadiusList)===null||C===void 0?void 0:C[k])||0,Z.borderRadius=W}}else typeof b.borderRadius=="number"&&(Z.borderRadius=b.borderRadius);p===!0?Z.borderDash=[]:R==="solid"?Z.borderDash=[]:R==="dash"?Z.borderDash=[Na,Na]:_&&_>0&&(Z.borderDash=[_,_]),c==null||c({detail:Z})};return z.useEffect(()=>{var b,E,C;const V=Array.isArray((b=a==null?void 0:a.detail)===null||b===void 0?void 0:b.borderWidth),T=Array.isArray((E=a==null?void 0:a.detail)===null||E===void 0?void 0:E.borderRadius);w(V),g(T),A(V);const P=fo(a);(C=d.current)===null||C===void 0||C.setFieldsValue(P)},[a]),z.useMemo(()=>{const b=fo(a);return l.createElement(q,{ref:d,style:i,className:fe(r,o),onValuesChange:I},l.createElement(l.Fragment,null,l.createElement(me,{className:h},l.createElement(K,{span:16,className:u},p?l.createElement(qt,{className:f,size:"small",prefix:l.createElement(ga,{style:{fontSize:14}}),disabled:!0,value:y.mixedBorderWidth}):l.createElement(q.Item,{className:m,name:"borderWidth"},l.createElement(he,{className:f,size:"small",min:0,placeholder:"Border Width",prefix:l.createElement(ga,{style:{fontSize:14}}),disabled:s||p}))),l.createElement(K,{span:4,className:u},l.createElement(ke,{icon:l.createElement(ga,null),size:"small",disabled:s,type:p?"primary":"default",onClick:()=>{var E;const C=!p;if(w(C),A(C),!C){const V=fo(a),T=V.borderWidth||((E=V.borderWidthList)===null||E===void 0?void 0:E[0])||0;I({borderWidth:T})}}}))),p&&l.createElement(l.Fragment,null,l.createElement(me,{className:h},l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderWidthList",0]},l.createElement(he,{className:f,size:"small",prefix:l.createElement(Mc,null),disabled:s||!p,min:0}))),l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderWidthList",1]},l.createElement(he,{className:f,size:"small",prefix:l.createElement(xc,null),disabled:s||!p,min:0})))),l.createElement(me,{className:h},l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderWidthList",2]},l.createElement(he,{className:f,size:"small",prefix:l.createElement(Ec,null),disabled:s||!p,min:0}))),l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderWidthList",3]},l.createElement(he,{className:f,size:"small",prefix:l.createElement(Cc,null),disabled:s||!p,min:0})))))),!["circle"].includes(a==null?void 0:a.type)&&l.createElement(l.Fragment,null,l.createElement(me,{className:h},l.createElement(K,{span:16,className:u},v?l.createElement(qt,{className:f,size:"small",prefix:l.createElement(as,{style:{fontSize:14}}),disabled:!0,value:y.mixedBorderRadius}):l.createElement(q.Item,{className:m,name:"borderRadius"},l.createElement(he,{className:f,size:"small",placeholder:"Radius",prefix:l.createElement(as,{style:{fontSize:14}}),disabled:s||v||S,min:0}))),l.createElement(K,{span:4,className:u},l.createElement(ke,{icon:l.createElement(_c,null),size:"small",disabled:s||S,type:v?"primary":"default",onClick:()=>{var E;const C=!v;if(g(C),!C){const V=fo(a),T=V.borderRadius||((E=V.borderRadiusList)===null||E===void 0?void 0:E[0])||0;I({borderRadius:T})}}}))),v&&l.createElement(l.Fragment,null,l.createElement(me,{className:h},l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderRadiusList",0]},l.createElement(he,{className:f,size:"small",placeholder:"",prefix:l.createElement(Nc,null),disabled:s||!v||S,min:0}))),l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderRadiusList",1]},l.createElement(he,{className:f,size:"small",placeholder:"",prefix:l.createElement(Lc,null),disabled:s||!v||S,min:0})))),l.createElement(me,{className:h},l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderRadiusList",2]},l.createElement(he,{className:f,size:"small",placeholder:"",prefix:l.createElement(Ac,null),disabled:s||!v||S,min:0}))),l.createElement(K,{span:12,className:u},l.createElement(q.Item,{className:m,name:["borderRadiusList",3]},l.createElement(he,{className:f,size:"small",placeholder:"",prefix:l.createElement(Tc,null),disabled:s||!v||S,min:0})))))),l.createElement(me,{className:h},l.createElement(K,{className:u,span:"11"},l.createElement(q.Item,{className:m,name:"boxSizing"},l.createElement(tt,{size:"small",disabled:s},l.createElement(tt.Option,{value:"border-box"},y.inside),l.createElement(tt.Option,{value:"content-box"},y.outside),l.createElement(tt.Option,{value:"center-line"},y.centerLine)))),l.createElement(K,{className:u,span:"13"},l.createElement(q.Item,{className:m,name:"borderColor"},l.createElement(En,{elementSize:a?wn(a):void 0,disabled:s,disabledLinearGradient:!0,disabledRadialGradient:!0})))),l.createElement(me,{className:h},l.createElement(K,{className:u,span:"11"},l.createElement(q.Item,{className:m,name:"borderType"},l.createElement(tt,{size:"small",disabled:s||p},l.createElement(tt.Option,{value:"solid"},y.solid),l.createElement(tt.Option,{value:"dash"},y.dash)))),l.createElement(K,{className:u,span:"13"},b.borderType==="dash"&&l.createElement(q.Item,{className:m,name:"borderDashNum"},l.createElement(he,{disabled:s||p,className:f,size:"small",style:{width:"100%"},prefix:l.createElement(Sc,{style:{fontSize:14}})})))))},[y,a,s,v,p,S])},z6="base-element-detail-circle",I6=e=>{const{className:t,style:n}=e,o=H(z6);return z.useMemo(()=>l.createElement("div",{style:n,className:fe(o,t)}),[n,t])};var A6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};const{TextArea:T6}=qt,On="base-element-field-image-picker",{useCallback:ir}=l,N6=["image/png","image/jpeg","image/jpg","image/png"],L6=({value:e="",onChange:t})=>{const[n,o]=z.useState(e),[i,a]=z.useState("free"),s=H(On),c=H(On,"box"),d=H(On,"entity"),r=H(On,"action"),h=H(On,"action-text"),u=H(On,"action-upload"),f=ir(p=>{const w=p||"";let S=3;const A=300;return w.length>128&&(S=10),{rows:S,width:A}},[n]),m=p=>{t==null||t(p||e)},v=p=>{o(p),Ie.imageSrc(p)&&m(p)},g=ir(()=>{i!=="picking"&&(Oa({success:p=>A6(void 0,void 0,void 0,function*(){if(N6.includes(p.file.type)!==!0){Do.error(`File's type "${p.file.type}" is not supported!`);return}try{const w=yield Nr(p.file);v(w.toString())}catch{Do.error(`Failed to parse file ${p.file.name}`)}a("free")}),error:p=>{console.log(p),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return z.useMemo(()=>l.createElement("div",{className:s},l.createElement("div",{className:c},l.createElement("img",{className:d,src:e||n}),l.createElement("div",{className:r},l.createElement("div",{className:h},l.createElement(fr,{content:()=>l.createElement("div",null,l.createElement(T6,{value:e||n,style:{width:f(e||n).width},rows:f(e||n).rows,onChange:p=>{v(p.target.value||"")}})),trigger:"click"},l.createElement("span",{style:{display:"inline-block",width:"100%",height:"100%",lineHeight:"50px"}},"URL"))),l.createElement("div",{onClick:g,className:u},l.createElement("span",null,"Upload"))))),[e,n])},D6="base-element-detail-image",R6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=H(D6),r=z.useRef(null),h=f=>{const{src:m=""}=(f==null?void 0:f.detail)||{};return{src:m,imageResource:(a==null?void 0:a(m))||""}},u=f=>{const m={};if(f!=null&&f.imageResource){const{assetId:v}=s({type:"image",value:f.imageResource});v&&vn(v)&&(m.src=v)}i==null||i({detail:m})};return z.useEffect(()=>{var f;const m=h(o);(f=r.current)===null||f===void 0||f.setFieldsValue(m)},[o]),z.useMemo(()=>l.createElement("div",{style:n,className:fe(d,t)},l.createElement(q,{ref:r,onValuesChange:u},l.createElement(q.Item,{name:"imageResource"},l.createElement(L6,null)))),[o,c])},Jo="base-element-detail-path",P6=e=>{const{fill:t,stroke:n}=(e==null?void 0:e.detail)||{};return{fill:t,stroke:n}},O6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=z.useRef(null),c=H(Jo),d=H(Jo,"row"),r=H(Jo,"col"),h=H(Jo,"form-item"),u=en(),f=m=>{const v=m;i==null||i({detail:v})};return z.useEffect(()=>{var m;const v=P6(o);(m=s.current)===null||m===void 0||m.setFieldsValue(v)},[o]),z.useMemo(()=>l.createElement("div",{style:n,className:fe(c,t)},l.createElement(q,{ref:s,onValuesChange:f},l.createElement(me,{className:d},l.createElement(K,{className:r,span:"10"},u.fill),l.createElement(K,{className:r,span:"14"},l.createElement(q.Item,{className:h,name:"fill"},l.createElement(En,{disabled:a})))),l.createElement(me,{className:d},l.createElement(K,{className:r,span:"10"},u.stroke),l.createElement(K,{className:r,span:"14"},l.createElement(q.Item,{className:h,name:"stroke"},l.createElement(En,{disabled:a})))))),[n,t])},k6="base-element-detail-rect",_6=e=>{const{className:t,style:n}=e,o=H(k6);return z.useMemo(()=>l.createElement("div",{style:n,className:fe(o,t)}),[n,t])};var j6=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};const mo="base-element-field-svg-picker",V6=["image/svg+xml"];function B6(e){const t=document.createElement("div");return t.innerHTML=e,document.querySelector("svg").setAttribute("_t",Date.now()+""),{__html:t.innerHTML}}const F6=({value:e="",onChange:t})=>{const[n,o]=z.useState(e),[i,a]=z.useState("free"),s=H(mo),c=H(mo,"box"),d=H(mo,"entity"),r=H(mo,"action"),h=H(mo,"action-upload"),u=v=>{t==null||t(v||e)},f=v=>{o(v),Ie.svg(v)&&u(v)},m=z.useCallback(()=>{i!=="picking"&&(Oa({success:v=>j6(void 0,void 0,void 0,function*(){if(V6.includes(v.file.type)!==!0){Do.error(`File's type "${v.file.type}" is not supported!`);return}try{let g=(yield i0(v.file)).toString();g=g.substring(g.indexOf("<svg")),f(g)}catch{Do.error(`Failed to parse file ${v.file.name}`)}a("free")}),error:v=>{console.log(v),a("free")}}),a("picking"),setTimeout(()=>{a("free")},500))},[i]);return z.useMemo(()=>l.createElement("div",{className:s},l.createElement("div",{className:c},l.createElement("div",{className:d,dangerouslySetInnerHTML:B6(e||n)}),l.createElement("div",{className:r},l.createElement("div",{onClick:m,className:h},l.createElement("span",null,"Upload"))))),[e,n])},W6="base-element-detail-svg",H6=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s,disabled:c}=e,d=H(W6),r=z.useRef(null),h=f=>{const{svg:m=""}=(f==null?void 0:f.detail)||{};return{svg:m,svgResource:(a==null?void 0:a(m))||""}},u=f=>{const m={};if(f!=null&&f.svgResource){const{assetId:v}=s({type:"svg",value:f.svgResource});v&&vn(v)&&(m.svg=v)}i==null||i({detail:m})};return z.useEffect(()=>{var f;const m=h(o);(f=r.current)===null||f===void 0||f.setFieldsValue(m)},[o]),z.useMemo(()=>l.createElement("div",{style:n,className:fe(d,t)},l.createElement(q,{ref:r,onValuesChange:u},l.createElement(q.Item,{name:"svgResource"},l.createElement(F6,null)))),[o,c])},go="base-element-detail-text",kn={fontSize:20},{TextArea:G6}=qt,_n=e=>Ie.number(e*1)?be(e*1):e,Y6=e=>{const{color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s,text:c=""}=(e==null?void 0:e.detail)||{};return{text:c,color:t,textAlign:n,verticalAlign:o,fontSize:i,fontWeight:a,lineHeight:s}},$6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=H(go),c=H(go,"row"),d=H(go,"col"),r=H(go,"switch"),h=H(go,"form-item"),u=z.useRef(null);z.useEffect(()=>{var m;const v=Y6(o);(m=u.current)===null||m===void 0||m.setFieldsValue(v)},[o]);const f=m=>{i==null||i({detail:m})};return z.useMemo(()=>l.createElement("div",{style:n,className:fe(s,t)},l.createElement(q,{ref:u,style:n,className:s,onValuesChange:f},l.createElement(me,{className:c},l.createElement(K,{span:"12",className:d},l.createElement(q.Item,{className:h,name:"verticalAlign"},l.createElement(rt.Group,{disabled:a,className:r,size:"small"},l.createElement(rt.Button,{value:"top"},l.createElement(t0,{style:kn})),l.createElement(rt.Button,{value:"middle"},l.createElement(e0,{style:kn})),l.createElement(rt.Button,{value:"bottom"},l.createElement(qc,{style:kn}))))),l.createElement(K,{span:"12",className:d},l.createElement(q.Item,{className:h,name:"textAlign"},l.createElement(rt.Group,{disabled:a,className:r,size:"small"},l.createElement(rt.Button,{value:"left"},l.createElement(vc,{style:kn})),l.createElement(rt.Button,{value:"center"},l.createElement(gc,{style:kn})),l.createElement(rt.Button,{value:"right"},l.createElement(pc,{style:kn})))))),l.createElement(me,{className:c},l.createElement(K,{span:"10",className:d},"Text Color"),l.createElement(K,{span:"14",className:d},l.createElement(q.Item,{className:h,name:"color"},l.createElement(En,{elementSize:o?wn(o):void 0,disabled:a,disabledLinearGradient:!0,disabledRadialGradient:!0})))),l.createElement(me,{className:c},l.createElement(K,{span:"10",className:d},"Font Size"),l.createElement(K,{span:"14",className:d},l.createElement(q.Item,{className:h,name:"fontSize"},l.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:_n,parser:_n})))),l.createElement(me,{className:c},l.createElement(K,{span:"10",className:d},"Font Weight"),l.createElement(K,{span:"14",className:d},l.createElement(q.Item,{className:h,name:"fontWeight"},l.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:100,max:1e3,min:100,formatter:_n,parser:_n})))),l.createElement(me,{className:c},l.createElement(K,{span:"10",className:d},"Line Height"),l.createElement(K,{span:"14",className:d},l.createElement(q.Item,{className:h,name:"lineHeight"},l.createElement(he,{disabled:a,size:"small",style:{width:"100%"},step:1,min:0,formatter:_n,parser:_n})))),l.createElement(me,{className:c},l.createElement(K,{span:"24",className:d},l.createElement(q.Item,{className:h,name:"text",style:{width:"100%"}},l.createElement(G6,{disabled:a,style:{width:"100%"},rows:3})))))),[n,t])},Ko="base-element-detail-group",X6=e=>{const{overflow:t}=(e==null?void 0:e.detail)||{};return{overflow:t}},U6=e=>{const{className:t,style:n,element:o,onChange:i,disabled:a}=e,s=H(Ko),c=H(Ko,"row"),d=H(Ko,"col"),r=H(Ko,"form-item"),h=z.useRef(null),u=en();z.useEffect(()=>{var m;const v=X6(o);(m=h.current)===null||m===void 0||m.setFieldsValue(v)},[o]);const f=m=>{i==null||i({detail:m})};return z.useMemo(()=>l.createElement("div",{style:n,className:fe(s,t)},l.createElement(q,{ref:h,style:n,className:s,onValuesChange:f},l.createElement(me,{className:c},l.createElement(K,{className:d,span:"10"},u.overflow),l.createElement(K,{span:"12",className:d},l.createElement(q.Item,{className:r,name:"overflow"},l.createElement(tt,{size:"small",disabled:a},l.createElement(tt.Option,{value:"visible"},u.visible),l.createElement(tt.Option,{value:"hidden"},u.hidden))))))),[n,t,u])},Z6="base-element-detail-attribute",Q6=e=>{const{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}=e,s=H(Z6);return z.useMemo(()=>l.createElement("div",{className:s},(t==null?void 0:t.type)==="circle"&&l.createElement(I6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="image"&&l.createElement(R6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="svg"&&l.createElement(H6,{element:t,onChange:n,disabled:o,getElementAsset:i,createElementAsset:a}),(t==null?void 0:t.type)==="group"&&l.createElement(U6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="path"&&l.createElement(O6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="rect"&&l.createElement(_6,{element:t,onChange:n,disabled:o}),(t==null?void 0:t.type)==="text"&&l.createElement($6,{element:t,onChange:n})),[o,t])},qo="base-element-content-attribute",J6=e=>{let{opacity:t}=(e==null?void 0:e.detail)||{};const{background:n}=(e==null?void 0:e.detail)||{};return typeof t=="number"&&t>=0&&t<=1||(t=1),{background:n,opacity:t}},K6=e=>{const{style:t,element:n,disabled:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=z.useRef(null),d=H(qo),r=H(qo,"row"),h=H(qo,"col"),u=H(qo,"form-item"),f=g=>{const p=g;i==null||i({detail:p})},m=g=>{i==null||i(g)},v=en();return z.useEffect(()=>{var g;const p=J6(n);(g=c.current)===null||g===void 0||g.setFieldsValue(p)},[n]),z.useMemo(()=>l.createElement(l.Fragment,null,l.createElement(q,{ref:c,style:t,className:d,onValuesChange:f},["rect","circle","text","group"].includes(n==null?void 0:n.type)&&l.createElement(me,{className:r},l.createElement(K,{className:h,span:"10"},v.background),l.createElement(K,{className:h,span:"14"},l.createElement(q.Item,{className:u,name:"background"},l.createElement(En,{elementSize:n?wn(n):void 0,disabled:o})))),l.createElement(me,{className:r},l.createElement(K,{className:h,span:"10"},v.opacity),l.createElement(K,{className:h,span:"14"},l.createElement(q.Item,{className:u,name:"opacity"},l.createElement(he,{disabled:o,size:"small",style:{width:"100%"},step:.1}))))),l.createElement(Q6,{element:n,disabled:o,onChange:m,getElementAsset:a,createElementAsset:s})),[v,n,o,i])},ei="base-element-shadow-attribute",q6=e=>{const{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}=(e==null?void 0:e.detail)||{};return{shadowColor:t,shadowBlur:n,shadowOffsetX:o,shadowOffsetY:i}},eu=e=>{const{style:t,element:n,disabled:o,onChange:i}=e,a=z.useRef(null),s=H(ei),c=H(ei,"row"),d=H(ei,"col"),r=H(ei,"form-item"),h=f=>{const m=f;i==null||i({detail:m})},u=en();return z.useEffect(()=>{var f;const m=q6(n);(f=a.current)===null||f===void 0||f.setFieldsValue(m)},[n]),z.useMemo(()=>l.createElement(q,{ref:a,style:t,className:s,onValuesChange:h},l.createElement(me,{className:c},l.createElement(K,{className:d,span:"14"},l.createElement(q.Item,{className:r,name:"shadowColor"},l.createElement(En,{elementSize:n?wn(n):void 0,disabled:o,disabledLinearGradient:!0,disabledRadialGradient:!0}))),l.createElement(K,{className:d,span:"10"},l.createElement(q.Item,{className:r,name:"shadowBlur"},l.createElement(he,{disabled:o,size:"small",style:{width:"100%"}})))),l.createElement(me,null,l.createElement(K,{className:d,span:"12"},l.createElement(q.Item,{className:r,name:"shadowOffsetX"},l.createElement(he,{disabled:o,size:"small",style:{width:"100%"},prefix:"X"}))),l.createElement(K,{className:d,span:"12"},l.createElement(q.Item,{className:r,name:"shadowOffsetY"},l.createElement(he,{disabled:o,size:"small",style:{width:"100%"},prefix:"Y"}))))),[u,n,o])},tu="base-element-detail",nu=xn(),ou=e=>{const{className:t,style:n,element:o,onChange:i,getElementAsset:a,createElementAsset:s}=e,c=en(),d=H(tu);let r=o;o&&(r=Object.assign(Object.assign({},o||{}),{detail:Object.assign(Object.assign({},nu),o==null?void 0:o.detail)}));const h=[{key:"basic-attribute",label:c.basicAttributes,children:l.createElement(b6,{element:r,disabled:!r,onChange:u=>{i==null||i(u)}})},{key:"border-attribute",label:c.borderAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?l.createElement(M6,{element:r,disabled:!r,onChange:u=>{i==null||i(u)}}):l.createElement(Jt,{image:Jt.PRESENTED_IMAGE_SIMPLE,description:!1})},{key:"content-attribute",label:c.contentAttribute,children:l.createElement(K6,{element:r,disabled:!r,onChange:u=>{i==null||i(u)},getElementAsset:a,createElementAsset:s})},{key:"shadow-attribute",label:c.shadowAttribute,children:["rect","circle","text","image","group"].includes(o==null?void 0:o.type)?l.createElement(eu,{element:r,disabled:!r,onChange:u=>{i==null||i(u)}}):l.createElement(Jt,{image:Jt.PRESENTED_IMAGE_SIMPLE,description:!1})}];return z.useMemo(()=>l.createElement("div",{style:n,className:fe(d,t)},l.createElement(La,{ghost:!0,items:h,size:"small",defaultActiveKey:h.map(u=>u.key)})),[r,c])},iu="LayoutDetail",Ga=()=>{const[e]=Da(iu);return e},vo="base-element-basic-attribute",Wt=e=>Ie.number(e*1)?be(e*1):e,au=e=>{const{className:t,style:n,layout:o,onChange:i,disabled:a,isGroupLayout:s}=e,c=z.useRef(null),d=H(vo),r=H(vo,"row"),h=H(vo,"col"),u=H(vo,"input"),f=H(vo,"form-item"),m=Ga(),v=g=>{i==null||i(g)};return z.useEffect(()=>{var g;const{x:p,y:w,w:S,h:A}=o||{},y={x:p,y:w,w:S,h:A};(g=c.current)===null||g===void 0||g.setFieldsValue(y)},[o]),z.useMemo(()=>l.createElement(q,{ref:c,style:n,className:fe(d,t),onValuesChange:v},!s&&l.createElement(me,{className:r},l.createElement(K,{span:10,className:h},l.createElement(q.Item,{className:f,name:"x"},l.createElement(he,{className:u,size:"small",placeholder:"X",prefix:"X",disabled:a,formatter:Wt,parser:Wt}))),l.createElement(K,{span:10,className:h},l.createElement(q.Item,{className:f,name:"y"},l.createElement(he,{className:u,size:"small",placeholder:"Y",prefix:"Y",disabled:a,formatter:Wt,parser:Wt})))),l.createElement(me,{className:r},l.createElement(K,{span:10,className:h},l.createElement(q.Item,{className:f,name:"w"},l.createElement(he,{className:u,size:"small",placeholder:"Width",prefix:m.w,disabled:a,formatter:Wt,parser:Wt}))),l.createElement(K,{span:10,className:h},l.createElement(q.Item,{className:f,name:"h"},l.createElement(he,{className:u,size:"small",placeholder:"Height",prefix:m.h,disabled:a,formatter:Wt,parser:Wt}))))),[m,a,o])},ti="base-element-content-attribute",su=e=>{const{background:t,overflow:n="visible"}=e||{};return{background:t,overflow:n}},ru=e=>{const{style:t,layout:n,disabled:o,onChange:i}=e,a=z.useRef(null),s=H(ti),c=H(ti,"row"),d=H(ti,"col"),r=H(ti,"form-item"),h=f=>{const m=f;i==null||i({detail:m})},u=Ga();return z.useEffect(()=>{var f;const m=su(n==null?void 0:n.detail);(f=a.current)===null||f===void 0||f.setFieldsValue(m)},[n]),z.useMemo(()=>l.createElement(l.Fragment,null,l.createElement(q,{ref:a,style:t,className:s,onValuesChange:h},l.createElement(me,{className:c},l.createElement(K,{className:d,span:"10"},u.background),l.createElement(K,{className:d,span:"14"},l.createElement(q.Item,{className:r,name:"background"},l.createElement(En,{elementSize:n?wn(n):void 0,disabled:o})))),l.createElement(me,{className:c},l.createElement(K,{className:d,span:"10"},u.overflow),l.createElement(K,{span:"12",className:d},l.createElement(q.Item,{className:r,name:"overflow"},l.createElement(tt,{size:"small",disabled:o},l.createElement(tt.Option,{value:"visible"},u.visible),l.createElement(tt.Option,{value:"hidden"},u.hidden))))))),[u,n,o,i])},lu="base-layout-detail",cu=e=>{const{className:t,style:n,layout:o,onChange:i,isGroupLayout:a}=e,s=Ga(),c=H(lu),d=[{key:"layout-attribute",label:s.layout,children:l.createElement(l.Fragment,null,l.createElement(au,{isGroupLayout:a,layout:o,onChange:r=>{i==null||i(r)}}),l.createElement(ru,{layout:o,onChange:r=>{i==null||i(r)}}))}];return z.useMemo(()=>l.createElement("div",{style:n,className:fe(c,t)},l.createElement(La,{ghost:!0,items:d,size:"small",defaultActiveKey:d.map(r=>r.key)})),[o,s])},du="ElementDesign",uu="base-element-design",hu=e=>{var t;const{className:n,style:o,element:i,onElementChange:a,getElementAsset:s,createElementAsset:c,layout:d,onLayoutChange:r}=e,[h]=Da(du),u=[{key:"element-detail",label:h.element,children:l.createElement(ou,{element:i,onChange:a,getElementAsset:s,createElementAsset:c})},{key:"layout-detail",label:h.layout,children:l.createElement(cu,{isGroupLayout:((t=d==null?void 0:d.operations)===null||t===void 0?void 0:t.position)==="relative",layout:d,onChange:r})},{key:"global",label:h.global,children:l.createElement("div",{style:{padding:20,textAlign:"center"}},"TODO")}];return z.useMemo(()=>l.createElement("div",{style:o,className:fe(H(uu),n)},l.createElement(Yl,{size:"small",defaultActiveKey:u[0].key,items:u})),[i,a,s,c,d,r,h])},Al=e=>{var t;const n={uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,children:[],operations:e.operations||{}};return e.type==="group"&&Array.isArray((t=e==null?void 0:e.detail)===null||t===void 0?void 0:t.children)&&e.detail.children.forEach(o=>{n.children.push(Al(o))}),n};function ze(e){const t=[];return e.elements.forEach(n=>{const o=Al(n);t.push(o)}),t}const fu=e=>({uuid:e.uuid,key:e.uuid,title:e.name||e.detail.text||e.type||"unamed",type:e.type,operations:e.operations||{}});function Po(e){const t=[];return e.elements.forEach(n=>{var o;if(n.type==="group"&&((o=n.extends)===null||o===void 0?void 0:o.isPage)===!0){const i=fu(n);t.push(i)}}),t}var mu=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};function Ut(e,t){if(e.length===0)return wt(t);const n=Fe(e,t.elements),o={elements:[],assets:t.assets};if((n==null?void 0:n.type)==="group"){const{w:i,h:a,detail:s}=n,{children:c}=s,d=mu(s,["children"]),r={x:0,y:0,w:i,h:a,detail:Object.assign({},d),operations:{position:"relative"}};o.elements=wt(c||[]),o.layout=r}return o}function gu(e,t,n){if(e.length>0){const o=Fe(e,n.elements);(o==null?void 0:o.type)==="group"&&(o.detail.children=t.elements)}}function vu(e,t,n){if(t.length>0&&(e!=null&&e.layout)){const o=e.layout,a=Fe(t,n.elements);(a==null?void 0:a.type)==="group"&&(Ie.w(o.w)&&(a.w=o.w),Ie.h(o.h)&&(a.h=o.h),a.detail=Object.assign(Object.assign({},a.detail),o.detail))}}function Tl(e){var t,n,o,i,a,s,c,d,r,h;let u=e;for(let w=0;w<e.elements.length;w++){const S=e.elements[w];if(S.type==="group"&&((t=S.extends)===null||t===void 0?void 0:t.isPage)===!0)return u}const f=_a(e.elements);let{x:m,y:v,w:g,h:p}=f;return Ie.x((n=e==null?void 0:e.layout)===null||n===void 0?void 0:n.x)&&(m=Math.min(m,(o=e.layout)===null||o===void 0?void 0:o.x)),Ie.y((i=e==null?void 0:e.layout)===null||i===void 0?void 0:i.y)&&(v=Math.min(v,(a=e.layout)===null||a===void 0?void 0:a.y)),Ie.w((s=e==null?void 0:e.layout)===null||s===void 0?void 0:s.w)&&(g=Math.max(g,(c=e.layout)===null||c===void 0?void 0:c.w)),Ie.h((d=e==null?void 0:e.layout)===null||d===void 0?void 0:d.h)&&(p=Math.max(p,(r=e.layout)===null||r===void 0?void 0:r.h)),e.elements.forEach(w=>{w.x-=m,w.y-=v}),u={elements:[{uuid:yt(),name:"Default page",type:"group",x:0,y:0,w:g,h:p,detail:Object.assign(Object.assign(Object.assign({},(h=e.layout)===null||h===void 0?void 0:h.detail),{children:e.elements}),g===0||p===0?{overflow:"visible"}:{}),extends:{isPage:!0}}],assets:e.assets},u}const Nl="dark",Ll="en-US",Dl="data";function pu(e){let t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});(e==null?void 0:e.defaultEditMode)==="page"&&(t=Tl(t));let n=[],o=t;const i=Po(t);e!=null&&e.defaultEditingGroupUUID&&(n=bt(e.defaultEditingGroupUUID,t.elements)),(e==null?void 0:e.defaultEditMode)==="page"&&n.length!==1&&i.length>0&&(n=[0]),o=Ut(n,t);const a=ze(o);return{localeCode:(e==null?void 0:e.defaultLocale)||Ll,themeMode:(e==null?void 0:e.defaultThemeMode)||Nl,editMode:(e==null?void 0:e.defaultEditMode)||Dl,data:t,editingData:o,editingDataPosition:n,elementTree:a,pageTree:i,selectedUUIDs:(e==null?void 0:e.defaultSelectedElementUUIDs)||[],scaleInfo:Object.assign({scale:1,from:"init"},(e==null?void 0:e.defaultScaleInfo)||{})}}function yu(e){const t=Object.assign({elements:[]},(e==null?void 0:e.data)||{});return{localeCode:Ll,themeMode:(e==null?void 0:e.themeMode)||Nl,editMode:(e==null?void 0:e.editMode)||Dl,data:Object.assign({elements:[]},(e==null?void 0:e.data)||{}),editingData:Ut([],t),editingDataPosition:[],elementTree:[],pageTree:[],selectedUUIDs:[],scaleInfo:Object.assign({scale:1,from:"control"},(e==null?void 0:e.scaleInfo)||{})}}function wu(e,t){var n,o,i;switch(t.type){case"update":return t!=null&&t.payload?Object.assign(Object.assign({},e),t==null?void 0:t.payload):e;case"updateThemeMode":return!((n=t==null?void 0:t.payload)===null||n===void 0)&&n.themeMode?Object.assign(Object.assign({},e),{themeMode:(o=t==null?void 0:t.payload)===null||o===void 0?void 0:o.themeMode}):e;case"updateEditingDataLayoutToTargetGroup":{if(!(!((i=t==null?void 0:t.payload)===null||i===void 0)&&i.editingData))return e;const{editingData:a}=t.payload;if(a.layout){const{editingDataPosition:s,data:c}=e;return vu(a,s,c),Object.assign(Object.assign({},e),{data:c,editingData:a})}return e}default:return e}}const Rt=z.createContext({state:yu(),dispatch:()=>{}}),bu=Rt.Provider,Eu={locale:"en-US",NavMenu:{about:"About @idraw/studio",file:"File",importJSONFile:"Import JSON file",exportJSONFile:"Export JSON file",exportImage:"Export image",preferences:"Preferences",material:"Material",rect:"Rect",circle:"Circle",text:"Text",image:"Image",html:"HTML",svg:"SVG",group:"Group",devicePixelRatio:"Device pixel ratio",materialTempate:"Material templates"},Toolbar:{layers:"Layers",ruler:"Ruler",attributes:"Attributes",hand:"Hand tool",centerContent:"Center content",redo:"Redo",undo:"Undo"},PanelPage:{pages:"Pages",addPage:"Add page",overview:"Overview",pcPageTemplates:"PC page templates",mobilePageTemplates:"Mobile page templates"},TemplatePreview:{add:"Add",cancel:"Cancel"},contextMenu:{copy:"Copy",paste:"Paste",cut:"Cut",delete:"Delete"}},Su={locale:"zh-CN",NavMenu:{about:"关于 @idraw/studio",file:"文件",importJSONFile:"导入JSON文件",exportJSONFile:"导出JSON文件",exportImage:"导出图片",preferences:"预设",material:"物料",rect:"矩形",circle:"圆形",text:"文本",image:"图片",html:"HTML片段",svg:"SVG片段",group:"群组",devicePixelRatio:"设备像素比例",materialTempate:"物料模板"},Toolbar:{layers:"图层",ruler:"标尺",attributes:"属性",hand:"拖拽工具",centerContent:"内容居中",redo:"重做",undo:"撤销"},PanelPage:{pages:"页面",addPage:"添加PC页面",overview:"预览",pcPageTemplates:"PC页面模板",mobilePageTemplates:"移动页面模板"},TemplatePreview:{add:"添加",cancel:"取消"},contextMenu:{copy:"复制",paste:"粘贴",cut:"剪切",delete:"删除"}},Cu={"en-US":Eu,"zh-CN":Su},An=e=>{const{state:t}=z.useContext(Rt),n=t.localeCode;return[z.useMemo(()=>{const a=Cu[n][e];return Object.assign({},a)},[n,e])]},xu=()=>{const[e]=An("Toolbar");return e},Mu=e=>{const{style:t,sharedEvent:n,sharedStore:o}=e,i=xu(),[a,s]=z.useState(!1),[c,d]=z.useState(!1),r={size:"small",type:"text"};z.useEffect(()=>{const u=o.getStatic("snapshotRecorder"),f=p=>{s(p.canRedo),d(p.canUndo)},m=p=>{s(p.canRedo),d(p.canUndo)},v=p=>{s(p.canRedo),d(p.canUndo)},g=()=>{s(!1),d(!1)};return u&&(u.on("do",f),u.on("undo",m),u.on("redo",v),u.on("clear",g)),()=>{u&&(u.off("do",f),u.off("undo",m),u.off("redo",v),u.off("clear",g))}},[]);const h=[{key:"redo",title:i.redo,button:l.createElement(Gc,{style:{fontSize:14}}),disabled:!a,onClick:()=>{n.trigger("redo")}},{key:"undo",title:i.undo,button:l.createElement(Jc,{style:{fontSize:14}}),disabled:!c,onClick:()=>{n.trigger("undo")}}];return z.useMemo(()=>l.createElement("div",{style:Object.assign(Object.assign({},t),{width:100,display:"flex",flexDirection:"row"})},h.map((u,f)=>l.createElement(gn,{key:f,placement:"top",title:u.title},l.createElement(ke,Object.assign({},r,{disabled:u.disabled,style:{width:28,textAlign:"center",justifyContent:"center",alignItems:"center",display:"inline-flex"},key:f,onClick:m=>{m.preventDefault(),u.onClick()}}),u.button)))),[i,a,c])},ni="mod-toolbar",zu=()=>{const[e]=An("Toolbar");return e},Iu=e=>{const{className:t,style:n,openLeftSider:o,openRightSider:i,onClickToggleLayer:a,onClickToggleSetting:s,sharedEvent:c,sharedStore:d}=e,r={fontSize:16},h=H(ni),u=H(ni,"left"),f=H(ni,"right"),m=H(ni,"btn"),[v,g]=z.useState(!1),[p,w]=z.useState(!0),S=zu();z.useEffect(()=>{const y=d.getStatic("idraw");p===!0?y==null||y.enable("ruler"):y==null||y.disable("ruler")},[p]),z.useEffect(()=>{const y=d.getStatic("idraw");y==null||y.setMode(v?"drag":"select")},[v]);const A={size:"small",className:m,shape:"default"};return z.useMemo(()=>l.createElement("div",{style:n,className:fe(h,t)},l.createElement("div",{className:u}),l.createElement("div",{className:f},l.createElement(gn,{title:S.layers},l.createElement(ke,Object.assign({},A,{type:o?"primary":"default",icon:l.createElement(Vc,{style:r}),onClick:a}))),l.createElement(gn,{title:S.attributes},l.createElement(ke,Object.assign({},A,{type:i?"primary":"default",icon:l.createElement(Zc,{style:r}),onClick:s}))),l.createElement(gn,{title:S.ruler},l.createElement(ke,Object.assign({},A,{type:p?"primary":"default",icon:l.createElement(Xc,{style:Object.assign(Object.assign({},r),{fontSize:20})}),onClick:()=>{w(!p)}}))),l.createElement(gn,{title:S.hand},l.createElement(ke,Object.assign({},A,{type:v?"primary":"default",icon:l.createElement(Pc,{style:Object.assign(Object.assign({},r),{fontSize:20})}),onClick:()=>{g(!v)}}))),l.createElement(gn,{title:S.centerContent},l.createElement(ke,Object.assign({},A,{type:"text",icon:l.createElement(mc,{style:Object.assign(Object.assign({},r),{fontSize:20})}),onClick:()=>{const y=d.getStatic("idraw");y==null||y.centerContent()}}))),l.createElement(Mu,{sharedEvent:c,sharedStore:d}))),[o,i,a,s,v,p,S])},po="mod-panel-layer",Au=e=>{const{className:t,style:n,height:o,sharedStore:i,sharedEvent:a,reverseTree:s,useContextMenuOptions:c}=e,{state:d,dispatch:r}=z.useContext(Rt),{elementTree:h,selectedUUIDs:u,editingData:f}=d,m=z.useRef(null),v=H(po),g=H(po,"content"),p=H(po,"header"),w=H(po,"header","title"),S=H(po,"header","btn"),[A,y]=c({sharedEvent:a,sharedStore:i}),I=()=>{if(d.editingDataPosition.length===0)return"";const P=Fe(d.editingDataPosition,d.data.elements);return(P==null?void 0:P.name)||(P==null?void 0:P.type)||""},b=P=>{const R=i.getStatic("idraw");R==null||R.selectElementsByPositions(P)};z.useEffect(()=>{a.on("scrollToLayer",({uuid:P})=>{var R;P&&((R=m.current)===null||R===void 0||R.scrollTo({key:P,align:"top"}))})},[]),z.useEffect(()=>{if(u[0]&&u.length===1){const R=ja(u[0],f.elements).map(_=>_.uuid);u[0]&&R.push(u[0])}},[u,f]);const E=()=>{a.trigger("resetEditingView",{type:"back-root",position:null})},C=()=>{a.trigger("resetEditingView",{type:"back-one",position:null})},V=32,T=o-V;return z.useMemo(()=>Array.isArray(h)&&h.length>0?l.createElement("div",{style:n,className:fe(v,t),onContextMenu:P=>{P.preventDefault()}},l.createElement("div",{className:p,style:{height:V}},l.createElement(ke,{className:S,size:"small",icon:l.createElement(Er,null),disabled:!(d.editingDataPosition.length>0),onClick:E}),l.createElement(ke,{className:S,size:"small",icon:l.createElement(zr,null),disabled:!(d.editingDataPosition.length>0),onClick:C}),l.createElement("span",{className:w},I())),l.createElement(oo,{menu:{items:A},trigger:["contextMenu"]},l.createElement("div",{className:g},l.createElement(zl,{ref:m,height:T,reverse:s,treeData:h,selectedKeys:u,onTitleChange:({uuid:P,value:R})=>{Kt(P,{name:R},d.editingData.elements);const _=ze(f);r({type:"update",payload:{editingData:Object.assign({},f),elementTree:_}})},onOperationToggle:({uuid:P,operations:R})=>{Kt(P,{operations:R},d.editingData.elements);const _=ze(f);r({type:"update",payload:{editingData:Object.assign({},f),elementTree:_}})},onSelect:P=>{u!=null&&u.includes(P.uuids[0])||b(P.positions)},onContextMenu:P=>{if(!(u!=null&&u.includes(P.uuids[0]))){b(P.positions);const R=Fe(P.positions[0],f.elements);R&&y({selectedElements:[R]})}},onDrop:P=>{const{elements:R}=Pi(f.elements,{from:P.from,to:P.to}),_=Fe(P.to,f.elements);_&&(P.to.length===P.to.length||(_.x=0,_.y=0));const Z=ze(f);r({type:"update",payload:{editingData:Object.assign(Object.assign({},f),{elements:[...R]}),elementTree:Z}})},onDelete:({uuid:P})=>{a.trigger("deleteElement",{uuid:P})},onGoToGroup:P=>{a.trigger("resetEditingView",{type:"go-to-next-group",position:P.position})}})))):l.createElement("div",{style:n,className:fe(v,t),onContextMenu:P=>{P.preventDefault()}},l.createElement("div",{className:p},"..."),l.createElement("div",{className:g},l.createElement("div",{style:{padding:"20px 0",textAlign:"center"}},"Empty"))),[T,h,u,f.elements,d.editingDataPosition,A])};var Tu=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const oi="item",Nu=e=>{const{parentModName:t,className:n,style:o,width:i,height:a,onMount:s,item:c,onSelect:d,onPreview:r}=e,h=Tu(e,["parentModName","className","style","width","height","onMount","item","onSelect","onPreview"]),u=z.useRef(null),f=z.useRef(null),m=z.useRef(c.element),v=H(t,oi),g=H(t,oi,"name"),p=H(t,oi,"action"),w=H(t,oi,"alert"),[S,A]=z.useState(!1),[y,I]=z.useState(null);return z.useEffect(()=>(i>0&&a>0&&u.current&&(f.current||(f.current=new Ha(u.current,{width:i,height:a,devicePixelRatio:1}))),()=>{const b=f.current;b==null||b.destroy(),f.current=null}),[]),z.useEffect(()=>{const b=f.current;if(b){b.setMode("readOnly"),b.$offBoardWatcherEvents();const{element:E,staticResource:C}=c;E?(b.setData({elements:[E]}),b.centerContent()):C&&(A(!0),I(null),window.fetch(C).then(V=>V.json()).then(V=>{m.current=V,b.setData({elements:[V]}),b.centerContent()}).catch(V=>{const T=[V.name,V.message].join(", ");I(T)}).finally(()=>{A(!1)})),s==null||s({idraw:b})}},[c]),z.useMemo(()=>l.createElement(mr,{spinning:S},l.createElement("div",Object.assign({style:Object.assign(Object.assign({},o),{width:i,minHeight:a}),className:fe(v,n)},h),l.createElement(gn,{placement:"top",title:c.name},l.createElement("div",{className:g},c.name)),l.createElement("div",{ref:u}),l.createElement("div",{className:p},l.createElement(ke.Group,{size:"large"},l.createElement(ke,{size:"large",type:"primary"},l.createElement(Pa,{style:{fontSize:20},onClick:()=>{const b=m.current;b&&(b.name=c.name),r({element:b})}})),l.createElement(ke,{size:"large",type:"primary"},l.createElement(zc,{style:{fontSize:20},onClick:()=>{const b=m.current;b&&(b.name=c.name),d({element:b})}})))),y&&l.createElement($l,{className:w,type:"error",message:y,banner:!0}))),[S,y,c,r])},ar="detail",Lu=e=>{const{data:t,canvasWidth:n,canvasHeight:o,parentModName:i,handler:a}=e,s=z.useRef(null),c=z.useRef(null),d=H(i,ar),r=H(i,ar,"canvas");return z.useImperativeHandle(a,()=>({resetData:h=>{var u,f;(u=c.current)===null||u===void 0||u.setData(h),(f=c.current)===null||f===void 0||f.centerContent()}}),[]),z.useEffect(()=>{if(!c.current&&s.current){const h={width:n,height:o,devicePixelRatio:window.devicePixelRatio},u=new Ha(s.current,h);u.setData(t),u.centerContent(),c.current=u}return()=>{c.current&&(c.current.destroy(),c.current=null)}},[]),l.createElement("div",{className:d},l.createElement("div",{ref:s,className:r}))};var Du=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};const yo="mod-template-preview",Rl={content:{width:490},header:{padding:"10px 20px"},body:{padding:"0"}},Pl=e=>{const{className:t,style:n,getTemplates:o,onSelect:i,afterChangePagination:a}=e,s=H(yo),c=H(yo,"list"),d=H(yo,"footer"),[r,h]=z.useState([]),[u,f]=z.useState(1),[m,v]=z.useState(8),[g,p]=z.useState(0),[w,S]=gr.useModal(),A=z.useRef(null),y=z.useRef(null),[I]=An("TemplatePreview"),b=C=>Du(void 0,void 0,void 0,function*(){var V;(V=A.current)===null||V===void 0||V.scrollTo(0,0);const T=yield o==null?void 0:o(C);Array.isArray(T==null?void 0:T.list)&&(h([...T.list]),f(T.current),v(T.pageSize),p(T.total))}),E=C=>{const{element:V}=C,T={elements:[]};V&&T.elements.push(V);const P=24,R=36,_=44,Z=Math.min(720,window.innerWidth-P*2),W=Math.min(540,window.innerHeight-P*10-R-_),D=Z+P*2,k=W+P*2+R+_,j=w.confirm({icon:null,width:D,styles:{content:{width:D,minHeight:k,padding:P}},closable:!0,title:(V==null?void 0:V.name)||"Unamed",content:l.createElement(Lu,{data:T,parentModName:yo,handler:y,canvasWidth:Z,canvasHeight:W}),okText:I.add,onOk:()=>{i({element:V})},cancelText:I.cancel,onCancel:()=>{j.destroy()}})};return z.useEffect(()=>{b({pageSize:m,current:u}).then(()=>{}).catch(()=>{})},[]),z.useMemo(()=>l.createElement("div",{ref:A,style:n,className:fe(s,t)},l.createElement("div",{className:c},r.map((C,V)=>l.createElement(Nu,{key:V,width:200,height:150,parentModName:yo,item:C,onSelect:i,onPreview:T=>{E(Object.assign(Object.assign({},T),{locale:I}))}}))),l.createElement("div",{className:d},l.createElement(Xl,{size:"small",pageSize:m,current:u,total:g,onChange:C=>{b({current:C,pageSize:m}),a==null||a()}})),S),[I,r,m,u,g,w,S,E])},Ru={uuid:"8227861e-9ffd-c90b-6fe3-1959958afd05",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"05fd9c0a-63dc-fb63-2d50-2d8ea9c70280",name:"Splash",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#0D6EFD",borderRadius:30,borderDash:[],boxSizing:"border-box",opacity:1,overflow:"hidden",children:[]},operations:{}},{uuid:"737b2596-c70c-d90c-70d4-55af24cb1d61",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#FFFFFF",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"b8cde2a5-c0f5-ecf1-8d6e-8fab7a12b85c",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#FFFFFF",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"acadb1ff-7274-ae5c-a71e-9d4e4c18ea80",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#FFFFFF",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"d8b651a8-dad9-cfbf-7a9b-abe5983742f6",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"bbea2aa2-38ac-70b0-1355-110a4fb61484",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#FFFFFF",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"0c188e29-8a38-c84d-7286-b96508908fe5",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#FFFFFF",opacity:1},operations:{}},{uuid:"ecb52e4d-2ecb-b88d-de13-708870f0061f",name:"Loading...",x:121,y:385,w:133,h:42,angle:0,type:"text",detail:{text:"Loading...",fontFamily:"Geometr415 Blk BT",fontSize:34,textAlign:"left",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:42,color:"#FFFFFF",opacity:1},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},Pu={uuid:"3f827bd7-6a3a-e39c-7ec9-098895fc9f26",name:"Page 1",x:0,y:0,w:375,h:812,angle:0,type:"group",detail:{background:"#FFFFFF",borderRadius:30,borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"4c359376-7338-07dd-d533-fa43b329f948",name:"Border",x:332.3330078125,y:19.333343505859375,w:22,h:11.333333015441895,angle:0,type:"rect",detail:{background:"transparent",borderRadius:2.6666667461395264,borderDash:[],boxSizing:"border-box",borderColor:"#1B1E28",borderWidth:1,opacity:.3499999940395355},operations:{}},{uuid:"baabee79-f1c0-f861-a3f0-3325d6d593c2",name:"Cap",x:355.3330078125,y:23.0000102519989,w:1.328037977218628,h:4,angle:0,type:"path",detail:{commands:[{type:"M",params:[0,0]},{type:"L",params:[0,4]},{type:"C",params:[.8047311305999756,3.6612234115600586,1.328037977218628,2.8731331825256348,1.328037977218628,2]},{type:"C",params:[1.328037977218628,1.1268666982650757,.8047311305999756,.33877652883529663,0,0]}],fillRule:"nonzero",fill:"#1B1E28",originX:0,originY:0,originW:1.328037977218628,originH:4},operations:{}},{uuid:"89b12005-beea-f2a6-a94b-7bfb9160bdc7",name:"Capacity",x:334.3330078125,y:21.333343386650085,w:18,h:7.333333492279053,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:1.3333333730697632,borderDash:[],boxSizing:"center-line",opacity:1},operations:{}},{uuid:"0abc02b1-addf-1816-5e57-cb0e3df44727",name:"Wifi",x:312.5,y:20,w:14.743558883666992,h:11,angle:0,type:"path",detail:{commands:[{type:"M",params:[7.3721818923950195,2.2844772338867188]},{type:"C",params:[9.511347770690918,2.2845747470855713,11.568714141845703,3.138685703277588,13.119054794311523,4.670278072357178]},{type:"C",params:[13.235798835754395,4.788522720336914,13.422402381896973,4.7870306968688965,13.537383079528809,4.666934013366699]},{type:"L",params:[14.653355598449707,3.4966044425964355]},{type:"C",params:[14.711575508117676,3.4356915950775146,14.744035720825195,3.3531816005706787,14.743552207946777,3.2673325538635254]},{type:"C",params:[14.743069648742676,3.181483745574951,14.70968246459961,3.0993738174438477,14.65078067779541,3.039172649383545]},{type:"C",params:[10.581634521484375,-1.0130575895309448,4.16208553314209,-1.0130575895309448,.09293898940086365,3.039172649383545]},{type:"C",params:[.03399458900094032,3.0993292331695557,.0005502633284777403,3.1814138889312744,6729410415573511e-21,3.2672629356384277]},{type:"C",params:[-.0005368044367060065,3.35311222076416,.03186527639627457,3.4356472492218018,.09004286676645279,3.4966044425964355]},{type:"L",params:[1.206337332725525,4.666934013366699]},{type:"C",params:[1.321244239807129,4.787211894989014,1.5079920291900635,4.788704872131348,1.6246660947799683,4.670278072357178]},{type:"C",params:[3.175203800201416,3.138585090637207,5.23280668258667,2.2844717502593994,7.3721818923950195,2.2844772338867188]},{type:"Z",params:[]},{type:"M",params:[7.3721818923950195,6.0920610427856445]},{type:"C",params:[8.547514915466309,6.091986179351807,9.680904388427734,6.5459394454956055,10.5521240234375,7.365714073181152]},{type:"C",params:[10.669960975646973,7.482059001922607,10.855585098266602,7.479536533355713,10.970453262329102,7.360029697418213]},{type:"L",params:[12.085138320922852,6.189700126647949]},{type:"C",params:[12.143839836120605,6.128313064575195,12.176411628723145,6.0450358390808105,12.175564765930176,5.958500385284424]},{type:"C",params:[12.174717903137207,5.871964931488037,12.140523910522461,5.789393424987793,12.080633163452148,5.729259014129639]},{type:"C",params:[9.427593231201172,3.1648504734039307,5.319023132324219,3.1648504734039307,2.665982961654663,5.729259014129639]},{type:"C",params:[2.6060545444488525,5.789392471313477,2.5718629360198975,5.872005462646484,2.5710763931274414,5.958569049835205]},{type:"C",params:[2.5702900886535645,6.045132637023926,2.6029746532440186,6.128401756286621,2.661799669265747,6.189700126647949]},{type:"L",params:[3.776163101196289,7.360029697418213]},{type:"C",params:[3.8910317420959473,7.479536533355713,4.076655387878418,7.482059001922607,4.194491863250732,7.365714073181152]},{type:"C",params:[5.065135955810547,6.546481132507324,6.197626113891602,6.092566967010498,7.3721818923950195,6.0920610427856445]},{type:"Z",params:[]},{type:"M",params:[9.604713439941406,8.653889656066895]},{type:"C",params:[9.60641860961914,8.740668296813965,9.573588371276855,8.824332237243652,9.513973236083984,8.885128021240234]},{type:"L",params:[7.585799217224121,10.907123565673828]},{type:"C",params:[7.529276371002197,10.966548919677734,7.45221471786499,10.999992370605469,7.37180757522583,10.999992370605469]},{type:"C",params:[7.291400909423828,10.999992370605469,7.214339256286621,10.966548919677734,7.157816410064697,10.907123565673828]},{type:"L",params:[5.229321002960205,8.885128021240234]},{type:"C",params:[5.169746398925781,8.824286460876465,5.1369733810424805,8.740596771240234,5.138739585876465,8.653817176818848]},{type:"C",params:[5.140506267547607,8.567038536071777,5.1766557693481445,8.48486328125,5.23865270614624,8.4266939163208]},{type:"C",params:[6.470056533813477,7.344422340393066,8.273558616638184,7.344422340393066,9.504962921142578,8.4266939163208]},{type:"C",params:[9.566916465759277,8.484910011291504,9.603007316589355,8.567111015319824,9.604713439941406,8.653889656066895]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:14.743558883666992,originH:11},operations:{}},{uuid:"4335bf98-fdc8-1d55-2227-650d8e1866db",name:"Cellular Connection",x:290.3846130371094,y:20,w:16.346529006958008,h:10.66667652130127,angle:0,type:"path",detail:{commands:[{type:"M",params:[15.384990692138672,0]},{type:"L",params:[14.423452377319336,0]},{type:"C",params:[13.892409324645996,0,13.4619140625,.44771522283554077,13.4619140625,1]},{type:"L",params:[13.4619140625,9.666666984558105]},{type:"C",params:[13.4619140625,10.218952178955078,13.892409324645996,10.666666984558105,14.423452377319336,10.666666984558105]},{type:"L",params:[15.384990692138672,10.666666984558105]},{type:"C",params:[15.916033744812012,10.666666984558105,16.346529006958008,10.218952178955078,16.346529006958008,9.666666984558105]},{type:"L",params:[16.346529006958008,1]},{type:"C",params:[16.346529006958008,.44771522283554077,15.916033744812012,0,15.384990692138672,0]},{type:"Z",params:[]},{type:"M",params:[9.936147689819336,2.333343505859375]},{type:"L",params:[10.897686004638672,2.333343505859375]},{type:"C",params:[11.428729057312012,2.333343505859375,11.859225273132324,2.7810587882995605,11.859225273132324,3.333343505859375]},{type:"L",params:[11.859225273132324,9.666677474975586]},{type:"C",params:[11.859225273132324,10.218961715698242,11.428729057312012,10.66667652130127,10.897686004638672,10.66667652130127]},{type:"L",params:[9.936147689819336,10.66667652130127]},{type:"C",params:[9.405104637145996,10.66667652130127,8.974609375,10.218961715698242,8.974609375,9.666677474975586]},{type:"L",params:[8.974609375,3.333343505859375]},{type:"C",params:[8.974609375,2.7810587882995605,9.405104637145996,2.333343505859375,9.936147689819336,2.333343505859375]},{type:"Z",params:[]},{type:"M",params:[6.410256385803223,4.666666507720947]},{type:"L",params:[5.4487175941467285,4.666666507720947]},{type:"C",params:[4.917674541473389,4.666666507720947,4.487179279327393,5.114381790161133,4.487179279327393,5.666666507720947]},{type:"L",params:[4.487179279327393,9.666666030883789]},{type:"C",params:[4.487179279327393,10.218951225280762,4.917674541473389,10.666666030883789,5.4487175941467285,10.666666030883789]},{type:"L",params:[6.410256385803223,10.666666030883789]},{type:"C",params:[6.9412994384765625,10.666666030883789,7.371794700622559,10.218951225280762,7.371794700622559,9.666666030883789]},{type:"L",params:[7.371794700622559,5.666666507720947]},{type:"C",params:[7.371794700622559,5.114381790161133,6.9412994384765625,4.666666507720947,6.410256385803223,4.666666507720947]},{type:"Z",params:[]},{type:"M",params:[1.9230769872665405,6.666666507720947]},{type:"L",params:[.9615384936332703,6.666666507720947]},{type:"C",params:[.43049541115760803,6.666666507720947,0,7.114381790161133,0,7.666666507720947]},{type:"L",params:[0,9.666666030883789]},{type:"C",params:[0,10.218951225280762,.43049541115760803,10.666666030883789,.9615384936332703,10.666666030883789]},{type:"L",params:[1.9230769872665405,10.666666030883789]},{type:"C",params:[2.45412015914917,10.666666030883789,2.884615421295166,10.218951225280762,2.884615421295166,9.666666030883789]},{type:"L",params:[2.884615421295166,7.666666507720947]},{type:"C",params:[2.884615421295166,7.114381790161133,2.45412015914917,6.666666507720947,1.9230769872665405,6.666666507720947]},{type:"Z",params:[]}],fillRule:"evenodd",fill:"#1B1E28",originX:0,originY:0,originW:16.346529006958008,originH:10.66667652130127},operations:{}},{uuid:"38d6aa8d-fd1a-963a-75b0-19645372ef26",name:"Time",x:21,y:15,w:54,h:18,angle:0,type:"text",detail:{text:"9:41",fontFamily:"SF Pro Text",fontSize:15,textAlign:"center",verticalAlign:"top",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",color:"#1B1E28",opacity:1},operations:{}},{uuid:"5f97cb86-ef58-f353-9cb8-769f1b5aed90",name:"Home Indicator",x:121,y:799,w:134,h:5,angle:0,type:"rect",detail:{background:"#1B1E28",borderRadius:100,borderDash:[],boxSizing:"center-line",borderColor:"transparent",borderWidth:0,opacity:1},operations:{}}],overflow:"hidden"},operations:{}},Ou=e=>({list:[{name:"Blank Page",element:Pu},{name:"Loading Page",element:Ru}],pageSize:8,current:1,total:2}),ku="add-page-button",_u=e=>{const{className:t,style:n,parentModName:o,inPageOverview:i,sharedEvent:a,sharedStore:s,getPageTemplates:c,disabled:d}=e,r=H(o,ku),[h]=An("PanelPage"),{getContainer:u}=z.useContext(Sn),[f,m]=z.useState(!1),[v,g]=Do.useMessage();return z.useMemo(()=>l.createElement(l.Fragment,null,l.createElement(ke,{size:"small",type:"text",style:n,className:fe(r,t),disabled:d,onClick:p=>{p.preventDefault(),p.stopPropagation(),m(!0)}},l.createElement(kc,{style:{fontSize:18}})),l.createElement(vr,{title:h.addPage,placement:"left",onClose:()=>{m(!1)},styles:Rl,open:f,getContainer:u},l.createElement(Pl,{getTemplates:c||Ou,onSelect:({element:p})=>{if(!p){v==null||v.error("Unexpected data");return}const w=ka(p),S=s.getStatic("idraw"),A=S==null?void 0:S.getData(),y={x:0,y:0};if(S&&Array.isArray(A==null?void 0:A.elements)){const I=_a(A.elements);y.x=I.x,y.y=I.y}a.trigger("addPage",{element:Object.assign(Object.assign({},w),y),inPageOverview:i}),m(!1)}})),g),[n,t,i,h,f])},jn="mod-panel-page",un="page-tree",Vn="element-tree",sr=1,rr=3,ju=e=>{const{className:t,style:n,height:o,defaultSelectedElementUUIDs:i=[],sharedStore:a,sharedEvent:s,useContextMenuOptions:c,getPageTemplates:d,reverseTree:r}=e,{state:h,dispatch:u}=z.useContext(Rt),{pageTree:f,elementTree:m,selectedUUIDs:v,editingData:g,editingDataPosition:p,data:w}=h,S=z.useRef(null),A=z.useRef(null),y=32,[I,b]=z.useState([un,Vn]),[E,C]=z.useState(0),[V,T]=z.useState(0),[P,R]=z.useState(i),_=H(jn),Z=H(jn,"content"),W=H(jn,"header"),D=H(jn,"header","title"),k=H(jn,"header","btn"),[j,M]=c({sharedEvent:s,sharedStore:a}),[$]=An("PanelPage"),[B,N]=z.useState(!1),U=z.useRef(B),G=z.useRef([]),x=()=>{const Y=[],J=Fe([p[0]],h.data.elements);return J!=null&&J.uuid&&Y.push(J.uuid),Y},[L,O]=z.useState(x());z.useEffect(()=>{const Y=a.getStatic("idraw"),J=ae=>{if(B===!0){const{uuids:de=[]}=ae;O([...de])}};return Y==null||Y.on(Ne.SELECT,J),()=>{Y==null||Y.off(Ne.SELECT,J)}},[B]),z.useEffect(()=>{var Y;if(p.length===1&&f.length>0){const J=(Y=f[p[0]])===null||Y===void 0?void 0:Y.uuid;J&&!L.includes(J)&&O([J])}},[p]);const F=Y=>{const J=sr+rr;if(Y.includes(un)&&Y.includes(Vn)){const ae=o-y*2;C(ae*sr/J),T(ae*rr/J)}else if(Y.includes(un)&&!Y.includes(Vn)){const ae=o-y*2;C(ae),T(0)}else if(!Y.includes(un)&&Y.includes(Vn)){const ae=o-y*2;C(0),T(ae)}else C(0),T(0)};z.useEffect(()=>{const Y=a==null?void 0:a.getStatic("idraw");let J=[];if(B===!0)s.trigger("resetEditingView",{type:"back-root",position:null}),O([]),J=[un],b(J),Y==null||Y.disable("selectInGroup");else{const ae=[];f.length>0&&(ae.push(f[0].uuid),s.trigger("resetEditingView",{type:"go-to-page",position:r===!0?[f.length>0?f.length-1:0]:[0]})),O(ae),Y==null||Y.enable("selectInGroup"),J=[un,Vn],b(J)}F(J)},[o,B]),z.useEffect(()=>{U.current=B,s.trigger("switchPageOverview",{isPageOverview:!!B})},[B]);const Q=()=>{if(p.length===0)return"";const Y=Fe(p,h.data.elements);return(Y==null?void 0:Y.name)||(Y==null?void 0:Y.type)||""},oe=Y=>{const J=a.getStatic("idraw");J==null||J.selectElementsByPositions(Y)};z.useEffect(()=>{const Y=({uuid:J})=>{var ae;J&&((ae=S.current)===null||ae===void 0||ae.scrollTo({key:J,align:"top"}))};return s.on("scrollToLayer",Y),()=>{s.off("scrollToLayer",Y)}},[]),z.useEffect(()=>{var Y;v.length===1&&G.current[0]!==v[0]&&((Y=S.current)===null||Y===void 0||Y.scrollTo({key:v[0],align:"auto"})),G.current=[...v]},[v]),z.useEffect(()=>{if(v[0]&&v.length===1){const J=ja(v[0],g.elements).map(de=>de.uuid);v[0]&&J.push(v[0]);const ae=[...P];J.forEach(de=>{ae.includes(de)||ae.push(de)}),R(ae)}},[v,g]);const ne=Y=>{Y.stopPropagation(),p.length>1&&s.trigger("resetEditingView",{type:"go-to-group",position:[p[0]]})},le=Y=>{Y.stopPropagation(),s.trigger("resetEditingView",{type:"back-one",position:null})},ve=[{key:un,collapsible:B?"disabled":void 0,label:l.createElement("div",{className:W,style:{height:y}},l.createElement("div",{style:{display:"flex"}},l.createElement("span",{style:{marginRight:10}},$.pages),l.createElement(ke,{className:k,style:{marginLeft:"10px"},size:"small",icon:l.createElement(Bc,null),type:B?"primary":"default",onClick:Y=>{Y.stopPropagation(),N(!B)}})),l.createElement("div",{style:{display:"flex"}},l.createElement(_u,{disabled:B,inPageOverview:B,parentModName:jn,sharedEvent:s,sharedStore:a,getPageTemplates:d}))),children:l.createElement("div",{className:Z,style:{height:E}},f.length>0?l.createElement(v6,{ref:A,height:E,reverse:r,treeData:f,selectedKeys:L,onTitleChange:({uuid:Y,value:J})=>{Kt(Y,{name:J},w.elements);const de={pageTree:Po(w),data:Object.assign({},w)};if(p.length===0){de.editingData=Object.assign({},w);const Ot=ze(w);de.elementTree=Ot}u({type:"update",payload:de})},onSelect:Y=>{if((Y==null?void 0:Y.positions.length)===1){const J=a.getStatic("idraw");if(J==null||J.trigger(Ne.SELECT,{uuids:[]}),J==null||J.trigger(Ne.CLEAR_SELECT),B){L!=null&&L.includes(Y.uuids[0])||(oe(Y.positions),O([Y.uuids[0]]));return}s.trigger("resetEditingView",{type:"go-to-page",position:Y.positions[0]});const ae=[],de=Fe(Y.positions[0],h.data.elements);de!=null&&de.uuid&&(ae.push(de.uuid),O(ae))}},onDrop:Y=>{if(!(Y.from.length===1&&Y.to.length===1))return;const{elements:J}=Pi(w.elements,{from:Y.from,to:Y.to}),de={pageTree:Po(w),data:Object.assign(Object.assign({},w),{elements:J})};if(p.length===0){de.editingData=Object.assign(Object.assign({},w),{elements:J});const Ot=ze(w);de.elementTree=Ot}u({type:"update",payload:de})},onDelete:({uuid:Y})=>{s.trigger("deletePage",{uuid:Y})}}):l.createElement(Jt,{image:Jt.PRESENTED_IMAGE_SIMPLE,description:!1}))},{key:Vn,collapsible:B?"disabled":void 0,label:l.createElement("div",{className:W,style:{height:y}},l.createElement("div",{style:{display:"inline-flex"}},l.createElement(ke,{className:k,size:"small",icon:l.createElement(Er,null),disabled:!(p.length>1),onClick:ne}),l.createElement(ke,{className:k,size:"small",icon:l.createElement(zr,null),disabled:!(p.length>1),onClick:le})),l.createElement("span",{className:D},Q())),children:l.createElement(oo,{menu:{items:j},trigger:["contextMenu"]},l.createElement("div",{className:Z,style:{height:V}},m.length>0?l.createElement(zl,{ref:S,height:V,reverse:r,treeData:m,selectedKeys:v,onTitleChange:({uuid:Y,value:J})=>{Kt(Y,{name:J},h.editingData.elements);const ae=ze(g);u({type:"update",payload:{editingData:Object.assign({},g),elementTree:ae}})},onOperationToggle:({uuid:Y,operations:J})=>{Kt(Y,{operations:J},h.editingData.elements);const ae=ze(g);u({type:"update",payload:{editingData:Object.assign({},g),elementTree:ae}});const de=a.getStatic("idraw");J.locked===!0&&(de==null||de.cancelElements())},onSelect:Y=>{v!=null&&v.includes(Y.uuids[0])||oe(Y.positions)},onContextMenu:Y=>{if(!(v!=null&&v.includes(Y.uuids[0]))){oe(Y.positions);const J=Fe(Y.positions[0],g.elements);J&&M({selectedElements:[J]})}},onDrop:Y=>{const{elements:J}=Pi(g.elements,{from:Y.from,to:Y.to}),ae=Fe(Y.to,g.elements);ae&&(ae.x=0,ae.y=0);const de=ze(g);u({type:"update",payload:{editingData:Object.assign(Object.assign({},g),{elements:[...J]}),elementTree:de}})},onDelete:({uuid:Y})=>{s.trigger("deleteElement",{uuid:Y})},onGoToGroup:Y=>{s.trigger("resetEditingView",{type:"go-to-next-group",position:Y.position})},onExpand:(Y,{node:J})=>{const ae=J.key;if(ae){let de=[...P];P.includes(ae)?de.splice(de.indexOf(ae),1):de=[...de,ae],R(de)}}}):l.createElement(Jt,{image:Jt.PRESENTED_IMAGE_SIMPLE,description:!1})))}];return z.useMemo(()=>l.createElement("div",{style:n,className:fe(_,t),onContextMenu:Y=>{Y.preventDefault()}},l.createElement(La,{ghost:!0,collapsible:"icon",items:ve,size:"small",activeKey:I,onChange:Y=>{if(Array.isArray(Y)){const J=[...Y];b(J),F(J)}}})),[o,E,V,f,m,v,P,w.elements,g.elements,p,B,L,$])};var Vu=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const Bu="mod-panel-detail",Fu=e=>{const{className:t,style:n}=e,{state:o,dispatch:i}=z.useContext(Rt),{selectedUUIDs:a,editingData:s,editingDataPosition:c}=o,d=H(Bu),r=z.useRef(s);z.useEffect(()=>{r.current=s},[s]);const h=()=>r.current,u=z.useCallback(p=>{if((a==null?void 0:a.length)===1&&a[0]){const w=a[0];Kt(w,p,s.elements),i({type:"update",payload:{editingData:Object.assign({},s)}})}},[s,a]),f=z.useCallback(p=>{var w;const{detail:S}=p,A=Vu(p,["detail"]);delete A.operations;const y=h();if(A||S){const I=Object.assign(Object.assign(Object.assign({x:0,y:0},y.layout),A),{detail:Object.assign(Object.assign({},(w=y.layout)===null||w===void 0?void 0:w.detail),S)}),b=Object.assign(Object.assign({},y),{layout:I});i({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:b}})}},[s,a]),m=z.useCallback(p=>(a==null?void 0:a.length)>1?null:Br(p,h().elements),[s,a[0]]),v=z.useCallback(p=>{var w,S;let A=null;return p&&vn(p)&&(A=((S=(w=h().assets)===null||w===void 0?void 0:w[p])===null||S===void 0?void 0:S.value)||null),A},[s,a[0]]),g=z.useCallback(p=>{const w=no(p.value);return s.assets||(s.assets={}),s.assets[w]=p,{assetId:w,assetItem:p}},[s,a[0]]);return z.useMemo(()=>{const p=m(a[0]);return l.createElement("div",{style:n,className:fe(d,t),onContextMenu:w=>{w.preventDefault()}},l.createElement(hu,{element:p,onElementChange:u,getElementAsset:v,createElementAsset:g,layout:s.layout,onLayoutChange:f}))},[a[0],s.layout,c])},ii="mod-export-image-file",Ya=700,Wu=Ya+48,Io=500,Hu=Ya-Io,ai={devicePixelRatio:1,fileName:"download.png"},Gu=e=>{const{className:t,style:n,sharedStore:o}=e,i=H(ii),a=H(ii,"preview"),s=H(ii,"options"),c=H(ii,"canvas"),[d,r]=z.useState(null),[h,u]=z.useState(!0),[f,m]=z.useState(null),[v]=q.useForm(),g=z.useCallback(w=>{const S=o.getStatic("idraw");S&&(u(!0),S.getImageBlobURL({devicePixelRatio:w}).then(({blobURL:A,width:y,height:I,devicePixelRatio:b})=>{A&&(m(A),r({width:y,height:I,devicePixelRatio:b}))}).catch(A=>{console.log(A)}).finally(()=>{u(!1)}))},[]);z.useEffect(()=>{v.setFieldsValue({devicePixelRatio:ai.devicePixelRatio,fileName:ai.fileName}),setTimeout(()=>{g(ai.devicePixelRatio)},10)},[]);const p=()=>{if(!f)return;const w=v.getFieldsValue(),S=document.createElement("a");S.href=f,S.download=w.fileName||ai.fileName,document.body.appendChild(S),S.click(),document.body.removeChild(S)};return z.useMemo(()=>l.createElement("div",{style:Object.assign(Object.assign({},n),{width:Ya}),className:fe(i,t)},l.createElement(mr,{tip:"Loading...",spinning:h},l.createElement("div",{className:a,style:{width:Io,height:Io*3/4}},f&&l.createElement("img",{className:c,style:{maxWidth:Io,maxHeight:Io*3/4},src:f}))),l.createElement("div",{className:s,style:{width:Hu}},l.createElement("div",{style:{marginBottom:6}},"Width: ",d==null?void 0:d.width),l.createElement("div",null,"Height: ",d==null?void 0:d.height),l.createElement(Ul,null),l.createElement("div",null,l.createElement(q,{form:v,layout:"vertical",onValuesChange:w=>{w.devicePixelRatio>0&&setTimeout(()=>{g(w.devicePixelRatio)},10)},disabled:h},l.createElement(q.Item,{label:"Device pixel ratio",name:"devicePixelRatio"},l.createElement(tt,{size:"small",options:[1,2,3,4].map(w=>({label:`x${w}`,value:w}))})),l.createElement(q.Item,{label:"File name",name:"fileName"},l.createElement(qt,{size:"small",placeholder:"File name"})),l.createElement(ke,{type:"primary",onClick:p,disabled:h||!f,loading:h},"Download"))))),[d,h,f,g])};var Yu=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};function $u(e){return new Promise(function(t,n){const o=new FileReader;o.onload=function(){t(o)},o.onerror=n,e.type==="application/json"?o.readAsText(e):o.readAsArrayBuffer(e)})}function Xu(e){Oa({accept:"application/json",success:t=>Yu(this,void 0,void 0,function*(){var n,o,i;const s=(yield $u(t.file)).result;if(typeof s=="string")try{const c=JSON.parse(s);(n=e==null?void 0:e.success)===null||n===void 0||n.call(e,{json:c})}catch(c){(o=e==null?void 0:e.error)===null||o===void 0||o.call(e,c)}else(i=e==null?void 0:e.error)===null||i===void 0||i.call(e,Error("ERROR_PICK_FILE_FAIL"))}),error:e==null?void 0:e.error})}const Uu={uuid:"b8b3fdea-d4ba-669b-803d-9aea7b86a5c8",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#0D6EFD",borderRadius:16,borderDash:[],boxSizing:"border-box",opacity:1,text:"Button",fontFamily:"SF UI Display",fontSize:20,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#FFFFFF"},operations:{}},Zu={uuid:"07ddd6e3-b6a5-f843-4229-35673c811253",name:"Rectangle 821",x:0,y:0,w:335,h:56,angle:0,type:"text",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1,text:"      user@example.com",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#1B1E28"},operations:{}},Qu={uuid:"2adb5b3e-9798-a4ea-2cbe-d85c8c24eeb6",name:"Link",x:245,y:630,w:42,h:16,angle:0,type:"text",detail:{text:"Link",fontFamily:"SF UI Display",fontSize:14,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:16,color:"#0D6EFD",opacity:1},operations:{}},Ju={uuid:"47186341-186f-0403-3f4e-3d467afe2016",name:"Password",x:0,y:0,w:335,h:56,angle:0,type:"group",detail:{background:"transparent",borderDash:[],boxSizing:"center-line",opacity:1,children:[{uuid:"9ff6159d-bede-8e89-baac-f91afa754a06",name:"Box",x:0,y:0,w:335,h:56,angle:0,type:"rect",detail:{background:"#F7F7F9",borderRadius:14,borderDash:[],boxSizing:"border-box",opacity:1},operations:{}},{uuid:"7a47c6df-cd8c-530f-f3b9-22b661f901eb",name:"Vector",x:297.00006103515625,y:20,w:20,h:16,angle:0,type:"path",detail:{commands:[{type:"M",params:[2.530330181121826,-.5303300619125366]},{type:"C",params:[2.2374367713928223,-.8232232928276062,1.7625631093978882,-.8232232928276062,1.4696699380874634,-.5303300619125366]},{type:"C",params:[1.176776647567749,-.23743686079978943,1.176776647567749,.23743686079978943,1.4696699380874634,.5303300619125366]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[17.469669342041016,16.530330657958984]},{type:"C",params:[17.762563705444336,16.823223114013672,18.237436294555664,16.823223114013672,18.530330657958984,16.530330657958984]},{type:"C",params:[18.823223114013672,16.237436294555664,18.823223114013672,15.76256275177002,18.530330657958984,15.469670295715332]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"Z",params:[]},{type:"M",params:[12.500185012817383,10.794958114624023]},{type:"C",params:[12.808830261230469,10.518712997436523,12.83509635925293,10.04456615447998,12.55885124206543,9.735921859741211]},{type:"C",params:[12.28260612487793,9.427276611328125,11.808459281921387,9.401010513305664,11.499814987182617,9.677255630493164]},{type:"L",params:[12.500185012817383,10.794958114624023]},{type:"Z",params:[]},{type:"M",params:[8.322744369506836,6.500185489654541]},{type:"C",params:[8.598989486694336,6.191540241241455,8.572724342346191,5.717393398284912,8.264079093933105,5.44114875793457]},{type:"C",params:[7.9554338455200195,5.1649041175842285,7.481287002563477,5.191169738769531,7.205042362213135,5.499814510345459]},{type:"L",params:[8.322744369506836,6.500185489654541]},{type:"Z",params:[]},{type:"M",params:[.8697054386138916,10.146900177001953]},{type:"L",params:[.3260757029056549,10.663588523864746]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"L",params:[.8697054386138916,10.146900177001953]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,5.8530988693237305]},{type:"L",params:[19.673925399780273,5.336410999298096]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"L",params:[19.130294799804688,5.8530988693237305]},{type:"Z",params:[]},{type:"M",params:[19.130294799804688,10.14690113067627]},{type:"L",params:[19.67392349243164,10.663589477539062]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"L",params:[19.130294799804688,10.14690113067627]},{type:"Z",params:[]},{type:"M",params:[.8697060346603394,5.853097915649414]},{type:"L",params:[.32607635855674744,5.336409568786621]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"L",params:[.8697060346603394,5.853097915649414]},{type:"Z",params:[]},{type:"M",params:[17.11528778076172,11.042052268981934]},{type:"C",params:[16.802886962890625,11.314040184020996,16.770124435424805,11.787782669067383,17.042112350463867,12.100184440612793]},{type:"C",params:[17.314102172851562,12.41258716583252,17.787843704223633,12.445348739624023,18.10024642944336,12.173359870910645]},{type:"L",params:[17.11528778076172,11.042052268981934]},{type:"Z",params:[]},{type:"M",params:[7.18831205368042,.6969932913780212]},{type:"C",params:[6.793071269989014,.8209197521209717,6.573127746582031,1.2417877912521362,6.697054386138916,1.6370283365249634]},{type:"C",params:[6.820981025695801,2.03226900100708,7.241848945617676,2.2522125244140625,7.637089252471924,2.1282858848571777]},{type:"L",params:[7.18831205368042,.6969932913780212]},{type:"Z",params:[]},{type:"M",params:[4.903543949127197,3.4355645179748535]},{type:"C",params:[5.252687454223633,3.212693214416504,5.355051517486572,2.74898362159729,5.132180690765381,2.3998398780822754]},{type:"C",params:[4.909309387207031,2.0506961345672607,4.4456000328063965,1.9483320713043213,4.096456050872803,2.171203136444092]},{type:"L",params:[4.903543949127197,3.4355645179748535]},{type:"Z",params:[]},{type:"M",params:[15.551521301269531,14.047059059143066]},{type:"C",params:[15.906437873840332,13.833499908447266,16.02103042602539,13.372659683227539,15.80747127532959,13.017744064331055]},{type:"C",params:[15.593912124633789,12.662827491760254,15.133071899414062,12.548234939575195,14.778156280517578,12.761794090270996]},{type:"L",params:[15.551521301269531,14.047059059143066]},{type:"Z",params:[]},{type:"M",params:[1.4696699380874634,.5303300619125366]},{type:"L",params:[17.469669342041016,16.530330657958984]},{type:"L",params:[18.530330657958984,15.469670295715332]},{type:"L",params:[2.530330181121826,-.5303300619125366]},{type:"L",params:[1.4696699380874634,.5303300619125366]},{type:"Z",params:[]},{type:"M",params:[6.25,8]},{type:"C",params:[6.25,10.071067810058594,7.928932189941406,11.75,10,11.75]},{type:"L",params:[10,10.25]},{type:"C",params:[8.757359504699707,10.25,7.75,9.242640495300293,7.75,8]},{type:"L",params:[6.25,8]},{type:"Z",params:[]},{type:"M",params:[10,11.75]},{type:"C",params:[10.959962844848633,11.75,11.837237358093262,11.388312339782715,12.500185012817383,10.794958114624023]},{type:"L",params:[11.499814987182617,9.677255630493164]},{type:"C",params:[11.101249694824219,10.033981323242188,10.576745986938477,10.25,10,10.25]},{type:"L",params:[10,11.75]},{type:"Z",params:[]},{type:"M",params:[7.205042362213135,5.499814510345459]},{type:"C",params:[6.611688137054443,6.16276216506958,6.25,7.040036678314209,6.25,8]},{type:"L",params:[7.75,8]},{type:"C",params:[7.75,7.423254489898682,7.966019153594971,6.8987507820129395,8.322744369506836,6.500185489654541]},{type:"L",params:[7.205042362213135,5.499814510345459]},{type:"Z",params:[]},{type:"M",params:[.32607579231262207,10.663588523864746]},{type:"C",params:[2.297703981399536,12.738021850585938,5.848983287811279,15.75,10,15.75]},{type:"L",params:[10,14.25]},{type:"C",params:[6.519985675811768,14.25,3.3532803058624268,11.671310424804688,1.4133350849151611,9.63021183013916]},{type:"L",params:[.32607579231262207,10.663588523864746]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,5.3364105224609375]},{type:"C",params:[17.70229721069336,3.261976718902588,14.151017189025879,.25,10,.25]},{type:"L",params:[10,1.75]},{type:"C",params:[13.480013847351074,1.75,16.64672088623047,4.328688621520996,18.5866641998291,6.369787216186523]},{type:"L",params:[19.673925399780273,5.3364105224609375]},{type:"Z",params:[]},{type:"M",params:[19.673925399780273,10.663589477539062]},{type:"C",params:[21.108692169189453,9.154008865356445,21.108692169189453,6.845991611480713,19.673925399780273,5.336410999298096]},{type:"L",params:[18.5866641998291,6.369786739349365]},{type:"C",params:[19.471111297607422,7.300351619720459,19.471111297607422,8.699647903442383,18.5866641998291,9.630212783813477]},{type:"L",params:[19.673925399780273,10.663589477539062]},{type:"Z",params:[]},{type:"M",params:[1.4133352041244507,9.63021183013916]},{type:"C",params:[.5288880467414856,8.699646949768066,.5288882851600647,7.300351142883301,1.4133358001708984,6.369786262512207]},{type:"L",params:[.32607629895210266,5.336409568786621]},{type:"C",params:[-1.1086915731430054,6.845990180969238,-1.1086925268173218,9.154007911682129,.3260757029056549,10.663588523864746]},{type:"L",params:[1.4133352041244507,9.63021183013916]},{type:"Z",params:[]},{type:"M",params:[18.10024642944336,12.173359870910645]},{type:"C",params:[18.692087173461914,11.658082008361816,19.22022819519043,11.140942573547363,19.67392349243164,10.663589477539062]},{type:"L",params:[18.586666107177734,9.630212783813477]},{type:"C",params:[18.160234451293945,10.078877449035645,17.666166305541992,10.562438011169434,17.11528778076172,11.042052268981934]},{type:"L",params:[18.10024642944336,12.173359870910645]},{type:"Z",params:[]},{type:"M",params:[10,.25]},{type:"C",params:[9.022459983825684,.25,8.080134391784668,.4173649847507477,7.18831205368042,.6969932913780212]},{type:"L",params:[7.637089252471924,2.1282858848571777]},{type:"C",params:[8.404208183288574,1.8877582550048828,9.194794654846191,1.75,10,1.75]},{type:"L",params:[10,.25]},{type:"Z",params:[]},{type:"M",params:[4.096456050872803,2.171203136444092]},{type:"C",params:[2.570507526397705,3.1452717781066895,1.280151128768921,4.332587242126465,.32607635855674744,5.336409568786621]},{type:"L",params:[1.4133356809616089,6.369786262512207]},{type:"C",params:[2.3151214122772217,5.420979022979736,3.51236629486084,4.323603630065918,4.903543949127197,3.4355645179748535]},{type:"L",params:[4.096456050872803,2.171203136444092]},{type:"Z",params:[]},{type:"M",params:[10,15.75]},{type:"C",params:[12.047597885131836,15.75,13.940337181091309,15.016534805297852,15.551521301269531,14.047059059143066]},{type:"L",params:[14.778156280517578,12.761794090270996]},{type:"C",params:[13.313118934631348,13.643331527709961,11.688562393188477,14.25,10,14.25]},{type:"L",params:[10,15.75]},{type:"Z",params:[]}],fill:"#7D848D",originX:0,originY:0,originW:20,originH:16},operations:{}},{uuid:"f3fb01f1-c2a1-7c7b-2906-49271490ecec",name:"**********",x:16,y:20,w:97,h:20,angle:0,type:"text",detail:{text:"**********",color:"#7D848D",fontSize:16,lineHeight:20,textAlign:"left",verticalAlign:"top",wordBreak:"normal"},operations:{}}],overflow:"visible"},operations:{},global:{background:"#FFFAFA"}},Ku={uuid:"af161d19-73ae-77e3-e54d-a88be90632ba",name:"Text",x:0,y:0,w:300,h:40,angle:0,type:"text",detail:{text:"  Please fill the description",fontFamily:"SF UI Display",fontSize:16,textAlign:"left",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:20,color:"#7D848D",opacity:1},operations:{}},qu={uuid:"81895177-c187-eefa-de59-4b9ad201343e",name:"Title",x:0,y:0,w:136,h:34,angle:0,type:"text",detail:{text:"Title",fontFamily:"SF UI Display",fontSize:26,textAlign:"center",verticalAlign:"middle",wordBreak:"normal",overflow:"visible",minInlineSize:"auto",lineHeight:34,color:"#1B1E28",opacity:1},operations:{}},e1=e=>({list:[{name:"Button",element:Uu},{name:"Input",element:Zu},{name:"Password",element:Ju},{name:"Text",element:Ku},{name:"Title",element:qu},{name:"Link",element:Qu}],pageSize:8,current:1,total:8}),t1=()=>{const[e]=An("NavMenu");return e},lr="mod-nav-menu",n1=e=>{const{className:t,style:n,sharedStore:o,sharedEvent:i,getMaterialTemplates:a}=e,[s,c]=gr.useModal(),d=H(lr),r=H(lr,"dropdown"),[h,u]=z.useState([]),f=t1(),m=({key:R,domEvent:_})=>{_.preventDefault(),i.trigger("createElement",{type:R,element:{name:R}})},{state:v}=z.useContext(Rt),{getContainer:g}=z.useContext(Sn),{editMode:p,pageTree:w}=v,[S,A]=z.useState(!1),[y,I]=z.useState(!1);z.useEffect(()=>{const R=_=>{const{isPageOverview:Z}=_;I(!!Z)};return i.on("switchPageOverview",R),()=>{i.off("switchPageOverview",R)}},[]);const b=!!(p==="page"&&(w.length===0||y)),E=R=>{const _=o.getStatic("idraw");_==null||_.resize({devicePixelRatio:R})},C={more:[{key:"about-idraw-stuido",label:f.about,disabled:!0},{key:"line",type:"divider"},{key:"file",label:f.file,children:[{key:"import-json-file",label:f.importJSONFile,onClick:()=>{Xu({success:({json:R})=>{i.trigger("resetData",{data:R})},error:()=>{}})}},{key:"export-image",label:f.exportImage,onClick:()=>{s.info({icon:null,title:"Whole image file",width:Wu,content:l.createElement(Gu,{sharedEvent:i,sharedStore:o}),footer:null,closable:!0})}},{key:"export-json-file",label:f.exportJSONFile,onClick:()=>{const R=o.getStatic("idraw"),_=R==null?void 0:R.getData({compact:!0});if(_){const Z=JSON.stringify(_);s0(Z,{fileName:"downdown.json"})}}}]},{key:"preferences",label:f.preferences,children:[{key:"device-pixel-ratio",label:f.devicePixelRatio,type:"group",children:[{key:"device-pixel-ratio-x1",label:"x1",onClick:()=>{E(1)}},{key:"device-pixel-ratio-x2",label:"x2",onClick:()=>{E(2)}},{key:"device-pixel-ratio-x3",label:"x3",onClick:()=>{E(3)}}]}]}],element:[{key:"material",label:f.material,icon:l.createElement(bc,null),disabled:b,onClick:()=>{A(!0)}},{key:"rect",label:f.rect,icon:l.createElement(Ir,null),disabled:b,onClick:m},{key:"circle",label:f.circle,icon:l.createElement(wr,null),disabled:b,onClick:m},{key:"text",label:f.text,icon:l.createElement(Tr,null),disabled:b,onClick:m},{key:"image",label:f.image,icon:l.createElement(xr,null),disabled:b,onClick:m},{key:"svg",label:f.svg,disabled:b,icon:l.createElement(Ar,null),onClick:m},{key:"html",label:f.html,disabled:!0,icon:l.createElement(Cr,null),onClick:m},{key:"group",label:f.group,icon:l.createElement(Sr,null),disabled:b,onClick:m}]},V={size:"small",type:"text"},T=[{key:"more",button:l.createElement(Wc,{style:{fontSize:20}})},{key:"element",button:l.createElement(wc,{style:{fontSize:20}})}],P=()=>{const R=o.getStatic("idraw"),_=[];if(R){const{viewSizeInfo:Z}=R.getViewInfo(),{devicePixelRatio:W}=Z;_.push(`device-pixel-ratio-x${W}`)}u(_)};return z.useMemo(()=>l.createElement("div",{style:n,className:fe(d,t)},T.map((R,_)=>l.createElement(oo,{key:_,trigger:["click","click"],menu:{items:C[R.key]||[],selectedKeys:h},placement:"bottom",overlayClassName:r,onOpenChange:Z=>{Z===!0&&P()}},l.createElement(ke,Object.assign({},V,{onClick:Z=>Z.preventDefault()}),l.createElement(Zl.Compact,null,R.button,l.createElement(Ra,{style:{fontSize:10,marginLeft:4}}))))),l.createElement(vr,{title:f.materialTempate,placement:"left",open:S,onClose:()=>{A(!1)},styles:Rl,getContainer:g},l.createElement(Pl,{onSelect:R=>{R.element&&i.trigger("addElement",{element:ka(R.element),position:[]}),A(!1)},getTemplates:a||e1})),c),[h,f,S])},hn="mod-header",o1=e=>{const{logo:t,navigationMenu:n,navigationCenter:o,className:i,style:a,openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:r,sharedStore:h,sharedEvent:u,getMaterialTemplates:f}=e,{state:m,dispatch:v}=z.useContext(Rt),g=H(hn),p=H(hn,"left"),w=H(hn,"right"),S=H(hn,"center"),A=H(hn,"locale"),y=H(hn,"scale"),I=H(hn,"switch"),{localeCode:b,scaleInfo:E}=m;return z.useMemo(()=>l.createElement("div",{style:a,className:fe(g,i)},l.createElement("div",{className:p},t,n||l.createElement(n1,{sharedStore:h,sharedEvent:u,getMaterialTemplates:f}),l.createElement(Iu,{openLeftSider:s,openRightSider:c,onClickToggleLayer:d,onClickToggleSetting:r,sharedStore:h,sharedEvent:u})),o&&l.createElement("div",{className:S},o),l.createElement("div",{className:w},l.createElement(c6,{className:y,value:`${be(E.scale)}`,onChange:C=>{const V=parseFloat(C);V>0&&(v==null||v({type:"update",payload:{scaleInfo:{scale:be(V),from:"control"}}}))}}),l.createElement(o0,{className:A,value:b,onChange:C=>{v==null||v({type:"update",payload:{localeCode:C}})}}),l.createElement(fc,{className:I,theme:m==null?void 0:m.themeMode,onChange:({theme:C})=>{v==null||v({type:"updateThemeMode",payload:{themeMode:C}})}}))),[b,E,s,c,d,r])};var i1=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]]);return n};const a1="mod-sketch",s1=e=>{const t=z.useRef(null),n=z.useRef(null),o=z.useRef(!1),{className:i,style:a,width:s,height:c,sharedEvent:d,sharedStore:r,useContextMenuOptions:h}=e,{generateClassName:u}=z.useContext(Sn),{state:f,dispatch:m}=z.useContext(Rt),{editingData:v}=f,g=u(a1),p=z.useRef([]),w=z.useRef(f.editingData),S=z.useRef(f.data),A=z.useRef([]),[y,I]=h({sharedEvent:d,sharedStore:r});return z.useEffect(()=>{p.current=[...f.editingDataPosition],S.current=f.data,w.current=f.editingData,A.current=[...f.selectedUUIDs]},[f.editingDataPosition,f.data,f.editingData,f.selectedUUIDs]),z.useEffect(()=>{if(!(t!=null&&t.current)||n!=null&&n.current)return;const b={width:s,height:c,devicePixelRatio:window.devicePixelRatio},E=new Ha(t.current,b);E.enable("ruler"),n.current=E;const C=B=>{var N;const U=w.current;let{uuids:G}=B;if((G==null?void 0:G.length)===1&&((N=A.current)===null||N===void 0?void 0:N.length)===1&&G[0]===A.current[0])return;const{positions:x}=B;x&&Array.isArray(x)&&x.length>0&&(G=Wr(x,U.elements).map(O=>O.uuid)),m({type:"update",payload:{selectedUUIDs:G}})},V=B=>{const{data:N,type:U}=B,G=r.getStatic("snapshotRecorder");G&&(G.hasBeforeSnapshot()||G.setBeforeData({elements:B.data.elements}),B.type!=="setData"&&G.do({elements:B.data.elements}));const x=w.current;if(["addElement","updateElement","deleteElement","moveElement","dragElement","resizeElement"].includes(U)){const L={editingData:Object.assign({},N)};["addElement","deleteElement","moveElement"].includes(U)&&(L.elementTree=ze(x)),m({type:"update",payload:L})}else if(U==="changeLayout"){if(N.layout){const L=Object.assign({},N.layout);L.detail&&(L.detail=Object.assign({},L.detail)),N.layout=Object.assign({},N.layout)}m({type:"updateEditingDataLayoutToTargetGroup",payload:{editingData:Object.assign({},N)}})}},T=B=>{const{scale:N}=B;m({type:"update",payload:{scaleInfo:{scale:N,from:"event"}}})},P=B=>{const{element:N}=B;E.updateElement(N);const U=Object.assign({},E.getData()),G=ze(U);m({type:"update",payload:{editingData:Object.assign({},U),elementTree:G}})},R=B=>{I({selectedElements:B.selectedElements||[]})},_=B=>{const{type:N,element:U}=B,G=E.createElement(N,{element:U,viewCenter:!0});let x=E.getViewCenter();const L=A.current;let O=[];const F=E.getData();if(Array.isArray(L)&&L.length===1){const ne=L[0],le=bt(ne,F.elements);let ve=Fe(le,F.elements);if(le.length>1){O=[...le];let Y=O.pop();Y+=1;const J=[...O];O.push(Y),ve=Fe(J,F.elements),x=ut(ve),G.x=x.x-G.w/2,G.y=x.y-G.h/2}}const Q=E.addElement(G,{position:O}),oe=ze(Q);m({type:"update",payload:{editingData:Object.assign({},Q),elementTree:oe}}),E.selectElements([G.uuid])},Z=B=>{const{element:N,position:U=[]}=B;let G=E.getViewCenter();const x=A.current;let L=U;const O=E.getData();if(Array.isArray(x)&&x.length===1){const oe=x[0],ne=bt(oe,O.elements),le=Fe(ne,O.elements);ne.length>0&&(le==null?void 0:le.type)==="group"&&Array.isArray(le.detail.children)&&(L=[...ne],L.push(le.detail.children.length),G=ut(le))}const F=E.addElement(Object.assign(Object.assign({},N),{x:G.x-N.w/2,y:G.y-N.h/2}),{position:L}),Q=ze(F);m({type:"update",payload:{editingData:Object.assign({},F),elementTree:Q}}),E.selectElements([N.uuid])},W=B=>{const{uuid:N}=B;E==null||E.deleteElement(N);const U=E==null?void 0:E.getData();if(U){const G=ze(U);m({type:"update",payload:{editingData:Object.assign({},U),elementTree:G}}),E.trigger(Ne.CLEAR_SELECT,{})}},D=B=>{const{element:N,inPageOverview:U}=B,{w:G,h:x,detail:L}=N,O=S.current;O.elements=[...O.elements,N];const F=i1(L,["children"]);let Q={elements:N.detail.children,layout:{x:0,y:0,w:G,h:x,detail:F,operations:{position:"relative"}}};const oe=ze(O);let ne=[oe.length-1];U===!0&&(Q=O,ne=[]);const le=ze(Q);m({type:"update",payload:{data:Object.assign({},O),elementTree:le,pageTree:oe,editingDataPosition:ne}}),d.trigger("resetEditingView",{type:"go-to-page",position:[oe.length-1]})},k=B=>{var N;const{uuid:U}=B;if(!U)return;const G=S.current;let x=-1;const L={pageTree:[]};for(let Q=0;Q<G.elements.length;Q++)if(((N=G.elements[Q])===null||N===void 0?void 0:N.uuid)===U){G.elements.splice(Q,1),G.elements=[...G.elements],x=Q;break}const O=ze(G);L.data=Object.assign({},G),L.pageTree=O,m({type:"update",payload:L});let F=p.current[0]||0;F>=x&&(F-=1,d.trigger("resetEditingView",{type:"go-to-page",position:[F||0]}))},j=B=>{const{type:N,position:U}=B,G=n==null?void 0:n.current;if(!G)return;const x=p.current,L=w.current;let O=S.current;if(x.length>0?gu(x,L,O):x.length===0&&(O=L),N==="go-to-page"&&U){const F=[...U],Q=Ut(F,O),oe=ze(Q);m({type:"update",payload:{data:Object.assign({},O),editingData:Object.assign({},Q),editingDataPosition:F,elementTree:oe}}),G.centerContent({data:Q}),G.trigger(Ne.CLEAR_SELECT,{});const ne=r.getStatic("snapshotRecorder");ne==null||ne.clear(),ne==null||ne.setBeforeData(Q)}else if(N==="go-to-group"&&U){const F=[...U],Q=Ut(F,O),oe=ze(Q);m({type:"update",payload:{data:Object.assign({},O),editingData:Object.assign({},Q),editingDataPosition:F,elementTree:oe}}),G.centerContent({data:Q}),G.trigger(Ne.CLEAR_SELECT,{});const ne=r.getStatic("snapshotRecorder");ne==null||ne.clear(),ne==null||ne.setBeforeData(Q)}else if(N==="go-to-next-group"&&U){const F=[...x,...U],Q=Ut(F,O),oe=ze(Q);m({type:"update",payload:{data:Object.assign({},O),editingData:Object.assign({},Q),editingDataPosition:F,elementTree:oe}}),G.centerContent({data:Q}),G.trigger(Ne.CLEAR_SELECT,{});const ne=r.getStatic("snapshotRecorder");ne==null||ne.clear(),ne==null||ne.setBeforeData(Q)}else if(N==="back-one"&&x.length>0){const F=[...x];F.pop();const Q=Ut(F,O),oe=ze(Q);m({type:"update",payload:{data:Object.assign({},O),editingData:Object.assign({},Q),editingDataPosition:[...F],elementTree:oe}}),G.centerContent({data:Q}),G.trigger(Ne.CLEAR_SELECT,{});const ne=r.getStatic("snapshotRecorder");ne==null||ne.clear(),ne==null||ne.setBeforeData(Q)}else if(N==="back-root"){const F=[],Q=Ut(F,O),oe=ze(Q);m({type:"update",payload:{data:Object.assign({},O),editingData:Q,editingDataPosition:F,elementTree:oe}}),G.centerContent({data:Q}),G.trigger(Ne.CLEAR_SELECT,{});const ne=r.getStatic("snapshotRecorder");ne==null||ne.clear(),ne==null||ne.setBeforeData(Q)}},M=B=>{let{data:N}=B,U=[],G=Po(N);if(f.editMode==="page"&&(N=Tl(N),G=Po(N),G.length>0)){const O=G[0].uuid;U=bt(O,N.elements)}let x=Ut(U,N);const L=ze(x);m({type:"update",payload:{data:Object.assign({},N),editingData:Object.assign({},x),editingDataPosition:U,elementTree:L,pageTree:G}}),E.centerContent({data:x}),E.trigger(Ne.CLEAR_SELECT,{})},$=B=>{const{editingData:N}=B,U=ze(N);m({type:"update",payload:{editingData:Object.assign({},N),elementTree:U}}),E.trigger(Ne.CLEAR_SELECT,{})};if(E.on(Ne.SELECT,C),E.on(Ne.CHANGE,V),E.on(Ne.SCALE,T),E.on(Ne.TEXT_CHANGE,P),E.on(Ne.CONTEXT_MENU,R),d.on("createElement",_),d.on("addElement",Z),d.on("deleteElement",W),d.on("addPage",D),d.on("deletePage",k),d.on("resetEditingView",j),d.on("resetData",M),d.on("resetEditingData",$),d.on("dispatch",m),!o.current){if(f.scaleInfo){const{scale:B,offsetX:N,offsetY:U}=f.scaleInfo;B&&N&&U?E.setViewScale({scale:B,offsetX:N,offsetY:U}):E.centerContent({data:f.editingData})}o.current=!0}return r.setStatic("idraw",E),()=>{o.current=!1,E.off(Ne.SELECT,C),E.off(Ne.CHANGE,V),E.off(Ne.SCALE,T),E.off(Ne.TEXT_CHANGE,P),E.off(Ne.CONTEXT_MENU,R),r.setStatic("idraw",null),r.setStatic("snapshotRecorder",null)}},[]),z.useEffect(()=>{n!=null&&n.current&&n.current.setData(v)},[v]),z.useEffect(()=>{if(n!=null&&n.current){const b=n.current;f.scaleInfo.from==="control"&&b.scale({scale:f.scaleInfo.scale,point:{x:s/2,y:c/2}})}},[f.scaleInfo]),z.useEffect(()=>{const b=n.current,E=t.current;b&&b.resize({width:s,height:c}),E&&(E.style.width=`${s}px`,E.style.height=`${c}px`)},[s,c]),z.useMemo(()=>l.createElement(oo,{menu:{items:y},trigger:["contextMenu"]},l.createElement("div",{ref:t,className:fe(g,i),style:Object.assign(Object.assign({},a),{width:s,height:c,padding:0})})),[y])};var r1=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};function l1(e){return r1(this,void 0,void 0,function*(){var t;const n=((t=e==null?void 0:e.clipboardData)===null||t===void 0?void 0:t.items)||[],o=[],i=()=>o.length>=n.length;return new Promise(a=>{const s=()=>{if(i()===!0){const c=Array.from(o);a(c)}};Array.from(n).forEach((c,d)=>{if(c.kind==="file"){const r={file:null,text:null,type:null},h=c.getAsFile();r.type="file",r.file=h,o[d]=r,s()}else c.kind==="string"&&c.getAsString(r=>{const h={file:null,text:null,type:null};h.type="text",h.text=r,o[d]=h,s()})})})})}var Ol=function(e,t,n,o){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function c(h){try{r(o.next(h))}catch(u){s(u)}}function d(h){try{r(o.throw(h))}catch(u){s(u)}}function r(h){h.done?a(h.value):i(h.value).then(c,d)}r((o=o.apply(e,t||[])).next())})};function cr(){const e=document.createElement("input");return e.style.position="fixed",e.style.top="-999999px",e.style.left="-999999px",e.style.opacity="0",document.body.appendChild(e),e}function c1(e){const{sharedEvent:t,sharedStore:n}=e;t.on("copy",()=>{const o=n.getStatic("idraw"),i=n.get("selectedUUIDs");let a=o==null?void 0:o.getData(),s=null;if(a&&Array.isArray(i)&&i.length>0){const c=di(i,a.elements);c.length>0&&(s=JSON.stringify(c))}if(s){const c=cr();c.value=s,c.focus(),c.select(),document.execCommand("copy"),c.remove()}}),t.on("paste",()=>{}),t.on("cut",()=>{const o=n.getStatic("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const d=di(i,a.elements),r=JSON.stringify(d),h=cr();h.value=r,h.focus(),h.select(),document.execCommand("copy"),h.remove(),d.forEach(u=>{o==null||o.deleteElement(u.uuid)})}const s=o==null?void 0:o.getData(),c=ze(s);t.trigger("dispatch",{type:"update",payload:{editingData:s,elementTree:c}}),o==null||o.trigger(Ne.CLEAR_SELECT)}),t.on("delete",()=>{const o=n.getStatic("idraw"),i=n.get("selectedUUIDs"),a=o==null?void 0:o.getData();if(a&&Array.isArray(i)&&i.length>0){const s=di(i,a.elements);if(s.length>0){for(let r=0;r<s.length;r++)o==null||o.deleteElement(s[r].uuid);const c=o==null?void 0:o.getData(),d=ze(c);t.trigger("dispatch",{type:"update",payload:{editingData:c,elementTree:d}}),o==null||o.trigger(Ne.CLEAR_SELECT)}}}),t.on("undo",()=>{const o=n==null?void 0:n.getStatic("idraw"),i=n.getStatic("snapshotRecorder"),a=i==null?void 0:i.undo(o==null?void 0:o.getData());a&&(t==null||t.trigger("resetEditingData",{editingData:Object.assign(Object.assign({},o==null?void 0:o.getData()),a)}),o==null||o.cancelElements())}),t.on("redo",()=>{const o=n==null?void 0:n.getStatic("idraw"),i=n.getStatic("snapshotRecorder"),a=i==null?void 0:i.redo(o==null?void 0:o.getData());a&&(t==null||t.trigger("resetEditingData",{editingData:Object.assign(Object.assign({},o==null?void 0:o.getData()),a)}),o==null||o.cancelElements())})}function d1(e,t){return Ol(this,void 0,void 0,function*(){var n;const{sharedEvent:o,sharedStore:i}=t,a=i.getStatic("idraw"),s=i.get("selectedUUIDs");let c=[];for(let d=0;d<e.length;d++){const r=e[d];if(r.type==="text"&&r.text){const h=r.text;if(h.startsWith("[{")&&h.endsWith("}]"))try{c=JSON.parse(h)}catch(u){console.warn(u)}}else if(r.type==="file"&&r.file){const{file:h}=r;if(!((n=h.type)===null||n===void 0)&&n.startsWith("image/")){const u=yield Nr(h),f=yield Oo(u),m={uuid:yt(),type:"image",x:0,y:0,w:f.width,h:f.height,detail:{src:u}};c.push(m)}}}if(c.length>0&&a){const d=[];for(let r=0;r<c.length;r++)if(c[r]){const h=c[r],u=ka(h);u.name=`${u.name} copy`,d.push(u)}if(d.length>0){const r=a==null?void 0:a.getData(),h=bt(s[0],(r==null?void 0:r.elements)||[]);h.length>0&&h[h.length-1]++,d.forEach(m=>{a.addElement(m,{position:h})});const u=a==null?void 0:a.getData(),f=ze(u);o.trigger("dispatch",{type:"update",payload:{editingData:u,elementTree:f}}),a.selectElement(d[0].uuid),setTimeout(()=>{o.trigger("scrollToLayer",{uuid:d[0].uuid})},100)}}})}function u1(e){return n=>Ol(this,void 0,void 0,function*(){const o=yield l1(n);yield d1(o,e)})}const Bn="mod-dashboard",si=240,ri=240,Fn=36,h1=z.forwardRef((e,t)=>{const{className:n,style:o,width:i,height:a,logo:s,navigationMenu:c,navigationCenter:d,defaultSelectedElementUUIDs:r,sharedStore:h,sharedEvent:u,useContextMenuOptions:f,handleKeyboard:m,getPageTemplates:v,getMaterialTemplates:g,reverseTree:p}=e,{state:w}=z.useContext(Rt),{editMode:S}=w,[A,y]=z.useState(!0),[I,b]=z.useState(!0);z.useEffect(()=>{const W=k=>{["INPUT","TEXTAREA"].includes(k.target.nodeName)||m(k,{sharedEvent:u,sharedStore:h})},D=u1({sharedStore:h,sharedEvent:u});return window.addEventListener("keydown",W),window.addEventListener("paste",D),()=>{window.removeEventListener("keydown",W),window.removeEventListener("paste",D)}},[]);const[E,C]=z.useState({leftWidth:A?si:0,rightWidth:I?ri:0,centerWidth:i-(A?si:0)-(I?ri:0)});z.useEffect(()=>{const W=A?si:0,D=I?ri:0,k=i-W-D;C({leftWidth:W,rightWidth:D,centerWidth:k})},[a,i,A,I]);const V=H(Bn),T=H(Bn,"header"),P=H(Bn,"content"),R=H(Bn,"left"),_=H(Bn,"right"),Z=H(Bn,"right");return z.useMemo(()=>{const{leftWidth:W,rightWidth:D,centerWidth:k}=E;return l.createElement("div",{ref:t,className:fe(V,n),style:Object.assign(Object.assign({},o),{width:i,height:a,padding:0})},l.createElement("div",{className:T,style:{height:Fn}},l.createElement(o1,{sharedEvent:u,sharedStore:h,logo:s,navigationMenu:c,navigationCenter:d,openLeftSider:A,openRightSider:I,getMaterialTemplates:g,onClickToggleLayer:()=>{const j=!A;let M=W;j?M=si:M=0,C({leftWidth:M,rightWidth:D,centerWidth:i-M-D}),y(j)},onClickToggleSetting:()=>{const j=!I;let M=D;j?M=ri:M=0,C({leftWidth:W,rightWidth:M,centerWidth:i-W-M}),b(j)}})),l.createElement("div",{className:P,style:{top:Fn}},l.createElement(Ti,{split:"vertical",defaultSize:k+D,allowResize:!0,onChange:j=>{const M=i-j,$=j-D;$<100||C({leftWidth:M,rightWidth:D,centerWidth:$})},pane1Style:{width:W},pane2Style:{width:k+D}},l.createElement("div",null,A&&(S==="page"?l.createElement(ju,{height:a-Fn,className:R,reverseTree:!!p,defaultSelectedElementUUIDs:r,sharedEvent:u,sharedStore:h,useContextMenuOptions:f,getPageTemplates:v}):l.createElement(Au,{height:a-Fn,className:R,reverseTree:!!p,sharedEvent:u,sharedStore:h,useContextMenuOptions:f}))),l.createElement("div",{style:{width:E.centerWidth+E.rightWidth,display:"flex",flexDirection:"row"}},l.createElement(s1,{className:Z,width:k,height:a-Fn,sharedStore:h,sharedEvent:u,useContextMenuOptions:f}),l.createElement("div",{className:_,style:{width:D,height:a-Fn}},l.createElement(Fu,null))))))},[n,S,A,I,E,a])});function dr(){return{clipboard:{type:"default",data:null},selectedUUIDs:[]}}const f1=e=>{const{label:t,suffix:n}=e;return l.createElement("span",{style:{display:"inline-flex",width:180,flexDirection:"row",justifyContent:"space-between"}},l.createElement("span",{style:{display:"inline-flex"}},t),l.createElement("span",{style:{display:"inline-flex",opacity:.5}},n))},m1=e=>{const[t]=An("contextMenu"),{sharedEvent:n}=e,o=[{name:t.copy,hotKey:"Ctrl+C",key:"copy",disabled:!0,onClick:()=>{n.trigger("copy")}},{name:t.paste,hotKey:"Ctrl+V",key:"paste",disabled:!0,onClick:()=>{n.trigger("paste")}},{name:t.cut,hotKey:"Ctrl+X",key:"cut",disabled:!0,onClick:()=>{n.trigger("cut")}},{name:t.delete,hotKey:"Del",key:"delete",disabled:!0,onClick:()=>{n.trigger("delete")}}],i=h=>h.map(f=>{const m=t[f==null?void 0:f.key]||f.name;return{label:l.createElement(f1,{label:m,suffix:l.createElement("span",null,f.hotKey)}),key:f.key,disabled:f.disabled,onClick:f.onClick}}),[a,s]=z.useState(o),[c,d]=z.useState(i(a));return z.useEffect(()=>{d(i(a))},[a,t]),[c,h=>{const{selectedElements:u}=h;a==null||a.forEach(f=>{f&&["copy","cut","delete"].includes(f==null?void 0:f.key)&&(f.disabled=!((u==null?void 0:u.length)>0))}),s([...a])}]};var Pt={};Object.defineProperty(Pt,"__esModule",{value:!0});var g1=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),va={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},kl={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:g1?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},$a={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var li=1;li<20;li++)$a["f"+li]=111+li;function $i(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var o=e.map(function(s){return _l(s,t)}),i=function(c){return o.some(function(d){return jl(d,c)})},a=n==null?i:i(n);return a}function v1(e,t){return $i(e,t)}function p1(e,t){return $i(e,{byKey:!0},t)}function _l(e,t){var n=t&&t.byKey,o={};e=e.replace("++","+add");var i=e.split("+"),a=i.length;for(var s in va)o[va[s]]=!1;var c=!0,d=!1,r=void 0;try{for(var h=i[Symbol.iterator](),u;!(c=(u=h.next()).done);c=!0){var f=u.value,m=f.endsWith("?")&&f.length>1;m&&(f=f.slice(0,-1));var v=Xa(f),g=va[v];if(f.length>1&&!g&&!kl[f]&&!$a[v])throw new TypeError('Unknown modifier: "'+f+'"');(a===1||!g)&&(n?o.key=v:o.which=Vl(f)),g&&(o[g]=m?null:!0)}}catch(p){d=!0,r=p}finally{try{!c&&h.return&&h.return()}finally{if(d)throw r}}return o}function jl(e,t){for(var n in e){var o=e[n],i=void 0;if(o!=null&&(n==="key"&&t.key!=null?i=t.key.toLowerCase():n==="which"?i=o===91&&t.which===93?91:t.which:i=t[n],!(i==null&&o===!1)&&i!==o))return!1}return!0}function Vl(e){e=Xa(e);var t=$a[e]||e.toUpperCase().charCodeAt(0);return t}function Xa(e){return e=e.toLowerCase(),e=kl[e]||e,e}var wo=Pt.default=$i;Pt.isHotkey=$i;Pt.isCodeHotkey=v1;Pt.isKeyHotkey=p1;Pt.parseHotkey=_l;Pt.compareHotkey=jl;Pt.toKeyCode=Vl;Pt.toKeyName=Xa;const y1=(e,t)=>{const{sharedEvent:n}=t;wo("mod+c",e)?n.trigger("copy"):wo("mod+x",e)?n.trigger("cut"):wo("del",e)||wo("backspace",e)?n.trigger("delete"):wo("mod+s",e)&&console.log("Save ... ")};var vt=function(e,t,n,o,i){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},we=function(e,t,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(e):o?o.value:t.get(e)},et,At,$t,Xt,st;class w1{constructor(){et.set(this,void 0),vt(this,et,new Map,"f")}on(t,n){if(we(this,et,"f").has(t)){const o=we(this,et,"f").get(t)||[];o==null||o.push(n),we(this,et,"f").set(t,o)}else we(this,et,"f").set(t,[n])}off(t,n){if(we(this,et,"f").has(t)){const o=we(this,et,"f").get(t);if(Array.isArray(o)){for(let i=0;i<(o==null?void 0:o.length);i++)if(o[i]===n){o.splice(i,1);break}}we(this,et,"f").set(t,o||[])}}trigger(t,n){const o=we(this,et,"f").get(t);return Array.isArray(o)?(o.forEach(i=>{i(n)}),!0):!1}has(t){if(we(this,et,"f").has(t)){const n=we(this,et,"f").get(t);if(Array.isArray(n)&&n.length>0)return!0}return!1}destroy(){this.clear()}clear(){we(this,et,"f").clear()}}et=new WeakMap;class b1{constructor(){At.set(this,[]),$t.set(this,[]),Xt.set(this,null),st.set(this,void 0),vt(this,st,new w1,"f")}on(t,n){we(this,st,"f").on(t,n)}off(t,n){we(this,st,"f").off(t,n)}hasBeforeSnapshot(){return!!we(this,Xt,"f")}setBeforeData(t){if(t){const n={data:wt(t),time:Date.now()};vt(this,Xt,n,"f")}}canUndo(){return we(this,At,"f").length>0}canRedo(){return we(this,$t,"f").length>0}clear(){vt(this,At,[],"f"),vt(this,$t,[],"f"),vt(this,Xt,null,"f"),we(this,st,"f").trigger("clear")}destroy(){this.clear(),vt(this,At,null,"f"),vt(this,$t,null,"f"),vt(this,Xt,null,"f"),we(this,st,"f").clear(),we(this,st,"f").destroy(),vt(this,st,null,"f")}do(t){if(we(this,Xt,"f")){const n=we(this,Xt,"f");we(this,At,"f").push(n),this.setBeforeData(t)}we(this,st,"f").trigger("do",{canRedo:this.canRedo(),canUndo:this.canUndo()})}undo(t){if(we(this,At,"f").length===0)return null;const n=we(this,At,"f").pop();return n?(t&&we(this,$t,"f").push({data:wt(t),time:Date.now()}),we(this,st,"f").trigger("undo",{canRedo:this.canRedo(),canUndo:this.canUndo()}),n.data):null}redo(t){if(we(this,$t,"f").length===0)return null;const n=we(this,$t,"f").pop();return n?(t&&we(this,At,"f").push({data:wt(t),time:Date.now()}),we(this,st,"f").trigger("redo",{canRedo:this.canRedo(),canUndo:this.canUndo()}),n.data):null}}At=new WeakMap,$t=new WeakMap,Xt=new WeakMap,st=new WeakMap;const x1=l.forwardRef((e,t)=>{var n,o;const{width:i=1e3,height:a=600,style:s,className:c,logo:d,navigationMenu:r,navigationCenter:h,defaultSelectedElementUUIDs:u,defaultEditMode:f,prefiexName:m,reverseTree:v,onEditGroupElement:g,useContextMenuOptions:p=m1,handleKeyboard:w=y1,getPageTemplates:S,getMaterialTemplates:A}=e,[y,I]=z.useReducer(wu,pu(e)),b=z.useRef(null),E=z.useRef(new pn),C=z.useRef(new yn({defaultStorage:dr()})),V=z.useRef(new b1);return!((n=C.current)===null||n===void 0)&&n.getStatic("snapshotRecorder")||(o=C.current)===null||o===void 0||o.setStatic("snapshotRecorder",V.current),z.useEffect(()=>{if(f!=="page"){const T=Fe(y.editingDataPosition,y.data.elements);g==null||g({uuid:T==null?void 0:T.uuid,position:[...y.editingDataPosition]})}},[y.editingDataPosition]),z.useImperativeHandle(t,()=>({getSharedEvent(){return E.current},getSharedStore(){return C.current},dispatch(P){const{type:R,payload:_}=P;I({type:R,payload:_})}}),[]),z.useEffect(()=>(E.current||(E.current=new pn),C.current||(C.current=new yn({defaultStorage:dr()})),c1({sharedEvent:E.current,sharedStore:C.current}),()=>{var T,P;(T=C.current)===null||T===void 0||T.clear(),(P=E.current)===null||P===void 0||P.destroy(),E.current=null,C.current=null}),[]),z.useEffect(()=>{const T=C.current;T&&T.set("selectedUUIDs",[...y.selectedUUIDs])},[y.selectedUUIDs]),z.useEffect(()=>{const T=E.current;T==null||T.trigger("switchTheme",{theme:y.themeMode})},[y.themeMode]),z.useEffect(()=>{const T=E.current;T==null||T.trigger("changeLocale",{locale:y.localeCode})},[y.localeCode]),z.useEffect(()=>{const T=E.current;T==null||T.trigger("trackDataChange",{data:y.data})},[y.data]),z.useEffect(()=>{const T=E.current;T==null||T.trigger("trackEditingDataChange",{editingData:y.editingData,editingDataPosition:y.editingDataPosition})},[y.editingData,y.editingDataPosition]),z.useMemo(()=>l.createElement(ql,{localeCode:y.localeCode,topPrefix:m,themeMode:y.themeMode,getContainer:()=>b.current||document.body},l.createElement(bu,{value:{state:y,dispatch:I}},l.createElement(h1,{logo:d,navigationMenu:r,navigationCenter:h,ref:b,width:i,height:a,style:s,className:c,reverseTree:v,defaultSelectedElementUUIDs:u,sharedEvent:E.current,sharedStore:C.current,useContextMenuOptions:p,handleKeyboard:w,getPageTemplates:S,getMaterialTemplates:A}))),[m,i,a,y,I])});export{x1 as S};
